<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>自定义Android注解Part2:代码自动生成 | Idisfkj</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Android Annotation Processing," />
  

  <meta name="description" content="&amp;#x4E0A;&amp;#x4E00;&amp;#x671F;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x628A;butterknife-annotations&amp;#x4E2D;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#x53D8;&amp;#x91CF;&amp;#x90FD;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B9A;&amp;#x4E49;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;">
<meta property="og:type" content="article">
<meta property="og:title" content="自定义Android注解Part2:代码自动生成">
<meta property="og:url" content="www.rousetime.com/2018/07/04/自定义Android注解Part2-代码自动生成/index.html">
<meta property="og:site_name" content="Idisfkj">
<meta property="og:description" content="&amp;#x4E0A;&amp;#x4E00;&amp;#x671F;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x628A;butterknife-annotations&amp;#x4E2D;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#x53D8;&amp;#x91CF;&amp;#x90FD;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B9A;&amp;#x4E49;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;">
<meta property="og:image" content="www.rousetime.com/04/自定义Android注解Part2-代码自动生成/2018-07-10.jpg">
<meta property="og:image" content="www.rousetime.com/04/自定义Android注解Part2-代码自动生成/1.png">
<meta property="og:image" content="www.rousetime.com/04/自定义Android注解Part2-代码自动生成/wx.jpg">
<meta property="og:updated_time" content="2018-07-11T15:32:44.622Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="自定义Android注解Part2:代码自动生成">
<meta name="twitter:description" content="&amp;#x4E0A;&amp;#x4E00;&amp;#x671F;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x628A;butterknife-annotations&amp;#x4E2D;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#x53D8;&amp;#x91CF;&amp;#x90FD;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B9A;&amp;#x4E49;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;">
<meta name="twitter:image" content="www.rousetime.com/04/自定义Android注解Part2-代码自动生成/2018-07-10.jpg">

  

  
  <!-- <link href="/favicon.ico" rel="icon" type="image/x-icon"> -->
    <link rel="icon" href="/favicon.ico">
    <!-- <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" /> -->
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?ef89e68af5e136d5c22043f91cd139ea";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#init"><span class="toc-text">init</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getSupportedAnnotationTypes"><span class="toc-text">getSupportedAnnotationTypes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#process"><span class="toc-text">process</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaPoet"><span class="toc-text">JavaPoet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bindView"><span class="toc-text">bindView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setOnClickListener"><span class="toc-text">setOnClickListener</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#services"><span class="toc-text">services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#相关文章"><span class="toc-text">相关文章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关注"><span class="toc-text">关注</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-自定义Android注解Part2-代码自动生成" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">自定义Android注解Part2:代码自动生成</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.07.04</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>idisfkj</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/android/">android</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <p><img src="/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/2018-07-10.jpg" alt=""></p>
<p>&#x4E0A;&#x4E00;&#x671F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x628A;butterknife-annotations&#x4E2D;&#x7684;&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x90FD;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x4E86;&#xFF0C;&#x5206;&#x522B;&#x4E3A;BindView&#x3001;OnClick&#x4E0E;Keep&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8FDB;&#x5165;&#x672C;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF0C;&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x8DF3;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x67E5;&#x770B;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x8981;&#x4E0D;&#x7136;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x70B9;&#x4E91;&#x91CC;&#x96FE;&#x91CC;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5B83;&#x5C06;&#x4E0E;&#x5F00;&#x6E90;&#x5E93;ButterKnife&#x7684;&#x64CD;&#x4F5C;&#x7C7B;&#x4F3C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">class MainActivity : AppCompatActivity() {</div><div class="line"> </div><div class="line">    @BindView(R.id.public_service, R.string.public_service)</div><div class="line">    lateinit var sName: TextView</div><div class="line"> </div><div class="line">    @BindView(R.id.personal_wx, R.string.personal_wx)</div><div class="line">    lateinit var sPhone: TextView</div><div class="line"> </div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_main)</div><div class="line">        Butterknife.bind(this)</div><div class="line">    }</div><div class="line"> </div><div class="line">    @OnClick(R.id.public_service)</div><div class="line">    fun nameClick(view: View) {</div><div class="line">        Toast.makeText(this, getString(R.string.public_service_click_toast), Toast.LENGTH_LONG).show()</div><div class="line">    }</div><div class="line"> </div><div class="line">    @OnClick(R.id.personal_wx)</div><div class="line">    fun phoneClick(view: View) {</div><div class="line">        Toast.makeText(this, getString(R.string.personal_wx_click_toast), Toast.LENGTH_LONG).show()</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528;@BindView&#x6765;&#x7ED1;&#x5B9A;&#x6211;&#x7684;View&#xFF0C;&#x4F7F;&#x7528;@OnClick&#x6765;&#x7ED1;&#x5B9A;View&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;&#x4F7F;&#x7528;Butterknife.bind&#x6765;&#x7ED1;&#x5B9A;&#x8BE5;Class&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x3002;(&#x8BE5;&#x90E8;&#x5206;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x63D0;&#x53CA;)</p>
<p>&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x7ED1;&#x5B9A;&#x6CE8;&#x89E3;&#x5E93;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;1/3&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C06;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x90E8;&#x5206;&#x3002;&#x8FD9;&#x65F6;&#x5C31;&#x5230;&#x4E86;&#x4E0A;&#x671F;&#x63D0;&#x5230;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;Module&#xFF1A;butterknife-compiler&#x3002;</p>
<p><img src="/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/1.png" alt=""></p>
<p><strong>NameUtils</strong>&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x91CF;&#x7684;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x7C7B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">final class NameUtils {</div><div class="line"> </div><div class="line">    static String getAutoGeneratorTypeName(String typeName) {</div><div class="line">        return typeName + ConstantUtils.BINDING_BUTTERKNIFE_SUFFIX;</div><div class="line">    }</div><div class="line"> </div><div class="line">    static class Package{</div><div class="line">        static final String ANDROID_VIEW = &quot;android.view&quot;;</div><div class="line">    }</div><div class="line"> </div><div class="line">    static class Class {</div><div class="line">        static final String CLASS_VIEW = &quot;View&quot;;</div><div class="line">        static final String CLASS_ON_CLICK_LISTENER = &quot;OnClickListener&quot;;</div><div class="line">    }</div><div class="line"> </div><div class="line">    static class Method{</div><div class="line">        static final String BIND_VIEW = &quot;bindView&quot;;</div><div class="line">        static final String SET_ON_CLICK_LISTENER = &quot;setOnClickListener&quot;;</div><div class="line">        static final String ON_CLICK = &quot;onClick&quot;;</div><div class="line">    }</div><div class="line"> </div><div class="line">    static class Variable{</div><div class="line">        static final String ANDROID_ACTIVITY = &quot;activity&quot;;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
<p>NameUitls&#x5305;&#x542B;&#x4E86;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x540D;&#x79F0;&#xFF0C;&#x5305;&#x540D;&#xFF0C;&#x65B9;&#x6CD5;&#x540D;&#xFF0C;&#x53D8;&#x91CF;&#x540D;&#x3002;&#x603B;&#x4E4B;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x4EE3;&#x7801;&#x66F4;&#x5065;&#x5168;&#xFF0C;&#x65B9;&#x4FBF;&#x7BA1;&#x7406;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x7C7B;Processor&#x662F;&#x4ECA;&#x5929;&#x7684;&#x91CD;&#x4E2D;&#x4E4B;&#x91CD;&#x3002;&#x4E5F;&#x662F;&#x6CE8;&#x89E3;&#x5E93;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x3002;&#x7531;&#x4E8E;&#x6CE8;&#x89E3;&#x7684;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x5728;&#x6CE8;&#x89E3;&#x8FDB;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<strong>AbstractProcessor</strong>&#xFF0C;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x3002;</p>
<ol>
<li>init&#xFF1A;&#x521D;&#x59CB;&#x5316;&#x5FC5;&#x8981;&#x7684;&#x6570;&#x636E;</li>
<li>getSupportedAnnotationTypes&#xFF1A;&#x6240;&#x652F;&#x6301;&#x7684;&#x6CE8;&#x89E3;</li>
<li>process&#xFF1A;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#xFF0C;&#x7F16;&#x5199;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;</li>
</ol>
<h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><p>&#x4ECE;&#x7B80;&#x5355;&#x5230;&#x5BB9;&#x6613;&#xFF0C;&#x5148;&#x662F;init&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x770B;&#x4EE3;&#x7801;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public synchronized void init(ProcessingEnvironment processingEnv) {</div><div class="line">    super.init(processingEnv);</div><div class="line">    mFiler = processingEnv.getFiler();</div><div class="line">    mMessager = processingEnv.getMessager();</div><div class="line">    mElementUtils = processingEnv.getElementUtils();</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x65B9;&#x6CD5;&#x53C2;&#x6570;processingEnv&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x6240;&#x9700;&#x7684;&#x73AF;&#x5883;&#x72B6;&#x6001;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;getFiler()&#x3001;getMessager()&#x4E0E;getElementUthis()&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x521B;&#x5EFA;&#x6E90;&#x4EE3;&#x7801;&#x7684;Filer&#x3001;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x5668;Messager(&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5411;&#x5916;&#x754C;&#x53D1;&#x9001;&#x9519;&#x8BEF;&#x4FE1;&#x606F;)&#x4E0E;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#x6240;&#x9700;&#x7684;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x5F53;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6784;&#x5EFA;&#x597D;&#x4E86;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Filter&#x6765;&#x5C06;&#x4EE3;&#x7801;&#x5199;&#x5165;&#x5230;java&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5982;&#x9047;&#x9519;&#x8BEF;&#x4F7F;&#x7528;Messager&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//&#x5199;&#x5165;java&#x6587;</div><div class="line">try {</div><div class="line">    JavaFile.builder(packageName, typeBuilder.build()).build().writeTo(mFiler)</div><div class="line">} catch (IOException e) {</div><div class="line">    mMessager.printMessage(Diagnostic.Kind.ERROR, e.getMessage(), typeElement);</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x4EE3;&#x7801;&#x4E2D;&#x7684;JavaFile&#x4E0E;typeBuilder&#x90FD;&#x662F;JavaPoet&#x4E2D;&#x7684;&#x7C7B;&#x3002;JavaPote&#x4E3B;&#x8981;&#x63D0;&#x4F9B;Java API&#x6765;&#x5E2E;&#x52A9;&#x751F;&#x6210;<code>.java</code>&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x3002;</p>
<h2 id="getSupportedAnnotationTypes"><a href="#getSupportedAnnotationTypes" class="headerlink" title="getSupportedAnnotationTypes"></a>getSupportedAnnotationTypes</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public Set&lt;String&gt; getSupportedAnnotationTypes() {</div><div class="line">    return new TreeSet&lt;&gt;(Arrays.asList(</div><div class="line">            BindView.class.getCanonicalName(),</div><div class="line">            OnClick.class.getCanonicalName(),</div><div class="line">            Keep.class.getCanonicalName())</div><div class="line">    );</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF0C;&#x5305;&#x542B;&#x6240;&#x652F;&#x6301;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x5C06;&#x5176;&#x901A;&#x8FC7;set&#x96C6;&#x5408;&#x6765;&#x8FD4;&#x56DE;&#x3002;&#x8FD9;&#x91CC;&#x5C06;&#x6211;&#x4EEC;&#x4E0A;&#x4E00;&#x671F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x6DFB;&#x52A0;&#x5230;set&#x96C6;&#x5408;&#x4E2D;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><p>&#x5230;&#x4E86;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x6838;&#x5FC3;&#xFF0C;process&#x7528;&#x6765;&#x751F;&#x6210;&#x4E0E;&#x6CE8;&#x89E3;&#x76F8;&#x5339;&#x914D;&#x7684;&#x65B9;&#x6CD5;&#x4EE3;&#x7801;&#x3002;&#x901A;&#x8FC7;&#x89E3;&#x6790;Class&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x751F;&#x6210;&#x4E0E;&#x6CE8;&#x89E3;&#x76F8;&#x5173;&#x8054;&#x7684;&#x7C7B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {</div><div class="line">    ....</div><div class="line">    ....</div><div class="line">    return true;</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;annotations&#x4E0E;roundEnv&#xFF0C;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4EE3;&#x8868;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#xFF1B;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x5668;&#x6240;&#x9700;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x3002;</p>
<p>&#x5728;&#x5F00;&#x59CB;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5148;&#x8FC7;&#x6EE4;&#x6211;&#x4EEC;&#x6240;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x6CE8;&#x89E3;&#x3002;&#x56DE;&#x5934;&#x770B;getSupportedAnnotationTypes&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x652F;&#x6301;BindView&#x3001;OnClick&#x4E0E;Keep&#x8FD9;&#x4E09;&#x4E2A;&#x6CE8;&#x89E3;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x6790;&#x51FA;&#x76F8;&#x5339;&#x914D;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5355;&#x72EC;&#x62BD;&#x79BB;&#x51FA;&#x6765;&#xFF0C;&#x4EA4;&#x7531;getTypeElementsByAnnotationType&#x6765;&#x7BA1;&#x7406;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">private Set&lt;TypeElement&gt; getTypeElementsByAnnotationType(Set&lt;? extends TypeElement&gt; annotations, Set&lt;? extends Element&gt; elements) {</div><div class="line">    Set&lt;TypeElement&gt; result = new HashSet&lt;&gt;();</div><div class="line">    //&#x904D;&#x5386;&#x5305;&#x542B;&#x7684; package class method</div><div class="line">    for (Element element : elements) {</div><div class="line">        //&#x5339;&#x914D; class or interface</div><div class="line">        if (element instanceof TypeElement) {</div><div class="line">            boolean found = false;</div><div class="line">            //&#x904D;&#x5386;class&#x4E2D;&#x5305;&#x542B;&#x7684; filed method constructors</div><div class="line">            for (Element subElement : element.getEnclosedElements()) {</div><div class="line">                //&#x904D;&#x5386;element&#x4E2D;&#x5305;&#x542B;&#x7684;&#x6CE8;&#x91CA;</div><div class="line">                for (AnnotationMirror annotationMirror : subElement.getAnnotationMirrors()) {</div><div class="line">                    for (TypeElement annotation : annotations) {</div><div class="line">                        //&#x5339;&#x914D;&#x6CE8;&#x91CA;</div><div class="line">                        if (annotationMirror.getAnnotationType().asElement().equals(annotation)) {</div><div class="line">                            result.add((TypeElement) element);</div><div class="line">                            found = true;</div><div class="line">                            break;</div><div class="line">                        }</div><div class="line">                    }</div><div class="line">                    if (found) break;</div><div class="line">                }</div><div class="line">                if (found) break;</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    return result;</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x9996;&#x5148;&#x7406;&#x89E3;Element&#x662F;&#x4EC0;&#x4E48;&#xFF1F;Element&#x4EE3;&#x8868;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5305;&#x540D;&#x3001;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6CE8;&#x89E3;&#x6240;&#x652F;&#x6301;&#x7684;&#x4F5C;&#x7528;&#x7C7B;&#x578B;&#x3002;&#x7136;&#x540E;&#x518D;&#x56DE;&#x5230;&#x4EE3;&#x7801;&#x90E8;&#x5206;&#xFF0C;&#x5DF2;&#x7ECF;&#x7ED9;&#x51FA;&#x8BE6;&#x7EC6;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x3002;<br>&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x5230;&#x6709;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x7684;class&#x3002;&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;</p>
<ol>
<li>getEnclosedElements()&#xFF1A;&#x83B7;&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x95ED;&#x5305;&#x7684;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x4F8B;&#x4E2D;&#x5143;&#x7D20;&#x4E3A;MainActivity(TypeElement&#xFF0C;Type&#x4EE3;&#x8868;Class)&#xFF0C;&#x800C;&#x95ED;&#x5305;&#x7684;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#x5219;&#x4E3A;sName&#x3001;sPhone&#x3001;nameClick&#x3001;phoneClick&#x4E0E;onCreate&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x6709;&#x6CE8;&#x89E3;&#x7684;&#x5B57;&#x6BB5;&#x540D;&#x3001;&#x65B9;&#x6CD5;&#x540D;</li>
<li>getAnnotationMirrors()&#xFF1A;&#x83B7;&#x53D6;&#x4E0A;&#x8FF0;&#x95ED;&#x5305;&#x5143;&#x7D20;&#x7684;&#x6240;&#x6709;&#x6CE8;&#x89E3;&#x3002;&#x8FD9;&#x91CC;&#x5206;&#x522B;&#x4E3A;sName&#x4E0E;sPhone&#x4E0A;&#x7684;@BindeView&#x3001;nameClick&#x4E0E;phoneClick&#x4E0A;&#x7684;@OnClick&#x3001;onCreate&#x4E0A;&#x7684;@Override&#x3002;</li>
</ol>
<p>&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x6CD5;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x7684;&#x5C31;&#x662F;MainActivity&#xFF0C;&#x5B83;&#x5C06;&#x88AB;&#x8F6C;&#x5316;&#x4E3A;TypeElement&#x7C7B;&#x578B;&#x8FD4;&#x56DE;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x7531;processing&#x6765;&#x5904;&#x7406;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x56DE;&#x5230;process&#x65B9;&#x6CD5;&#x4E2D;&#x3002;&#x901A;&#x8FC7;getTypeElementsByAnnotationType()&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x7684;TypeElement(MainActivity)&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//&#x83B7;&#x53D6;&#x4E0E;annotation&#x76F8;&#x5339;&#x914D;&#x7684;TypeElement,&#x5373;&#x6709;&#x6CE8;&#x91CA;&#x58F0;&#x660E;&#x7684;class</div><div class="line">Set&lt;TypeElement&gt; elements = getTypeElementsByAnnotationType(annotations, roundEnv.getRootElements());</div></pre></td></tr></table></figure>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x518D;&#x83B7;&#x53D6;&#x6784;&#x5EFA;&#x7C7B;&#x6240;&#x9700;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//&#x5305;&#x540D;</div><div class="line">String packageName = mElementUtils.getPackageOf(typeElement).getQualifiedName().toString();</div><div class="line">//&#x7C7B;&#x540D;</div><div class="line">String typeName = typeElement.getSimpleName().toString();</div><div class="line">//&#x5168;&#x79F0;&#x7C7B;&#x540D;</div><div class="line">ClassName className = ClassName.get(packageName, typeName);</div><div class="line">//&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7C7B;&#x5168;&#x79F0;&#x540D;</div><div class="line">ClassName autoGenerationClassName = ClassName.get(packageName,</div><div class="line">        NameUtils.getAutoGeneratorTypeName(typeName));</div><div class="line"> </div><div class="line">//&#x6784;&#x5EFA;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;</div><div class="line">TypeSpec.Builder typeBuilder = TypeSpec.classBuilder(autoGenerationClassName)</div><div class="line">        .addModifiers(Modifier.PUBLIC)</div><div class="line">        .addAnnotation(Keep.class);</div></pre></td></tr></table></figure>
<p>&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x5212;&#x5206;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x56DB;&#x4E2A;&#x6B65;&#x9AA4;</p>
<ol>
<li>&#x83B7;&#x53D6;&#x5BF9;&#x5E94;typeElement&#x7684;&#x5305;&#x540D;&#xFF08;&#x8FD9;&#x91CC;&#x83B7;&#x53D6;&#x7684;&#x662F;com.idisfkj.androidapianalysis&#xFF09;</li>
<li>&#x83B7;&#x53D6;typeElement&#x7684;SimpleName&#xFF08;&#x8FD9;&#x91CC;&#x4E3A;MainActivity&#x5B57;&#x7B26;&#x4E32;&#xFF09;</li>
<li>&#x6839;&#x636E;&#x4E0A;&#x8FF0;&#x83B7;&#x53D6;&#x7684;&#x5305;&#x540D;&#x4E0E;SimpleName&#x6765;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;ClassName&#xFF0C;&#x4E3A;&#x4E86;&#x540E;&#x7EED;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#xFF08;&#x8FD9;&#x91CC;&#x4E3A;MainActivity&#x7C7B;&#xFF0C;&#x6CE8;&#x610F;&#x662F;MainActivity&#x7C7B;&#x578B;&#xFF09;</li>
<li>&#x6784;&#x5EFA;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;ClassName&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;NameUtils.getAutoGeneratorTypeName&#x8FDB;&#x884C;&#x4E86;&#x7EDF;&#x4E00;&#x547D;&#x540D;&#xFF08;&#x8FD9;&#x91CC;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x540D;&#x4E3A;MainActivity$Binding&#xFF0C;&#x90FD;&#x4EE5;&#x539F;&#x59CB;&#x7C7B;&#x540D;&#x540E;&#x9762;&#x52A0;$Binding&#xFF09;</li>
</ol>
<p>&#x6240;&#x6709;&#x4FE1;&#x606F;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x5B9A;&#x4E49;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x3002;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<strong>TypeSpec.Builder</strong>&#x6765;&#x6784;&#x5EFA;&#x3002;&#x5B83;&#x662F;JavaPoet&#x4E2D;&#x7684;&#x7C7B;&#x3002;</p>
<h2 id="JavaPoet"><a href="#JavaPoet" class="headerlink" title="JavaPoet"></a>JavaPoet</h2><p>&#x7531;&#x4E8E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;JavaFileObject&#x751F;&#x6210;.java&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x662F;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x63A8;&#x8350;&#x4F7F;&#x7528;JavaPoet&#x3002;JavaPoet&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5E2E;&#x52A9;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;&#x7684;&#x751F;&#x6210;.java&#x7684;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x3002;&#x60F3;&#x8981;&#x5168;&#x9762;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href="https://github.com/square/javapoet" target="_blank" rel="external">Github</a>&#x94FE;&#x63A5;&#x3002;&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x5FEB;&#x901F;&#x8BFB;&#x61C2;&#x8BE5;&#x6587;&#x7AE0;&#xFF0C;&#x8FD9;&#x91CC;&#x5BF9;&#x5176;&#x4E2D;&#x51E0;&#x4E2A;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4ECB;&#x7ECD;&#x3002;&#x5F53;&#x7136;&#x5728;&#x4F7F;&#x7528;&#x524D;&#x8FD8;&#x9700;&#x5728;butterknife-compiler&#x4E2D;&#x7684;builder.gradle&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dependencies {</div><div class="line">    implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</div><div class="line">    implementation project(&apos;:butterknife-annotations&apos;)</div><div class="line">    implementation &apos;com.squareup:javapoet:1.11.1&apos;</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x540C;&#x65F6;&#x4E5F;&#x5C06;&#x4E0A;&#x4E00;&#x671F;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;Module&#x5F15;&#x5165;&#x3002;</p>
<ol>
<li>TypeSpec.Builder: &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;</li>
<li>addModifiers: &#x5B9A;&#x4E49;private&#x3001;public&#x4E0E;protected&#x7C7B;&#x578B;</li>
<li>addAnnotation: &#x5BF9;Element&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;&#x3002;&#x4F8B;&#x5982;&#xFF1A;@Keep</li>
<li>TypeSpec.Builder -&gt; addMethod: &#x6DFB;&#x52A0;&#x65B9;&#x6CD5;</li>
<li>MethodSpec -&gt; addParameter: &#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E0E;&#x53C2;&#x6570;&#x540D;</li>
<li>MethodSpec -&gt; addStatement: &#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;&#x4EE3;&#x7801;&#x5757;&#x3002;&#x800C;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x4F1A;&#x4F7F;&#x7528;&#x5360;&#x4F4D;&#x7B26;&#x66FF;&#x4EE3;&#x3002;&#x4F8B;&#x5982;&#xFF1A;addStatement(&#x201C;$N($N)&#x201D;, &#x201C;bindView&#x201D;, &#x201C;activity&#x201D;)&#xFF0C;&#x5B83;&#x5C06;&#x4F1A;&#x751F;&#x6210;bindView(activity)&#x3002;&#x5360;&#x4F4D;&#x7B26;&#xFF1A;$N -&gt; name, $T -&gt; type(ClassName), $L -&gt; literals</li>
</ol>
<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x7406;&#x89E3;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//&#x6784;&#x5EFA;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;</div><div class="line">TypeSpec.Builder typeBuilder = TypeSpec.classBuilder(autoGenerationClassName)</div><div class="line">        .addModifiers(Modifier.PUBLIC)</div><div class="line">        .addAnnotation(Keep.class);</div><div class="line"> </div><div class="line">//&#x6DFB;&#x52A0;&#x6784;&#x9020;&#x65B9;&#x6CD5;</div><div class="line">typeBuilder.addMethod(MethodSpec.constructorBuilder()</div><div class="line">        .addModifiers(Modifier.PUBLIC)</div><div class="line">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY)</div><div class="line">        .addStatement(&quot;$N($N)&quot;,</div><div class="line">                NameUtils.Method.BIND_VIEW,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY)</div><div class="line">        .addStatement(&quot;$N($N)&quot;,</div><div class="line">                NameUtils.Method.SET_ON_CLICK_LISTENER,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY)</div><div class="line">        .build());</div></pre></td></tr></table></figure>
<p>&#x9996;&#x5148;&#x901A;&#x8FC7;TypeSpec.Builder&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x7C7B;&#x540D;&#x4E3A;autoGenerationClassName(MainActivity$Binding)&#xFF0C;&#x7C7B;&#x7684;&#x8BBF;&#x95EE;&#x7EA7;&#x522B;&#x4E3A;public&#xFF0C;&#x7531;&#x4E8E;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6DF7;&#x6DC6;&#x4F7F;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;@Keep&#x6CE8;&#x89E3;&#x3002;</p>
<p>&#x7136;&#x540E;&#x518D;&#x6765;&#x6DFB;&#x52A0;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;addMethod&#x3001;addModifiers&#x3001;addParameter&#x4E0E;addStatement&#x5206;&#x522B;&#x6784;&#x5EFA;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x540D;&#x3001;&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;&#x7EA7;&#x522B;&#x3001;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x4E0E;&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x3002;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6700;&#x7EC8;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Keep</div><div class="line">public class MainActivity$Binding {</div><div class="line">  public MainActivity$Binding(MainActivity activity) {</div><div class="line">    bindView(activity);</div><div class="line">    setOnClickListener(activity);</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x5728;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;bindView&#x4E0E;setOnClickListener&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x6784;&#x5EFA;&#x3002;</p>
<h2 id="bindView"><a href="#bindView" class="headerlink" title="bindView"></a>bindView</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//&#x6DFB;&#x52A0;bindView&#x6210;&#x5458;&#x65B9;&#x6CD5;</div><div class="line">MethodSpec.Builder bindViewBuilder = MethodSpec.methodBuilder(NameUtils.Method.BIND_VIEW)</div><div class="line">        .addModifiers(Modifier.PRIVATE)</div><div class="line">        .returns(TypeName.VOID)</div><div class="line">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY);</div><div class="line"> </div><div class="line">//&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x5185;&#x5BB9;</div><div class="line">for (VariableElement variableElement : ElementFilter.fieldsIn(typeElement.getEnclosedElements())) {</div><div class="line">    BindView bindView = variableElement.getAnnotation(BindView.class);</div><div class="line">    if (bindView != null) {</div><div class="line">        bindViewBuilder.addStatement(&quot;$N.$N=($T)$N.findViewById($L)&quot;,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                variableElement.getSimpleName(),</div><div class="line">                variableElement,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                bindView.value()[0]</div><div class="line">        ).addStatement(&quot;$N.$N.setText($N.getString($L))&quot;,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                variableElement.getSimpleName(),</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                bindView.value()[1]);</div><div class="line">    }</div><div class="line">}</div><div class="line"> </div><div class="line">typeBuilder.addMethod(bindViewBuilder.build());</div></pre></td></tr></table></figure>
<p>&#x4F7F;&#x7528;MethodSpec.Builder&#x6765;&#x521B;&#x5EFA;bindView&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x4E0E;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#x3002;&#x4F7F;&#x7528;returns&#x4E3A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;void&#x7C7B;&#x578B;&#x3002;&#x7136;&#x540E;&#x518D;&#x904D;&#x5386;MainActivity&#x4E2D;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x627E;&#x5230;&#x4E0E;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;BindView&#x76F8;&#x5339;&#x914D;&#x7684;&#x5B57;&#x6BB5;&#x3002;&#x6700;&#x540E;&#x5206;&#x522B;&#x5411;bindView&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;findViewById&#x4E0E;setText&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;typeBuilder&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x6267;&#x884C;&#x5B8C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x540E;&#x5728;MainActivity$Binding&#x4E2D;&#x5C55;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">private void bindView(MainActivity activity) {</div><div class="line">  activity.sName=(TextView)activity.findViewById(2131165265);</div><div class="line">  activity.sName.setText(activity.getString(2131427362));</div><div class="line">  activity.sPhone=(TextView)activity.findViewById(2131165262);</div><div class="line">  activity.sPhone.setText(activity.getString(2131427360));</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x5B9E;&#x73B0;&#x4E86;&#x6211;&#x4EEC;&#x6700;&#x521D;&#x7684;View&#x7684;&#x7ED1;&#x5B9A;&#x4E0E;TextView&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x8BBE;&#x7F6E;&#x3002;</p>
<h2 id="setOnClickListener"><a href="#setOnClickListener" class="headerlink" title="setOnClickListener"></a>setOnClickListener</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">//&#x6DFB;&#x52A0;setOnClickListener&#x6210;&#x5458;&#x65B9;&#x6CD5;</div><div class="line">MethodSpec.Builder setOnClickListenerBuilder = MethodSpec.methodBuilder(NameUtils.Method.SET_ON_CLICK_LISTENER)</div><div class="line">        .addModifiers(Modifier.PRIVATE)</div><div class="line">        .returns(TypeName.VOID)</div><div class="line">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY, Modifier.FINAL);</div><div class="line"> </div><div class="line">//&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x5185;&#x5BB9;</div><div class="line">ClassName viewClassName = ClassName.get(NameUtils.Package.ANDROID_VIEW, NameUtils.Class.CLASS_VIEW);</div><div class="line">ClassName onClickListenerClassName = ClassName.get(NameUtils.Package.ANDROID_VIEW, NameUtils.Class.CLASS_VIEW, NameUtils.Class.CLASS_ON_CLICK_LISTENER);</div><div class="line"> </div><div class="line">for (ExecutableElement executableElement : ElementFilter.methodsIn(typeElement.getEnclosedElements())) {</div><div class="line">    OnClick onClick = executableElement.getAnnotation(OnClick.class);</div><div class="line">    if (onClick != null) {</div><div class="line">        //&#x6784;&#x5EFA;&#x533F;&#x540D;class</div><div class="line">        TypeSpec typeSpec = TypeSpec.anonymousClassBuilder(&quot;&quot;)</div><div class="line">                .addSuperinterface(onClickListenerClassName)</div><div class="line">                .addMethod(MethodSpec.methodBuilder(NameUtils.Method.ON_CLICK)</div><div class="line">                        .addModifiers(Modifier.PUBLIC)</div><div class="line">                        .addParameter(viewClassName, NameUtils.Class.CLASS_VIEW)</div><div class="line">                        .returns(TypeName.VOID)</div><div class="line">                        .addStatement(&quot;$N.$N($N)&quot;,</div><div class="line">                                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                                executableElement.getSimpleName(),</div><div class="line">                                NameUtils.Class.CLASS_VIEW)</div><div class="line">                        .build())</div><div class="line">                .build();</div><div class="line"></div><div class="line">        setOnClickListenerBuilder.addStatement(&quot;$N.findViewById($L).setOnClickListener($L)&quot;,</div><div class="line">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class="line">                onClick.value(),</div><div class="line">                typeSpec);</div><div class="line">    }</div><div class="line">}</div><div class="line"> </div><div class="line">typeBuilder.addMethod(setOnClickListenerBuilder.build());</div></pre></td></tr></table></figure>
<p>&#x4E0E;bindView&#x65B9;&#x6CD5;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x533F;&#x540D;&#x7C7B;OnClickListener&#x4E0E;&#x7C7B;View&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x4E5F;&#x8981;&#x5B9A;&#x4E49;&#x4ED6;&#x4EEC;&#x7684;ClassName&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;TypeSpec&#x6765;&#x751F;&#x6210;&#x533F;&#x540D;&#x7C7B;&#x3002;&#x751F;&#x6210;&#x4E4B;&#x540E;&#x518D;&#x6DFB;&#x52A0;&#x5230;setOnClickListener&#x65B9;&#x6CD5;&#x4E2D;&#x3002;&#x6700;&#x540E;&#x518D;&#x5C06;setOnClickListener&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;MainActivity$Binding&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x5C55;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">private void setOnClickListener(final MainActivity activity) {</div><div class="line">  activity.findViewById(2131165265).setOnClickListener(new View.OnClickListener() {</div><div class="line">    public void onClick(View View) {</div><div class="line">      activity.nameClick(View);</div><div class="line">    }</div><div class="line">  });</div><div class="line">  activity.findViewById(2131165262).setOnClickListener(new View.OnClickListener() {</div><div class="line">    public void onClick(View View) {</div><div class="line">      activity.phoneClick(View);</div><div class="line">    }</div><div class="line">  });</div><div class="line">}</div></pre></td></tr></table></figure>
<p>&#x6211;&#x4EEC;&#x7684;MainActivity$Binding&#x7C7B;&#x5C31;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x5B8C;&#x6210;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5199;&#x5165;&#x5230;java&#x6587;&#x4EF6;&#x4E2D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//&#x5199;&#x5165;java&#x6587;&#x4EF6;</div><div class="line">try {</div><div class="line">    JavaFile.builder(packageName, typeBuilder.build()).build().writeTo(mFiler);</div><div class="line">} catch (IOException e) {</div><div class="line">    mMessager.printMessage(Diagnostic.Kind.ERROR, e.getMessage(), typeElement);</div><div class="line">}</div></pre></td></tr></table></figure>
<h2 id="services"><a href="#services" class="headerlink" title="services"></a>services</h2><p>&#x5728;butterknife-compiler&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x76EE;&#x5F55;&#xFF1A;<br><code>butterknife-compiler/src/main/resources/META-INF/services</code></p>
<p>&#x5728;services&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;<code>javax.annotation.processing.Processor</code>&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x7528;&#x6765;&#x544A;&#x8BC9;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x5F53;&#x5B83;&#x5728;&#x7F16;&#x8BD1;&#x4EE3;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6B63;&#x5904;&#x4E8E;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x4E2D;&#x65F6;&#xFF0C;&#x4F1A;&#x544A;&#x8BC9;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x5668;&#x6765;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x54EA;&#x4E9B;&#x7C7B;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x5C06;&#x6DFB;&#x52A0;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Processor&#x8DEF;&#x5F84;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">com.idisfkj.butterknife.compiler.Processor</div></pre></td></tr></table></figure>
<p>&#x8FD9;&#x6837;&#x6CE8;&#x89E3;&#x5668;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x6307;&#x5B9A;&#x7684;Processor&#x3002;&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;butterknife-compiler&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;<code>Make Project</code>&#x4E00;&#x4E0B;&#x5DE5;&#x7A0B;&#xFF0C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5168;&#x5C40;&#x641C;&#x7D22;&#x5230;MainActivity$Binding&#x6587;&#x4EF6;&#x4E86;&#x3002;&#x6216;&#x8005;&#x5728;&#x5982;&#x4E0B;&#x8DEF;&#x5F84;&#x4E2D;&#x67E5;&#x770B;&#xFF1A;</p>
<p><code>/app/build/generated/source/kapt/debug/com/idisfkj/androidapianalysis/MainActivity$Binding.java</code></p>
<p>&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href="https://github.com/idisfkj/android-api-analysis" target="_blank" rel="external">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<strong>feat_annotation_processing</strong></p>
<h2 id="&#x76F8;&#x5173;&#x6587;&#x7AE0;"><a href="#&#x76F8;&#x5173;&#x6587;&#x7AE0;" class="headerlink" title="&#x76F8;&#x5173;&#x6587;&#x7AE0;"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href="https://idisfkj.github.io/2018/07/01/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part1-%E6%B3%A8%E8%A7%A3%E5%8F%98%E9%87%8F/" target="_blank" rel="external">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1:&#x6CE8;&#x89E3;&#x53D8;&#x91CF;</a></p>
<p><a href="https://idisfkj.github.io/2018/07/11/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part3-%E7%BB%91%E5%AE%9A/" target="_blank" rel="external">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3:&#x7ED1;&#x5B9A;</a></p>
<h2 id="&#x5173;&#x6CE8;"><a href="#&#x5173;&#x6CE8;" class="headerlink" title="&#x5173;&#x6CE8;"></a>&#x5173;&#x6CE8;</h2><p><img src="/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/wx.jpg" alt="&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;"></p>

    
  </div>
</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">赞赏是一门艺术</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/rouse_wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/rouse_alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2018/07/01/自定义Android注解Part1-注解变量/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2018/07/11/自定义Android注解Part3-绑定/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
    <div class="fexo-comments comments-post">
  

  

  

  
  <div id="gitment-comments"></div>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script>
    (function () {
      var gitment = new Gitment({
        owner: 'idisfkj',
        repo: 'idisfkj.github.io',
        id: 'Wed Jul 04 2018 21:49:52 GMT+0800',
        oauth: {
          client_id: '8db1447b79b10b0d1fdb',
          client_secret: '887eda3d4ad3599e3139f3795ac17fa507ed85da'
        },
        
        
        
        
        
        
        
        
      })
      gitment.render('gitment-comments')
    })()
  </script>

  
  
</div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
