<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rouse</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.rousetime.com/"/>
  <updated>2022-12-20T13:12:30.198Z</updated>
  <id>https://www.rousetime.com/</id>
  
  <author>
    <name>Rouse</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MotionLayout进阶动画必修课</title>
    <link href="https://www.rousetime.com/2022/12/16/MotionLayout%E8%BF%9B%E9%98%B6%E5%8A%A8%E7%94%BB%E5%BF%85%E4%BF%AE%E8%AF%BE/"/>
    <id>https://www.rousetime.com/2022/12/16/MotionLayout进阶动画必修课/</id>
    <published>2022-12-16T07:56:52.000Z</published>
    <updated>2022-12-20T13:12:30.198Z</updated>
    
    <content type="html">&lt;p&gt;MotionLayout&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x5E2E;&amp;#x52A9;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7;xml&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x9664;&amp;#x4E86;&amp;#x5165;&amp;#x95E8;&amp;#x7EA7;&amp;#x7684;ConstraintSet&amp;#x3001;CustomAttribute&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x90FD;&amp;#x662F;&amp;#x7531;&amp;#x4E00;&amp;#x4E2A;start&amp;#xFF0C;&amp;#x5230;&amp;#x4E00;&amp;#x4E2A;end&amp;#x7684;&amp;#x8FC7;&amp;#x6E21;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&amp;#x867D;&amp;#x7136;&amp;#x5B83;&amp;#x4EEC;&amp;#x80FD;&amp;#x5B9E;&amp;#x73B0;&amp;#x6211;&amp;#x4EEC;&amp;#x65E5;&amp;#x5E38;&amp;#x4E2D;90%&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x4F46;&amp;#x590D;&amp;#x6742;&amp;#x7075;&amp;#x6D3B;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x9700;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;&amp;#x66F4;&amp;#x9AD8;&amp;#x7EA7;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x8FDB;&amp;#x884C;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x5C31;&amp;#x6765;&amp;#x7B80;&amp;#x5355;&amp;#x4ECB;&amp;#x7ECD;MotionLayout&amp;#x7684;&amp;#x8FDB;&amp;#x9636;&amp;#x73A9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x672C;&amp;#x6B21;&amp;#x7684;&amp;#x76EE;&amp;#x6807;&amp;#x662F;&amp;#x641E;&amp;#x660E;&amp;#x767D;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x4E2A;&amp;#x7684;&amp;#x7528;&amp;#x6CD5;&amp;#x4E0E;&amp;#x4F5C;&amp;#x7528;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;KeyFrameSet&lt;/li&gt;
&lt;li&gt;KeyPositon&lt;/li&gt;
&lt;li&gt;keyPositonType&lt;/li&gt;
&lt;li&gt;pathMotionArc&lt;/li&gt;
&lt;li&gt;transitionEasing&lt;/li&gt;
&lt;li&gt;KeyAttribute&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;KeyFrameSet&quot;&gt;&lt;a href=&quot;#KeyFrameSet&quot; class=&quot;headerlink&quot; title=&quot;KeyFrameSet&quot;&gt;&lt;/a&gt;KeyFrameSet&lt;/h2&gt;&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x7684;&amp;#x4E3B;&amp;#x89D2;&amp;#x90FD;&amp;#x5728;KeyFrameSet&amp;#x91CC;&amp;#x9762;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x9700;&amp;#x8981;&amp;#x81EA;&amp;#x7531;&amp;#x64CD;&amp;#x4F5C;&amp;#x52A8;&amp;#x753B;&amp;#x6BCF;&amp;#x4E00;&amp;#x5E27;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;&amp;#x5230;KeyFrameSet&amp;#x6807;&amp;#x7B7E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x4E0E;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;ConstraintSet&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x5185;&amp;#x90E8;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x57FA;&amp;#x4E8E;&amp;#x5E27;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x64CD;&amp;#x4F5C;&amp;#x6807;&amp;#x7B7E;&amp;#xFF0C;&amp;#x65B9;&amp;#x4FBF;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x8FDB;&amp;#x884C;&amp;#x52A8;&amp;#x753B;&amp;#x9AD8;&amp;#x5EA6;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0E;ConstraintSet&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;KeyFrameSet&amp;#x5FC5;&amp;#x987B;&amp;#x5B9A;&amp;#x4E49;&amp;#x5728;TranSiton&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:duration=&amp;quot;3000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:pathMotionArc=&amp;quot;none&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;OnSwipe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:dragDirection=&amp;quot;dragDown&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorId=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorSide=&amp;quot;bottom&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;KeyFrameSet&amp;#x6807;&amp;#x7B7E;&amp;#x3002;&amp;#x4E0B;&amp;#x6765;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x4F7F;&amp;#x7528;&amp;#x5B83;&amp;#x7684;&amp;#x5E27;&amp;#x6807;&amp;#x7B7E;&amp;#x6765;&amp;#x505A;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x793A;&amp;#x8303;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;KeyPosition&quot;&gt;&lt;a href=&quot;#KeyPosition&quot; class=&quot;headerlink&quot; title=&quot;KeyPosition&quot;&gt;&lt;/a&gt;KeyPosition&lt;/h2&gt;&lt;p&gt;KeyPosition&amp;#x662F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4EE5;&amp;#x6BCF;&amp;#x5E27;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#x505A;&amp;#x5177;&amp;#x4F53;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x80FD;&amp;#x529B;&amp;#x3002;&amp;#x5B83;&amp;#x4E3B;&amp;#x8981;&amp;#x6709;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x4E2A;&amp;#x5C5E;&amp;#x6027;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;motionTarget&amp;#xFF1A;&amp;#x4F5C;&amp;#x7528;&amp;#x7684;view&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;id&lt;/li&gt;
&lt;li&gt;framePostion&amp;#xFF1A;&amp;#x5177;&amp;#x4F53;&amp;#x5E27;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x5F00;&amp;#x59CB;&amp;#x5230;&amp;#x7ED3;&amp;#x675F;&amp;#xFF0C;&amp;#x503C;&amp;#x8303;&amp;#x56F4;&amp;#x4E3A;0~100&amp;#x3002;&lt;/li&gt;
&lt;li&gt;percentX/Y&amp;#xFF1A;&amp;#x57FA;&amp;#x4E8E;&amp;#x5F53;&amp;#x524D;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x7684;&amp;#x6BD4;&amp;#x4F8B;&amp;#xFF0C;&amp;#x503C;&amp;#x4E3A; -1 ~ 1&lt;/li&gt;
&lt;li&gt;keyPositionType&amp;#xFF1A;&amp;#x5F53;&amp;#x524D;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#xFF0C;&amp;#x76EE;&amp;#x524D;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x6709;&amp;#xFF0C;parentRelative&amp;#x3001;deltaRelative&amp;#x3001;pathRelative&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4E0A;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;ConstraintSet&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x6709;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#x5230;&amp;#x53F3;&amp;#x4E0B;&amp;#x89D2;&amp;#x7684;&amp;#x7B80;&amp;#x5355;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/1.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;ConstraintSet&amp;#x7684;&amp;#x6027;&amp;#x8D28;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x5B9A;&amp;#x4E49;&amp;#x5B83;&amp;#x4E2D;&amp;#x95F4;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x8F68;&amp;#x8FF9;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;&amp;#x8F68;&amp;#x8FF9;&amp;#x662F;&amp;#x5E73;&amp;#x6ED1;&amp;#x7684;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x4F7F;&amp;#x7528;KeyPositon&amp;#x6765;&amp;#x7B80;&amp;#x5355;&amp;#x6539;&amp;#x53D8;&amp;#x5B83;&amp;#x7684;&amp;#x8FD0;&amp;#x884C;&amp;#x8F68;&amp;#x8FF9;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:duration=&amp;quot;3000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:pathMotionArc=&amp;quot;none&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;KeyPosition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:framePosition=&amp;quot;10&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:keyPositionType=&amp;quot;parentRelative&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:motionTarget=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:percentX=&amp;quot;0.2&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:percentY=&amp;quot;0.35&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;KeyPosition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:framePosition=&amp;quot;80&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:keyPositionType=&amp;quot;parentRelative&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:motionTarget=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:percentX=&amp;quot;0.6&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:percentY=&amp;quot;0.8&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;OnSwipe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:dragDirection=&amp;quot;dragDown&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorId=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorSide=&amp;quot;bottom&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x4E09;&amp;#x4E2A;KeyPosition&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x5728;&amp;#x5B83;&amp;#x8FD0;&amp;#x52A8;&amp;#x7684;10&amp;#x3001;80&amp;#x4F4D;&amp;#x7F6E;&amp;#x8FDB;&amp;#x884C;&amp;#x6539;&amp;#x53D8;&amp;#x5B83;&amp;#x7684;&amp;#x8F68;&amp;#x8FF9;&amp;#x3002;&amp;#x8F68;&amp;#x8FF9;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x6539;&amp;#x53D8;&amp;#x901A;&amp;#x8FC7;percentX/Y&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/2.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8F68;&amp;#x8FF9;&amp;#x4E0A;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6709;&amp;#x4E86;&amp;#x4E24;&amp;#x4E2A;&amp;#x62D0;&amp;#x70B9;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;KeyPosition&amp;#x6211;&amp;#x4EEC;&amp;#x6210;&amp;#x529F;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x52A8;&amp;#x753B;&amp;#x8FD0;&amp;#x884C;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;keyPositionType&quot;&gt;&lt;a href=&quot;#keyPositionType&quot; class=&quot;headerlink&quot; title=&quot;keyPositionType&quot;&gt;&lt;/a&gt;keyPositionType&lt;/h2&gt;&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x770B;keyPositionType&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;parentRelative&amp;#xFF0C;&amp;#x53E6;&amp;#x5916;&amp;#x8FD8;&amp;#x6709;deltaRelative&amp;#x3001;pathRelative&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x662F;&amp;#x5B9A;&amp;#x4E49;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x5C31;&amp;#x662F;parentRelative&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;parentRelative&quot;&gt;&lt;a href=&quot;#parentRelative&quot; class=&quot;headerlink&quot; title=&quot;parentRelative&quot;&gt;&lt;/a&gt;parentRelative&lt;/h3&gt;&lt;p&gt;&amp;#x5B83;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x662F;&amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7236;&amp;#x5BB9;&amp;#x5668;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/3.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x6BD4;&amp;#x8F83;&amp;#x5E38;&amp;#x6709;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#xFF0C;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#x65F6;&amp;#xFF0C;&amp;#x4EE5;&amp;#x7236;&amp;#x5BB9;&amp;#x5668;&amp;#x4E3A;&amp;#x57FA;&amp;#x51C6;&amp;#xFF0C;&amp;#x66F4;&amp;#x7B26;&amp;#x5408;&amp;#x5E38;&amp;#x89C4;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x66F4;&amp;#x5F62;&amp;#x8C61;&amp;#x7684;&amp;#x5176;&amp;#x5B9E;&amp;#x662F;&amp;#x4EE5;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#x4E3A;&amp;#x539F;&amp;#x70B9;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;view&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x3002;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;deltaRelative&quot;&gt;&lt;a href=&quot;#deltaRelative&quot; class=&quot;headerlink&quot; title=&quot;deltaRelative&quot;&gt;&lt;/a&gt;deltaRelative&lt;/h3&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x662F;&amp;#x4EE5;&amp;#x5F53;&amp;#x524D;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#x7684;view&amp;#x7684;start&amp;#x4E3A;&amp;#x539F;&amp;#x70B9;(0,0)&amp;#xFF0C;end(1,1)&amp;#x4E3A;&amp;#x7EC8;&amp;#x70B9;&amp;#x6765;&amp;#x5EFA;&amp;#x7ACB;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/4.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x4E5F;&amp;#x662F;&amp;#x6BD4;&amp;#x8F83;&amp;#x76F4;&amp;#x89C2;&amp;#x7684;&amp;#xFF0C;&amp;#x7528;&amp;#x5904;&amp;#x4E5F;&amp;#x6BD4;&amp;#x8F83;&amp;#x5E38;&amp;#x89C1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#xFF0C;&amp;#x4F60;&amp;#x8981;&amp;#x505A;start&amp;#x5230;end&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x6C34;&amp;#x5E73;&amp;#x6216;&amp;#x8005;&amp;#x5782;&amp;#x76F4;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x4F7F;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x5C31;&amp;#x975E;&amp;#x5E38;&amp;#x7B80;&amp;#x5355;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x4F60;&amp;#x53EA;&amp;#x8981;&amp;#x64CD;&amp;#x4F5C;x/y&amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;pathRelative&quot;&gt;&lt;a href=&quot;#pathRelative&quot; class=&quot;headerlink&quot; title=&quot;pathRelative&quot;&gt;&lt;/a&gt;pathRelative&lt;/h3&gt;&lt;p&gt;&amp;#x5B83;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;start&amp;#x4E0E;end&amp;#x4F5C;&amp;#x4E3A;x&amp;#x8F74;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/5.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x770B;&amp;#x5B83;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x7CFB;&amp;#x5C31;&amp;#x5F88;&amp;#x660E;&amp;#x663E;&amp;#xFF0C;&amp;#x5B83;&amp;#x6BD4;&amp;#x8F83;&amp;#x9002;&amp;#x5408;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x57FA;&amp;#x4E8E;&amp;#x81EA;&amp;#x8EAB;start&amp;#x4E0E;end&amp;#x7684;&amp;#x5F27;&amp;#x7EBF;&amp;#x3001;&amp;#x66F2;&amp;#x7EBF;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;pathMotionArc&quot;&gt;&lt;a href=&quot;#pathMotionArc&quot; class=&quot;headerlink&quot; title=&quot;pathMotionArc&quot;&gt;&lt;/a&gt;pathMotionArc&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;pathMotionArc&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5C06;&amp;#x5B83;&amp;#x7684;&amp;#x503C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;none&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x770B;&amp;#x5230;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x5C31;&amp;#x662F;start&amp;#x5230;&amp;#x5E27;&amp;#x4F4D;&amp;#x7F6E;&amp;#x3001;&amp;#x6216;&amp;#x8005;&amp;#x5E27;&amp;#x4F4D;&amp;#x7F6E;&amp;#x5230;&amp;#x5E27;&amp;#x4F4D;&amp;#x7F6E;&amp;#x3001;&amp;#x4EA6;&amp;#x6216;&amp;#x8005;&amp;#x5E27;&amp;#x4F4D;&amp;#x7F6E;&amp;#x5230;end&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x66F2;&amp;#x7EBF;&amp;#x662F;&amp;#x4E24;&amp;#x70B9;&amp;#x76F4;&amp;#x7EBF;&amp;#x7684;&amp;#x8FDE;&amp;#x7EBF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;pathMotionArc&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#xFF0C;&amp;#x5B83;&amp;#x80FD;&amp;#x591F;&amp;#x6539;&amp;#x53D8;&amp;#x8DEF;&amp;#x5F84;&amp;#x4E2D;&amp;#x7684;&amp;#x5173;&amp;#x952E;&amp;#x70B9;&amp;#x76F4;&amp;#x63A5;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x66F2;&amp;#x7EBF;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x4E86;none&amp;#x4EE5;&amp;#x4E3A;&amp;#x5B83;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5176;&amp;#x4ED6;&amp;#x7684;&amp;#x51E0;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x4F53;&amp;#x9A8C;&amp;#x4E00;&amp;#x4E0B;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;startVertical&quot;&gt;&lt;a href=&quot;#startVertical&quot; class=&quot;headerlink&quot; title=&quot;startVertical&quot;&gt;&lt;/a&gt;startVertical&lt;/h3&gt;&lt;p&gt;&amp;#x57FA;&amp;#x4E8E;&amp;#x7AD6;&amp;#x76F4;&amp;#x65B9;&amp;#x5411;&amp;#x7684;&amp;#x5F27;&amp;#x7EBF;&amp;#x66F2;&amp;#x7EBF;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/6.gif&quot; alt&gt;&lt;/p&gt;
&lt;h3 id=&quot;startHorizontal&quot;&gt;&lt;a href=&quot;#startHorizontal&quot; class=&quot;headerlink&quot; title=&quot;startHorizontal&quot;&gt;&lt;/a&gt;startHorizontal&lt;/h3&gt;&lt;p&gt;&amp;#x57FA;&amp;#x4E8E;&amp;#x6C34;&amp;#x5E73;&amp;#x65B9;&amp;#x5411;&amp;#x7684;&amp;#x5F27;&amp;#x7EBF;&amp;#x66F2;&amp;#x7EBF;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/7.gif&quot; alt&gt;&lt;/p&gt;
&lt;h3 id=&quot;filp&quot;&gt;&lt;a href=&quot;#filp&quot; class=&quot;headerlink&quot; title=&quot;filp&quot;&gt;&lt;/a&gt;filp&lt;/h3&gt;&lt;p&gt;&amp;#x57FA;&amp;#x4E8E;&amp;#x7FFB;&amp;#x8F6C;&amp;#x7684;&amp;#x5F27;&amp;#x7EBF;&amp;#x66F2;&amp;#x7EBF;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/8.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x9488;&amp;#x5BF9;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x5E27;&amp;#x9009;&amp;#x62E9;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;pathMotionArc&amp;#x503C;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5B83;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x66F2;&amp;#x7EBF;&amp;#x6709;&amp;#x4F1A;&amp;#x66F4;&amp;#x52A0;&amp;#x4E30;&amp;#x5BCC;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;transitionEasing&quot;&gt;&lt;a href=&quot;#transitionEasing&quot; class=&quot;headerlink&quot; title=&quot;transitionEasing&quot;&gt;&lt;/a&gt;transitionEasing&lt;/h2&gt;&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x64CD;&amp;#x4F5C;&amp;#x5B83;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#xFF0C;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x7528;&amp;#x5230;transitionEasing&amp;#xFF0C;&amp;#x5B83;&amp;#x80FD;&amp;#x591F;&amp;#x6539;&amp;#x53D8;&amp;#x66F2;&amp;#x7EBF;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x76EE;&amp;#x524D;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x6709;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;linear&lt;/li&gt;
&lt;li&gt;standard&lt;/li&gt;
&lt;li&gt;accelerate&lt;/li&gt;
&lt;li&gt;decelerate&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x60F3;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;cubic&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;app:transitionEasing=&amp;quot;cubic(0.41, 1.97, 0.48, -1.12)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x901F;&amp;#x5EA6;&amp;#x66F2;&amp;#x7EBF;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/9.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E2D;&amp;#x95F4;&amp;#x901F;&amp;#x5EA6;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x53CD;&amp;#x5411;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x6548;&amp;#x679C;&amp;#x5C31;&amp;#x662F;&amp;#x5728;&amp;#x4E2D;&amp;#x95F4;&amp;#x65F6;&amp;#x523B;&amp;#x6709;&amp;#x4E2A;&amp;#x5F80;&amp;#x8FD4;&amp;#x6548;&amp;#x679C;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/10.gif&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;KeyAttribute&quot;&gt;&lt;a href=&quot;#KeyAttribute&quot; class=&quot;headerlink&quot; title=&quot;KeyAttribute&quot;&gt;&lt;/a&gt;KeyAttribute&lt;/h2&gt;&lt;p&gt;&amp;#x5728;KeyPosition&amp;#x4E2D;&amp;#x6211;&amp;#x4EEC;&amp;#x80FD;&amp;#x64CD;&amp;#x4F5C;&amp;#x7684;&amp;#x5C5E;&amp;#x6027;&amp;#x9650;&amp;#x5236;&amp;#x5728;x&amp;#x4E0E;y&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E00;&amp;#x4E9B;&amp;#x522B;&amp;#x7684;&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;&amp;#x5230;KeyAttribute&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x5173;&amp;#x952E;&amp;#x5E27;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7F29;&amp;#x653E;&amp;#x6548;&amp;#x679C;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;KeyAttribute&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:framePosition=&amp;quot;10&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:keyPositionType=&amp;quot;parentRelative&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:motionTarget=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:scaleY=&amp;quot;1.5&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:scaleX=&amp;quot;1.5&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;KeyAttribute&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:framePosition=&amp;quot;80&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:keyPositionType=&amp;quot;parentRelative&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:motionTarget=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:scaleY=&amp;quot;0.5&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:scaleX=&amp;quot;0.5&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/KeyFrameSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/11.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x4E86;&amp;#x7F29;&amp;#x653E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x63A7;&amp;#x5236;&amp;#x5B83;&amp;#x7684;alpha&amp;#x3001;visibility&amp;#x3001;rotation&amp;#x3001;translation&amp;#x7B49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x4EE5;&amp;#x4E0A;&amp;#x8FD9;&amp;#x4E9B;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E00;&amp;#x4E9B;&amp;#x6BD4;&amp;#x8F83;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x8BA9;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x6709;&amp;#x4E86;&amp;#x66F4;&amp;#x591A;&amp;#x7684;&amp;#x9009;&amp;#x62E9;&amp;#x4E0E;&amp;#x7A7A;&amp;#x95F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x5DF2;&amp;#x7ECF;&amp;#x638C;&amp;#x63E1;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E9B;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;MotionLayout&amp;#x57FA;&amp;#x672C;&amp;#x4E0A;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x89E3;&amp;#x51B3;&amp;#x4F60;&amp;#x6240;&amp;#x9700;&amp;#x7684;99%&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x6548;&amp;#x679C;&amp;#x3002;&amp;#x81F3;&amp;#x4E8E;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;1%&amp;#xFF0C;&amp;#x5F52;&amp;#x5C5E;&amp;#x4E8E;MotionaLayout&amp;#x7684;&amp;#x7EC8;&amp;#x6781;&amp;#x8FD0;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x4E00;&amp;#x5757;&amp;#x7531;&amp;#x4E8E;&amp;#x65E5;&amp;#x5E38;&amp;#x4F7F;&amp;#x7528;&amp;#x592A;&amp;#x5C11;&amp;#xFF0C;&amp;#x5927;&amp;#x5BB6;&amp;#x57FA;&amp;#x672C;&amp;#x90FD;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0D;&amp;#x5230;&amp;#xFF0C;&amp;#x5C31;&amp;#x4E0D;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#x7EC6;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x53EF;&amp;#x4EE5;&amp;#x7ED9;&amp;#x6211;&amp;#x7559;&amp;#x8A00;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x7559;&amp;#x8A00;&amp;#x4E0D;&amp;#x8F83;&amp;#x591A;&amp;#xFF0C;&amp;#x6211;&amp;#x4E5F;&amp;#x4F1A;&amp;#x9488;&amp;#x5BF9;&amp;#x6027;&amp;#x7684;&amp;#x51FA;&amp;#x4E00;&amp;#x7BC7;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x1F411;&amp;#x1F411;&amp;#x1F411;&quot;&gt;&lt;a href=&quot;#&amp;#x1F411;&amp;#x1F411;&amp;#x1F411;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x1F411;&amp;#x1F411;&amp;#x1F411;&quot;&gt;&lt;/a&gt;&amp;#x1F411;&amp;#x1F411;&amp;#x1F411;&lt;/h2&gt;&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x6765;&amp;#x4E2A;&amp;#x6709;&amp;#x8DA3;&amp;#x7684;&amp;#x95EE;&amp;#x7B54;&amp;#xFF0C;&amp;#x6211;&amp;#x6709;&amp;#x671B;&amp;#x8FDB;8&amp;#x5F3A;&amp;#xFF0C;&amp;#x4F60;&amp;#x80FD;&amp;#x633A;&amp;#x8FDB;&amp;#x51E0;&amp;#x5F3A;&amp;#xFF0C;&amp;#x6709;&amp;#x671B;&amp;#x8FDB;&amp;#x51B3;&amp;#x8D5B;&amp;#x5417;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/16/MotionLayout&amp;#x8FDB;&amp;#x9636;&amp;#x52A8;&amp;#x753B;&amp;#x5FC5;&amp;#x4FEE;&amp;#x8BFE;/12.png&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;MotionLayout&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x5E2E;&amp;#x52A9;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7;xml&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="MotionLayout" scheme="https://www.rousetime.com/tags/MotionLayout/"/>
    
  </entry>
  
  <entry>
    <title>MotionLayout教你轻松玩转动画</title>
    <link href="https://www.rousetime.com/2022/12/13/MotionLayout%E8%AE%A9%E4%BD%A0%E8%BD%BB%E6%9D%BE%E7%8E%A9%E8%BD%AC%E5%8A%A8%E7%94%BB/"/>
    <id>https://www.rousetime.com/2022/12/13/MotionLayout让你轻松玩转动画/</id>
    <published>2022-12-13T01:41:35.000Z</published>
    <updated>2022-12-14T15:55:41.823Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x8FD8;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;MotionLayout&amp;#xFF0C;&amp;#x4EA6;&amp;#x6216;&amp;#x8005;&amp;#x4F60;&amp;#x77E5;&amp;#x9053;&amp;#x4F46;&amp;#x4E00;&amp;#x76F4;&amp;#x90FD;&amp;#x6CA1;&amp;#x5B9E;&amp;#x9645;&amp;#x7528;&amp;#x8FC7;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C06;&amp;#x5E26;&amp;#x4F60;&amp;#x5168;&amp;#x9762;&amp;#x4F53;&amp;#x9A8C;MotionLayout&amp;#x7684;&amp;#x795E;&amp;#x5947;&amp;#x3001;&amp;#x7B80;&amp;#x5355;&amp;#x4E0E;&amp;#x9AD8;&amp;#x6548;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x76F8;&amp;#x4FE1;&amp;#x4F60;&amp;#x4E4B;&amp;#x540E;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#x5C31;&amp;#x4F1A;&amp;#x5BF9;&amp;#x5B83;&amp;#x604B;&amp;#x604B;&amp;#x4E0D;&amp;#x820D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#xFF0C;&amp;#x4F60;&amp;#x5C06;&amp;#x4F1A;&amp;#x660E;&amp;#x767D;&amp;#x5173;&amp;#x4E8E;MotionLayout&amp;#x7684;&amp;#x5982;&amp;#x4E0B;&amp;#x51E0;&amp;#x4E2A;&amp;#x8981;&amp;#x70B9;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;MotionLayout&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&lt;/li&gt;
&lt;li&gt;&amp;#x5C06;MotionLayout&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5E76;&amp;#x4F7F;&amp;#x7528;&lt;/li&gt;
&lt;li&gt;MotionScene&lt;/li&gt;
&lt;li&gt;ConstraintSet&lt;/li&gt;
&lt;li&gt;Transition&lt;/li&gt;
&lt;li&gt;CustomAttribute&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;MotionLayout&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&quot;&gt;&lt;a href=&quot;#MotionLayout&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&quot; class=&quot;headerlink&quot; title=&quot;MotionLayout&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&quot;&gt;&lt;/a&gt;MotionLayout&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x4ECB;&amp;#x7ECD;&amp;#x4E00;&amp;#x4E0B;MotionLayout&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;google&amp;#x63A8;&amp;#x51FA;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x5E03;&amp;#x5C40;view&amp;#xFF0C;&amp;#x57FA;&amp;#x4E8E;ConstraintLayout&amp;#x4E3A;&amp;#x57FA;&amp;#x7840;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BA9;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x76F4;&amp;#x63A5;&amp;#x901A;&amp;#x8FC7;xml&amp;#x5E03;&amp;#x5C40;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x8F7B;&amp;#x677E;&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x53EF;&amp;#x80FD;&amp;#x5C31;&amp;#x6709;&amp;#x4EBA;&amp;#x4F1A;&amp;#x95EE;&amp;#xFF0C;&amp;#x5B83;&amp;#x4E0E;&amp;#x4F20;&amp;#x7EDF;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x53C8;&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E0D;&amp;#x540C;&amp;#x5462;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x5B83;&amp;#x7684;&amp;#x4F18;&amp;#x52BF;&amp;#x5728;&amp;#x54EA;&amp;#x91CC;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x4F20;&amp;#x7EDF;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x4F1A;&amp;#x6709;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x77E2;&amp;#x91CF;&amp;#x52A8;&amp;#x753B;&lt;/li&gt;
&lt;li&gt;&amp;#x5C5E;&amp;#x6027;&amp;#x52A8;&amp;#x753B;&lt;/li&gt;
&lt;li&gt;LayoutTransition&amp;#x52A8;&amp;#x753B;&lt;/li&gt;
&lt;li&gt;&amp;#x4E00;&amp;#x4E9B;&amp;#x5C01;&amp;#x88C5;&amp;#x63A7;&amp;#x4EF6;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x80FD;&amp;#x529B;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;CoordinatorLayout&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E9B;&amp;#x53EF;&amp;#x80FD;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x7528;&amp;#x7684;&amp;#x6BD4;&amp;#x8F83;&amp;#x591A;&amp;#x7684;&amp;#xFF0C;&amp;#x5404;&amp;#x81EA;&amp;#x90FD;&amp;#x6709;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x573A;&amp;#x666F;&amp;#xFF0C;&amp;#x4F46;MotionLayout&amp;#x5374;&amp;#x57FA;&amp;#x672C;&amp;#x517C;&amp;#x5BB9;&amp;#x4E86;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x573A;&amp;#x666F;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;MotionLayout&amp;#x662F;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x7ED3;&amp;#x5408;&amp;#x4F53;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x80FD;&amp;#x591F;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x5C5E;&amp;#x6027;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x7279;&amp;#x5F81;&amp;#xFF1B;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;TransitionManager&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x754C;&amp;#x9762;&amp;#x7684;&amp;#x8FC7;&amp;#x6E21;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7ED3;&amp;#x5408;CoordinatorLayout&amp;#xFF0C;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x7279;&amp;#x6548;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x6B64;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;MotionLayout&amp;#x5728;Android Studio&amp;#x4E2D;&amp;#x505A;&amp;#x4E86;&amp;#x5B8C;&amp;#x7F8E;&amp;#x4F18;&amp;#x5316;&amp;#xFF0C;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5B83;&amp;#x4E13;&amp;#x6709;&amp;#x7684;&amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x80FD;&amp;#x8BA9;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x901A;&amp;#x8FC7;&amp;#x754C;&amp;#x9762;&amp;#x5316;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/1.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x7136;&amp;#x5B83;&amp;#x4E5F;&amp;#x6709;&amp;#x4E00;&amp;#x4E9B;&amp;#x5C40;&amp;#x9650;&amp;#x6027;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&lt;/p&gt;
&lt;p&gt;MotionLayout&amp;#x53EA;&amp;#x80FD;&amp;#x9488;&amp;#x5BF9;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x76F4;&amp;#x63A5;&amp;#x5B50;view&amp;#x8FDB;&amp;#x884C;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x4E0E;TransitionManager&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;TransitionManager&amp;#x53EF;&amp;#x4EE5;&amp;#x4F5C;&amp;#x7528;&amp;#x4E8E;&amp;#x5176;&amp;#x4ED6;&amp;#x7684;&amp;#x5D4C;&amp;#x5957;&amp;#x5E03;&amp;#x5C40;&amp;#xFF0C;&amp;#x7075;&amp;#x6D3B;&amp;#x6027;&amp;#x66F4;&amp;#x9AD8;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5C06;MotionLayout&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5E76;&amp;#x4F7F;&amp;#x7528;&quot;&gt;&lt;a href=&quot;#&amp;#x5C06;MotionLayout&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5E76;&amp;#x4F7F;&amp;#x7528;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5C06;MotionLayout&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5E76;&amp;#x4F7F;&amp;#x7528;&quot;&gt;&lt;/a&gt;&amp;#x5C06;MotionLayout&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5E76;&amp;#x4F7F;&amp;#x7528;&lt;/h2&gt;&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;ConstraintLayout&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x7248;&amp;#x672C;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x4F4E;&amp;#x5C31;&amp;#x65E0;&amp;#x9700;&amp;#x65B0;&amp;#x589E;&amp;#x4F9D;&amp;#x8D56;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x6709;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x589E;&amp;#x52A0;&amp;#x4E00;&amp;#x4E0B;&amp;#x4F9D;&amp;#x8D56;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;androidx.constraintlayout:constraintlayout:2.1.4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;MotionLayout&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;ConstraintLayout&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x8981;&amp;#x6709;ConstraintLayout&amp;#x4F9D;&amp;#x8D56;&amp;#x5373;&amp;#x53EF;&amp;#x3002; &lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;androidx.constraintlayout.motion.widget.MotionLayout xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    android:layout_width=&amp;quot;match_parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    android:layout_height=&amp;quot;match_parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:layoutDescription=&amp;quot;@xml/activity_motion_layout_scene&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:showPaths=&amp;quot;true&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;TextView&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:id=&amp;quot;@+id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:layout_width=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:layout_height=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:gravity=&amp;quot;center&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:background=&amp;quot;@color/colorAccent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:text=&amp;quot;@string/app_name&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android:textColor=&amp;quot;@android:color/white&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:layout_constraintStart_toStartOf=&amp;quot;parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:layout_constraintTop_toTopOf=&amp;quot;parent&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/androidx.constraintlayout.motion.widget.MotionLayout&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5982;&amp;#x679C;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5F15;&amp;#x7528;&amp;#x52A8;&amp;#x753B;&amp;#x7684;xml&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;layoutDescription&amp;#x6765;&amp;#x5F15;&amp;#x7528;&amp;#x3002;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;activity_motion_layout_scene&amp;#x6587;&amp;#x4EF6;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x6587;&amp;#x4EF6;&amp;#x5177;&amp;#x4F53;&amp;#x5185;&amp;#x5BB9;&lt;/p&gt;
&lt;h2 id=&quot;MotionScene&quot;&gt;&lt;a href=&quot;#MotionScene&quot; class=&quot;headerlink&quot; title=&quot;MotionScene&quot;&gt;&lt;/a&gt;MotionScene&lt;/h2&gt;&lt;p&gt;&amp;#x5728;MotionLayout&amp;#x4E2D;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;MotionScene&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&amp;#x4F60;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x5B9A;&amp;#x4E49;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x5728;MotionScene&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x4E3B;&amp;#x8981;&amp;#x5305;&amp;#x62EC;&amp;#x5982;&amp;#x4E0B;&amp;#x51E0;&amp;#x4E2A;&amp;#x52A8;&amp;#x753B;&amp;#x64CD;&amp;#x4F5C;&amp;#x6807;&amp;#x7B7E;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ConstraintSets&lt;/li&gt;
&lt;li&gt;Transition&lt;/li&gt;
&lt;li&gt;CustomAttribute&lt;/li&gt;
&lt;li&gt;KeyFramesSet&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x7ED9;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;TextView&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x79FB;&amp;#x52A8;&amp;#x52A8;&amp;#x753B;&amp;#xFF1A;&amp;#x4ECE;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#x79FB;&amp;#x52A8;&amp;#x5230;&amp;#x53F3;&amp;#x4E0B;&amp;#x89D2;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x8FD9;&amp;#x79CD;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x5E73;&amp;#x79FB;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;ConstraintSet&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x52A8;&amp;#x753B;&amp;#x7684;start&amp;#x4E0E;end&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;ConstraintSet&quot;&gt;&lt;a href=&quot;#ConstraintSet&quot; class=&quot;headerlink&quot; title=&quot;ConstraintSet&quot;&gt;&lt;/a&gt;ConstraintSet&lt;/h2&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6709;&amp;#x4E00;&amp;#x70B9;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#xFF0C;ConstraintSet&amp;#x4E2D;&amp;#x7684;&amp;#x7EA6;&amp;#x675F;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x5F71;&amp;#x54CD;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x5916;&amp;#x9762;&amp;#x7684;layout&amp;#x5E03;&amp;#x5C40;&amp;#x7684;&amp;#x7EA6;&amp;#x675F;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;MotionScene xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;ConstraintSet android:id=&amp;quot;@+id/start&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;Constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:id=&amp;quot;@+id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_width=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_height=&amp;quot;50dp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintStart_toStartOf=&amp;quot;parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintTop_toTopOf=&amp;quot;parent&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/ConstraintSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;ConstraintSet android:id=&amp;quot;@+id/end&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;Constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:id=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_width=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_height=&amp;quot;50dp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintBottom_toBottomOf=&amp;quot;parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintEnd_toEndOf=&amp;quot;parent&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/ConstraintSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/MotionScene&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x4E24;&amp;#x4E2A;ConstraintSet, &amp;#x5206;&amp;#x522B;&amp;#x662F;start&amp;#x4E0E;end&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;start&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x662F;&amp;#x52A8;&amp;#x753B;&amp;#x5F00;&amp;#x59CB;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;TextView&amp;#x5F00;&amp;#x59CB;&amp;#x7684;&amp;#x5C55;&amp;#x793A;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5305;&amp;#x62EC;&amp;#x5B83;&amp;#x7684;&amp;#x5BBD;&amp;#x9AD8;&amp;#xFF0C;&amp;#x5E03;&amp;#x5C40;&amp;#x7EA6;&amp;#x675F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x90FD;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x8986;&amp;#x76D6;layout&amp;#x4E2D;&amp;#x7684;&amp;#x5BBD;&amp;#x9AD8;&amp;#x4E0E;&amp;#x7EA6;&amp;#x675F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;end&amp;#xFF0C;&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x52A8;&amp;#x753B;&amp;#x7ED3;&amp;#x675F;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;TextView&amp;#x7ED3;&amp;#x675F;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x5C55;&amp;#x793A;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x5B83;&amp;#x7684;&amp;#x7EA6;&amp;#x675F;&amp;#x7531;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#xFF0C;&amp;#x6539;&amp;#x6210;&amp;#x4E86;&amp;#x53F3;&amp;#x4E0B;&amp;#x89D2;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x5F00;&amp;#x59CB;&amp;#x4E0E;&amp;#x7ED3;&amp;#x675F;&amp;#x5C31;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B9A;&amp;#x4F4D;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5E94;&amp;#x7528;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;start&amp;#x4E0E;end&amp;#xFF0C;&amp;#x8BA9;&amp;#x52A8;&amp;#x753B;&amp;#x751F;&amp;#x6548;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;id&amp;#x662F;&amp;#x9700;&amp;#x8981;&amp;#x5173;&amp;#x8054;&amp;#x6211;&amp;#x4EEC;layout&amp;#x4E2D;&amp;#x7684;id&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x624D;&amp;#x80FD;&amp;#x8BA9;MotionLayout&amp;#x8FDB;&amp;#x884C;&amp;#x5339;&amp;#x914D;&amp;#x90A3;&amp;#x4E2A;View&amp;#x9700;&amp;#x8981;&amp;#x8FDB;&amp;#x884C;&amp;#x52A8;&amp;#x753B;&amp;#x3002;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Transition&quot;&gt;&lt;a href=&quot;#Transition&quot; class=&quot;headerlink&quot; title=&quot;Transition&quot;&gt;&lt;/a&gt;Transition&lt;/h2&gt;&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9;&amp;#x52A8;&amp;#x753B;&amp;#x751F;&amp;#x6548;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;&amp;#x5230;Transition&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x5B83;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x6267;&amp;#x884C;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;br&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;MotionScene&amp;#x4E2D;&amp;#x518D;&amp;#x6DFB;&amp;#x52A0;Transition&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:constraintSetEnd=&amp;quot;@id/end&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:duration=&amp;quot;3000&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;id&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x524D;&amp;#x9762;ConstraintSet&amp;#x4E2D;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;id&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6267;&amp;#x884C;&amp;#x8D77;&amp;#x6765;&amp;#x3002;&amp;#x4E00;&amp;#x4E2A;&amp;#x5E73;&amp;#x79FB;&amp;#x52A8;&amp;#x753B;&amp;#x5C31;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x4EFB;&amp;#x4F55;java&amp;#x6216;&amp;#x8005;kotlin&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;xml&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540C;&amp;#x65F6;Android Studio&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x56FE;&amp;#x5F62;&amp;#x5316;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x4F60;&amp;#x8FDE;xml&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E0D;&amp;#x7528;&amp;#x5199;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/2.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x770B;&amp;#x53F3;&amp;#x8FB9;&amp;#x7684;&amp;#x66F2;&amp;#x7EBF;&amp;#x56FE;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7EBF;&amp;#x6027;&amp;#x7684;interpolator&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x6539;&amp;#x53D8;&amp;#x5B83;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x4F7F;&amp;#x7528;&amp;#x7CFB;&amp;#x7EDF;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;easeInOut&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/3.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x4E86;motioninterpolator&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5176;&amp;#x4ED6;&amp;#x5C5E;&amp;#x6027;&amp;#x8BBE;&amp;#x7F6E;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B9A;&amp;#x4E49;&amp;#x52A8;&amp;#x753B;&amp;#x8DEF;&amp;#x7EBF;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;pathMotionArc&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;startVertical&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/4.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5B83;&amp;#x7684;&amp;#x8FD0;&amp;#x52A8;&amp;#x66F2;&amp;#x7EBF;&amp;#x5C31;&amp;#x53D8;&amp;#x6210;&amp;#x4E86;&amp;#x57FA;&amp;#x4E8E;&amp;#x7AD6;&amp;#x76F4;&amp;#x65B9;&amp;#x5411;&amp;#x4E0A;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F27;&amp;#x7EBF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x6B64;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E3A;&amp;#x52A8;&amp;#x753B;&amp;#x6DFB;&amp;#x52A0;&amp;#x624B;&amp;#x52BF;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;OnSwipe&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/5.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x6ED1;&amp;#x52A8;&amp;#x624B;&amp;#x52BF;&amp;#xFF0C;&amp;#x624B;&amp;#x52BF;&amp;#x65B9;&amp;#x5411;&amp;#x662F;dragDown&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6ED1;&amp;#x52A8;id&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;tv&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;TextView&amp;#xFF0C;&amp;#x4F5C;&amp;#x7528;&amp;#x4E8E;TextView&amp;#x7684;&amp;#x6ED1;&amp;#x52A8;&amp;#x9762;&amp;#x662F;bottom&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/6.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E9B;&amp;#x4EE3;&amp;#x7801;&amp;#x5C42;&amp;#x9762;&amp;#x90FD;&amp;#x662F;&amp;#x5728;xml&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetEnd=&amp;quot;@id/end&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:duration=&amp;quot;3000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:motionInterpolator=&amp;quot;easeInOut&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:pathMotionArc=&amp;quot;startVertical&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;OnSwipe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:dragDirection=&amp;quot;dragDown&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorId=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:touchAnchorSide=&amp;quot;bottom&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;OnClick&amp;#xFF0C;&amp;#x8BA9;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x901A;&amp;#x8FC7;&amp;#x70B9;&amp;#x51FB;&amp;#x4E8B;&amp;#x4EF6;&amp;#x6765;&amp;#x89E6;&amp;#x53D1;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetEnd=&amp;quot;@id/end&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:duration=&amp;quot;3000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:motionInterpolator=&amp;quot;easeInOut&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    app:pathMotionArc=&amp;quot;startVertical&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;OnClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:clickAction=&amp;quot;toggle&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:targetId=&amp;quot;@id/tv&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x70B9;&amp;#x51FB;TextView&amp;#x5C31;&amp;#x80FD;&amp;#x5B9E;&amp;#x73B0;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x6765;&amp;#x56DE;&amp;#x5207;&amp;#x6362;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;CustomAttribute&quot;&gt;&lt;a href=&quot;#CustomAttribute&quot; class=&quot;headerlink&quot; title=&quot;CustomAttribute&quot;&gt;&lt;/a&gt;CustomAttribute&lt;/h2&gt;&lt;p&gt;&amp;#x5728;ConstraintSet&amp;#x9664;&amp;#x4E86;&amp;#x4F4D;&amp;#x7F6E;&amp;#x8FB9;&amp;#x754C;&amp;#x5C5E;&amp;#x6027;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5305;&amp;#x542B;&amp;#x4E86;&amp;#x5176;&amp;#x5B83;&amp;#x7684;&amp;#x5185;&amp;#x7F6E;&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;alpha&lt;/li&gt;
&lt;li&gt;visibility&lt;/li&gt;
&lt;li&gt;elevation&lt;/li&gt;
&lt;li&gt;rotation&lt;/li&gt;
&lt;li&gt;translation&lt;/li&gt;
&lt;li&gt;scale&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E9B;&amp;#x5C5E;&amp;#x6027;&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x62FF;&amp;#x6765;&amp;#x505A;&amp;#x52A8;&amp;#x753B;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x9700;&amp;#x8981;&amp;#x4F5C;&amp;#x7528;&amp;#x4E8E;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;&amp;#x5230;CustomAttribute&amp;#xFF0C;&amp;#x8DDF;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x4F20;&amp;#x7EDF;&amp;#x52A8;&amp;#x753B;ObjectAnimator&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x4F60;&amp;#x4E3A;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x5C5E;&amp;#x6027;&amp;#x63D0;&amp;#x4F9B;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;get/set&amp;#x65B9;&amp;#x6CD5;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6765;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x6539;&amp;#x53D8;view&amp;#x7684;&amp;#x80CC;&amp;#x666F;&amp;#x8272;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;backgroundColor&amp;#x5C5E;&amp;#x6027;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;backgroundColor&amp;#x5C5E;&amp;#x6027;&amp;#x5DF2;&amp;#x7ECF;&amp;#x652F;&amp;#x6301;set/get&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x62FF;&amp;#x6765;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;MotionScene xmlns:android=&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    xmlns:app=&amp;quot;http://schemas.android.com/apk/res-auto&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;ConstraintSet android:id=&amp;quot;@+id/start&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;Constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:id=&amp;quot;@+id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_width=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_height=&amp;quot;50dp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintStart_toStartOf=&amp;quot;parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintTop_toTopOf=&amp;quot;parent&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;CustomAttribute&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                app:attributeName=&amp;quot;backgroundColor&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                app:customColorValue=&amp;quot;@color/colorAccent&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/Constraint&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/ConstraintSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;ConstraintSet android:id=&amp;quot;@+id/end&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;Constraint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:id=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_width=&amp;quot;wrap_content&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android:layout_height=&amp;quot;50dp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintBottom_toBottomOf=&amp;quot;parent&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:layout_constraintEnd_toEndOf=&amp;quot;parent&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;CustomAttribute&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                app:attributeName=&amp;quot;backgroundColor&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                app:customColorValue=&amp;quot;@color/colorPrimary&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/Constraint&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/ConstraintSet&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;Transition&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:constraintSetEnd=&amp;quot;@id/end&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:constraintSetStart=&amp;quot;@+id/start&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:duration=&amp;quot;3000&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:motionInterpolator=&amp;quot;easeInOut&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app:pathMotionArc=&amp;quot;startVertical&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;OnSwipe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:dragDirection=&amp;quot;dragDown&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:touchAnchorId=&amp;quot;@id/tv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            app:touchAnchorSide=&amp;quot;bottom&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/Transition&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/MotionScene&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/2022/12/13/MotionLayout&amp;#x8BA9;&amp;#x4F60;&amp;#x8F7B;&amp;#x677E;&amp;#x73A9;&amp;#x8F6C;&amp;#x52A8;&amp;#x753B;/7.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5C5E;&amp;#x6027;&amp;#x540D;&amp;#x79F0;&amp;#x662F;backgroundColor&amp;#xFF0C;&amp;#x5C5E;&amp;#x6027;&amp;#x503C;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;customColorValue&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x6839;&amp;#x636E;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;&amp;#x5C5E;&amp;#x6027;&amp;#x503C;&amp;#x6765;&amp;#x51B3;&amp;#x5B9A;&amp;#x4F7F;&amp;#x7528;&amp;#x54EA;&amp;#x79CD;&amp;#xFF0C;&amp;#x76EE;&amp;#x524D;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x6709;&amp;#x5982;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;customColorValue&lt;/li&gt;
&lt;li&gt;customIntegerValue&lt;/li&gt;
&lt;li&gt;customFloatValue&lt;/li&gt;
&lt;li&gt;customStringValue&lt;/li&gt;
&lt;li&gt;customDimension&lt;/li&gt;
&lt;li&gt;customBoolean&lt;/li&gt;
&lt;li&gt;customReference&lt;/li&gt;
&lt;li&gt;customPixelDimension&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x5C5E;&amp;#x6027;&amp;#x7684;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8BF4;&amp;#x57FA;&amp;#x672C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B9E;&amp;#x73B0;&amp;#x6211;&amp;#x4EEC;&amp;#x65E5;&amp;#x5E38;&amp;#x9700;&amp;#x8981;&amp;#x7684;90%&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x9700;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x4E8E;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;10%&amp;#xFF0C;&amp;#x6D89;&amp;#x53CA;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x73B0;&amp;#x5728;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x5B9E;&amp;#x73B0;&amp;#x90FD;&amp;#x662F;&amp;#x7ED9;&amp;#x4E2A;start&amp;#x4E0E;end&amp;#xFF0C;&amp;#x4E2D;&amp;#x95F4;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x8FC7;&amp;#x7A0B;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x5E72;&amp;#x6D89;&amp;#x3002;&amp;#x4E00;&amp;#x65E6;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;&amp;#x66F4;&amp;#x7075;&amp;#x6D3B;&amp;#x66F4;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x9700;&amp;#x6C42;&amp;#xFF0C;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x624B;&amp;#x52A8;&amp;#x8BBE;&amp;#x7F6E;&amp;#x52A8;&amp;#x753B;&amp;#x7684;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x5EA6;&amp;#x7684;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x5B9A;&amp;#x5236;&amp;#x5316;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#xFF0C;MotionLayout&amp;#x4E5F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x5F0F;&amp;#x53EF;&amp;#x4EE5;&amp;#x671F;&amp;#x5F85;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x6765;&amp;#x4E2A;&amp;#x8C03;&amp;#x67E5;&amp;#xFF1A;&lt;code&gt;&amp;#x4F60;&amp;#x662F;&amp;#x5426;&amp;#x89C9;&amp;#x5F97;MotionLayout&amp;#x8BA9;&amp;#x52A8;&amp;#x753B;&amp;#x5B9E;&amp;#x73B0;&amp;#x66F4;&amp;#x52A0;&amp;#x8D8B;&amp;#x4E8E;&amp;#x7B80;&amp;#x5355;&amp;#x4E86;&amp;#x5462;&amp;#xFF1F;&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x8FD8;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;MotionLayout&amp;#xFF0C;&amp;#x4EA6;&amp;#x6216;&amp;#x8005;&amp;#x4F60;&amp;#x77E5;&amp;#x9053;&amp;#x4F46;&amp;#x4E
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="MotionLayout" scheme="https://www.rousetime.com/tags/MotionLayout/"/>
    
  </entry>
  
  <entry>
    <title>Android OpenGL ES 纹理</title>
    <link href="https://www.rousetime.com/2022/02/26/Android-OpenGL-ES-%E7%BA%B9%E7%90%86/"/>
    <id>https://www.rousetime.com/2022/02/26/Android-OpenGL-ES-纹理/</id>
    <published>2022-02-26T14:39:17.000Z</published>
    <updated>2022-12-02T14:48:28.623Z</updated>
    
    <content type="html">&lt;h2 id=&quot;OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;a href=&quot;#OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot; class=&quot;headerlink&quot; title=&quot;OpenGL ES &amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;/a&gt;OpenGL ES &amp;#x7CFB;&amp;#x5217;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.rousetime.com/2022/02/14/Android-OpenGL-ES-%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&quot;&gt;Android OpenGL ES &amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.rousetime.com/2022/02/25/Android-OpenGL-ES-%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F/&quot;&gt;Android OpenGL ES &amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x4E00;&amp;#x76F4;&amp;#x90FD;&amp;#x662F;&amp;#x5728;&amp;#x7ED8;&amp;#x5236;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x56FE;&amp;#x5F62;&amp;#x4E0E;&amp;#x989C;&amp;#x8272;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x4E00;&amp;#x5F20;&amp;#x56FE;&amp;#x7247;&amp;#x8BE5;&amp;#x5982;&amp;#x4F55;&amp;#x901A;&amp;#x8FC7;OpenGL ES&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;OpenGL ES&amp;#x7684;&amp;#x6E32;&amp;#x67D3;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&amp;#x7EB9;&amp;#x7406;&amp;#x6765;&amp;#x7ED8;&amp;#x5236;&amp;#x51FA;&amp;#x56FE;&amp;#x7247;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x7EB9;&amp;#x7406;&amp;#x5C06;&amp;#x56FE;&amp;#x7247;&amp;#x50CF;&amp;#x7D20;&amp;#x503C;&amp;#x4F20;&amp;#x9012;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;a href=&quot;#&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;/a&gt;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&lt;/h2&gt;&lt;p&gt;&amp;#x8FD8;&amp;#x662F;&amp;#x8001;&amp;#x89C4;&amp;#x77E9;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x5B9A;&amp;#x4E49;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private const val VERTEX_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;attribute vec4 a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;attribute vec2 a_textureCoordinate;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;varying vec2 v_textureCoordinate;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   v_textureCoordinate = a_textureCoordinate;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_Position = a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val FRAGMENT_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;precision mediump float;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;uniform sampler2D u_texture;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;varying vec2 v_textureCoordinate;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_FragColor = texture2D(u_texture, v_textureCoordinate);\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;a_textureCoordinate&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E0E;&amp;#x4E4B;&amp;#x524D;&amp;#x989C;&amp;#x8272;&amp;#x540C;&amp;#x7406;&amp;#xFF1B;&amp;#x7136;&amp;#x540E;&amp;#x662F;u_texture&amp;#xFF0C;&amp;#x4EE3;&amp;#x8868;&amp;#x4E8C;&amp;#x7EF4;&amp;#x7EB9;&amp;#x7406;&amp;#x53E5;&amp;#x67C4;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5916;&amp;#x754C;&amp;#x5C06;&amp;#x7EB9;&amp;#x7406;&amp;#x4F20;&amp;#x9012;&amp;#x7ED9;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x901A;&amp;#x8FC7;texture2D&amp;#x6765;&amp;#x8F6C;&amp;#x5316;&amp;#x6210;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&quot;&gt;&lt;a href=&quot;#&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&quot;&gt;&lt;/a&gt;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&lt;/h2&gt;&lt;p&gt;&amp;#x8981;&amp;#x7ED8;&amp;#x5236;&amp;#x7EB9;&amp;#x7406;&amp;#xFF0C;&amp;#x81EA;&amp;#x7136;&amp;#x8981;&amp;#x6709;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#xFF0C;&amp;#x8981;&amp;#x77E5;&amp;#x9053;&amp;#x5728;&amp;#x54EA;&amp;#x4E9B;&amp;#x4F4D;&amp;#x7F6E;&amp;#x8FDB;&amp;#x884C;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x5750;&amp;#x6807;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6574;&amp;#x4E2A;&amp;#x89C6;&amp;#x56FE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private val mVertexData = floatArrayOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -1.0f, 1.0f, -1.0f, -1.0f, 1.0f, -1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -1.0f, 1.0f, 1.0f, 1.0f, 1.0f, -1.0f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6574;&amp;#x4E2A;&amp;#x7EB9;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private val mTextureData = floatArrayOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 0.0f, 0.0f, 1.0f, 1.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 1.0f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val TEXTURE_DIMENSION_SIZE = 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x5230;&amp;#x9876;&amp;#x70B9;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x539F;&amp;#x70B9;&amp;#x662F;&amp;#x5728;&amp;#x4E2D;&amp;#x5FC3;&amp;#xFF0C;&amp;#x4E14;&amp;#x5750;&amp;#x6807;&amp;#x8303;&amp;#x56F4;&amp;#x662F;-1~1&amp;#x3002;&amp;#x800C;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x539F;&amp;#x70B9;&amp;#x662F;&amp;#x5728;&amp;#x5DE6;&amp;#x4E0B;&amp;#x89D2;&amp;#xFF0C;&amp;#x4E14;&amp;#x5750;&amp;#x6807;&amp;#x8303;&amp;#x56F4;&amp;#x662F;0~1&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x9876;&amp;#x70B9;&amp;#x5750;&amp;#x6807;&amp;#x4E0E;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x662F;&amp;#x4E0A;&amp;#x4E0B;&amp;#x98A0;&amp;#x5012;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#x6709;&amp;#x7684;&amp;#x540C;&amp;#x5B66;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x6709;&amp;#x7591;&amp;#x95EE;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x98A0;&amp;#x5012;&amp;#x5462;&amp;#xFF1F;&amp;#x90FD;&amp;#x98A0;&amp;#x5012;&amp;#x4E86;&amp;#x7ED8;&amp;#x5236;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x56FE;&amp;#x7247;&amp;#x4E0D;&amp;#x662F;&amp;#x4E5F;&amp;#x662F;&amp;#x98A0;&amp;#x5012;&amp;#x7684;&amp;#x5417;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x53EF;&amp;#x4EE5;&amp;#x5F88;&amp;#x660E;&amp;#x786E;&amp;#x7684;&amp;#x8BF4;&amp;#xFF0C;&amp;#x4E0D;&amp;#x4F1A;&amp;#x7684;&amp;#x3002;&amp;#x8BA9;&amp;#x6211;&amp;#x5148;&amp;#x4E70;&amp;#x4E2A;&amp;#x5173;&amp;#x5B50;&amp;#xFF0C;&amp;#x539F;&amp;#x56E0;&amp;#x540E;&amp;#x9762;&amp;#x518D;&amp;#x8BF4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x5750;&amp;#x6807;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x662F;&amp;#x5E72;&amp;#x4EC0;&amp;#x4E48;&amp;#x5462;&amp;#xFF1F;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x770B;&amp;#x4E86;&amp;#x524D;&amp;#x9762;&amp;#x51E0;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x5C31;&amp;#x4E0D;&amp;#x964C;&amp;#x751F;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x5230;Buffer&amp;#x4E2D;&amp;#xFF0C;&amp;#x5E76;&amp;#x4F20;&amp;#x9012;&amp;#x5230;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x586B;&amp;#x5145;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;a href=&quot;#&amp;#x586B;&amp;#x5145;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x6570;&amp;#x636E;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x586B;&amp;#x5145;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;/a&gt;&amp;#x586B;&amp;#x5145;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x6570;&amp;#x636E;&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x52A0;&amp;#x8F7D;&amp;#x7EB9;&amp;#x7406;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val textureBuffer = ByteBuffer.allocateDirect(mTextureData.size * Float.SIZE_BYTES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .order(ByteOrder.nativeOrder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .asFloatBuffer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;textureBuffer.put(mTextureData)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;textureBuffer.position(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val textureCoordinateLocation = GLES20.glGetAttribLocation(programId, &amp;quot;a_textureCoordinate&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x542F;&amp;#x52A8;&amp;#x5BF9;&amp;#x5E94;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glEnableVertexAttribArray(textureCoordinateLocation)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x586B;&amp;#x5145;&amp;#x5BF9;&amp;#x5E94;&amp;#x9876;&amp;#x70B9;&amp;#x5904;&amp;#x7EB9;&amp;#x7406;&amp;#x4F4D;&amp;#x7F6E;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glVertexAttribPointer(textureCoordinateLocation, TEXTURE_DIMENSION_SIZE, GLES20.GL_FLOAT, false, 0, textureBuffer)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x7ED8;&amp;#x5236;&amp;#x533A;&amp;#x57DF;&amp;#x5C31;&amp;#x786E;&amp;#x5B9A;&amp;#x4E86;&amp;#x3002;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x8DDF;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x989C;&amp;#x8272;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x5B8C;&amp;#x5168;&amp;#x76F8;&amp;#x540C;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x6211;&amp;#x4EEC;&amp;#x770B;&amp;#x5B83;&amp;#x4EEC;&amp;#x5728;&amp;#x6E90;&amp;#x7801;&amp;#x4E2D;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#x5B9A;&amp;#x4E49;&amp;#x5C31;&amp;#x80FD;&amp;#x660E;&amp;#x767D;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x6700;&amp;#x7EC8;&amp;#x76EE;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x5411;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FDB;&amp;#x884C;&amp;#x586B;&amp;#x5145;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x638C;&amp;#x63E1;&amp;#x5230;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x4EE5;&amp;#x540E;&amp;#x4EFB;&amp;#x4F55;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x586B;&amp;#x5145;&amp;#x90FD;&amp;#x662F;&amp;#x7C7B;&amp;#x4F3C;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x5957;&amp;#x8DEF;&amp;#x6240;&amp;#x5728;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&quot;&gt;&lt;/a&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&lt;/h2&gt;&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x7EB9;&amp;#x7406;&amp;#x533A;&amp;#x57DF;&amp;#x786E;&amp;#x5B9A;&amp;#x4E86;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x8981;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val textures = IntArray(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glGenTextures(textures.size, textures, 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x83B7;&amp;#x5F97;&amp;#x7684;&amp;#x662F;&amp;#x7EB9;&amp;#x7406;&amp;#x53E5;&amp;#x67C4;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x53E5;&amp;#x67C4;&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;textures&amp;#x4E2D;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x6307;&amp;#x5B9A;&amp;#x8BE5;&amp;#x7EB9;&amp;#x7406;&amp;#x5728;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x7684;&amp;#x901A;&amp;#x9053;&amp;#x7D22;&amp;#x5F15;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3A;0&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x6307;&amp;#x5B9A;&amp;#x901A;&amp;#x9053;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x7EB9;&amp;#x7406;&amp;#x53EF;&amp;#x4EE5;&amp;#x6709;&amp;#x591A;&amp;#x4E2A;&amp;#xFF0C;&amp;#x5F53;&amp;#x4F60;&amp;#x53BB;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x9700;&amp;#x8981;&amp;#x9009;&amp;#x62E9;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x901A;&amp;#x9053;&amp;#xFF0C;&amp;#x624D;&amp;#x80FD;&amp;#x7ED8;&amp;#x5236;&amp;#x51FA;&amp;#x81EA;&amp;#x5DF1;&amp;#x60F3;&amp;#x8981;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#x56E0;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x662F;&amp;#x4E8C;&amp;#x7EF4;&amp;#x56FE;&amp;#x7247;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x7EB9;&amp;#x7406;&amp;#x6307;&amp;#x5B9A;&amp;#x4E3A;GL_TEXTURE_2D&amp;#x4E8C;&amp;#x7EF4;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;a href=&quot;#&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;/a&gt;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&lt;/h2&gt;&lt;p&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x7EE7;&amp;#x7EED;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BBE;&amp;#x7F6E;&amp;#x7EB9;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;GL_TEXTURE_MIN_FILTER&amp;#x4E0E;GL_TEXTURE_MAG_FILTER&amp;#x662F;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x8FC7;&amp;#x6EE4;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4F5C;&amp;#x7528;&amp;#x662F;&amp;#x5F53;&amp;#x7EB9;&amp;#x7406;&amp;#x6E32;&amp;#x67D3;&amp;#x65F6;&amp;#x6BD4;&amp;#x539F;&amp;#x7406;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x5C0F;&amp;#x6216;&amp;#x8005;&amp;#x5927;&amp;#x65F6;&amp;#x8981;&amp;#x5982;&amp;#x4F55;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;GL_LINEAR&amp;#x662F;&amp;#x7EBF;&amp;#x6027;&amp;#x5904;&amp;#x7406;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5C55;&amp;#x793A;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x662F;&amp;#x66F4;&amp;#x5E73;&amp;#x6ED1;&amp;#xFF1B;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x79CD;&amp;#x662F;GL_NEAREST&amp;#xFF0C;&amp;#x5B83;&amp;#x4F1A;&amp;#x9009;&amp;#x62E9;&amp;#x4E0E;&amp;#x6700;&amp;#x8FD1;&amp;#x7684;&amp;#x50CF;&amp;#x7D20;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5C55;&amp;#x793A;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x6709;&amp;#x952F;&amp;#x9F7F;&amp;#x611F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x9876;&amp;#x70B9;&amp;#x5750;&amp;#x6807;&amp;#x6269;&amp;#x5927;5&amp;#x500D;&amp;#x770B;&amp;#x4E0B;&amp;#x4E24;&amp;#x79CD;&amp;#x5904;&amp;#x7406;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/linear.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/nearest.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;GL_TEXTURE_WRAP_T&amp;#x4E0E;GL_TEXTURE_WRAP_S&amp;#x662F;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x8D85;&amp;#x51FA;&amp;#x7EB9;&amp;#x7406;&amp;#x8303;&amp;#x56F4;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;GL_CLAMP_TO_EDGE&amp;#x4EE5;&amp;#x586B;&amp;#x5145;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;GL_REPEAT&amp;#x4EE5;&amp;#x91CD;&amp;#x590D;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x6269;&amp;#x5927;5&amp;#x500D;&amp;#x770B;&amp;#x4E0B;&amp;#x4E24;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/clamp.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/repeat.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;h2 id=&quot;&amp;#x586B;&amp;#x5145;&amp;#x4E0E;&amp;#x7ED1;&amp;#x5B9A;&amp;#x7EB9;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#&amp;#x586B;&amp;#x5145;&amp;#x4E0E;&amp;#x7ED1;&amp;#x5B9A;&amp;#x7EB9;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x586B;&amp;#x5145;&amp;#x4E0E;&amp;#x7ED1;&amp;#x5B9A;&amp;#x7EB9;&amp;#x7406;&quot;&gt;&lt;/a&gt;&amp;#x586B;&amp;#x5145;&amp;#x4E0E;&amp;#x7ED1;&amp;#x5B9A;&amp;#x7EB9;&amp;#x7406;&lt;/h2&gt;&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x901A;&amp;#x8FC7;&amp;#x52A0;&amp;#x8F7D;&amp;#x672C;&amp;#x5730;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x56FE;&amp;#x7247;&amp;#xFF0C;&amp;#x5C06;&amp;#x5176;&amp;#x901A;&amp;#x8FC7;OpenGL &amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x672C;&amp;#x5730;&amp;#x7684;&amp;#x56FE;&amp;#x7247;&amp;#x8F6C;&amp;#x5316;&amp;#x6210;Bitmap&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x5C06;&amp;#x8D44;&amp;#x6E90;&amp;#x56FE;&amp;#x7247;&amp;#x89E3;&amp;#x7801;&amp;#x6210;bitmap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val bitmap = BitmapFactory.decodeResource(context.resources, R.drawable.yaodaoji)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5C06;Bitmap&amp;#x586B;&amp;#x5145;&amp;#x5230;Buffer&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x5C06;bitmap&amp;#x586B;&amp;#x5145;&amp;#x5230;&amp;#x7EB9;&amp;#x7406;&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val bitmapBuffer = ByteBuffer.allocateDirect(bitmap.width * bitmap.height * 4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .order(ByteOrder.nativeOrder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bitmap.copyPixelsToBuffer(bitmapBuffer)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bitmapBuffer.position(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glTexImage2D(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    GLES20.GL_TEXTURE_2D,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    GLES20.GL_RGBA,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bitmap.width,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bitmap.height,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    GLES20.GL_RGBA,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    GLES20.GL_UNSIGNED_BYTE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bitmapBuffer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E00;&amp;#x6B65;&amp;#x518D;&amp;#x719F;&amp;#x6089;&amp;#x4E0D;&amp;#x8FC7;&amp;#x4E86;&amp;#xFF0C;&amp;#x5C06;Bitmap&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x5230;Buffer&amp;#x4E2D;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x901A;&amp;#x8FC7;glTexImage2D&amp;#x5C06;&amp;#x5176;&amp;#x586B;&amp;#x5145;&amp;#x5230;&amp;#x7EB9;&amp;#x7406;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x8BF4;&amp;#x5230;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x4E0E;&amp;#x9876;&amp;#x70B9;&amp;#x5750;&amp;#x6807;&amp;#x4E0A;&amp;#x4E0B;&amp;#x98A0;&amp;#x5012;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E0D;&amp;#x4F1A;&amp;#x9020;&amp;#x6210;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x56FE;&amp;#x7247;&amp;#x4E0A;&amp;#x4E0B;&amp;#x98A0;&amp;#x5012;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B54;&amp;#x6848;&amp;#x5C31;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6E32;&amp;#x67D3;&amp;#x56FE;&amp;#x7247;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;Bitmap&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x800C;Bitmap&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5750;&amp;#x6807;&amp;#x662F;&amp;#x5728;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6B64;&amp;#x65F6;&amp;#x52A0;&amp;#x8F7D;&amp;#x7684;Bitmap&amp;#x6570;&amp;#x636E;&amp;#x662F;&amp;#x4E0E;&amp;#x7EB9;&amp;#x7406;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x4E0A;&amp;#x4E0B;&amp;#x98A0;&amp;#x5012;&amp;#x7684;&amp;#x3002;&amp;#x800C;&amp;#x7EB9;&amp;#x7406;&amp;#x53C8;&amp;#x4E0E;&amp;#x9876;&amp;#x70B9;&amp;#x4E0A;&amp;#x4E0B;&amp;#x98A0;&amp;#x5012;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E00;&amp;#x6765;&amp;#x4E00;&amp;#x56DE;&amp;#x5C31;&amp;#x521A;&amp;#x597D;&amp;#x62E8;&amp;#x6B63;&amp;#x4E86;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x771F;&amp;#x6B63;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x56FE;&amp;#x7247;&amp;#x5C31;&amp;#x521A;&amp;#x597D;&amp;#x662F;&amp;#x6B63;&amp;#x786E;&amp;#x7684;&amp;#x65B9;&amp;#x5411;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7EB9;&amp;#x7406;&amp;#x6570;&amp;#x636E;&amp;#x6709;&amp;#x4E86;&amp;#xFF0C;&amp;#x518D;&amp;#x6765;&amp;#x5C06;&amp;#x5176;&amp;#x7ED1;&amp;#x5B9A;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x4E0A;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x7ED1;&amp;#x5B9A;&amp;#x7279;&amp;#x5B9A;&amp;#x7D22;&amp;#x5F15;&amp;#x7EB9;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val textureLocation = GLES20.glGetUniformLocation(programId, &amp;quot;u_texture&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glUniform1i(textureLocation, 0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;0&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x521B;&amp;#x5EFA;&amp;#x7EB9;&amp;#x7406;&amp;#x65F6;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x901A;&amp;#x9053;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x80FD;&amp;#x5C06;&amp;#x5176;&amp;#x7ED1;&amp;#x5B9A;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7EB9;&amp;#x7406;&amp;#x901A;&amp;#x9053;&amp;#x4E0A;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6E32;&amp;#x67D3;&quot;&gt;&lt;a href=&quot;#&amp;#x6E32;&amp;#x67D3;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6E32;&amp;#x67D3;&quot;&gt;&lt;/a&gt;&amp;#x6E32;&amp;#x67D3;&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BBE;&amp;#x7F6E;&amp;#x6E05;&amp;#x5C4F;&amp;#x989C;&amp;#x8272;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glClearColor(1.0f, 1.0f, 1.0f, 1.0f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6E05;&amp;#x5C4F;&amp;#x5904;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BBE;&amp;#x7F6E;&amp;#x89C6;&amp;#x56FE;&amp;#x5927;&amp;#x5C0F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glViewport(0, 0, mSurfaceViewWidth, mSurfaceViewHeight)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6E32;&amp;#x67D3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, mVertexData.size / VERTEX_DIMENSION_SIZE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x6548;&amp;#x679C;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/result.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;h2 id=&quot;&amp;#x4F18;&amp;#x5316;&quot;&gt;&lt;a href=&quot;#&amp;#x4F18;&amp;#x5316;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4F18;&amp;#x5316;&quot;&gt;&lt;/a&gt;&amp;#x4F18;&amp;#x5316;&lt;/h2&gt;&lt;p&gt;&amp;#x6709;&amp;#x51E0;&amp;#x4E2A;&amp;#x70B9;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x4F18;&amp;#x5316;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x51CF;&amp;#x5C11;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;a href=&quot;#&amp;#x51CF;&amp;#x5C11;&amp;#x6570;&amp;#x636E;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x51CF;&amp;#x5C11;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;/a&gt;&amp;#x51CF;&amp;#x5C11;&amp;#x6570;&amp;#x636E;&lt;/h3&gt;&lt;p&gt;&amp;#x5176;&amp;#x4E2D;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;GL_TRIANGLES&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#xFF0C;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x6211;&amp;#x4EEC;&amp;#x77E5;&amp;#x9053;&amp;#x8FD9;&amp;#x79CD;&amp;#x6E32;&amp;#x67D3;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x5171;&amp;#x7528;&amp;#x9876;&amp;#x70B9;&amp;#x7684;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x91CF;&amp;#x8FC7;&amp;#x591A;&amp;#xFF0C;&amp;#x5360;&amp;#x7528;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x8FC7;&amp;#x5927;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x51CF;&amp;#x5C11;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;GL_TRIANGLE_STRIP&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x8C03;&amp;#x6574;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7EB9;&amp;#x7406;&amp;#x5750;&amp;#x6807;&amp;#x4E86;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6574;&amp;#x4E2A;&amp;#x89C6;&amp;#x56FE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ---&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//   \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ---&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private val mVertexData = floatArrayOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -1.0f, -1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, -1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    -1.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, 1.0f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6574;&amp;#x4E2A;&amp;#x7EB9;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ---&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//   /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ---&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private val mTextureData = floatArrayOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 0.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, 0.0f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x90FD;&amp;#x662F;6&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x5C06;&amp;#x5B83;&amp;#x4EEC;&amp;#x90FD;&amp;#x4FEE;&amp;#x6539;&amp;#x6210;4&amp;#x4E2A;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;GL_TRIANGLE_STRIP&amp;#x7684;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x5408;&amp;#x7406;&amp;#x5B9A;&amp;#x4E49;&amp;#x56DB;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B8C;&amp;#x5168;&amp;#x8986;&amp;#x76D6;&amp;#x6574;&amp;#x4E2A;&amp;#x5C4F;&amp;#x5E55;&amp;#xFF0C;&amp;#x5373;&amp;#x56DB;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x7ED8;&amp;#x5236;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x521A;&amp;#x597D;&amp;#x80FD;&amp;#x591F;&amp;#x7EC4;&amp;#x5408;&amp;#x6210;&amp;#x5C4F;&amp;#x5E55;&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x89C6;&amp;#x56FE;&amp;#x4E0E;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x98A0;&amp;#x5012;&amp;#x6027;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x65B9;&amp;#x5411;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD0;&amp;#x884C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x6548;&amp;#x679C;&amp;#x8FD8;&amp;#x662F;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x518D;&amp;#x5C55;&amp;#x793A;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x9632;&amp;#x6B62;&amp;#x53D8;&amp;#x5F62;&quot;&gt;&lt;a href=&quot;#&amp;#x9632;&amp;#x6B62;&amp;#x53D8;&amp;#x5F62;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9632;&amp;#x6B62;&amp;#x53D8;&amp;#x5F62;&quot;&gt;&lt;/a&gt;&amp;#x9632;&amp;#x6B62;&amp;#x53D8;&amp;#x5F62;&lt;/h3&gt;&lt;p&gt;&amp;#x800C;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;&amp;#x6548;&amp;#x679C;&amp;#x56FE;&amp;#x7247;&amp;#x53D8;&amp;#x5F62;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x7531;&amp;#x4E8E;&amp;#x539F;&amp;#x56FE;&amp;#x7247;&amp;#x7684;&amp;#x5BBD;&amp;#x9AD8;&amp;#x5C3A;&amp;#x5BF8;&amp;#x6BD4;&amp;#x4F8B;&amp;#x4E0E;&amp;#x5C55;&amp;#x793A;&amp;#x7684;&amp;#x5C4F;&amp;#x5E55;&amp;#x5BBD;&amp;#x9AD8;&amp;#x5C3A;&amp;#x5BF8;&amp;#x6BD4;&amp;#x4F8B;&amp;#x4E0D;&amp;#x4E00;&amp;#x81F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x77E5;&amp;#x9053;&amp;#x539F;&amp;#x56E0;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x5C31;&amp;#x6709;&amp;#x4E86;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x56FE;&amp;#x7247;&amp;#x7EB9;&amp;#x7406;&amp;#x4E0E;&amp;#x6E32;&amp;#x67D3;&amp;#x7684;&amp;#x5C4F;&amp;#x5E55;&amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5BBD;&amp;#x9AD8;&amp;#x7F29;&amp;#x653E;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x80FD;&amp;#x4FDD;&amp;#x8BC1;&amp;#x6E32;&amp;#x67D3;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x56FE;&amp;#x7247;&amp;#x80FD;&amp;#x591F;&amp;#x4E0D;&amp;#x53D8;&amp;#x5F62;&amp;#x5C55;&amp;#x793A;&amp;#x3002;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x4E0E;&amp;#x6211;&amp;#x4EEC;&amp;#x6B63;&amp;#x5E38;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;ImageView&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E0D;&amp;#x53D8;&amp;#x5F62;&amp;#x7684;&amp;#x505A;&amp;#x6CD5;&amp;#x4E00;&amp;#x81F4;&amp;#x3002;&amp;#x53EA;&amp;#x4E0D;&amp;#x8FC7;&amp;#x662F;ImageView&amp;#x5185;&amp;#x90E8;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x8BBE;&amp;#x7F6E;ScaleType&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x7F29;&amp;#x653E;&amp;#x5904;&amp;#x7406;&amp;#x65B9;&amp;#x5F0F;&amp;#x5C31;&amp;#x4E0D;&amp;#x8D34;&amp;#x6E90;&amp;#x4EE3;&amp;#x7801;&amp;#x4E86;&amp;#xFF0C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x5DF1;&amp;#x53BB;&amp;#x67E5;&amp;#x770B;&amp;#x6E90;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x8FD9;&amp;#x91CC;&amp;#x53EA;&amp;#x8BF4;&amp;#x4E00;&amp;#x4E0B;&amp;#x6700;&amp;#x7EC8;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x5C06;Bitmap&amp;#x52A0;&amp;#x8F7D;&amp;#x5230;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x8FDB;&amp;#x884C;&amp;#x7EB9;&amp;#x7406;&amp;#x7F29;&amp;#x653E;&amp;#x5904;&amp;#x7406;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x52A0;&amp;#x8F7D;&amp;#x7EB9;&amp;#x7406;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val textureBuffer = ByteBuffer.allocateDirect(mTextureData.size * Float.SIZE_BYTES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .order(ByteOrder.nativeOrder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .asFloatBuffer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// textureBuffer.put(mTextureData)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;textureBuffer.put(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6839;&amp;#x636E;&amp;#x56FE;&amp;#x7247;&amp;#x8FDB;&amp;#x884C;&amp;#x7EB9;&amp;#x7406;&amp;#x7F29;&amp;#x653E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Utils.adapterCoordinate(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mTextureData,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        glSurfaceView.width,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        glSurfaceView.height,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bitmap.width,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bitmap.height,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ScaleType.CENTER_FIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;textureBuffer.position(0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;&amp;#x5C45;&amp;#x4E2D;&amp;#x7B49;&amp;#x6BD4;&amp;#x7F29;&amp;#x653E;&amp;#xFF0C;&amp;#x518D;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x5904;&amp;#x7406;&amp;#x540E;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/26/Android-OpenGL-ES-&amp;#x7EB9;&amp;#x7406;/f_result.jpeg&quot; width=&quot;375&quot; height=&quot;750&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&amp;#x7EB9;&amp;#x7406;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E5F;&amp;#x5E76;&amp;#x4E0D;&amp;#x96BE;&amp;#xFF0C;&amp;#x76F8;&amp;#x4FE1;&amp;#x4E00;&amp;#x8DEF;&amp;#x8D70;&amp;#x4E0B;&amp;#x6765;&amp;#x7684;&amp;#x540C;&amp;#x5B66;&amp;#x90FD;&amp;#x6709;&amp;#x6240;&amp;#x4F53;&amp;#x4F1A;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E5F;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#x8BF4;&amp;#x660E;OpenGL ES&amp;#x4E5F;&amp;#x6CA1;&amp;#x6709;&amp;#x5F88;&amp;#x96BE;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x5F00;&amp;#x59CB;&amp;#x5BF9;&amp;#x5B83;&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0D;&amp;#x719F;&amp;#x6089;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x5B83;&amp;#x4E0E;&amp;#x6211;&amp;#x4EEC;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x5C55;&amp;#x793A;&amp;#x4E00;&amp;#x5F20;&amp;#x56FE;&amp;#x7247;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x5B8C;&amp;#x5168;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x4F46;&amp;#x660E;&amp;#x767D;&amp;#x5B83;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x5B83;&amp;#x4E5F;&amp;#x662F;&amp;#x6709;&amp;#x89C4;&amp;#x5F8B;&amp;#x53EF;&amp;#x5FAA;&amp;#x7684;&amp;#xFF0C;&amp;#x6BD5;&amp;#x7ADF;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;API&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x51FA;&amp;#x73B0;&amp;#x592A;&amp;#x591A;&amp;#x7684;&amp;#x5DEE;&amp;#x5F02;&amp;#x7684;&amp;#x3002;&amp;#x4E5F;&amp;#x5E0C;&amp;#x671B;&amp;#x80FD;&amp;#x591F;&amp;#x5E2E;&amp;#x52A9;&amp;#x5927;&amp;#x5BB6;&amp;#x5BF9;OpenGL ES&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x5168;&amp;#x9762;&amp;#x7684;&amp;#x4E86;&amp;#x89E3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x9644;&amp;#x4E0A;&amp;#x6E90;&amp;#x7801;&amp;#x5730;&amp;#x5740;&amp;#xFF1A;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis/tree/feat_opengles_dev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;OpenGL ES&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;a href=&quot;#OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot; class=&quot;headerlink&quot; title=&quot;OpenGL ES &amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;/a&gt;OpenGL E
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="opengl" scheme="https://www.rousetime.com/tags/opengl/"/>
    
  </entry>
  
  <entry>
    <title>Android OpenGL ES 渲染模式</title>
    <link href="https://www.rousetime.com/2022/02/25/Android-OpenGL-ES-%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F/"/>
    <id>https://www.rousetime.com/2022/02/25/Android-OpenGL-ES-渲染模式/</id>
    <published>2022-02-25T14:27:33.000Z</published>
    <updated>2022-12-02T14:38:50.370Z</updated>
    
    <content type="html">&lt;h2 id=&quot;OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;a href=&quot;#OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot; class=&quot;headerlink&quot; title=&quot;OpenGL ES &amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;/a&gt;OpenGL ES &amp;#x7CFB;&amp;#x5217;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.rousetime.com/2022/02/14/Android-OpenGL-ES-%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&quot;&gt;Android OpenGL ES &amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x52A8;&amp;#x6001;&amp;#x8272;&amp;#x503C;&quot;&gt;&lt;a href=&quot;#&amp;#x52A8;&amp;#x6001;&amp;#x8272;&amp;#x503C;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x52A8;&amp;#x6001;&amp;#x8272;&amp;#x503C;&quot;&gt;&lt;/a&gt;&amp;#x52A8;&amp;#x6001;&amp;#x8272;&amp;#x503C;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x8BF4;&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x7B80;&amp;#x5355;&amp;#x4E86;&amp;#x89E3;&amp;#x4E0B;&amp;#x52A8;&amp;#x6001;&amp;#x8272;&amp;#x503C;&amp;#x7684;&amp;#x586B;&amp;#x5145;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://www.rousetime.com/2022/02/14/Android-OpenGL-ES-%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/&quot;&gt;OpenGL ES &amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;&lt;/a&gt;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x662F;&amp;#x5BF9;&amp;#x9876;&amp;#x70B9;&amp;#x505A;&amp;#x4E86;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x586B;&amp;#x5145;&amp;#x8BBE;&amp;#x7F6E;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x7EE7;&amp;#x7EED;&amp;#x5BF9;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#x505A;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/25/Android-OpenGL-ES-&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;/effect.jpeg&quot; width=&quot;375&quot; height=&quot;750/&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x73B0;&amp;#x6709;&amp;#x7684;&amp;#x6837;&amp;#x5F0F;&amp;#xFF0C;&amp;#x8272;&amp;#x503C;&amp;#x5728;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5199;&amp;#x6B7B;&amp;#x7684;&amp;#x503C;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5C06;&amp;#x5B83;&amp;#x53D8;&amp;#x4E3A;&amp;#x52A8;&amp;#x6001;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7684;&amp;#x503C;&amp;#xFF0C;&amp;#x5C06;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#x503C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;&amp;#x7EA2;&amp;#x3001;&amp;#x7EFF;&amp;#x3001;&amp;#x84DD;&amp;#x7684;&amp;#x6DF7;&amp;#x5408;&amp;#x8272;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x4E09;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7EA2;&amp;#x7EFF;&amp;#x84DD;&amp;#xFF0C;&amp;#x989C;&amp;#x8272;&amp;#x518D;&amp;#x4ECE;&amp;#x9876;&amp;#x70B9;&amp;#x5411;&amp;#x4E2D;&amp;#x95F4;&amp;#x6269;&amp;#x6563;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x5B9E;&amp;#x9645;&amp;#x64CD;&amp;#x4F5C;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x4FEE;&amp;#x6539;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;a href=&quot;#&amp;#x4FEE;&amp;#x6539;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4FEE;&amp;#x6539;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;/a&gt;&amp;#x4FEE;&amp;#x6539;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&lt;/h3&gt;&lt;p&gt;&amp;#x8981;&amp;#x52A8;&amp;#x6001;&amp;#x8BBE;&amp;#x7F6E;&amp;#x989C;&amp;#x8272;&amp;#x503C;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5B9A;&amp;#x4E49;&amp;#x989C;&amp;#x8272;&amp;#x53D8;&amp;#x91CF;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private const val VERTEX_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;attribute vec4 a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;attribute vec4 a_Color;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;varying vec4 v_Color;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   v_Color = a_Color;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_Position = a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val FRAGMENT_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;precision mediump float;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;varying vec4 v_Color;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_FragColor = v_Color;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;a_Position&amp;#x4E0D;&amp;#x52A8;&amp;#xFF0C;&amp;#x65B0;&amp;#x589E;a_Color&amp;#x4E0E;v_Color&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x6CE8;&amp;#x610F;v_Color&amp;#x88AB;varying&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x80FD;&amp;#x591F;&amp;#x4F20;&amp;#x9012;&amp;#x5230;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x518D;&amp;#x5C06;&amp;#x5B83;&amp;#x8D4B;&amp;#x503C;&amp;#x7ED9;gl_FragColor&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5B9A;&amp;#x4E49;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&amp;#x6E90;&quot;&gt;&lt;a href=&quot;#&amp;#x5B9A;&amp;#x4E49;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&amp;#x6E90;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B9A;&amp;#x4E49;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&amp;#x6E90;&quot;&gt;&lt;/a&gt;&amp;#x5B9A;&amp;#x4E49;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&amp;#x6E90;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private val mColorData = floatArrayOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, 0.0f, 0.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 1.0f, 0.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 0.0f, 1.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    1.0f, 0.0f, 0.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 1.0f, 0.0f, 1.0f,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    0.0f, 0.0f, 1.0f, 1.0f&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val COLOR_DIMENSION_SIZE = 4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5206;&amp;#x522B;&amp;#x4E3A;&amp;#x4E24;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x516D;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x8BBE;&amp;#x7F6E;&amp;#x7EA2;&amp;#x7EFF;&amp;#x84DD;&amp;#x8BBE;&amp;#x7F6E;&amp;#xFF0C;&amp;#x989C;&amp;#x8272;&amp;#x7EF4;&amp;#x5EA6;&amp;#x4E3A;4&amp;#xFF0C;&amp;#x4E0D;&amp;#x8981;&amp;#x5FD8;&amp;#x4E86;&amp;#x8FD8;&amp;#x6709;&amp;#x900F;&amp;#x660E;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x52A0;&amp;#x8F7D;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;a href=&quot;#&amp;#x52A0;&amp;#x8F7D;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x52A0;&amp;#x8F7D;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&quot;&gt;&lt;/a&gt;&amp;#x52A0;&amp;#x8F7D;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&lt;/h3&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x4E0E;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x52A0;&amp;#x8F7D;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x6765;&amp;#x8BF4;&amp;#x4ED6;&amp;#x4EEC;&amp;#x53EA;&amp;#x662F;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x800C;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x65B9;&amp;#x5F0F;&amp;#x90FD;&amp;#x662F;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#x3002;&amp;#x660E;&amp;#x767D;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x5C31;&amp;#x7B80;&amp;#x5355;&amp;#x591A;&amp;#x4E86;&amp;#xFF0C;&amp;#x6309;&amp;#x7167;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x5230;Buffer&amp;#x4E2D;&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;&amp;#x7D22;&amp;#x5F15;&amp;#x4F4D;&amp;#x7F6E;&amp;#x79FB;&amp;#x52A8;&amp;#x5230;0&amp;#x4F4D;&amp;#x7F6E;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x52A0;&amp;#x8F7D;&amp;#x989C;&amp;#x8272;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val colorBuffer = ByteBuffer.allocateDirect(mColorData.size * Float.SIZE_BYTES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .order(ByteOrder.nativeOrder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .asFloatBuffer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;colorBuffer.put(mColorData)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;colorBuffer.position(0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x83B7;&amp;#x53D6;a_Color&amp;#x5728;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&amp;#x7D22;&amp;#x5F15;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;color&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val colorLocation = GLES20.glGetAttribLocation(programId, &amp;quot;a_Color&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x968F;&amp;#x540E;&amp;#x6FC0;&amp;#x6D3B;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x542F;&amp;#x52A8;&amp;#x5BF9;&amp;#x5E94;color&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glEnableVertexAttribArray(colorLocation)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x586B;&amp;#x5145;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x586B;&amp;#x5145;&amp;#x5BF9;&amp;#x5E94;&amp;#x9876;&amp;#x70B9;&amp;#x5904;color&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glVertexAttribPointer(colorLocation, COLOR_DIMENSION_SIZE, GLES20.GL_FLOAT, false, 0, colorBuffer)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x518D;&amp;#x8D70;&amp;#x4E00;&amp;#x904D;&amp;#x8FD9;&amp;#x4E9B;&amp;#x6D41;&amp;#x7A0B;&amp;#xFF0C;&amp;#x7406;&amp;#x89E3;&amp;#x8D77;&amp;#x6765;&amp;#x76F8;&amp;#x4FE1;&amp;#x7B80;&amp;#x5355;&amp;#x4E86;&amp;#x8BB8;&amp;#x591A;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6E32;&amp;#x67D3;&amp;#x90E8;&amp;#x5206;&amp;#x5C31;&amp;#x4E0D;&amp;#x591A;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6CA1;&amp;#x4EC0;&amp;#x4E48;&amp;#x4E0D;&amp;#x540C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x6548;&amp;#x679C;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/25/Android-OpenGL-ES-&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;/g_effect.jpeg&quot; width=&quot;375&quot; height=&quot;750/&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&amp;#x8FBE;&amp;#x5230;&amp;#x9884;&amp;#x671F;&amp;#xFF0C;&amp;#x5927;&amp;#x529F;&amp;#x544A;&amp;#x6210;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6E32;&amp;#x67D3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, mVertexData.size / VERTEX_DIMENSION_SIZE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GL_TRIANGLES&amp;#x662F;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x6E32;&amp;#x67D3;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4E00;&amp;#x5171;&amp;#x6709;&amp;#x4E09;&amp;#x79CD;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;GL-TRIANGLES&quot;&gt;&lt;a href=&quot;#GL-TRIANGLES&quot; class=&quot;headerlink&quot; title=&quot;GL_TRIANGLES&quot;&gt;&lt;/a&gt;GL_TRIANGLES&lt;/h3&gt;&lt;p&gt;&amp;#x4EE5;&amp;#x6BCF;&amp;#x4E09;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x4E3A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#xFF0C;&amp;#x9876;&amp;#x70B9;&amp;#x4E0D;&amp;#x91CD;&amp;#x590D;&amp;#xFF0C;&amp;#x5373;(v0,v1,v2)&amp;#x3001;(v3,v4,v5)&amp;#x7B49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x76EE;&amp;#x524D;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x6E32;&amp;#x67D3;&amp;#x65B9;&amp;#x5F0F;&amp;#x90FD;&amp;#x662F;&amp;#x8FD9;&amp;#x79CD;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;6&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#xFF0C;&amp;#x6309;&amp;#x7167;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x4F1A;&amp;#x7ED8;&amp;#x5236;&amp;#x51FA;&amp;#x4E24;&amp;#x4E2A;&amp;#x5B8C;&amp;#x5168;&amp;#x4E0D;&amp;#x4EA4;&amp;#x53C9;&amp;#x7684;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x4EA4;&amp;#x96C6;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;GL-TRIANGLE-STRIP&quot;&gt;&lt;a href=&quot;#GL-TRIANGLE-STRIP&quot; class=&quot;headerlink&quot; title=&quot;GL_TRIANGLE_STRIP&quot;&gt;&lt;/a&gt;GL_TRIANGLE_STRIP&lt;/h3&gt;&lt;p&gt;&amp;#x9009;&amp;#x62E9;&amp;#x7ED8;&amp;#x5236;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x9876;&amp;#x70B9;&amp;#x4F1A;&amp;#x91CD;&amp;#x590D;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x5373;(v0,v1,v2)&amp;#x3001;(v2,v1,v3)&amp;#x3001;(v2,v3,v4)&amp;#x3001;(v4,v3,v5)&lt;/p&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x6765;&amp;#x770B;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5B83;&amp;#x4F1A;&amp;#x590D;&amp;#x7528;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x4E24;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#xFF0C;&amp;#x4F46;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#x5B83;&amp;#x7684;&amp;#x7ED8;&amp;#x5236;&amp;#x987A;&amp;#x5E8F;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x76F4;&amp;#x63A5;&amp;#x6309;&amp;#x7167;&amp;#x76F4;&amp;#x63A5;&amp;#x7684;&amp;#x987A;&amp;#x5E8F;&amp;#x8FDB;&amp;#x884C;&amp;#x590D;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x987A;&amp;#x5E8F;&amp;#x903B;&amp;#x8F91;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x5982;&amp;#x679C;&amp;#x5F53;&amp;#x524D;&amp;#x9876;&amp;#x70B9;&amp;#x662F;&amp;#x5076;&amp;#x6570;&amp;#xFF0C;&amp;#x5219;&amp;#x4E3A;(n-2,n-1,n)&lt;/li&gt;
&lt;li&gt;&amp;#x5982;&amp;#x679C;&amp;#x5F53;&amp;#x524D;&amp;#x9876;&amp;#x70B9;&amp;#x662F;&amp;#x5947;&amp;#x6570;&amp;#xFF0C;&amp;#x5219;&amp;#x4E3A;(n-1,n-2,n)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x4FDD;&amp;#x8BC1;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x6BCF;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x987A;&amp;#x5E8F;&amp;#x662F;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Triangles_Strip_In_OpenGL.svg/2560px-Triangles_Strip_In_OpenGL.svg.png&quot; width=&quot;375&quot; height=&quot;750/&quot;&gt;&lt;br&gt;&lt;/div&gt;


&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x79CD;&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;&amp;#x7684;&amp;#x597D;&amp;#x5904;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x5462;&amp;#xFF1F;&amp;#x4F60;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x76F8;&amp;#x540C;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x7ED8;&amp;#x5236;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x4E2A;&amp;#x6570;&amp;#x6BD4;GL_TRIANGLES&amp;#x8981;&amp;#x591A;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x80FD;&amp;#x53D1;&amp;#x73B0;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x7ED8;&amp;#x5236;&amp;#x76F8;&amp;#x540C;&amp;#x7684;&amp;#x56FE;&amp;#x5F62;GL_TRIANGLE_STRIP&amp;#x6240;&amp;#x8981;&amp;#x52A0;&amp;#x8F7D;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x4F1A;&amp;#x66F4;&amp;#x5C11;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5728;OpenGL&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x5360;&amp;#x7528;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x4E5F;&amp;#x5C31;&amp;#x8D8A;&amp;#x4F4E;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E5F;&amp;#x5C31;&amp;#x66F4;&amp;#x6709;&amp;#x6548;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x539F;&amp;#x7406;&amp;#x660E;&amp;#x767D;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x4F8B;&amp;#x5B50;&amp;#x4E2D;&amp;#x7684;&amp;#x7ED8;&amp;#x5236;&amp;#x65B9;&amp;#x5F0F;&amp;#x4FEE;&amp;#x6539;&amp;#x6210;GL_TRIANGLE_STRIP&amp;#xFF0C;&amp;#x770B;&amp;#x4E0B;&amp;#x6548;&amp;#x679C;&amp;#x662F;&amp;#x600E;&amp;#x4E48;&amp;#x6837;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/25/Android-OpenGL-ES-&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;/m_effect.jpeg&quot; width=&quot;375&quot; height=&quot;750/&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;h3 id=&quot;GL-TRIANGLE-FAN&quot;&gt;&lt;a href=&quot;#GL-TRIANGLE-FAN&quot; class=&quot;headerlink&quot; title=&quot;GL_TRIANGLE_FAN&quot;&gt;&lt;/a&gt;GL_TRIANGLE_FAN&lt;/h3&gt;&lt;p&gt;&amp;#x4EE5;&amp;#x6247;&amp;#x5F62;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#xFF0C;&amp;#x5B83;&amp;#x4F1A;&amp;#x5171;&amp;#x7528;&amp;#x4E00;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#xFF0C;&amp;#x56F4;&amp;#x7ED5;&amp;#x5B83;&amp;#x8FDB;&amp;#x884C;&amp;#x6247;&amp;#x5F62;&amp;#x7ED8;&amp;#x5236;&amp;#xFF0C;(v0,v1,v2)&amp;#x3001;(v3,v0,v2)&amp;#x3001;(v4,v0,v3)&amp;#x3001;&amp;#xFF08;v5,v0,v4&amp;#xFF09;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x5F88;&amp;#x9002;&amp;#x5408;&amp;#x7528;&amp;#x6765;&amp;#x7ED8;&amp;#x5236;&amp;#x591A;&amp;#x8FB9;&amp;#x5F62;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4EFB;&amp;#x610F;&amp;#x4E00;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x4E3A;&amp;#x4E2D;&amp;#x5FC3;&amp;#x8FDB;&amp;#x884C;&amp;#x6247;&amp;#x5F62;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/5/59/Trianglefan.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x5C06;&amp;#x4F8B;&amp;#x5B50;&amp;#x4E2D;&amp;#x7684;&amp;#x7ED8;&amp;#x5236;&amp;#x65B9;&amp;#x5F0F;&amp;#x6539;&amp;#x6210;GL_TRIANGLE_FAN&amp;#xFF0C;&amp;#x770B;&amp;#x4E0B;&amp;#x6548;&amp;#x679C;&amp;#x5982;&amp;#x4F55;&amp;#x3002;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/25/Android-OpenGL-ES-&amp;#x6E32;&amp;#x67D3;&amp;#x6A21;&amp;#x5F0F;/f_effect.jpeg&quot; width=&quot;375&quot; height=&quot;750/&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x592A;&amp;#x660E;&amp;#x767D;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x5DF1;&amp;#x52A8;&amp;#x624B;&amp;#x753B;&amp;#x4E00;&amp;#x753B;&amp;#xFF0C;&amp;#x539F;&amp;#x7406;&amp;#x5E76;&amp;#x4E0D;&amp;#x96BE;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540E;&amp;#x9762;&amp;#x6211;&amp;#x4F1A;&amp;#x7EE7;&amp;#x7EED;&amp;#x804A;&amp;#x804A;&amp;#x5BF9;&amp;#x7EB9;&amp;#x7406;&amp;#x65B9;&amp;#x9762;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#xFF0C;&amp;#x656C;&amp;#x8BF7;&amp;#x671F;&amp;#x5F85;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6E90;&amp;#x7801;&amp;#x5730;&amp;#x5740;&amp;#xFF1A;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis/tree/feat_opengles_dev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;OpenGL ES&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;a href=&quot;#OpenGL-ES-&amp;#x7CFB;&amp;#x5217;&quot; class=&quot;headerlink&quot; title=&quot;OpenGL ES &amp;#x7CFB;&amp;#x5217;&quot;&gt;&lt;/a&gt;OpenGL E
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="opengl" scheme="https://www.rousetime.com/tags/opengl/"/>
    
  </entry>
  
  <entry>
    <title>Android OpenGL ES 基础原理</title>
    <link href="https://www.rousetime.com/2022/02/14/Android-OpenGL-ES-%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/"/>
    <id>https://www.rousetime.com/2022/02/14/Android-OpenGL-ES-基础原理/</id>
    <published>2022-02-14T14:48:19.000Z</published>
    <updated>2022-12-01T15:01:13.875Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x7531;&amp;#x4E8E;5G&amp;#x7684;&amp;#x53D1;&amp;#x5C55;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x97F3;&amp;#x89C6;&amp;#x9891;&amp;#x8D8A;&amp;#x6765;&amp;#x8D8A;&amp;#x6D41;&amp;#x884C;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x751F;&amp;#x6D3B;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B8C;&amp;#x5168;&amp;#x88AB;&amp;#x6296;&amp;#x97F3;&amp;#x3001;&amp;#x89C6;&amp;#x9891;&amp;#x53F7;&amp;#x3001;B&amp;#x7AD9;&amp;#x7B49;&amp;#x89C6;&amp;#x9891;&amp;#x5E94;&amp;#x7528;&amp;#x6240;&amp;#x5305;&amp;#x56F4;&amp;#x3002;&amp;#x4ECE;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x4E5F;&amp;#x80FD;&amp;#x770B;&amp;#x5230;&amp;#x97F3;&amp;#x89C6;&amp;#x9891;&amp;#x7684;&amp;#x91CD;&amp;#x8981;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x540D;Android&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#xFF0C;&amp;#x662F;&amp;#x65F6;&amp;#x5019;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;&amp;#x5173;&amp;#x4E8E;Android&amp;#x65B9;&amp;#x9762;&amp;#x6E32;&amp;#x67D3;&amp;#x65B9;&amp;#x9762;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x3002;&amp;#x97F3;&amp;#x89C6;&amp;#x9891;&amp;#x7684;&amp;#x5E94;&amp;#x7528;&amp;#x90FD;&amp;#x79BB;&amp;#x4E0D;&amp;#x5F00;OpenGL ES&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x3002;&amp;#x5BF9;&amp;#x4E8E;&amp;#x89C6;&amp;#x9891;&amp;#x7684;&amp;#x9AD8;&amp;#x6548;&amp;#x6E32;&amp;#x67D3;&amp;#x4E0E;&amp;#x878D;&amp;#x5408;&amp;#x64CD;&amp;#x4F5C;&amp;#x662F;&amp;#x81F3;&amp;#x5173;&amp;#x91CD;&amp;#x8981;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/Tencent/vap/raw/master/images/anim1.gif&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8FD9;&amp;#x79CD;&amp;#x52A8;&amp;#x753B;&amp;#x76F8;&amp;#x4FE1;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x5F88;&amp;#x719F;&amp;#x6089;&amp;#xFF0C;&amp;#x7C7B;&amp;#x4F3C;&amp;#x7684;&amp;#x52A8;&amp;#x753B;&amp;#x5728;&amp;#x5404;&amp;#x5927;&amp;#x76F4;&amp;#x64AD;&amp;#x95F4;&amp;#x90FD;&amp;#x4F1A;&amp;#x51FA;&amp;#x73B0;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x70AB;&amp;#x9177;&amp;#x7684;&amp;#x539F;&amp;#x7406;&amp;#x5B9E;&amp;#x73B0;&amp;#x5185;&amp;#x90E8;&amp;#x90FD;&amp;#x79BB;&amp;#x4E0D;&amp;#x5F00;OpenGL ES&amp;#x7684;&amp;#x9AD8;&amp;#x6548;&amp;#x6E32;&amp;#x67D3;&amp;#x4E0E;&amp;#x66F4;&amp;#x9AD8;&amp;#x7EA7;&amp;#x7684;&amp;#x878D;&amp;#x5408;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x591A;&amp;#x7684;&amp;#x5C31;&amp;#x5148;&amp;#x4E0D;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x6765;&amp;#x8BA4;&amp;#x8BC6;&amp;#x4E00;&amp;#x4E0B;OpenGL ES&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&lt;/h2&gt;&lt;p&gt;Android&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;OpenGL&amp;#x6765;&amp;#x652F;&amp;#x6301;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;2D&amp;#x548C;3D&amp;#x56FE;&amp;#x5F62;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;OpenGL&amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7684;&amp;#x56FE;&amp;#x5F62;API&amp;#x3002;&amp;#x5176;&amp;#x4E2D;OpenGL ES&amp;#x662F;OpenGL&amp;#x89C4;&amp;#x8303;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x5F62;&amp;#x5F0F;&amp;#xFF0C;&amp;#x9002;&amp;#x7528;&amp;#x4E8E;&amp;#x5D4C;&amp;#x5165;&amp;#x5F0F;&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Android&amp;#x652F;&amp;#x6301;&amp;#x591A;&amp;#x79CD;&amp;#x7248;&amp;#x672C;&amp;#x7684;OpenGL ES API&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;1.0&amp;amp;1.1 Android1.0&amp;#x53CA;&amp;#x4EE5;&amp;#x4E0A;&lt;/li&gt;
&lt;li&gt;2.0 Android2.2&amp;#x53CA;&amp;#x4EE5;&amp;#x4E0A;&lt;/li&gt;
&lt;li&gt;3.0 Android4.3&amp;#x53CA;&amp;#x4EE5;&amp;#x4E0A;&lt;/li&gt;
&lt;li&gt;3.1 Android5.0&amp;#x53CA;&amp;#x4EE5;&amp;#x4E0A;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;OpenGL ES 2.0&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8FDB;&amp;#x884C;&amp;#x4E8C;&amp;#x7EF4;&amp;#x7684;&amp;#x56FE;&amp;#x5F62;&amp;#x6E32;&amp;#x67D3;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5750;&amp;#x6807;&quot;&gt;&lt;a href=&quot;#&amp;#x5750;&amp;#x6807;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5750;&amp;#x6807;&quot;&gt;&lt;/a&gt;&amp;#x5750;&amp;#x6807;&lt;/h3&gt;&lt;p&gt;&amp;#x5728;Android&amp;#x4E2D;&amp;#x901A;&amp;#x8FC7;Canvas&amp;#x8FDB;&amp;#x884C;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x539F;&amp;#x70B9;&amp;#x662F;&amp;#x5728;&amp;#x5C4F;&amp;#x5E55;&amp;#x7684;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x5B83;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x8303;&amp;#x56F4;&amp;#x90FD;&amp;#x662F;&amp;#x4EE5;&amp;#x5C4F;&amp;#x5E55;&amp;#x7684;&amp;#x5BBD;&amp;#x9AD8;&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;OpenGL ES&amp;#x5219;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;&amp;#x4EE5;&amp;#x7ED8;&amp;#x5236;&amp;#x533A;&amp;#x57DF;&amp;#x7684;&amp;#x4E2D;&amp;#x5FC3;&amp;#x4E3A;&amp;#x539F;&amp;#x70B9;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x5B83;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x8303;&amp;#x56F4;&amp;#x662F;-1.0 ~ 1.0&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x5B83;&amp;#x7684;&amp;#x5750;&amp;#x6807;&amp;#x90FD;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;&amp;#x53EF;&amp;#x7ED8;&amp;#x5236;&amp;#x533A;&amp;#x57DF;&amp;#x8FDB;&amp;#x884C;&amp;#x6BD4;&amp;#x4F8B;&amp;#x6362;&amp;#x7B97;&amp;#x3002;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x771F;&amp;#x6B63;&amp;#x7684;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/02/14/Android-OpenGL-ES-&amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;/coordinate.png&quot; alt&gt;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5F62;&amp;#x72B6;&amp;#x4E0E;&amp;#x65B9;&amp;#x5411;&quot;&gt;&lt;a href=&quot;#&amp;#x5F62;&amp;#x72B6;&amp;#x4E0E;&amp;#x65B9;&amp;#x5411;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5F62;&amp;#x72B6;&amp;#x4E0E;&amp;#x65B9;&amp;#x5411;&quot;&gt;&lt;/a&gt;&amp;#x5F62;&amp;#x72B6;&amp;#x4E0E;&amp;#x65B9;&amp;#x5411;&lt;/h3&gt;&lt;p&gt;&amp;#x5728;OpenGL ES&amp;#x4E2D;&amp;#xFF0C;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x5F62;&amp;#x72B6;&amp;#x90FD;&amp;#x662F;&amp;#x4EE5;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x4E3A;&amp;#x57FA;&amp;#x7840;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x5B83;&amp;#x5FC5;&amp;#x987B;&amp;#x7531;3&amp;#x4E2A;&amp;#x6216;&amp;#x8005;&amp;#x4EE5;&amp;#x4E0A;&amp;#x7684;&amp;#x70B9;&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x662F;&amp;#x7531;&amp;#x591A;&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x8FDB;&amp;#x884C;&amp;#x7EC4;&amp;#x5408;&amp;#x6210;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x5F62;&amp;#x72B6;&amp;#xFF0C;&amp;#x8FDB;&amp;#x8FC7;&amp;#x4E0D;&amp;#x540C;&amp;#x7A0B;&amp;#x5EA6;&amp;#x7684;&amp;#x4EA4;&amp;#x53C9;&amp;#x4E0E;&amp;#x91CD;&amp;#x53E0;&amp;#x6765;&amp;#x8FBE;&amp;#x5230;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x5F62;&amp;#x72B6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#x4EE5;&amp;#x4E8C;&amp;#x7EF4;&amp;#x7A7A;&amp;#x95F4;&amp;#x6765;&amp;#x5B9A;&amp;#x4E49;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/02/14/Android-OpenGL-ES-&amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;/triggle.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x540C;&amp;#x65F6;&amp;#x8FD8;&amp;#x5B58;&amp;#x5728;&amp;#x7ED8;&amp;#x5236;&amp;#x987A;&amp;#x5E8F;&amp;#xFF0C;&amp;#x6240;&amp;#x8C13;&amp;#x7684;&amp;#x7ED8;&amp;#x5236;&amp;#x987A;&amp;#x5E8F;&amp;#x4E5F;&amp;#x662F;&amp;#x4EE5;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x4E3A;&amp;#x57FA;&amp;#x7840;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x4E09;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x8FDB;&amp;#x884C;&amp;#x73AF;&amp;#x7ED5;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;&amp;#x4EE5;&amp;#x9006;&amp;#x65F6;&amp;#x9488;&amp;#x8FDB;&amp;#x884C;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E8C;&amp;#x7EF4;&amp;#x56FE;&amp;#x50CF;&amp;#x53EF;&amp;#x80FD;&amp;#x7ED8;&amp;#x5236;&amp;#x987A;&amp;#x5E8F;&amp;#x6CA1;&amp;#x90A3;&amp;#x4E48;&amp;#x91CD;&amp;#x8981;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E09;&amp;#x7EF4;&amp;#x56FE;&amp;#x50CF;&amp;#x5C31;&amp;#x5F88;&amp;#x91CD;&amp;#x8981;&amp;#x4E86;&amp;#x3002;&amp;#x4E09;&amp;#x7EF4;&amp;#x56FE;&amp;#x50CF;&amp;#x662F;&amp;#x7531;&amp;#x4E8E;&amp;#x89C6;&amp;#x89D2;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5B58;&amp;#x5728;&amp;#x6B63;&amp;#x53CD;&amp;#x9762;&amp;#x7684;&amp;#x5173;&amp;#x7CFB;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#x4E00;&amp;#x6B3E;3D&amp;#x6E38;&amp;#x620F;&amp;#xFF0C;&amp;#x6E38;&amp;#x620F;&amp;#x4E2D;&amp;#x6709;&amp;#x4E00;&amp;#x8F86;&amp;#x6C7D;&amp;#x8F66;&amp;#xFF0C;&amp;#x6B63;&amp;#x5BF9;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x4E3A;&amp;#x6B63;&amp;#x9762;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x770B;&amp;#x4E0D;&amp;#x5230;&amp;#x7684;&amp;#x4E00;&amp;#x9762;&amp;#x4E3A;&amp;#x53CD;&amp;#x9762;&amp;#xFF0C;&amp;#x867D;&amp;#x7136;&amp;#x53CD;&amp;#x9762;&amp;#x770B;&amp;#x4E0D;&amp;#x5230;&amp;#xFF0C;&amp;#x4F46;OpenGL ES&amp;#x8FD8;&amp;#x662F;&amp;#x4F1A;&amp;#x8FDB;&amp;#x884C;&amp;#x7ED8;&amp;#x5236;&amp;#x3002;&amp;#x4E3A;&amp;#x4E86;&amp;#x5BF9;&amp;#x53CD;&amp;#x9762;&amp;#x4E0D;&amp;#x505A;&amp;#x65E0;&amp;#x7528;&amp;#x7684;&amp;#x7ED8;&amp;#x5236;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;OpenGL&amp;#x7684;&amp;#x9762;&amp;#x5254;&amp;#x9664;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x8BE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x5141;&amp;#x8BB8;&amp;#x6E32;&amp;#x67D3;&amp;#x7BA1;&amp;#x9053;&amp;#x5FFD;&amp;#x7565;&amp;#x5F62;&amp;#x72B6;&amp;#x7684;&amp;#x53CD;&amp;#x9762;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8282;&amp;#x7EA6;&amp;#x65F6;&amp;#x95F4;&amp;#x4E0E;&amp;#x5185;&amp;#x5B58;&amp;#x5E76;&amp;#x7F29;&amp;#x77ED;&amp;#x5904;&amp;#x7406;&amp;#x5468;&amp;#x671F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x6B63;&amp;#x9762;&amp;#x5C31;&amp;#x662F;&amp;#x6CBF;&amp;#x9006;&amp;#x65F6;&amp;#x9488;&amp;#x7ED8;&amp;#x5236;&amp;#x7684;&amp;#x9762;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;GL&amp;#x7A0B;&amp;#x5E8F;&quot;&gt;&lt;a href=&quot;#GL&amp;#x7A0B;&amp;#x5E8F;&quot; class=&quot;headerlink&quot; title=&quot;GL&amp;#x7A0B;&amp;#x5E8F;&quot;&gt;&lt;/a&gt;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/h2&gt;&lt;p&gt;OpenGL ES&amp;#x6E32;&amp;#x67D3;&amp;#x9700;&amp;#x8981;&amp;#x501F;&amp;#x52A9;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x3001;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x3001;&amp;#x52A0;&amp;#x8F7D;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4EE3;&amp;#x7801;&amp;#x3001;&amp;#x7F16;&amp;#x8BD1;&amp;#x4EE3;&amp;#x7801;&amp;#x3001;&amp;#x5E94;&amp;#x7528;&amp;#x3001;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;a href=&quot;#&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&quot;&gt;&lt;/a&gt;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&lt;/h3&gt;&lt;p&gt;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x6E32;&amp;#x67D3;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x9700;&amp;#x8981;&amp;#x786E;&amp;#x8BA4;&amp;#x9876;&amp;#x70B9;&amp;#x4F4D;&amp;#x7F6E;&amp;#x4E0E;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x90E8;&amp;#x5206;&amp;#x5206;&amp;#x522B;&amp;#x501F;&amp;#x52A9;&amp;#x4E8E;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x9876;&amp;#x70B9;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val VERTEX_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;attribute vec4 a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_Position = a_Position;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x7247;&amp;#x6BB5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val FRAGMENT_SHADER_SOURCE =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;precision mediump float;\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;void main() {\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;   gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);\n&amp;quot; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x5206;&amp;#x522B;&amp;#x662F;&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#x3002;attribute&amp;#x662F;&amp;#x53D8;&amp;#x91CF;&amp;#x4FEE;&amp;#x9970;&amp;#x7B26;&amp;#xFF0C;&amp;#x7528;&amp;#x7684;&amp;#x6BD4;&amp;#x8F83;&amp;#x591A;&amp;#x7684;&amp;#x662F;&amp;#x4EE5;&amp;#x4E0B;&amp;#x4E09;&amp;#x79CD;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;attribute:&amp;#x8868;&amp;#x793A;&amp;#x53EA;&amp;#x8BFB;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5E94;&amp;#x7528;&amp;#x5728;&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&amp;#x3002;&amp;#x53EF;&amp;#x4FEE;&amp;#x9970;&amp;#x58F0;&amp;#x660E;&amp;#x9876;&amp;#x70B9;&amp;#x3001;&amp;#x989C;&amp;#x8272;&amp;#x7B49;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;uniform:&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x7684;&amp;#x5171;&amp;#x4EAB;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5728;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x503C;&amp;#x7684;&amp;#x4E0D;&amp;#x53D8;&amp;#x7684;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x503C;&amp;#x7531;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5916;&amp;#x90E8;&amp;#x4F20;&amp;#x5165;&lt;/li&gt;
&lt;li&gt;varying:&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x8F93;&amp;#x5165;&amp;#xFF0C;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x8F93;&amp;#x51FA;&amp;#xFF1B;&amp;#x7531;&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4F20;&amp;#x8F93;&amp;#x7ED9;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&amp;#x7684;&amp;#x63D2;&amp;#x503C;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;vec4&amp;#x662F;&amp;#x53D8;&amp;#x91CF;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x53D8;&amp;#x91CF;&amp;#x4E3B;&amp;#x8981;&amp;#x6709;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/02/14/Android-OpenGL-ES-&amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;/1.jpg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x9664;&amp;#x6B64;&amp;#x4E4B;&amp;#x5916;&amp;#x8FD8;&amp;#x6709;&amp;#x6570;&amp;#x7EC4;&amp;#x4E0E;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;a_Position&amp;#x8D4B;&amp;#x503C;&amp;#x7ED9;gl_Position&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x5C31;&amp;#x4F1A;&amp;#x4F7F;&amp;#x7528;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540C;&amp;#x7406;gl_FragColor&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x4EE3;&amp;#x8868;&amp;#x5BF9;&amp;#x5E94;&amp;#x6E32;&amp;#x67D3;&amp;#x9876;&amp;#x70B9;&amp;#x4F4D;&amp;#x7F6E;&amp;#x65F6;&amp;#x7684;&amp;#x989C;&amp;#x8272;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x76F4;&amp;#x63A5;&amp;#x5199;&amp;#x6B7B;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x84DD;&amp;#x8272;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&quot;&gt;&lt;a href=&quot;#&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&quot;&gt;&lt;/a&gt;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/h3&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x521B;&amp;#x5EFA;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val programId = GLES20.glCreateProgram()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x62FF;&amp;#x5230;programId&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x7A0B;&amp;#x5E8F;&amp;#x64CD;&amp;#x4F5C;&amp;#x505A;&amp;#x51C6;&amp;#x5907;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x6DFB;&amp;#x52A0;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&quot;&gt;&lt;a href=&quot;#&amp;#x6DFB;&amp;#x52A0;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6DFB;&amp;#x52A0;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&quot;&gt;&lt;/a&gt;&amp;#x6DFB;&amp;#x52A0;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&lt;/h3&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x521B;&amp;#x5EFA;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x521B;&amp;#x5EFA;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val vertexShader = GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val fragmentShader = GLES20.glCreateShader(GLES20.GL_FRAGMENT_SHADER)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x4E4B;&amp;#x524D;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&amp;#x52A0;&amp;#x8F7D;&amp;#x5230;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x52A0;&amp;#x8F7D;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glShaderSource(vertexShader, VERTEX_SHADER_SOURCE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glShaderSource(fragmentShader, FRAGMENT_SHADER_SOURCE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FDB;&amp;#x884C;&amp;#x7F16;&amp;#x8BD1;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x7F16;&amp;#x8BD1;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glCompileShader(vertexShader)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glCompileShader(fragmentShader)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x5C06;&amp;#x7F16;&amp;#x8BD1;&amp;#x5B8C;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x4E0E;&amp;#x7247;&amp;#x6BB5;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6DFB;&amp;#x52A0;&amp;#x5230;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glAttachShader(programId, vertexShader)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glAttachShader(programId, fragmentShader)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x94FE;&amp;#x63A5;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&quot;&gt;&lt;a href=&quot;#&amp;#x94FE;&amp;#x63A5;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x94FE;&amp;#x63A5;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&quot;&gt;&lt;/a&gt;&amp;#x94FE;&amp;#x63A5;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&lt;/h3&gt;&lt;p&gt;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x88C5;&amp;#x8F7D;&amp;#x5B8C;&amp;#x6BD5;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5C06;&amp;#x6211;&amp;#x4EEC;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FDB;&amp;#x884C;&amp;#x94FE;&amp;#x63A5;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x94FE;&amp;#x63A5;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glLinkProgram(programId)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x5E94;&amp;#x7528;GL&amp;#x7A0B;&amp;#x5E8F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glUseProgram(programId)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x624D;&amp;#x7B97;&amp;#x771F;&amp;#x6B63;&amp;#x7684;&amp;#x5B8C;&amp;#x6210;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x5C31;&amp;#x662F;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x586B;&amp;#x5145;&amp;#x4E0E;&amp;#x6E32;&amp;#x67D3;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&quot;&gt;&lt;a href=&quot;#&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&quot;&gt;&lt;/a&gt;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x9876;&amp;#x70B9;&amp;#x7740;&amp;#x8272;&amp;#x5668;&amp;#x6E90;&amp;#x7801;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;a_Position&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x6211;&amp;#x4EEC;&amp;#x4ECE;&amp;#x5916;&amp;#x90E8;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;a_Position&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x624D;&amp;#x80FD;&amp;#x771F;&amp;#x6B63;&amp;#x5E94;&amp;#x7528;&amp;#x5230;gl_Position&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x586B;&amp;#x5145;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x586B;&amp;#x5145;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private val mVertexData = floatArrayOf(0.0f, 0.5f, -0.5f, -0.5f, 0.5f, -0.5f, -0.5f, 1.0f, -1.0f, 0.5f, 0f, 0.5f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private const val VERTEX_DIMENSION_SIZE = 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x9876;&amp;#x70B9;&amp;#x7EF4;&amp;#x5EA6;&amp;#x662F;&amp;#x4E8C;&amp;#x7EF4;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;mVertexData&amp;#x4E2D;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E86;6&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;2&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x5728;&amp;#x5DE6;&amp;#x4E0A;&amp;#x89D2;&amp;#xFF0C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x4E2A;&amp;#x5728;&amp;#x4E2D;&amp;#x95F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;Buffer&amp;#x4E2D;&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;&amp;#x7D22;&amp;#x5F15;&amp;#x4F4D;&amp;#x7F6E;&amp;#x5B9A;&amp;#x4E49;&amp;#x5230;&amp;#x5F00;&amp;#x59CB;&amp;#x4F4D;&amp;#x7F6E;0&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x52A0;&amp;#x8F7D;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val vertexBuffer = ByteBuffer.allocateDirect(mVertexData.size * Float.SIZE_BYTES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .order(ByteOrder.nativeOrder())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .asFloatBuffer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vertexBuffer.put(mVertexData)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vertexBuffer.position(0)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x83B7;&amp;#x53D6;a_Position&amp;#x5728;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val positionLocation = GLES20.glGetAttribLocation(programId, &amp;quot;a_Position&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E00;&amp;#x70B9;&amp;#x4E0E;&amp;#x6211;&amp;#x4EEC;&amp;#x5E73;&amp;#x5E38;&amp;#x7684;&amp;#x7F16;&amp;#x7A0B;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x5728;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8981;&amp;#x83B7;&amp;#x53D6;&amp;#x5176;&amp;#x4E2D;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x62FF;&amp;#x5230;&amp;#x8FD9;&amp;#x4E2A;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x672C;&amp;#x8EAB;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&amp;#x62FF;&amp;#x5230;&amp;#x5B83;&amp;#x5728;GL&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#x7D22;&amp;#x5F15;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x901A;&amp;#x8FC7;&amp;#x4F4D;&amp;#x7F6E;&amp;#x7D22;&amp;#x5F15;&amp;#x8FDB;&amp;#x884C;&amp;#x53D8;&amp;#x91CF;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x83B7;&amp;#x53D6;&amp;#x4E4B;&amp;#x540E;&amp;#x8FD8;&amp;#x8981;&amp;#x8FDB;&amp;#x884C;&amp;#x542F;&amp;#x52A8;&amp;#x6FC0;&amp;#x6D3B;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x542F;&amp;#x52A8;&amp;#x5BF9;&amp;#x5E94;&amp;#x53C2;&amp;#x6570;&amp;#x4F4D;&amp;#x7F6E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glEnableVertexAttribArray(positionLocation)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x5C31;&amp;#x662F;&amp;#x586B;&amp;#x5145;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x586B;&amp;#x5145;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glVertexAttribPointer(positionLocation, VERTEX_DIMENSION_SIZE, GLES20.GL_FLOAT, false, 0, vertexBuffer)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;VERTEX_DIMENSION_SIZE&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x662F;&amp;#x586B;&amp;#x5145;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E8C;&amp;#x7EF4;&amp;#x7684;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x7C7B;&amp;#x578B;&amp;#x4E3A;GLES20.GL_FLOAT&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6E32;&amp;#x67D3;&quot;&gt;&lt;a href=&quot;#&amp;#x6E32;&amp;#x67D3;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6E32;&amp;#x67D3;&quot;&gt;&lt;/a&gt;&amp;#x6E32;&amp;#x67D3;&lt;/h2&gt;&lt;p&gt;GL&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E0E;&amp;#x9876;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x90FD;&amp;#x5DF2;&amp;#x7ECF;&amp;#x51C6;&amp;#x5907;&amp;#x5B8C;&amp;#x6BD5;&amp;#xFF0C;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x662F;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x6B65;&amp;#x6E32;&amp;#x67D3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6E32;&amp;#x67D3;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5BF9;&amp;#x5C4F;&amp;#x5E55;&amp;#x8FDB;&amp;#x884C;&amp;#x6E05;&amp;#x5C4F;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x5C4F;&amp;#x5E55;&amp;#x662F;&amp;#x9ED1;&amp;#x8272;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x6307;&amp;#x5B9A;&amp;#x9700;&amp;#x8981;&amp;#x7684;&amp;#x6E05;&amp;#x5C4F;&amp;#x540E;&amp;#x7684;&amp;#x989C;&amp;#x8272;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BBE;&amp;#x7F6E;&amp;#x6E05;&amp;#x5C4F;&amp;#x989C;&amp;#x8272;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glClearColor(1.0f, 1.0f, 1.0f, 1.0f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6E05;&amp;#x5C4F;&amp;#x5904;&amp;#x7406;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6307;&amp;#x5B9A;&amp;#x6E05;&amp;#x5C4F;&amp;#x989C;&amp;#x8272;&amp;#x4E3A;&amp;#x767D;&amp;#x8272;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6E32;&amp;#x67D3;&amp;#x4E4B;&amp;#x524D;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6E32;&amp;#x67D3;&amp;#x7684;&amp;#x89C6;&amp;#x56FE;&amp;#x4F4D;&amp;#x7F6E;&amp;#x4E0E;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x518D;&amp;#x8FDB;&amp;#x884C;&amp;#x6E32;&amp;#x67D3;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BBE;&amp;#x7F6E;&amp;#x89C6;&amp;#x56FE;&amp;#x5927;&amp;#x5C0F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glViewport(0, 0, mSurfaceViewWidth, mSurfaceViewHeight)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6E32;&amp;#x67D3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, mVertexData.size / VERTEX_DIMENSION_SIZE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6E32;&amp;#x67D3;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;GLES20.GL_TRIANGLES&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x6E32;&amp;#x67D3;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EE3;&amp;#x8868;&amp;#x4F1A;&amp;#x4EE5;&amp;#x6BCF;3&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x4E3A;&amp;#x4E00;&amp;#x7EC4;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x6E32;&amp;#x67D3;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD0;&amp;#x884C;&amp;#x4E4B;&amp;#x540E;&amp;#x5C31;&amp;#x80FD;&amp;#x770B;&amp;#x5230;2&amp;#x4E2A;&amp;#x4E09;&amp;#x89D2;&amp;#x5F62;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53C2;&amp;#x6570;0&amp;#x4E0E;mVertexData.size / VERTEX_DIMENSION_SIZE&amp;#x4EE3;&amp;#x8868;&amp;#x6709;6&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x4E14;&amp;#x4ECE;&amp;#x7B2C;0&amp;#x4E2A;&amp;#x4F4D;&amp;#x7F6E;&amp;#x5F00;&amp;#x59CB;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x9876;&amp;#x70B9;&amp;#x4F4D;&amp;#x7F6E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x8FD0;&amp;#x884C;&amp;#x540E;&amp;#x7684;&amp;#x6548;&amp;#x679C;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;/2022/02/14/Android-OpenGL-ES-&amp;#x57FA;&amp;#x7840;&amp;#x539F;&amp;#x7406;/effect.jpeg&quot; width=&quot;350&quot; height=&quot;680/&quot;&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&amp;#x5927;&amp;#x529F;&amp;#x544A;&amp;#x6210;&amp;#xFF0C;&amp;#x4E0E;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x9884;&amp;#x671F;&amp;#x5B8C;&amp;#x5168;&amp;#x4E00;&amp;#x6837;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540E;&amp;#x7EED;&amp;#x4F1A;&amp;#x7EE7;&amp;#x7EED;&amp;#x804A;&amp;#x804A;&amp;#x989C;&amp;#x8272;&amp;#x7684;&amp;#x52A8;&amp;#x6001;&amp;#x586B;&amp;#x5145;&amp;#x3001;&amp;#x6E32;&amp;#x67D3;&amp;#x7684;&amp;#x4E09;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0E;&amp;#x7EB9;&amp;#x7406;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x656C;&amp;#x8BF7;&amp;#x671F;&amp;#x5F85;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6E90;&amp;#x7801;&amp;#x5730;&amp;#x5740;&amp;#xFF1A;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis/tree/feat_opengles_dev&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;OpenGL ES&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x7531;&amp;#x4E8E;5G&amp;#x7684;&amp;#x53D1;&amp;#x5C55;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x97F3;&amp;#x89C6;&amp;#x9891;&amp;#x8D8A;&amp;#x6765;&amp;#x8D8A;&amp;#x6D41;&amp;#x884C;&amp;#xFF0C
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="opengl" scheme="https://www.rousetime.com/tags/opengl/"/>
    
  </entry>
  
  <entry>
    <title>为了能够摸鱼，我走上了歧路</title>
    <link href="https://www.rousetime.com/2021/05/28/%E4%B8%BA%E4%BA%86%E8%83%BD%E5%A4%9F%E6%91%B8%E9%B1%BC%EF%BC%8C%E6%88%91%E8%B5%B0%E4%B8%8A%E4%BA%86%E6%AD%A7%E8%B7%AF/"/>
    <id>https://www.rousetime.com/2021/05/28/为了能够摸鱼，我走上了歧路/</id>
    <published>2021-05-28T14:29:08.000Z</published>
    <updated>2022-12-01T14:43:04.422Z</updated>
    
    <content type="html">&lt;h2 id=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;a href=&quot;#&amp;#x524D;&amp;#x8A00;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;/a&gt;&amp;#x524D;&amp;#x8A00;&lt;/h2&gt;&lt;p&gt;&amp;#x6BCF;&amp;#x5929;&amp;#x90FD;&amp;#x662F;&amp;#x91CD;&amp;#x590D;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x53EF;&amp;#x4E0D;&amp;#x884C;&amp;#xFF0C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x4E25;&amp;#x91CD;&amp;#x5F71;&amp;#x54CD;&amp;#x6211;&amp;#x7684;&amp;#x65E5;&amp;#x5E38;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x51CF;&amp;#x5C11;&amp;#x81EA;&amp;#x5DF1;&amp;#x65E5;&amp;#x5E38;&amp;#x7684;&amp;#x5F00;&amp;#x53D1;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x6211;&amp;#x51B3;&amp;#x5B9A;&amp;#x8D70;&amp;#x4E00;&amp;#x6761;&amp;#x6B67;&amp;#x8DEF;&amp;#xFF0C;&amp;#x94E4;&amp;#x800C;&amp;#x8D70;&amp;#x9669;&amp;#xFF0C;&amp;#x5C06;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x7684;&amp;#x5404;&amp;#x79CD;&amp;#x624B;&amp;#x52A8;&amp;#x57CB;&amp;#x70B9;&amp;#x7EDF;&amp;#x8BA1;&amp;#x66FF;&amp;#x6362;&amp;#x6210;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x57CB;&amp;#x70B9;&amp;#x3002;&amp;#x4EE5;&amp;#x540E;&amp;#x518D;&amp;#x4E5F;&amp;#x4E0D;&amp;#x7528;&amp;#x62C5;&amp;#x5FC3;&amp;#x6CA1;&amp;#x65F6;&amp;#x95F4;&amp;#x6478;&amp;#x9C7C;&amp;#x4E86;~&lt;/p&gt;
&lt;p&gt;&amp;#x4F5C;&amp;#x4E3A;Android&amp;#x5C4A;&amp;#x5F00;&amp;#x53D1;&amp;#x7684;&amp;#x4E00;&amp;#x5458;&amp;#xFF0C;&amp;#x4ECA;&amp;#x5929;&amp;#x6211;&amp;#x51B3;&amp;#x5B9A;&amp;#x5C06;&amp;#x6478;&amp;#x9C7C;&amp;#x65B9;&amp;#x6848;&amp;#x5206;&amp;#x4EAB;&amp;#x7ED9;&amp;#x5927;&amp;#x5BB6;&amp;#xFF0C;&amp;#x5E0C;&amp;#x671B;&amp;#x66F4;&amp;#x591A;&amp;#x7684;&amp;#x5E7F;&amp;#x5927;&amp;#x7FA4;&amp;#x4F17;&amp;#x80FD;&amp;#x591F;&amp;#x7684;&amp;#x52A0;&amp;#x5165;&amp;#x5230;&amp;#x6478;&amp;#x9C7C;&amp;#x7684;&amp;#x884C;&amp;#x5217;&amp;#x4E2D;~&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x4E0E;&amp;#x7B80;&amp;#x5316;&amp;#x5B9E;&amp;#x73B0;&amp;#x6B65;&amp;#x9AA4;&amp;#xFF0C;&amp;#x6211;&amp;#x5C06;&amp;#x4F1A;&amp;#x7ED3;&amp;#x5408;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484600&amp;amp;idx=1&amp;amp;sn=d0b0546d81aa28ba82d65f3451a01595&amp;amp;chksm=e8e0fd28df97743ef4e998d2ceda9d4358360c398c4d090827cfda165dadf8369ed20580e473&amp;amp;token=1002670919&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x52A8;&amp;#x6001;&amp;#x4EE3;&amp;#x7406;&amp;#x5206;&amp;#x6790;&amp;#x4E0E;&amp;#x4EFF;Retrofit&amp;#x5B9E;&amp;#x8DF5;&lt;/a&gt;&amp;#x4E2D;&amp;#x57CB;&amp;#x70B9;Demo&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x89E3;&amp;#xFF0C;&amp;#x6BD5;&amp;#x7ADF;&amp;#x5B9E;&amp;#x9645;&amp;#x9879;&amp;#x76EE;&amp;#x6BD4;&amp;#x8FD9;&amp;#x8981;&amp;#x590D;&amp;#x6742;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x7B80;&amp;#x5355;&amp;#x7684;Demo&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x6838;&amp;#x5FC3;&amp;#x70B9;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x771F;&amp;#x6B63;&amp;#x5B9E;&amp;#x73B0;&amp;#x4EE3;&amp;#x7801;&amp;#x6CE8;&amp;#x5165;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x770B;&amp;#x6B63;&amp;#x5E38;&amp;#x624B;&amp;#x52A8;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x6B65;&amp;#x9AA4;.&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484600&amp;amp;idx=1&amp;amp;sn=d0b0546d81aa28ba82d65f3451a01595&amp;amp;chksm=e8e0fd28df97743ef4e998d2ceda9d4358360c398c4d090827cfda165dadf8369ed20580e473&amp;amp;token=1002670919&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x52A8;&amp;#x6001;&amp;#x4EE3;&amp;#x7406;&amp;#x5206;&amp;#x6790;&amp;#x4E0E;&amp;#x4EFF;Retrofit&amp;#x5B9E;&amp;#x8DF5;&lt;/a&gt;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5C06;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x6B65;&amp;#x9AA4;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x7B80;&amp;#x5316;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x6CA1;&amp;#x770B;&amp;#x8FC7;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x4E5F;&amp;#x4E0D;&amp;#x5F71;&amp;#x54CD;&amp;#x63A5;&amp;#x4E0B;&amp;#x7684;&amp;#x9605;&amp;#x8BFB;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x58F0;&amp;#x660E;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x63A5;&amp;#x53E3;&amp;#x65B9;&amp;#x6CD5;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;interface StatisticService {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Scan(ProxyActivity.PAGE_NAME)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun buttonScan(@Content(StatisticTrack.Parameter.NAME) name: String)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Click(ProxyActivity.PAGE_NAME)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun buttonClick(@Content(StatisticTrack.Parameter.NAME) name: String, @Content(StatisticTrack.Parameter.TIME) clickTime: Long)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Scan(ProxyActivity.PAGE_NAME)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun textScan(@Content(StatisticTrack.Parameter.NAME) name: String)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Click(ProxyActivity.PAGE_NAME)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun textClick(@Content(StatisticTrack.Parameter.NAME) name: String, @Content(StatisticTrack.Parameter.TIME) clickTime: Long)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;&amp;#x52A8;&amp;#x6001;&amp;#x4EE3;&amp;#x7406;&amp;#x83B7;&amp;#x53D6;StatisticService&amp;#x63A5;&amp;#x53E3;&amp;#x5F15;&amp;#x7528;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private val mStatisticService = Statistic.instance.create(StatisticService::class.java)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x5728;&amp;#x5408;&amp;#x9002;&amp;#x7684;&amp;#x57CB;&amp;#x70B9;&amp;#x4F4D;&amp;#x7F6E;&amp;#x8FDB;&amp;#x884C;&amp;#x57CB;&amp;#x70B9;&amp;#x7EDF;&amp;#x8BA1;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;Click&amp;#x57CB;&amp;#x70B9;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun onClick(view: View) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (view.id == R.id.button) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mStatisticService.buttonClick(BUTTON, System.currentTimeMillis() / 1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else if (view.id == R.id.text) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mStatisticService.textClick(TEXT, System.currentTimeMillis() / 1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;2&amp;#x3001;3&amp;#x6B65;&amp;#x9AA4;&amp;#x90FD;&amp;#x662F;&amp;#x5728;&amp;#x5BF9;&amp;#x5E94;&amp;#x57CB;&amp;#x70B9;&amp;#x7684;&amp;#x7C7B;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;ProxyActivity&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class ProxyActivity : AppCompatActivity() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6B65;&amp;#x9AA4;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private val mStatisticService = Statistic.instance.create(StatisticService::class.java)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    companion object {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private const val BUTTON = &amp;quot;statistic_button&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private const val TEXT = &amp;quot;statistic_text&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        const val PAGE_NAME = &amp;quot;ProxyActivity&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun onCreate(savedInstanceState: Bundle?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super.onCreate(savedInstanceState)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val extraData = getExtraData()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setContentView(extraData.layoutId)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title = extraData.title&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6B65;&amp;#x9AA4;3 =&amp;gt; &amp;#x66DD;&amp;#x5149;&amp;#x70B9;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mStatisticService.buttonScan(BUTTON)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mStatisticService.textScan(TEXT)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private fun getExtraData(): MainModel =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent?.extras?.getParcelable(ActivityUtils.EXTRA_DATA)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    ?: throw NullPointerException(&amp;quot;intent or extras is null&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6B65;&amp;#x9AA4;3 =&amp;gt; &amp;#x70B9;&amp;#x51FB;&amp;#x70B9;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun onClick(view: View) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (view.id == R.id.button) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mStatisticService.buttonClick(BUTTON, System.currentTimeMillis() / 1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else if (view.id == R.id.text) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mStatisticService.textClick(TEXT, System.currentTimeMillis() / 1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6B65;&amp;#x9AA4;1&amp;#x662F;&amp;#x521B;&amp;#x5EFA;&amp;#x65B0;&amp;#x7684;&amp;#x7C7B;&amp;#xFF0C;&amp;#x4E0D;&amp;#x5728;&amp;#x4EE3;&amp;#x7801;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x8303;&amp;#x56F4;&amp;#x4E4B;&amp;#x5185;&amp;#x3002;&amp;#x81EA;&amp;#x52A8;&amp;#x751F;&amp;#x6210;&amp;#x7C7B;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;&amp;#x6CE8;&amp;#x89E3;+process+JavaPoet&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&amp;#x7C7B;&amp;#x4F3C;&amp;#x4E8E;ButterKnife&amp;#x3001;Dagger2&amp;#x3001;Room&amp;#x7B49;&amp;#x3002;&amp;#x4E4B;&amp;#x524D;&amp;#x6211;&amp;#x4E5F;&amp;#x6709;&amp;#x5199;&amp;#x8FC7;&amp;#x76F8;&amp;#x5173;&amp;#x7684;demo&amp;#x4E0E;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x4E0D;&amp;#x5728;&amp;#x672C;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x7684;&amp;#x8303;&amp;#x56F4;&amp;#x4E4B;&amp;#x5185;&amp;#xFF0C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x884C;&amp;#x53BB;&amp;#x4E86;&amp;#x89E3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x662F;&amp;#xFF1A;&amp;#x9700;&amp;#x8981;&amp;#x5728;ProxyActiviy&amp;#x4E2D;&amp;#x5C06;2&amp;#x3001;3&amp;#x6B65;&amp;#x9AA4;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x8F6C;&amp;#x6210;&amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x5C31;&amp;#x662F;&amp;#x5728;&amp;#x73B0;&amp;#x6709;&amp;#x7684;&amp;#x7C7B;&amp;#x4E2D;&amp;#x81EA;&amp;#x52A8;&amp;#x52A0;&amp;#x5165;&amp;#x6211;&amp;#x4EEC;&amp;#x9884;&amp;#x671F;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x6211;&amp;#x4EEC;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x8FDB;&amp;#x884C;&amp;#x7F16;&amp;#x5199;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x5DF2;&amp;#x7ECF;&amp;#x77E5;&amp;#x9053;&amp;#x4E86;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x63A5;&amp;#x4E0B;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#x5C31;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x65F6;&amp;#x5019;&amp;#x8FDB;&amp;#x884C;&amp;#x6CE8;&amp;#x5165;&amp;#x8FD9;&amp;#x4E9B;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x5C31;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;Android&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x6253;&amp;#x5305;&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#xFF0C;Android&amp;#x4F7F;&amp;#x7528;Gradle&amp;#x8FDB;&amp;#x884C;&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x6253;&amp;#x5305;&amp;#xFF0C;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/1.webp&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6253;&amp;#x5305;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x5C06;&amp;#x6E90;&amp;#x6587;&amp;#x4EF6;&amp;#x8F6C;&amp;#x5316;&amp;#x6210;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5C06;.class&amp;#x6587;&amp;#x4EF6;&amp;#x8F6C;&amp;#x6210;Android&amp;#x80FD;&amp;#x8BC6;&amp;#x522B;&amp;#x7684;.dex&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x5C06;&amp;#x6240;&amp;#x6709;&amp;#x7684;.dex&amp;#x6587;&amp;#x4EF6;&amp;#x7EC4;&amp;#x5408;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;.apk&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x63D0;&amp;#x4F9B;&amp;#x7528;&amp;#x6237;&amp;#x4E0B;&amp;#x8F7D;&amp;#x4E0E;&amp;#x5B89;&amp;#x88C5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5728;&amp;#x5C06;&amp;#x6E90;&amp;#x6587;&amp;#x4EF6;&amp;#x8F6C;&amp;#x5316;&amp;#x6210;.class&amp;#x6587;&amp;#x4EF6;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;Google&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E00;&amp;#x79CD;Transform&amp;#x673A;&amp;#x5236;&amp;#xFF0C;&amp;#x5141;&amp;#x8BB8;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x6253;&amp;#x5305;&amp;#x4E4B;&amp;#x524D;&amp;#x5BF9;.class&amp;#x6587;&amp;#x4EF6;&amp;#x8FDB;&amp;#x884C;&amp;#x4FEE;&amp;#x6539;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4FEE;&amp;#x6539;&amp;#x65F6;&amp;#x673A;&amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x4EE3;&amp;#x7801;&amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x65F6;&amp;#x673A;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;transform&amp;#x662F;&amp;#x7531;gradle&amp;#x63D0;&amp;#x4F9B;&amp;#xFF0C;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x65E5;&amp;#x5E38;&amp;#x7684;&amp;#x6784;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x4E5F;&amp;#x4F1A;&amp;#x770B;&amp;#x5230;&amp;#x7CFB;&amp;#x7EDF;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;transform&amp;#x8EAB;&amp;#x5F71;&amp;#xFF0C;gradle&amp;#x7531;&amp;#x5404;&amp;#x79CD;task&amp;#x7EC4;&amp;#x6210;&amp;#xFF0C;transform&amp;#x5C31;&amp;#x7A7F;&amp;#x63D2;&amp;#x5728;&amp;#x8FD9;&amp;#x4E9B;task&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/2.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x56FE;&amp;#x4E2D;&amp;#x9AD8;&amp;#x4EAE;&amp;#x7684;&amp;#x90E8;&amp;#x5206;&amp;#x5C31;&amp;#x662F;&amp;#x672C;&amp;#x6B21;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;TraceTransform&amp;#xFF0C; &amp;#x5B83;&amp;#x4F1A;&amp;#x5728;.class&amp;#x8F6C;&amp;#x5316;&amp;#x6210;.dex&amp;#x4E4B;&amp;#x524D;&amp;#x8FDB;&amp;#x884C;&amp;#x6267;&amp;#x884C;&amp;#xFF0C;&amp;#x76EE;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x4FEE;&amp;#x6539;&amp;#x76EE;&amp;#x6807;.class&amp;#x6587;&amp;#x4EF6;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Transform&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x9700;&amp;#x8981;&amp;#x7ED3;&amp;#x5408;Gradle Plugin&amp;#x4E00;&amp;#x8D77;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;Plugin&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x521B;&amp;#x5EFA;Plugin&quot;&gt;&lt;a href=&quot;#&amp;#x521B;&amp;#x5EFA;Plugin&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521B;&amp;#x5EFA;Plugin&quot;&gt;&lt;/a&gt;&amp;#x521B;&amp;#x5EFA;Plugin&lt;/h2&gt;&lt;p&gt;&amp;#x5728;app&amp;#x7684;build.gradle&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x80FD;&amp;#x591F;&amp;#x770B;&amp;#x5230;&amp;#x4EE5;&amp;#x4E0B;&amp;#x7C7B;&amp;#x4F3C;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#x5F15;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;com.android.application&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;kotlin-android&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;kotlin-android-extensions&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;kotlin-kapt&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;quot;androidx.navigation.safeargs.kotlin&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;trace_plugin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#x5305;&amp;#x62EC;&amp;#x7CFB;&amp;#x7EDF;&amp;#x81EA;&amp;#x5E26;&amp;#x3001;&amp;#x7B2C;&amp;#x4E09;&amp;#x65B9;&amp;#x7684;&amp;#x4E0E;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x3002;&amp;#x5176;&amp;#x4E2D;trace_plugin&amp;#x5C31;&amp;#x662F;&amp;#x672C;&amp;#x6B21;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#x3002;&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x8BA9;&amp;#x9879;&amp;#x76EE;&amp;#x4F7F;&amp;#x7528;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#xFF0C;Gradle&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E09;&amp;#x79CD;&amp;#x6253;&amp;#x5305;&amp;#x63D2;&amp;#x4EF6;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Build Script: &amp;#x5C06;&amp;#x63D2;&amp;#x4EF6;&amp;#x7684;&amp;#x6E90;&amp;#x4EE3;&amp;#x7801;&amp;#x76F4;&amp;#x63A5;&amp;#x5305;&amp;#x542B;&amp;#x5728;&amp;#x6784;&amp;#x5EFA;&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x505A;&amp;#x7684;&amp;#x597D;&amp;#x5904;&amp;#x662F;&amp;#xFF0C;&amp;#x65E0;&amp;#x9700;&amp;#x6267;&amp;#x884C;&amp;#x4EFB;&amp;#x4F55;&amp;#x64CD;&amp;#x4F5C;&amp;#x5373;&amp;#x53EF;&amp;#x81EA;&amp;#x52A8;&amp;#x7F16;&amp;#x8BD1;&amp;#x63D2;&amp;#x4EF6;&amp;#x5E76;&amp;#x5C06;&amp;#x5176;&amp;#x5305;&amp;#x542B;&amp;#x5728;&amp;#x6784;&amp;#x5EFA;&amp;#x811A;&amp;#x672C;&amp;#x7684;&amp;#x7C7B;&amp;#x8DEF;&amp;#x5F84;&amp;#x4E2D;&amp;#x3002;&amp;#x4F46;&amp;#x7F3A;&amp;#x70B9;&amp;#x662F;&amp;#x5B83;&amp;#x5728;&amp;#x6784;&amp;#x5EFA;&amp;#x811A;&amp;#x672C;&amp;#x4E4B;&amp;#x5916;&amp;#x4E0D;&amp;#x53EF;&amp;#x89C1;&amp;#xFF0C;&amp;#x5E38;&amp;#x7528;&amp;#x5728;&amp;#x811A;&amp;#x672C;&amp;#x81EA;&amp;#x52A8;&amp;#x6784;&amp;#x5EFA;&amp;#x4E2D;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;buildSrc project&amp;#xFF1A;gradle&amp;#x4F1A;&amp;#x81EA;&amp;#x52A8;&amp;#x8BC6;&amp;#x522B;buildSrc&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C06;plugin&amp;#x653E;&amp;#x5230;buildSrc&amp;#x76EE;&amp;#x5F55;&amp;#x4E2D;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5176;&amp;#x5B83;&amp;#x7684;&amp;#x6784;&amp;#x5EFA;&amp;#x811A;&amp;#x672C;&amp;#x5C31;&amp;#x80FD;&amp;#x81EA;&amp;#x52A8;&amp;#x8BC6;&amp;#x522B;&amp;#x8FD9;&amp;#x4E2A;plugin, &amp;#x591A;&amp;#x7528;&amp;#x4E8E;&amp;#x81EA;&amp;#x8EAB;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5916;&amp;#x4E0D;&amp;#x5171;&amp;#x4EAB;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;Standalone project: &amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x72EC;&amp;#x7ACB;&amp;#x7684;plugin&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5BF9;&amp;#x5916;&amp;#x53D1;&amp;#x5E03;Jar&amp;#x4E0E;&amp;#x5916;&amp;#x90E8;&amp;#x5171;&amp;#x4EAB;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x7B2C;&amp;#x4E09;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;Plugin&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x521B;&amp;#x5EFA;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x76EE;&amp;#x5F55;&amp;#x7ED3;&amp;#x6784;&amp;#x5927;&amp;#x6982;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/3.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9;&amp;#x522B;&amp;#x7684;&amp;#x9879;&amp;#x76EE;&amp;#x80FD;&amp;#x591F;&amp;#x5F15;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;Plugin&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5BF9;&amp;#x5916;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x53D1;&amp;#x5E03;&amp;#x5230;maven&amp;#x4E2D;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x672C;&amp;#x5730;&amp;#x58F0;&amp;#x660E;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x7B80;&amp;#x4FBF;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x672C;&amp;#x5730;&amp;#x58F0;&amp;#x660E;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;groovy&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;maven&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;kotlin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;java-gradle-plugin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dependencies {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    implementation gradleApi()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    implementation localGroovy()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    implementation &amp;apos;com.android.tools.build:gradle:3.4.1&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gradlePlugin {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    plugins {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        version {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x5728; app &amp;#x6A21;&amp;#x5757;&amp;#x9700;&amp;#x8981;&amp;#x901A;&amp;#x8FC7; id &amp;#x5F15;&amp;#x7528;&amp;#x8FD9;&amp;#x4E2A;&amp;#x63D2;&amp;#x4EF6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            id = &amp;apos;trace_plugin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x5B9E;&amp;#x73B0;&amp;#x8FD9;&amp;#x4E2A;&amp;#x63D2;&amp;#x4EF6;&amp;#x7684;&amp;#x7C7B;&amp;#x7684;&amp;#x8DEF;&amp;#x5F84;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            implementationClass = &amp;apos;com.rousetime.trace_plugin.TracePlugin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8BE5;Plugin&amp;#x7684;id&amp;#x4E3A;trace_plugin&amp;#xFF0C;&amp;#x5B9E;&amp;#x73B0;&amp;#x5165;&amp;#x53E3;&amp;#x4E3A;com.rousetime.trace_plugin.TracePlugin&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x58F0;&amp;#x660E;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;&amp;#x9879;&amp;#x76EE;&amp;#x7684;&amp;#x6839;&amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x7684;build.gradle&amp;#x4E2D;&amp;#x5F15;&amp;#x5165;&amp;#x8BE5;id&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;plugins {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    id &amp;quot;trace_plugin&amp;quot; apply false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x5728;app&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;apply&amp;#x8FD9;&amp;#x4E2A;plugin&amp;#xFF0C;&amp;#x8FD8;&amp;#x9700;&amp;#x8981;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;META-INF.gradle-plugins&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#x5982;&amp;#x4E0B;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/4.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;trace_plugin.properties&amp;#x6587;&amp;#x4EF6;&amp;#x540D;&amp;#x975E;&amp;#x5E38;&amp;#x91CD;&amp;#x8981;&amp;#xFF0C;&amp;#x524D;&amp;#x9762;&amp;#x7684;trace_plugin&amp;#x5C31;&amp;#x4EE3;&amp;#x8868;&amp;#x4F60;&amp;#x5728;build.gradle&amp;#x4E2D;apply&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#x540D;&amp;#x79F0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x53EA;&amp;#x6709;&amp;#x4E00;&amp;#x884C;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;TracePlugin&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x5165;&amp;#x53E3;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;implementation-class=com.rousetime.trace_plugin.TracePlugin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x90FD;&amp;#x51C6;&amp;#x5907;&amp;#x5C31;&amp;#x7EEA;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;build.gradle&amp;#x8FDB;&amp;#x884C;apply plugin&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply plugin: &amp;apos;trace_plugin&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;plugin&amp;#x5C31;&amp;#x5F15;&amp;#x5165;&amp;#x5230;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x518D;&amp;#x56DE;&amp;#x5230;&amp;#x521A;&amp;#x521A;&amp;#x7684;Plugin&amp;#x5165;&amp;#x53E3;TracePlugin&amp;#xFF0C;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class TracePlugin : Plugin&amp;lt;Project&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun apply(target: Project) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(&amp;quot;Trace Plugin start to apply&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (target.plugins.hasPlugin(AppPlugin::class.java)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            val appExtension = target.extensions.getByType(AppExtension::class.java)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            appExtension.registerTransform(TraceTransform())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val methodVisitorConfig = target.extensions.create(&amp;quot;methodVisitor&amp;quot;, MethodVisitorConfig::class.java)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LocalConfig.methodVisitorConfig = methodVisitorConfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        target.afterEvaluate {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            println(methodVisitorConfig.name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53EA;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;apply&amp;#xFF0C;&amp;#x5728;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x6211;&amp;#x4EEC;&amp;#x6253;&amp;#x5370;&amp;#x4E00;&amp;#x884C;&amp;#x6587;&amp;#x672C;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x91CD;&amp;#x65B0;&amp;#x6784;&amp;#x5EFA;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x5728;build&amp;#x8F93;&amp;#x51FA;&amp;#x7A97;&amp;#x53E3;&amp;#x5C31;&amp;#x80FD;&amp;#x770B;&amp;#x5230;&amp;#x8FD9;&amp;#x884C;&amp;#x6587;&amp;#x672C;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt; Configure project :app&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Trace Plugin start to apply&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mehtodVisitorConfig&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Deprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Use &amp;apos;--warning-mode all&amp;apos; to show the individual deprecation warnings.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;plugin&amp;#x5DF2;&amp;#x7ECF;&amp;#x521B;&amp;#x5EFA;&amp;#x6210;&amp;#x529F;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5DF2;&amp;#x7ECF;&amp;#x96C6;&amp;#x6210;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#x8FDB;&amp;#x5165;&amp;#x7B2C;&amp;#x4E8C;&amp;#x6B65;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5B9E;&amp;#x73B0;Transform&quot;&gt;&lt;a href=&quot;#&amp;#x5B9E;&amp;#x73B0;Transform&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B9E;&amp;#x73B0;Transform&quot;&gt;&lt;/a&gt;&amp;#x5B9E;&amp;#x73B0;Transform&lt;/h2&gt;&lt;p&gt;&amp;#x5728;TracePlugin&amp;#x7684;apply&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5BF9;&amp;#x9879;&amp;#x76EE;&amp;#x7684;appExtension&amp;#x6CE8;&amp;#x518C;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;TraceTransform&amp;#x3002;&amp;#x91CD;&amp;#x70B9;&amp;#x6765;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;TraceTransform&amp;#x5C31;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;gradle&amp;#x6784;&amp;#x5EFA;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x63D2;&amp;#x5165;&amp;#x7684;Transform,&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#x3002;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class TraceTransform : Transform() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun getName(): String = this::class.java.simpleName&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun getInputTypes(): MutableSet&amp;lt;QualifiedContent.ContentType&amp;gt; = TransformManager.CONTENT_JARS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun isIncremental(): Boolean = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun getScopes(): MutableSet&amp;lt;in QualifiedContent.Scope&amp;gt; = TransformManager.SCOPE_FULL_PROJECT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun transform(transformInvocation: TransformInvocation?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TransformProxy(transformInvocation, object : TransformProcess {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            override fun process(entryName: String, sourceClassByte: ByteArray): ByteArray? {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // use ams to inject&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return if (ClassUtils.checkClassName(entryName)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    TraceInjectDelegate().inject(sourceClassByte)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }).apply {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            transform()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE3;&amp;#x7801;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x8981;&amp;#x5B9E;&amp;#x73B0;&amp;#x51E0;&amp;#x4E2A;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;getName: Transform&amp;#x5BF9;&amp;#x5916;&amp;#x663E;&amp;#x793A;&amp;#x7684;&amp;#x540D;&amp;#x79F0;&lt;/li&gt;
&lt;li&gt;getInputTypes: &amp;#x626B;&amp;#x63CF;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;CONENT_JARS&amp;#x4EE3;&amp;#x8868;CLASSES&amp;#x4E0E;RESOURCES&lt;/li&gt;
&lt;li&gt;isIncremental: &amp;#x662F;&amp;#x5426;&amp;#x5F00;&amp;#x542F;&amp;#x589E;&amp;#x91CF;&amp;#xFF0C;&amp;#x5F00;&amp;#x542F;&amp;#x540E;&amp;#x4F1A;&amp;#x63D0;&amp;#x9AD8;&amp;#x6784;&amp;#x5EFA;&amp;#x901F;&amp;#x5EA6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x9700;&amp;#x8981;&amp;#x624B;&amp;#x52A8;&amp;#x5904;&amp;#x7406;&amp;#x589E;&amp;#x91CF;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&lt;/li&gt;
&lt;li&gt;getScopes: &amp;#x626B;&amp;#x63CF;&amp;#x4F5C;&amp;#x7528;&amp;#x8303;&amp;#x56F4;&amp;#xFF0C;SCOPE_FULL_PROJECT&amp;#x4EE3;&amp;#x8868;&amp;#x6574;&amp;#x4E2A;&amp;#x9879;&amp;#x76EE;&lt;/li&gt;
&lt;li&gt;transform: &amp;#x9700;&amp;#x8981;&amp;#x8F6C;&amp;#x6362;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x90FD;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x5904;&amp;#x7406;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;transform&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;.class&amp;#x6587;&amp;#x4EF6;&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x6709;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;TransformInvocation&amp;#xFF0C;&amp;#x8BE5;&amp;#x53C2;&amp;#x6570;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E0A;&amp;#x9762;&amp;#x5B9A;&amp;#x4E49;&amp;#x8303;&amp;#x56F4;&amp;#x5185;&amp;#x626B;&amp;#x63CF;&amp;#x5230;&amp;#x7684;&amp;#x6240;&amp;#x7528;jar&amp;#x6587;&amp;#x4EF6;&amp;#x4E0E;directory&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;transform&amp;#x4E2D;&amp;#x6211;&amp;#x4EEC;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5728;&amp;#x8FD9;&amp;#x4E9B;jar&amp;#x4E0E;directory&amp;#x4E2D;&amp;#x89E3;&amp;#x6790;&amp;#x51FA;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x627E;&amp;#x5230;&amp;#x76EE;&amp;#x6807;.class&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#x3002;&amp;#x53EA;&amp;#x6709;&amp;#x89E3;&amp;#x6790;&amp;#x51FA;&amp;#x4E86;&amp;#x6240;&amp;#x6709;&amp;#x7684;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x624D;&amp;#x80FD;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#x8FC7;&amp;#x6EE4;&amp;#x51FA;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;.class&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;transform&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x6D41;&amp;#x7A0B;&amp;#x662F;&amp;#xFF1A;&amp;#x89E3;&amp;#x6790;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x8FC7;&amp;#x6EE4;&amp;#x51FA;&amp;#x9700;&amp;#x8981;&amp;#x5904;&amp;#x7406;&amp;#x7684;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5199;&amp;#x5165;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5C06;&amp;#x5904;&amp;#x7406;&amp;#x8FC7;&amp;#x7684;.class&amp;#x6587;&amp;#x4EF6;&amp;#x91CD;&amp;#x65B0;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;jar&amp;#x6216;&amp;#x8005;directory&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x79CD;&amp;#x89E3;&amp;#x6790;&amp;#x3001;&amp;#x5904;&amp;#x7406;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5B9E;&amp;#x73B0;&amp;#x5077;&amp;#x5929;&amp;#x6362;&amp;#x65E5;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x6709;&amp;#x4E00;&amp;#x5957;&amp;#x56FA;&amp;#x5B9A;&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x81EA;&amp;#x7136;&amp;#x6709;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4E00;&amp;#x5957;&amp;#x56FA;&amp;#x5B9A;&amp;#x662F;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x4E09;&amp;#x4E2A;&amp;#x6B65;&amp;#x9AA4;&amp;#x4E2D;&amp;#xFF0C;&amp;#x771F;&amp;#x6B63;&amp;#x9700;&amp;#x8981;&amp;#x5B9E;&amp;#x73B0;&amp;#x7684;&amp;#x662F;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x9879;&amp;#x76EE;&amp;#x6709;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6709;&amp;#x76F8;&amp;#x5BF9;&amp;#x5B8C;&amp;#x6574;&amp;#x7684;&amp;#x4E00;&amp;#x5957;&amp;#x901A;&amp;#x7528;&amp;#x5B9E;&amp;#x73B0;&amp;#x65B9;&amp;#x6848;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x7684;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x6709;&amp;#x591A;&amp;#x4E2A;&amp;#x8FD9;&amp;#x79CD;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;Transform&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C06;&amp;#x5176;&amp;#x62BD;&amp;#x79BB;&amp;#x51FA;&amp;#x6765;&amp;#x5355;&amp;#x4E2A;module&amp;#xFF0C;&amp;#x589E;&amp;#x52A0;&amp;#x590D;&amp;#x7528;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&quot;&gt;&lt;a href=&quot;#&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&quot;&gt;&lt;/a&gt;&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&lt;/h3&gt;&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x5B9E;&amp;#x73B0;&amp;#x6B65;&amp;#x9AA4;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun transform() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!isIncremental) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	// &amp;#x4E0D;&amp;#x662F;&amp;#x589E;&amp;#x91CF;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x5C06;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x8F93;&amp;#x51FA;&amp;#x76EE;&amp;#x5F55;&amp;#x4E2D;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x5168;&amp;#x90E8;&amp;#x5220;&amp;#x9664;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        outputProvider?.deleteAll()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    inputs?.forEach {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.jarInputs.forEach { jarInput -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            transformJar(jarInput)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // directory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.directoryInputs.forEach { directoryInput -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            transformDirectory(directoryInput)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    executor?.invokeAll(tasks)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;transform&amp;#x65B9;&amp;#x6CD5;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5206;&amp;#x522B;&amp;#x904D;&amp;#x5386;jar&amp;#x4E0E;directory&amp;#x4E2D;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x5728;&amp;#x8FD9;&amp;#x4E24;&amp;#x5927;&amp;#x79CD;&amp;#x7C7B;&amp;#x4E2D;&amp;#x5206;&amp;#x522B;&amp;#x89E3;&amp;#x6790;&amp;#x51FA;.class&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;jar&amp;#x7684;&amp;#x89E3;&amp;#x6790;transformJar&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private fun transformJar(jarInput: JarInput) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val status = jarInput.status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var destName = jarInput.file.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (destName.endsWith(&amp;quot;.jar&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        destName = destName.substring(0, destName.length - 4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x91CD;&amp;#x547D;&amp;#x540D;, &amp;#x53EF;&amp;#x80FD;&amp;#x540C;&amp;#x540D;&amp;#x88AB;&amp;#x8986;&amp;#x76D6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val hexName = DigestUtils.md2Hex(jarInput.file.absolutePath).substring(0, 8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8F93;&amp;#x51FA;&amp;#x6587;&amp;#x4EF6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val dest = outputProvider?.getContentLocation(destName + &amp;quot;_&amp;quot; + hexName, jarInput.contentTypes, jarInput.scopes, Format.JAR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (isIncremental) { // &amp;#x589E;&amp;#x91CF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        when (status) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Status.NOTCHANGED -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // nothing to do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Status.ADDED, Status.CHANGED -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                foreachJar(jarInput, dest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Status.REMOVED -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (dest?.exists() == true) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    FileUtils.forceDelete(dest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            else -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        foreachJar(jarInput, dest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x589E;&amp;#x91CF;&amp;#x7F16;&amp;#x8BD1;&amp;#xFF0C;&amp;#x5C31;&amp;#x5206;&amp;#x522B;&amp;#x5904;&amp;#x7406;&amp;#x589E;&amp;#x91CF;&amp;#x7684;&amp;#x4E0D;&amp;#x540C;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x7684;&amp;#x662F;ADDED&amp;#x4E0E;CHANGED&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#x4E0E;&amp;#x975E;&amp;#x589E;&amp;#x91CF;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;&amp;#x53BB;&amp;#x904D;&amp;#x5386;jar&amp;#xFF0C;&amp;#x4ECE;&amp;#x4E2D;&amp;#x89E3;&amp;#x6790;&amp;#x51FA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;.class&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x904D;&amp;#x5386;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x4EE3;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;while (enumeration.hasMoreElements()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val jarEntry = enumeration.nextElement()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val inputStream = originalFile.getInputStream(jarEntry)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val entryName = jarEntry.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6784;&amp;#x5EFA;zipEntry&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val zipEntry = ZipEntry(entryName)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jarOutputStream.putNextEntry(zipEntry)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var modifyClassByte: ByteArray? = null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val sourceClassByte = IOUtils.toByteArray(inputStream)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (entryName.endsWith(&amp;quot;.class&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        modifyClassByte = transformProcess.process(entryName, sourceClassByte)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (modifyClassByte == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jarOutputStream.write(sourceClassByte)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jarOutputStream.write(modifyClassByte)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    inputStream.close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jarOutputStream.closeEntry()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;entryName&amp;#x7684;&amp;#x540E;&amp;#x7F00;&amp;#x662F;.class&amp;#x8BF4;&amp;#x660E;&amp;#x5F53;&amp;#x524D;&amp;#x662F;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5355;&amp;#x72EC;&amp;#x62FF;&amp;#x51FA;&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x540E;&amp;#x7EED;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540E;&amp;#x7EED;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#x4EA4;&amp;#x7ED9;&amp;#x4E86;transformProcess.process&amp;#x3002;&amp;#x5177;&amp;#x4F53;&amp;#x5904;&amp;#x7406;&amp;#x5148;&amp;#x653E;&amp;#x4E00;&amp;#x653E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5904;&amp;#x7406;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x518D;&amp;#x5C06;&amp;#x5904;&amp;#x7406;&amp;#x540E;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x62F7;&amp;#x8D1D;&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;jar&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;directory&amp;#x4E5F;&amp;#x662F;&amp;#x7C7B;&amp;#x4F3C;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private fun foreachFile(dir: File, dest: File?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (dir.isDirectory) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        FileUtils.copyDirectory(dir, dest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        getAllFiles(dir).forEach {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (it.name.endsWith(&amp;quot;.class&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                val task = Callable {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    val absolutePath = it.absolutePath.replace(dir.absolutePath + File.separator, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    val className = ClassUtils.path2Classname(absolutePath)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    val bytes = IOUtils.toByteArray(it.inputStream())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    val modifyClassByte = process(className ?: &amp;quot;&amp;quot;, bytes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x4FDD;&amp;#x5B58;&amp;#x4FEE;&amp;#x6539;&amp;#x7684;classFile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    modifyClassByte?.let { byte -&amp;gt; saveClassFile(byte, dest, absolutePath) }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tasks.add(task)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                executor?.submit(task)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x540C;&amp;#x6837;&amp;#x662F;&amp;#x8FC7;&amp;#x6EE4;&amp;#x51FA;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x4EA4;&amp;#x7ED9;process&amp;#x65B9;&amp;#x6CD5;&amp;#x8FDB;&amp;#x884C;&amp;#x7EDF;&amp;#x4E00;&amp;#x5904;&amp;#x7406;&amp;#x3002;&amp;#x6700;&amp;#x540E;&amp;#x5C06;&amp;#x5904;&amp;#x7406;&amp;#x5B8C;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x62F7;&amp;#x8D1D;&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;&amp;#x539F;&amp;#x8DEF;&amp;#x5F84;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x5C31;&amp;#x662F;Transform&amp;#x7684;&amp;#x89E3;&amp;#x6790;&amp;#x4E0E;&amp;#x62F7;&amp;#x8D1D;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#&amp;#x5904;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;/a&gt;&amp;#x5904;&amp;#x7406;&lt;/h3&gt;&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x63D0;&amp;#x5230;.class&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x90FD;&amp;#x8F6C;&amp;#x4EA4;&amp;#x7ED9;process&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728;TraceTransform&amp;#x7684;transform&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override fun transform(transformInvocation: TransformInvocation?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    TransformProxy(transformInvocation, object : TransformProcess {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        override fun process(entryName: String, sourceClassByte: ByteArray): ByteArray? {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // use ams to inject&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return if (ClassUtils.checkClassName(entryName)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                TraceInjectDelegate().inject(sourceClassByte)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }).apply {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        transform()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;process&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;TraceInjectDelegate&amp;#x7684;inject&amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#x8FC7;&amp;#x6EE4;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x3002;&amp;#x6700;&amp;#x7EC8;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x4F1A;&amp;#x6765;&amp;#x5230;modifyClassByte&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class TraceAsmInject : Inject {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun modifyClassByte(byteArray: ByteArray): ByteArray {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val classWriter = ClassWriter(ClassWriter.COMPUTE_MAXS)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val classFilterVisitor = ClassFilterVisitor(classWriter)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val classReader = ClassReader(byteArray)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        classReader.accept(classFilterVisitor, ClassReader.EXPAND_FRAMES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return classWriter.toByteArray()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;ClassWriter&amp;#x3001;ClassFilterVisitor&amp;#x3001;ClassReader&amp;#x90FD;&amp;#x662F;ASM&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x91CD;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;ASM&quot;&gt;&lt;a href=&quot;#ASM&quot; class=&quot;headerlink&quot; title=&quot;ASM&quot;&gt;&lt;/a&gt;ASM&lt;/h2&gt;&lt;p&gt;ASM&amp;#x662F;&amp;#x64CD;&amp;#x4F5C;Java&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x5DE5;&amp;#x5177;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x5B9E;&amp;#x64CD;&amp;#x4F5C;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x7684;&amp;#x9664;&amp;#x4E86;ASM&amp;#x8FD8;&amp;#x6709;javassist&amp;#xFF0C;&amp;#x4F46;&amp;#x4E2A;&amp;#x4EBA;&amp;#x89C9;&amp;#x5F97;ASM&amp;#x66F4;&amp;#x65B9;&amp;#x4FBF;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x5B83;&amp;#x6709;&amp;#x4E00;&amp;#x7CFB;&amp;#x5217;&amp;#x7684;&amp;#x8F85;&amp;#x52A9;&amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x80FD;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x5E2E;&amp;#x52A9;&amp;#x6211;&amp;#x4EEC;&amp;#x5B9E;&amp;#x73B0;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6CE8;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4E0A;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5F97;&amp;#x5230;&amp;#x4E86;.class&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x626B;&amp;#x63CF;&amp;#x6574;&amp;#x4E2A;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5224;&amp;#x65AD;&amp;#x662F;&amp;#x5426;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x5C06;&amp;#x8FD9;&amp;#x4E9B;&amp;#x903B;&amp;#x8F91;&amp;#x5C01;&amp;#x88C5;&amp;#x5230;&amp;#x4E86;ClassFilterVisitor&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;ASM&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;ClassVisitor&amp;#x3001;MethodVisitor&amp;#x3001;FieldVisitor&amp;#x7B49;API&amp;#x3002;&amp;#x6BCF;&amp;#x5F53;ASM&amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x65F6;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;&amp;#x5B83;&amp;#x7684;visit&amp;#x3001;visitField&amp;#x3001;visitMethod&amp;#x4E0E;visitAnnotation&amp;#x7B49;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E9B;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5224;&amp;#x65AD;&amp;#x5E76;&amp;#x5904;&amp;#x7406;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class ClassFilterVisitor(cv: ClassVisitor?) : ClassVisitor(Opcodes.ASM5, cv) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun visit(version: Int, access: Int, name: String?, signature: String?, superName: String?, interfaces: Array&amp;lt;out String&amp;gt;?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super.visit(version, access, name, signature, superName, interfaces)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x626B;&amp;#x63CF;&amp;#x5F53;&amp;#x524D;&amp;#x7C7B;&amp;#x7684;&amp;#x4FE1;&amp;#x606F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun visitMethod(access: Int, name: String?, desc: String?, signature: String?, exceptions: Array&amp;lt;out String&amp;gt;?): MethodVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x4E2D;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun visitField(access: Int, name: String?, desc: String?, signature: String?, value: Any?): FieldVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x4E2D;&amp;#x7684;&amp;#x5B57;&amp;#x6BB5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x51E0;&amp;#x4E2A;&amp;#x4E3B;&amp;#x8981;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x91CD;&amp;#x70B9;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x660E;&amp;#x767D;&amp;#x4E86;&amp;#x5176;&amp;#x5B83;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun bindData(value: MainModel, position: Int) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    itemView.content.apply {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        text = value.content&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setOnClickListener {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x8FD9;&amp;#x884C;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LogUtils.d(&amp;quot;inject success.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (position == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                requestPermission(context, value)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                navigationPage(context, value)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5047;&amp;#x8BBE;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x5728;onClickListener&amp;#x4E2D;&amp;#x6CE8;&amp;#x5165;LogUtils.d&amp;#x8FD9;&amp;#x4E2A;&amp;#x884C;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x672C;&amp;#x8D28;&amp;#x5C31;&amp;#x662F;&amp;#x5728;&amp;#x70B9;&amp;#x51FB;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x8F93;&amp;#x51FA;&amp;#x4E00;&amp;#x884C;&amp;#x65E5;&amp;#x5FD7;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x660E;&amp;#x767D;&amp;#xFF0C;setOnClickListener&amp;#x672C;&amp;#x8D28;&amp;#x662F;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;OnClickListener&amp;#x63A5;&amp;#x53E3;&amp;#x7684;&amp;#x533F;&amp;#x540D;&amp;#x5185;&amp;#x90E8;&amp;#x7C7B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5224;&amp;#x65AD;&amp;#x662F;&amp;#x5426;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;OnClickListener&amp;#x8FD9;&amp;#x4E2A;&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x53BB;&amp;#x5339;&amp;#x914D;&amp;#x5B83;&amp;#x7684;onClick&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5728;&amp;#x5B83;&amp;#x7684;onClick&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x7C7B;&amp;#x7684;&amp;#x626B;&amp;#x63CF;&amp;#x4E0E;&amp;#x65B9;&amp;#x6CD5;&amp;#x626B;&amp;#x63CF;&amp;#x5206;&amp;#x522B;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;visit&amp;#x4E0E;visitMethod&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override fun visit(version: Int, access: Int, name: String?, signature: String?, superName: String?, interfaces: Array&amp;lt;out String&amp;gt;?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.visit(version, access, name, signature, superName, interfaces)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x63A5;&amp;#x53E3;&amp;#x540D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mInterface = interfaces&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;override fun visitMethod(access: Int, name: String?, desc: String?, signature: String?, exceptions: Array&amp;lt;out String&amp;gt;?): MethodVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5224;&amp;#x65AD;&amp;#x5F53;&amp;#x524D;&amp;#x7C7B;&amp;#x662F;&amp;#x5426;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;onClickListener&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mInterface != null &amp;amp;&amp;amp; mInterface?.size ?: 0 &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mInterface?.forEach {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x5224;&amp;#x65AD;&amp;#x5F53;&amp;#x524D;&amp;#x626B;&amp;#x63CF;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;&amp;#x5426;&amp;#x662F;onClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if ((name + desc) == &amp;quot;onClick(Landroid/view/View;)V&amp;quot; &amp;amp;&amp;amp; it == &amp;quot;android/view/View\$OnClickListener&amp;quot;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                val mv = cv.visitMethod(access, name, desc, signature, exceptions)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return object : AdviceAdapter(Opcodes.ASM5, mv, access, name, desc) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    override fun onMethodEnter() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        super.onMethodEnter()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        mv.visitFieldInsn(GETSTATIC, &amp;quot;com/idisfkj/androidapianalysis/utils/LogUtils&amp;quot;, &amp;quot;INSTANCE&amp;quot;, &amp;quot;Lcom/idisfkj/androidapianalysis/utils/LogUtils;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        mv.visitLdcInsn(&amp;quot;inject success.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        mv.visitMethodInsn(INVOKEVIRTUAL, &amp;quot;com/idisfkj/androidapianalysis/utils/LogUtils&amp;quot;, &amp;quot;d&amp;quot;, &amp;quot;(Ljava/lang/String;)V&amp;quot;, false)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return super.visitMethod(access, name, desc, signature, exceptions)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;visit&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4FDD;&amp;#x5B58;&amp;#x5F53;&amp;#x524D;&amp;#x7C7B;&amp;#x5B9E;&amp;#x73B0;&amp;#x7684;&amp;#x63A5;&amp;#x53E3;&amp;#xFF1B;&amp;#x5728;visitMethod&amp;#x4E2D;&amp;#x518D;&amp;#x5BF9;&amp;#x5F53;&amp;#x524D;&amp;#x63A5;&amp;#x53E3;&amp;#x8FDB;&amp;#x884C;&amp;#x5224;&amp;#x65AD;&amp;#xFF0C;&amp;#x770B;&amp;#x5B83;&amp;#x662F;&amp;#x5426;&amp;#x6709;onClick&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;name&amp;#x4E0E;desc&amp;#x5206;&amp;#x522B;&amp;#x4E3A;onClick&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x540D;&amp;#x79F0;&amp;#x4E0E;&amp;#x65B9;&amp;#x6CD5;&amp;#x53C2;&amp;#x6570;&amp;#x63CF;&amp;#x8FF0;&amp;#x3002;&amp;#x8FD9;&amp;#x662F;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5339;&amp;#x914D;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x89C4;&amp;#x8303;&amp;#x3002;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x63D2;&amp;#x5165;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x8FD4;&amp;#x56DE;AdviceAdapter&amp;#x3002;&amp;#x5B83;&amp;#x662F;ASM&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x4FBF;&amp;#x6377;&amp;#x9488;&amp;#x5BF9;&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x7C7B;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x91CD;&amp;#x5199;&amp;#x5B83;&amp;#x7684;onMethodEnter&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&amp;#x4EE3;&amp;#x8868;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x5728;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x5F00;&amp;#x5934;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;onMethodEnter&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5C31;&amp;#x662F;LogUtils.d&amp;#x7684;ASM&amp;#x6CE8;&amp;#x5165;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x8BF4;&amp;#x8FD9;&amp;#x4E2A;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF0C;&amp;#x5B8C;&amp;#x5168;&amp;#x770B;&amp;#x4E0D;&amp;#x61C2;&amp;#xFF0C;&amp;#x66F4;&amp;#x522B;&amp;#x8BF4;&amp;#x5199;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x6CE8;&amp;#x5165;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x522B;&amp;#x6025;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x5C31;&amp;#x662F;ASM&amp;#x7684;&amp;#x65B9;&amp;#x4FBF;&amp;#x4E4B;&amp;#x5904;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x5728;Android Studio&amp;#x4E2D;&amp;#x4E0B;&amp;#x8F7D;ASM Bytecode Viewer Support Kotlin&amp;#x63D2;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/5.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8BE5;&amp;#x63D2;&amp;#x4EF6;&amp;#x53EF;&amp;#x4EE5;&amp;#x5E2E;&amp;#x52A9;&amp;#x6211;&amp;#x4EEC;&amp;#x67E5;&amp;#x770B;kotlin&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x53F3;&amp;#x952E;&amp;#x5F39;&amp;#x7A97;&amp;#x4E2D;&amp;#x9009;&amp;#x62E9;ASM Bytecode Viewer&amp;#x3002;&amp;#x7A0D;&amp;#x540E;&amp;#x5C31;&amp;#x4F1A;&amp;#x5F39;&amp;#x51FA;&amp;#x8F6C;&amp;#x5316;&amp;#x540E;&amp;#x7684;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x5F39;&amp;#x7A97;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/05/28/&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x6478;&amp;#x9C7C;&amp;#xFF0C;&amp;#x6211;&amp;#x8D70;&amp;#x4E0A;&amp;#x4E86;&amp;#x6B67;&amp;#x8DEF;/6.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x5F39;&amp;#x7A97;&amp;#x4E2D;&amp;#x627E;&amp;#x5230;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5C31;&amp;#x662F;&amp;#x4E0B;&amp;#x9762;&amp;#x8FD9;&amp;#x51E0;&amp;#x884C;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;methodVisitor.visitFieldInsn(GETSTATIC, &amp;quot;com/idisfkj/androidapianalysis/utils/LogUtils&amp;quot;, &amp;quot;INSTANCE&amp;quot;, &amp;quot;Lcom/idisfkj/androidapianalysis/utils/LogUtils;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;methodVisitor.visitLdcInsn(&amp;quot;inject success.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;methodVisitor.visitMethodInsn(INVOKEVIRTUAL, &amp;quot;com/idisfkj/androidapianalysis/utils/LogUtils&amp;quot;, &amp;quot;d&amp;quot;, &amp;quot;(Ljava/lang/String;)V&amp;quot;, false);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;LogUtils.d&amp;#x7684;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;copy&amp;#x5230;&amp;#x4E0A;&amp;#x9762;&amp;#x63D0;&amp;#x5230;&amp;#x7684;onMethodEnter&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x3002;&amp;#x8FD9;&amp;#x6837;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5C31;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x60F3;&amp;#x67E5;&amp;#x770B;&amp;#x662F;&amp;#x5426;&amp;#x6CE8;&amp;#x5165;&amp;#x6210;&amp;#x529F;&amp;#xFF0C;&amp;#x9664;&amp;#x4E86;&amp;#x8FD0;&amp;#x884C;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x67E5;&amp;#x770B;&amp;#x6548;&amp;#x679C;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;&amp;#x8FD8;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x67E5;&amp;#x770B;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x9879;&amp;#x76EE;&amp;#x7684;build/intermediates/transforms&amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#xFF0C;&amp;#x627E;&amp;#x5230;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;TraceTransform&amp;#xFF0C;&amp;#x518D;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6CE8;&amp;#x5165;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x67E5;&amp;#x770B;&amp;#x6CE8;&amp;#x5165;&amp;#x6E90;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x5B9E;&amp;#x5230;&amp;#x8FD9;&amp;#x6765;&amp;#x6838;&amp;#x5FC3;&amp;#x5185;&amp;#x5BB9;&amp;#x57FA;&amp;#x672C;&amp;#x5DF2;&amp;#x7ECF;&amp;#x7ED3;&amp;#x675F;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0D;&amp;#x7BA1;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x4EC0;&amp;#x4E48;&amp;#x4EE3;&amp;#x7801;&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;ASM&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x53EA;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x65F6;&amp;#x673A;&amp;#x5224;&amp;#x65AD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x57FA;&amp;#x7840;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x5F00;&amp;#x5934;&amp;#x7684;&amp;#x81EA;&amp;#x52A8;&amp;#x57CB;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5B9E;&amp;#x73B0;&quot;&gt;&lt;a href=&quot;#&amp;#x5B9E;&amp;#x73B0;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5B9E;&amp;#x73B0;&quot;&gt;&lt;/a&gt;&amp;#x5B9E;&amp;#x73B0;&lt;/h2&gt;&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x8BA9;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x57CB;&amp;#x70B9;&amp;#x80FD;&amp;#x591F;&amp;#x7075;&amp;#x6D3B;&amp;#x7684;&amp;#x4F20;&amp;#x9012;&amp;#x6253;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;&amp;#x6CE8;&amp;#x89E3;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x4F20;&amp;#x9012;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x57CB;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x4E0E;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;TrackClickData: &amp;#x70B9;&amp;#x51FB;&amp;#x7684;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;TrackScanData: &amp;#x66DD;&amp;#x5149;&amp;#x7684;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;TrackScan: &amp;#x66DD;&amp;#x5149;&amp;#x70B9;&lt;/li&gt;
&lt;li&gt;TrackClick: &amp;#x70B9;&amp;#x51FB;&amp;#x70B9;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E9B;&amp;#x6CE8;&amp;#x89E3;&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#x4E86;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class ProxyActivity : AppCompatActivity() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @TrackClickData&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private var mTrackModel = TrackModel()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @TrackScanData&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private var mTrackScanData = mutableListOf&amp;lt;TrackModel&amp;gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    companion object {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private const val BUTTON = &amp;quot;statistic_button&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private const val TEXT = &amp;quot;statistic_text&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        const val PAGE_NAME = &amp;quot;ProxyActivity&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun onCreate(savedInstanceState: Bundle?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super.onCreate(savedInstanceState)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        onScan()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @TrackScan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun onScan() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mTrackScanData.add(TrackModel(name = BUTTON))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mTrackScanData.add(TrackModel(name = TEXT))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @TrackClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun onClick(view: View) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mTrackModel.time = System.currentTimeMillis() / 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mTrackModel.name = if (view.id == R.id.button) BUTTON else TEXT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;TrackClickData&amp;#x4E0E;TrackScanData&amp;#x58F0;&amp;#x660E;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF1B;&amp;#x4F7F;&amp;#x7528;TrackScan&amp;#x4E0E;TrackClick&amp;#x58F0;&amp;#x660E;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0E;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x63D2;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x56DE;&amp;#x5230;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x7C7B;ClassFilterVisitor&amp;#xFF0C;&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x57CB;&amp;#x70B9;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6CE8;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x662F;&amp;#x89E3;&amp;#x6790;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#xFF0C;&amp;#x62FF;&amp;#x5230;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x58F0;&amp;#x660E;&amp;#x7684;TrackScan&amp;#x4E0E;TrackClick&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x63D2;&amp;#x5165;&amp;#x57CB;&amp;#x70B9;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override fun visit(version: Int, access: Int, name: String?, signature: String?, superName: String?, interfaces: Array&amp;lt;out String&amp;gt;?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.visit(version, access, name, signature, superName, interfaces)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mInterface = interfaces&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mClassName = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;visit&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x626B;&amp;#x63CF;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x7C7B;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4FDD;&amp;#x5B58;&amp;#x5F53;&amp;#x524D;&amp;#x626B;&amp;#x63CF;&amp;#x7684;&amp;#x7C7B;&amp;#x7684;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E4B;&amp;#x540E;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x505A;&amp;#x51C6;&amp;#x5907;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override fun visitField(access: Int, name: String?, desc: String?, signature: String?, value: Any?): FieldVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val filterVisitor = super.visitField(access, name, desc, signature, value)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return object : FieldVisitor(Opcodes.ASM5, filterVisitor) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        override fun visitAnnotation(annotationDesc: String?, visible: Boolean): AnnotationVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (annotationDesc == TRACK_CLICK_DATA_DESC) {  // TrackClickData &amp;#x6CE8;&amp;#x89E3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mTrackDataName = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mTrackDataValue = value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mTrackDataDesc = desc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                createFiled()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (annotationDesc == TRACK_SCAN_DATA_DESC) { // TrackScanData&amp;#x6CE8;&amp;#x89E3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mTrackScanDataName = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mTrackScanDataDesc = desc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                createFiled()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return super.visitAnnotation(annotationDesc, visible)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;visitFiled&amp;#x65B9;&amp;#x6CD5;&amp;#x7528;&amp;#x6765;&amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x5B57;&amp;#x6BB5;&amp;#x3002;&amp;#x5728;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x8FD4;&amp;#x56DE;&amp;#x5E76;&amp;#x5B9E;&amp;#x73B0;FieldVisitor&amp;#xFF0C;&amp;#x5E76;&amp;#x91CD;&amp;#x65B0;&amp;#x5B83;&amp;#x7684;visitAnnotation&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x627E;&amp;#x5230;&amp;#x4E4B;&amp;#x524D;TrackClickData&amp;#x4E0E;TrackScanData&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x57CB;&amp;#x70B9;&amp;#x5B57;&amp;#x6BB5;&amp;#x3002;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;mTrackModel&amp;#x4E0E;mTrackScanData&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x5305;&amp;#x62EC;&amp;#x5B57;&amp;#x6BB5;&amp;#x540D;&amp;#x79F0;name&amp;#x4E0E;&amp;#x5B57;&amp;#x6BB5;&amp;#x7684;&amp;#x63CF;&amp;#x8FF0;desc&amp;#xFF0C;&amp;#x4E3A;&amp;#x6211;&amp;#x4EEC;&amp;#x4E4B;&amp;#x540E;&amp;#x6CE8;&amp;#x5165;&amp;#x57CB;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x505A;&amp;#x51C6;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x65E6;&amp;#x5339;&amp;#x914D;&amp;#x5230;&amp;#x57CB;&amp;#x70B9;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x8BE5;&amp;#x7C7B;&amp;#x4E2D;&amp;#x9700;&amp;#x8981;&amp;#x8FDB;&amp;#x884C;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x57CB;&amp;#x70B9;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD8;&amp;#x9700;&amp;#x8981;&amp;#x81EA;&amp;#x52A8;&amp;#x521B;&amp;#x5EFA;StatisticService&amp;#x3002;&amp;#x8FD9;&amp;#x662F;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x63A5;&amp;#x53E3;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x6253;&amp;#x70B9;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;StatisticService&amp;#x6765;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;visitField&amp;#x4E2D;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;createFiled&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;StatisticService&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x5B57;&amp;#x6BB5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private fun createFiled() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!mFieldPresent) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mFieldPresent = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;statisticService &amp;#x5B57;&amp;#x6BB5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        val fieldVisitor = cv.visitField(ACC_PRIVATE or ACC_FINAL, statisticServiceField.name, statisticServiceField.desc, null, null)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fieldVisitor.visitEnd()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;statisticServiceField&amp;#x662F;&amp;#x5C01;&amp;#x88C5;&amp;#x597D;&amp;#x7684;StatisticService&amp;#x5B57;&amp;#x6BB5;&amp;#x4FE1;&amp;#x606F;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;companion object {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const val OWNER = &amp;quot;com/idisfkj/androidapianalysis/proxy/StatisticService&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const val DESC = &amp;quot;Lcom/idisfkj/androidapianalysis/proxy/StatisticService;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val INSTANCE = StatisticService()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val statisticService = FieldConfig(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Opcodes.PUTFIELD,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;mStatisticService&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        DESC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x5B57;&amp;#x6BB5;&amp;#x540D;&amp;#x4E3A;mStatisticService&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x662F;StatisticService&lt;/p&gt;
&lt;p&gt;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x62FF;&amp;#x5230;&amp;#x4E86;&amp;#x57CB;&amp;#x70B9;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5B57;&amp;#x6BB5;&amp;#xFF0C;&amp;#x5E76;&amp;#x521B;&amp;#x5EFA;&amp;#x4E86;&amp;#x57CB;&amp;#x70B9;&amp;#x7684;&amp;#x8C03;&amp;#x7528;&amp;#x5B57;&amp;#x6BB5;mStatisticService&amp;#xFF1B;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x57CB;&amp;#x70B9;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6838;&amp;#x5FC3;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x5728;visitMethod&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x7528;&amp;#x6765;&amp;#x626B;&amp;#x63CF;&amp;#x7C7B;&amp;#x4E2D;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x7C7B;&amp;#x4E2D;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x90FD;&amp;#x4F1A;&amp;#x5728;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x626B;&amp;#x63CF;&amp;#x56DE;&amp;#x8C03;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;visitMethod&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x627E;&amp;#x5230;&amp;#x76EE;&amp;#x6807;&amp;#x7684;&amp;#x57CB;&amp;#x70B9;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5373;&amp;#x4E4B;&amp;#x524D;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x89E3;TrackScan&amp;#x4E0E;TrackClick&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override fun visitMethod(access: Int, name: String?, desc: String?, signature: String?, exceptions: Array&amp;lt;out String&amp;gt;?): MethodVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val mv = cv.visitMethod(access, name, desc, signature, exceptions)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return object : AdviceAdapter(Opcodes.ASM5, mv, access, name, desc) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private var mMethodAnnotationDesc: String? = null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        override fun visitAnnotation(desc: String?, visible: Boolean): AnnotationVisitor {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LocalConfig.methodVisitorConfig?.visitAnnotation?.invoke(desc, visible)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mMethodAnnotationDesc = desc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return super.visitAnnotation(desc, visible)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        override fun onMethodExit(opcode: Int) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            super.onMethodExit(opcode)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LocalConfig.methodVisitorConfig?.onMethodExit?.invoke(opcode)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x9ED8;&amp;#x8BA4;&amp;#x6784;&amp;#x9020;&amp;#x65B9;&amp;#x6CD5;init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (name == INIT_METHOD_NAME /** &amp;amp;&amp;amp; desc == INIT_METHOD_DESC **/ &amp;amp;&amp;amp; mFieldPresent) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;&amp;#x5411;&amp;#x9ED8;&amp;#x8BA4;&amp;#x6784;&amp;#x9020;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5B9E;&amp;#x4F8B;&amp;#x5316;statisticService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                injectStatisticService(mv, Statistic.INSTANCE, statisticServiceField.copy(owner = mClassName ?: &amp;quot;&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (mMethodAnnotationDesc == TRACK_CLICK_DESC &amp;amp;&amp;amp; !mTrackDataName.isNullOrEmpty()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;&amp;#x65E5;&amp;#x5FD7;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                injectLogUtils(mv, defaultLogUtilsConfig.copy(ldc = &amp;quot;inject track click success.&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;trackClick &amp;#x70B9;&amp;#x51FB;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                injectTrackClick(mv, TrackModel.INSTANCE, StatisticService.INSTANCE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (mMethodAnnotationDesc == TRACK_SCAN_DESC &amp;amp;&amp;amp; !mTrackScanDataName.isNullOrEmpty()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                when (mTrackScanDataDesc) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x6570;&amp;#x636E;&amp;#x7C7B;&amp;#x578B;&amp;#x4E3A;List&amp;lt;*&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    LIST_DESC -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;&amp;#x65E5;&amp;#x5FD7;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        injectLogUtils(mv, defaultLogUtilsConfig.copy(ldc = &amp;quot;inject track scan success.&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;List &amp;#x7C7B;&amp;#x578B;&amp;#x7684;TrackScan &amp;#x66DD;&amp;#x5149;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        injectListTrackScan(mv, TrackModel.INSTANCE, StatisticService.INSTANCE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x6570;&amp;#x636E;&amp;#x7C7B;&amp;#x578B;&amp;#x4E3A;TrackModel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    TrackModel.DESC -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        // &amp;#x6CE8;&amp;#x5165;&amp;#xFF1A;&amp;#x65E5;&amp;#x5FD7;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        injectLogUtils(mv, defaultLogUtilsConfig.copy(ldc = &amp;quot;inject track scan success.&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        // &amp;#x6CE8;&amp;#x5165;: TrackScan &amp;#x66DD;&amp;#x5149;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        injectTrackScan(mv, TrackModel.INSTANCE, StatisticService.INSTANCE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    else -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD4;&amp;#x56DE;&amp;#x5E76;&amp;#x5B9E;&amp;#x73B0;AdviceAdapter&amp;#xFF0C;&amp;#x91CD;&amp;#x5199;&amp;#x5B83;&amp;#x7684;visitAnnotation&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F1A;&amp;#x81EA;&amp;#x52A8;&amp;#x626B;&amp;#x63CF;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x4FDD;&amp;#x5B58;&amp;#x5F53;&amp;#x524D;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x6CE8;&amp;#x89E3;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;onMethodExit&amp;#x4E2D;&amp;#xFF0C;&amp;#x5373;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x5F00;&amp;#x5934;&amp;#x5904;&amp;#x8FDB;&amp;#x884C;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x4E09;&amp;#x4EF6;&amp;#x4E8B;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x5411;&amp;#x9ED8;&amp;#x8BA4;&amp;#x6784;&amp;#x9020;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5B9E;&amp;#x4F8B;&amp;#x5316;statisticService&lt;/li&gt;
&lt;li&gt;&amp;#x6CE8;&amp;#x5165;TrackClick &amp;#x70B9;&amp;#x51FB;&lt;/li&gt;
&lt;li&gt;&amp;#x6CE8;&amp;#x5165;TrackScan &amp;#x66DD;&amp;#x5149;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x7684;ASM&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x4E4B;&amp;#x524D;&amp;#x8BF4;&amp;#x7684;SM Bytecode Viewer Support Kotlin&amp;#x63D2;&amp;#x4EF6;&amp;#x83B7;&amp;#x53D6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x518D;&amp;#x6765;&amp;#x8FD0;&amp;#x884C;&amp;#x8FD0;&amp;#x884C;&amp;#x4E3B;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x4F60;&amp;#x5C31;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x57CB;&amp;#x70B9;&amp;#x4EE3;&amp;#x7801;&amp;#x5DF2;&amp;#x7ECF;&amp;#x81EA;&amp;#x52A8;&amp;#x6CE8;&amp;#x5165;&amp;#x6210;&amp;#x529F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x53CD;&amp;#x7F16;&amp;#x8BD1;&amp;#x4E00;&amp;#x4E0B;.class&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x6CE8;&amp;#x5165;&amp;#x540E;&amp;#x7684;java&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
&lt;h3 id=&quot;StatisticService&amp;#x521D;&amp;#x59CB;&amp;#x5316;&quot;&gt;&lt;a href=&quot;#StatisticService&amp;#x521D;&amp;#x59CB;&amp;#x5316;&quot; class=&quot;headerlink&quot; title=&quot;StatisticService&amp;#x521D;&amp;#x59CB;&amp;#x5316;&quot;&gt;&lt;/a&gt;StatisticService&amp;#x521D;&amp;#x59CB;&amp;#x5316;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public ProxyActivity() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   boolean var2 = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   List var3 = (List)(new ArrayList());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mTrackScanData = var3;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   // &amp;#x4EE5;&amp;#x4E0B;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mStatisticService = (StatisticService)Statistic.Companion.getInstance().create(StatisticService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x66DD;&amp;#x5149;&amp;#x57CB;&amp;#x70B9;&quot;&gt;&lt;a href=&quot;#&amp;#x66DD;&amp;#x5149;&amp;#x57CB;&amp;#x70B9;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x66DD;&amp;#x5149;&amp;#x57CB;&amp;#x70B9;&quot;&gt;&lt;/a&gt;&amp;#x66DD;&amp;#x5149;&amp;#x57CB;&amp;#x70B9;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@TrackScan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public final void onScan() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mTrackScanData.add(new TrackModel(&amp;quot;statistic_button&amp;quot;, 0L, 2, (DefaultConstructorMarker)null));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mTrackScanData.add(new TrackModel(&amp;quot;statistic_text&amp;quot;, 0L, 2, (DefaultConstructorMarker)null));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   // &amp;#x4EE5;&amp;#x4E0B;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   LogUtils.INSTANCE.d(&amp;quot;inject track scan success.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Iterator var2 = this.mTrackScanData.iterator();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   while(var2.hasNext()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      TrackModel var1 = (TrackModel)var2.next();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      this.mStatisticService.trackScan(var1.getName());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x70B9;&amp;#x51FB;&amp;#x57CB;&amp;#x70B9;&quot;&gt;&lt;a href=&quot;#&amp;#x70B9;&amp;#x51FB;&amp;#x57CB;&amp;#x70B9;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x70B9;&amp;#x51FB;&amp;#x57CB;&amp;#x70B9;&quot;&gt;&lt;/a&gt;&amp;#x70B9;&amp;#x51FB;&amp;#x57CB;&amp;#x70B9;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@TrackClick&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public final void onClick(@NotNull View view) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Intrinsics.checkParameterIsNotNull(view, &amp;quot;view&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mTrackModel.setTime(System.currentTimeMillis() / (long)1000);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mTrackModel.setName(view.getId() == 2131230792 ? &amp;quot;statistic_button&amp;quot; : &amp;quot;statistic_text&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   // &amp;#x4EE5;&amp;#x4E0B;&amp;#x662F;&amp;#x6CE8;&amp;#x5165;&amp;#x4EE3;&amp;#x7801;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   LogUtils.INSTANCE.d(&amp;quot;inject track click success.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.mStatisticService.trackClick(this.mTrackModel.getName(), this.mTrackModel.getTime());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x57CB;&amp;#x70B9;&amp;#x4EE3;&amp;#x7801;&amp;#x5C31;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5B8C;&amp;#x6210;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x603B;&amp;#x7ED3;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x6240;&amp;#x7528;&amp;#x5230;&amp;#x7684;&amp;#x6280;&amp;#x672F;&amp;#x6709;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;gradle plugin&amp;#x63D2;&amp;#x4EF6;&amp;#x7684;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;&lt;/li&gt;
&lt;li&gt;gradle transform&amp;#x63D0;&amp;#x4F9B;&amp;#x7F16;&amp;#x8BD1;&amp;#x4E2D;&amp;#x5B57;&amp;#x8282;&amp;#x7801;&amp;#x7684;&amp;#x4FEE;&amp;#x6539;&amp;#x5165;&amp;#x53E3;&lt;/li&gt;
&lt;li&gt;asm&amp;#x63D0;&amp;#x4F9B;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6CE8;&amp;#x5165;&amp;#x5B9E;&amp;#x73B0;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;1&amp;#x3001;2&amp;#x90FD;&amp;#x6709;&amp;#x73B0;&amp;#x6210;&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x5957;&amp;#x8DEF;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x771F;&amp;#x6B63;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5F88;&amp;#x5C11;&amp;#xFF0C;&amp;#x6838;&amp;#x5FC3;&amp;#x90E8;&amp;#x5206;&amp;#x8FD8;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;asm&amp;#x6765;&amp;#x7F16;&amp;#x5199;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x5165;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&amp;#x4E0D;&amp;#x7BA1;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x6CE8;&amp;#x5165;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x501F;&amp;#x52A9;&amp;#x6CE8;&amp;#x89E3;&amp;#x6765;&amp;#x6CE8;&amp;#x5165;&amp;#xFF0C;&amp;#x672C;&amp;#x8D28;&amp;#x90FD;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EA;&amp;#x8981;&amp;#x638C;&amp;#x63E1;&amp;#x4EE5;&amp;#x4E0A;&amp;#x51E0;&amp;#x70B9;&amp;#xFF0C;&amp;#x4F60;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5B9E;&amp;#x73B0;&amp;#x4EFB;&amp;#x610F;&amp;#x7684;&amp;#x81EA;&amp;#x52A8;&amp;#x5316;&amp;#x4EE3;&amp;#x7801;&amp;#x6CE8;&amp;#x5165;&amp;#x3002;&amp;#x4ECE;&amp;#x6B64;&amp;#x4EE5;&amp;#x540E;&amp;#x200B;&amp;#x8BA9;&amp;#x6211;&amp;#x4EEC;&amp;#x8FDB;&amp;#x5165;&amp;#x6478;&amp;#x9C7C;&amp;#x65F6;&amp;#x4EE3;&amp;#xFF0C;&amp;#x4EE5;&amp;#x540E;&amp;#x518D;&amp;#x4E5F;&amp;#x4E0D;&amp;#x7528;&amp;#x52A0;&amp;#x73ED;&amp;#x5566;~&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x5230;Github&amp;#x7684;android-api-analysis&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x67E5;&amp;#x770B;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/idisfkj/android-api-analysis&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x67E5;&amp;#x770B;&amp;#x65F6;&amp;#x8BF7;&amp;#x5C06;&amp;#x5206;&amp;#x652F;&amp;#x5207;&amp;#x6362;&amp;#x5230;feat_transform_dev&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;a href=&quot;#&amp;#x524D;&amp;#x8A00;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x524D;&amp;#x8A00;&quot;&gt;&lt;/a&gt;&amp;#x524D;&amp;#x8A00;&lt;/h2&gt;&lt;p&gt;&amp;#x6BCF;&amp;#x592
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="android" scheme="https://www.rousetime.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>Binder: ServiceManager的创建</title>
    <link href="https://www.rousetime.com/2021/02/01/Binder-ServiceManager%E7%9A%84%E5%88%9B%E5%BB%BA/"/>
    <id>https://www.rousetime.com/2021/02/01/Binder-ServiceManager的创建/</id>
    <published>2021-02-01T14:10:28.000Z</published>
    <updated>2022-12-01T14:19:08.589Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x627F;&amp;#x63A5;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485610&amp;amp;idx=1&amp;amp;sn=2ef38084699d2fcc5241a6cc57772751&amp;amp;chksm=e8e0f13adf97782c65cb0b8204ad75d11e53b05ea361f66c01a5b352869aa7cf09fcd3168193&amp;amp;token=963105090&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Binder: addService&amp;#x521D;&amp;#x63A2;&lt;/a&gt;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x77E5;&amp;#x9053;Client&amp;#x7AEF;&amp;#x901A;&amp;#x8FC7;BpBinder&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x4E0E;service&amp;#x7AEF;&amp;#x8FDB;&amp;#x884C;&amp;#x901A;&amp;#x4FE1;&amp;#xFF0C;&amp;#x5728;BpBinder&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x53C8;&amp;#x901A;&amp;#x8FC7;IPCThreadState&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9012;&amp;#x5230;service&amp;#x7AEF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x7EC8;&amp;#x6765;&amp;#x5230;IPCThreadState&amp;#x7684;writeTransactionData&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;frameworks/native/libs/binder/IPCThreadState.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;status_t IPCThreadState::writeTransactionData(int32_t cmd, uint32_t binderFlags,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int32_t handle, uint32_t code, const Parcel&amp;amp; data, status_t* statusBuffer)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    binder_transaction_data tr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x5C01;&amp;#x88C5;&amp;#x5230;tr&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.target.ptr = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.target.handle = handle; // handle = 0, &amp;#x5B9A;&amp;#x4F4D;&amp;#x5230;ServiceManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.code = code; // &amp;#x64CD;&amp;#x4F5C;&amp;#x7801; ADD_SERVICE_TRANSACTION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.flags = binderFlags;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.cookie = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.sender_pid = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tr.sender_euid = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const status_t err = data.errorCheck();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (err == NO_ERROR) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data_size = data.ipcDataSize();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data.ptr.buffer = data.ipcData();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.offsets_size = data.ipcObjectsCount()*sizeof(binder_size_t);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data.ptr.offsets = data.ipcObjects();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else if (statusBuffer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.flags |= TF_STATUS_CODE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        *statusBuffer = err;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data_size = sizeof(status_t);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data.ptr.buffer = reinterpret_cast&amp;lt;uintptr_t&amp;gt;(statusBuffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.offsets_size = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.data.ptr.offsets = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return (mLastError = err);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOut.writeInt32(cmd); // &amp;#x6307;&amp;#x4EE4;&amp;#x7801; BC_TRANSACTION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5199;&amp;#x5165;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9012;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOut.write(&amp;amp;tr, sizeof(tr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return NO_ERROR;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4F20;&amp;#x9012;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;handle = 0&amp;#x6765;&amp;#x5B9A;&amp;#x4F4D;&amp;#x5230;service&amp;#x7684;service_manager&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x5206;&amp;#x6790;&amp;#x4E00;&amp;#x4E0B;ServiceManager&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;ServiceManager&quot;&gt;&lt;a href=&quot;#ServiceManager&quot; class=&quot;headerlink&quot; title=&quot;ServiceManager&quot;&gt;&lt;/a&gt;ServiceManager&lt;/h2&gt;&lt;p&gt;ServiceManager&amp;#x662F;&amp;#x4F34;&amp;#x968F;&amp;#x7740;Android init &amp;#x542F;&amp;#x52A8;&amp;#x4E00;&amp;#x8D77;&amp;#x88AB;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#xFF0C;&amp;#x5728;init.rc&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x58F0;&amp;#x660E;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x6240;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x7A0B;&amp;#x5E8F;&amp;#x662F;/system/bin/servicemanager&amp;#xFF0C;&amp;#x6240;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6E90;&amp;#x6587;&amp;#x4EF6;&amp;#x662F;service_manager.c&amp;#xFF0C;&amp;#x8FDB;&amp;#x7A0B;&amp;#x540D;&amp;#x4E3A;/system/bin/servicemanager&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service servicemanager /system/bin/servicemanager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    user system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    group system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    critical&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart healthd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart zygote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart media&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart surfaceflinger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart drm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x542F;&amp;#x52A8;ServiceManager&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#x5728;service_manager.c&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&lt;/p&gt;
&lt;h3 id=&quot;main&quot;&gt;&lt;a href=&quot;#main&quot; class=&quot;headerlink&quot; title=&quot;main&quot;&gt;&lt;/a&gt;main&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/service_manager.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc, char** argv)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct binder_state *bs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    union selinux_callback cb;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char *driver;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (argc &amp;gt; 1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        driver = argv[1];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        driver = &amp;quot;/dev/binder&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bs = binder_open(driver, 128*1024);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5C06;ServiceManager&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;binder&amp;#x7684;&amp;#x5B88;&amp;#x62A4;&amp;#x8005;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (binder_become_context_manager(bs)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;cannot become context manager (%s)\n&amp;quot;, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5F00;&amp;#x542F;binder&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x76D1;&amp;#x542C;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x5230;&amp;#x6765;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    binder_loop(bs, svcmgr_handler);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;main&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x4E86;&amp;#x4E09;&amp;#x4EF6;&amp;#x4E8B;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_open&amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x7533;&amp;#x8BF7;128kb&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5927;&amp;#x5C0F;&amp;#x7A7A;&amp;#x95F4;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_become_context_manager&amp;#x5C06;ServiceManager&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;binder&amp;#x7684;&amp;#x5B88;&amp;#x62A4;&amp;#x8005;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_loop&amp;#x5F00;&amp;#x542F;binder&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x76D1;&amp;#x542C;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;binder-open&quot;&gt;&lt;a href=&quot;#binder-open&quot; class=&quot;headerlink&quot; title=&quot;binder_open&quot;&gt;&lt;/a&gt;binder_open&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/binder.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct binder_state *binder_open(const char* driver, size_t mapsize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct binder_state *bs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct binder_version vers;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bs = malloc(sizeof(*bs));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!bs) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        errno = ENOMEM;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return NULL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5F00;&amp;#x542F;binder&amp;#x9A71;&amp;#x52A8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bs-&amp;gt;fd = open(driver, O_RDWR | O_CLOEXEC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (bs-&amp;gt;fd &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fprintf(stderr,&amp;quot;binder: cannot open %s (%s)\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                driver, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        goto fail_open;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6;binder&amp;#x7248;&amp;#x672C;&amp;#x4FE1;&amp;#x606F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if ((ioctl(bs-&amp;gt;fd, BINDER_VERSION, &amp;amp;vers) == -1) ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (vers.protocol_version != BINDER_CURRENT_PROTOCOL_VERSION)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fprintf(stderr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;binder: kernel driver version (%d) differs from user space version (%d)\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                vers.protocol_version, BINDER_CURRENT_PROTOCOL_VERSION);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        goto fail_open;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;mmap&amp;#x6620;&amp;#x5C04;&amp;#x5927;&amp;#x5C0F;128kb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bs-&amp;gt;mapsize = mapsize;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x5730;&amp;#x5740;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bs-&amp;gt;mapped = mmap(NULL, mapsize, PROT_READ, MAP_PRIVATE, bs-&amp;gt;fd, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (bs-&amp;gt;mapped == MAP_FAILED) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fprintf(stderr,&amp;quot;binder: cannot map device (%s)\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        goto fail_map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return bs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fail_map:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    close(bs-&amp;gt;fd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fail_open:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    free(bs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return NULL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x5BF9;bs&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x7684;&amp;#x4E09;&amp;#x4E2A;&amp;#x53D8;&amp;#x91CF;&amp;#x8FDB;&amp;#x884C;&amp;#x8D4B;&amp;#x503C;&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;binder_state&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct binder_state&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int fd; // dev/binder &amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    void *mapped; // &amp;#x6620;&amp;#x5C04;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size_t mapsize; // &amp;#x6620;&amp;#x5C04;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;binder_open&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x662F;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&lt;/li&gt;
&lt;li&gt;&amp;#x9A8C;&amp;#x8BC1;binder&amp;#x7248;&amp;#x672C;&amp;#x4FE1;&amp;#x606F;&lt;/li&gt;
&lt;li&gt;&amp;#x8BBE;&amp;#x7F6E;mmap&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x4E3A;128kb&lt;/li&gt;
&lt;li&gt;&amp;#x8BBE;&amp;#x7F6E;mmap&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x7684;&amp;#x5730;&amp;#x5740;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;binder-become-context-manager&quot;&gt;&lt;a href=&quot;#binder-become-context-manager&quot; class=&quot;headerlink&quot; title=&quot;binder_become_context_manager&quot;&gt;&lt;/a&gt;binder_become_context_manager&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/binder.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int binder_become_context_manager(struct binder_state *bs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct flat_binder_object obj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521D;&amp;#x59CB;&amp;#x5316;obj&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    memset(&amp;amp;obj, 0, sizeof(obj));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    obj.flags = FLAT_BINDER_FLAG_TXN_SECURITY_CTX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x901A;&amp;#x4FE1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int result = ioctl(bs-&amp;gt;fd, BINDER_SET_CONTEXT_MGR_EXT, &amp;amp;obj);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (result != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        android_errorWriteLog(0x534e4554, &amp;quot;121035042&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x901A;&amp;#x4FE1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result = ioctl(bs-&amp;gt;fd, BINDER_SET_CONTEXT_MGR, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;binder_become_context_manager&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x8FDB;&amp;#x884C;&amp;#x901A;&amp;#x4FE1;&amp;#xFF0C;&amp;#x5E76;&amp;#x4F20;&amp;#x5165;&amp;#x6570;&amp;#x636E;0&amp;#x4F5C;&amp;#x4E3A;&amp;#x6807;&amp;#x8BC6;&amp;#xFF0C;&amp;#x5C06;ServiceManager&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;binder&amp;#x7684;&amp;#x5B88;&amp;#x62A4;&amp;#x8005;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x7EDF;&amp;#x4E00;&amp;#x5904;&amp;#x7406;binder&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;binder-loop&quot;&gt;&lt;a href=&quot;#binder-loop&quot; class=&quot;headerlink&quot; title=&quot;binder_loop&quot;&gt;&lt;/a&gt;binder_loop&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/binder.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void binder_loop(struct binder_state *bs, binder_handler func)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  int res;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  struct binder_write_read bwr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  uint32_t readbuf[32];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_size = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_consumed = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_buffer = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  readbuf[0] = BC_ENTER_LOOPER;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x5199;&amp;#x5165;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  binder_write(bs, readbuf, sizeof(uint32_t));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x5F00;&amp;#x542F;&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x76D1;&amp;#x542C;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x5230;&amp;#x6765;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  for (;;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      bwr.read_size = sizeof(readbuf);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      bwr.read_consumed = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      bwr.read_buffer = (uintptr_t) readbuf;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x83B7;&amp;#x53D6;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      res = ioctl(bs-&amp;gt;fd, BINDER_WRITE_READ, &amp;amp;bwr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (res &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;binder_loop: ioctl failed (%s)\n&amp;quot;, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x89E3;&amp;#x6790;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      res = binder_parse(bs, 0, (uintptr_t) readbuf, bwr.read_consumed, func);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (res == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;binder_loop: unexpected reply?!\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (res &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;binder_loop: io error %d %s\n&amp;quot;, res, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;binder_loop&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x4E86;&amp;#x4E09;&amp;#x4EF6;&amp;#x4E8B;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x9996;&amp;#x5148;&amp;#x901A;&amp;#x8FC7;binder_write&amp;#x4F20;&amp;#x9012;BC_ENTER_LOOPER&amp;#x6307;&amp;#x4EE4;&amp;#x7801;&amp;#xFF0C;&amp;#x544A;&amp;#x8BC9;binder&amp;#x8FDB;&amp;#x5165;&amp;#x5FAA;&amp;#x73AF;&lt;/li&gt;
&lt;li&gt;&amp;#x5F00;&amp;#x542F;&amp;#x5FAA;&amp;#x5E8F;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x76D1;&amp;#x542C;&amp;#x5E76;&amp;#x8BFB;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;&amp;#x4E00;&amp;#x65E6;&amp;#x8BFB;&amp;#x53D6;&amp;#x5230;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5C06;&amp;#x901A;&amp;#x8FC7;binder_parse&amp;#x6765;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#x89E3;&amp;#x6790;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;binder-write&quot;&gt;&lt;a href=&quot;#binder-write&quot; class=&quot;headerlink&quot; title=&quot;binder_write&quot;&gt;&lt;/a&gt;binder_write&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/binder.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int binder_write(struct binder_state *bs, void *data, size_t len)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  struct binder_write_read bwr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  int res;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x586B;&amp;#x5145;&amp;#x5230;bwr&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_size = len;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_consumed = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.write_buffer = (uintptr_t) data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.read_size = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.read_consumed = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bwr.read_buffer = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  res = ioctl(bs-&amp;gt;fd, BINDER_WRITE_READ, &amp;amp;bwr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (res &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      fprintf(stderr,&amp;quot;binder_write: ioctl failed (%s)\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return res;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x7EDF;&amp;#x4E00;&amp;#x5C01;&amp;#x88C5;&amp;#x5230;bwr&amp;#x4E2D;&amp;#xFF0C;bwr&amp;#x662F;binder_write_read&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#xFF0C;&amp;#x5F53;&amp;#x5199;&amp;#x6570;&amp;#x636E;&amp;#x65F6;&amp;#x4F1A;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x5199;&amp;#x5165;&amp;#x5230;write_buffer&amp;#x4E2D;&amp;#xFF0C;&amp;#x800C;&amp;#x5F53;&amp;#x8BFB;&amp;#x6570;&amp;#x636E;&amp;#x65F6;&amp;#x4F1A;&amp;#x4ECE;read_buffer&amp;#x4E2D;&amp;#x8BFB;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x652F;&amp;#x6301;&amp;#x53CC;&amp;#x5411;&amp;#x8BFB;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x6E90;&amp;#x3002;&amp;#x4EE5;&amp;#x4FBF;&amp;#x53EF;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x8FDB;&amp;#x884C;&amp;#x8BFB;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;&amp;#x662F;&amp;#x9996;&amp;#x6B21;&amp;#x8FDB;&amp;#x5165;&amp;#x4E14;&amp;#x5373;&amp;#x5C06;&amp;#x8FDB;&amp;#x5165;&amp;#x5FAA;&amp;#x5E8F;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B21;&amp;#x4F1A;&amp;#x4F20;&amp;#x9012;BC_ENTER_LOOPER&amp;#x6307;&amp;#x4EE4;&amp;#x7801;&amp;#xFF0C;&amp;#x901A;&amp;#x77E5;binder&amp;#x8FDB;&amp;#x884C;&amp;#x5FAA;&amp;#x73AF;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x53D1;&amp;#x9001;BINDER_WRITE_READ&amp;#x7684;&amp;#x901A;&amp;#x4FE1;code&amp;#xFF0C;&amp;#x5C06;bwr&amp;#x4F20;&amp;#x9012;&amp;#x7ED9;binder&amp;#x9A71;&amp;#x52A8;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;binder-parse&quot;&gt;&lt;a href=&quot;#binder-parse&quot; class=&quot;headerlink&quot; title=&quot;binder_parse&quot;&gt;&lt;/a&gt;binder_parse&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/binder.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int binder_parse(struct binder_state *bs, struct binder_io *bio,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               uintptr_t ptr, size_t size, binder_handler func)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  int r = 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x622A;&amp;#x6B62;&amp;#x4F4D;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  uintptr_t end = ptr + (uintptr_t) size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  while (ptr &amp;lt; end) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      uint32_t cmd = *(uint32_t *) ptr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ptr += sizeof(uint32_t);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      switch(cmd) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      case BR_TRANSACTION: {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          struct binder_transaction_data_secctx txn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          if (func) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              unsigned rdata[256/4];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              struct binder_io msg;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              struct binder_io reply;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              int res;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              bio_init(&amp;amp;reply, rdata, sizeof(rdata), 4);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              bio_init_from_txn(&amp;amp;msg, &amp;amp;txn.transaction_data);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              // &amp;#x8C03;&amp;#x7528;func&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;svcmgr_handler&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              res = func(bs, &amp;amp;txn, &amp;amp;msg, &amp;amp;reply);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              if (txn.transaction_data.flags &amp;amp; TF_ONE_WAY) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  binder_free_buffer(bs, txn.transaction_data.data.ptr.buffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  // &amp;#x53D1;&amp;#x9001;reply&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  binder_send_reply(bs, &amp;amp;reply, txn.transaction_data.data.ptr.buffer, res);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      case BR_REPLY: {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;parse: OOPS %d\n&amp;quot;, cmd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return r;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;binder_parse&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x89E3;&amp;#x6790;binder&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x53C2;&amp;#x6570;ptr&amp;#x6307;&amp;#x5411;BC_ENTER_LOOPER&amp;#xFF0C;func&amp;#x6307;&amp;#x5411;svcmgr_handler&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x4E00;&amp;#x65E6;&amp;#x8BF7;&amp;#x6C42;&amp;#x5230;&amp;#x6765;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;svcmgr_handler&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x901A;&amp;#x8FC7;binder_send_reply&amp;#x8FD4;&amp;#x56DE;&amp;#x4F1A;&amp;#x7ED9;client&amp;#x7AEF;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x4E4B;&amp;#x524D;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x8BF4;&amp;#x7684;BC_REPLAY&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;svcmgr_handler&amp;#x662F;&amp;#x5728;&amp;#x6700;&amp;#x5916;&amp;#x9762;&amp;#x7684;binder_loop&amp;#x4F20;&amp;#x9012;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;svcmgr-handler&quot;&gt;&lt;a href=&quot;#svcmgr-handler&quot; class=&quot;headerlink&quot; title=&quot;svcmgr_handler&quot;&gt;&lt;/a&gt;svcmgr_handler&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/service_manager.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int svcmgr_handler(struct binder_state *bs,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   struct binder_transaction_data_secctx *txn_secctx,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   struct binder_io *msg,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   struct binder_io *reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct svcinfo *si;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint16_t *s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size_t len;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t handle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t strict_policy;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int allow_isolated;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t dumpsys_priority;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct binder_transaction_data *txn = &amp;amp;txn_secctx-&amp;gt;transaction_data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch(txn-&amp;gt;code) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case SVC_MGR_GET_SERVICE:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case SVC_MGR_CHECK_SERVICE:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        s = bio_get_string16(msg, &amp;amp;len);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (s == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x67E5;&amp;#x627E;service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        handle = do_find_service(s, len, txn-&amp;gt;sender_euid, txn-&amp;gt;sender_pid,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                 (const char*) txn_secctx-&amp;gt;secctx);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!handle)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bio_put_ref(reply, handle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case SVC_MGR_ADD_SERVICE:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        s = bio_get_string16(msg, &amp;amp;len);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (s == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        handle = bio_get_ref(msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        allow_isolated = bio_get_uint32(msg) ? 1 : 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dumpsys_priority = bio_get_uint32(msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (do_add_service(bs, s, len, handle, txn-&amp;gt;sender_euid, allow_isolated, dumpsys_priority,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           txn-&amp;gt;sender_pid, (const char*) txn_secctx-&amp;gt;secctx))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case SVC_MGR_LIST_SERVICES: {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        uint32_t n = bio_get_uint32(msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        uint32_t req_dumpsys_priority = bio_get_uint32(msg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!svc_can_list(txn-&amp;gt;sender_pid, (const char*) txn_secctx-&amp;gt;secctx, txn-&amp;gt;sender_euid)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;list_service() uid=%d - PERMISSION DENIED\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    txn-&amp;gt;sender_euid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si = svclist;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x904D;&amp;#x5386;service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        while (si) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (si-&amp;gt;dumpsys_priority &amp;amp; req_dumpsys_priority) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (n == 0) break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                n--;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            si = si-&amp;gt;next;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (si) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bio_put_string16(reply, si-&amp;gt;name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;unknown code %d\n&amp;quot;, txn-&amp;gt;code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bio_put_uint32(reply, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;svcmgr_handler&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x5BF9;service&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x4E4B;&amp;#x524D;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x63D0;&amp;#x5230;&amp;#x7684;addService&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x90FD;&amp;#x4F1A;&amp;#x5728;SVC_MGR_ADD_SERVICE&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;SVC_MGR_ADD_SERVICE&amp;#x4E2D;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;do_add_service&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x6CE8;&amp;#x518C;service&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;do-add-service&quot;&gt;&lt;a href=&quot;#do-add-service&quot; class=&quot;headerlink&quot; title=&quot;do_add_service&quot;&gt;&lt;/a&gt;do_add_service&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/native/cmds/servicemanager/service_manager.c&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int do_add_service(struct binder_state *bs, const uint16_t *s, size_t len, uint32_t handle,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   uid_t uid, int allow_isolated, uint32_t dumpsys_priority, pid_t spid, const char* sid) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct svcinfo *si;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!handle || (len == 0) || (len &amp;gt; 127))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x68C0;&amp;#x67E5;&amp;#x662F;&amp;#x5426;&amp;#x80FD;&amp;#x591F;&amp;#x6CE8;&amp;#x518C;&amp;#x8BE5;service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!svc_can_register(s, len, spid, sid, uid)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;add_service(&amp;apos;%s&amp;apos;,%x) uid=%d - PERMISSION DENIED\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             str8(s, len), handle, uid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x67E5;&amp;#x627E;&amp;#x662F;&amp;#x5426;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6CE8;&amp;#x518C;&amp;#x4E86;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    si = find_svc(s, len);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (si) { //&amp;#x5DF2;&amp;#x7ECF;&amp;#x6CE8;&amp;#x518C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (si-&amp;gt;handle) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;add_service(&amp;apos;%s&amp;apos;,%x) uid=%d - ALREADY REGISTERED, OVERRIDE\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 str8(s, len), handle, uid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            svcinfo_death(bs, si);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;handle = handle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else { //&amp;#x6CA1;&amp;#x6709;&amp;#x6CE8;&amp;#x518C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x7533;&amp;#x8BF7;&amp;#x5185;&amp;#x5B58;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si = malloc(sizeof(*si) + (len + 1) * sizeof(uint16_t));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!si) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;add_service(&amp;apos;%s&amp;apos;,%x) uid=%d - OUT OF MEMORY\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 str8(s, len), handle, uid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;handle = handle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;len = len;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        memcpy(si-&amp;gt;name, s, (len + 1) * sizeof(uint16_t));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;name[len] = &amp;apos;\0&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;death.func = (void*) svcinfo_death;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;death.ptr = si;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;allow_isolated = allow_isolated;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;dumpsys_priority = dumpsys_priority;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        si-&amp;gt;next = svclist;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x4FDD;&amp;#x5B58;&amp;#x5230;svclist&amp;#x8868;&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        svclist = si;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    binder_acquire(bs, handle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    binder_link_to_death(bs, handle, &amp;amp;si-&amp;gt;death);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;do_add_service&amp;#x4E2D;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x68C0;&amp;#x67E5;&amp;#x8BE5;&amp;#x6CE8;&amp;#x518C;&amp;#x7684;service&amp;#x662F;&amp;#x5426;&amp;#x80FD;&amp;#x591F;&amp;#x6CE8;&amp;#x518C;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x51FA;&amp;#x67E5;&amp;#x8BE2;&amp;#x73B0;&amp;#x6709;&amp;#x7684;svclist&amp;#x4E2D;&amp;#x662F;&amp;#x5426;&amp;#x5B58;&amp;#x5728;&amp;#x8BE5;service&amp;#xFF1B;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x5B58;&amp;#x5728;&amp;#x5C31;&amp;#x4E3A;&amp;#x8BE5;service&amp;#x7533;&amp;#x8BF7;&amp;#x5185;&amp;#x5B58;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x5728;&amp;#x52A0;&amp;#x5165;&amp;#x5230;svclist&amp;#x6CE8;&amp;#x518C;&amp;#x8868;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x6B64;&amp;#x6574;&amp;#x4E2A;ServiceManager&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#x5C31;&amp;#x5206;&amp;#x6790;&amp;#x5B8C;&amp;#x4E86;&amp;#xFF0C;&amp;#x6211;&amp;#x8FD9;&amp;#x91CC;&amp;#x505A;&amp;#x4E2A;&amp;#x603B;&amp;#x7ED3;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_open&amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x5E76;&amp;#x8C03;&amp;#x7528;mmap&amp;#x5206;&amp;#x914D;128kb&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_become_context_manager&amp;#x5C06;ServiceManager&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;binder&amp;#x9A71;&amp;#x52A8;&amp;#x7684;&amp;#x5B88;&amp;#x62A4;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;0&amp;#x6765;&amp;#x6807;&amp;#x8BC6;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_loop&amp;#x5F00;&amp;#x542F;&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x7B49;&amp;#x5F85;&amp;#x4E0E;&amp;#x76D1;&amp;#x542C;client&amp;#x7AEF;&amp;#x4F20;&amp;#x9012;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;&amp;#x5728;&amp;#x6570;&amp;#x636E;&amp;#x76D1;&amp;#x542C;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;binder_write&amp;#x901A;&amp;#x77E5;binder&amp;#x8FDB;&amp;#x884C;&amp;#x5FAA;&amp;#x73AF;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x6765;&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x8BFB;&amp;#x5199;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;binder_parse&amp;#x6765;&amp;#x89E3;&amp;#x6790;&amp;#x76D1;&amp;#x542C;&amp;#x5230;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;BR_&amp;#x6307;&amp;#x4EE4;&amp;#x7801;&amp;#x6765;&amp;#x533A;&amp;#x522B;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x5E76;&amp;#x901A;&amp;#x8FC7;reply&amp;#x4E0E;BC_&amp;#x6307;&amp;#x4EE4;&amp;#x7801;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x56DE;&amp;#x9988;&amp;#x7ED9;client&amp;#x7AEF;&lt;/li&gt;
&lt;li&gt;&amp;#x5C06;&amp;#x89E3;&amp;#x6790;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x56DE;&amp;#x8C03;&amp;#x7ED9;svcmgr_handler&amp;#x8FDB;&amp;#x884C;&amp;#x7EDF;&amp;#x4E00;&amp;#x903B;&amp;#x8F91;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5305;&amp;#x62EC;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x3001;&amp;#x67E5;&amp;#x627E;&amp;#x3001;&amp;#x9A8C;&amp;#x8BC1;&amp;#x7B49;&amp;#x64CD;&amp;#x4F5C;&lt;/li&gt;
&lt;li&gt;&amp;#x6700;&amp;#x7EC8;ServiceManager&amp;#x4F1A;&amp;#x5C06;&amp;#x6CE8;&amp;#x518C;&amp;#x7684;service&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;svclist&amp;#x6CE8;&amp;#x518C;&amp;#x8868;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4FBF;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x9A8C;&amp;#x8BC1;&amp;#x4E0E;&amp;#x67E5;&amp;#x8BE2;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x627F;&amp;#x63A5;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485610&amp;amp;idx=1&amp;amp;sn=2ef38084699d2fcc5241a6cc57
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="binder" scheme="https://www.rousetime.com/tags/binder/"/>
    
  </entry>
  
  <entry>
    <title>Binder: addService初探</title>
    <link href="https://www.rousetime.com/2021/01/26/Binder-addService%E5%88%9D%E6%8E%A2/"/>
    <id>https://www.rousetime.com/2021/01/26/Binder-addService初探/</id>
    <published>2021-01-26T13:52:02.000Z</published>
    <updated>2022-12-01T14:09:46.138Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485536&amp;amp;idx=1&amp;amp;sn=ede4bc6f83ae86e482015f435da1f825&amp;amp;chksm=e8e0f1f0df9778e601e615e1622984b195aa0ea952117988fa2367b87d9063febda1a4b57fc7&amp;amp;token=1132740062&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Binder: ServiceManager&amp;#x7684;&amp;#x83B7;&amp;#x53D6;&lt;/a&gt;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5206;&amp;#x6790;&amp;#x4E86;ProcessState&amp;#x4E0E;IPCThreadState&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&amp;#x6700;&amp;#x540E;&amp;#x5728;defaultServiceManager&amp;#x4E2D;&amp;#xFF0C;&amp;#x8FD4;&amp;#x56DE;&amp;#x7684;&amp;#x662F;&amp;#x6301;&amp;#x6709;BpBinder&amp;#x7684;BpServiceManager&amp;#x5BF9;&amp;#x8C61;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc __unused, char **argv __unused)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     signal(SIGPIPE, SIG_IGN);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     sp&amp;lt;ProcessState&amp;gt; proc(ProcessState::self());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     sp&amp;lt;IServiceManager&amp;gt; sm(defaultServiceManager()); // BpServiceManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ALOGI(&amp;quot;ServiceManager: %p&amp;quot;, sm.get());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     AIcu_initializeIcuOrDie();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     MediaPlayerService::instantiate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ResourceManagerService::instantiate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     registerExtensions();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ProcessState::self()-&amp;gt;startThreadPool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     IPCThreadState::self()-&amp;gt;joinThreadPool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; void MediaPlayerService::instantiate() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     defaultServiceManager()-&amp;gt;addService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             String16(&amp;quot;media.player&amp;quot;), new MediaPlayerService());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; }&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;instantiate&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x8C03;&amp;#x7528;&amp;#x7684;addService&amp;#x5176;&amp;#x5B9E;&amp;#x662F;BpServiceManager&amp;#x4E2D;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5C06;&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;media.player&amp;#x7684;MediaPlayerService&amp;#x5BF9;&amp;#x8C61;&amp;#x8FDB;&amp;#x884C;&amp;#x6CE8;&amp;#x518C;&lt;/p&gt;
&lt;h2 id=&quot;addService&quot;&gt;&lt;a href=&quot;#addService&quot; class=&quot;headerlink&quot; title=&quot;addService&quot;&gt;&lt;/a&gt;addService&lt;/h2&gt;&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x770B;BpServiceManager&amp;#x4E2D;&amp;#x7684;addService&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;virtual status_t addService(const String16&amp;amp; name, const sp&amp;lt;IBinder&amp;gt;&amp;amp; service,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          bool allowIsolated, int dumpsysPriority) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x5C01;&amp;#x88C5;&amp;#x6210;Parcel&amp;#x5BF9;&amp;#x8C61;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Parcel data, reply;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data.writeInterfaceToken(IServiceManager::getInterfaceDescriptor());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data.writeString16(name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data.writeStrongBinder(service);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data.writeInt32(allowIsolated ? 1 : 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data.writeInt32(dumpsysPriority);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x53D1;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#x5230;&amp;#x8FDC;&amp;#x7AEF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  status_t err = remote()-&amp;gt;transact(ADD_SERVICE_TRANSACTION, data, &amp;amp;reply);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return err == NO_ERROR ? reply.readExceptionCode() : err;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x7EDF;&amp;#x4E00;&amp;#x5C01;&amp;#x88C5;&amp;#x5230;Parcel&amp;#x5BF9;&amp;#x8C61;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x901A;&amp;#x8FC7;remote()&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&amp;#x5230;&amp;#x8FDC;&amp;#x7AEF;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;code&amp;#x4E3A;ADD_SERVICE_TRANSACTION&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;remote()&amp;#x5230;&amp;#x5E95;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x662F;BpServiceManager&amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x81EA;&amp;#x4E8E;&amp;#x5B83;&amp;#x7684;&amp;#x7236;&amp;#x7C7B;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class BpServiceManager : public BpInterface&amp;lt;IServiceManager&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  explicit BpServiceManager(const sp&amp;lt;IBinder&amp;gt;&amp;amp; impl) // BpBinder(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      : BpInterface&amp;lt;IServiceManager&amp;gt;(impl) {}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;inline BpInterface&amp;lt;INTERFACE&amp;gt;::BpInterface(const sp&amp;lt;IBinder&amp;gt;&amp;amp; remote) : BpRefBase(remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BpRefBase::BpRefBase(const sp&amp;lt;IBinder&amp;gt;&amp;amp; o) : mRemote(o.get()), mRefs(nullptr), mState(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class BpRefBase : public virtual RefBase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;protected:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  explicit                BpRefBase(const sp&amp;lt;IBinder&amp;gt;&amp;amp; o);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  virtual                 ~BpRefBase();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  virtual void            onFirstRef();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  virtual void            onLastStrongRef(const void* id);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  virtual bool            onIncStrongAttempted(uint32_t flags, const void* id);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  inline  IBinder*        remote()                { return mRemote; }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  inline  IBinder*        remote() const          { return mRemote; }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          BpRefBase(const BpRefBase&amp;amp; o);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  BpRefBase&amp;amp;              operator=(const BpRefBase&amp;amp; o);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  IBinder* const          mRemote;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  RefBase::weakref_type*  mRefs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  std::atomic&amp;lt;int32_t&amp;gt;    mState;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4ECE;&amp;#x4E0A;&amp;#x9762;&amp;#x7EE7;&amp;#x627F;&amp;#x6D41;&amp;#x7A0B;&amp;#x53EF;&amp;#x4EE5;&amp;#x5F97;&amp;#x5230;&amp;#x8FD9;&amp;#x4E2A;remote()&amp;#x8FD4;&amp;#x56DE;&amp;#x7684;&amp;#x5C31;&amp;#x662F;mRemote&amp;#xFF0C;&amp;#x800C;mRemote&amp;#x5176;&amp;#x5B9E;&amp;#x662F;&amp;#x6700;&amp;#x5F00;&amp;#x59CB;&amp;#x7684;&amp;#x53C2;&amp;#x6570;BpBinder(0)&amp;#x3002;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD9;&amp;#x91CC;&amp;#x8C03;&amp;#x7528;&amp;#x7684;&amp;#x662F;BpBinder&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;status_t BpBinder::transact(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  uint32_t code, const Parcel&amp;amp; data, Parcel* reply, uint32_t flags)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // Once a binder has died, it will never come back to life.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (mAlive) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      status_t status = IPCThreadState::self()-&amp;gt;transact(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          mHandle, code, data, reply, flags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (status == DEAD_OBJECT) mAlive = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      return status;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return DEAD_OBJECT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FDB;&amp;#x5165;BpBinder&amp;#x53D1;&amp;#x73B0;&amp;#x53C8;&amp;#x8F6C;&amp;#x8C03;&amp;#x5230;IPCThreadState&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;status_t IPCThreadState::transact(int32_t handle,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                uint32_t code, const Parcel&amp;amp; data,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                Parcel* reply, uint32_t flags)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  err = writeTransactionData(BC_TRANSACTION, flags, handle, code, data, nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if ((flags &amp;amp; TF_ONE_WAY) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (reply) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          // &amp;#x7B49;&amp;#x5F85;&amp;#x8FDC;&amp;#x7A0B;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x8FD4;&amp;#x56DE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          err = waitForResponse(reply);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          Parcel fakeReply;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          err = waitForResponse(&amp;amp;fakeReply);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      err = waitForResponse(nullptr, nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return err;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x4E24;&amp;#x4EF6;&amp;#x4E8B;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;writeTransactionData&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x5199;&amp;#x5165;&amp;#x5230;Parcel&amp;#x4E2D;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;cmd&amp;#x547D;&amp;#x4EE4;&amp;#x4E3A;BC_TRANSACTION&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x8BF7;&amp;#x6C42;&amp;#x7801;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x4EE5;BC_&amp;#x5F00;&amp;#x5934;&amp;#x547D;&amp;#x540D;&amp;#xFF0C;&amp;#x5728;service&amp;#x7AEF;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E9B;&amp;#x8BF7;&amp;#x6C42;&amp;#x7801;&amp;#x505A;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;waitForResponse&amp;#x6765;&amp;#x7B49;&amp;#x5F85;&amp;#x8FDC;&amp;#x7AEF;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x8FD4;&amp;#x56DE;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E5F;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;cmd&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;BR_REPLY&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x8FD4;&amp;#x56DE;&amp;#x7801;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x4EE5;BR_&amp;#x5F00;&amp;#x5934;&amp;#x547D;&amp;#x540D;&amp;#x7684;&amp;#xFF0C;&amp;#x5728;client&amp;#x4E5F;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E9B;&amp;#x8FD4;&amp;#x56DE;&amp;#x7801;&amp;#x505A;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x6211;&amp;#x4EEC;&amp;#x4E0D;&amp;#x7814;&amp;#x7A76;&amp;#x8FD9;&amp;#x51E0;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x6587;&amp;#x7AE0;&amp;#x4F1A;&amp;#x4E13;&amp;#x95E8;&amp;#x5206;&amp;#x6790;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x4EA4;&amp;#x4E92;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;MediaPlayerService&amp;#x5DF2;&amp;#x7ECF;&amp;#x6CE8;&amp;#x518C;&amp;#x5B8C;&amp;#x6BD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x63A5;&amp;#x4E0B;&amp;#x6700;&amp;#x524D;&amp;#x9762;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x7EE7;&amp;#x7EED;&amp;#x5F80;&amp;#x4E0B;&amp;#x8D70;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;startThreadPool&quot;&gt;&lt;a href=&quot;#startThreadPool&quot; class=&quot;headerlink&quot; title=&quot;startThreadPool&quot;&gt;&lt;/a&gt;startThreadPool&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ProcessState::self()-&amp;gt;startThreadPool();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53C8;&amp;#x662F;ProcessState&amp;#x4E2D;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FDB;&amp;#x5165;startThreadPooll&amp;#x4E2D;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void ProcessState::startThreadPool()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  AutoMutex _l(mLock);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (!mThreadPoolStarted) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      mThreadPoolStarted = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      spawnPooledThread(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void ProcessState::spawnPooledThread(bool isMain)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (mThreadPoolStarted) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      String8 name = makeBinderThreadName();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x5F00;&amp;#x542F;binder&amp;#x7EBF;&amp;#x7A0B;&amp;#x6C60;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      sp&amp;lt;Thread&amp;gt; t = new PoolThread(isMain);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      t-&amp;gt;run(name.string());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;spawnPooledThread&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x521B;&amp;#x5EFA;&amp;#x4E86;PoolThread&amp;#x7EBF;&amp;#x7A0B;&amp;#x6C60;&amp;#xFF0C;&amp;#x5B83;&amp;#x7EE7;&amp;#x627F;&amp;#x4E8E;Thread&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;run&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;h2 id=&quot;joinThreadPool&quot;&gt;&lt;a href=&quot;#joinThreadPool&quot; class=&quot;headerlink&quot; title=&quot;joinThreadPool&quot;&gt;&lt;/a&gt;joinThreadPool&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;IPCThreadState::self()-&amp;gt;joinThreadPool();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x770B;joinThreadPooll&amp;#x65B9;&amp;#x6CD5;, &amp;#x5B83;&amp;#x5728;IPCThreadState&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void IPCThreadState::joinThreadPool(bool isMain)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mOut.writeInt32(isMain ? BC_ENTER_LOOPER : BC_REGISTER_LOOPER);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  status_t result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  do {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      processPendingDerefs();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x7B49;&amp;#x5F85;&amp;#x547D;&amp;#x4EE4;&amp;#x884C;&amp;#x7684;&amp;#x5230;&amp;#x6765;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      result = getAndExecuteCommand();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  } while (result != -ECONNREFUSED &amp;amp;&amp;amp; result != -EBADF);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mOut.writeInt32(BC_EXIT_LOOPER);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // &amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x901A;&amp;#x4FE1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  talkWithDriver(false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;getAndExecuteCommand()&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#x63A5;&amp;#x6536;service&amp;#x7AEF;&amp;#x53D1;&amp;#x9001;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;service&amp;#x4E0E;client&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E92;&amp;#x76F8;&amp;#x53D1;&amp;#x8D77;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x4EA4;&amp;#x4E92;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;client&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;service&amp;#xFF0C;&amp;#x5B83;&amp;#x5F00;&amp;#x542F;&amp;#x8F6E;&amp;#x8BE2;&amp;#x4E0D;&amp;#x65AD;&amp;#x5730;&amp;#x76D1;&amp;#x542C;service&amp;#x53D1;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x6700;&amp;#x7EC8;&amp;#x5B83;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;executeCommand&amp;#x6765;&amp;#x7EDF;&amp;#x4E00;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;status_t IPCThreadState::executeCommand(int32_t cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  switch ((uint32_t)cmd) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  case BR_TRANSACTION_SEC_CTX:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  case BR_TRANSACTION:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          if (tr.target.ptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              if (reinterpret_cast&amp;lt;RefBase::weakref_type*&amp;gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      tr.target.ptr)-&amp;gt;attemptIncStrong(this)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  // BBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  error = reinterpret_cast&amp;lt;BBinder*&amp;gt;(tr.cookie)-&amp;gt;transact(tr.code, buffer,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &amp;amp;reply, tr.flags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  reinterpret_cast&amp;lt;BBinder*&amp;gt;(tr.cookie)-&amp;gt;decStrong(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  error = UNKNOWN_TRANSACTION;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              error = the_context_object-&amp;gt;transact(tr.code, buffer, &amp;amp;reply, tr.flags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          if ((tr.flags &amp;amp; TF_ONE_WAY) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              // &amp;#x5411;&amp;#x670D;&amp;#x52A1;&amp;#x7AEF;&amp;#x53D1;&amp;#x9001;&amp;#x56DE;&amp;#x5E94;reply&amp;#xFF0C;&amp;#x6CE8;&amp;#x610F;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;0&amp;#xFF0C;&amp;#x7279;&amp;#x5B9A;&amp;#x6807;&amp;#x8BC6;&amp;#xFF1B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              sendReply(reply, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              LOG_ONEWAY(&amp;quot;NOT sending reply to %d!&amp;quot;, mCallingPid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ALOGE(&amp;quot;*** BAD COMMAND %d received from Binder driver\n&amp;quot;, cmd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      result = UNKNOWN_ERROR;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (result != NO_ERROR) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      mLastError = result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x7B80;&amp;#x5316;&amp;#x4EE3;&amp;#x7801;&amp;#x53EA;&amp;#x5C55;&amp;#x793A;&amp;#x4E86;&amp;#x4E3B;&amp;#x8981;&amp;#x7684;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;BR_TRANSACTION&amp;#x7C7B;&amp;#x4F3C;&amp;#x4E8E;&amp;#x4E0A;&amp;#x9762;&amp;#x6240;&amp;#x8BF4;&amp;#x7684;BC_TRANSACTION&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x662F;&amp;#x4ECE;&amp;#x670D;&amp;#x52A1;&amp;#x7AEF;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x53D1;&amp;#x9001;&amp;#x8FC7;&amp;#x6765;&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x670D;&amp;#x52A1;&amp;#x7AEF;&amp;#x4E3B;&amp;#x52A8;&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x4E0E;service&amp;#x7AEF;&amp;#x5EFA;&amp;#x7ACB;&amp;#x4E86;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x6B64;&amp;#x5728;client&amp;#x7AEF;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x4EA4;&amp;#x4E92;&amp;#x6D41;&amp;#x7A0B;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5206;&amp;#x6790;&amp;#x5B8C;&amp;#x6BD5;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x770B;binder&amp;#x4F20;&amp;#x8F93;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;service&amp;#x7AEF;&amp;#xFF0C;&amp;#x770B;&amp;#x5B83;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x63A5;&amp;#x6536;&amp;#x4E0E;&amp;#x5904;&amp;#x7406;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485536&amp;amp;idx=1&amp;amp;sn=ede4bc6f83ae86e482015f435da1f825&amp;a
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="binder" scheme="https://www.rousetime.com/tags/binder/"/>
    
  </entry>
  
  <entry>
    <title>Binder: ServiceManager的获取</title>
    <link href="https://www.rousetime.com/2021/01/26/Binder-ServiceManager%E7%9A%84%E8%8E%B7%E5%8F%96/"/>
    <id>https://www.rousetime.com/2021/01/26/Binder-ServiceManager的获取/</id>
    <published>2021-01-26T13:44:00.000Z</published>
    <updated>2022-12-01T13:48:29.842Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485503&amp;amp;idx=1&amp;amp;sn=170681578f1e2aa1991463103084b32b&amp;amp;chksm=e8e0f1afdf9778b9fadd0dfc1265211e0b0305077f007fd085ebd2e54d6ea28a7fc5d49b07df&amp;amp;token=2134605925&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Binder&amp;#x7EAF;&amp;#x7406;&amp;#x8BBA;&amp;#x5206;&amp;#x6790;&lt;/a&gt;&amp;#x4E2D;&amp;#x4ECB;&amp;#x7ECD;&amp;#x4E86;Binder&amp;#x7684;&amp;#x6574;&amp;#x4E2A;&amp;#x901A;&amp;#x4FE1;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x901A;&amp;#x8FC7;Service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;Binder&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5DE5;&amp;#x4F5C;&amp;#x539F;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x4EE5;MediaService&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF0C;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;MediaService&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x6587;&amp;#x4EF6;&amp;#x5728;main_mediaserver.cpp&amp;#x4E2D;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;frameworks/av/media/mediaserver/main_mediaserver.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc __unused, char **argv __unused)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    signal(SIGPIPE, SIG_IGN);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sp&amp;lt;ProcessState&amp;gt; proc(ProcessState::self());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sp&amp;lt;IServiceManager&amp;gt; sm(defaultServiceManager());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGI(&amp;quot;ServiceManager: %p&amp;quot;, sm.get());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MediaPlayerService::instantiate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ResourceManagerService::instantiate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    registerExtensions();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ::android::hardware::configureRpcThreadpool(16, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ProcessState::self()-&amp;gt;startThreadPool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    IPCThreadState::self()-&amp;gt;joinThreadPool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ::android::hardware::joinRpcThreadpool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ProcessState&quot;&gt;&lt;a href=&quot;#ProcessState&quot; class=&quot;headerlink&quot; title=&quot;ProcessState&quot;&gt;&lt;/a&gt;ProcessState&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x521B;&amp;#x5EFA;&amp;#x4E86;ProcessState&amp;#xFF0C;&amp;#x5B83;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;sp&amp;#x7684;&amp;#x5F3A;&amp;#x5F15;&amp;#x7528;&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;ProcessState::self&amp;#x5185;&amp;#x90E8;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5355;&amp;#x4F8B;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E3A;&amp;#x7A7A;&amp;#x5B83;&amp;#x4F1A;&amp;#x521B;&amp;#x5EFA;ProcessState&amp;#x5BF9;&amp;#x8C61;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ProcessState::ProcessState(const char *driver)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    : mDriverName(String8(driver))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mDriverFD(open_driver(driver)) // &amp;#x542F;&amp;#x52A8;binder&amp;#x9A71;&amp;#x52A8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mVMStart(MAP_FAILED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mThreadCountLock(PTHREAD_MUTEX_INITIALIZER)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mThreadCountDecrement(PTHREAD_COND_INITIALIZER)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mExecutingThreadsCount(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mWaitingForThreads(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mMaxThreads(DEFAULT_MAX_BINDER_THREADS) // &amp;#x8BBE;&amp;#x7F6E;&amp;#x6700;&amp;#x5927;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mStarvationStartTimeMs(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mThreadPoolStarted(false)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mThreadPoolSeq(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , mCallRestriction(CallRestriction::NONE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mDriverFD &amp;gt;= 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6620;&amp;#x5C04;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mVMStart = mmap(nullptr, BINDER_VM_SIZE, PROT_READ, MAP_PRIVATE | MAP_NORESERVE, mDriverFD, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mVMStart == MAP_FAILED) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // *sigh*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;Using %s failed: unable to mmap transaction memory.\n&amp;quot;, mDriverName.c_str());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            close(mDriverFD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mDriverFD = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mDriverName.clear();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LOG_ALWAYS_FATAL_IF(mDriverFD &amp;lt; 0, &amp;quot;Binder driver &amp;apos;%s&amp;apos; could not be opened.  Terminating.&amp;quot;, driver);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x662F;ProcessState&amp;#x7684;&amp;#x5B9E;&amp;#x4F8B;&amp;#x5316;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x6709;&amp;#x4EE5;&amp;#x4E0B;&amp;#x4E09;&amp;#x4E2A;&amp;#x91CD;&amp;#x8981;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;open_driver(driver): &amp;#x542F;&amp;#x52A8;binder&amp;#x9A71;&amp;#x52A8;&lt;/li&gt;
&lt;li&gt;mMaxThreads(DEFAULT_MAX_BINDER_THREADS): &amp;#x8BBE;&amp;#x7F6E;&amp;#x6700;&amp;#x5927;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6570;16&lt;/li&gt;
&lt;li&gt;mmap: &amp;#x6620;&amp;#x5C04;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static int open_driver(const char *driver)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	// &amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int fd = open(driver, O_RDWR | O_CLOEXEC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (fd &amp;gt;= 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        int vers = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x901A;&amp;#x8FC7;ioctl&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4EA4;&amp;#x4E92;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;binder&amp;#x7248;&amp;#x672C;&amp;#x4FE1;&amp;#x606F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status_t result = ioctl(fd, BINDER_VERSION, &amp;amp;vers);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (result == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;Binder ioctl to obtain version failed: %s&amp;quot;, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            close(fd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fd = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (result != 0 || vers != BINDER_CURRENT_PROTOCOL_VERSION) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;Binder driver protocol(%d) does not match user space protocol(%d)! ioctl() return value: %d&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                vers, BINDER_CURRENT_PROTOCOL_VERSION, result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            close(fd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fd = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x8BBE;&amp;#x7F6E;&amp;#x6700;&amp;#x5927;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        size_t maxThreads = DEFAULT_MAX_BINDER_THREADS;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result = ioctl(fd, BINDER_SET_MAX_THREADS, &amp;amp;maxThreads);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (result == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;Binder ioctl to set max threads failed: %s&amp;quot;, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGW(&amp;quot;Opening &amp;apos;%s&amp;apos; failed: %s\n&amp;quot;, driver, strerror(errno));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return fd;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;open_driver&amp;#x4E2D;&amp;#x901A;&amp;#x8FC7;open&amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x5728;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;binder_open&amp;#xFF0C;&amp;#x5B83;&amp;#x4F1A;&amp;#x521B;&amp;#x5EFA;binder_proc&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7B49;&amp;#x76F8;&amp;#x5173;&amp;#x4FE1;&amp;#x606F;&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;binder_proc&amp;#x5BF9;&amp;#x8C61;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;fd&amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;Linux&amp;#x4E2D;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x65B9;&amp;#x6CD5;&amp;#x4E0E;&amp;#x8BBE;&amp;#x5907;&amp;#x8FDB;&amp;#x884C;&amp;#x4EA4;&amp;#x4E92;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;binder&amp;#x7684;&amp;#x7248;&amp;#x672C;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x8BBE;&amp;#x7F6E;binder&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6570;16&amp;#x3002;&amp;#x5728;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;binder_ioctl&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E3B;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;fd&amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;&amp;#x3001;ioctl&amp;#x547D;&amp;#x4EE4;&amp;#x4E0E;&amp;#x6570;&amp;#x636E;&amp;#x7C7B;&amp;#x578B;&amp;#x6765;&amp;#x4F20;&amp;#x9012;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;ProcessState&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;mmap&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5728;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;binder_mmap&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5C06;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#x540C;&amp;#x4E00;&amp;#x5757;&amp;#x7269;&amp;#x7406;&amp;#x5185;&amp;#x5B58;&amp;#x5206;&amp;#x522B;&amp;#x6620;&amp;#x5C04;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E0E;&amp;#x7528;&amp;#x6237;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x4FDD;&amp;#x8BC1;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;buffer&amp;#x4E0E;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;buffer&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x5C31;&amp;#x662F;ProcessState&amp;#x7684;&amp;#x4E3B;&amp;#x8981;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x7EE7;&amp;#x7EED;main&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x7684;&amp;#x4E0B;&amp;#x4E00;&amp;#x6B65;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;BpServiceManager&quot;&gt;&lt;a href=&quot;#BpServiceManager&quot; class=&quot;headerlink&quot; title=&quot;BpServiceManager&quot;&gt;&lt;/a&gt;BpServiceManager&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp&amp;lt;IServiceManager&amp;gt; sm(defaultServiceManager());&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x83B7;&amp;#x53D6;IServiceManager&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x8FDB;&amp;#x5165;defaultServiceManager&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp&amp;lt;IServiceManager&amp;gt; defaultServiceManager()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     std::call_once(gSmOnce, []() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         sp&amp;lt;AidlServiceManager&amp;gt; sm = nullptr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         while (sm == nullptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             // &amp;#x91CD;&amp;#x8981;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;ServiceManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             sm = interface_cast&amp;lt;AidlServiceManager&amp;gt;(ProcessState::self()-&amp;gt;getContextObject(nullptr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             if (sm == nullptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 ALOGE(&amp;quot;Waiting 1s on context object on %s.&amp;quot;, ProcessState::self()-&amp;gt;getDriverName().c_str());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 sleep(1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         gDefaultServiceManager = new ServiceManagerShim(sm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     });&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     return gDefaultServiceManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; }&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;&amp;#x5B83;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;interface_cast&amp;#x6765;&amp;#x83B7;&amp;#x53D6;sm&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;AidlServiceManager&amp;#x672C;&amp;#x8D28;&amp;#x5C31;&amp;#x662F;IServiceManager&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x653E;&amp;#x4E00;&amp;#x653E;&amp;#xFF0C;&amp;#x5148;&amp;#x770B;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x83B7;&amp;#x53D6;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ProcessState::self()-&amp;gt;getContextObject(nullptr)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x55EF;&amp;#xFF0C;&amp;#x53C8;&amp;#x770B;&amp;#x5230;&amp;#x4E86;ProcessState::self()&amp;#xFF0C;&amp;#x524D;&amp;#x9762;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5206;&amp;#x6790;&amp;#x4E86;&amp;#xFF0C;&amp;#x5B83;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;ProcessState&amp;#x5355;&amp;#x4F8B;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x770B;getContextObject&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp&amp;lt;IBinder&amp;gt; ProcessState::getContextObject(const sp&amp;lt;IBinder&amp;gt;&amp;amp; /*caller*/)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sp&amp;lt;IBinder&amp;gt; context = getStrongProxyForHandle(0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (context == nullptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       ALOGW(&amp;quot;Not able to get context object on %s.&amp;quot;, mDriverName.c_str());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    internal::Stability::tryMarkCompilationUnit(context.get());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return context;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E86;IBinder&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x6211;&amp;#x4EEC;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B21;&amp;#x770B;&amp;#x5230;IBinder&amp;#xFF0C;&amp;#x611F;&amp;#x89C9;&amp;#x6709;&amp;#x70B9;&amp;#x7709;&amp;#x76EE;&amp;#x4E86;&amp;#xFF0C;&amp;#x7EE7;&amp;#x7EED;&amp;#x770B;getStrongProxyForHandle(0)&amp;#xFF0C;&amp;#x6CE8;&amp;#x610F;&amp;#x5B83;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F20;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;0&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp&amp;lt;IBinder&amp;gt; ProcessState::getStrongProxyForHandle(int32_t handle)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     sp&amp;lt;IBinder&amp;gt; result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     AutoMutex _l(mLock);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     handle_entry* e = lookupHandleLocked(handle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     if (e != nullptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         IBinder* b = e-&amp;gt;binder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         if (b == nullptr || !e-&amp;gt;refs-&amp;gt;attemptIncWeak(this)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             if (handle == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 Parcel data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 // &amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 status_t status = IPCThreadState::self()-&amp;gt;transact(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         0, IBinder::PING_TRANSACTION, data, nullptr, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 if (status == DEAD_OBJECT)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    return nullptr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             // &amp;#x521B;&amp;#x5EFA;BpBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             b = BpBinder::create(handle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             e-&amp;gt;binder = b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             if (b) e-&amp;gt;refs = b-&amp;gt;getWeakRefs();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             result = b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             result.force_set(b);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             e-&amp;gt;refs-&amp;gt;decWeak(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     return result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; }&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;IPCThreadState::self()&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5355;&amp;#x4F8B;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5B83;&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x5411;&amp;#x8FDC;&amp;#x7AEF;&amp;#x53D1;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5173;&amp;#x4E8E;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x53D1;&amp;#x9001;&amp;#x672C;&amp;#x671F;&amp;#x4E0D;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x6682;&amp;#x4E14;&amp;#x8DF3;&amp;#x8FC7;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#xFF0C;&amp;#x521B;&amp;#x5EFA;&amp;#x4E86;BpBinder&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;handler = 0&amp;#x4F20;&amp;#x7ED9;&amp;#x5B83;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x901A;&amp;#x8FC7;result&amp;#x8FD4;&amp;#x56DE;&amp;#x7684;&amp;#x5C31;&amp;#x662F;BpBinder(0)&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;&amp;#x5DF2;&amp;#x7ECF;&amp;#x83B7;&amp;#x53D6;&amp;#x5230;&amp;#x4E86;IBinder&amp;#xFF0C;&amp;#x4F5C;&amp;#x4E3A;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x7684;&amp;#x8F7D;&amp;#x4F53;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5411;&amp;#x4E0A;&amp;#x56DE;&amp;#x9000;&amp;#xFF0C;&amp;#x56DE;&amp;#x5230;&amp;#x6700;&amp;#x521D;&amp;#x7684;&amp;#x5730;&amp;#x65B9;interface_cast&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x5DF2;&amp;#x7ECF;&amp;#x77E5;&amp;#x9053;&amp;#x5B83;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x5176;&amp;#x5B9E;&amp;#x5C31;&amp;#x662F;BpBinder(0)&amp;#xFF0C;&amp;#x5373;interface_cast(BpBinder(0))&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5C31;&amp;#x53EA;&amp;#x5269;&amp;#x4E0B;interface_cast&amp;#x4E86;&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x6211;&amp;#x4EEC;&amp;#x89E3;&amp;#x5F00;&amp;#x5B83;&amp;#x5C31;&amp;#x80FD;&amp;#x77E5;&amp;#x9053;ServiceManager&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x521B;&amp;#x5EFA;&amp;#x5E76;&amp;#x83B7;&amp;#x53D6;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;template&amp;lt;typename INTERFACE&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;inline sp&amp;lt;INTERFACE&amp;gt; interface_cast(const sp&amp;lt;IBinder&amp;gt;&amp;amp; obj)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return INTERFACE::asInterface(obj);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x53D1;&amp;#x73B0;&amp;#x5B83;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;INTERFACE&amp;#x7684;asInterface&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;INTERFACE&amp;#x53C8;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x627E;&amp;#x4E86;&amp;#x4E00;&amp;#x5708;&amp;#x53D1;&amp;#x73B0;&amp;#x5B83;&amp;#x5C45;&amp;#x7136;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x6A21;&amp;#x677F;&amp;#xFF0C;&amp;#x58F0;&amp;#x660E;&amp;#x5982;&amp;#x4E0B;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#define DECLARE_META_INTERFACE(INTERFACE)                               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; public:                                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static const ::android::String16 descriptor;                        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static ::android::sp&amp;lt;I##INTERFACE&amp;gt; asInterface(                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             const ::android::sp&amp;lt;::android::IBinder&amp;gt;&amp;amp; obj);              &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     virtual const ::android::String16&amp;amp; getInterfaceDescriptor() const;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     I##INTERFACE();                                                     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     virtual ~I##INTERFACE();                                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static bool setDefaultImpl(std::unique_ptr&amp;lt;I##INTERFACE&amp;gt; impl);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static const std::unique_ptr&amp;lt;I##INTERFACE&amp;gt;&amp;amp; getDefaultImpl();      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; private:                                                                &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static std::unique_ptr&amp;lt;I##INTERFACE&amp;gt; default_impl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;INTERFACE&amp;#x5C31;&amp;#x662F;ServiceManager&amp;#xFF0C;&amp;#x5728;&amp;#x6A21;&amp;#x677F;&amp;#x58F0;&amp;#x660E;&amp;#x4E2D;&amp;#x770B;&amp;#x5230;&amp;#x4E86;&amp;#x6211;&amp;#x4EEC;&amp;#x6240;&amp;#x8981;&amp;#x7684;asInterface&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x518D;&amp;#x770B;&amp;#x6A21;&amp;#x677F;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;IMPLEMENT_META_INTERFACE(ServiceManager, &amp;quot;android.os.IServiceManager&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; #define IMPLEMENT_META_INTERFACE(INTERFACE, NAME)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      const ::android::StaticString16                                     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          I##INTERFACE##_descriptor_static_str16(__IINTF_CONCAT(u, NAME));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      const ::android::String16 I##INTERFACE::descriptor(                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          I##INTERFACE##_descriptor_static_str16);                        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      const ::android::String16&amp;amp;                                          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              I##INTERFACE::getInterfaceDescriptor() const {              &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          return I##INTERFACE::descriptor;                                &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }                                                                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ::android::sp&amp;lt;I##INTERFACE&amp;gt; I##INTERFACE::asInterface(              &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              const ::android::sp&amp;lt;::android::IBinder&amp;gt;&amp;amp; obj)               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      {                                                                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ::android::sp&amp;lt;I##INTERFACE&amp;gt; intr;                               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          if (obj != nullptr) {                                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              intr = static_cast&amp;lt;I##INTERFACE*&amp;gt;(                          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  obj-&amp;gt;queryLocalInterface(                               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         I##INTERFACE::descriptor).get());               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             if (intr == nullptr) {                                      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  intr = new Bp##INTERFACE(obj);                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             }                                                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }                                                               &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          return intr;                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }                      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5C06;INTERFACE&amp;#x66FF;&amp;#x6362;&amp;#x6210;ServiceManager&amp;#x6765;&amp;#x770B;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x901A;&amp;#x8FC7;asInterface&amp;#x8FD4;&amp;#x56DE;&amp;#x7684;&amp;#x662F;BpServiceManager&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x5B83;&amp;#x7684;&amp;#x53C2;&amp;#x6570;obj&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;BpBinder(0)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x641E;&amp;#x660E;&amp;#x767D;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x518D;&amp;#x56DE;&amp;#x5230;&amp;#x6700;&amp;#x521D;&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#xFF08;&amp;#x5E0C;&amp;#x671B;&amp;#x6CA1;&amp;#x6709;&amp;#x6655;&amp;#xFF09;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;defaultServiceManager&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6BCF;&amp;#x6B21;&amp;#x8C03;&amp;#x7528;defaultServiceManager&amp;#x5176;&amp;#x5B9E;&amp;#x5C31;&amp;#x662F;&amp;#x8FD4;&amp;#x56DE;BpServiceManager(BpBinder(0))&amp;#x5BF9;&amp;#x8C61;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;BpServiceManager&amp;#xFF0C;&amp;#x5B83;&amp;#x5728;IServiceManager.cpp&amp;#x5C31;&amp;#x7533;&amp;#x660E;&amp;#x7684;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class BpServiceManager : public BpInterface&amp;lt;IServiceManager&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     explicit BpServiceManager(const sp&amp;lt;IBinder&amp;gt;&amp;amp; impl)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         : BpInterface&amp;lt;IServiceManager&amp;gt;(impl)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     } &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     virtual sp&amp;lt;IBinder&amp;gt; getService(const String16&amp;amp; name) const&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     { ... }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     virtual sp&amp;lt;IBinder&amp;gt; checkService( const String16&amp;amp; name) const&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     { ... }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     virtual status_t addService(const String16&amp;amp; name, const sp&amp;lt;IBinder&amp;gt;&amp;amp; service,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                 bool allowIsolated, int dumpsysPriority) { ... }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; };&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;addService&amp;#x4E0E;getService&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6682;&amp;#x65F6;&amp;#x4E0D;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x4F46;&amp;#x53EF;&amp;#x4EE5;&amp;#x5927;&amp;#x80C6;&amp;#x731C;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;BpServiceManager&amp;#x7684;&amp;#x8FD9;&amp;#x4E9B;&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x6CE8;&amp;#x518C;&amp;#x4E0E;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Service&amp;#x3002;&amp;#x81F3;&amp;#x4E8E;&amp;#x5B83;&amp;#x5185;&amp;#x90E8;&amp;#x53C8;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x4F20;&amp;#x9012;&amp;#x5230;ServiceManager&amp;#x6211;&amp;#x4EEC;&amp;#x540E;&amp;#x7EED;&amp;#x518D;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x56DE;&amp;#x5230;&amp;#x6700;&amp;#x521D;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x5E94;&amp;#x8BE5;&amp;#x5C31;&amp;#x662F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;MediaPlayerService::instantiate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;void MediaPlayerService::instantiate() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	defaultServiceManager()-&amp;gt;addService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		String16(&amp;quot;media.player&amp;quot;), new MediaPlayerService());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x518D;&amp;#x6765;&amp;#x770B;instantiate&amp;#x5C31;&amp;#x7B80;&amp;#x5355;&amp;#x8BB8;&amp;#x591A;&amp;#x4E86;&amp;#xFF0C;&amp;#x5B83;&amp;#x901A;&amp;#x8FC7;defaultServiceManager&amp;#x5411;&amp;#x5176;&amp;#x4E2D;&amp;#x6CE8;&amp;#x518C;&amp;#x4E86;&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;media.player&amp;#x7684;MediaPlayerService&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;defaultServiceManager&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;BpServiceManager(BpBinder(0))&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0A;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x7684;&amp;#x731C;&amp;#x60F3;&amp;#x662F;&amp;#x6210;&amp;#x7ACB;&amp;#x7684;&amp;#x3002;&amp;#x5173;&amp;#x4E8E;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x3001;&amp;#x9A8C;&amp;#x8BC1;&amp;#x4E0E;&amp;#x83B7;&amp;#x53D6;&amp;#x90FD;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;BpServiceManager&amp;#x4EE3;&amp;#x7406;&amp;#x5B8C;&amp;#x6210;&amp;#x7684;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x5185;&amp;#x90E8;&amp;#x6700;&amp;#x7EC8;&amp;#x90FD;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;BpBinder(0)&amp;#x6765;&amp;#x4F20;&amp;#x8F93;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x597D;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x5C3D;&amp;#x91CF;&amp;#x7F29;&amp;#x77ED;&amp;#x7BC7;&amp;#x5E45;&amp;#xFF0C;&amp;#x964D;&amp;#x4F4E;&amp;#x9605;&amp;#x8BFB;&amp;#x75B2;&amp;#x52B3;&amp;#xFF0C;&amp;#x63D0;&amp;#x5347;&amp;#x8BFB;&amp;#x8005;&amp;#x4F53;&amp;#x9A8C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x5C31;&amp;#x5206;&amp;#x6790;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6765;&amp;#x603B;&amp;#x7ED3;&amp;#x4E00;&amp;#x4E0B;MediaService&amp;#x6240;&amp;#x505A;&amp;#x7684;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;&amp;#x6838;&amp;#x5FC3;&amp;#x5185;&amp;#x5BB9;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;ProcessState&amp;#x5BF9;&amp;#x8C61;&lt;/li&gt;
&lt;li&gt;&amp;#x5728;ProcessState&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x542F;&amp;#x52A8;binder&amp;#x9A71;&amp;#x52A8;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;ioctl&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4EA4;&amp;#x4E92;&amp;#xFF0C;&amp;#x5E76;&amp;#x8BBE;&amp;#x7F6E;binder&amp;#x6700;&amp;#x5927;&amp;#x5E76;&amp;#x53D1;&amp;#x7EBF;&amp;#x7A0B;&amp;#x6570;16&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;mmap&amp;#x6620;&amp;#x5C04;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;IPCThreadState&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;transact&amp;#x5411;server&amp;#x7AEF;&amp;#x53D1;&amp;#x9001;&amp;#x6570;&amp;#x636E;&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;BpBinder&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;IBinder,&amp;#x4F5C;&amp;#x4E3A;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x7684;&amp;#x8F7D;&amp;#x4F53;&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;BpServiceManager&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x4F5C;&amp;#x4E3A;&amp;#x670D;&amp;#x52A1;&amp;#x6CE8;&amp;#x518C;&amp;#x3001;&amp;#x68C0;&amp;#x9A8C;&amp;#x4E0E;&amp;#x83B7;&amp;#x53D6;&amp;#x7684;&amp;#x4EE3;&amp;#x7406;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485503&amp;amp;idx=1&amp;amp;sn=170681578f1e2aa1991463103084b32b&amp;a
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="binder" scheme="https://www.rousetime.com/tags/binder/"/>
    
  </entry>
  
  <entry>
    <title>Binder纯理论分析</title>
    <link href="https://www.rousetime.com/2021/01/21/Binder%E7%BA%AF%E7%90%86%E8%AE%BA%E5%88%86%E6%9E%90/"/>
    <id>https://www.rousetime.com/2021/01/21/Binder纯理论分析/</id>
    <published>2021-01-21T13:37:35.000Z</published>
    <updated>2022-12-01T13:44:16.310Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x7684;&amp;#x4E00;&amp;#x6BB5;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F1A;&amp;#x6765;&amp;#x6DF1;&amp;#x5165;&amp;#x8BA4;&amp;#x8BC6;&amp;#x4E00;&amp;#x4E0B;Android&amp;#x4E2D;&amp;#x7684;Binder&amp;#x673A;&amp;#x5236;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x7684;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x6765;&amp;#x5BF9;Binder&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x8F83;&amp;#x5168;&amp;#x9762;&amp;#x7684;&amp;#x4ECB;&amp;#x7ECD;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x9884;&amp;#x70ED;&amp;#x51C6;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;Linux-IPC&quot;&gt;&lt;a href=&quot;#Linux-IPC&quot; class=&quot;headerlink&quot; title=&quot;Linux IPC&quot;&gt;&lt;/a&gt;Linux IPC&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;Binder&amp;#x662F;Android&amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x72EC;&amp;#x6709;&amp;#x7684;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x7B80;&amp;#x79F0;IPC&amp;#x3002;&amp;#x5B83;&amp;#x662F;&amp;#x4E13;&amp;#x95E8;&amp;#x4E3A;Android&amp;#x5E73;&amp;#x53F0;&amp;#x8BBE;&amp;#x8BA1;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x8BBE;&amp;#x8BA1;&amp;#x51FA;Binder&amp;#x8FD9;&amp;#x4E2A;&amp;#x70E6;&amp;#x4EBA;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#x5462;&amp;#xFF1F;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;Android&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x8FDB;&amp;#x884C;&amp;#x6F14;&amp;#x53D8;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x7406;&amp;#x5E94;&amp;#x4E5F;&amp;#x80FD;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;Linux&amp;#x7684;IPC&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;&amp;#x7406;&amp;#x89E3;Binder&amp;#x7684;&amp;#x8BBE;&amp;#x8BA1;&amp;#x521D;&amp;#x8877;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#x73B0;&amp;#x6709;&amp;#x7684;IPC&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Linux&amp;#x73B0;&amp;#x6709;&amp;#x7684;IPC&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#x6709;6&amp;#x79CD;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x7BA1;&amp;#x9053;&lt;/li&gt;
&lt;li&gt;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&lt;/li&gt;
&lt;li&gt;&amp;#x4FE1;&amp;#x53F7;&lt;/li&gt;
&lt;li&gt;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&lt;/li&gt;
&lt;li&gt;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&lt;/li&gt;
&lt;li&gt;socket&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;&amp;#x7BA1;&amp;#x9053;&quot;&gt;&lt;a href=&quot;#&amp;#x7BA1;&amp;#x9053;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7BA1;&amp;#x9053;&quot;&gt;&lt;/a&gt;&amp;#x7BA1;&amp;#x9053;&lt;/h3&gt;&lt;p&gt;&amp;#x82F1;&amp;#x6587;&amp;#x4E3A;pipe&amp;#xFF0C;&amp;#x5728;Linux&amp;#x4E2D;&amp;#x5B83;&amp;#x7684;&amp;#x672C;&amp;#x8D28;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4EE5;&amp;#x5199;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6253;&amp;#x5F00;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4EE5;&amp;#x8BFB;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x6253;&amp;#x5F00;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x8FD9;&amp;#x6837;&amp;#x8BFB;&amp;#x5199;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E86;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EA;&amp;#x4E0D;&amp;#x8FC7;&amp;#x8BE5;&amp;#x6587;&amp;#x4EF6;&amp;#x662F;&amp;#x4F4D;&amp;#x4E8E;Linux&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x64CD;&amp;#x4F5C;&amp;#x7BA1;&amp;#x9053;&amp;#x5C31;&amp;#x662F;&amp;#x4EE5;&amp;#x6587;&amp;#x4EF6;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x64CD;&amp;#x4F5C;Linux&amp;#x5185;&amp;#x5B58;&amp;#x7F13;&amp;#x5B58;&amp;#x533A;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x540C;&amp;#x65F6;&amp;#x7BA1;&amp;#x9053;&amp;#x8FD8;&amp;#x6709;&amp;#x5927;&amp;#x5C0F;&amp;#x9650;&amp;#x5236;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x4E3A;4k,&amp;#x4E00;&amp;#x65E6;&amp;#x5199;&amp;#x5165;&amp;#x7AEF;&amp;#x8D85;&amp;#x8FC7;&amp;#x5927;&amp;#x5C0F;&amp;#x9650;&amp;#x5236;&amp;#xFF0C;&amp;#x7BA1;&amp;#x9053;&amp;#x5C06;&amp;#x4F1A;&amp;#x963B;&amp;#x585E;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&quot;&gt;&lt;a href=&quot;#&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&quot;&gt;&lt;/a&gt;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&lt;/h3&gt;&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x4F5C;&amp;#x7528;&amp;#x4E8E;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x8D44;&amp;#x6E90;&amp;#x4E92;&amp;#x65A5;&amp;#x8BBF;&amp;#x95EE;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;PV&amp;#x4E24;&amp;#x79CD;&amp;#x64CD;&amp;#x4F5C;&amp;#x7B49;&amp;#x5F85;&amp;#x4E0E;&amp;#x53D1;&amp;#x9001;&amp;#x4FE1;&amp;#x53F7;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;P(sv)&amp;#xFF1A;&amp;#x5982;&amp;#x679C;sv&amp;#x7684;&amp;#x503C;&amp;#x5927;&amp;#x4E8E;&amp;#x96F6;&amp;#xFF0C;&amp;#x5C31;&amp;#x7ED9;&amp;#x5B83;&amp;#x51CF;1&amp;#xFF1B;&amp;#x5982;&amp;#x679C;&amp;#x5B83;&amp;#x7684;&amp;#x503C;&amp;#x4E3A;&amp;#x96F6;&amp;#xFF0C;&amp;#x5C31;&amp;#x6302;&amp;#x8D77;&amp;#x8BE5;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x6267;&amp;#x884C;&lt;br&gt;V(sv)&amp;#xFF1A;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#x5176;&amp;#x4ED6;&amp;#x8FDB;&amp;#x7A0B;&amp;#x56E0;&amp;#x7B49;&amp;#x5F85;sv&amp;#x800C;&amp;#x88AB;&amp;#x6302;&amp;#x8D77;&amp;#xFF0C;&amp;#x5C31;&amp;#x8BA9;&amp;#x5B83;&amp;#x6062;&amp;#x590D;&amp;#x8FD0;&amp;#x884C;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x7A0B;&amp;#x56E0;&amp;#x7B49;&amp;#x5F85;sv&amp;#x800C;&amp;#x6302;&amp;#x8D77;&amp;#xFF0C;&amp;#x5C31;&amp;#x7ED9;&amp;#x5B83;&amp;#x52A0;1.&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x89E3;&amp;#x51B3;&amp;#x591A;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5BF9;&amp;#x540C;&amp;#x4E00;&amp;#x8D44;&amp;#x6E90;&amp;#x7684;&amp;#x7ADE;&amp;#x4E89;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x7C7B;&amp;#x4F3C;&amp;#x4E8E;&amp;#x591A;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x9501;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x4FE1;&amp;#x53F7;&quot;&gt;&lt;a href=&quot;#&amp;#x4FE1;&amp;#x53F7;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4FE1;&amp;#x53F7;&quot;&gt;&lt;/a&gt;&amp;#x4FE1;&amp;#x53F7;&lt;/h3&gt;&lt;p&gt;Linux&amp;#x4E2D;&amp;#x5B9A;&amp;#x4E49;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x8F6F;&amp;#x4E2D;&amp;#x65AD;&amp;#xFF0C;&amp;#x6709;64&amp;#x79CD;&amp;#xFF0C;&amp;#x5206;&amp;#x4E3A;&amp;#x53EF;&amp;#x9760;&amp;#x4FE1;&amp;#x53F7;&amp;#x4E0E;&amp;#x4E0D;&amp;#x53EF;&amp;#x9760;&amp;#x4FE1;&amp;#x53F7;&amp;#xFF0C;&amp;#x591A;&amp;#x7528;&amp;#x4E8E;&amp;#x6D88;&amp;#x606F;&amp;#x4F20;&amp;#x9012;&amp;#x4E0E;&amp;#x901A;&amp;#x77E5;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9002;&amp;#x5408;&amp;#x4F20;&amp;#x9012;&amp;#x4FE1;&amp;#x606F;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&quot;&gt;&lt;a href=&quot;#&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&quot;&gt;&lt;/a&gt;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&lt;/h3&gt;&lt;p&gt;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x987E;&amp;#x540D;&amp;#x601D;&amp;#x4E49;&amp;#xFF0C;&amp;#x5141;&amp;#x8BB8;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8BBF;&amp;#x95EE;&amp;#x540C;&amp;#x4E00;&amp;#x5757;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x5B83;&amp;#x4E5F;&amp;#x9700;&amp;#x8981;&amp;#x8FDB;&amp;#x884C;&amp;#x4E24;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x662F;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#xFF0C;&amp;#x53C8;&amp;#x4ECE;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x95F4;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x662F;&amp;#x4E0D;&amp;#x63D0;&amp;#x4F9B;&amp;#x540C;&amp;#x6B65;&amp;#x673A;&amp;#x5236;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x610F;&amp;#x601D;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5728;&amp;#x5176;&amp;#x4E2D;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8FDB;&amp;#x884C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x65F6;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E0D;&amp;#x80FD;&amp;#x653E;&amp;#x5728;&amp;#x53E6;&amp;#x4E00;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8FDB;&amp;#x884C;&amp;#x8BFB;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x89E3;&amp;#x51B3;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x4E00;&amp;#x822C;&amp;#x90FD;&amp;#x4E0E;&amp;#x524D;&amp;#x9762;&amp;#x8BF4;&amp;#x7684;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&amp;#x4E00;&amp;#x8D77;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&quot;&gt;&lt;a href=&quot;#&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&quot;&gt;&lt;/a&gt;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&lt;/h3&gt;&lt;p&gt;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&amp;#x901A;&amp;#x8FC7;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5411;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x53D1;&amp;#x751F;&amp;#x6D88;&amp;#x606F;&amp;#x5757;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x8FDB;&amp;#x884C;&amp;#x901A;&amp;#x4FE1;&amp;#xFF0C;&amp;#x5B83;&amp;#x4E0E;&amp;#x7BA1;&amp;#x9053;&amp;#x975E;&amp;#x5E38;&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x53D1;&amp;#x9001;&amp;#x4E0E;&amp;#x63A5;&amp;#x6536;&amp;#xFF0C;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x4E24;&amp;#x6B21;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0D;&amp;#x540C;&amp;#x70B9;&amp;#x662F;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&amp;#x53EF;&amp;#x4EE5;&amp;#x9632;&amp;#x6B62;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x963B;&amp;#x585E;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&amp;#x7684;&amp;#x63A5;&amp;#x6536;&amp;#x65B9;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x9009;&amp;#x62E9;&amp;#x6027;&amp;#x63A5;&amp;#x6536;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x53D1;&amp;#x9001;&amp;#x7684;&amp;#x6D88;&amp;#x606F;&amp;#x5757;&amp;#x6709;&amp;#x6700;&amp;#x5927;&amp;#x9650;&amp;#x5236;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;socket&quot;&gt;&lt;a href=&quot;#socket&quot; class=&quot;headerlink&quot; title=&quot;socket&quot;&gt;&lt;/a&gt;socket&lt;/h3&gt;&lt;p&gt;Linux&amp;#x4E2D;&amp;#x7684;socket&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;C/S&amp;#x67B6;&amp;#x6784;&amp;#x7684;&amp;#xFF0C;&amp;#x4F20;&amp;#x8F93;&amp;#x6548;&amp;#x7387;&amp;#x4F4E;&amp;#xFF0C;&amp;#x591A;&amp;#x7528;&amp;#x4E8E;&amp;#x8DE8;&amp;#x7F51;&amp;#x7EDC;&amp;#x4E0E;&amp;#x8DE8;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;Android&amp;#x5E95;&amp;#x5C42;&amp;#x4F7F;&amp;#x7528;socket&amp;#x6765;&amp;#x8FDB;&amp;#x884C;init&amp;#x4E0E;zygote&amp;#x7B49;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x5F20;&amp;#x56FE;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x5728;Linux&amp;#x4E2D;&amp;#x4E0D;&amp;#x540C;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/01/21/Binder&amp;#x7EAF;&amp;#x7406;&amp;#x8BBA;&amp;#x5206;&amp;#x6790;/linux_ipc.jpg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x901A;&amp;#x8FC7;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;Linux&amp;#x73B0;&amp;#x6709;&amp;#x7684;&amp;#x51E0;&amp;#x79CD;IPC&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#x90FD;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x9002;&amp;#x5408;Android&amp;#x95F4;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#x7BA1;&amp;#x9053;&amp;#x3001;&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x4E0E;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x62F7;&amp;#x8D1D;&amp;#x4E24;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x6709;&amp;#x7684;&amp;#x8FD8;&amp;#x4F1A;&amp;#x5B58;&amp;#x5728;&amp;#x963B;&amp;#x585E;&amp;#x4E0E;&amp;#x540C;&amp;#x6B65;&amp;#x95EE;&amp;#x9898;&amp;#xFF1B;&amp;#x53E6;&amp;#x5916;&amp;#x7684;&amp;#x4FE1;&amp;#x53F7;&amp;#x3001;&amp;#x4FE1;&amp;#x53F7;&amp;#x91CF;&amp;#x4E0E;socket&amp;#x7531;&amp;#x4E8E;&amp;#x4F7F;&amp;#x7528;&amp;#x573A;&amp;#x666F;&amp;#x7684;&amp;#x539F;&amp;#x56E0;&amp;#xFF0C;&amp;#x90FD;&amp;#x4E0D;&amp;#x9002;&amp;#x5408;&amp;#x7528;&amp;#x4E8E;Android&amp;#x4E2D;&amp;#x5FEB;&amp;#x901F;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;Binder&quot;&gt;&lt;a href=&quot;#Binder&quot; class=&quot;headerlink&quot; title=&quot;Binder&quot;&gt;&lt;/a&gt;Binder&lt;/h2&gt;&lt;p&gt;&amp;#x90A3;&amp;#x4E48;Binder&amp;#x901A;&amp;#x4FE1;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x600E;&amp;#x4E48;&amp;#x6837;&amp;#x7684;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;Binder&amp;#x672C;&amp;#x8EAB;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;C/S&amp;#x67B6;&amp;#x6784;&amp;#x7684;&amp;#xFF0C;&amp;#x5C42;&amp;#x6B21;&amp;#x5206;&amp;#x660E;&amp;#xFF0C;&amp;#x67B6;&amp;#x6784;&amp;#x7A33;&amp;#x5B9A;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;Binder&amp;#x5185;&amp;#x90E8;&amp;#x53EA;&amp;#x9700;&amp;#x4F7F;&amp;#x7528;&amp;#x4E00;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x5C31;&amp;#x80FD;&amp;#x8FBE;&amp;#x5230;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#xFF1B;&amp;#x53E6;&amp;#x5916;Binder&amp;#x8FD8;&amp;#x652F;&amp;#x6301;&amp;#x9274;&amp;#x522B;&amp;#x7528;&amp;#x6237;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;Uid,&amp;#x4E3A;Android&amp;#x63D0;&amp;#x4F9B;&amp;#x8EAB;&amp;#x4EFD;&amp;#x7684;&amp;#x9A8C;&amp;#x8BC1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x6765;&amp;#x901A;&amp;#x8FC7;&amp;#x4E00;&amp;#x5F20;&amp;#x56FE;&amp;#x6765;&amp;#x7B80;&amp;#x5355;&amp;#x770B;&amp;#x4E0B;&amp;#x57FA;&amp;#x4E8E;Binder&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x8FC7;&amp;#x7A0B;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/01/21/Binder&amp;#x7EAF;&amp;#x7406;&amp;#x8BBA;&amp;#x5206;&amp;#x6790;/android_ipc.jpg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;Binder&amp;#x6570;&amp;#x636E;&amp;#x901A;&amp;#x4FE1;&amp;#x6D41;&amp;#x7A0B;&amp;#x662F;&amp;#xFF0C;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x4ECE;client&amp;#x7AEF;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x5728;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E2D;&amp;#x4F1A;&amp;#x63D0;&amp;#x524D;&amp;#x901A;&amp;#x8FC7;mmap&amp;#x65B9;&amp;#x5F0F;&amp;#x5EFA;&amp;#x7ACB;&amp;#x4E0E;server&amp;#x7AEF;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x6620;&amp;#x5C04;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x6620;&amp;#x5C04;server&amp;#x7AEF;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x8BBF;&amp;#x95EE;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E2D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x907F;&amp;#x514D;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;server&amp;#x7AEF;&amp;#xFF0C;&amp;#x63D0;&amp;#x9AD8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x95F4;&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x6574;&amp;#x4E2A;&amp;#x901A;&amp;#x4FE1;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;/dev/binder&amp;#x6253;&amp;#x5F00;binder&amp;#x9A71;&amp;#x52A8;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;mmap&amp;#x5EFA;&amp;#x7ACB;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x6620;&amp;#x5C04;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;ioctl&amp;#x4E0E;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4EA4;&amp;#x4E92;&amp;#xFF0C;&amp;#x8FDB;&amp;#x884C;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x8F93;&lt;/li&gt;
&lt;li&gt;client&amp;#x4F7F;&amp;#x7528;BpBinder&amp;#x7684;transact&amp;#x65B9;&amp;#x6CD5;&amp;#x8FDB;&amp;#x884C;&amp;#x4E8B;&amp;#x52A1;&amp;#x8BF7;&amp;#x6C42;&lt;/li&gt;
&lt;li&gt;server&amp;#x4F7F;&amp;#x7528;BBinder&amp;#x7684;onTransact&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x63A5;&amp;#x6536;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x4E8B;&amp;#x52A1;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;Android&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;Binder&amp;#x6765;&amp;#x8FDB;&amp;#x884C;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x4E0E;&amp;#x83B7;&amp;#x53D6;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E3A;&amp;#x4E86;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x7BA1;&amp;#x7406;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;ServiceManager&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x7EDF;&amp;#x4E00;&amp;#x7BA1;&amp;#x7406;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;ServiceManager&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;server&amp;#x7AEF;&amp;#xFF0C;&amp;#x5185;&amp;#x90E8;&amp;#x5F00;&amp;#x542F;loop&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x4E0D;&amp;#x65AD;&amp;#x63A5;&amp;#x6536;&amp;#x6D88;&amp;#x606F;&amp;#x5C06;&amp;#x6CE8;&amp;#x518C;&amp;#x7684;service&amp;#x4FDD;&amp;#x5B58;&amp;#x5230;&amp;#x6CE8;&amp;#x518C;&amp;#x8868;svclist&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x7EC8;&amp;#x5173;&amp;#x4E8E;Binder&amp;#x7684;&amp;#x6574;&amp;#x4E2A;&amp;#x5927;&amp;#x81F4;&amp;#x6D41;&amp;#x7A0B;&amp;#x5982;&amp;#x4E0B;&amp;#x56FE;&amp;#x6240;&amp;#x793A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2021/01/21/Binder&amp;#x7EAF;&amp;#x7406;&amp;#x8BBA;&amp;#x5206;&amp;#x6790;/binder.jpg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;client&amp;#x4E0E;server&amp;#x4F4D;&amp;#x4E8E;&amp;#x5E94;&amp;#x7528;&amp;#x5C42;&amp;#xFF0C;ServiceManager&amp;#x4F4D;&amp;#x4E8E;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;binder&amp;#x9A71;&amp;#x52A8;&amp;#x4F4D;&amp;#x4E8E;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5F00;&amp;#x53D1;&amp;#x8005;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E0E;&amp;#x5185;&amp;#x6838;&amp;#x7A7A;&amp;#x95F4;&amp;#x662F;&amp;#x900F;&amp;#x660E;&amp;#x7684;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x5173;&amp;#x6CE8;&amp;#x5E94;&amp;#x7528;&amp;#x5C42;client&amp;#x4E0E;server&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x65B9;&amp;#x4FBF;&amp;#x7684;&amp;#x4F7F;&amp;#x7528;Binder&amp;#x7684;&amp;#x901A;&amp;#x4FE1;&amp;#x673A;&amp;#x5236;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x662F;&amp;#x5BF9;Binder&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x7406;&amp;#x8BBA;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x7684;&amp;#x4E00;&amp;#x6BB5;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x6211;&amp;#x5C06;&amp;#x7ED3;&amp;#x5408;&amp;#x6E90;&amp;#x7801;&amp;#x6765;&amp;#x5206;&amp;#x6790;service&amp;#x7684;&amp;#x6CE8;&amp;#x518C;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x63A2;&amp;#x7D22;Binder&amp;#x7684;&amp;#x6574;&amp;#x4E2A;&amp;#x5DE5;&amp;#x4F5C;&amp;#x6D41;&amp;#x7A0B;&amp;#xFF0C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x8BFB;&amp;#x8005;&amp;#x53EF;&amp;#x4EE5;&amp;#x5173;&amp;#x6CE8;&amp;#x4E00;&amp;#x4E0B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;a href=&quot;#&amp;#x63A8;&amp;#x8350;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63A8;&amp;#x8350;&quot;&gt;&lt;/a&gt;&amp;#x63A8;&amp;#x8350;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x7684;&amp;#x4E00;&amp;#x6BB5;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x4F1A;&amp;#x6765;&amp;#x6DF1;&amp;#x5165;&amp;#x8BA4;&amp;#x8BC6;&amp;
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="binder" scheme="https://www.rousetime.com/tags/binder/"/>
    
  </entry>
  
  <entry>
    <title>链表：由浅入深</title>
    <link href="https://www.rousetime.com/2021/01/18/%E9%93%BE%E8%A1%A8%EF%BC%9A%E7%94%B1%E6%B5%85%E5%85%A5%E6%B7%B1/"/>
    <id>https://www.rousetime.com/2021/01/18/链表：由浅入深/</id>
    <published>2021-01-18T13:22:53.000Z</published>
    <updated>2022-12-01T13:29:29.411Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x53C8;&amp;#x5230;&amp;#x4E86;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x4E3B;&amp;#x9898;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0A;&amp;#x6B21;&amp;#x6211;&amp;#x4EEC;&amp;#x804A;&amp;#x5230;&amp;#x4E86;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247485006&amp;amp;idx=1&amp;amp;sn=63a7b03b9fed8824b01c1a00faae1ca1&amp;amp;chksm=e8e0ffdedf9776c8a219154c05474060042f8bac44f355ea0333d5dbbf0d07f24aa1130f08f5&amp;amp;token=1746891284&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x6570;&amp;#x7EC4;&amp;#xFF1A;&amp;#x9762;&amp;#x8BD5;&amp;#x4E2D;&amp;#x7684;&amp;#x7591;&amp;#x96BE;&amp;#x70B9;&lt;/a&gt;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6B21;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x804A;&amp;#x53E6;&amp;#x5916;&amp;#x4E00;&amp;#x79CD;&amp;#x7EBF;&amp;#x6027;&amp;#x7ED3;&amp;#x6784;&amp;#xFF0C;&amp;#x94FE;&amp;#x8868;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x672C;&amp;#x8D28;&quot;&gt;&lt;a href=&quot;#&amp;#x672C;&amp;#x8D28;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x672C;&amp;#x8D28;&quot;&gt;&lt;/a&gt;&amp;#x672C;&amp;#x8D28;&lt;/h2&gt;&lt;p&gt;&amp;#x867D;&amp;#x7136;&amp;#x94FE;&amp;#x8868;&amp;#x4E0E;&amp;#x6570;&amp;#x7EC4;&amp;#x4E00;&amp;#x6837;&amp;#x90FD;&amp;#x662F;&amp;#x7EBF;&amp;#x6027;&amp;#x7ED3;&amp;#x6784;&amp;#xFF0C;&amp;#x4F46;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x8FD8;&amp;#x662F;&amp;#x6709;&amp;#x672C;&amp;#x8D28;&amp;#x7684;&amp;#x533A;&amp;#x522B;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6570;&amp;#x7EC4;&amp;#x5728;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x662F;&amp;#x4E00;&amp;#x5757;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#x533A;&amp;#x57DF;&amp;#xFF0C;&amp;#x800C;&amp;#x94FE;&amp;#x8868;&amp;#x53EF;&amp;#x4EE5;&amp;#x652F;&amp;#x6301;&amp;#x968F;&amp;#x673A;&amp;#x5B58;&amp;#x50A8;&amp;#xFF0C;&amp;#x975E;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#x7A7A;&amp;#x95F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0548abaec6784182ad1076f27bed5e02~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x79CD;&amp;#x7C7B;&amp;#x53EF;&amp;#x4EE5;&amp;#x5206;&amp;#x4E3A;&amp;#xFF0C;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x3001;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x3001;&amp;#x5FAA;&amp;#x73AF;&amp;#x94FE;&amp;#x8868;&amp;#x3001;&amp;#x53CC;&amp;#x5411;&amp;#x5FAA;&amp;#x73AF;&amp;#x94FE;&amp;#x8868;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x672C;&amp;#x8D28;&amp;#x90FD;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x662F;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x8868;&amp;#x73B0;&amp;#x4E0E;&amp;#x5E94;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x662F;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x90FD;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;next&amp;#x540E;&amp;#x7EED;&amp;#x6307;&amp;#x9488;&amp;#xFF0C;&amp;#x5B83;&amp;#x90FD;&amp;#x6307;&amp;#x5411;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4E0B;&amp;#x4E00;&amp;#x4E2A;&amp;#x94FE;&amp;#x8868;&amp;#x8282;&amp;#x70B9;&amp;#xFF1B;&amp;#x5BF9;&amp;#x4E8E;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5C3E;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;&amp;#x662F;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;next&amp;#x4E3A;null&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a962bc00df414d3d85dbc043778a8435~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;br&gt;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x4E0E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x6240;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x5B83;&amp;#x9664;&amp;#x4E86;&amp;#x6709;next&amp;#x6307;&amp;#x9488;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;prev&amp;#x524D;&amp;#x9A71;&amp;#x6307;&amp;#x9488;&amp;#xFF0C;&amp;#x5B83;&amp;#x6307;&amp;#x5411;&amp;#x4E8E;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#xFF1B;&amp;#x7279;&amp;#x6B8A;&amp;#x7684;&amp;#xFF0C;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#x7684;prev&amp;#x4E3A;null&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02a4f83e7adc4dc4abfaabaf14f04277~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5FAA;&amp;#x73AF;&amp;#x94FE;&amp;#x8868;&amp;#x4E0E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x533A;&amp;#x522B;&amp;#x662F;&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x5C06;&amp;#x4E0D;&amp;#x518D;&amp;#x4E3A;null&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x6307;&amp;#x5411;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#x6216;&amp;#x8005;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5176;&amp;#x5B83;&amp;#x4F4D;&amp;#x7F6E;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x53CC;&amp;#x5411;&amp;#x5FAA;&amp;#x73AF;&amp;#x94FE;&amp;#x8868;&amp;#x4E5F;&amp;#x662F;&amp;#x540C;&amp;#x6837;&amp;#x7684;&amp;#x539F;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x63D2;&amp;#x5165;&quot;&gt;&lt;a href=&quot;#&amp;#x63D2;&amp;#x5165;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x63D2;&amp;#x5165;&quot;&gt;&lt;/a&gt;&amp;#x63D2;&amp;#x5165;&lt;/h2&gt;&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x90FD;&amp;#x542C;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E48;&amp;#x4E00;&amp;#x53E5;&amp;#x8BDD;&amp;#xFF0C;&amp;#x94FE;&amp;#x8868;&amp;#x9002;&amp;#x5408;&amp;#x63D2;&amp;#x5165;&amp;#x4E0E;&amp;#x5220;&amp;#x9664;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x7531;&amp;#x4E8E;&amp;#x94FE;&amp;#x8868;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x7ED3;&amp;#x6784;&amp;#x51B3;&amp;#x5B9A;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5411;&amp;#x5DF2;&amp;#x77E5;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x540E;&amp;#x63D2;&amp;#x5165;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B0;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x5B83;&amp;#x6240;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x5C31;&amp;#x662F;&amp;#x5C06;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x65B0;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5C06;&amp;#x65B0;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x6307;&amp;#x5411;&amp;#x6307;&amp;#x5411;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x540E;&amp;#x7EED;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&amp;#x800C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x4EFB;&amp;#x4F55;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x8FC1;&amp;#x79FB;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x6539;&amp;#x53D8;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(1)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da901a2ec51c4e60b70d65ed5a575e9d~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x770B;&amp;#x56FE;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x4F46;&amp;#x771F;&amp;#x6B63;&amp;#x53BB;&amp;#x5B9E;&amp;#x73B0;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x4E0D;&amp;#x4E00;&amp;#x5B9A;&amp;#x90FD;&amp;#x4F1A;&amp;#xFF0C;&amp;#x5C24;&amp;#x5176;&amp;#x662F;&amp;#x9996;&amp;#x6B21;&amp;#x63A5;&amp;#x89E6;&amp;#x5230;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x8BFB;&amp;#x8005;&amp;#x3002;&amp;#x5BB9;&amp;#x6613;&amp;#x72AF;&amp;#x7684;&amp;#x662F;&amp;#x4E0B;&amp;#x9762;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9519;&amp;#x8BEF;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;node.next = newNode&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;newNode.next = node.next&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x72AF;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9519;&amp;#x8BEF;&amp;#x7684;&amp;#x672C;&amp;#x8D28;&amp;#x7EDD;&amp;#x5927;&amp;#x591A;&amp;#x6570;&amp;#x8FD8;&amp;#x662F;&amp;#x5BF9;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x7406;&amp;#x89E3;&amp;#x4E0D;&amp;#x5230;&amp;#x4F4D;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x8BB0;&amp;#x4F4F;&amp;#x4E00;&amp;#x70B9;&amp;#xFF0C;&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x662F;&amp;#x8282;&amp;#x70B9;&amp;#x5728;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x3002;&amp;#x6539;&amp;#x53D8;&amp;#x6307;&amp;#x9488;&amp;#x5C31;&amp;#x662F;&amp;#x6539;&amp;#x53D8;&amp;#x6307;&amp;#x5411;&amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6B63;&amp;#x786E;&amp;#x7684;&amp;#x505A;&amp;#x6CD5;&amp;#x662F;&amp;#x4E0B;&amp;#x9762;&amp;#x8FD9;&amp;#x79CD;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;newNode.next = node.next&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node.next = newNode&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x7136;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x675C;&amp;#x7EDD;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x5C31;&amp;#x662F;&amp;#x591A;&amp;#x7EC3;&amp;#xFF0C;&amp;#x5199;&amp;#x591A;&amp;#x4E86;&amp;#x81EA;&amp;#x7136;&amp;#x5C31;&amp;#x4F1A;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x8C13;&amp;#x4E66;&amp;#x8BFB;&amp;#x767E;&amp;#x904D;&amp;#x5176;&amp;#x4E49;&amp;#x81EA;&amp;#x89C1;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x5C31;&amp;#x662F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x9053;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD8;&amp;#x6709;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;&amp;#x4E00;&amp;#x4E2A;&amp;#x524D;&amp;#x63D0;&amp;#x7684;&amp;#xFF1A;&amp;#x5DF2;&amp;#x7ECF;&amp;#x627E;&amp;#x5230;&amp;#x4E86;&amp;#x63D2;&amp;#x5165;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#x3002;&amp;#x800C;&amp;#x67E5;&amp;#x627E;&amp;#x5F53;&amp;#x524D;&amp;#x63D2;&amp;#x5165;&amp;#x70B9;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;&amp;#x904D;&amp;#x5386;&amp;#x6574;&amp;#x4E2A;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x94FE;&amp;#x8868;&amp;#x4E2D;&amp;#x67E5;&amp;#x627E;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(n)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x80FD;&amp;#x6709;&amp;#x7684;&amp;#x8BFB;&amp;#x8005;&amp;#x4E00;&amp;#x76F4;&amp;#x90FD;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x7591;&amp;#x95EE;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x6709;&amp;#x4E86;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x8FD8;&amp;#x6709;&amp;#x51FA;&amp;#x6765;&amp;#x4E00;&amp;#x4E2A;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x4F60;&amp;#x770B;&amp;#x8FD9;&amp;#x63D2;&amp;#x5165;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x4E5F;&amp;#x662F;&amp;#x4E0E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x90FD;&amp;#x4E3A;O(1)&amp;#xFF0C;&amp;#x800C;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x7531;&amp;#x4E8E;&amp;#x5B83;&amp;#x6BCF;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x90FD;&amp;#x989D;&amp;#x5916;&amp;#x9700;&amp;#x8981;prev&amp;#x524D;&amp;#x9A71;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x5BFC;&amp;#x81F4;&amp;#x5B83;&amp;#x66F4;&amp;#x52A0;&amp;#x6D6A;&amp;#x8D39;&amp;#x5185;&amp;#x5B58;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x8FD9;&amp;#x7C7B;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C06;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x63D2;&amp;#x5165;&amp;#x4F4D;&amp;#x7F6E;&amp;#x505A;&amp;#x4E00;&amp;#x4E0B;&amp;#x8C03;&amp;#x6574;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5DF2;&amp;#x77E5;&amp;#x4E86;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x9700;&amp;#x8981;&amp;#x5C06;&amp;#x65B0;&amp;#x8282;&amp;#x70B9;&amp;#x63D2;&amp;#x5165;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x524D;&amp;#x9762;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;&amp;#x53EA;&amp;#x6709;next&amp;#x6307;&amp;#x9488;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x53EA;&amp;#x80FD;&amp;#x91CD;&amp;#x65B0;&amp;#x904D;&amp;#x5386;&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x627E;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x4E0A;&amp;#x4E00;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x91CD;&amp;#x590D;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8F6C;&amp;#x79FB;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6B65;&amp;#x9AA4;&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(n)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x7531;&amp;#x4E8E;&amp;#x5B83;&amp;#x8FD8;&amp;#x6709;prev&amp;#x6267;&amp;#x884C;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x6539;&amp;#x53D8;prev&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#xFF0C;&amp;#x6765;&amp;#x5C06;&amp;#x65B0;&amp;#x8282;&amp;#x70B9;&amp;#x63D2;&amp;#x5165;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x524D;&amp;#x9762;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(1)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4482a1cecb5d43e0b45eaf5e2fb4138b~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6B63;&amp;#x662F;&amp;#x7531;&amp;#x4E8E;&amp;#x8FD9;&amp;#x7279;&amp;#x6027;&amp;#xFF0C;&amp;#x5728;&amp;#x5B9E;&amp;#x9645;&amp;#x8FD0;&amp;#x7528;&amp;#x4E2D;&amp;#xFF0C;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x6BD4;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x66F4;&amp;#x52A0;&amp;#x666E;&amp;#x904D;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x6211;&amp;#x4EEC;&amp;#x6240;&amp;#x719F;&amp;#x6089;&amp;#x7684;LinkedList&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private static class Node&amp;lt;E&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    E item;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Node&amp;lt;E&amp;gt; next;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Node&amp;lt;E&amp;gt; prev;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Node(Node&amp;lt;E&amp;gt; prev, E element, Node&amp;lt;E&amp;gt; next) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.item = element;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.next = next;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.prev = prev;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;&amp;#x5220;&amp;#x9664;&quot;&gt;&lt;a href=&quot;#&amp;#x5220;&amp;#x9664;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5220;&amp;#x9664;&quot;&gt;&lt;/a&gt;&amp;#x5220;&amp;#x9664;&lt;/h2&gt;&lt;p&gt;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5220;&amp;#x9664;&amp;#x4E0E;&amp;#x63D2;&amp;#x5165;&amp;#x539F;&amp;#x7406;&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;&amp;#x6539;&amp;#x53D8;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5220;&amp;#x9664;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x540E;&amp;#x7EED;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x5C06;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x540E;&amp;#x7EED;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x540E;&amp;#x7EED;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&amp;#x6587;&amp;#x5B57;&amp;#x6709;&amp;#x70B9;&amp;#x7ED5;&amp;#xFF0C;&amp;#x8FD8;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x770B;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;node.next = node.next.next&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x9664;&amp;#x4E86;&amp;#x6539;&amp;#x53D8;next&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x8FD8;&amp;#x8981;&amp;#x6539;&amp;#x53D8;next&amp;#x6307;&amp;#x5411;&amp;#x7684;prev&amp;#x8282;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;node.next = node.next.next&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node.next.prev = node&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x90FD;&amp;#x4E3A;O(1)&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x7684;&amp;#x5220;&amp;#x9664;&amp;#x8282;&amp;#x70B9;&amp;#x4E3A;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x524D;&amp;#x9A71;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E0E;&amp;#x63D2;&amp;#x5165;&amp;#x539F;&amp;#x7406;&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x505A;&amp;#x8BE6;&amp;#x7EC6;&amp;#x5206;&amp;#x6790;&amp;#x3002;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(n)&amp;#xFF0C;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(1)&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x6CE8;&amp;#x610F;&amp;#x70B9;&quot;&gt;&lt;a href=&quot;#&amp;#x6CE8;&amp;#x610F;&amp;#x70B9;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6CE8;&amp;#x610F;&amp;#x70B9;&quot;&gt;&lt;/a&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x70B9;&lt;/h2&gt;&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5BF9;&amp;#x94FE;&amp;#x8868;&amp;#x6709;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x8F83;&amp;#x5168;&amp;#x9762;&amp;#x7684;&amp;#x4E86;&amp;#x89E3;&amp;#x3002;&amp;#x4F46;&amp;#x5F00;&amp;#x59CB;&amp;#x4E0A;&amp;#x624B;&amp;#x5199;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x8FD8;&amp;#x662F;&amp;#x4F1A;&amp;#x5F88;&amp;#x5BB9;&amp;#x6613;&amp;#x72AF;&amp;#x9519;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x7ED3;&amp;#x5408;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x4E00;&amp;#x70B9;&amp;#x5FAE;&amp;#x8584;&amp;#x7684;&amp;#x7ECF;&amp;#x9A8C;&amp;#x8FD8;&amp;#x5BF9;&amp;#x5BB9;&amp;#x6613;&amp;#x72AF;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#x505A;&amp;#x4E00;&amp;#x4E2A;&amp;#x603B;&amp;#x7ED3;&amp;#xFF0C;&amp;#x5E76;&amp;#x5BF9;&amp;#x5176;&amp;#x63D0;&amp;#x51FA;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;a href=&quot;#&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x95EE;&amp;#x9898;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;/a&gt;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x95EE;&amp;#x9898;&lt;/h3&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x662F;&amp;#x5199;&amp;#x94FE;&amp;#x8868;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x9519;&amp;#x4E71;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x9047;&amp;#x5230;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x63D2;&amp;#x5165;&amp;#x5220;&amp;#x9664;&amp;#xFF0C;&amp;#x6B65;&amp;#x9AA4;&amp;#x4E0D;&amp;#x662F;&amp;#x5F88;&amp;#x9891;&amp;#x7E41;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x76F8;&amp;#x4FE1;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x80FD;&amp;#x591F;&amp;#x5F88;&amp;#x5BB9;&amp;#x6613;&amp;#x7684;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&amp;#x4E00;&amp;#x65E6;&amp;#x6D89;&amp;#x53CA;&amp;#x5230;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x9891;&amp;#x7E41;&amp;#x6539;&amp;#x53D8;&amp;#xFF0C;&amp;#x4EA6;&amp;#x6216;&amp;#x8005;&amp;#x662F;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;(&amp;#x518D;&amp;#x52A0;&amp;#x4E00;&amp;#x4E2A;&amp;#x524D;&amp;#x9A71;&amp;#x6307;&amp;#x9488;)&amp;#xFF0C;&amp;#x8FD9;&amp;#x65F6;&amp;#x72AF;&amp;#x9519;&amp;#x7387;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x7EBF;&amp;#x63D0;&amp;#x5347;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x8FD9;&amp;#x79CD;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x6211;&amp;#x7ED9;&amp;#x51FA;&amp;#x7684;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x653E;&amp;#x4E0B;&amp;#x5FC3;&amp;#x6765;&amp;#x4ED4;&amp;#x7EC6;&amp;#x601D;&amp;#x8003;&amp;#xFF0C;&amp;#x7406;&amp;#x6E05;&amp;#x6574;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x518D;&amp;#x52A8;&amp;#x624B;&amp;#x5199;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x501F;&amp;#x52A9;&amp;#x8F85;&amp;#x52A9;&amp;#x5DE5;&amp;#x5177;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x505C;&amp;#x4E0B;&amp;#x624B;&amp;#x6765;&amp;#xFF0C;&amp;#x627E;&amp;#x53EA;&amp;#x7B14;&amp;#x627E;&amp;#x5F20;&amp;#x7EB8;&amp;#xFF0C;&amp;#x628A;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x753B;&amp;#x51FA;&amp;#x6765;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5728;&amp;#x753B;&amp;#x5B83;&amp;#x4EEC;&amp;#x95F4;&amp;#x7684;&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x7B80;&amp;#x5355;&amp;#x7C97;&amp;#x66B4;&amp;#xFF0C;&amp;#x591A;&amp;#x770B;&amp;#x591A;&amp;#x7EC3;&amp;#x3002;&amp;#x57FA;&amp;#x672C;&amp;#x4E0A;&amp;#x505A;&amp;#x4E2A;&amp;#x6BCF;&amp;#x5929;&amp;#x505A;&amp;#x4E2A;&amp;#x4E00;&amp;#x4E24;&amp;#x9053;&amp;#xFF0C;&amp;#x575A;&amp;#x6301;&amp;#x4E00;&amp;#x661F;&amp;#x671F;&amp;#x57FA;&amp;#x672C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;a href=&quot;#&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;/a&gt;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&lt;/h3&gt;&lt;p&gt;&amp;#x5728;&amp;#x5199;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x5C31;&amp;#x662F;&amp;#x5BF9;&amp;#x8FB9;&amp;#x754C;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x80FD;&amp;#x662F;&amp;#x5FD8;&amp;#x4E86;&amp;#x5BF9;&amp;#x8FB9;&amp;#x754C;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#xFF1B;&amp;#x4E5F;&amp;#x53EF;&amp;#x80FD;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x5904;&amp;#x7406;&amp;#x9519;&amp;#x8BEF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x8FB9;&amp;#x754C;&amp;#x5C31;&amp;#x662F;&amp;#x5B83;&amp;#x7684;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#x4E0E;&amp;#x5C3E;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x7279;&amp;#x6B8A;&amp;#x6027;&amp;#xFF0C;&amp;#x9488;&amp;#x5BF9;&amp;#x5B83;&amp;#x4EEC;&amp;#x7684;&amp;#x63D2;&amp;#x5165;&amp;#x4E0E;&amp;#x5220;&amp;#x9664;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4E0E;&amp;#x522B;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x989D;&amp;#x5916;&amp;#x8FDB;&amp;#x884C;&amp;#x7279;&amp;#x6B8A;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x8FD9;&amp;#x79CD;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#xFF0C;&amp;#x5199;&amp;#x5B8C;&amp;#x94FE;&amp;#x8868;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x65F6;&amp;#x523B;&amp;#x90FD;&amp;#x8981;&amp;#x63D0;&amp;#x9192;&amp;#x81EA;&amp;#x5DF1;&amp;#x662F;&amp;#x5426;&amp;#x5BF9;&amp;#x8FB9;&amp;#x754C;&amp;#x505A;&amp;#x4E86;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x505A;&amp;#x4E86;&amp;#x4E5F;&amp;#x8981;&amp;#x505C;&amp;#x4E0B;&amp;#x6765;&amp;#x601D;&amp;#x8003;&amp;#x4E00;&amp;#x904D;&amp;#x662F;&amp;#x5426;&amp;#x5904;&amp;#x7406;&amp;#x6B63;&amp;#x786E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x80FD;&amp;#x5F88;&amp;#x597D;&amp;#x7684;&amp;#x4FDD;&amp;#x8BC1;&amp;#x8FB9;&amp;#x754C;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x6B63;&amp;#x786E;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5343;&amp;#x4E07;&amp;#x4E0D;&amp;#x8981;&amp;#x5077;&amp;#x61D2;&amp;#xFF0C;&amp;#x522B;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&amp;#x5BFC;&amp;#x81F4;&amp;#x5728;&amp;#x9762;&amp;#x8BD5;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;&amp;#x8BC4;&amp;#x5206;&amp;#x6253;&amp;#x6298;&amp;#x6263;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD9;&amp;#x80FD;&amp;#x4ECE;&amp;#x4FA7;&amp;#x9762;&amp;#x4F53;&amp;#x73B0;&amp;#x4E00;&amp;#x4E2A;&amp;#x4EBA;&amp;#x7684;&amp;#x601D;&amp;#x7EF4;&amp;#x7684;&amp;#x5168;&amp;#x9762;&amp;#x4E0E;&amp;#x7F1C;&amp;#x5BC6;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x54E8;&amp;#x5175;&amp;#x4F18;&amp;#x5316;&quot;&gt;&lt;a href=&quot;#&amp;#x54E8;&amp;#x5175;&amp;#x4F18;&amp;#x5316;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x54E8;&amp;#x5175;&amp;#x4F18;&amp;#x5316;&quot;&gt;&lt;/a&gt;&amp;#x54E8;&amp;#x5175;&amp;#x4F18;&amp;#x5316;&lt;/h3&gt;&lt;p&gt;&amp;#x9488;&amp;#x5BF9;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x6709;&amp;#x6CA1;&amp;#x6709;&amp;#x4EE3;&amp;#x7801;&amp;#x4E0A;&amp;#x7684;&amp;#x4F18;&amp;#x5316;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x8981;&amp;#x8BF4;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x54E8;&amp;#x5175;&amp;#x4F18;&amp;#x5316;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x8C13;&amp;#x7684;&amp;#x54E8;&amp;#x5175;&amp;#xFF0C;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x5C31;&amp;#x662F;&amp;#x56FA;&amp;#x5B9A;&amp;#x4E00;&amp;#x4E2A;&amp;#x6807;&amp;#x8BC6;&amp;#xFF0C;&amp;#x8BA9;&amp;#x5B83;&amp;#x50CF;&amp;#x8FB9;&amp;#x754C;&amp;#x7684;&amp;#x58EB;&amp;#x5175;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x4E00;&amp;#x76F4;&amp;#x5C79;&amp;#x7ACB;&amp;#x5728;&amp;#x4ED6;&amp;#x7684;&amp;#x8FB9;&amp;#x754C;&amp;#x5C97;&amp;#x4F4D;&amp;#xFF0C;&amp;#x5B88;&amp;#x536B;&amp;#x56FD;&amp;#x571F;&amp;#x7684;&amp;#x5B89;&amp;#x5168;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x62FF;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x53CC;&amp;#x5411;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5220;&amp;#x9664;&amp;#x6765;&amp;#x8BF4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x975E;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x5220;&amp;#x9664;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x627E;&amp;#x5230;&amp;#x5F53;&amp;#x524D;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6539;&amp;#x53D8;&amp;#x5B83;&amp;#x524D;&amp;#x540E;&amp;#x8282;&amp;#x70B9;&amp;#x7684;next&amp;#x4E0E;prev&amp;#x6307;&amp;#x9488;&amp;#x7684;&amp;#x6307;&amp;#x5411;&amp;#x5373;&amp;#x53EF;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;node.prev.next = node.next&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node.next.prev = node.prev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5982;&amp;#x679C;&amp;#x5F53;&amp;#x524D;&amp;#x8282;&amp;#x70B9;&amp;#x662F;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5C31;&amp;#x4E0D;&amp;#x80FD;&amp;#x8FD0;&amp;#x884C;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&amp;#x7684;prev&amp;#x8282;&amp;#x70B9;&amp;#x4E3A;null&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5E38;&amp;#x89C4;&amp;#x7684;&amp;#x505A;&amp;#x6CD5;&amp;#x662F;&amp;#x505A;&amp;#x7279;&amp;#x6B8A;&amp;#x5224;&amp;#x65AD;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;if (node == head) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    node.next.prev = null&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x662F;&amp;#x8FB9;&amp;#x754C;&amp;#x95EE;&amp;#x9898;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x8BB0;&amp;#x5F97;&amp;#x5904;&amp;#x7406;&amp;#x90A3;&amp;#x8FD8;&amp;#x597D;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;&amp;#x5FD8;&amp;#x4E86;&amp;#x5C31;&amp;#x5BFC;&amp;#x81F4;&amp;#x5F02;&amp;#x5E38;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;&amp;#x54E8;&amp;#x5175;&amp;#x5C31;&amp;#x80FD;&amp;#x591F;&amp;#x5B8C;&amp;#x5168;&amp;#x89C4;&amp;#x907F;&amp;#x8FB9;&amp;#x754C;&amp;#x7684;&amp;#x5224;&amp;#x65AD;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x5177;&amp;#x4F53;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x5EFA;&amp;#x7ACB;&amp;#x54E8;&amp;#x5175;&amp;#xFF0C;&amp;#x65B0;&amp;#x5EFA;#&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x5E76;&amp;#x5C06;&amp;#x5176;next&amp;#x6307;&amp;#x9488;&amp;#x6307;&amp;#x5411;&amp;#x5934;&amp;#x8282;&amp;#x70B9;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val guard = LinkedNode(&amp;quot;#&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;val newLinked = guard.next = head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;head.prev = guard&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8282;&amp;#x70B9;&amp;#x5220;&amp;#x9664;(&amp;#x5305;&amp;#x62EC;&amp;#x5934;&amp;#x8282;&amp;#x70B9;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node.prev.next = node.next&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node.next.prev = node.prev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8FD4;&amp;#x56DE;&amp;#x5220;&amp;#x9664;&amp;#x540E;&amp;#x7684;&amp;#x94FE;&amp;#x8868;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;return newLinked.next&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9ca891b56cc4db6a7e9e201d7a21584~tplv-k3u1fbpfcp-watermark.image&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7ECF;&amp;#x5178;&amp;#x5B9E;&amp;#x4F8B;&quot;&gt;&lt;a href=&quot;#&amp;#x7ECF;&amp;#x5178;&amp;#x5B9E;&amp;#x4F8B;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7ECF;&amp;#x5178;&amp;#x5B9E;&amp;#x4F8B;&quot;&gt;&lt;/a&gt;&amp;#x7ECF;&amp;#x5178;&amp;#x5B9E;&amp;#x4F8B;&lt;/h2&gt;&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x4E00;&amp;#x4E9B;&amp;#x5173;&amp;#x4E8E;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x7ECF;&amp;#x5178;&amp;#x7684;&amp;#x5B9E;&amp;#x4F8B;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5BF9;&amp;#x94FE;&amp;#x8868;&amp;#x8FD8;&amp;#x4E0D;&amp;#x719F;&amp;#x6089;&amp;#x7684;&amp;#x63A8;&amp;#x8350;&amp;#x4EB2;&amp;#x81EA;&amp;#x53BB;&amp;#x5199;&amp;#x4E00;&amp;#x904D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5199;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#x4F60;&amp;#x5C06;&amp;#x5BF9;&amp;#x94FE;&amp;#x8868;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x5168;&amp;#x65B0;&amp;#x7684;&amp;#x8BA4;&amp;#x8BC6;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x73AF;&amp;#x7684;&amp;#x68C0;&amp;#x6D4B;&lt;/li&gt;
&lt;li&gt;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x53CD;&amp;#x8F6C;&lt;/li&gt;
&lt;li&gt;&amp;#x5220;&amp;#x9664;&amp;#x94FE;&amp;#x8868;&amp;#x5012;&amp;#x6570;&amp;#x7B2C;n&amp;#x4E2A;&amp;#x7ED3;&amp;#x70B9;&lt;/li&gt;
&lt;li&gt;LRU&lt;/li&gt;
&lt;li&gt;&amp;#x6C42;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x4E2D;&amp;#x95F4;&amp;#x7ED3;&amp;#x70B9;&lt;/li&gt;
&lt;li&gt;&amp;#x4E24;&amp;#x4E2A;&amp;#x6709;&amp;#x5E8F;&amp;#x94FE;&amp;#x8868;&amp;#x7684;&amp;#x5408;&amp;#x5E76;&lt;/li&gt;
&lt;li&gt;&amp;#x5355;&amp;#x94FE;&amp;#x8868;&amp;#x5224;&amp;#x65AD;&amp;#x56DE;&amp;#x6587;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6211;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E5F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5168;&amp;#x90E8;&amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;kotlin&amp;#x4E0E;java&amp;#x90FD;&amp;#x6709;&amp;#xFF0C;&amp;#x5E0C;&amp;#x671B;&amp;#x5BF9;&amp;#x4F60;&amp;#x6709;&amp;#x6240;&amp;#x5E2E;&amp;#x52A9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x53C8;&amp;#x5230;&amp;#x4E86;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x4E3B;&amp;#x9898;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0A;&amp;#x6B21;&amp;#x6211;&amp;#x4EEC;&amp;#x804A;&amp;
    
    </summary>
    
      <category term="算法" scheme="https://www.rousetime.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="链表" scheme="https://www.rousetime.com/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>ActivityManagerService 启动初探</title>
    <link href="https://www.rousetime.com/2021/01/08/ActivityManagerService-%E5%90%AF%E5%8A%A8%E5%88%9D%E6%8E%A2/"/>
    <id>https://www.rousetime.com/2021/01/08/ActivityManagerService-启动初探/</id>
    <published>2021-01-08T13:09:30.000Z</published>
    <updated>2022-12-01T13:16:00.298Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484991&amp;amp;idx=1&amp;amp;sn=7a4701c30ade3569c75591a12644c4f3&amp;amp;chksm=e8e0ffafdf9776b9a00e9b912a47578622379e667e45a16f5d814b638e8ab04786e38403542b&amp;amp;token=694410729&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android SystemServer&amp;#x542F;&amp;#x52A8;(&amp;#x4E8C;)&lt;/a&gt;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5206;&amp;#x6790;&amp;#x5230;&amp;#x5728;SystemServer&amp;#x4E2D;&amp;#x4F1A;&amp;#x542F;&amp;#x52A8;&amp;#x5927;&amp;#x91CF;&amp;#x7684;Service&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x5C31;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x7279;&amp;#x6B8A;&amp;#x7684;Service&amp;#xFF0C;&amp;#x5B83;&amp;#x5C31;&amp;#x662F;ActivityManagerService&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;ActivityManageerService&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x90FD;&amp;#x5C06;&amp;#x5176;&amp;#x7B80;&amp;#x79F0;&amp;#x4E3A;AMS&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x542F;&amp;#x52A8;AMS&quot;&gt;&lt;a href=&quot;#&amp;#x542F;&amp;#x52A8;AMS&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x542F;&amp;#x52A8;AMS&quot;&gt;&lt;/a&gt;&amp;#x542F;&amp;#x52A8;AMS&lt;/h2&gt;&lt;p&gt;AMS&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x53D1;&amp;#x751F;&amp;#x5728;SystemServer&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;BootPhase 0&amp;#x9636;&amp;#x6BB5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4E09;&amp;#x5927;&amp;#x5206;&amp;#x7C7B;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x670D;&amp;#x52A1;&amp;#x4E2D;&amp;#xFF0C;&amp;#x5373;startBootstrapServices&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startBootstrapServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ActivityTaskManagerService atm = mSystemServiceManager.startService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ActivityTaskManagerService.Lifecycle.class).getService();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService = ActivityManagerService.Lifecycle.startService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mSystemServiceManager, atm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setSystemServiceManager(mSystemServiceManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setInstaller(installer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mWindowManagerGlobalLock = atm.getGlobalLock();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;AMS&amp;#x7684;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;AMS&amp;#x7684;&amp;#x5185;&amp;#x90E8;&amp;#x7C7B;Lifecycle&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x8C03;&amp;#x7528;Lifecycle.onStart()&amp;#x6765;&amp;#x542F;&amp;#x52A8;AMS&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public static final class Lifecycle extends SystemService {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private final ActivityManagerService mService;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private static ActivityTaskManagerService sAtm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public Lifecycle(Context context) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mService = new ActivityManagerService(context, sAtm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static ActivityManagerService startService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SystemServiceManager ssm, ActivityTaskManagerService atm) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sAtm = atm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return ssm.startService(ActivityManagerService.Lifecycle.class).getService();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void onStart() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mService.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Lifecycle&amp;#x7EE7;&amp;#x627F;&amp;#x4E8E;SystemService&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;ssm&amp;#x5373;SystemServiceManager&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x8FD9;&amp;#x4E2A;Service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5185;&amp;#x90E8;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&amp;#x53CD;&amp;#x5C04;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;Lifecycle&amp;#x5B9E;&amp;#x4F8B;&amp;#xFF0C;&amp;#x800C;&amp;#x5728;Lifecycle&amp;#x5B9E;&amp;#x4F8B;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x4F1A;&amp;#x521B;&amp;#x5EFA;AMS&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;AMS&amp;#x5B9E;&amp;#x4F8B;&amp;#x5316;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x505A;&amp;#x4E86;&amp;#x4EC0;&amp;#x4E48;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public ActivityManagerService(Context systemContext, ActivityTaskManagerService atm) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	// &amp;#x521B;&amp;#x5EFA;&amp;#x540D;&amp;#x4E3A;ActivityManager&amp;#x7684;&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5E76;&amp;#x521B;&amp;#x5EFA;MainHandler &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	// &amp;#x5904;&amp;#x7406;&amp;#x5404;&amp;#x79CD;&amp;#x72B6;&amp;#x6001;&amp;#x4FE1;&amp;#x606F;&amp;#x7684;&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF08;GC&amp;#x3001;service_timeout&amp;#x3001;update_time_zone&amp;#x3001;kill_application&amp;#x3001;kill_zygote&amp;#xFF09;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mHandlerThread = new ServiceThread(TAG,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            THREAD_PRIORITY_FOREGROUND, false /*allowIo*/);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mHandlerThread.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mHandler = new MainHandler(mHandlerThread.getLooper());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6;UiHandler&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mUiHandler = mInjector.getUiHandler(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521B;&amp;#x5EFA;&amp;#x4E0E;&amp;#x542F;&amp;#x52A8;proc&amp;#x7EBF;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcStartHandlerThread = new ServiceThread(TAG + &amp;quot;:procStart&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            THREAD_PRIORITY_FOREGROUND, false /* allowIo */);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcStartHandlerThread.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcStartHandler = new Handler(mProcStartHandlerThread.getLooper());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E9B;&amp;#x5E38;&amp;#x91CF;&amp;#xFF0C;&amp;#x7BA1;&amp;#x7406;ActivityManager&amp;#x7684;&amp;#x884C;&amp;#x4E3A;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mConstants = new ActivityManagerConstants(mContext, this, mHandler);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FFD;&amp;#x8E2A;&amp;#x6D3B;&amp;#x8DC3;&amp;#x7684;uid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final ActiveUids activeUids = new ActiveUids(this, true /* postChangesToAtm */);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcessList.init(this, activeUids);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x4F4E;&amp;#x5185;&amp;#x5B58;&amp;#x63A2;&amp;#x6D4B;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mLowMemDetector = new LowMemDetector(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOomAdjuster = new OomAdjuster(this, mProcessList, activeUids);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x524D;&amp;#x53F0;&amp;#x5E7F;&amp;#x64AD;&amp;#x63A5;&amp;#x6536;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final BroadcastConstants foreConstants = new BroadcastConstants(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Settings.Global.BROADCAST_FG_CONSTANTS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    foreConstants.TIMEOUT = BROADCAST_FG_TIMEOUT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x540E;&amp;#x53F0;&amp;#x5E7F;&amp;#x64AD;&amp;#x63A5;&amp;#x6536;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final BroadcastConstants backConstants = new BroadcastConstants(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Settings.Global.BROADCAST_BG_CONSTANTS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    backConstants.TIMEOUT = BROADCAST_BG_TIMEOUT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5378;&amp;#x8F7D;&amp;#x5E7F;&amp;#x64AD;&amp;#x63A5;&amp;#x6536;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final BroadcastConstants offloadConstants = new BroadcastConstants(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Settings.Global.BROADCAST_OFFLOAD_CONSTANTS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    offloadConstants.TIMEOUT = BROADCAST_BG_TIMEOUT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    offloadConstants.SLOW_TIME = Integer.MAX_VALUE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mEnableOffloadQueue = SystemProperties.getBoolean(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;persist.device_config.activity_manager_native_boot.offload_queue_enabled&amp;quot;, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mFgBroadcastQueue = new BroadcastQueue(this, mHandler,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;foreground&amp;quot;, foreConstants, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBgBroadcastQueue = new BroadcastQueue(this, mHandler,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;background&amp;quot;, backConstants, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOffloadBroadcastQueue = new BroadcastQueue(this, mHandler,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;offload&amp;quot;, offloadConstants, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBroadcastQueues[0] = mFgBroadcastQueue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBroadcastQueues[1] = mBgBroadcastQueue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBroadcastQueues[2] = mOffloadBroadcastQueue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mServices = new ActiveServices(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProviderMap = new ProviderMap(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mPackageWatchdog = PackageWatchdog.getInstance(mUiContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mAppErrors = new AppErrors(mUiContext, this, mPackageWatchdog);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final File systemDir = SystemServiceManager.ensureSystemDir();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x7535;&amp;#x6C60;&amp;#x72B6;&amp;#x6001;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService = new BatteryStatsService(systemContext, systemDir,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            BackgroundThread.get().getHandler());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.getActiveStatistics().readLocked();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.scheduleWriteToDisk();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOnBattery = DEBUG_POWER ? true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            : mBatteryStatsService.getActiveStatistics().getIsOnBattery();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.getActiveStatistics().setCallback(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOomAdjProfiler.batteryPowerChanged(mOnBattery);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FDB;&amp;#x7A0B;&amp;#x72B6;&amp;#x6001;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcessStats = new ProcessStatsService(this, new File(systemDir, &amp;quot;procstats&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mAppOpsService = mInjector.getAppOpsService(new File(systemDir, &amp;quot;appops.xml&amp;quot;), mHandler);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityTaskManager = atm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityTaskManager.initialize(mIntentFirewall, mPendingIntentController,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            DisplayThread.get().getLooper());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mAtmInternal = LocalServices.getService(ActivityTaskManagerInternal.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FDB;&amp;#x7A0B;cpu&amp;#x7EDF;&amp;#x8BA1;&amp;#x7EBF;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcessCpuThread = new Thread(&amp;quot;CpuTracker&amp;quot;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        public void run() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            synchronized (mProcessCpuTracker) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mProcessCpuInitLatch.countDown();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mProcessCpuTracker.init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            while (true) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        synchronized(this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            final long now = SystemClock.uptimeMillis();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            long nextCpuDelay = (mLastCpuTime.get()+MONITOR_CPU_MAX_TIME)-now;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            long nextWriteDelay = (mLastWriteTime+BATTERY_STATS_TIME)-now;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            //Slog.i(TAG, &amp;quot;Cpu delay=&amp;quot; + nextCpuDelay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            //        + &amp;quot;, write delay=&amp;quot; + nextWriteDelay);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            if (nextWriteDelay &amp;lt; nextCpuDelay) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                nextCpuDelay = nextWriteDelay;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            if (nextCpuDelay &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                mProcessCpuMutexFree.set(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                this.wait(nextCpuDelay);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    } catch (InterruptedException e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x66F4;&amp;#x65B0;cpu&amp;#x7684;&amp;#x4FE1;&amp;#x606F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    updateCpuStatsNow();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } catch (Exception e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    Slog.e(TAG, &amp;quot;Unexpected exception collecting process stats&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x662F;&amp;#x521B;&amp;#x5EFA;ActivityManager&amp;#x3001;proc&amp;#x4E0E;CpuTracker&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF1B;&amp;#x540C;&amp;#x65F6;&amp;#x521B;&amp;#x5EFA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5E7F;&amp;#x64AD;&amp;#x63A5;&amp;#x6536;&amp;#x5668;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x5B8C;AMS&amp;#x5B9E;&amp;#x4F8B;&amp;#x4E4B;&amp;#x540E;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;start()&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x542F;&amp;#x52A8;AMS&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void start() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	// &amp;#x79FB;&amp;#x9664;&amp;#x6240;&amp;#x6709;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7EC4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    removeAllProcessGroups();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5F00;&amp;#x542F;&amp;#x8FDB;&amp;#x7A0B;cpu&amp;#x7EDF;&amp;#x8BA1;&amp;#x7EBF;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mProcessCpuThread.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;&amp;#x7535;&amp;#x6C60;&amp;#x7EDF;&amp;#x8BA1;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.publish();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mAppOpsService.publish(mContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x672C;&amp;#x5730;LocalServices&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LocalServices.addService(ActivityManagerInternal.class, new LocalService());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityTaskManager.onActivityManagerInternalAdded();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mUgmInternal.onActivityManagerInternalAdded();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mPendingIntentController.onActivityManagerInternalAdded();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	// &amp;#x7B49;&amp;#x5F85;&amp;#x8FDB;&amp;#x7A0B;cpu&amp;#x7EDF;&amp;#x8BA1;&amp;#x7EBF;&amp;#x7A0B;&amp;#x8FD0;&amp;#x884C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mProcessCpuInitLatch.await();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (InterruptedException e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Slog.wtf(TAG, &amp;quot;Interrupted wait during start&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Thread.currentThread().interrupt();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new IllegalStateException(&amp;quot;Interrupted wait during start&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;AMS&amp;#x5C31;&amp;#x5DF2;&amp;#x7ECF;&amp;#x542F;&amp;#x52A8;&amp;#x5B8C;&amp;#x6BD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;AMS&amp;#x5728;SystemServer&amp;#x4E2D;&amp;#x90FD;&amp;#x5E72;&amp;#x4E86;&amp;#x4EC0;&amp;#x4E48;&lt;/p&gt;
&lt;h2 id=&quot;startBootstrapServices&quot;&gt;&lt;a href=&quot;#startBootstrapServices&quot; class=&quot;headerlink&quot; title=&quot;startBootstrapServices&quot;&gt;&lt;/a&gt;startBootstrapServices&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startBootstrapServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.initPowerManagement();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.setSystemProcess();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;initPowerManagement&quot;&gt;&lt;a href=&quot;#initPowerManagement&quot; class=&quot;headerlink&quot; title=&quot;initPowerManagement&quot;&gt;&lt;/a&gt;initPowerManagement&lt;/h3&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x521D;&amp;#x59CB;&amp;#x5316;PowerManagement&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void initPowerManagement() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityTaskManager.onInitPowerManagement();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.initPowerManagement();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mLocalPowerManager = LocalServices.getService(PowerManagerInternal.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;BatterStateService&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;PowerManagement&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;setSystemProcess&quot;&gt;&lt;a href=&quot;#setSystemProcess&quot; class=&quot;headerlink&quot; title=&quot;setSystemProcess&quot;&gt;&lt;/a&gt;setSystemProcess&lt;/h3&gt;&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x662F;setSystemProcess&amp;#xFF0C;&amp;#x6CE8;&amp;#x518C;&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void setSystemProcess() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	// &amp;#x6CE8;&amp;#x518C;ActivityManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(Context.ACTIVITY_SERVICE, this, /* allowIsolated= */ true,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                DUMP_FLAG_PRIORITY_CRITICAL | DUMP_FLAG_PRIORITY_NORMAL | DUMP_FLAG_PROTO);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C; ProcessStatsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(ProcessStats.SERVICE_NAME, mProcessStats);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;MemBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;meminfo&amp;quot;, new MemBinder(this), /* allowIsolated= */ false,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                DUMP_FLAG_PRIORITY_HIGH);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;GraphicsBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;gfxinfo&amp;quot;, new GraphicsBinder(this));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;DbBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;dbinfo&amp;quot;, new DbBinder(this));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (MONITOR_CPU_USAGE) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	// &amp;#x6CE8;&amp;#x518C;CpuBinder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ServiceManager.addService(&amp;quot;cpuinfo&amp;quot;, new CpuBinder(this),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    /* allowIsolated= */ false, DUMP_FLAG_PRIORITY_CRITICAL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;PermissionController&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;permission&amp;quot;, new PermissionController(this));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;ProcessInfoService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;processinfo&amp;quot;, new ProcessInfoService(this));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x52A0;&amp;#x8F7D;&amp;#x5305;&amp;#x540D;&amp;#x4E3A;android&amp;#x7684;&amp;#x5305;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x901A;&amp;#x8FC7;LoadedApk&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ApplicationInfo info = mContext.getPackageManager().getApplicationInfo(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;android&amp;quot;, STOCK_PM_FLAGS | MATCH_SYSTEM_ONLY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemThread.installSystemApplicationInfo(info, getClass().getClassLoader());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C06;AMS&amp;#x6CE8;&amp;#x518C;&amp;#x5230;ServiceManager&amp;#x4E2D;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x901A;&amp;#x8FC7;ActivityManager&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x6CE8;&amp;#x518C;&amp;#x7684;AMS&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x5C31;&amp;#x8FDB;&amp;#x5165;&amp;#x4E86;startCoreServices&amp;#xFF0C;&amp;#x542F;&amp;#x52A8;&amp;#x6838;&amp;#x5FC3;&amp;#x670D;&amp;#x52A1;&lt;/p&gt;
&lt;h2 id=&quot;startCoreServices&quot;&gt;&lt;a href=&quot;#startCoreServices&quot; class=&quot;headerlink&quot; title=&quot;startCoreServices&quot;&gt;&lt;/a&gt;startCoreServices&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startCoreServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.setUsageStatsManager(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                LocalServices.getService(UsageStatsManagerInternal.class));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;UsageStateManager&lt;/p&gt;
&lt;h2 id=&quot;startOtherServices&quot;&gt;&lt;a href=&quot;#startOtherServices&quot; class=&quot;headerlink&quot; title=&quot;startOtherServices&quot;&gt;&lt;/a&gt;startOtherServices&lt;/h2&gt;&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x6765;&amp;#x5230;&amp;#x542F;&amp;#x52A8;&amp;#x5176;&amp;#x5B83;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x6A21;&amp;#x5757;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startOtherServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.installSystemProviders();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.setWindowManager(wm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	mActivityManagerService.systemReady(...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x662F;&amp;#x5B89;&amp;#x88C5;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;Provider&amp;#x3001;&amp;#x8BBE;&amp;#x7F6E;WindowManagerService&amp;#x4E0E;systemReady&amp;#x7684;&amp;#x51C6;&amp;#x5907;&amp;#x5DE5;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;installSystemProviders&quot;&gt;&lt;a href=&quot;#installSystemProviders&quot; class=&quot;headerlink&quot; title=&quot;installSystemProviders&quot;&gt;&lt;/a&gt;installSystemProviders&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public final void installSystemProviders() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    List&amp;lt;ProviderInfo&amp;gt; providers;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ProcessRecord app = mProcessList.mProcessNames.get(&amp;quot;system&amp;quot;, SYSTEM_UID);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x83B7;&amp;#x53D6;Providers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        providers = generateApplicationProvidersLocked(app);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (providers != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for (int i=providers.size()-1; i&amp;gt;=0; i--) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ProviderInfo pi = (ProviderInfo)providers.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x6E05;&amp;#x9664;&amp;#x975E;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;Providers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if ((pi.applicationInfo.flags&amp;amp;ApplicationInfo.FLAG_SYSTEM) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    providers.remove(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x901A;&amp;#x8FC7;ActivityThread&amp;#x6765;&amp;#x5B89;&amp;#x88C5;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;Providers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (providers != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemThread.installSystemProviders(providers);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemProvidersInstalled = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mConstants.start(mContext.getContentResolver());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mCoreSettingsObserver = new CoreSettingsObserver(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityTaskManager.installSystemProviders();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mDevelopmentSettingsObserver = new DevelopmentSettingsObserver();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SettingsToPropertiesMapper.start(mContext.getContentResolver());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mOomAdjuster.initSettings();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5B89;&amp;#x88C5;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;Providers&lt;/p&gt;
&lt;h3 id=&quot;WindowManagerService&quot;&gt;&lt;a href=&quot;#WindowManagerService&quot; class=&quot;headerlink&quot; title=&quot;WindowManagerService&quot;&gt;&lt;/a&gt;WindowManagerService&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void setWindowManager(WindowManagerService wm) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mWindowManager = wm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityTaskManager.setWindowManager(wm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8BBE;&amp;#x7F6E;WindowManagerService&amp;#x670D;&amp;#x52A1;&lt;/p&gt;
&lt;h3 id=&quot;systemReady&quot;&gt;&lt;a href=&quot;#systemReady&quot; class=&quot;headerlink&quot; title=&quot;systemReady&quot;&gt;&lt;/a&gt;systemReady&lt;/h3&gt;&lt;p&gt;systemReady&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x6BD4;&amp;#x8F83;&amp;#x591A;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x62C6;&amp;#x5F00;&amp;#x6765;&amp;#x8BF4;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void systemReady(final Runnable goingCallback, TimingsTraceLog traceLog) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	goingCallback before&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (goingCallback != null) goingCallback.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	goingCallback after&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8C03;&amp;#x7528;goingCallback.run&amp;#x4E4B;&amp;#x524D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void systemReady(final Runnable goingCallback, TimingsTraceLog traceLog) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 synchronized(this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x7B2C;&amp;#x4E00;&amp;#x6B21;&amp;#x8FDB;&amp;#x6765;&amp;#x4E3A;false&amp;#xFF0C;&amp;#x8DF3;&amp;#x8FC7;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mSystemReady) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (goingCallback != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                goingCallback.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemReady = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ArrayList&amp;lt;ProcessRecord&amp;gt; procsToKill = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized(mPidsSelfLocked) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for (int i=mPidsSelfLocked.size()-1; i&amp;gt;=0; i--) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ProcessRecord proc = mPidsSelfLocked.valueAt(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x975E;president&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (!isAllowedWhileBooting(proc.info)){&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (procsToKill == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    procsToKill = new ArrayList&amp;lt;ProcessRecord&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x52A0;&amp;#x5165;&amp;#x5230;procsTokill&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                procsToKill.add(proc);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized(this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (procsToKill != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	// kill procsToKill&amp;#x4E2D;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for (int i=procsToKill.size()-1; i&amp;gt;=0; i--) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ProcessRecord proc = procsToKill.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mProcessList.removeProcessLocked(proc, true, false, &amp;quot;system update done&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mProcessesReady = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (goingCallback != null) goingCallback.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x6740;&amp;#x6389;procsToKill&amp;#x4E2D;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E0E;&amp;#x8FDB;&amp;#x7A0B;&amp;#x90FD;&amp;#x5DF2;&amp;#x7ECF;&amp;#x51C6;&amp;#x5907;&amp;#x5C31;&amp;#x7EEA;&lt;/p&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x540E;&amp;#x518D;&amp;#x8C03;&amp;#x7528;goingCallback.run&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mActivityManagerService.systemReady(() -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 550&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SystemService.PHASE_ACTIVITY_MANAGER_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.startObservingNativeCrashes();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;observing native crashes&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    traceBeginAndSlog(&amp;quot;MakeConnectivityServiceReady&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (connectivityF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            connectivityF.systemReady();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;making Connectivity Service ready&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SystemService.PHASE_THIRD_PARTY_APPS_CAN_START);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (locationF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            locationF.systemRunning();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;Notifying Location Service running&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (countryDetectorF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            countryDetectorF.systemRunning();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;Notifying CountryDetectorService running&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}, BOOT_TIMINGS_TRACE_LOG);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5728;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484991&amp;amp;idx=1&amp;amp;sn=7a4701c30ade3569c75591a12644c4f3&amp;amp;chksm=e8e0ffafdf9776b9a00e9b912a47578622379e667e45a16f5d814b638e8ab04786e38403542b&amp;amp;token=694410729&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android SystemServer&amp;#x542F;&amp;#x52A8;(&amp;#x4E8C;)&lt;/a&gt;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5206;&amp;#x6790;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x591A;&amp;#x4ECB;&amp;#x7ECD;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x5BF9;&amp;#x4E00;&amp;#x4E9B;&amp;#x670D;&amp;#x52A1;&amp;#x8FDB;&amp;#x884C;systemReady&amp;#x4E0E;systemRuning&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x6765;&amp;#x5230;systemReady&amp;#x7684;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;&amp;#x6B65;&amp;#x9AA4;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void systemReady(final Runnable goingCallback, TimingsTraceLog traceLog) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	if (goingCallback != null) goingCallback.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final int currentUserId = mUserController.getCurrentUserId();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (currentUserId != UserHandle.USER_SYSTEM &amp;amp;&amp;amp; !mUserController.isSystemUserStarted()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&amp;quot;System user not started while current user is:&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                + currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.noteEvent(BatteryStats.HistoryItem.EVENT_USER_RUNNING_START,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Integer.toString(currentUserId), currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mBatteryStatsService.noteEvent(BatteryStats.HistoryItem.EVENT_USER_FOREGROUND_START,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Integer.toString(currentUserId), currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8C03;&amp;#x7528;&amp;#x6240;&amp;#x6709;SystemService&amp;#x7684;onStartUser&amp;#x65B9;&amp;#x6CD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startUser(currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x5F00;&amp;#x542F;Persistent app&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        startPersistentApps(PackageManager.MATCH_DIRECT_BOOT_AWARE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mBooting = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (UserManager.isSplitSystemUser() &amp;amp;&amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Settings.Secure.getInt(mContext.getContentResolver(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     Settings.Secure.USER_SETUP_COMPLETE, 0) != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ComponentName cName = new ComponentName(mContext, SystemUserHomeActivity.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                AppGlobals.getPackageManager().setComponentEnabledSetting(cName,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        PackageManager.COMPONENT_ENABLED_STATE_ENABLED, 0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        UserHandle.USER_SYSTEM);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } catch (RemoteException e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                throw e.rethrowAsRuntimeException();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x542F;&amp;#x52A8;&amp;#x7CFB;&amp;#x7EDF;&amp;#x684C;&amp;#x9762;Activity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mAtmInternal.startHomeOnAllDisplays(currentUserId, &amp;quot;systemReady&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mAtmInternal.showSystemReadyErrorDialogsIfNeeded();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        final int callingUid = Binder.getCallingUid();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        final int callingPid = Binder.getCallingPid();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        long ident = Binder.clearCallingIdentity();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	// &amp;#x53D1;&amp;#x9001;USER_STARTED&amp;#x5E7F;&amp;#x64AD;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Intent intent = new Intent(Intent.ACTION_USER_STARTED);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    | Intent.FLAG_RECEIVER_FOREGROUND);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent.putExtra(Intent.EXTRA_USER_HANDLE, currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            broadcastIntentLocked(null, null, intent,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    null, null, 0, null, null, null, OP_NONE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    null, false, false, MY_PID, SYSTEM_UID, callingUid, callingPid,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x53D1;&amp;#x9001;USER_STARTING&amp;#x5E7F;&amp;#x64AD;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent = new Intent(Intent.ACTION_USER_STARTING);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            intent.putExtra(Intent.EXTRA_USER_HANDLE, currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            broadcastIntentLocked(null, null, intent,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    null, new IIntentReceiver.Stub() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        public void performReceive(Intent intent, int resultCode, String data,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                Bundle extras, boolean ordered, boolean sticky, int sendingUser)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                throws RemoteException {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }, 0, null, null,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    new String[] {INTERACT_ACROSS_USERS}, OP_NONE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    null, true, false, MY_PID, SYSTEM_UID, callingUid, callingPid,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    UserHandle.USER_ALL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable t) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Slog.wtf(TAG, &amp;quot;Failed sending first user broadcasts&amp;quot;, t);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Binder.restoreCallingIdentity(ident);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mAtmInternal.resumeTopActivities(false /* scheduleIdle */);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mUserController.sendUserSwitchBroadcasts(-1, currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BinderInternal.nSetBinderProxyCountWatermarks(BINDER_PROXY_HIGH_WATERMARK,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                BINDER_PROXY_LOW_WATERMARK);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BinderInternal.nSetBinderProxyCountEnabled(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BinderInternal.setBinderProxyCountCallback(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                new BinderInternal.BinderProxyLimitListener() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    public void onLimitReached(int uid) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        Slog.wtf(TAG, &amp;quot;Uid &amp;quot; + uid + &amp;quot; sent too many Binders to uid &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                + Process.myUid());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        BinderProxy.dumpProxyDebugInfo();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        if (uid == Process.SYSTEM_UID) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            Slog.i(TAG, &amp;quot;Skipping kill (uid is SYSTEM)&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            killUid(UserHandle.getAppId(uid), UserHandle.getUserId(uid),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    &amp;quot;Too many Binders sent to SYSTEM&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }, mHandler);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6062;&amp;#x590D;&amp;#x6808;&amp;#x9876;Activity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mAtmInternal.resumeTopActivities(false /* scheduleIdle */);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x53D1;&amp;#x9001;User_SWITCH &amp;#x5E7F;&amp;#x64AD;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mUserController.sendUserSwitchBroadcasts(-1, currentUserId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;startUser&amp;#x4F1A;&amp;#x56DE;&amp;#x8C03;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;SystemService&amp;#x7684;onStartUser&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void startUser(final int userHandle) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final int serviceLen = mServices.size();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x904D;&amp;#x5386;mServices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (int i = 0; i &amp;lt; serviceLen; i++) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        final SystemService service = mServices.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Trace.traceBegin(Trace.TRACE_TAG_SYSTEM_SERVER, &amp;quot;onStartUser &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                + service.getClass().getName());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        long time = SystemClock.elapsedRealtime();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	// &amp;#x56DE;&amp;#x8C03;onStartUser&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            service.onStartUser(userHandle);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Exception ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Slog.wtf(TAG, &amp;quot;Failure reporting start of user &amp;quot; + userHandle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    + &amp;quot; to service &amp;quot; + service.getClass().getName(), ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;startHomeOnAllDisplays&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x6765;&amp;#x5230;RootActivityContainer&amp;#x7684;startHomeOnDisplay&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;boolean startHomeOnDisplay(int userId, String reason, int displayId, boolean allowInstrumenting,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        boolean fromHomeKey) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (displayId == INVALID_DISPLAY) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        displayId = getTopDisplayFocusedStack().mDisplayId;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Intent homeIntent = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ActivityInfo aInfo = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (displayId == DEFAULT_DISPLAY) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        homeIntent = mService.getHomeIntent();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        aInfo = resolveHomeActivity(userId, homeIntent);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else if (shouldPlaceSecondaryHomeOnDisplay(displayId)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Pair&amp;lt;ActivityInfo, Intent&amp;gt; info = resolveSecondaryHomeActivity(userId, displayId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        aInfo = info.first;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        homeIntent = info.second;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (aInfo == null || homeIntent == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!canStartHomeOnDisplay(aInfo, displayId, allowInstrumenting)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;home Intent &amp;#x7684;Component&amp;#x4FE1;&amp;#x606F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    homeIntent.setComponent(new ComponentName(aInfo.applicationInfo.packageName, aInfo.name));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    homeIntent.setFlags(homeIntent.getFlags() | FLAG_ACTIVITY_NEW_TASK);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;extra&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (fromHomeKey) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        homeIntent.putExtra(WindowManagerPolicy.EXTRA_FROM_HOME_KEY, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final String myReason = reason + &amp;quot;:&amp;quot; + userId + &amp;quot;:&amp;quot; + UserHandle.getUserId(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            aInfo.applicationInfo.uid) + &amp;quot;:&amp;quot; + displayId;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;&amp;#x684C;&amp;#x9762;Activity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mService.getActivityStartController().startHomeActivity(homeIntent, aInfo, myReason,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            displayId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x603B;&amp;#x7ED3;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x5728;goingCallback.run&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x8BE5;&amp;#x9636;&amp;#x6BB5;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x8C03;&amp;#x7528;&amp;#x6240;&amp;#x6709;&amp;#x4E4B;&amp;#x524D;&amp;#x6DFB;&amp;#x52A0;&amp;#x7684;SystemService&amp;#x7684;onStartUser&amp;#x65B9;&amp;#x6CD5;&lt;/li&gt;
&lt;li&gt;&amp;#x542F;&amp;#x52A8;Persistent&amp;#x8FDB;&amp;#x7A0B;&lt;/li&gt;
&lt;li&gt;&amp;#x542F;&amp;#x52A8;&amp;#x7CFB;&amp;#x7EDF;&amp;#x684C;&amp;#x9762;Activity&lt;/li&gt;
&lt;li&gt;&amp;#x53D1;&amp;#x9001;USER_STARTED&amp;#x5E7F;&amp;#x64AD;&lt;/li&gt;
&lt;li&gt;&amp;#x53D1;&amp;#x9001;USER_STARTING&amp;#x5E7F;&amp;#x64AD;&lt;/li&gt;
&lt;li&gt;&amp;#x6062;&amp;#x590D;&amp;#x6808;&amp;#x9876;Activity&lt;/li&gt;
&lt;li&gt;&amp;#x53D1;&amp;#x9001;User_SWITCH&amp;#x5E7F;&amp;#x64AD;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x5C31;&amp;#x662F;AMS&amp;#x5728;SystemServer&amp;#x4E2D;&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x8FC7;&amp;#x7A0B;, &amp;#x4E5F;&amp;#x662F;AMS&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6574;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;Lifecycle&amp;#x521B;&amp;#x5EFA;AMS&amp;#x5B9E;&amp;#x4F8B;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x8C03;&amp;#x7528;onStart()&amp;#x65B9;&amp;#x6CD5;&amp;#x542F;&amp;#x52A8;AMS&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;setSystemProcess&amp;#x6CE8;&amp;#x518C;AMS&amp;#x3001;meminfo&amp;#x3001;gfxinfo&amp;#x3001;dbinfo&amp;#x3001;cpuinfo&amp;#x7B49;&amp;#x670D;&amp;#x52A1;&amp;#x5230;ServiceManager&amp;#x4E2D;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;installSystemProviders&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;providers&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;systemReady&amp;#x6765;ready&amp;#x4E0E;running&amp;#x5404;&amp;#x79CD;&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x542F;&amp;#x52A8;&amp;#x684C;&amp;#x9762;&amp;#x5E94;&amp;#x7528;&amp;#xFF0C;&amp;#x53D1;&amp;#x9001;&amp;#x76F8;&amp;#x5173;&amp;#x5E7F;&amp;#x64AD;&amp;#x4E0E;&amp;#x6062;&amp;#x590D;&amp;#x6808;&amp;#x9876;Activity&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484991&amp;amp;idx=1&amp;amp;sn=7a4701c30a
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>一文彻底搞懂Kotlin inline</title>
    <link href="https://www.rousetime.com/2021/01/07/%E4%B8%80%E6%96%87%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82Kotlin-inline/"/>
    <id>https://www.rousetime.com/2021/01/07/一文彻底搞懂Kotlin-inline/</id>
    <published>2021-01-07T13:01:43.000Z</published>
    <updated>2022-12-01T13:05:40.934Z</updated>
    
    <content type="html">&lt;p&gt;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x76F8;&amp;#x4FE1;&amp;#x5927;&amp;#x5BB6;&amp;#x5DF2;&amp;#x7ECF;&amp;#x73A9;&amp;#x7684;&amp;#x5F88;&amp;#x6E9C;&amp;#x4E86;&amp;#xFF0C;&amp;#x4F46;&amp;#x5927;&amp;#x5BB6;&amp;#x6709;&amp;#x6CA1;&amp;#x6709;&amp;#x6CE8;&amp;#x610F;&amp;#x5230;&amp;#x5B83;&amp;#x5185;&amp;#x90E8;&amp;#x6E90;&amp;#x7801;&amp;#x5927;&amp;#x91CF;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;inline&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;Kotlin&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;inline&amp;#xFF1F;&amp;#x5B83;&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x53C8;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x53EA;&amp;#x662F;&amp;#x6CE8;&amp;#x610F;&amp;#x5230;&amp;#x4E86;&amp;#xFF0C;&amp;#x4F46;&amp;#x4ECE;&amp;#x6765;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x6DF1;&amp;#x5165;&amp;#x63A2;&amp;#x7A76;&amp;#xFF0C;&amp;#x76F8;&amp;#x4FE1;&amp;#x8FD9;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x80FD;&amp;#x591F;&amp;#x5E2E;&amp;#x4F60;&amp;#x627E;&amp;#x5230;&amp;#x7B54;&amp;#x6848;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;inline&quot;&gt;&lt;a href=&quot;#inline&quot; class=&quot;headerlink&quot; title=&quot;inline&quot;&gt;&lt;/a&gt;inline&lt;/h2&gt;&lt;p&gt;inline&amp;#x662F;&amp;#x4F5C;&amp;#x7528;&amp;#x5728;&amp;#x51FD;&amp;#x6570;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;Kotlin&amp;#x7684;let&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public inline fun &amp;lt;T, R&amp;gt; T.let(block: (T) -&amp;gt; R): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    contract {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        callsInPlace(block, InvocationKind.EXACTLY_ONCE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x5B83;&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;inline&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x5BF9;&amp;#x95ED;&amp;#x5305;block&amp;#x505A;&amp;#x4F18;&amp;#x5316;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x5BF9;&amp;#x6BD4;&amp;#x5B83;&amp;#x505A;&amp;#x7684;&amp;#x4F18;&amp;#x5316;&amp;#xFF0C;&amp;#x6211;&amp;#x5BF9;&amp;#x5E94;&amp;#x5B9A;&amp;#x4E49;&amp;#x4E00;&amp;#x4E2A;&amp;#x6CA1;&amp;#x6709;inline&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public fun &amp;lt;T, R&amp;gt; T.ret(block: (T) -&amp;gt; R): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x6211;&amp;#x540C;&amp;#x65F6;&amp;#x8C03;&amp;#x7528;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class MainActivity : AppCompatActivity() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun onCreate(savedInstanceState: Bundle?) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super.onCreate(savedInstanceState)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setContentView(R.layout.activity_main)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        let {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            it.a()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ret {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            it.b()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun a() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun b() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun &amp;lt;T, R&amp;gt; T.ret(block: (T) -&amp;gt; R): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x518D;&amp;#x901A;&amp;#x8FC7;AS&amp;#x7684;Show Kotlin Bytecode&amp;#xFF0C;&amp;#x6765;&amp;#x770B;&amp;#x5B83;&amp;#x4EEC;&amp;#x53CD;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public final class MainActivity extends AppCompatActivity {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   private HashMap _$_findViewCache;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   protected void onCreate(@Nullable Bundle savedInstanceState) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      super.onCreate(savedInstanceState);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      this.setContentView(1300009);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      boolean var3 = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      boolean var4 = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;let&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      MainActivity it = (MainActivity)this;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      int var6 = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      it.a();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x6CA1;&amp;#x6709;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;ret&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      this.ret(this, (Function1)null.INSTANCE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   public final void a() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   public final void b() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   public final Object ret(Object $this$ret, @NotNull Function1 block) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Intrinsics.checkParameterIsNotNull(block, &amp;quot;block&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      return block.invoke($this$ret);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0D;&amp;#x61C2;&amp;#x7684;&amp;#x8FD8;&amp;#x662F;&amp;#x8981;&amp;#x770B;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5458;&amp;#x7684;&amp;#x7EC8;&amp;#x7ED3;&amp;#x6B66;&amp;#x5668;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x6211;&amp;#x4EEC;&amp;#x53D1;&amp;#x73B0;&amp;#x901A;&amp;#x8FC7;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x5E73;&amp;#x5766;&amp;#x5F0F;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;&amp;#x540E;&amp;#x9762;&amp;#x6309;&amp;#x6267;&amp;#x884C;&amp;#x987A;&amp;#x4F9D;&amp;#x6B21;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x6CA1;&amp;#x6709;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5219;&amp;#x4F1A;&amp;#x4E3A;block&amp;#x65B9;&amp;#x6CD5;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;Function1&amp;#x5B9E;&amp;#x4F8B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x5C31;&amp;#x662F;&amp;#x672A;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5BF9;&amp;#x5E26;&amp;#x6709;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x521B;&amp;#x5EFA;&amp;#x5BF9;&amp;#x4E8E;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x5B9E;&amp;#x4F8B;&amp;#xFF0C;&amp;#x518D;&amp;#x5C06;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B9E;&amp;#x4F8B;&amp;#x4F20;&amp;#x9012;&amp;#x5230;&amp;#x65B9;&amp;#x6CD5;&amp;#x53C2;&amp;#x6570;&amp;#x4E2D;&amp;#x3002;&amp;#x8BE5;&amp;#x53C2;&amp;#x6570;&amp;#x65B9;&amp;#x6CD5;&amp;#x6700;&amp;#x7EC8;&amp;#x5728;&amp;#x539F;&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x5185;&amp;#x90E8;&amp;#x88AB;&amp;#x663E;&amp;#x793A;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;inline&amp;#x505A;&amp;#x7684;&amp;#x4F18;&amp;#x5316;&amp;#x5C31;&amp;#x662F;&amp;#x5C06;&amp;#x5E26;&amp;#x6709;&amp;#x51FD;&amp;#x6570;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x7B80;&amp;#x5316;&amp;#x6210;&amp;#x6CA1;&amp;#x51FD;&amp;#x6570;&amp;#x5F0F;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;&amp;#x3002;&amp;#x597D;&amp;#x5904;&amp;#x662F;&amp;#x63D0;&amp;#x9AD8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x7684;&amp;#x6027;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5F53;&amp;#x7136;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x907F;&amp;#x514D;&amp;#x4F7F;&amp;#x7528;inline&amp;#x5185;&amp;#x8054;&amp;#x5927;&amp;#x578B;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x51CF;&amp;#x5C11;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x589E;&amp;#x957F;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x975E;&amp;#x5C40;&amp;#x90E8;&amp;#x8FD4;&amp;#x56DE;&quot;&gt;&lt;a href=&quot;#&amp;#x975E;&amp;#x5C40;&amp;#x90E8;&amp;#x8FD4;&amp;#x56DE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x975E;&amp;#x5C40;&amp;#x90E8;&amp;#x8FD4;&amp;#x56DE;&quot;&gt;&lt;/a&gt;&amp;#x975E;&amp;#x5C40;&amp;#x90E8;&amp;#x8FD4;&amp;#x56DE;&lt;/h3&gt;&lt;p&gt;inline&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x597D;&amp;#x5904;&amp;#x662F;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;while&amp;#x3001;for&amp;#x7B49;&amp;#x8BED;&amp;#x53E5;&amp;#xFF0C;&amp;#x88AB;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x652F;&amp;#x6301;&amp;#x5C40;&amp;#x90E8;&amp;#x8FD4;&amp;#x56DE;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD8;&amp;#x662F;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;while (--i &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return // success&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while (--i &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ret {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return // error: return is not allow here&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x7406;&amp;#x89E3;&amp;#x5C31;&amp;#x662F;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;&amp;#x5FAA;&amp;#x73AF;&amp;#x8BED;&amp;#x53E5;&amp;#x4E2D;&amp;#x901A;&amp;#x8FC7;return&amp;#x8DF3;&amp;#x51FA;&amp;#x5FAA;&amp;#x73AF;&amp;#x4F53;&amp;#x3002;&amp;#x800C;&amp;#x975E;inline&amp;#x51FD;&amp;#x6570;&amp;#x662F;&amp;#x4E0D;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#xFF0C;&amp;#x5B83;&amp;#x652F;&amp;#x6301;&amp;#x8DF3;&amp;#x51FA;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F53;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x539F;&amp;#x56E0;&amp;#x4E5F;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x56DE;&amp;#x5934;&amp;#x518D;&amp;#x770B;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x53CD;&amp;#x7F16;&amp;#x8BD1;&amp;#x7684;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;&amp;#x5E73;&amp;#x94FA;&amp;#x5F0F;&amp;#x76F4;&amp;#x63A5;&amp;#x6309;&amp;#x987A;&amp;#x5E8F;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x5305;&amp;#x542B;&amp;#x5728;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F53;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5982;&amp;#x679C;return&amp;#x7684;&amp;#x8BDD;&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;&amp;#x5FAA;&amp;#x73AF;&amp;#x4F53;&amp;#x4E2D;return&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;while(--i &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x800C;&amp;#x672A;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x662F;&amp;#x5728;&amp;#x53E6;&amp;#x5916;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F53;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;return&amp;#x53EA;&amp;#x80FD;&amp;#x662F;&amp;#x8FD4;&amp;#x56DE;&amp;#x5230;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F53;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;reified&quot;&gt;&lt;a href=&quot;#reified&quot; class=&quot;headerlink&quot; title=&quot;reified&quot;&gt;&lt;/a&gt;reified&lt;/h3&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x597D;&amp;#x5904;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;reified&amp;#x6765;&amp;#x4FEE;&amp;#x9970;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x6CDB;&amp;#x578B;&amp;#xFF0C;&amp;#x8BA9;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x6CDB;&amp;#x578B;&amp;#x5177;&amp;#x4F53;&amp;#x5316;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;inline fun &amp;lt;reified T, R&amp;gt; T.det(block: (T) -&amp;gt; R): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val a = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (a is T) { // success&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fun &amp;lt;T, R&amp;gt; T.ret(block: (T) -&amp;gt; R): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val a = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (a is T) { // error: Cannot check for instance of erased type: T&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x6216;&amp;#x8005;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;inline fun &amp;lt;reified T&amp;gt; membersOf() = T::class.members&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F20;&amp;#x7EDF;&amp;#x7684;&amp;#x6CDB;&amp;#x578B;&amp;#x662F;&amp;#x4F1A;&amp;#x5728;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x64E6;&amp;#x9664;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;reified&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x6CDB;&amp;#x578B;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x53CD;&amp;#x7F16;&amp;#x8BD1;&amp;#x4E8C;&amp;#x8FDB;&amp;#x5236;&amp;#x8868;&amp;#x73B0;&amp;#x5C31;&amp;#x662F;&amp;#x5C06;&amp;#x6CDB;&amp;#x578B;&amp;#x66FF;&amp;#x6362;&amp;#x6210;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FDB;&amp;#x884C;&amp;#x7C7B;&amp;#x578B;&amp;#x64E6;&amp;#x9664;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$i$f$det = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int a$iv = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if (Integer.valueOf(a$iv) instanceof MainActivity) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   this.a();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MainActivity it = (MainActivity)this;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int var7 = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;it.b();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;noinline&quot;&gt;&lt;a href=&quot;#noinline&quot; class=&quot;headerlink&quot; title=&quot;noinline&quot;&gt;&lt;/a&gt;noinline&lt;/h2&gt;&lt;p&gt;&amp;#x6709;&amp;#x4E86;inline&amp;#x81EA;&amp;#x7136;&amp;#x4E5F;&amp;#x6709;&amp;#x5BF9;&amp;#x7ACB;&amp;#x7684;noinline&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x591A;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x65B9;&amp;#x6CD5;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;noinline&amp;#x6765;&amp;#x6307;&amp;#x5B9A;&amp;#x67D0;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x65B9;&amp;#x6CD5;&amp;#x53C2;&amp;#x6570;&amp;#x4E0D;&amp;#x4F7F;&amp;#x7528;inline&amp;#x7684;&amp;#x7279;&amp;#x6027;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;inline fun &amp;lt;T, R&amp;gt; T.net(block: (T) -&amp;gt; R, noinline noBlock: () -&amp;gt; Unit): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    noBlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EA;&amp;#x6709;block&amp;#x4F1A;&amp;#x6267;&amp;#x884C;inline&amp;#x7684;&amp;#x4F18;&amp;#x5316;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;crossinline&quot;&gt;&lt;a href=&quot;#crossinline&quot; class=&quot;headerlink&quot; title=&quot;crossinline&quot;&gt;&lt;/a&gt;crossinline&lt;/h2&gt;&lt;p&gt;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;inline&amp;#x4FEE;&amp;#x9970;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x88AB;&amp;#x4F7F;&amp;#x7528;&amp;#x5230;&amp;#x4E86;&amp;#x5D4C;&amp;#x5957;&amp;#x7684;&amp;#x5185;&amp;#x8054;&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;&amp;#x662F;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4E3A;&amp;#x51FD;&amp;#x6570;&amp;#x53C2;&amp;#x6570;&amp;#x6DFB;&amp;#x52A0;crossinline&amp;#x4FEE;&amp;#x9970;&amp;#x7B26;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;inline fun &amp;lt;T, R&amp;gt; T.cet(block: (T) -&amp;gt; R, crossinline noBlock: () -&amp;gt; Unit): R {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Runnable {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        noBlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return block(this)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x6709;&amp;#x5173;kotlin&amp;#x7684;inline&amp;#x90E8;&amp;#x5206;&amp;#x5C31;&amp;#x5206;&amp;#x6790;&amp;#x5230;&amp;#x8FD9;&amp;#xFF0C;&amp;#x5E0C;&amp;#x671B;&amp;#x4F60;&amp;#x6709;&amp;#x6240;&amp;#x6536;&amp;#x83B7;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x76F8;&amp;#x4FE1;&amp;#x5927;&amp;#x5BB6;&amp;#x5DF2;&amp;#x7ECF;&amp;#x73A9;&amp;#x7684;&amp;#x5F88;&amp;#x6E9C;&amp;#x4E86;&amp;#xFF0C;&amp;#x4F46;&amp;#x5927;&amp;#x
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="kotlin" scheme="https://www.rousetime.com/tags/kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Android SystemServer启动(二)</title>
    <link href="https://www.rousetime.com/2021/01/04/Android-SystemServer%E5%90%AF%E5%8A%A8-%E4%BA%8C/"/>
    <id>https://www.rousetime.com/2021/01/04/Android-SystemServer启动-二/</id>
    <published>2021-01-04T14:36:24.000Z</published>
    <updated>2022-11-30T14:41:58.798Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1353481402&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android init &amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1204064574&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android Linux Zygote&amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484921&amp;amp;idx=1&amp;amp;sn=bf7251253d23c17c9148423f6f1e386e&amp;amp;chksm=e8e0fc69df97757f2aec459954c07d0fc44be4bd6c6963dab2b5c5b01d8e8176c9069ddab12c&amp;amp;token=757375240&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android Java Zygote&amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484938&amp;amp;idx=1&amp;amp;sn=027a7eb6902d8668d15008db0e2ac29a&amp;amp;chksm=e8e0ff9adf97768cb5f77f6b1ffbb2e306a1ac6dea66a4aeeed0a7aed3c3ccb531db634df991&amp;amp;token=757375240&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android SystemServer&amp;#x542F;&amp;#x52A8;(&amp;#x4E00;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x4E0A;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x7684;SystemServer&amp;#x542F;&amp;#x52A8;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x6B64;&amp;#x6B21;&amp;#x5206;&amp;#x6790;&amp;#x8FC7;&amp;#x7A0B;&amp;#x57FA;&amp;#x4E8E;Android 10.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;run&quot;&gt;&lt;a href=&quot;#run&quot; class=&quot;headerlink&quot; title=&quot;run&quot;&gt;&lt;/a&gt;run&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5206;&amp;#x6790;&amp;#x5230;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;SystemServer&amp;#x7684;run&amp;#x65B9;&amp;#x6CD5;&amp;#x8FDB;&amp;#x5165;&amp;#x5230;SystemServer&amp;#x5185;&amp;#x90E8;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x6765;&amp;#x770B;run&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void run() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        traceBeginAndSlog(&amp;quot;InitBeforeStartServices&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x521B;&amp;#x5EFA;Looper&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Looper.prepareMainLooper();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Looper.getMainLooper().setSlowLogThresholdMs(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                SLOW_DISPATCH_THRESHOLD_MS, SLOW_DELIVERY_THRESHOLD_MS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x521D;&amp;#x59CB;&amp;#x5316;native service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.loadLibrary(&amp;quot;android_servers&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        performPendingShutdown();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x521B;&amp;#x5EFA;system context&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        createSystemContext();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x521B;&amp;#x5EFA;SystemServiceManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager = new SystemServiceManager(mSystemContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.setStartInfo(mRuntimeRestart,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mRuntimeStartElapsedTime, mRuntimeStartUptime);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x672C;&amp;#x5730;LocalServices&amp;#x4E2D;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4FBF;&amp;#x540E;&amp;#x7EED;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x5BF9;&amp;#x8C61;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LocalServices.addService(SystemServiceManager.class, mSystemServiceManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        SystemServerInitThreadPool.get();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        traceEnd();  // InitBeforeStartServices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;&amp;#x5404;&amp;#x9879;services&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        traceBeginAndSlog(&amp;quot;StartServices&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        startBootstrapServices();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        startCoreServices();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        startOtherServices();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        SystemServerInitThreadPool.shutdown();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Slog.e(&amp;quot;System&amp;quot;, &amp;quot;******************************************&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Slog.e(&amp;quot;System&amp;quot;, &amp;quot;************ Failure starting system services&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw ex;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        traceEnd();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StrictMode.initVmDefaults(null);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!mRuntimeRestart &amp;amp;&amp;amp; !isFirstBootOrUpgrade()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        int uptimeMillis = (int) SystemClock.elapsedRealtime();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        MetricsLogger.histogram(null, &amp;quot;boot_system_server_ready&amp;quot;, uptimeMillis);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        final int MAX_UPTIME_MILLIS = 60 * 1000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (uptimeMillis &amp;gt; MAX_UPTIME_MILLIS) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Slog.wtf(SYSTEM_SERVER_TIMING_TAG,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;quot;SystemServer init took too long. uptimeMillis=&amp;quot; + uptimeMillis);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5F00;&amp;#x542F;loop&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x7B49;&amp;#x5F85;&amp;#x6D88;&amp;#x606F;&amp;#x7684;&amp;#x6765;&amp;#x4E34;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Looper.loop();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    throw new RuntimeException(&amp;quot;Main thread loop unexpectedly exited&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;SystemServer&amp;#x7684;run&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x5F53;&amp;#x524D;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;Looper&lt;/li&gt;
&lt;li&gt;&amp;#x52A0;&amp;#x8F7D;native services&amp;#x539F;&amp;#x751F;&amp;#x5E93;android_servers&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;SystemContext&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;ActivityThread&amp;#x6765;&amp;#x83B7;&amp;#x53D6;SystemContext&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;SystemServiceManager&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x540E;&amp;#x7EED;&amp;#x7684;&amp;#x5404;&amp;#x9879;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x5F00;&amp;#x542F;&amp;#x5404;&amp;#x9879;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x5F00;&amp;#x542F;Looper&amp;#x5FAA;&amp;#x73AF;&amp;#xFF0C;&amp;#x7B49;&amp;#x5F85;&amp;#x6D88;&amp;#x606F;&amp;#x7684;&amp;#x6765;&amp;#x4E34;&amp;#x5E76;&amp;#x6267;&amp;#x884C;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;SystemContext&quot;&gt;&lt;a href=&quot;#SystemContext&quot; class=&quot;headerlink&quot; title=&quot;SystemContext&quot;&gt;&lt;/a&gt;SystemContext&lt;/h3&gt;&lt;p&gt;&amp;#x5176;&amp;#x4E2D;SystemContext&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;ActivityThread&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x7684;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void createSystemContext() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ActivityThread activityThread = ActivityThread.systemMain();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemContext = activityThread.getSystemContext();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemContext.setTheme(DEFAULT_SYSTEM_THEME);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Context systemUiContext = activityThread.getSystemUiContext();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    systemUiContext.setTheme(DEFAULT_SYSTEM_THEME);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x7EC8;&amp;#x83B7;&amp;#x53D6;&amp;#x5230;&amp;#x7684;SystemContext&amp;#x662F;&amp;#x7531;ContextImpl&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public ContextImpl getSystemContext() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (this) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mSystemContext == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mSystemContext = ContextImpl.createSystemContext(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return mSystemContext;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;SystemServiceManager&quot;&gt;&lt;a href=&quot;#SystemServiceManager&quot; class=&quot;headerlink&quot; title=&quot;SystemServiceManager&quot;&gt;&lt;/a&gt;SystemServiceManager&lt;/h3&gt;&lt;p&gt;&amp;#x5B83;&amp;#x662F;SystemServer&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x5927;&amp;#x7BA1;&amp;#x5BB6;&amp;#xFF0C;&amp;#x63D0;&amp;#x4F9B;&amp;#x542F;&amp;#x52A8;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x76F8;&amp;#x5173;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x6D89;&amp;#x53CA;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x6709;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;startService: &amp;#x901A;&amp;#x8FC7;&amp;#x53CD;&amp;#x5C04;&amp;#x521B;&amp;#x5EFA;&amp;#x76F8;&amp;#x5173;&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x8C03;&amp;#x7528;&amp;#x5BF9;&amp;#x5E94;&amp;#x670D;&amp;#x52A1;&amp;#x7684;onStart()&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x5F00;&amp;#x542F;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;startBootPhase: &amp;#x5F00;&amp;#x542F;&amp;#x7279;&amp;#x6B8A;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x5404;&amp;#x9879;&amp;#x670D;&amp;#x52A1;&amp;#x4F1A;&amp;#x6839;&amp;#x636E;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x6267;&amp;#x884C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x5206;&amp;#x522B;&amp;#x4E3A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E00;&amp;#x4E9B;&amp;#x9ED8;&amp;#x8BA4;&amp;#x5C55;&amp;#x793A;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_WAIT_FOR_DEFAULT_DISPLAY = 100;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5C06;&amp;#x4F1A;&amp;#x9501;&amp;#x5B9A;setting&amp;#x6570;&amp;#x636E;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_LOCK_SETTINGS_READY = 480;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5C06;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;&amp;#x6838;&amp;#x5FC3;&amp;#x7684;system services&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;PowerManager&amp;#x4E0E;PackageManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_SYSTEM_SERVICES_READY = 500;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5C06;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;&amp;#x8BBE;&amp;#x5907;&amp;#x7279;&amp;#x6B8A;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_DEVICE_SPECIFIC_SERVICES_READY = 520;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5C06;&amp;#x4F1A;&amp;#x5C06;&amp;#x4F1A;&amp;#x53D1;&amp;#x9001;&amp;#x670D;&amp;#x52A1;&amp;#x5E7F;&amp;#x64AD;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_ACTIVITY_MANAGER_READY = 550;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5C06;&amp;#x4F1A;&amp;#x542F;&amp;#x52A8;&amp;#x4E0D;&amp;#x7ED1;&amp;#x5B9A;&amp;#x4E09;&amp;#x65B9;app&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_THIRD_PARTY_APPS_CAN_START = 600;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x6807;&amp;#x5FD7;&amp;#x7740;&amp;#x542F;&amp;#x52A8;&amp;#x5B8C;&amp;#x6210;&amp;#xFF0C;&amp;#x7528;&amp;#x6237;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x8BBE;&amp;#x5907;&amp;#x4EA4;&amp;#x4E92;&amp;#xFF0C;&amp;#x5E94;&amp;#x7528;&amp;#x684C;&amp;#x9762;&amp;#x5DF2;&amp;#x7ECF;&amp;#x542F;&amp;#x52A8;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public static final int PHASE_BOOT_COMPLETED = 1000;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E9B;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x4F1A;&amp;#x7A7F;&amp;#x63D2;&amp;#x5728;&amp;#x5404;&amp;#x9879;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x542F;&amp;#x52A8;&amp;#x5E8F;&amp;#x5217;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x63D2;&amp;#x5165;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x4F34;&amp;#x968F;&amp;#x7740;&amp;#x8BE5;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x6267;&amp;#x884C;&amp;#x76F8;&amp;#x5173;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6807;&amp;#x8BC6;&amp;#x6216;&amp;#x8005;&amp;#x8BF4;&amp;#x4F9D;&amp;#x8D56;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x5373;&amp;#x540E;&amp;#x7EED;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x9700;&amp;#x8981;&amp;#x4F9D;&amp;#x8D56;&amp;#x4E8E;&amp;#x524D;&amp;#x9762;&amp;#x67D0;&amp;#x4E9B;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x7279;&amp;#x8272;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#x4E4B;&amp;#x540E;&amp;#x624D;&amp;#x80FD;&amp;#x8FDB;&amp;#x884C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x4F53;&amp;#x73B0;&amp;#x90FD;&amp;#x5206;&amp;#x5E03;&amp;#x5728;&amp;#x8FD9;&amp;#x4E9B;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;traceBeginAndSlog(&amp;quot;StartServices&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;startBootstrapServices();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;startCoreServices();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;startOtherServices();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x63D2;&amp;#x5165;&amp;#x65F6;&amp;#x673A;&amp;#x4E3A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startBootstrapServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(SystemService.PHASE_WAIT_FOR_DEFAULT_DISPLAY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private void startCoreServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private void startOtherServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(SystemService.PHASE_LOCK_SETTINGS_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(SystemService.PHASE_SYSTEM_SERVICES_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(SystemService.PHASE_DEVICE_SPECIFIC_SERVICES_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.systemReady(() -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    SystemService.PHASE_ACTIVITY_MANAGER_READY);        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    SystemService.PHASE_THIRD_PARTY_APPS_CAN_START);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x54CD;&amp;#x5E94;&amp;#x5404;&amp;#x4E2A;&amp;#x9636;&amp;#x6BB5;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x903B;&amp;#x8F91;&amp;#x662F;&amp;#x5728;&amp;#x5BF9;&amp;#x5E94;service&amp;#x7684;onBootPhase()&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void onBootPhase(int phase) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;&amp;#x5404;&amp;#x4E2A;&amp;#x9636;&amp;#x6BB5;&amp;#x90FD;&amp;#x542F;&amp;#x52A8;&amp;#x4E86;&amp;#x54EA;&amp;#x4E9B;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;startBootstrapServices&quot;&gt;&lt;a href=&quot;#startBootstrapServices&quot; class=&quot;headerlink&quot; title=&quot;startBootstrapServices&quot;&gt;&lt;/a&gt;startBootstrapServices&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startBootstrapServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final String TAG_SYSTEM_CONFIG = &amp;quot;ReadingSystemConfig&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    traceBeginAndSlog(TAG_SYSTEM_CONFIG);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SystemServerInitThreadPool.get().submit(SystemConfig::getInstance, TAG_SYSTEM_CONFIG);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    traceEnd();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;Installer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Installer installer = mSystemServiceManager.startService(Installer.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;DeviceIdentifiersPolicyService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(DeviceIdentifiersPolicyService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;ActivityManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService = mSystemServiceManager.startService(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ActivityManagerService.Lifecycle.class).getService();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setSystemServiceManager(mSystemServiceManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setInstaller(installer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;PowerManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mPowerManagerService = mSystemServiceManager.startService(PowerManagerService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521D;&amp;#x59CB;&amp;#x5316;PowerManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.initPowerManagement();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;RecoverySystemService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(RecoverySystemService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RescueParty.noteBoot(mSystemContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;LightsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(LightsService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;SidekickService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (SystemProperties.getBoolean(&amp;quot;config.enable_sidekick_graphics&amp;quot;, false)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(WEAR_SIDEKICK_SERVICE_CLASS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;DisplayManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mDisplayManagerService = mSystemServiceManager.startService(DisplayManagerService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x63D2;&amp;#x5165;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x6267;&amp;#x884C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x903B;&amp;#x8F91;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(SystemService.PHASE_WAIT_FOR_DEFAULT_DISPLAY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x5F00;&amp;#x59CB;&amp;#x63D2;&amp;#x5165;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x79F0;&amp;#x4E4B;&amp;#x4E3A;BootPhase 0&amp;#xFF0C;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x6709;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Installer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DeviceIdentifiersPolicyService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UriGrantsManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ActivityManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PowerManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RecoverySystemService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LightsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DisplayManagerService&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;PackageManager&amp;#x542F;&amp;#x52A8;&amp;#x9700;&amp;#x8981;DisplayManagerService&amp;#x7684;&amp;#x76F8;&amp;#x5173;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8BBE;&amp;#x7F6E;BootPhase 100&amp;#xFF0C;&amp;#x6267;&amp;#x884C;DisplayManagerService&amp;#x4E2D;&amp;#x7684;onBootPhase&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x5904;&amp;#x7406;BootPhase 100&amp;#x7684;&amp;#x903B;&amp;#x8F91;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void onBootPhase(int phase) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (phase == PHASE_WAIT_FOR_DEFAULT_DISPLAY) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        synchronized (mSyncRoot) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            long timeout = SystemClock.uptimeMillis()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    + mInjector.getDefaultDisplayDelayTimeout();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            while (mLogicalDisplays.get(Display.DEFAULT_DISPLAY) == null ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mVirtualDisplayAdapter == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                long delay = timeout - SystemClock.uptimeMillis();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (delay &amp;lt;= 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    throw new RuntimeException(&amp;quot;Timeout waiting for default display &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            + &amp;quot;to be initialized. DefaultDisplay=&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            + mLogicalDisplays.get(Display.DEFAULT_DISPLAY)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            + &amp;quot;, mVirtualDisplayAdapter=&amp;quot; + mVirtualDisplayAdapter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (DEBUG) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    Slog.d(TAG, &amp;quot;waitForDefaultDisplay: waiting, timeout=&amp;quot; + delay);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mSyncRoot.wait(delay);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } catch (InterruptedException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5904;&amp;#x7406;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#x7EE7;&amp;#x7EED;&amp;#x542F;&amp;#x52A8;PackageManagerService&amp;#x4E0E;&amp;#x5176;&amp;#x4ED6;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECE;BootPhase 100&amp;#x5230;BootPhase 480&amp;#x4F1A;&amp;#x542F;&amp;#x52A8;&amp;#x5927;&amp;#x91CF;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5305;&amp;#x62EC;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x3001;&amp;#x6838;&amp;#x5FC3;&amp;#x670D;&amp;#x52A1;&amp;#x4E0E;&amp;#x5176;&amp;#x4ED6;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&amp;#x5206;&amp;#x522B;&amp;#x4ECE;startBootstrapServices&amp;#x3001;startCoreServices&amp;#x5230;startOtherServices&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startBootstrapServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;PackageManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Watchdog.getInstance().pauseWatchingCurrentThread(&amp;quot;packagemanagermain&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mPackageManagerService = PackageManagerService.main(mSystemContext, installer,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mFactoryTestMode != FactoryTest.FACTORY_TEST_OFF, mOnlyCore);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Watchdog.getInstance().resumeWatchingCurrentThread(&amp;quot;packagemanagermain&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mFirstBoot = mPackageManagerService.isFirstBoot();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mPackageManager = mSystemContext.getPackageManager();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;UserManagerService&amp;#xFF0C;&amp;#x521B;&amp;#x5EFA;/data/user/ &amp;#x76EE;&amp;#x5F55;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(UserManagerService.LifeCycle.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;AMS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setSystemProcess();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;OverlayManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(new OverlayManagerService(mSystemContext, installer));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;SensorPrivacyService&amp;#xFF0C;&amp;#x4F20;&amp;#x611F;&amp;#x5668;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(new SensorPrivacyService(mSystemContext));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;BootPhase 100&amp;#x9636;&amp;#x6BB5;&amp;#xFF0C;startBootstrapServices&amp;#x542F;&amp;#x52A8;&amp;#x4EE5;&amp;#x4E0B;&amp;#x670D;&amp;#x52A1;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;PackageManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UserManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OverlayManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SensorPrivacyService&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x968F;&amp;#x540E;&amp;#x8FDB;&amp;#x5165;startCoreServices&lt;/p&gt;
&lt;h2 id=&quot;startCoreServices&quot;&gt;&lt;a href=&quot;#startCoreServices&quot; class=&quot;headerlink&quot; title=&quot;startCoreServices&quot;&gt;&lt;/a&gt;startCoreServices&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startCoreServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;BatterService, &amp;#x7BA1;&amp;#x7406;&amp;#x7535;&amp;#x91CF;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;LightService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(BatteryService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;UsageStatsService&amp;#xFF0C;&amp;#x7EDF;&amp;#x8BA1;&amp;#x5E94;&amp;#x7528;&amp;#x4F7F;&amp;#x7528;&amp;#x60C5;&amp;#x51B5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(UsageStatsService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.setUsageStatsManager(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LocalServices.getService(UsageStatsManagerInternal.class));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;WebViewUpdateService, &amp;#x7BA1;&amp;#x7406;WebView&amp;#x66F4;&amp;#x65B0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mPackageManager.hasSystemFeature(PackageManager.FEATURE_WEBVIEW)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mWebViewUpdateService = mSystemServiceManager.startService(WebViewUpdateService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;CachedDeviceStateService, &amp;#x7F13;&amp;#x5B58;&amp;#x8BBE;&amp;#x5907;&amp;#x72B6;&amp;#x6001;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(CachedDeviceStateService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;BinderCallsStatsService, &amp;#x8BB0;&amp;#x5F55;cpu&amp;#x5728;binder&amp;#x56DE;&amp;#x8C03;&amp;#x4E2D;&amp;#x82B1;&amp;#x8D39;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(BinderCallsStatsService.LifeCycle.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;LooperStatsService, &amp;#x8BB0;&amp;#x5F55;&amp;#x4F7F;&amp;#x7528;handler message&amp;#x82B1;&amp;#x8D39;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(LooperStatsService.Lifecycle.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;RollbackManagerService&amp;#xFF0C;&amp;#x7BA1;&amp;#x7406;apk&amp;#x56DE;&amp;#x5377;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(RollbackManagerService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;BugreportManagerService, &amp;#x6355;&amp;#x83B7;bug&amp;#x7684;&amp;#x62A5;&amp;#x544A;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(BugreportManagerService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;GpuService, &amp;#x7BA1;&amp;#x7406;GPU&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(GpuService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// BootPhase 100 &amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UsageStatsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WebViewUpdateService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CachedDeviceStateService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BinderCallsStatsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LooperStatsService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RollbackManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BugreportManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GpuService&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x662F;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x670D;&amp;#x52A1;&amp;#xFF1B;&amp;#x7EE7;&amp;#x7EED;&amp;#x8FDB;&amp;#x5165;startOtherServices&lt;/p&gt;
&lt;h2 id=&quot;startOtherServices&quot;&gt;&lt;a href=&quot;#startOtherServices&quot; class=&quot;headerlink&quot; title=&quot;startOtherServices&quot;&gt;&lt;/a&gt;startOtherServices&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void startOtherServices() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Context context = mSystemContext; // &amp;#x83B7;&amp;#x53D6;Context&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;sec_key_att_app_id_provider&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                new KeyAttestationApplicationIdProviderService(context));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(KeyChainSystemService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;scheduling_policy&amp;quot;, new SchedulingPolicyService());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(TelecomLoaderService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        telephonyRegistry = new TelephonyRegistry(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ServiceManager.addService(&amp;quot;telephony.registry&amp;quot;, telephonyRegistry);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mEntropyMixer = new EntropyMixer(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mContentResolver = context.getContentResolver(); // &amp;#x83B7;&amp;#x53D6;ContentResolver&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(ACCOUNT_SERVICE_CLASS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(CONTENT_SERVICE_CLASS);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.installSystemProviders(); // &amp;#x5B89;&amp;#x88C5;&amp;#x7CFB;&amp;#x7EDF;Provider&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startService(new AlarmManagerService(context)); // &amp;#x95F9;&amp;#x949F;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.setWindowManager(wm); // &amp;#x8BBE;&amp;#x7F6E;WindowManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FDB;&amp;#x5165;&amp;#x5B89;&amp;#x5168;&amp;#x6A21;&amp;#x5F0F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (safeMode) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.enterSafeMode();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase  480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(SystemService.PHASE_LOCK_SETTINGS_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(SystemService.PHASE_SYSTEM_SERVICES_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 520&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(SystemService.PHASE_DEVICE_SPECIFIC_SERVICES_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        wm.systemReady();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;making Window Manager Service ready&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (safeMode) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mActivityManagerService.showSafeModeOverlay();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x66F4;&amp;#x65B0;Configuration&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Configuration config = wm.computeNewConfiguration(DEFAULT_DISPLAY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DisplayMetrics metrics = new DisplayMetrics();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WindowManager w = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    w.getDefaultDisplay().getMetrics(metrics);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    context.getResources().updateConfiguration(config, metrics);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Theme systemTheme = context.getTheme();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (systemTheme.getChangingConfigurations() != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        systemTheme.rebase();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mPowerManagerService.systemReady(mActivityManagerService.getAppOpsService());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reportWtf(&amp;quot;making Power Manager Service ready&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startService(PermissionPolicyService.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mPackageManagerService.systemReady();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mActivityManagerService.systemReady(() -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // BootPhase 550&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                SystemService.PHASE_ACTIVITY_MANAGER_READY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mActivityManagerService.startObservingNativeCrashes();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            reportWtf(&amp;quot;observing native crashes&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        traceBeginAndSlog(&amp;quot;MakeConnectivityServiceReady&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (connectivityF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                connectivityF.systemReady();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            reportWtf(&amp;quot;making Connectivity Service ready&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // BootPhase 600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSystemServiceManager.startBootPhase(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                SystemService.PHASE_THIRD_PARTY_APPS_CAN_START);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (locationF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                locationF.systemRunning();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            reportWtf(&amp;quot;Notifying Location Service running&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (countryDetectorF != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                countryDetectorF.systemRunning();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            reportWtf(&amp;quot;Notifying CountryDetectorService running&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }, BOOT_TIMINGS_TRACE_LOG);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;startOtherServices&amp;#x4E2D;&amp;#x542F;&amp;#x52A8;&amp;#x4E86;&amp;#x5927;&amp;#x91CF;&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x603B;&amp;#x5171;&amp;#x5DEE;&amp;#x4E0D;&amp;#x591A;&amp;#x6709;80&amp;#x591A;&amp;#x79CD;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C31;&amp;#x4E0D;&amp;#x4E00;&amp;#x4E00;&amp;#x5217;&amp;#x4E3E;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x8FD9;&amp;#x91CC;&amp;#x5C06;&amp;#x5176;&amp;#x4E0E;BootPhase&amp;#x505A;&amp;#x4E86;&amp;#x4E2A;&amp;#x5F52;&amp;#x603B;&amp;#xFF0C;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;&amp;#x5404;&amp;#x4E2A;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x8282;&amp;#x70B9;&amp;#x90FD;&amp;#x542F;&amp;#x52A8;&amp;#x4E86;&amp;#x54EA;&amp;#x4E9B;&amp;#x670D;&amp;#x52A1;&amp;#x4E0E;&amp;#x5BF9;&amp;#x5E94;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// BootPhase 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KeyAttestationApplicationIdProviderService (startOtherServices)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KeyChainSystemService &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SchedulingPolicyService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TelecomLoaderService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TelephonyRegistry&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EntropyMixer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AccountManagerService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ContentService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...(&amp;#x5927;&amp;#x91CF;&amp;#x670D;&amp;#x52A1;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AppBindingService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootPhase 480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootPhase 500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PermissionPolicyService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DeviceSpecificServices(&amp;#x5305;&amp;#x542B;&amp;#x5927;&amp;#x91CF;Service)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x51C6;&amp;#x5907;&amp;#x597D; Power&amp;#x3001;Package&amp;#x4E0E;Diaplay&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PowerManagerService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PackageManagerService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DisplayManagerService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootPhase 520&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootPhase 550&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CarServiceHelperService&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;startSystemUi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x51C6;&amp;#x5907;&amp;#x597D; Network&amp;#x3001;Ip&amp;#x3001;Connectivity&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkManagementService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkPolicyManagerService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IpSecService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkStatsService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ConnectivityService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkPolicyService.systemReady&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootPhase 600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkStack&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x8FD0;&amp;#x884C;Location&amp;#x3001;CountryDetection&amp;#x3001;Network&amp;#x3001;Input&amp;#x3001;Telephoney&amp;#x3001;Media&amp;#x3001;Mms&amp;#x3001;Incident&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LocationService.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CountryDetectionService.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NetworkTimeUpdateService.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;InputManagerService.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TelephonyRegistry.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MediaRouterService.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MmsServiceBroker.systemRunning&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IncidentDaemon.systemRunning&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x7ECF;&amp;#x8FC7;&amp;#x4EE5;&amp;#x4E0A;&amp;#x4E00;&amp;#x7CFB;&amp;#x5217;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#x8C03;&amp;#x7528;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;ActivityManagerService&amp;#x7684;finishBooting&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x6267;&amp;#x884C;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x4E2A;BootPhase 1000&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;final void finishBooting() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // BootPhase 1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mSystemServiceManager.startBootPhase(SystemService.PHASE_BOOT_COMPLETED);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x6B64;&amp;#xFF0C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x670D;&amp;#x52A1;&amp;#x542F;&amp;#x52A8;&amp;#x9636;&amp;#x6BB5;&amp;#x5B8C;&amp;#x6210;&amp;#x5C31;&amp;#x7EEA;&amp;#xFF0C;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#x542F;&amp;#x52A8;&amp;#x5B8C;&amp;#x6210;&amp;#x5219;&amp;#x8FDB;&amp;#x5165;Looper.loop()&amp;#x72B6;&amp;#x6001;&amp;#xFF0C;&amp;#x7B49;&amp;#x5F85;&amp;#x6D88;&amp;#x606F;&amp;#x961F;&amp;#x5217;MessageQueue&amp;#x4E2D;&amp;#x7684;&amp;#x6D88;&amp;#x606F;&amp;#x5230;&amp;#x6765;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6267;&amp;#x884C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Message&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x662F;SystemService&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;BootPhase 0 ~ BootPhase 1000&amp;#x6765;&amp;#x5206;&amp;#x522B;&amp;#x542F;&amp;#x52A8;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;Service&amp;#xFF0C;&amp;#x6839;&amp;#x636E;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;BootPhase&amp;#xFF0C;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;Service&amp;#x6267;&amp;#x884C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&amp;#x540E;&amp;#x7EED;Service&amp;#x542F;&amp;#x52A8;&amp;#x903B;&amp;#x8F91;&amp;#x4E0E;&amp;#x6267;&amp;#x884C;&amp;#x903B;&amp;#x8F91;&amp;#x53EF;&amp;#x80FD;&amp;#x4F9D;&amp;#x8D56;&amp;#x4E8E;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;Service&amp;#xFF0C;&amp;#x800C;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x4F9D;&amp;#x8D56;&amp;#x7BA1;&amp;#x7406;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;BootPhase&amp;#x6765;&amp;#x5EFA;&amp;#x7ACB;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Android SystemServer启动(一)</title>
    <link href="https://www.rousetime.com/2020/12/31/Android-SystemServer%E5%90%AF%E5%8A%A8-%E4%B8%80/"/>
    <id>https://www.rousetime.com/2020/12/31/Android-SystemServer启动-一/</id>
    <published>2020-12-31T14:31:15.000Z</published>
    <updated>2022-11-30T14:35:45.005Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1353481402&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android init &amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1204064574&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android Linux Zygote&amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484921&amp;amp;idx=1&amp;amp;sn=bf7251253d23c17c9148423f6f1e386e&amp;amp;chksm=e8e0fc69df97757f2aec459954c07d0fc44be4bd6c6963dab2b5c5b01d8e8176c9069ddab12c&amp;amp;token=757375240&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android Java Zygote&amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Android&amp;#x901A;&amp;#x8FC7;Linux&amp;#x542F;&amp;#x52A8;init&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C; &amp;#x518D;&amp;#x901A;&amp;#x8FC7;init&amp;#x8FDB;&amp;#x7A0B;fork&amp;#x51FA;Zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&amp;#x5728;Zygote&amp;#x4E2D;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x91CD;&amp;#x8981;&amp;#x7684;&amp;#x6B65;&amp;#x9AA4;&amp;#x5C31;&amp;#x662F;&amp;#x542F;&amp;#x52A8;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x521B;&amp;#x5EFA;SystemServer&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x4EEC;&amp;#x6765;&amp;#x6DF1;&amp;#x5165;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;SystemServer&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x6B64;&amp;#x6B21;&amp;#x5206;&amp;#x6790;&amp;#x8FC7;&amp;#x7A0B;&amp;#x57FA;&amp;#x4E8E;Android 10.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;forkSystemServer&quot;&gt;&lt;a href=&quot;#forkSystemServer&quot; class=&quot;headerlink&quot; title=&quot;forkSystemServer&quot;&gt;&lt;/a&gt;forkSystemServer&lt;/h2&gt;&lt;p&gt;&amp;#x5728;ZygoteInit&amp;#x4E2D;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;forkSystemServer&amp;#x6765;&amp;#x521B;&amp;#x5EFA;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private static Runnable forkSystemServer(String abiList, String socketName,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ZygoteServer zygoteServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    long capabilities = posixCapabilitiesAsBits(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_IPC_LOCK,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_KILL,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_NET_ADMIN,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_NET_BIND_SERVICE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_NET_BROADCAST,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_NET_RAW,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_SYS_MODULE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_SYS_NICE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_SYS_PTRACE,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_SYS_TIME,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_SYS_TTY_CONFIG,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_WAKE_ALARM,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        OsConstants.CAP_BLOCK_SUSPEND&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /* Containers run without some capabilities, so drop any caps that are not available. */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StructCapUserHeader header = new StructCapUserHeader(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            OsConstants._LINUX_CAPABILITY_VERSION_3, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StructCapUserData[] data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data = Os.capget(header);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (ErrnoException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&amp;quot;Failed to capget()&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    capabilities &amp;amp;= ((long) data[0].effective) | (((long) data[1].effective) &amp;lt;&amp;lt; 32);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // system_server &amp;#x8FDB;&amp;#x7A0B;&amp;#x53C2;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String args[] = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--setuid=1000&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--setgid=1000&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--setgroups=1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1018,1021,1023,1024,1032,1065,3001,3002,3003,3006,3007,3009,3010&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--capabilities=&amp;quot; + capabilities + &amp;quot;,&amp;quot; + capabilities,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--nice-name=system_server&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--runtime-args&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;--target-sdk-version=&amp;quot; + VMRuntime.SDK_VERSION_CUR_DEVELOPMENT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;com.android.server.SystemServer&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ZygoteConnection.Arguments parsedArgs = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x89E3;&amp;#x6790;&amp;#x53C2;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        parsedArgs = new ZygoteConnection.Arguments(args);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ZygoteConnection.applyDebuggerSystemProperty(parsedArgs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ZygoteConnection.applyInvokeWithSystemProperty(parsedArgs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        boolean profileSystemServer = SystemProperties.getBoolean(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;dalvik.vm.profilesystemserver&amp;quot;, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (profileSystemServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            parsedArgs.runtimeFlags |= Zygote.PROFILE_SYSTEM_SERVER;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // fork&amp;#x51FA;system_server&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pid = Zygote.forkSystemServer(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.uid, parsedArgs.gid,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.gids,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.runtimeFlags,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                null,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.permittedCapabilities,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.effectiveCapabilities);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (IllegalArgumentException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // system_server&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (pid == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (hasSecondZygote(abiList)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            waitForSecondaryZygote(socketName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x5173;&amp;#x95ED;&amp;#x539F;&amp;#x6709;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        zygoteServer.closeServerSocket();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x64CD;&amp;#x4F5C;system_server&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return handleSystemServerProcess(parsedArgs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F1A;&amp;#x51C6;&amp;#x5907;fork&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4ECE;&amp;#x53C2;&amp;#x6570;&amp;#x4FE1;&amp;#x606F;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x51FA;&amp;#xFF0C;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;uid=1000&amp;#x3001;gid=1000&amp;#xFF0C;&amp;#x8FDB;&amp;#x7A0B;&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;system_server&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x542F;&amp;#x52A8;&amp;#x7684;SystemServer&amp;#x8DEF;&amp;#x5F84;&amp;#x4E3A;com.android.server.SystemServer&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECE;zygote&amp;#x8FDB;&amp;#x7A0B;fork&amp;#x65B0;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E4B;&amp;#x540E;&amp;#x4F1A;&amp;#x5C06;&amp;#x539F;&amp;#x6765;&amp;#x7684;zygote&amp;#x7684;socket&amp;#x5173;&amp;#x95ED;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x7B49;&amp;#x5F85;&amp;#x7B2C;2&amp;#x4E2A;zygote&amp;#x521B;&amp;#x5EFA;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public static int forkSystemServer(int uid, int gid, int[] gids, int runtimeFlags,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        int[][] rlimits, long permittedCapabilities, long effectiveCapabilities) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    VM_HOOKS.preFork();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Resets nice priority for zygote process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetNicePriority();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int pid = nativeForkSystemServer(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            uid, gid, gids, runtimeFlags, rlimits, permittedCapabilities, effectiveCapabilities);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Enable tracing as soon as we enter the system_server.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (pid == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Trace.setTracingEnabled(true, runtimeFlags);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    VM_HOOKS.postForkCommon();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;nativeForkSystemServer&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;JNI&amp;#x6620;&amp;#x5C04;&amp;#x5230;com_android_internal_os_Zygote.cpp&amp;#x4E2D;&amp;#x7684;com_android_internal_os_Zygote_nativeForkSystemServer&amp;#x65B9;&amp;#x6CD5;.&lt;/p&gt;
&lt;h2 id=&quot;nativeForkSystemServer&quot;&gt;&lt;a href=&quot;#nativeForkSystemServer&quot; class=&quot;headerlink&quot; title=&quot;nativeForkSystemServer&quot;&gt;&lt;/a&gt;nativeForkSystemServer&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static jint com_android_internal_os_Zygote_nativeForkSystemServer(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        JNIEnv* env, jclass, uid_t uid, gid_t gid, jintArray gids,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jint runtime_flags, jobjectArray rlimits, jlong permitted_capabilities,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jlong effective_capabilities) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  std::vector&amp;lt;int&amp;gt; fds_to_close(MakeUsapPipeReadFDVector()),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   fds_to_ignore(fds_to_close);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fds_to_close.push_back(gUsapPoolSocketFD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (gUsapPoolEventFD != -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fds_to_close.push_back(gUsapPoolEventFD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fds_to_ignore.push_back(gUsapPoolEventFD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (gSystemServerSocketFd != -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      fds_to_close.push_back(gSystemServerSocketFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      fds_to_ignore.push_back(gSystemServerSocketFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // fork &amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pid_t pid = ForkCommon(env, true,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         fds_to_close,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         fds_to_ignore,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (pid == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      // &amp;#x5904;&amp;#x7406;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      SpecializeCommon(env, uid, gid, gids, runtime_flags, rlimits,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       permitted_capabilities, effective_capabilities,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       MOUNT_EXTERNAL_DEFAULT, nullptr, nullptr, true,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       false, nullptr, nullptr, /* is_top_app= */ false,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       /* pkg_data_info_list */ nullptr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       /* whitelisted_data_info_list */ nullptr, false, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  } else if (pid &amp;gt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      gSystemServerPid = pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      int status;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (waitpid(pid, &amp;amp;status, WNOHANG) == pid) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          ALOGE(&amp;quot;System server process %d has died. Restarting Zygote!&amp;quot;, pid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          RuntimeAbort(env, __LINE__, &amp;quot;System server process has died. Restarting Zygote!&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (UsePerAppMemcg()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          if (!SetTaskProfiles(pid, std::vector&amp;lt;std::string&amp;gt;{&amp;quot;SystemMemoryProcess&amp;quot;})) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              ALOGE(&amp;quot;couldn&amp;apos;t add process %d into system memcg group&amp;quot;, pid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;ForkCommon&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/p&gt;
&lt;h2 id=&quot;ForkCommon&quot;&gt;&lt;a href=&quot;#ForkCommon&quot; class=&quot;headerlink&quot; title=&quot;ForkCommon&quot;&gt;&lt;/a&gt;ForkCommon&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static pid_t ForkCommon(JNIEnv* env, bool is_system_server,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        const std::vector&amp;lt;int&amp;gt;&amp;amp; fds_to_close,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        const std::vector&amp;lt;int&amp;gt;&amp;amp; fds_to_ignore,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        bool is_priority_fork) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  SetSignalHandlers();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  auto fail_fn = std::bind(ZygoteFailure, env, is_system_server ? &amp;quot;system_server&amp;quot; : &amp;quot;zygote&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           nullptr, _1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  BlockSignal(SIGCHLD, fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  __android_log_close();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  AStatsSocket_close();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (gOpenFdTable == nullptr) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gOpenFdTable = FileDescriptorTable::Create(fds_to_ignore, fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gOpenFdTable-&amp;gt;Restat(fds_to_ignore, fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  android_fdsan_error_level fdsan_error_level = android_fdsan_get_error_level();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mallopt(M_PURGE, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // fork&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pid_t pid = fork();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (pid == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5904;&amp;#x7406;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x903B;&amp;#x8F91;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (is_priority_fork) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      setpriority(PRIO_PROCESS, 0, PROCESS_PRIORITY_MAX);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      setpriority(PRIO_PROCESS, 0, PROCESS_PRIORITY_MIN);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // The child process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PAuthKeyChange(env);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PreApplicationInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Clean up any descriptors which must be closed immediately&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DetachDescriptors(env, fds_to_close, fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Invalidate the entries in the USAP table.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ClearUsapTable();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Re-open all remaining open file descriptors so that they aren&amp;apos;t shared&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // with the zygote across a fork.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gOpenFdTable-&amp;gt;ReopenOrDetach(fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Turn fdsan back on.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    android_fdsan_set_error_level(fdsan_error_level);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Reset the fd to the unsolicited zygote socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gSystemServerSocketFd = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGD(&amp;quot;Forked child process %d&amp;quot;, pid);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // We blocked SIGCHLD prior to a fork, we unblock it here.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  UnblockSignal(SIGCHLD, fail_fn);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;fork&amp;#x521B;&amp;#x5EFA;&amp;#x8FDB;&amp;#x7A0B;&amp;#x91C7;&amp;#x7528;&amp;#x7684;&amp;#x662F;copy on write&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x662F;Linux&amp;#x521B;&amp;#x5EFA;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4F1A;&amp;#x6709;&amp;#x4E24;&amp;#x6B21;&amp;#x8FD4;&amp;#x56DE;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD4;&amp;#x56DE;0&amp;#x65F6;&amp;#x4EE3;&amp;#x8868;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x8FD4;&amp;#x56DE;&amp;#x503C;&amp;#x5927;&amp;#x4E8E;0&amp;#x4E3A;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FDB;&amp;#x7A0B;&amp;#x521B;&amp;#x5EFA;&amp;#x5B8C;&amp;#x6BD5;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8FD4;&amp;#x56DE;Java&amp;#x5C42;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FDB;&amp;#x5165;handleSystemServerProcess&amp;#x6765;&amp;#x5904;&amp;#x7406;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;handleSystemServerProcess&quot;&gt;&lt;a href=&quot;#handleSystemServerProcess&quot; class=&quot;headerlink&quot; title=&quot;handleSystemServerProcess&quot;&gt;&lt;/a&gt;handleSystemServerProcess&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private static Runnable handleSystemServerProcess(ZygoteConnection.Arguments parsedArgs) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Os.umask(S_IRWXG | S_IRWXO);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;&amp;#x8FDB;&amp;#x7A0B;&amp;#x540D;&amp;#x79F0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (parsedArgs.niceName != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Process.setArgV0(parsedArgs.niceName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final String systemServerClasspath = Os.getenv(&amp;quot;SYSTEMSERVERCLASSPATH&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (systemServerClasspath != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        performSystemServerDexOpt(systemServerClasspath);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        boolean profileSystemServer = SystemProperties.getBoolean(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;dalvik.vm.profilesystemserver&amp;quot;, false);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (profileSystemServer &amp;amp;&amp;amp; (Build.IS_USERDEBUG || Build.IS_ENG)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                prepareSystemServerProfile(systemServerClasspath);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } catch (Exception e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Log.wtf(TAG, &amp;quot;Failed to set up system server profile&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (parsedArgs.invokeWith != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String[] args = parsedArgs.remainingArgs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (systemServerClasspath != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            String[] amendedArgs = new String[args.length + 2];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            amendedArgs[0] = &amp;quot;-cp&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            amendedArgs[1] = systemServerClasspath;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            System.arraycopy(args, 0, amendedArgs, 2, args.length);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            args = amendedArgs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x542F;&amp;#x52A8;&amp;#x5E94;&amp;#x7528;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        WrapperInit.execApplication(parsedArgs.invokeWith,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                parsedArgs.niceName, parsedArgs.targetSdkVersion,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                VMRuntime.getCurrentInstructionSet(), null, args);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new IllegalStateException(&amp;quot;Unexpected return from WrapperInit.execApplication&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ClassLoader cl = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (systemServerClasspath != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x521B;&amp;#x5EFA;ClassLoader&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            cl = createPathClassLoader(systemServerClasspath, parsedArgs.targetSdkVersion);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Thread.currentThread().setContextClassLoader(cl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return ZygoteInit.zygoteInit(parsedArgs.targetSdkVersion, parsedArgs.remainingArgs, cl);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8BBE;&amp;#x7F6E;&amp;#x8FDB;&amp;#x7A0B;&amp;#x540D;&amp;#x79F0;system_server&amp;#xFF0C;&amp;#x5E76;&amp;#x901A;&amp;#x8FC7;zygoteInit&amp;#x8FDB;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public static final Runnable zygoteInit(int targetSdkVersion, String[] argv, ClassLoader classLoader) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (RuntimeInit.DEBUG) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Slog.d(RuntimeInit.TAG, &amp;quot;RuntimeInit: Starting application from zygote&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &amp;quot;ZygoteInit&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RuntimeInit.redirectLogStreams();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RuntimeInit.commonInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ZygoteInit.nativeZygoteInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return RuntimeInit.applicationInit(targetSdkVersion, argv, classLoader);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x8C03;&amp;#x7528;RuntimeInit.commonInit&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E00;&amp;#x4E9B;&amp;#x516C;&amp;#x7528;&amp;#x7684;&amp;#x4E1C;&amp;#x897F;&amp;#x3002;&amp;#x5E76;&amp;#x901A;&amp;#x8FC7;nativeZygoteInit&amp;#x8C03;&amp;#x7528;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6620;&amp;#x5C04;&amp;#x7684;Linux&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5373;app_main.cpp&amp;#x4E2D;&amp;#x7684;onZygoteInit&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;zygote&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;virtual void onZygoteInit() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sp&amp;lt;ProcessState&amp;gt; proc = ProcessState::self();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    proc-&amp;gt;startThreadPool(); //&amp;#x542F;&amp;#x52A8;&amp;#x65B0;binder&amp;#x7EBF;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ProcessState::self()&amp;#x662F;&amp;#x5355;&amp;#x4F8B;&amp;#x6A21;&amp;#x5F0F;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x5DE5;&amp;#x4F5C;&amp;#x662F;&amp;#x8C03;&amp;#x7528;open()&amp;#x6253;&amp;#x5F00;/dev/binder&amp;#x9A71;&amp;#x52A8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x518D;&amp;#x5229;&amp;#x7528;mmap()&amp;#x6620;&amp;#x5C04;&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x5C06;Binder&amp;#x9A71;&amp;#x52A8;&amp;#x7684;fd&amp;#x8D4B;&amp;#x503C;ProcessState&amp;#x5BF9;&amp;#x8C61;&amp;#x4E2D;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;mDriverFD&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x4EA4;&amp;#x4E92;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;startThreadPool()&amp;#x662F;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B0;&amp;#x7684;binder&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4E0D;&amp;#x65AD;&amp;#x8FDB;&amp;#x884C;talkWithDriver()&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;applicationInit&quot;&gt;&lt;a href=&quot;#applicationInit&quot; class=&quot;headerlink&quot; title=&quot;applicationInit&quot;&gt;&lt;/a&gt;applicationInit&lt;/h2&gt;&lt;p&gt;&amp;#x7EE7;&amp;#x7EED;&amp;#x56DE;&amp;#x5230;Java&amp;#xFF0C;&amp;#x8C03;&amp;#x7528;applicationInit&amp;#x65B9;&amp;#x6CD5;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;protected static Runnable applicationInit(int targetSdkVersion, String[] argv,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ClassLoader classLoader) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nativeSetExitWithoutCleanup(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    VMRuntime.getRuntime().setTargetHeapUtilization(0.75f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    VMRuntime.getRuntime().setTargetSdkVersion(targetSdkVersion);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x89E3;&amp;#x6790;&amp;#x53C2;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Arguments args = new Arguments(argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return findStaticMain(args.startClass, args.startArgs, classLoader);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x5217;&amp;#x8868;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x77E5;&amp;#x9053;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;startclass&amp;#x5C31;&amp;#x662F;com.android.server.SystemServer&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;findStaticMain&quot;&gt;&lt;a href=&quot;#findStaticMain&quot; class=&quot;headerlink&quot; title=&quot;findStaticMain&quot;&gt;&lt;/a&gt;findStaticMain&lt;/h2&gt;&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x8FDB;&amp;#x5165;findStaticMain&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;SystemServer&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;protected static Runnable findStaticMain(String className, String[] argv,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ClassLoader classLoader) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class&amp;lt;?&amp;gt; cl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cl = Class.forName(className, true, classLoader);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (ClassNotFoundException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Missing class when invoking static main &amp;quot; + className,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Method m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        m = cl.getMethod(&amp;quot;main&amp;quot;, new Class[] { String[].class });&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (NoSuchMethodException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Missing static main on &amp;quot; + className, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (SecurityException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Problem getting static main on &amp;quot; + className, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int modifiers = m.getModifiers();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (! (Modifier.isStatic(modifiers) &amp;amp;&amp;amp; Modifier.isPublic(modifiers))) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;Main method is not public and static on &amp;quot; + className);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new MethodAndArgsCaller(m, argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E5F;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;Java&amp;#x53CD;&amp;#x5C04;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Class&amp;#x3001;Method&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;SystemServer&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x8FD4;&amp;#x56DE;MethodAndArgsCaller&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static class MethodAndArgsCaller implements Runnable {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /** method to call */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private final Method mMethod;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /** argument array */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private final String[] mArgs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public MethodAndArgsCaller(Method method, String[] args) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mMethod = method;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mArgs = args;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void run() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mMethod.invoke(null, new Object[] { mArgs });&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (IllegalAccessException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (InvocationTargetException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Throwable cause = ex.getCause();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (cause instanceof RuntimeException) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                throw (RuntimeException) cause;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (cause instanceof Error) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                throw (Error) cause;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5982;&amp;#x679C;&amp;#x8C03;&amp;#x7528;run&amp;#x65B9;&amp;#x6CD5;&amp;#x5C31;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x53CD;&amp;#x5C04;&amp;#x6765;&amp;#x6267;&amp;#x884C;SystemServer&amp;#x4E2D;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x8FD9;&amp;#x4E2A;Runnable&amp;#x6700;&amp;#x7EC8;&amp;#x5728;ZygoteInit&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x901A;&amp;#x8FC7;forkSystemServer&amp;#x521B;&amp;#x5EFA;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;if (startSystemServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Runnable r = forkSystemServer(abiList, socketName, zygoteServer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // {@code r == null} in the parent (zygote) process, and {@code r != null} in the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // child (system_server) process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (r != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;Runnable&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x8C03;&amp;#x7528;r.run()&amp;#x6765;&amp;#x6267;&amp;#x884C;SystemServer&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x7EC8;&amp;#x8FDB;&amp;#x5165;SystemServer&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x627E;&amp;#x5230;&amp;#x4E86;&amp;#x8FDB;&amp;#x5165;SystemServer&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x7EE7;&amp;#x7EED;&amp;#x5206;&amp;#x6790;SystemServer&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x4E0E;&amp;#x5185;&amp;#x90E8;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Android Java Zygote启动</title>
    <link href="https://www.rousetime.com/2020/12/17/Android-Java-Zygote%E5%90%AF%E5%8A%A8/"/>
    <id>https://www.rousetime.com/2020/12/17/Android-Java-Zygote启动/</id>
    <published>2020-12-17T14:08:05.000Z</published>
    <updated>2022-11-30T14:26:36.993Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1353481402&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android init &amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1204064574&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android Linux Zygote&amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5206;&amp;#x6790;&amp;#x5230;Zygote&amp;#x6700;&amp;#x540E;&amp;#x5728;Linux&amp;#x7684;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E2D;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;&amp;#x5982;&amp;#x4E0B;&amp;#x4EE3;&amp;#x7801;&amp;#x542F;&amp;#x52A8;Java&amp;#x5C42;&amp;#x7684;ZygoteInit&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;runtime.start(&amp;quot;com.android.internal.os.ZygoteInit&amp;quot;, args, zygote);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x8FDB;&amp;#x5165;runtime.start()&amp;#x65B9;&amp;#x6CD5;&amp;#x770B;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;AndroidRuntime&quot;&gt;&lt;a href=&quot;#AndroidRuntime&quot; class=&quot;headerlink&quot; title=&quot;AndroidRuntime&quot;&gt;&lt;/a&gt;AndroidRuntime&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;frameworks/base/core/jni/AndroidRuntime.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void AndroidRuntime::start(const char* className, const Vector&amp;lt;String8&amp;gt;&amp;amp; options, bool zygote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGD(&amp;quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; START %s uid %d &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;\n&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            className != NULL ? className : &amp;quot;(unknown)&amp;quot;, getuid());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    static const String8 startSystemServer(&amp;quot;start-system-server&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Whether this is the primary zygote, meaning the zygote which will fork system server.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bool primary_zygote = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * &amp;apos;startSystemServer == true&amp;apos; means runtime is obsolete and not run from&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * init.rc anymore, so we print out the boot start event here.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (size_t i = 0; i &amp;lt; options.size(); ++i) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (options[i] == startSystemServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            primary_zygote = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           /* track our progress through the boot sequence */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           const int LOG_BOOT_PROGRESS_START = 3000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           LOG_EVENT_LONG(LOG_BOOT_PROGRESS_START,  ns2ms(systemTime(SYSTEM_TIME_MONOTONIC)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* rootDir = getenv(&amp;quot;ANDROID_ROOT&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (rootDir == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rootDir = &amp;quot;/system&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!hasDir(&amp;quot;/system&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LOG_FATAL(&amp;quot;No root directory specified, and /system does not exist.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setenv(&amp;quot;ANDROID_ROOT&amp;quot;, rootDir, 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* artRootDir = getenv(&amp;quot;ANDROID_ART_ROOT&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (artRootDir == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG_FATAL(&amp;quot;No ART directory specified with ANDROID_ART_ROOT environment variable.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* i18nRootDir = getenv(&amp;quot;ANDROID_I18N_ROOT&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (i18nRootDir == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG_FATAL(&amp;quot;No runtime directory specified with ANDROID_I18N_ROOT environment variable.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* tzdataRootDir = getenv(&amp;quot;ANDROID_TZDATA_ROOT&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (tzdataRootDir == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG_FATAL(&amp;quot;No tz data directory specified with ANDROID_TZDATA_ROOT environment variable.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //const char* kernelHack = getenv(&amp;quot;LD_ASSUME_KERNEL&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //ALOGD(&amp;quot;Found LD_ASSUME_KERNEL=&amp;apos;%s&amp;apos;\n&amp;quot;, kernelHack);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /* start the virtual machine */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JniInvocation jni_invocation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jni_invocation.Init(NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JNIEnv* env;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 1. &amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (startVm(&amp;amp;mJavaVM, &amp;amp;env, zygote, primary_zygote) != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onVmCreated(env);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Register android functions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 2. &amp;#x4F7F;&amp;#x7528;JNI&amp;#x6CE8;&amp;#x518C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Android Native &amp;#x65B9;&amp;#x6CD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (startReg(env) &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;Unable to register all android natives\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * We want to call main() with a String array with arguments in it.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * At present we have two arguments, the class name and an option string.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Create an array to hold them.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jclass stringClass;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jobjectArray strArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jstring classNameStr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 3. &amp;#x62FC;&amp;#x63A5;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;ZygoteInit Class &amp;#x4E0E; main&amp;#x65B9;&amp;#x6CD5;id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6; str = new String[options.size() + 1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stringClass = env-&amp;gt;FindClass(&amp;quot;java/lang/String&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    assert(stringClass != NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strArray = env-&amp;gt;NewObjectArray(options.size() + 1, stringClass, NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    assert(strArray != NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6; str[0] = &amp;quot;com.android.internal.os.ZygoteInit&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    classNameStr = env-&amp;gt;NewStringUTF(className);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    assert(classNameStr != NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    env-&amp;gt;SetObjectArrayElement(strArray, 0, classNameStr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6; str[1] = &amp;quot;start-system-server&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6; str[2] = &amp;quot;--abi-list=xxxx&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (size_t i = 0; i &amp;lt; options.size(); ++i) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jstring optionsStr = env-&amp;gt;NewStringUTF(options.itemAt(i).string());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        assert(optionsStr != NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        env-&amp;gt;SetObjectArrayElement(strArray, i + 1, optionsStr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Start VM.  This thread becomes the main thread of the VM, and will&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * not return until the VM exits.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6; &amp;quot;com/android/internal/os/ZygoteInit&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char* slashClassName = toSlashClassName(className != NULL ? className : &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x83B7;&amp;#x53D6;ZygoteInit Class&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    jclass startClass = env-&amp;gt;FindClass(slashClassName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (startClass == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;JavaVM unable to locate class &amp;apos;%s&amp;apos;\n&amp;quot;, slashClassName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        /* keep going */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x83B7;&amp;#x53D6; ZygoteInit&amp;#x4E2D;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jmethodID startMeth = env-&amp;gt;GetStaticMethodID(startClass, &amp;quot;main&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;([Ljava/lang/String;)V&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (startMeth == NULL) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ALOGE(&amp;quot;JavaVM unable to find main() in &amp;apos;%s&amp;apos;\n&amp;quot;, className);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            /* keep going */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // 4. &amp;#x8C03;&amp;#x7528; ZygoteInit.main()&amp;#x65B9;&amp;#x6CD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            env-&amp;gt;CallStaticVoidMethod(startClass, startMeth, strArray);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#if 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (env-&amp;gt;ExceptionCheck())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                threadExitUncaughtException(env);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x91CA;&amp;#x653E;&amp;#x5185;&amp;#x5B58;&amp;#x7A7A;&amp;#x95F4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    free(slashClassName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGD(&amp;quot;Shutting down VM\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mJavaVM-&amp;gt;DetachCurrentThread() != JNI_OK)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGW(&amp;quot;Warning: unable to detach main thread\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mJavaVM-&amp;gt;DestroyJavaVM() != 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGW(&amp;quot;Warning: VM did not shut down cleanly\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6839;&amp;#x636E;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x6CE8;&amp;#x91CA;&amp;#xFF0C;&amp;#x5C0F;&amp;#x61A9;&amp;#x5C06;start()&amp;#x65B9;&amp;#x6CD5;&amp;#x5206;&amp;#x4E3A;&amp;#x56DB;&amp;#x6B65;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;JNI&amp;#x6CE8;&amp;#x518C;Android Native&amp;#x65B9;&amp;#x6CD5;&lt;/li&gt;
&lt;li&gt;&amp;#x62FC;&amp;#x63A5;&amp;#x53C2;&amp;#x6570;&amp;#x3001;&amp;#x83B7;&amp;#x53D6;ZygoteInit Class&amp;#x4E0E;&amp;#x5176;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;id&lt;/li&gt;
&lt;li&gt;&amp;#x8C03;&amp;#x7528;ZygoteInit.main()&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8FDB;&amp;#x53BB;Java&amp;#x5C42;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&quot;&gt;&lt;a href=&quot;#&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&quot;&gt;&lt;/a&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&lt;/h3&gt;&lt;p&gt;&amp;#x901A;&amp;#x8FC7;startVm()&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int AndroidRuntime::startVm(JavaVM** pJavaVM, JNIEnv** pEnv, bool zygote, bool primary_zygote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    JavaVMInitArgs initArgs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char propBuf[PROPERTY_VALUE_MAX];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char jniOptsBuf[sizeof(&amp;quot;-Xjniopts:&amp;quot;)-1 + PROPERTY_VALUE_MAX];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char heapstartsizeOptsBuf[sizeof(&amp;quot;-Xms&amp;quot;)-1 + PROPERTY_VALUE_MAX];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char heapsizeOptsBuf[sizeof(&amp;quot;-Xmx&amp;quot;)-1 + PROPERTY_VALUE_MAX];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char heapgrowthlimitOptsBuf[sizeof(&amp;quot;-XX:HeapGrowthLimit=&amp;quot;)-1 + PROPERTY_VALUE_MAX];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char heapminfreeOptsBuf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        parseRuntimeOption(&amp;quot;dalvik.vm.heapstartsize&amp;quot;, heapstartsizeOptsBuf, &amp;quot;-Xms&amp;quot;, &amp;quot;4m&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    parseRuntimeOption(&amp;quot;dalvik.vm.heapsize&amp;quot;, heapsizeOptsBuf, &amp;quot;-Xmx&amp;quot;, &amp;quot;16m&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    parseRuntimeOption(&amp;quot;dalvik.vm.heapgrowthlimit&amp;quot;, heapgrowthlimitOptsBuf, &amp;quot;-XX:HeapGrowthLimit=&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    parseRuntimeOption(&amp;quot;dalvik.vm.heapminfree&amp;quot;, heapminfreeOptsBuf, &amp;quot;-XX:HeapMinFree=&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    parseRuntimeOption(&amp;quot;dalvik.vm.heapmaxfree&amp;quot;, heapmaxfreeOptsBuf, &amp;quot;-XX:HeapMaxFree=&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    initArgs.version = JNI_VERSION_1_4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    initArgs.options = mOptions.editArray();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    initArgs.nOptions = mOptions.size();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    initArgs.ignoreUnrecognized = JNI_FALSE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Initialize the VM.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * The JavaVM* is essentially per-process, and the JNIEnv* is per-thread.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * If this call succeeds, the VM is ready, and we can start issuing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * JNI calls.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (JNI_CreateJavaVM(pJavaVM, pEnv, &amp;amp;initArgs) &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ALOGE(&amp;quot;JNI_CreateJavaVM failed\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x5F88;&amp;#x957F;&amp;#xFF0C;&amp;#x4F46;&amp;#x4E3B;&amp;#x8981;&amp;#x4EFB;&amp;#x52A1;&amp;#x5C31;&amp;#x662F;&amp;#x8BBE;&amp;#x7F6E;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x7684;&amp;#x76F8;&amp;#x5173;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5404;&amp;#x4E2A;&amp;#x5C5E;&amp;#x6027;&amp;#x7684;&amp;#x4F5C;&amp;#x7528;&amp;#x5C31;&amp;#x4E0D;&amp;#x505A;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x884C;google&amp;#x5BF9;&amp;#x5E94;&amp;#x641C;&amp;#x7D22;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;JNI&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x518C;&quot;&gt;&lt;a href=&quot;#JNI&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x518C;&quot; class=&quot;headerlink&quot; title=&quot;JNI&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x518C;&quot;&gt;&lt;/a&gt;JNI&amp;#x65B9;&amp;#x6CD5;&amp;#x6CE8;&amp;#x518C;&lt;/h3&gt;&lt;p&gt;&amp;#x901A;&amp;#x8FC7;startReg()&amp;#x6765;&amp;#x6CE8;&amp;#x518C;Android Native&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int AndroidRuntime::startReg(JNIEnv* env)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ATRACE_NAME(&amp;quot;RegisterAndroidNatives&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * This hook causes all future threads created in this process to be&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * attached to the JavaVM.  (This needs to go away in favor of JNI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Attach calls.)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    androidSetCreateThreadFunc((android_create_thread_fn) javaCreateThreadEtc);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGV(&amp;quot;--- registering native functions ---\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * Every &amp;quot;register&amp;quot; function calls one or more things that return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * a local reference (e.g. FindClass).  Because we haven&amp;apos;t really&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * started the VM yet, they&amp;apos;re all getting stored in the base frame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * and never released.  Use Push/Pop to manage the storage.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    env-&amp;gt;PushLocalFrame(200);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x901A;&amp;#x8FC7;JNI&amp;#x6CE8;&amp;#x518C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (register_jni_procs(gRegJNI, NELEM(gRegJNI), env) &amp;lt; 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        env-&amp;gt;PopLocalFrame(NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    env-&amp;gt;PopLocalFrame(NULL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //createJavaThread(&amp;quot;fubar&amp;quot;, quickTest, (void*) &amp;quot;hello&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x90E8;&amp;#x5206;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;register_jni_procs&amp;#x6765;&amp;#x6CE8;&amp;#x518C;JNI&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;gRegJNI&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static const RegJNIRec gRegJNI[] = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_com_android_internal_os_RuntimeInit),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_com_android_internal_os_ZygoteInit_nativeZygoteInit),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_android_os_SystemClock),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_android_util_EventLog),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_android_util_Log),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        REG_JNI(register_android_util_MemoryIntArray),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x65B9;&amp;#x6CD5;&amp;#x5F88;&amp;#x591A;&amp;#x5C31;&amp;#x4E0D;&amp;#x4E00;&amp;#x4E00;&amp;#x5217;&amp;#x4E3E;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3E;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;register_com_android_internal_os_ZygoteInit_nativeZygoteInit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int register_com_android_internal_os_ZygoteInit_nativeZygoteInit(JNIEnv* env)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const JNINativeMethod methods[] = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        { &amp;quot;nativeZygoteInit&amp;quot;, &amp;quot;()V&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            (void*) com_android_internal_os_ZygoteInit_nativeZygoteInit },&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return jniRegisterNativeMethods(env, &amp;quot;com/android/internal/os/ZygoteInit&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        methods, NELEM(methods));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;com/android/internal/os/ZygoteInit&amp;#x4E2D;&amp;#x7684;nativeZygoteInit()&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x800C;nativeZygoteInit()&amp;#x65B9;&amp;#x6CD5;&amp;#x901A;&amp;#x8FC7;JNI&amp;#x6CE8;&amp;#x518C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x5728;Linux&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x662F;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;com_android_internal_os_ZygoteInit_nativeZygoteInit()&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static void com_android_internal_os_ZygoteInit_nativeZygoteInit(JNIEnv* env, jobject clazz)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gCurRuntime-&amp;gt;onZygoteInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x5B83;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;onZygoteInit()&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x5728;app_main.cpp&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;virtual void onZygoteInit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sp&amp;lt;ProcessState&amp;gt; proc = ProcessState::self();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ALOGV(&amp;quot;App process: starting thread pool.\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    proc-&amp;gt;startThreadPool();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x53C2;&amp;#x6570;&amp;#x3001;&amp;#x7C7B;&amp;#x3001;&amp;#x65B9;&amp;#x6CD5;&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x8C03;&amp;#x7528;&quot;&gt;&lt;a href=&quot;#&amp;#x53C2;&amp;#x6570;&amp;#x3001;&amp;#x7C7B;&amp;#x3001;&amp;#x65B9;&amp;#x6CD5;&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x8C03;&amp;#x7528;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x53C2;&amp;#x6570;&amp;#x3001;&amp;#x7C7B;&amp;#x3001;&amp;#x65B9;&amp;#x6CD5;&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x8C03;&amp;#x7528;&quot;&gt;&lt;/a&gt;&amp;#x53C2;&amp;#x6570;&amp;#x3001;&amp;#x7C7B;&amp;#x3001;&amp;#x65B9;&amp;#x6CD5;&amp;#x6784;&amp;#x5EFA;&amp;#x4E0E;&amp;#x8C03;&amp;#x7528;&lt;/h3&gt;&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x4E00;&amp;#x6B65;&amp;#x4E3B;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;FindClass()&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;Java&amp;#x7684;Class&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x6784;&amp;#x5EFA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;String[]&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4E0E;ZygoteInit Class&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x518D;&amp;#x901A;&amp;#x8FC7;GetStaticMethodID()&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;main()&amp;#x65B9;&amp;#x6CD5;&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;id&amp;#xFF0C;&amp;#x4EE5;&amp;#x4FBF;&amp;#x4E3A;&amp;#x4E4B;&amp;#x540E;&amp;#x8C03;&amp;#x7528;ZygoteInit.main()&amp;#x65B9;&amp;#x6CD5;&amp;#x505A;&amp;#x51C6;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x5728;&amp;#x901A;&amp;#x8FC7;CallStaticVoidMethod()&amp;#x6765;&amp;#x8C03;&amp;#x7528;ZygoteInit.main()&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x8FDB;&amp;#x5165;Java&amp;#x5C42;&amp;#x7684;ZygoteInit&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4ECE;runtime.start()&amp;#x5230;&amp;#x8C03;&amp;#x7528;Java&amp;#x5C42;&amp;#x7684;ZygoteInit.main()&amp;#x7684;&amp;#x6574;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x6D41;&amp;#x7A0B;&amp;#x56FE;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2020/12/17/Android-Java-Zygote&amp;#x542F;&amp;#x52A8;/java_zygote.jpg&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;ZygoteInit&quot;&gt;&lt;a href=&quot;#ZygoteInit&quot; class=&quot;headerlink&quot; title=&quot;ZygoteInit&quot;&gt;&lt;/a&gt;ZygoteInit&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public static void main(String argv[]) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521B;&amp;#x5EFA;zygoteServer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ZygoteServer zygoteServer = new ZygoteServer();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ZygoteHooks.startZygoteNoThreadCreation();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8BBE;&amp;#x7F6E;zygote&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;group id&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Os.setpgid(0, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (ErrnoException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new RuntimeException(&amp;quot;Failed to setpgid(0,0)&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Runnable caller;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Report Zygote start time to tron unless it is a runtime restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!&amp;quot;1&amp;quot;.equals(SystemProperties.get(&amp;quot;sys.boot_completed&amp;quot;))) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            MetricsLogger.histogram(null, &amp;quot;boot_zygote_init&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    (int) SystemClock.elapsedRealtime());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String bootTimeTag = Process.is64Bit() ? &amp;quot;Zygote64Timing&amp;quot; : &amp;quot;Zygote32Timing&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TimingsTraceLog bootTimingsTraceLog = new TimingsTraceLog(bootTimeTag,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Trace.TRACE_TAG_DALVIK);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bootTimingsTraceLog.traceBegin(&amp;quot;ZygoteInit&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        RuntimeInit.enableDdms();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x89E3;&amp;#x6790;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x6765;&amp;#x81EA;&amp;#x4E8E;`Linux`&amp;#x5C42;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        boolean startSystemServer = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String socketName = &amp;quot;zygote&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String abiList = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        boolean enableLazyPreload = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for (int i = 1; i &amp;lt; argv.length; i++) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x662F;&amp;#x5426;&amp;#x9700;&amp;#x8981;&amp;#x542F;&amp;#x52A8;system_server&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (&amp;quot;start-system-server&amp;quot;.equals(argv[i])) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                startSystemServer = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (&amp;quot;--enable-lazy-preload&amp;quot;.equals(argv[i])) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x662F;&amp;#x5426;&amp;#x9700;&amp;#x8981;&amp;#x61D2;&amp;#x52A0;&amp;#x8F7D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                enableLazyPreload = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (argv[i].startsWith(ABI_LIST_ARG)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x83B7;&amp;#x53D6;abi_list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                abiList = argv[i].substring(ABI_LIST_ARG.length());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else if (argv[i].startsWith(SOCKET_NAME_ARG)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x83B7;&amp;#x53D6;socket&amp;#x540D;&amp;#x79F0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                socketName = argv[i].substring(SOCKET_NAME_ARG.length());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                throw new RuntimeException(&amp;quot;Unknown command line argument: &amp;quot; + argv[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (abiList == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(&amp;quot;No ABI list supplied.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x6CE8;&amp;#x518C;zygote&amp;#x7684;socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        zygoteServer.registerServerSocketFromEnv(socketName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // In some configurations, we avoid preloading resources and classes eagerly.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // In such cases, we will preload things prior to our first fork.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!enableLazyPreload) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bootTimingsTraceLog.traceBegin(&amp;quot;ZygotePreload&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            EventLog.writeEvent(LOG_BOOT_PROGRESS_PRELOAD_START,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                SystemClock.uptimeMillis());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            preload(bootTimingsTraceLog);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            EventLog.writeEvent(LOG_BOOT_PROGRESS_PRELOAD_END,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                SystemClock.uptimeMillis());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bootTimingsTraceLog.traceEnd(); // ZygotePreload&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Zygote.resetNicePriority();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Do an initial gc to clean up after startup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bootTimingsTraceLog.traceBegin(&amp;quot;PostZygoteInitGC&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x89E6;&amp;#x53D1;gc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gcAndFinalize();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bootTimingsTraceLog.traceEnd(); // PostZygoteInitGC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bootTimingsTraceLog.traceEnd(); // ZygoteInit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Disable tracing so that forked processes do not inherit stale tracing tags from&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Zygote.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Trace.setTracingEnabled(false, 0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Zygote.nativeSecurityInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Zygote process unmounts root storage spaces.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Zygote.nativeUnmountStorageOnInit();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ZygoteHooks.stopZygoteNoThreadCreation();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x542F;&amp;#x52A8; system_server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (startSystemServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Runnable r = forkSystemServer(abiList, socketName, zygoteServer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // {@code r == null} in the parent (zygote) process, and {@code r != null} in the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // child (system_server) process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (r != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                r.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Log.i(TAG, &amp;quot;Accepting command socket connections&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x8FDB;&amp;#x5165;&amp;#x5FAA;&amp;#x73AF;&amp;#x6A21;&amp;#x5F0F;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        caller = zygoteServer.runSelectLoop(abiList);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Log.e(TAG, &amp;quot;System zygote died with exception&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw ex;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        zygoteServer.closeServerSocket();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // We&amp;apos;re in the child process and have exited the select loop. Proceed to execute the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // command.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (caller != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        caller.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7EC8;&amp;#x4E8E;&amp;#x89C1;&amp;#x5230;Java&amp;#x4EE3;&amp;#x7801;&amp;#x4E86;&amp;#xFF0C;&amp;#x4E0D;&amp;#x5BB9;&amp;#x6613;&amp;#x554A;~&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x521B;&amp;#x5EFA;zygoteServer&amp;#xFF0C;&amp;#x4E3A;Zygote&amp;#x8BBE;&amp;#x7F6E;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5206;&amp;#x7EC4;id&amp;#xFF1B;&amp;#x7136;&amp;#x540E;&amp;#x4F1A;&amp;#x89E3;&amp;#x6790;&amp;#x4F20;&amp;#x9012;&amp;#x8FC7;&amp;#x6765;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;&amp;#x53C2;&amp;#x6570;&amp;#x6267;&amp;#x884C;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x540E;&amp;#x7EED;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x6CE8;&amp;#x518C;Socket&quot;&gt;&lt;a href=&quot;#&amp;#x6CE8;&amp;#x518C;Socket&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6CE8;&amp;#x518C;Socket&quot;&gt;&lt;/a&gt;&amp;#x6CE8;&amp;#x518C;Socket&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void registerServerSocketFromEnv(String socketName) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mServerSocket == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        int fileDesc;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        final String fullSocketName = ANDROID_SOCKET_PREFIX + socketName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            String env = System.getenv(fullSocketName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fileDesc = Integer.parseInt(env);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (RuntimeException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(fullSocketName + &amp;quot; unset or invalid&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            FileDescriptor fd = new FileDescriptor();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fd.setInt$(fileDesc);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mServerSocket = new LocalServerSocket(fd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mCloseSocketFd = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (IOException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;quot;Error binding to local socket &amp;apos;&amp;quot; + fileDesc + &amp;quot;&amp;apos;&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;registerServerSocketFromEnv&amp;#x6765;&amp;#x6CE8;&amp;#x518C;socket&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;LocalServerSocket&amp;#x521B;&amp;#x5EFA;&amp;#x672C;&amp;#x5730;socket&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x6765;&amp;#x76D1;&amp;#x542C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;fd&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&quot;&gt;&lt;a href=&quot;#&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&quot;&gt;&lt;/a&gt;&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static void preload(TimingsTraceLog bootTimingsTraceLog) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&amp;#x4F4D;&amp;#x4E8E;/system/etc/preloaded-classes&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x7684;&amp;#x7C7B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preloadClasses();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&amp;#x8D44;&amp;#x6E90;&amp;#xFF0C;&amp;#x4FDD;&amp;#x5B58;drawable&amp;#x4E0E;color&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preloadResources();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D;OpenGL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preloadOpenGL();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&amp;#x5171;&amp;#x4EAB;&amp;#x5E93;&amp;#xFF0C;&amp;#x5305;&amp;#x62EC;android&amp;#x3001;compiler_rt&amp;#x3001;jnigraphics&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preloadSharedLibraries();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x9884;&amp;#x52A0;&amp;#x8F7D; &amp;#x6587;&amp;#x672C;&amp;#x8FDE;&amp;#x63A5;&amp;#x7B26;&amp;#x8D44;&amp;#x6E90;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    preloadTextResources();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x4EC5;&amp;#x7528;&amp;#x4E8E;zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x7528;&amp;#x4E8E;&amp;#x5185;&amp;#x5B58;&amp;#x5171;&amp;#x4EAB;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    WebViewFactory.prepareWebViewInZygote();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    endIcuCachePinning();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    warmUpJcaProviders();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sPreloadComplete = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7C7B;&amp;#x52A0;&amp;#x8F7D;&amp;#xFF0C;&amp;#x91C7;&amp;#x7528;&amp;#x53CD;&amp;#x5C04;&amp;#x673A;&amp;#x5236;Class.forName()&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x52A0;&amp;#x8F7D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x8D44;&amp;#x6E90;&amp;#x52A0;&amp;#x8F7D;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;com.android.internal.R.array.preloaded_drawables&amp;#x548C;com.android.internal.R.array.preloaded_color_state_lists&amp;#xFF0C;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x7A0B;&amp;#x5E8F;&amp;#x4E2D;&amp;#x4EE5;com.android.internal.R.xxx&amp;#x5F00;&amp;#x5934;&amp;#x7684;&amp;#x8D44;&amp;#x6E90;&amp;#xFF0C;&amp;#x4FBF;&amp;#x662F;&amp;#x6B64;&amp;#x65F6;&amp;#x7531;Zygote&amp;#x52A0;&amp;#x8F7D;&amp;#x5230;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x4E4B;&amp;#x540E;fork&amp;#x51FA;&amp;#x5B50;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x4F7F;&amp;#x7528;copy on write&amp;#x6280;&amp;#x672F;&amp;#xFF0C;&amp;#x4F7F;&amp;#x5F97;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5728;&amp;#x53EA;&amp;#x8BFB;&amp;#x6A21;&amp;#x5F0F;&amp;#x4E0B;&amp;#x4E0E;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5171;&amp;#x7528;&amp;#x4E00;&amp;#x5757;&amp;#x5185;&amp;#x5B58;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x4FDD;&amp;#x8BC1;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x80FD;&amp;#x591F;&amp;#x8FC5;&amp;#x901F;fork&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x51CF;&amp;#x5C11;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x62F7;&amp;#x8D1D;&amp;#x6570;&amp;#x91CF;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;SystemServer&quot;&gt;&lt;a href=&quot;#SystemServer&quot; class=&quot;headerlink&quot; title=&quot;SystemServer&quot;&gt;&lt;/a&gt;SystemServer&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;if (startSystemServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Runnable r = forkSystemServer(abiList, socketName, zygoteServer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // {@code r == null} in the parent (zygote) process, and {@code r != null} in the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // child (system_server) process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (r != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x521B;&amp;#x5EFA;system_server&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5B9E;&amp;#x73B0;&amp;#x540E;&amp;#x7EED;&amp;#x5230;system_server&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x518D;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;runSelectLoop&quot;&gt;&lt;a href=&quot;#runSelectLoop&quot; class=&quot;headerlink&quot; title=&quot;runSelectLoop&quot;&gt;&lt;/a&gt;runSelectLoop&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Runnable runSelectLoop(String abiList) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ArrayList&amp;lt;FileDescriptor&amp;gt; fds = new ArrayList&amp;lt;FileDescriptor&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ArrayList&amp;lt;ZygoteConnection&amp;gt; peers = new ArrayList&amp;lt;ZygoteConnection&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x4FDD;&amp;#x5B58;fd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fds.add(mServerSocket.getFileDescriptor());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    peers.add(null);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (true) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        StructPollfd[] pollFds = new StructPollfd[fds.size()];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for (int i = 0; i &amp;lt; pollFds.length; ++i) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pollFds[i] = new StructPollfd();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pollFds[i].fd = fds.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pollFds[i].events = (short) POLLIN;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x8F6E;&amp;#x8BE2;&amp;#xFF0C;&amp;#x5F53;pollFds&amp;#x6709;&amp;#x4E8B;&amp;#x4EF6;&amp;#x5230;&amp;#x6765;&amp;#x5219;&amp;#x5F80;&amp;#x4E0B;&amp;#x6267;&amp;#x884C;&amp;#xFF0C;&amp;#x5426;&amp;#x5219;&amp;#x963B;&amp;#x585E;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Os.poll(pollFds, -1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (ErrnoException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw new RuntimeException(&amp;quot;poll failed&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for (int i = pollFds.length - 1; i &amp;gt;= 0; --i) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x91C7;&amp;#x7528;I/O&amp;#x591A;&amp;#x8DEF;&amp;#x590D;&amp;#x7528;&amp;#x673A;&amp;#x5236;&amp;#xFF0C;&amp;#x5F53;&amp;#x63A5;&amp;#x6536;&amp;#x5230;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x53D1;&amp;#x51FA;&amp;#x8FDE;&amp;#x63A5;&amp;#x8BF7;&amp;#x6C42; &amp;#x6216;&amp;#x8005;&amp;#x6570;&amp;#x636E;&amp;#x5904;&amp;#x7406;&amp;#x8BF7;&amp;#x6C42;&amp;#x5230;&amp;#x6765;&amp;#xFF0C;&amp;#x5219;&amp;#x5F80;&amp;#x4E0B;&amp;#x6267;&amp;#x884C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x5426;&amp;#x5219;&amp;#x8FDB;&amp;#x5165;continue&amp;#xFF0C;&amp;#x8DF3;&amp;#x51FA;&amp;#x672C;&amp;#x6B21;&amp;#x5FAA;&amp;#x73AF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if ((pollFds[i].revents &amp;amp; POLLIN) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                continue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (i == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x5373;fds[0]&amp;#xFF0C;&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x662F;sServerSocket&amp;#xFF0C;&amp;#x5219;&amp;#x610F;&amp;#x5473;&amp;#x7740;&amp;#x6709;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x8FDE;&amp;#x63A5;&amp;#x8BF7;&amp;#x6C42;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x5219;&amp;#x521B;&amp;#x5EFA;ZygoteConnection&amp;#x5BF9;&amp;#x8C61;,&amp;#x5E76;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;fds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ZygoteConnection newPeer = acceptCommandPeer(abiList);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                peers.add(newPeer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                fds.add(newPeer.getFileDesciptor());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // i&amp;gt;0&amp;#xFF0C;&amp;#x5219;&amp;#x4EE3;&amp;#x8868;&amp;#x901A;&amp;#x8FC7;socket&amp;#x63A5;&amp;#x6536;&amp;#x6765;&amp;#x81EA;&amp;#x5BF9;&amp;#x7AEF;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5E76;&amp;#x6267;&amp;#x884C;&amp;#x76F8;&amp;#x5E94;&amp;#x64CD;&amp;#x4F5C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x83B7;&amp;#x53D6;&amp;#x94FE;&amp;#x63A5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    ZygoteConnection connection = peers.get(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    // &amp;#x6267;&amp;#x884C;&amp;#x64CD;&amp;#x4F5C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    final Runnable command = connection.processOneCommand(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    if (mIsForkChild) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        if (command == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            throw new IllegalStateException(&amp;quot;command == null&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        return command;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        if (command != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            throw new IllegalStateException(&amp;quot;command != null&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        if (connection.isClosedByPeer()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            connection.closeSocket();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            peers.remove(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            fds.remove(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } catch (Exception e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    if (!mIsForkChild) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        Slog.e(TAG, &amp;quot;Exception executing zygote command: &amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        ZygoteConnection conn = peers.remove(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        conn.closeSocket();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        fds.remove(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        Log.e(TAG, &amp;quot;Caught post-fork exception in child process.&amp;quot;, e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        throw e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mIsForkChild = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Zygote&amp;#x91C7;&amp;#x7528;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;I/O&amp;#x591A;&amp;#x8DEF;&amp;#x590D;&amp;#x7528;&amp;#x673A;&amp;#x5236;&amp;#xFF0C;&amp;#x4FDD;&amp;#x8BC1;&amp;#x5728;&amp;#x6CA1;&amp;#x6709;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x8FDE;&amp;#x63A5;&amp;#x8BF7;&amp;#x6C42;&amp;#x6216;&amp;#x6570;&amp;#x636E;&amp;#x5904;&amp;#x7406;&amp;#x65F6;&amp;#x4F11;&amp;#x7720;&amp;#xFF0C;&amp;#x5426;&amp;#x5219;&amp;#x54CD;&amp;#x5E94;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;processOneCommand&quot;&gt;&lt;a href=&quot;#processOneCommand&quot; class=&quot;headerlink&quot; title=&quot;processOneCommand&quot;&gt;&lt;/a&gt;processOneCommand&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Runnable processOneCommand(ZygoteServer zygoteServer) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String args[];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Arguments parsedArgs = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FileDescriptor[] descriptors;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x8BFB;&amp;#x53D6;&amp;#x53C2;&amp;#x6570;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args = readArgumentList();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        descriptors = mSocket.getAncillaryFileDescriptors();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (IOException ex) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new IllegalStateException(&amp;quot;IOException on command socket&amp;quot;, ex);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // readArgumentList returns null only when it has reached EOF with no available&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // data to read. This will only happen when the remote socket has disconnected.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (args == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        isEof = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int pid = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FileDescriptor childPipeFd = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FileDescriptor serverPipeFd = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x89E3;&amp;#x6790;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FDB;&amp;#x884C;&amp;#x8F6C;&amp;#x6362;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    parsedArgs = new Arguments(args);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fd = zygoteServer.getServerSocketFileDescriptor();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (fd != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fdsToClose[1] = fd.getInt$();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fd = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pid = Zygote.forkAndSpecialize(parsedArgs.uid, parsedArgs.gid, parsedArgs.gids,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            parsedArgs.runtimeFlags, rlimits, parsedArgs.mountExternal, parsedArgs.seInfo,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            parsedArgs.niceName, fdsToClose, fdsToIgnore, parsedArgs.startChildZygote,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            parsedArgs.instructionSet, parsedArgs.appDataDir);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (pid == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x6267;&amp;#x884C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            zygoteServer.setForkChild();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            zygoteServer.closeServerSocket();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            IoUtils.closeQuietly(serverPipeFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            serverPipeFd = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return handleChildProc(parsedArgs, descriptors, childPipeFd,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    parsedArgs.startChildZygote);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x6267;&amp;#x884C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            IoUtils.closeQuietly(childPipeFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            childPipeFd = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            handleParentProc(pid, descriptors, serverPipeFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        IoUtils.closeQuietly(childPipeFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        IoUtils.closeQuietly(serverPipeFd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;fork&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x8BE5;&amp;#x65B9;&amp;#x6CD5;&amp;#x4F1A;&amp;#x8FD4;&amp;#x56DE;&amp;#x4E24;&amp;#x6B21;&amp;#x7ED3;&amp;#x679C;&amp;#xFF1B;&amp;#x5982;&amp;#x679C;&amp;#x4E3A;0&amp;#x5219;&amp;#x4EE3;&amp;#x8868;&amp;#x5F53;&amp;#x524D;&amp;#x9700;&amp;#x8981;&amp;#x6267;&amp;#x884C;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x76F8;&amp;#x5173;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x975E;0&amp;#x5219;&amp;#x662F;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x6B64;Zygote&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x5C31;&amp;#x5B8C;&amp;#x6210;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5728;Java&amp;#x5C42;Zygote&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4E8B;&amp;#x60C5;&amp;#x4E3A;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;registerServerSocketFromEnv&amp;#x6765;&amp;#x6CE8;&amp;#x518C;socket&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;preload&amp;#x9884;&amp;#x52A0;&amp;#x8F7D;&amp;#x7C7B;&amp;#x3001;drawable&amp;#x4E0E;color&amp;#x8D44;&amp;#x6E90;&amp;#x3001;openGL&amp;#x3001;&amp;#x5171;&amp;#x4EAB;&amp;#x5E93;&amp;#x4E0E;WebView&amp;#x76F8;&amp;#x5173;&amp;#x8D44;&amp;#x6E90;&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;system_server&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;runSelectLoop&amp;#x7B49;&amp;#x5F85;&amp;#x65B0;&amp;#x6D88;&amp;#x606F;&amp;#x7684;&amp;#x5230;&amp;#x6765;&amp;#xFF0C;&amp;#x5E76;&amp;#x521B;&amp;#x5EFA;&amp;#x65B0;&amp;#x8FDB;&amp;#x7A0B;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Zygote&amp;#x4E2D;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x91CD;&amp;#x8981;&amp;#x6B65;&amp;#x9AA4;&amp;#xFF1A;&amp;#x542F;&amp;#x52A8;system_server&amp;#x540E;&amp;#x7EED;&amp;#x518D;&amp;#x8FDB;&amp;#x884C;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x656C;&amp;#x8BF7;&amp;#x671F;&amp;#x5F85;&amp;#xFF01;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Android Linux Zygote启动</title>
    <link href="https://www.rousetime.com/2020/12/10/Android-Linux-Zygote%E5%90%AF%E5%8A%A8/"/>
    <id>https://www.rousetime.com/2020/12/10/Android-Linux-Zygote启动/</id>
    <published>2020-12-10T13:57:54.000Z</published>
    <updated>2022-11-30T14:06:09.204Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm=e8e0fc49df97755f598ef0082409c573d7715ce33bb27b1c98194410d487ae69adbeb2293d84&amp;amp;token=1353481402&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Android init &amp;#x542F;&amp;#x52A8;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Android&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;&amp;#x7531;Linux Kernel&amp;#x542F;&amp;#x52A8;&amp;#x7684;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&amp;#x5728;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;&amp;#x89E3;&amp;#x6790;init.rc&amp;#x6587;&amp;#x4EF6;&amp;#x6765;&amp;#x542F;&amp;#x52A8;zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;Android&amp;#x6240;&amp;#x5728;Java&amp;#x5C42;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x6211;&amp;#x4EEC;&amp;#x4E00;&amp;#x8D77;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E0B;zygote&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;rc&amp;#x6587;&amp;#x4EF6;&amp;#x8BED;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#rc&amp;#x6587;&amp;#x4EF6;&amp;#x8BED;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x8BED;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x8BED;&amp;#x6CD5;&lt;/h2&gt;&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x76F4;&amp;#x63A5;&amp;#x6253;&amp;#x5F00;init.rc&amp;#x6587;&amp;#x4EF6;&amp;#x770B;&amp;#x5B83;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#xFF0C;&amp;#x4F60;&amp;#x5927;&amp;#x6982;&amp;#x7387;&amp;#x4F1A;&amp;#x4E00;&amp;#x8138;&amp;#x61F5;&amp;#x903C;&amp;#x3002;&amp;#x56E0;&amp;#x4E3A;&amp;#x5B83;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;&amp;#x4E00;&amp;#x5957;&amp;#x72EC;&amp;#x6709;&amp;#x7684;&amp;#x8BED;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;.rc&amp;#x8BED;&amp;#x6CD5;&amp;#x3002;&amp;#x5B83;&amp;#x5185;&amp;#x90E8;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;Android Init Language&amp;#xFF0C;&amp;#x4FD7;&amp;#x79F0;Android&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x8BED;&amp;#x8A00;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4E0A;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x5176;&amp;#x5B9E;&amp;#x5DF2;&amp;#x7ECF;&amp;#x63D0;&amp;#x53CA;&amp;#x8FC7;&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x8BED;&amp;#x6CD5;&amp;#x4E3B;&amp;#x8981;&amp;#x5206;&amp;#x4E3A;&amp;#x4E94;&amp;#x7C7B;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x4E3A;&amp;#xFF1A;Actions&amp;#x3001;Commands&amp;#x3001;Services&amp;#x3001; Options&amp;#x4E0E;Imports&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;Actions&quot;&gt;&lt;a href=&quot;#Actions&quot; class=&quot;headerlink&quot; title=&quot;Actions&quot;&gt;&lt;/a&gt;Actions&lt;/h3&gt;&lt;p&gt;Actions&amp;#x79F0;&amp;#x4E3A;&amp;#x547D;&amp;#x4EE4;&amp;#x5E8F;&amp;#x5217;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x7ED3;&amp;#x5408;trigger&amp;#x89E6;&amp;#x53D1;&amp;#x5668;&amp;#x4E00;&amp;#x8D77;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&amp;#x4E3B;&amp;#x8981;&amp;#x7528;&amp;#x4E8E;&amp;#x786E;&amp;#x5B9A;&amp;#x8BE5;Actions&amp;#x4F5C;&amp;#x7528;&amp;#x7684;&amp;#x65F6;&amp;#x673A;&amp;#xFF0C;&amp;#x5F53;&amp;#x53D1;&amp;#x751F;&amp;#x65F6;&amp;#x673A;&amp;#x4E0E;&amp;#x67D0;&amp;#x4E2A;Actions&amp;#x7684;trigger&amp;#x76F8;&amp;#x5339;&amp;#x914D;&amp;#x65F6;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;Actions&amp;#x5C06;&amp;#x4F1A;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x961F;&amp;#x5217;&amp;#x4E2D;&amp;#xFF0C;&amp;#x961F;&amp;#x5217;&amp;#x4E2D;&amp;#x7684;&amp;#x6BCF;&amp;#x4E2A;Actions&amp;#x90FD;&amp;#x6309;&amp;#x987A;&amp;#x5E8F;&amp;#x51FA;&amp;#x961F;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x8BE5;Actions&amp;#x4E2D;&amp;#x7684;&amp;#x6BCF;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x90FD;&amp;#x6309;&amp;#x987A;&amp;#x5E8F;&amp;#x6267;&amp;#x884C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Actions&amp;#x7684;&amp;#x683C;&amp;#x5F0F;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;on &amp;lt;trigger&amp;gt; [&amp;amp;&amp;amp; &amp;lt;trigger&amp;gt;]*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;command&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;command&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;command&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE5;on&amp;#x5F00;&amp;#x5934;&amp;#xFF0C;&amp;#x914D;&amp;#x5408;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;trigger&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;trigger&amp;#x89E6;&amp;#x53D1;&amp;#xFF0C;&amp;#x5C06;&amp;#x4F1A;&amp;#x6267;&amp;#x884C;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;command&amp;#x3002;&lt;/p&gt;
&lt;p&gt;trigger&amp;#x4E3B;&amp;#x8981;&amp;#x5305;&amp;#x542B;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&amp;#x7C7B;&amp;#x578B;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;early-init: &amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65E9;&amp;#x671F;&amp;#x9636;&amp;#x6BB5;&amp;#x89E6;&amp;#x53D1;&lt;/li&gt;
&lt;li&gt;init: &amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x9636;&amp;#x6BB5;&amp;#x89E6;&amp;#x53D1;&lt;/li&gt;
&lt;li&gt;late-init: &amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x665A;&amp;#x671F;&amp;#x9636;&amp;#x6BB5;&amp;#x89E6;&amp;#x53D1;&lt;/li&gt;
&lt;li&gt;boot/charger: &amp;#x5F53;&amp;#x7CFB;&amp;#x7EDF;&amp;#x542F;&amp;#x52A8;/&amp;#x5145;&amp;#x7535;&amp;#x65F6;&amp;#x89E6;&amp;#x53D1;&amp;#xFF0C;&amp;#x8FD8;&amp;#x5305;&amp;#x542B;&amp;#x5176;&amp;#x4ED6;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x6B64;&amp;#x5904;&amp;#x4E0D;&amp;#x4E00;&amp;#x4E00;&amp;#x5217;&amp;#x4E3E;&lt;/li&gt;
&lt;li&gt;property:&lt;key&gt;=&lt;value&gt;: &amp;#x5F53;&amp;#x5C5E;&amp;#x6027;&amp;#x503C;&amp;#x6EE1;&amp;#x8DB3;&amp;#x6761;&amp;#x4EF6;&amp;#x65F6;&amp;#x89E6;&amp;#x53D1;&lt;/value&gt;&lt;/key&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6765;&amp;#x770B;&amp;#x4E00;&amp;#x4E2A;&amp;#x793A;&amp;#x4F8B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;on boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop a 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop b 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on boot &amp;amp;&amp;amp; property:true=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop c 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop d 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop e 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   setprop f 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5F53;boot&amp;#x89E6;&amp;#x53D1;&amp;#x5E76;&amp;#x5047;&amp;#x8BBE;&amp;#x5C5E;&amp;#x6027;true&amp;#x7B49;&amp;#x4E8E;true&amp;#x65F6;&amp;#xFF0C;&amp;#x5C06;&amp;#x89E6;&amp;#x53D1;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;Actions, &amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x987A;&amp;#x5E8F;&amp;#x4E3A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;setprop a 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setprop b 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setprop c 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setprop d 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setprop e 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setprop f 2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Commands&quot;&gt;&lt;a href=&quot;#Commands&quot; class=&quot;headerlink&quot; title=&quot;Commands&quot;&gt;&lt;/a&gt;Commands&lt;/h3&gt;&lt;p&gt;Commands&amp;#x4FD7;&amp;#x79F0;&amp;#x6307;&amp;#x4EE4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C31;&amp;#x662F;Linux&amp;#x9700;&amp;#x8981;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;Commands&amp;#x5305;&amp;#x542B;&amp;#x7684;&amp;#x6307;&amp;#x4EE4;&amp;#x8FD8;&amp;#x662F;&amp;#x5F88;&amp;#x591A;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5217;&amp;#x4E3E;&amp;#x4E00;&amp;#x4E9B;&amp;#x5E38;&amp;#x7528;&amp;#x7684;&amp;#x6307;&amp;#x4EE4;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;class_start &amp;lt;service_class_name&amp;gt;&amp;#xFF1A; &amp;#x542F;&amp;#x52A8;&amp;#x5C5E;&amp;#x4E8E;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;class&amp;#x7684;&amp;#x6240;&amp;#x6709;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;start &amp;lt;service_name&amp;gt;&amp;#xFF1A; &amp;#x542F;&amp;#x52A8;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&amp;#xFF0C;&amp;#x82E5;&amp;#x5DF2;&amp;#x542F;&amp;#x52A8;&amp;#x5219;&amp;#x8DF3;&amp;#x8FC7;&lt;/li&gt;
&lt;li&gt;stop &amp;lt;service_name&amp;gt;&amp;#xFF1A; &amp;#x505C;&amp;#x6B62;&amp;#x6B63;&amp;#x5728;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;setprop &lt;name&gt; &lt;value&gt;&amp;#xFF1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5C5E;&amp;#x6027;&amp;#x503C;&lt;/value&gt;&lt;/name&gt;&lt;/li&gt;
&lt;li&gt;mkdir &lt;path&gt;&lt;/path&gt;&amp;#xFF1A;&amp;#x521B;&amp;#x5EFA;&amp;#x6307;&amp;#x5B9A;&amp;#x76EE;&amp;#x5F55;&lt;/li&gt;
&lt;li&gt;symlink &lt;target&gt; &amp;lt;sym_link&amp;gt;&amp;#xFF1A; &amp;#x521B;&amp;#x5EFA;&amp;#x8FDE;&amp;#x63A5;&amp;#x5230;&lt;target&gt;&amp;#x7684;&amp;lt;sym_link&amp;gt;&amp;#x7B26;&amp;#x53F7;&amp;#x94FE;&amp;#x63A5;&lt;/target&gt;&lt;/target&gt;&lt;/li&gt;
&lt;li&gt;write &lt;path&gt;&lt;/path&gt; &lt;string&gt;&amp;#xFF1A; &amp;#x5411;&amp;#x6587;&amp;#x4EF6;path&amp;#x4E2D;&amp;#x5199;&amp;#x5165;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&lt;/string&gt;&lt;/li&gt;
&lt;li&gt;exec&amp;#xFF1A; fork&amp;#x5E76;&amp;#x6267;&amp;#x884C;&amp;#xFF0C;&amp;#x4F1A;&amp;#x963B;&amp;#x585E;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x76F4;&amp;#x5230;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5B8C;&amp;#x6BD5;&lt;/li&gt;
&lt;li&gt;exprot &lt;name&gt; &lt;name&gt;&amp;#xFF1A;&amp;#x8BBE;&amp;#x5B9A;&amp;#x73AF;&amp;#x5883;&amp;#x53D8;&amp;#x91CF;&lt;/name&gt;&lt;/name&gt;&lt;/li&gt;
&lt;li&gt;loglevel &lt;level&gt;&amp;#xFF1A;&amp;#x8BBE;&amp;#x7F6E;log&amp;#x7EA7;&amp;#x522B;&lt;/level&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x9047;&amp;#x5230;&amp;#x5C31;&amp;#x76F4;&amp;#x63A5;&amp;#x5BF9;&amp;#x7167;&amp;#x67E5;&amp;#x770B;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x4E0A;&amp;#x9762;&amp;#x63D0;&amp;#x5230;&amp;#x7684;setprop&amp;#xFF0C;&amp;#x5B83;&amp;#x5C31;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x5BF9;&amp;#x5C5E;&amp;#x6027;&amp;#x8D4B;&amp;#x503C;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;Services&quot;&gt;&lt;a href=&quot;#Services&quot; class=&quot;headerlink&quot; title=&quot;Services&quot;&gt;&lt;/a&gt;Services&lt;/h3&gt;&lt;p&gt;Services&amp;#x4FD7;&amp;#x79F0;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x7531;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x542F;&amp;#x52A8;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C;&amp;#x8FD0;&amp;#x884C;&amp;#x5728;init&amp;#x7684;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x542F;&amp;#x52A8;&amp;#x670D;&amp;#x52A1;&amp;#x65F6;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x8BE5;&amp;#x670D;&amp;#x52A1;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x662F;&amp;#x5426;&amp;#x5B58;&amp;#x5728;&amp;#xFF0C;&amp;#x800C;&amp;#x670D;&amp;#x52A1;&amp;#x5B9A;&amp;#x4E49;&amp;#x5728;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;init&amp;#x8FDB;&amp;#x7A0B;fork&amp;#x51FA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x7684;&amp;#x5B9A;&amp;#x4E49;&amp;#x683C;&amp;#x5F0F;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service &amp;lt;name&amp;gt; &amp;lt;pathname&amp;gt; [ &amp;lt;argument&amp;gt; ]*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;option&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;option&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service servicemanager /system/bin/servicemanager&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x610F;&amp;#x4E49;&amp;#x662F;&amp;#xFF1A;&amp;#x8BE5;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x540D;&amp;#x79F0;&amp;#x662F;servicemanager&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x8DEF;&amp;#x5F84;&amp;#x4E3A;/system/bin/servicemanager&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;Options&quot;&gt;&lt;a href=&quot;#Options&quot; class=&quot;headerlink&quot; title=&quot;Options&quot;&gt;&lt;/a&gt;Options&lt;/h3&gt;&lt;p&gt;Options&amp;#x4FD7;&amp;#x79F0;&amp;#x53EF;&amp;#x9009;&amp;#x9879;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x90FD;&amp;#x4F5C;&amp;#x7528;&amp;#x4E8E;Services&amp;#xFF0C;&amp;#x6539;&amp;#x53D8;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x8FD0;&amp;#x884C;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E0E;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x7B49;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x4E0E;Commands&amp;#x4E00;&amp;#x6837;&amp;#x6709;&amp;#x5F88;&amp;#x591A;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5217;&amp;#x4E3E;&amp;#x4E00;&amp;#x4E9B;&amp;#x5E38;&amp;#x7528;&amp;#x7684;&amp;#xFF0C;&amp;#x9047;&amp;#x5230;&amp;#x76F4;&amp;#x63A5;&amp;#x67E5;&amp;#x770B;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;disabled: &amp;#x4E0D;&amp;#x968F;class&amp;#x81EA;&amp;#x52A8;&amp;#x542F;&amp;#x52A8;&amp;#xFF0C;&amp;#x53EA;&amp;#x6709;&amp;#x6839;&amp;#x636E;service&amp;#x540D;&amp;#x624D;&amp;#x542F;&amp;#x52A8;&lt;/li&gt;
&lt;li&gt;oneshot: service&amp;#x9000;&amp;#x51FA;&amp;#x540E;&amp;#x4E0D;&amp;#x518D;&amp;#x91CD;&amp;#x542F;&lt;/li&gt;
&lt;li&gt;user/group&amp;#xFF1A; &amp;#x8BBE;&amp;#x7F6E;&amp;#x6267;&amp;#x884C;&amp;#x670D;&amp;#x52A1;&amp;#x7684;&amp;#x7528;&amp;#x6237;/&amp;#x7528;&amp;#x6237;&amp;#x7EC4;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x90FD;&amp;#x662F;root&lt;/li&gt;
&lt;li&gt;class&amp;#xFF1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6240;&amp;#x5C5E;&amp;#x7684;&amp;#x7C7B;&amp;#x540D;&amp;#xFF0C;&amp;#x5F53;&amp;#x6240;&amp;#x5C5E;&amp;#x7C7B;&amp;#x542F;&amp;#x52A8;/&amp;#x9000;&amp;#x51FA;&amp;#x65F6;&amp;#xFF0C;&amp;#x670D;&amp;#x52A1;&amp;#x4E5F;&amp;#x542F;&amp;#x52A8;/&amp;#x505C;&amp;#x6B62;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x4E3A;default&lt;/li&gt;
&lt;li&gt;onrestart:&amp;#x5F53;&amp;#x670D;&amp;#x52A1;&amp;#x91CD;&amp;#x542F;&amp;#x65F6;&amp;#x6267;&amp;#x884C;&amp;#x76F8;&amp;#x5E94;&amp;#x547D;&amp;#x4EE4;&lt;/li&gt;
&lt;li&gt;socket: &amp;#x521B;&amp;#x5EFA;&amp;#x540D;&amp;#x4E3A;/dev/socket/&lt;name&gt;&amp;#x7684;socket&lt;/name&gt;&lt;/li&gt;
&lt;li&gt;critical: &amp;#x5728;&amp;#x89C4;&amp;#x5B9A;&amp;#x65F6;&amp;#x95F4;&amp;#x5185;&amp;#x8BE5;service&amp;#x4E0D;&amp;#x65AD;&amp;#x91CD;&amp;#x542F;&amp;#xFF0C;&amp;#x5219;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4F1A;&amp;#x91CD;&amp;#x542F;&amp;#x5E76;&amp;#x8FDB;&amp;#x5165;&amp;#x6062;&amp;#x590D;&amp;#x6A21;&amp;#x5F0F;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;default: &amp;#x610F;&amp;#x5473;&amp;#x7740;disabled=false&amp;#xFF0C;oneshot=false&amp;#xFF0C;critical=false&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Imports&quot;&gt;&lt;a href=&quot;#Imports&quot; class=&quot;headerlink&quot; title=&quot;Imports&quot;&gt;&lt;/a&gt;Imports&lt;/h3&gt;&lt;p&gt;Imports&amp;#x4FD7;&amp;#x79F0;&amp;#x5BFC;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7528;&amp;#x9014;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x5BFC;&amp;#x5165;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x683C;&amp;#x5F0F;&amp;#x4E3A;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import &amp;lt;path&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import /init.environ.rc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import /init.usb.rc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import /init.${ro.hardware}.rc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Zygote&quot;&gt;&lt;a href=&quot;#Zygote&quot; class=&quot;headerlink&quot; title=&quot;Zygote&quot;&gt;&lt;/a&gt;Zygote&lt;/h2&gt;&lt;p&gt;&amp;#x73B0;&amp;#x5728;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5BF9;.rc&amp;#x8BED;&amp;#x6CD5;&amp;#x6709;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x521D;&amp;#x6B65;&amp;#x7684;&amp;#x4E86;&amp;#x89E3;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x770B;init.rc&amp;#x7684;&amp;#x6E90;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6765;&amp;#x5206;&amp;#x6790;&amp;#x4E00;&amp;#x4E0B;&amp;#x5B83;&amp;#x662F;&amp;#x5982;&amp;#x4F55;&amp;#x542F;&amp;#x52A8;Zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;on early-init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # Set init and its forked children&amp;apos;s oom_adj.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    write /proc/1/oom_score_adj -1000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # Apply strict SELinux checking of PROT_EXEC on mmap/mprotect calls.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    write /sys/fs/selinux/checkreqprot 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # Set the security context for the init process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # This should occur before anything else (e.g. ueventd) is started.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    setcon u:r:init:s0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # Set the security context of /adb_keys if present.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    restorecon /adb_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start ueventd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    # create mountpoints&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mkdir /mnt 0775 root system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sysclktz 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    loglevel 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on late-init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on post-fs //&amp;#x6302;&amp;#x8F7D;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on post-fs-data //&amp;#x6302;&amp;#x8F7D;data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on boot //&amp;#x542F;&amp;#x52A8;&amp;#x6838;&amp;#x5FC3;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   class_start very-first&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on property:androVM.inited=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class_start core&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class_start main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on property:genymotion.local_opengl.started=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start surfaceflinger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;on nonencrypted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class_start main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class_start late_start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4EE5;&amp;#x4E0A;&amp;#x662F;&amp;#x5404;&amp;#x4E2A;&amp;#x89E6;&amp;#x53D1;&amp;#x5668;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x987A;&amp;#x5E8F;&amp;#x3002;&amp;#x6EE1;&amp;#x8DB3;&amp;#x6761;&amp;#x4EF6;&amp;#x4F1A;&amp;#x6267;&amp;#x884C;class_start&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;main&amp;#x7684;&amp;#x7C7B;&amp;#xFF0C;&amp;#x5E76;&amp;#x542F;&amp;#x52A8;&amp;#x5B83;&amp;#x5173;&amp;#x8054;&amp;#x7684;service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;class_start&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;builtins.cpp&amp;#x4E2D;&amp;#x7684;do_class_start&amp;#x3002;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x5173;&amp;#x7CFB;&amp;#x662F;&amp;#x7531;BuiltinFunctionMap&amp;#x7EF4;&amp;#x62A4;&amp;#x7684;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const BuiltinFunctionMap&amp;amp; GetBuiltinFunctionMap() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    constexpr std::size_t kMax = std::numeric_limits&amp;lt;std::size_t&amp;gt;::max();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // clang-format off&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    static const BuiltinFunctionMap builtin_functions = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;bootchart&amp;quot;,               {1,     1,    {false,  do_bootchart}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;chmod&amp;quot;,                   {2,     2,    {true,   do_chmod}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;chown&amp;quot;,                   {2,     3,    {true,   do_chown}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;class_reset&amp;quot;,             {1,     1,    {false,  do_class_reset}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;class_reset_post_data&amp;quot;,   {1,     1,    {false,  do_class_reset_post_data}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;class_restart&amp;quot;,           {1,     1,    {false,  do_class_restart}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;class_start&amp;quot;,             {1,     1,    {false,  do_class_start}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        {&amp;quot;class_start_post_data&amp;quot;,   {1,     1,    {false,  do_class_start_post_data}}},&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x4E0E;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Actions&amp;#x7ED1;&amp;#x5B9A;&amp;#x662F;&amp;#x5728;init.cpp&amp;#x4E2D;&amp;#x7684;SecondStageMain&amp;#x65B9;&amp;#x6CD5;&amp;#x91CC;&amp;#x9762;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;const BuiltinFunctionMap&amp;amp; function_map = GetBuiltinFunctionMap();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Action::set_function_map(&amp;amp;function_map);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;system/core/init/builtins.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x76F4;&amp;#x63A5;&amp;#x770B;do_class_start&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static Result&amp;lt;void&amp;gt; do_class_start(const BuiltinArguments&amp;amp; args) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Do not start a class if it has a property persist.dont_start_class.CLASS set to 1.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (android::base::GetBoolProperty(&amp;quot;persist.init.dont_start_class.&amp;quot; + args[1], false))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return {};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Starting a class does not start services which are explicitly disabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // They must  be started individually.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (const auto&amp;amp; service : ServiceList::GetInstance()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (service-&amp;gt;classnames().count(args[1])) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (auto result = service-&amp;gt;StartIfNotDisabled(); !result.ok()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                LOG(ERROR) &amp;lt;&amp;lt; &amp;quot;Could not start service &amp;apos;&amp;quot; &amp;lt;&amp;lt; service-&amp;gt;name()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           &amp;lt;&amp;lt; &amp;quot;&amp;apos; as part of class &amp;apos;&amp;quot; &amp;lt;&amp;lt; args[1] &amp;lt;&amp;lt; &amp;quot;&amp;apos;: &amp;quot; &amp;lt;&amp;lt; result.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return {};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;ServiceList::GetInstance&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x7684;Service&amp;#x94FE;&amp;#x8868;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5339;&amp;#x914D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;classnames&amp;#x6765;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6839;&amp;#x636E;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;class_start main&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x8981;&amp;#x627E;&amp;#x7684;&amp;#x662F;class&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;main&amp;#x8FD9;&amp;#x4E2A;&amp;#x5173;&amp;#x8054;&amp;#x7684;Service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;main service&amp;#x4F4D;&amp;#x4E8E;init.zygote.rc&amp;#x4E2D;&amp;#xFF0C;&amp;#x5185;&amp;#x90E8;&amp;#x6E90;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service zygote /system/bin/app_process -Xzygote /system/bin --zygote --start-system-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    class main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    socket zygote stream 660 root system&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart write /sys/android_power/request_state wake&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart write /sys/power/state on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart media&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    onrestart restart netd&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x53EA;&amp;#x6CE8;&amp;#x518C;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;service&amp;#xFF0C;&amp;#x540D;&amp;#x79F0;&amp;#x4E3A;zygote&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#x4E3A;/system/bin/app_process, &amp;#x540E;&amp;#x9762;&amp;#x7684;&amp;#x2013;zygote &amp;#x2013;start-system-serve&amp;#x90FD;&amp;#x662F;&amp;#x5B83;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;class main&amp;#x8BBE;&amp;#x7F6E;&amp;#x5B83;&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x7C7B;&amp;#x4E3A;main&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5B83;&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x8FD9;&amp;#x4E2A;service&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x6B63;&amp;#x597D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4E0A;&amp;#x9762;&amp;#x9700;&amp;#x8981;&amp;#x5BFB;&amp;#x627E;&amp;#x7684;&amp;#x7C7B;&amp;#x540D;&amp;#x4E3A;main&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x7C7B;&amp;#x6765;&amp;#x542F;&amp;#x52A8;service&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x8FD9;&amp;#x4E2A;service&amp;#x5C31;&amp;#x662F;zygote&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x81F3;&amp;#x4E8E;service&amp;#x7684;&amp;#x89E3;&amp;#x6790;&amp;#x8FC7;&amp;#x7A0B;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;init&amp;#x542F;&amp;#x52A8;&amp;#x6709;&amp;#x63D0;&amp;#x53CA;&amp;#x8FC7;&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;LoadBootScripts(am, sm)&amp;#x8FDB;&amp;#x5165;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5185;&amp;#x90E8;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;service_parser.cpp&amp;#x6765;&amp;#x89E3;&amp;#x6790;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;service&amp;#x8BED;&amp;#x53E5;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x5C06;&amp;#x89E3;&amp;#x6790;&amp;#x7684;service&amp;#x4FE1;&amp;#x606F;&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;service vector&amp;#x94FE;&amp;#x8868;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;service_list_-&amp;gt;AddService(std::move(service_));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vector&amp;lt;_Tp, _Allocator&amp;gt;::__emplace_back_slow_path(_Args&amp;amp;&amp;amp;... __args)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x627E;&amp;#x5230;&amp;#x5339;&amp;#x914D;&amp;#x7684;main class&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8FDB;&amp;#x5165;StartIfNotDisabled&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;system/core/init/service.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Result&amp;lt;void&amp;gt; Service::StartIfNotDisabled() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!(flags_ &amp;amp; SVC_DISABLED)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return Start();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        flags_ |= SVC_DISABLED_START;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return {};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x5B83;&amp;#x4E0D;&amp;#x662F;disabled&amp;#x5C31;&amp;#x662F;&amp;#x8C03;&amp;#x7528;Start&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;service&amp;#x6CE8;&amp;#x518C;&amp;#x4FE1;&amp;#x606F;&amp;#x662F;&amp;#x6CA1;&amp;#x6709;&amp;#x8BBE;&amp;#x7F6E;disabled&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E3A;false&amp;#x3002;&amp;#x5373;&amp;#x8FDB;&amp;#x5165;Start&amp;#x542F;&amp;#x52A8;service&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Result&amp;lt;void&amp;gt; Service::Start() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (flags_ &amp;amp; SVC_RUNNING) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if ((flags_ &amp;amp; SVC_ONESHOT) &amp;amp;&amp;amp; disabled) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            flags_ |= SVC_RESTART;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x5982;&amp;#x679C;&amp;#x6CA1;&amp;#x6709;&amp;#x9519;&amp;#x8BEF;&amp;#x5C31;&amp;#x542F;&amp;#x52A8;&amp;#x4E4B;&amp;#x524D;&amp;#x542F;&amp;#x52A8;&amp;#x7684;service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reboot_on_failure.Disable();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return {};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#x3002;&amp;#x3002;&amp;#x3002;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5224;&amp;#x65AD;&amp;#x8BE5;service&amp;#x5BF9;&amp;#x4E8E;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#x662F;&amp;#x5426;&amp;#x5B58;&amp;#x5728;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct stat sb;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (stat(args_[0].c_str(), &amp;amp;sb) == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        flags_ |= SVC_DISABLED;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return ErrnoError() &amp;lt;&amp;lt; &amp;quot;Cannot find &amp;apos;&amp;quot; &amp;lt;&amp;lt; args_[0] &amp;lt;&amp;lt; &amp;quot;&amp;apos;&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pid_t pid = -1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (namespaces_.flags) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pid = clone(nullptr, nullptr, namespaces_.flags | SIGCHLD, nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // fork()&amp;#x521B;&amp;#x5EFA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pid = fork();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (pid == 0) { // fork&amp;#x7684;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        umask(077);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!ExpandArgsAndExecv(args_, sigstop_)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            PLOG(ERROR) &amp;lt;&amp;lt; &amp;quot;cannot execv(&amp;apos;&amp;quot; &amp;lt;&amp;lt; args_[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;lt;&amp;lt; &amp;quot;&amp;apos;). See the &amp;apos;Debugging init&amp;apos; section of init&amp;apos;s README.md for tips&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _exit(127);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    NotifyStateChange(&amp;quot;running&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reboot_on_failure.Disable();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return {};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;Start&amp;#x4E2D;&amp;#x9996;&amp;#x5148;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x8BE5;service&amp;#x662F;&amp;#x5426;&amp;#x5DF2;&amp;#x7ECF;&amp;#x542F;&amp;#x52A8;&amp;#xFF0C;&amp;#x82E5;&amp;#x6CA1;&amp;#x6709;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x53BB;&amp;#x9A8C;&amp;#x8BC1;&amp;#x8BE5;service&amp;#x662F;&amp;#x5426;&amp;#x80FD;&amp;#x591F;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x53EF;&amp;#x6267;&amp;#x884C;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;/system/bin/app_process&amp;#x3002;&lt;br&gt;&amp;#x6700;&amp;#x540E;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;fork()&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;pid = 0&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5F53;pid === 0&amp;#x65F6;&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD0;&amp;#x884C;&amp;#x5728;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x8FDB;&amp;#x5165;ExpandArgsAndExecv&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static bool ExpandArgsAndExecv(const std::vector&amp;lt;std::string&amp;gt;&amp;amp; args, bool sigstop) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    std::vector&amp;lt;std::string&amp;gt; expanded_args;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    std::vector&amp;lt;char*&amp;gt; c_strings;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    expanded_args.resize(args.size());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c_strings.push_back(const_cast&amp;lt;char*&amp;gt;(args[0].data()));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (std::size_t i = 1; i &amp;lt; args.size(); ++i) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        auto expanded_arg = ExpandProps(args[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!expanded_arg.ok()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LOG(FATAL) &amp;lt;&amp;lt; args[0] &amp;lt;&amp;lt; &amp;quot;: cannot expand arguments&amp;apos;: &amp;quot; &amp;lt;&amp;lt; expanded_arg.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        expanded_args[i] = *expanded_arg;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c_strings.push_back(expanded_args[i].data());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c_strings.push_back(nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (sigstop) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        kill(getpid(), SIGSTOP);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x542F;&amp;#x52A8;zygote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return execv(c_strings[0], c_strings.data()) == 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;ExpandArgsAndExecv&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x6700;&amp;#x540E;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;execv&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x662F;&amp;#x8FDB;&amp;#x5165;app_main.cpp&amp;#x5E76;&amp;#x8C03;&amp;#x7528;&amp;#x5B83;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5373;zygote&amp;#x662F;&amp;#x901A;&amp;#x8FC7;fork&amp;#x548C;execv&amp;#x5171;&amp;#x540C;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x518D;&amp;#x6765;&amp;#x770B;app_main.cpp&amp;#x505A;&amp;#x4E86;&amp;#x4EC0;&amp;#x4E48;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;frameworks/base/cmds/app_process/app_main.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc, char* const argv[])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // --zygote : Start in zygote mode&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // --start-system-server : Start the system server.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // --application : Start in application (stand alone, non zygote) mode.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // --nice-name : The nice name for this process.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bool zygote = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bool startSystemServer = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bool application = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String8 niceName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String8 className;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ++i;  // Skip unused &amp;quot;parent dir&amp;quot; argument.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt; argc) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        const char* arg = argv[i++];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (strcmp(arg, &amp;quot;--zygote&amp;quot;) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x662F;zygote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            zygote = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x8BBE;&amp;#x7F6E;&amp;#x8FDB;&amp;#x7A0B;&amp;#x540D;&amp;#x79F0;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3A;zygote&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            niceName = ZYGOTE_NICE_NAME;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else if (strcmp(arg, &amp;quot;--start-system-server&amp;quot;) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // &amp;#x542F;&amp;#x52A8;&amp;#x5B8C;zygote&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5F00;&amp;#x542F;system service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            startSystemServer = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else if (strcmp(arg, &amp;quot;--application&amp;quot;) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            application = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else if (strncmp(arg, &amp;quot;--nice-name=&amp;quot;, 12) == 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            niceName.setTo(arg + 12);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else if (strncmp(arg, &amp;quot;--&amp;quot;, 2) != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            className.setTo(arg);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            --i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (zygote) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x542F;&amp;#x52A8;java ZygoteInit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.start(&amp;quot;com.android.internal.os.ZygoteInit&amp;quot;, args, zygote);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else if (className) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.start(&amp;quot;com.android.internal.os.RuntimeInit&amp;quot;, args, zygote);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fprintf(stderr, &amp;quot;Error: no class name or --zygote supplied.\n&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app_usage();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG_ALWAYS_FATAL(&amp;quot;app_process: no class name or --zygote supplied.&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6838;&amp;#x5FC3;&amp;#x90E8;&amp;#x5206;&amp;#x5C31;&amp;#x4E24;&amp;#x6B65;&amp;#xFF0C;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#x662F;&amp;#x89E3;&amp;#x6790;service&amp;#x4E2D;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x662F;&amp;#x5728;.rc&amp;#x4E2D;&amp;#x6CE8;&amp;#x518C;&amp;#x65F6;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x7B2C;&amp;#x4E8C;&amp;#x6B65;&amp;#x901A;&amp;#x8FC7;runtime.start&amp;#x6765;&amp;#x542F;&amp;#x52A8;java&amp;#x4E2D;&amp;#x7684;ZygoteInit&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E00;&amp;#x6B65;&amp;#x662F;Linux&amp;#x9996;&amp;#x6B21;&amp;#x8FDB;&amp;#x5165;&amp;#x5230;Java&amp;#x5C42;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x907F;&amp;#x514D;&amp;#x5355;&amp;#x7BC7;&amp;#x5E45;&amp;#x5EA6;&amp;#x8FC7;&amp;#x957F;&amp;#xFF0C;&amp;#x5173;&amp;#x4E8E;Linux&amp;#x5982;&amp;#x4F55;&amp;#x542F;&amp;#x52A8;Java&amp;#x4E2D;&amp;#x7684;ZygoteInit&amp;#x4E0E;ZygoteInit&amp;#x7684;&amp;#x5185;&amp;#x90E8;&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5757;&amp;#x7684;&amp;#x5177;&amp;#x4F53;&amp;#x5185;&amp;#x5BB9;&amp;#x5C06;&amp;#x4F1A;&amp;#x5728;&amp;#x4E0B;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x7EE7;&amp;#x7EED;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x603B;&amp;#x7ED3;&amp;#x4E00;&amp;#x4E0B;zygote&amp;#x5728;Linux&amp;#x4E2D;&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;LoadBootScripts(am, sm)&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&lt;/li&gt;
&lt;li&gt;&amp;#x89E3;&amp;#x6790;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;Actions&amp;#x4E8B;&amp;#x4EF6;&amp;#x89E6;&amp;#x53D1;&amp;#x65F6;&amp;#x673A;&amp;#x627E;&amp;#x5230;&amp;#x7C7B;&amp;#x540D;&amp;#x4E3A;main&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x7C7B;&lt;/li&gt;
&lt;li&gt;&amp;#x6839;&amp;#x636E;main&amp;#x542F;&amp;#x52A8;&amp;#x7C7B;&amp;#x6765;&amp;#x542F;&amp;#x52A8;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;zygote&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x7136;&amp;#x540E;&amp;#x901A;&amp;#x8FC7;fork&amp;#x6765;&amp;#x521B;&amp;#x5EFA;zygote&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;pid = 0&lt;/li&gt;
&lt;li&gt;&amp;#x901A;&amp;#x8FC7;execv&amp;#x6765;&amp;#x542F;&amp;#x52A8;zygote&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x8FDB;&amp;#x5165;app_main.cpp&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&lt;br&gt;&amp;#x65B9;&amp;#x6CD5;&lt;/li&gt;
&lt;li&gt;&amp;#x6700;&amp;#x540E;&amp;#x518D;&amp;#x89E3;&amp;#x6790;&amp;#x6CE8;&amp;#x518C;&amp;#x8868;&amp;#x4E2D;service&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x5E76;&amp;#x901A;&amp;#x8FC7;runtime.start&amp;#x542F;&amp;#x52A8;java&amp;#x5C42;&amp;#x7684;ZygoteInit&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x4E00;&amp;#x56FE;&amp;#x80DC;&amp;#x5343;&amp;#x6587;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2020/12/10/Android-Linux-Zygote&amp;#x542F;&amp;#x52A8;/linux_zygote_init.png&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIzNTc5NDY4Nw==&amp;amp;mid=2247484889&amp;amp;idx=1&amp;amp;sn=b39c8bc0a9925464022b77a341263cf0&amp;amp;chksm
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Android init 启动</title>
    <link href="https://www.rousetime.com/2020/12/08/Android-init-%E5%90%AF%E5%8A%A8/"/>
    <id>https://www.rousetime.com/2020/12/08/Android-init-启动/</id>
    <published>2020-12-08T13:50:13.000Z</published>
    <updated>2022-11-30T13:56:41.182Z</updated>
    
    <content type="html">&lt;p&gt;Android&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;Android&amp;#x542F;&amp;#x52A8;&amp;#x5C06;&amp;#x7531;Linux Kernel&amp;#x542F;&amp;#x52A8;&amp;#x5E76;&amp;#x521B;&amp;#x5EFA;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&amp;#x8BE5;&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;&amp;#x7684;&amp;#x9F3B;&amp;#x7956;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x76F8;&amp;#x7EE7;&amp;#x542F;&amp;#x52A8;servicemanager(binder&amp;#x670D;&amp;#x52A1;&amp;#x7BA1;&amp;#x7406;&amp;#x8005;)&amp;#x3001;Zygote&amp;#x8FDB;&amp;#x7A0B;(java&amp;#x8FDB;&amp;#x7A0B;)&amp;#x3002;&amp;#x800C;Zygote&amp;#x53C8;&amp;#x4F1A;&amp;#x521B;&amp;#x5EFA;system_server&amp;#x8FDB;&amp;#x7A0B;&amp;#x4EE5;&amp;#x53CA;app&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x4F60;&amp;#x4E00;&amp;#x5B9A;&amp;#x542C;&amp;#x5230;&amp;#x8FC7;&amp;#x8FD9;&amp;#x53E5;&amp;#x8BDD;&amp;#xFF1A;app&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;&amp;#x7531;Zygote&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x8FC7;fork&amp;#x521B;&amp;#x5EFA;&amp;#x51FA;&amp;#x6765;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x6211;&amp;#x5C1D;&amp;#x8BD5;&amp;#x6765;&amp;#x5206;&amp;#x6790;Android&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x5173;&amp;#x4E8E;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x6B64;&amp;#x6B21;&amp;#x5206;&amp;#x6790;&amp;#x8FC7;&amp;#x7A0B;&amp;#x57FA;&amp;#x4E8E;Android 10.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;init&quot;&gt;&lt;a href=&quot;#init&quot; class=&quot;headerlink&quot; title=&quot;init&quot;&gt;&lt;/a&gt;init&lt;/h2&gt;&lt;p&gt;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;Android&amp;#x542F;&amp;#x52A8;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x5728;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E2D;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;init&amp;#x542F;&amp;#x52A8;&amp;#x5165;&amp;#x53E3;&amp;#x662F;&amp;#x5728;&amp;#x5B83;&amp;#x7684;SecondStageMain&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x3002;&amp;#x4F46;&amp;#x8C03;&amp;#x7528;init&amp;#x7684;SecondStageMain&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;main.cpp&amp;#x4E2D;&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x8FDB;&amp;#x884C;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x4ECE;main.cpp&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x5F00;&amp;#x59CB;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;main&quot;&gt;&lt;a href=&quot;#main&quot; class=&quot;headerlink&quot; title=&quot;main&quot;&gt;&lt;/a&gt;main&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/main.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int main(int argc, char** argv) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#if __has_feature(address_sanitizer)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    __asan_set_error_report_callback(AsanReportCallback);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521B;&amp;#x5EFA;&amp;#x8BBE;&amp;#x5907;&amp;#x8282;&amp;#x70B9;&amp;#x3001;&amp;#x6743;&amp;#x9650;&amp;#x8BBE;&amp;#x5B9A;&amp;#x7B49;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!strcmp(basename(argv[0]), &amp;quot;ueventd&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return ueventd_main(argc, argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (argc &amp;gt; 1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65E5;&amp;#x5FD7;&amp;#x7CFB;&amp;#x7EDF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!strcmp(argv[1], &amp;quot;subcontext&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            android::base::InitLogging(argv, &amp;amp;android::base::KernelLogger);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            const BuiltinFunctionMap function_map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return SubcontextMain(argc, argv, &amp;amp;function_map);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // 2. &amp;#x521B;&amp;#x5EFA;&amp;#x589E;&amp;#x5F3A;&amp;#x578B;Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!strcmp(argv[1], &amp;quot;selinux_setup&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return SetupSelinux(argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // 3. &amp;#x89E3;&amp;#x6790;init.rc&amp;#x6587;&amp;#x4EF6;&amp;#x3001;&amp;#x63D0;&amp;#x4F9B;&amp;#x670D;&amp;#x52A1;&amp;#x3001;&amp;#x521B;&amp;#x5EFA;epoll&amp;#x4E0E;&amp;#x5904;&amp;#x7406;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x7EC8;&amp;#x6B62;&amp;#x7B49;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!strcmp(argv[1], &amp;quot;second_stage&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return SecondStageMain(argc, argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 1. &amp;#x6302;&amp;#x8F7D;&amp;#x76F8;&amp;#x5173;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return FirstStageMain(argc, argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;main.cpp&amp;#x7684;main&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x5206;&amp;#x4E3A;&amp;#x4E09;&amp;#x6B65;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;FirstStageMain&lt;/li&gt;
&lt;li&gt;SetupSelinux&lt;/li&gt;
&lt;li&gt;SecondStageMain&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;FirstStageMain&quot;&gt;&lt;a href=&quot;#FirstStageMain&quot; class=&quot;headerlink&quot; title=&quot;FirstStageMain&quot;&gt;&lt;/a&gt;FirstStageMain&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/first_stage_init.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x662F;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x7B2C;&amp;#x4E00;&amp;#x6B65;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x4EFB;&amp;#x52A1;&amp;#x662F;&amp;#x6302;&amp;#x8F7D;&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int FirstStageMain(int argc, char** argv) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (REBOOT_BOOTLOADER_ON_PANIC) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        InstallRebootSignalHandlers();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    boot_clock::time_point start_time = boot_clock::now();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    std::vector&amp;lt;std::pair&amp;lt;std::string, int&amp;gt;&amp;gt; errors;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define CHECKCALL(x) \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (x != 0) errors.emplace_back(#x &amp;quot; failed&amp;quot;, errno);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Clear the umask.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    umask(0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521B;&amp;#x5EFA;&amp;#x4E8E;&amp;#x6302;&amp;#x8F7D;&amp;#x76F8;&amp;#x5173;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(clearenv());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(setenv(&amp;quot;PATH&amp;quot;, _PATH_DEFPATH, 1));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Get the basic filesystem setup we need put together in the initramdisk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // on / and then we&amp;apos;ll let the rc file figure out the rest.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mount(&amp;quot;tmpfs&amp;quot;, &amp;quot;/dev&amp;quot;, &amp;quot;tmpfs&amp;quot;, MS_NOSUID, &amp;quot;mode=0755&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mkdir(&amp;quot;/dev/pts&amp;quot;, 0755));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mkdir(&amp;quot;/dev/socket&amp;quot;, 0755));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mount(&amp;quot;devpts&amp;quot;, &amp;quot;/dev/pts&amp;quot;, &amp;quot;devpts&amp;quot;, 0, NULL));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#define MAKE_STR(x) __STRING(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mount(&amp;quot;proc&amp;quot;, &amp;quot;/proc&amp;quot;, &amp;quot;proc&amp;quot;, 0, &amp;quot;hidepid=2,gid=&amp;quot; MAKE_STR(AID_READPROC)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#undef MAKE_STR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Don&amp;apos;t expose the raw commandline to unprivileged processes.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(chmod(&amp;quot;/proc/cmdline&amp;quot;, 0440));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gid_t groups[] = {AID_READPROC};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(setgroups(arraysize(groups), groups));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mount(&amp;quot;sysfs&amp;quot;, &amp;quot;/sys&amp;quot;, &amp;quot;sysfs&amp;quot;, 0, NULL));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CHECKCALL(mount(&amp;quot;selinuxfs&amp;quot;, &amp;quot;/sys/fs/selinux&amp;quot;, &amp;quot;selinuxfs&amp;quot;, 0, NULL));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Now that tmpfs is mounted on /dev and we have /dev/kmsg, we can actually&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // talk to the outside world...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65E5;&amp;#x5FD7;&amp;#x7CFB;&amp;#x7EDF;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    InitKernelLogging(argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FDB;&amp;#x5165;&amp;#x4E0B;&amp;#x4E00;&amp;#x6B65;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* path = &amp;quot;/system/bin/init&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* args[] = {path, &amp;quot;selinux_setup&amp;quot;, nullptr};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    execv(path, const_cast&amp;lt;char**&amp;gt;(args));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // execv() only returns if an error happened, in which case we&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // panic and never fall through this conditional.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;execv(\&amp;quot;&amp;quot; &amp;lt;&amp;lt; path &amp;lt;&amp;lt; &amp;quot;\&amp;quot;) failed&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x901A;&amp;#x8FC7;mount&amp;#x6302;&amp;#x8F7D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;mkdir&amp;#x521B;&amp;#x5EFA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x76EE;&amp;#x5F55;&amp;#xFF0C;&amp;#x5E76;&amp;#x914D;&amp;#x7F6E;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x8BBF;&amp;#x95EE;&amp;#x6743;&amp;#x9650;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x6587;&amp;#x4EF6;&amp;#x53EA;&amp;#x662F;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5B58;&amp;#x5728;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;&amp;#x5E94;&amp;#x7528;&amp;#x8FD0;&amp;#x884C;&amp;#x7ED3;&amp;#x675F;&amp;#x5C31;&amp;#x4F1A;&amp;#x968F;&amp;#x7740;&amp;#x5E94;&amp;#x7528;&amp;#x4E00;&amp;#x8D77;&amp;#x6D88;&amp;#x5931;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6302;&amp;#x8F7D;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E3B;&amp;#x8981;&amp;#x6709;&amp;#x56DB;&amp;#x7C7B;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;tmpfs: &amp;#x4E00;&amp;#x79CD;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5B83;&amp;#x4F1A;&amp;#x5C06;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x5B58;&amp;#x50A8;&amp;#x5728;&amp;#x865A;&amp;#x62DF;&amp;#x5185;&amp;#x5B58;&amp;#x4E2D;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;tmpfs&amp;#x662F;&amp;#x9A7B;&amp;#x7559;&amp;#x5728;RAM&amp;#x7684;&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x5B83;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x662F;&amp;#x4E0D;&amp;#x6301;&amp;#x4E45;&amp;#x7684;&amp;#x3002;&amp;#x65AD;&amp;#x7535;&amp;#x540E;&amp;#xFF0C;tmpfs &amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x5C31;&amp;#x6D88;&amp;#x5931;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x88AB;&amp;#x79F0;&amp;#x4F5C;tmpfs&amp;#x7684;&amp;#x6839;&amp;#x672C;&amp;#x539F;&amp;#x56E0;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;devpts: &amp;#x4E3A;&amp;#x4F2A;&amp;#x7EC8;&amp;#x7AEF;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x6807;&amp;#x51C6;&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x5B83;&amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x6302;&amp;#x63A5;&amp;#x70B9;&amp;#x662F;/dev/pts&amp;#x3002;&amp;#x53EA;&amp;#x8981;pty&amp;#x7684;&amp;#x4E3B;&amp;#x590D;&amp;#x5408;&amp;#x8BBE;&amp;#x5907;/dev/ptmx&amp;#x88AB;&amp;#x6253;&amp;#x5F00;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5728;/dev/pts&amp;#x4E0B;&amp;#x52A8;&amp;#x6001;&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x65B0;&amp;#x7684;pty&amp;#x8BBE;&amp;#x5907;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;proc: &amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x865A;&amp;#x62DF;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x5B83;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x4F5C;&amp;#x662F;&amp;#x5185;&amp;#x6838;&amp;#x5185;&amp;#x90E8;&amp;#x6570;&amp;#x636E;&amp;#x7ED3;&amp;#x6784;&amp;#x7684;&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x901A;&amp;#x8FC7;&amp;#x5B83;&amp;#x6211;&amp;#x4EEC;&amp;#x53EF;&amp;#x4EE5;&amp;#x83B7;&amp;#x5F97;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x4E5F;&amp;#x80FD;&amp;#x591F;&amp;#x5728;&amp;#x8FD0;&amp;#x884C;&amp;#x65F6;&amp;#x4FEE;&amp;#x6539;&amp;#x7279;&amp;#x5B9A;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;sysfs: &amp;#x4E0E;proc&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E0D;&amp;#x5360;&amp;#x6709;&amp;#x4EFB;&amp;#x4F55;&amp;#x78C1;&amp;#x76D8;&amp;#x7A7A;&amp;#x95F4;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x5B83;&amp;#x901A;&amp;#x5E38;&amp;#x88AB;&amp;#x6302;&amp;#x63A5;&amp;#x5728;/sys&amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x5728;FirstStageMain&amp;#x8FD8;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;InitKernelLogging(argv)&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;log&amp;#x65E5;&amp;#x5FD7;&amp;#x7CFB;&amp;#x7EDF;&amp;#x3002;&amp;#x6B64;&amp;#x65F6;Android&amp;#x8FD8;&amp;#x6CA1;&amp;#x6709;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;&amp;#x65E5;&amp;#x5FD7;&amp;#xFF0C;&amp;#x91C7;&amp;#x7528;kernel&amp;#x7684;log&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x6253;&amp;#x5F00;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x8282;&amp;#x70B9;/dev/kmsg&amp;#xFF0C; &amp;#x90A3;&amp;#x4E48;&amp;#x53EF;&amp;#x901A;&amp;#x8FC7;cat /dev/kmsg&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5185;&amp;#x6838;log&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;execv&amp;#x65B9;&amp;#x6CD5;&amp;#x4F20;&amp;#x9012;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;path&amp;#x4E0E;&amp;#x4E0B;&amp;#x4E00;&amp;#x9636;&amp;#x6BB5;&amp;#x7684;&amp;#x53C2;&amp;#x6570;selinux_setup&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;SetupSelinux&quot;&gt;&lt;a href=&quot;#SetupSelinux&quot; class=&quot;headerlink&quot; title=&quot;SetupSelinux&quot;&gt;&lt;/a&gt;SetupSelinux&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/selinux.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// This function initializes SELinux then execs init to run in the init SELinux context.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int SetupSelinux(char** argv) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    InitKernelLogging(argv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (REBOOT_BOOTLOADER_ON_PANIC) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        InstallRebootSignalHandlers();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Set up SELinux, loading the SELinux policy.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SelinuxSetupKernelLogging();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SelinuxInitialize();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // We&amp;apos;re in the kernel domain and want to transition to the init domain.  File systems that&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // store SELabels in their xattrs, such as ext4 do not need an explicit restorecon here,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // but other file systems do.  In particular, this is needed for ramdisks such as the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // recovery image for A/B devices.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (selinux_android_restorecon(&amp;quot;/system/bin/init&amp;quot;, 0) == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;restorecon failed of /system/bin/init failed&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x8FDB;&amp;#x5165;&amp;#x4E0B;&amp;#x4E00;&amp;#x6B65;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* path = &amp;quot;/system/bin/init&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* args[] = {path, &amp;quot;second_stage&amp;quot;, nullptr};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    execv(path, const_cast&amp;lt;char**&amp;gt;(args));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // execv() only returns if an error happened, in which case we&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // panic and never return from this function.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;execv(\&amp;quot;&amp;quot; &amp;lt;&amp;lt; path &amp;lt;&amp;lt; &amp;quot;\&amp;quot;) failed&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x63D0;&amp;#x9AD8;linux&amp;#x7684;&amp;#x5B89;&amp;#x5168;&amp;#xFF0C;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#x7EA6;&amp;#x675F;&amp;#x8BBF;&amp;#x95EE;&amp;#x7684;&amp;#x6743;&amp;#x9650;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x4E5F;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;execv&amp;#x6765;&amp;#x8FDB;&amp;#x7A0B;init&amp;#x542F;&amp;#x52A8;&amp;#x7684;&amp;#x6838;&amp;#x5FC3;&amp;#x9636;&amp;#x6BB5;SecondStageMain&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;SecondStageMain&quot;&gt;&lt;a href=&quot;#SecondStageMain&quot; class=&quot;headerlink&quot; title=&quot;SecondStageMain&quot;&gt;&lt;/a&gt;SecondStageMain&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/init.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;int SecondStageMain(int argc, char** argv) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (REBOOT_BOOTLOADER_ON_PANIC) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        InstallRebootSignalHandlers();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // If arguments are passed both on the command line and in DT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // properties set in DT always have priority over the command-line ones.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    process_kernel_dt();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    process_kernel_cmdline();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Propagate the kernel variables to internal variables&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // used by init as well as the current required properties.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    export_kernel_boot_props();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Make the time that init started available for bootstat to log.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_set(&amp;quot;ro.boottime.init&amp;quot;, getenv(&amp;quot;INIT_STARTED_AT&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_set(&amp;quot;ro.boottime.init.selinux&amp;quot;, getenv(&amp;quot;INIT_SELINUX_TOOK&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Set libavb version for Framework-only OTA match in Treble build.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* avb_version = getenv(&amp;quot;INIT_AVB_VERSION&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (avb_version) property_set(&amp;quot;ro.boot.avb_version&amp;quot;, avb_version);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // See if need to load debug props to allow adb root, when the device is unlocked.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char* force_debuggable_env = getenv(&amp;quot;INIT_FORCE_DEBUGGABLE&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (force_debuggable_env &amp;amp;&amp;amp; AvbHandle::IsDeviceUnlocked()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        load_debug_prop = &amp;quot;true&amp;quot;s == force_debuggable_env;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Clean up our environment.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unsetenv(&amp;quot;INIT_STARTED_AT&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unsetenv(&amp;quot;INIT_SELINUX_TOOK&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unsetenv(&amp;quot;INIT_AVB_VERSION&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unsetenv(&amp;quot;INIT_FORCE_DEBUGGABLE&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Now set up SELinux for second stage.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SelinuxSetupKernelLogging();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SelabelInitialize();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SelinuxRestoreContext();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Epoll epoll;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (auto result = epoll.Open(); !result) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; result.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    InstallSignalFdHandler(&amp;amp;epoll);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_load_boot_defaults(load_debug_prop);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    UmountDebugRamdisk();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fs_mgr_vendor_overlay_mount_all();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    export_oem_lock_status();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StartPropertyService(&amp;amp;epoll);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MountHandler mount_handler(&amp;amp;epoll);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_usb_controller();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const BuiltinFunctionMap function_map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Action::set_function_map(&amp;amp;function_map);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!SetupMountNamespaces()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;SetupMountNamespaces failed&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    subcontexts = InitializeSubcontexts();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ActionManager&amp;amp; am = ActionManager::GetInstance();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ServiceList&amp;amp; sm = ServiceList::GetInstance();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x89E3;&amp;#x6790;init.rc&amp;#x7B49;&amp;#x76F8;&amp;#x5173;&amp;#x6587;&amp;#x4EF6;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LoadBootScripts(am, sm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Turning this on and letting the INFO logging be discarded adds 0.2s to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Nexus 9 boot time, so it&amp;apos;s disabled by default.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (false) DumpState();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Make the GSI status available before scripts start running.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (android::gsi::IsGsiRunning()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        property_set(&amp;quot;ro.gsid.image_running&amp;quot;, &amp;quot;1&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        property_set(&amp;quot;ro.gsid.image_running&amp;quot;, &amp;quot;0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(SetupCgroupsAction, &amp;quot;SetupCgroups&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueEventTrigger(&amp;quot;early-init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Queue an action that waits for coldboot done so we know ueventd has set up all of /dev...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(wait_for_coldboot_done_action, &amp;quot;wait_for_coldboot_done&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // ... so that we can start queuing up actions that require stuff from /dev.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(MixHwrngIntoLinuxRngAction, &amp;quot;MixHwrngIntoLinuxRng&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(SetMmapRndBitsAction, &amp;quot;SetMmapRndBits&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(SetKptrRestrictAction, &amp;quot;SetKptrRestrict&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Keychords keychords;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&amp;amp;epoll, &amp;amp;keychords](const BuiltinArguments&amp;amp; args) -&amp;gt; Result&amp;lt;Success&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for (const auto&amp;amp; svc : ServiceList::GetInstance()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                keychords.Register(svc-&amp;gt;keycodes());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            keychords.Start(&amp;amp;epoll, HandleKeychord);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return Success();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        },&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;KeychordInit&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(console_init_action, &amp;quot;console_init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Trigger all the boot actions to get us started.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueEventTrigger(&amp;quot;init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Starting the BoringSSL self test, for NIAP certification compliance.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(StartBoringSslSelfTest, &amp;quot;StartBoringSslSelfTest&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Repeat mix_hwrng_into_linux_rng in case /dev/hw_random or /dev/random&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // wasn&amp;apos;t ready immediately after wait_for_coldboot_done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(MixHwrngIntoLinuxRngAction, &amp;quot;MixHwrngIntoLinuxRng&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Initialize binder before bringing up other system services&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(InitBinder, &amp;quot;InitBinder&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Don&amp;apos;t mount filesystems or start core system services in charger mode.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    std::string bootmode = GetProperty(&amp;quot;ro.bootmode&amp;quot;, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (bootmode == &amp;quot;charger&amp;quot;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        am.QueueEventTrigger(&amp;quot;charger&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        am.QueueEventTrigger(&amp;quot;late-init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Run all property triggers based on current state of the properties.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    am.QueueBuiltinAction(queue_property_triggers_action, &amp;quot;queue_property_triggers&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (true) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // By default, sleep until something happens.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        auto epoll_timeout = std::optional&amp;lt;std::chrono::milliseconds&amp;gt;{};&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (do_shutdown &amp;amp;&amp;amp; !shutting_down) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            do_shutdown = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (HandlePowerctlMessage(shutdown_command)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                shutting_down = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!(waiting_for_prop || Service::is_exec_service_running())) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            am.ExecuteOneCommand();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!(waiting_for_prop || Service::is_exec_service_running())) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (!shutting_down) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                auto next_process_action_time = HandleProcessActions();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // If there&amp;apos;s a process that needs restarting, wake up in time for that.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (next_process_action_time) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    epoll_timeout = std::chrono::ceil&amp;lt;std::chrono::milliseconds&amp;gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            *next_process_action_time - boot_clock::now());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    if (*epoll_timeout &amp;lt; 0ms) epoll_timeout = 0ms;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // If there&amp;apos;s more work to do, wake up again immediately.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (am.HasMoreCommands()) epoll_timeout = 0ms;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (auto result = epoll.Wait(epoll_timeout); !result) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LOG(ERROR) &amp;lt;&amp;lt; result.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;SecondStageMain&amp;#x4E2D;&amp;#x4E3B;&amp;#x8981;&amp;#x5206;&amp;#x4E3A;4&amp;#x6B65;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&lt;/li&gt;
&lt;li&gt;&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot;&gt;&lt;a href=&quot;#&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot;&gt;&lt;/a&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/property_service.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void property_init() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mkdir(&amp;quot;/dev/__properties__&amp;quot;, S_IRWXU | S_IXGRP | S_IXOTH);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CreateSerializedPropertyInfo();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (__system_property_area_init()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG(FATAL) &amp;lt;&amp;lt; &amp;quot;Failed to initialize property area&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!property_info_area.LoadDefaultPath()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG(FATAL) &amp;lt;&amp;lt; &amp;quot;Failed to load serialized property info file&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x65B9;&amp;#x6CD5;&amp;#x662F;__system_property_area_init()&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5185;&amp;#x5B58;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x6267;&amp;#x884C;open&amp;#xFF0C;&amp;#x6253;&amp;#x5F00;dev/properities&amp;#x5171;&amp;#x4EAB;&amp;#x5185;&amp;#x5B58;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;128KB&lt;/li&gt;
&lt;li&gt;&amp;#x6267;&amp;#x884C;mmap&amp;#xFF0C;&amp;#x5C06;&amp;#x5185;&amp;#x5B58;&amp;#x6620;&amp;#x5C04;&amp;#x5230;init&amp;#x8FDB;&amp;#x7A0B;&lt;/li&gt;
&lt;li&gt;&amp;#x5C06;&amp;#x8BE5;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x9996;&amp;#x5730;&amp;#x5740;&amp;#x4FDD;&amp;#x5B58;&amp;#x5728;&amp;#x5168;&amp;#x5C40;&amp;#x53D8;&amp;#x91CF;&lt;strong&gt;system_property_area&lt;/strong&gt;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x7684;&amp;#x589E;&amp;#x52A0;&amp;#x6216;&amp;#x8005;&amp;#x4FEE;&amp;#x6539;&amp;#x5C5E;&amp;#x6027;&amp;#x90FD;&amp;#x57FA;&amp;#x4E8E;&amp;#x8BE5;&amp;#x53D8;&amp;#x91CF;&amp;#x6765;&amp;#x8BA1;&amp;#x7B97;&amp;#x4F4D;&amp;#x7F6E;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&quot;&gt;&lt;a href=&quot;#&amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&quot;&gt;&lt;/a&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;single&amp;#x53E5;&amp;#x67C4;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/init.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static void InstallSignalFdHandler(Epoll* epoll) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Applying SA_NOCLDSTOP to a defaulted SIGCHLD handler prevents the signalfd from receiving&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // SIGCHLD when a child process stops or continues (b/77867680#comment9).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const struct sigaction act { .sa_handler = SIG_DFL, .sa_flags = SA_NOCLDSTOP };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sigaction(SIGCHLD, &amp;amp;act, nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sigset_t mask;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sigemptyset(&amp;amp;mask);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sigaddset(&amp;amp;mask, SIGCHLD);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!IsRebootCapable()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // If init does not have the CAP_SYS_BOOT capability, it is running in a container.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // In that case, receiving SIGTERM will cause the system to shut down.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sigaddset(&amp;amp;mask, SIGTERM);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (sigprocmask(SIG_BLOCK, &amp;amp;mask, nullptr) == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;failed to block signals&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Register a handler to unblock signals in the child processes.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const int result = pthread_atfork(nullptr, nullptr, &amp;amp;UnblockSignals);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (result != 0) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG(FATAL) &amp;lt;&amp;lt; &amp;quot;Failed to register a fork handler: &amp;quot; &amp;lt;&amp;lt; strerror(result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    signal_fd = signalfd(-1, &amp;amp;mask, SFD_CLOEXEC);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (signal_fd == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;failed to create signalfd&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (auto result = epoll-&amp;gt;RegisterHandler(signal_fd, HandleSignalFd); !result) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LOG(FATAL) &amp;lt;&amp;lt; result.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6BCF;&amp;#x4E2A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5728;&amp;#x5904;&amp;#x7406;&amp;#x5176;&amp;#x4ED6;&amp;#x8FDB;&amp;#x7A0B;&amp;#x53D1;&amp;#x9001;&amp;#x7684;signal&amp;#x4FE1;&amp;#x53F7;&amp;#x65F6;&amp;#x90FD;&amp;#x9700;&amp;#x8981;&amp;#x5148;&amp;#x6CE8;&amp;#x518C;&amp;#xFF0C;&amp;#x5F53;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x8FD0;&amp;#x884C;&amp;#x72B6;&amp;#x6001;&amp;#x6539;&amp;#x53D8;&amp;#x6216;&amp;#x7EC8;&amp;#x6B62;&amp;#x65F6;&amp;#x4F1A;&amp;#x4EA7;&amp;#x751F;&amp;#x67D0;&amp;#x79CD;signal&amp;#x4FE1;&amp;#x53F7;&amp;#xFF0C;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7528;&amp;#x6237;&amp;#x7A7A;&amp;#x95F4;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5F53;&amp;#x5176;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7EC8;&amp;#x6B62;&amp;#x65F6;&amp;#x4EA7;&amp;#x751F;signal&amp;#x4FE1;&amp;#x53F7;&amp;#x3002;&amp;#x4EE5;&amp;#x4FBF;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x76EE;&amp;#x7684;&amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x9632;&amp;#x6B62;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x6210;&amp;#x4E3A;&amp;#x50F5;&amp;#x5C38;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F55;&amp;#x4E3A;&amp;#x50F5;&amp;#x5C38;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4F7F;&amp;#x7528;fork&amp;#x521B;&amp;#x5EFA;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7EC8;&amp;#x6B62;&amp;#x540E;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x7236;&amp;#x8FDB;&amp;#x7A0B;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5DF2;&amp;#x7ECF;&amp;#x7EC8;&amp;#x6B62;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x8FD9;&amp;#x65F6;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x867D;&amp;#x7136;&amp;#x5DF2;&amp;#x7ECF;&amp;#x9000;&amp;#x51FA;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x5728;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8868;&amp;#x4E2D;&amp;#x8FD8;&amp;#x4E3A;&amp;#x5B83;&amp;#x4FDD;&amp;#x7559;&amp;#x4E86;&amp;#x4E00;&amp;#x4E9B;&amp;#x4FE1;&amp;#x606F;&amp;#xFF08;&amp;#x5982;&amp;#x8FDB;&amp;#x7A0B;&amp;#x53F7;&amp;#x3001;&amp;#x8FD0;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#x3001;&amp;#x9000;&amp;#x51FA;&amp;#x72B6;&amp;#x6001;&amp;#x7B49;&amp;#xFF09;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#x5C31;&amp;#x662F;&amp;#x6240;&amp;#x8C13;&amp;#x7684;&amp;#x50F5;&amp;#x5C38;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&amp;#x5176;&amp;#x4E2D;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8868;&amp;#x662F;&amp;#x4E00;&amp;#x9879;&amp;#x6709;&amp;#x9650;&amp;#x7684;&amp;#x8D44;&amp;#x6E90;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5B83;&amp;#x88AB;&amp;#x50F5;&amp;#x5C38;&amp;#x8FDB;&amp;#x7A0B;&amp;#x8017;&amp;#x5C3D;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x65E0;&amp;#x6CD5;&amp;#x521B;&amp;#x5EFA;&amp;#x65B0;&amp;#x7684;&amp;#x8FDB;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;epoll&amp;#x8FDB;&amp;#x884C;&amp;#x6CE8;&amp;#x518C;&amp;#x53E5;&amp;#x67C4;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x4F1A;&amp;#x7531;HandleSignalFd&amp;#x8FDB;&amp;#x884C;&amp;#x56DE;&amp;#x8C03;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;epoll&amp;#x53C8;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;Linux&amp;#x7684;&amp;#x65B0;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#xFF0C;epoll&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x53D6;&amp;#x4EE3;select/poll&amp;#x7684;&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;Linux&amp;#x5185;&amp;#x6838;&amp;#x4E3A;&amp;#x5904;&amp;#x7406;&amp;#x5927;&amp;#x6279;&amp;#x91CF;&amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;&amp;#x7684;&amp;#x6539;&amp;#x8FDB;&amp;#x7248;poll&amp;#xFF0C;&amp;#x662F;Linux&amp;#x4E0B;&amp;#x591A;&amp;#x8DEF;&amp;#x590D;&amp;#x7528;I/O&amp;#x63A5;&amp;#x53E3;select/poll&amp;#x7684;&amp;#x589E;&amp;#x5F3A;&amp;#x7248;&amp;#xFF0C;&amp;#x5B83;&amp;#x80FD;&amp;#x663E;&amp;#x8457;&amp;#x63D0;&amp;#x5347;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5728;&amp;#x5927;&amp;#x91CF;&amp;#x5E76;&amp;#x53D1;&amp;#x8FDE;&amp;#x63A5;&amp;#x4E2D;&amp;#x53EA;&amp;#x6709;&amp;#x5C11;&amp;#x91CF;&amp;#x6D3B;&amp;#x8DC3;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#x7684;&amp;#x7CFB;&amp;#x7EDF;CPU&amp;#x5229;&amp;#x7528;&amp;#x7387;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;epoll&amp;#x5185;&amp;#x90E8;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;&amp;#x7EA2;&amp;#x9ED1;&amp;#x6811;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x67E5;&amp;#x627E;&amp;#x6548;&amp;#x7387;&amp;#x6BD4;&amp;#x4F7F;&amp;#x7528;&amp;#x6570;&amp;#x7EC4;&amp;#x7684;select&amp;#x66F4;&amp;#x5FEB;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot;&gt;&lt;a href=&quot;#&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&quot;&gt;&lt;/a&gt;&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/property_service.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;void StartPropertyService(Epoll* epoll) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    selinux_callback cb;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cb.func_audit = SelinuxAuditCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    selinux_set_callback(SELINUX_CB_AUDIT, cb);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_set(&amp;quot;ro.property_service.version&amp;quot;, &amp;quot;2&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_set_fd = CreateSocket(PROP_SERVICE_NAME, SOCK_STREAM | SOCK_CLOEXEC | SOCK_NONBLOCK,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                   false, 0666, 0, 0, nullptr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (property_set_fd == -1) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; &amp;quot;start_property_service socket creation failed&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listen(property_set_fd, 8);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (auto result = epoll-&amp;gt;RegisterHandler(property_set_fd, handle_property_set_fd); !result) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PLOG(FATAL) &amp;lt;&amp;lt; result.error();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x505A;&amp;#x7684;&amp;#x4EFB;&amp;#x52A1;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x975E;&amp;#x963B;&amp;#x585E;&amp;#x5F0F;&amp;#x7684;Socket&amp;#xFF0C;&amp;#x5E76;&amp;#x8FD4;&amp;#x56DE;property_set_fd&amp;#x6587;&amp;#x4EF6;&amp;#x63CF;&amp;#x8FF0;&amp;#x7B26;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x4F7F;&amp;#x7528;listen()&amp;#x51FD;&amp;#x6570;&amp;#x53BB;&amp;#x76D1;&amp;#x542C;property_set_fd&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;Socket&amp;#x5373;&amp;#x6210;&amp;#x4E3A;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&amp;#x7AEF;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5B83;&amp;#x6700;&amp;#x591A;&amp;#x540C;&amp;#x65F6;&amp;#x53EF;&amp;#x4E3A;8&amp;#x4E2A;&amp;#x8BD5;&amp;#x56FE;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5C5E;&amp;#x6027;&amp;#x7684;&amp;#x7528;&amp;#x6237;&amp;#x63D0;&amp;#x4F9B;&amp;#x670D;&amp;#x52A1;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;&amp;#x4F7F;&amp;#x7528;epoll&amp;#x6CE8;&amp;#x518C;&amp;#xFF0C;&amp;#x5F53;property_set_fd&amp;#x4E2D;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x5230;&amp;#x6765;&amp;#x65F6;&amp;#xFF0C;init&amp;#x8FDB;&amp;#x7A0B;&amp;#x5C06;&amp;#x8C03;&amp;#x7528;handle_property_set_fd()&amp;#x51FD;&amp;#x6570;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x89E3;&amp;#x6790;-rc&amp;#x6587;&amp;#x4EF6;&quot;&gt;&lt;a href=&quot;#&amp;#x89E3;&amp;#x6790;-rc&amp;#x6587;&amp;#x4EF6;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&quot;&gt;&lt;/a&gt;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;system/core/init/init.cpp&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;static void LoadBootScripts(ActionManager&amp;amp; action_manager, ServiceList&amp;amp; service_list) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Parser parser = CreateParser(action_manager, service_list);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    std::string bootscript = GetProperty(&amp;quot;ro.boot.init_rc&amp;quot;, &amp;quot;&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (bootscript.empty()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        parser.ParseConfig(&amp;quot;/init.rc&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!parser.ParseConfig(&amp;quot;/system/etc/init&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            late_import_paths.emplace_back(&amp;quot;/system/etc/init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!parser.ParseConfig(&amp;quot;/product/etc/init&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            late_import_paths.emplace_back(&amp;quot;/product/etc/init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!parser.ParseConfig(&amp;quot;/product_services/etc/init&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            late_import_paths.emplace_back(&amp;quot;/product_services/etc/init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!parser.ParseConfig(&amp;quot;/odm/etc/init&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            late_import_paths.emplace_back(&amp;quot;/odm/etc/init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (!parser.ParseConfig(&amp;quot;/vendor/etc/init&amp;quot;)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            late_import_paths.emplace_back(&amp;quot;/vendor/etc/init&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        parser.ParseConfig(bootscript);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;ParseConfig&amp;#x6765;&amp;#x89E3;&amp;#x6790;init.rc&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x8BED;&amp;#x6CD5;&amp;#x662F;&amp;#x4EE5;&amp;#x884C;&amp;#x5C3E;&amp;#x5355;&amp;#x4F4D;&amp;#xFF0C;&amp;#x4EE5;&amp;#x7A7A;&amp;#x683C;&amp;#x95F4;&amp;#x9694;&amp;#x7684;&amp;#x8BED;&amp;#x6CD5;&amp;#xFF0C;&amp;#x4EE5;#&amp;#x5F00;&amp;#x59CB;&amp;#x4EE3;&amp;#x8868;&amp;#x6CE8;&amp;#x91CA;&amp;#x884C;&amp;#x3002;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x4E3B;&amp;#x8981;&amp;#x5305;&amp;#x542B;Action&amp;#x3001;Service&amp;#x3001;Command&amp;#x3001;Options&amp;#x3001;Import&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x5BF9;&amp;#x4E8E;Action&amp;#x548C;Service&amp;#x7684;&amp;#x540D;&amp;#x79F0;&amp;#x90FD;&amp;#x662F;&amp;#x552F;&amp;#x4E00;&amp;#x7684;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x91CD;&amp;#x590D;&amp;#x7684;&amp;#x547D;&amp;#x540D;&amp;#x89C6;&amp;#x4E3A;&amp;#x65E0;&amp;#x6548;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;init.rc&amp;#x4E2D;&amp;#x7684;Action&amp;#x3001;Service&amp;#x8BED;&amp;#x53E5;&amp;#x90FD;&amp;#x6709;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x7C7B;&amp;#x6765;&amp;#x89E3;&amp;#x6790;&amp;#xFF0C;&amp;#x5373;ActionParser&amp;#x3001;ServiceParser&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x89E3;&amp;#x6790;init.rc&amp;#x4E2D;&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#xFF0C;&amp;#x8FDB;&amp;#x884C;&amp;#x542F;&amp;#x52A8;Zygote&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x5173;&amp;#x4E8E;Zygote&amp;#x7684;&amp;#x542F;&amp;#x52A8;&amp;#x540E;&amp;#x7EED;&amp;#x518D;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x4E3B;&amp;#x8981;&amp;#x5C1D;&amp;#x8BD5;&amp;#x5206;&amp;#x6790;&amp;#x4E86;&amp;#x4E00;&amp;#x4E0B;Android&amp;#x5728;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x4E0B;&amp;#x7684;init&amp;#x542F;&amp;#x52A8;&amp;#x6D89;&amp;#x53CA;&amp;#x7684;&amp;#x4E3B;&amp;#x8981;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x89C1;init&amp;#x542F;&amp;#x52A8;&amp;#x4E3B;&amp;#x8981;&amp;#x6D89;&amp;#x53CA;&amp;#x7684;&amp;#x5DE5;&amp;#x4F5C;&amp;#x662F;&amp;#xFF1A;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;&amp;#x4E0E;&amp;#x6302;&amp;#x8F7D;&amp;#x542F;&amp;#x52A8;&amp;#x6240;&amp;#x9700;&amp;#x8981;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&lt;/li&gt;
&lt;li&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x521B;&amp;#x5EFA;single&amp;#x53E5;&amp;#x67C4;&amp;#xFF0C;&amp;#x6765;&amp;#x76D1;&amp;#x542C;&amp;#x5B50;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x9632;&amp;#x6B62;&amp;#x50F5;&amp;#x5C38;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x4EA7;&amp;#x751F;&lt;/li&gt;
&lt;li&gt;&amp;#x5F00;&amp;#x542F;&amp;#x5C5E;&amp;#x6027;&amp;#x670D;&amp;#x52A1;&lt;/li&gt;
&lt;li&gt;&amp;#x89E3;&amp;#x6790;.rc&amp;#x6587;&amp;#x4EF6;&amp;#x5E76;&amp;#x542F;&amp;#x52A8;Zygote&amp;#x8FDB;&amp;#x7A0B;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Android&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;Linux&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;Android&amp;#x542F;&amp;#x52A8;&amp;#x5C06;&amp;#x7531;Linux Kernel&amp;#
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="启动" scheme="https://www.rousetime.com/tags/%E5%90%AF%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Jetpack:DataStore必知的几个优点</title>
    <link href="https://www.rousetime.com/2020/12/06/Jetpack-DataStore%E5%BF%85%E7%9F%A5%E7%9A%84%E5%87%A0%E4%B8%AA%E4%BC%98%E7%82%B9/"/>
    <id>https://www.rousetime.com/2020/12/06/Jetpack-DataStore必知的几个优点/</id>
    <published>2020-12-06T13:38:03.000Z</published>
    <updated>2022-11-30T13:48:47.912Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x6700;&amp;#x8FD1;Jetpack&amp;#x53C8;&amp;#x589E;&amp;#x52A0;&amp;#x4E86;&amp;#x65B0;&amp;#x6210;&amp;#x5458;&amp;#xFF0C;&amp;#x63D0;&amp;#x51FA;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x5173;&amp;#x4E8E;&amp;#x5C0F;&amp;#x578B;&amp;#x6570;&amp;#x636E;&amp;#x5B58;&amp;#x50A8;&amp;#x76F8;&amp;#x5173;&amp;#x7684;DataStore&amp;#x7EC4;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6839;&amp;#x636E;&amp;#x5B98;&amp;#x7F51;&amp;#x7684;&amp;#x63CF;&amp;#x8FF0;&amp;#xFF0C;DataStore&amp;#x5B8C;&amp;#x5168;&amp;#x662F;&amp;#x5BF9;&amp;#x6807;&amp;#x73B0;&amp;#x6709;&amp;#x7684;SharedPreferences&amp;#x3002;&lt;/p&gt;
&lt;p&gt;SharedPreferences&amp;#x76F8;&amp;#x4FE1;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x6709;&amp;#x7528;&amp;#x8FC7;&amp;#xFF0C;&amp;#x65E2;&amp;#x7136;&amp;#x5728;&amp;#x73B0;&amp;#x6709;&amp;#x7684;&amp;#x57FA;&amp;#x7840;&amp;#x4E0A;&amp;#x63D0;&amp;#x51FA;DataStore&amp;#x90A3;&amp;#x81EA;&amp;#x7136;&amp;#x662F;&amp;#x4E3A;&amp;#x4E86;&amp;#x89E3;&amp;#x51B3;SharedPreferences&amp;#x7684;&amp;#x7F3A;&amp;#x70B9;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x8FD8;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;SharedPreferences&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x7F3A;&amp;#x70B9;&amp;#xFF1F;&amp;#x6CA1;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x6B63;&amp;#x597D;&amp;#x6765;&amp;#x590D;&amp;#x4E60;&amp;#x4E00;&amp;#x904D;&amp;#x3002;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x5BF9;&amp;#x6807;&amp;#x4E00;&amp;#x4E0B;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;SharedPreferences&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x662F;&amp;#x5426;&amp;#x4E5F;&amp;#x9047;&amp;#x5230;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E9B;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;SharedPreferences&amp;#x7684;&amp;#x7CDF;&amp;#x5FC3;&amp;#x4E8B;&quot;&gt;&lt;a href=&quot;#SharedPreferences&amp;#x7684;&amp;#x7CDF;&amp;#x5FC3;&amp;#x4E8B;&quot; class=&quot;headerlink&quot; title=&quot;SharedPreferences&amp;#x7684;&amp;#x7CDF;&amp;#x5FC3;&amp;#x4E8B;&quot;&gt;&lt;/a&gt;SharedPreferences&amp;#x7684;&amp;#x7CDF;&amp;#x5FC3;&amp;#x4E8B;&lt;/h2&gt;&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x7CBE;&amp;#x7B80;&amp;#x8BED;&amp;#x8A00;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x90FD;&amp;#x5C06;SharedPreferences&amp;#x7B80;&amp;#x79F0;sp&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x4E00;&amp;#x6B21;&amp;#x6027;&amp;#x8BFB;&amp;#x53D6;&amp;#x963B;&amp;#x585E;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&quot;&gt;&lt;a href=&quot;#&amp;#x4E00;&amp;#x6B21;&amp;#x6027;&amp;#x8BFB;&amp;#x53D6;&amp;#x963B;&amp;#x585E;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E00;&amp;#x6B21;&amp;#x6027;&amp;#x8BFB;&amp;#x53D6;&amp;#x963B;&amp;#x585E;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&quot;&gt;&lt;/a&gt;&amp;#x4E00;&amp;#x6B21;&amp;#x6027;&amp;#x8BFB;&amp;#x53D6;&amp;#x963B;&amp;#x585E;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp = getSharedPreferences(&amp;quot;settings_preference&amp;quot;, Context.MODE_PRIVATE)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;sp&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x901A;&amp;#x8FC7;getSharedPreferences&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;sp&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x8FD9;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x8FDB;&amp;#x5165;SharedPreferencesImpl&amp;#x7684;loadFromDisk&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x8C03;&amp;#x7528;&amp;#x5C31;&amp;#x4E0D;&amp;#x5E26;&amp;#x5927;&amp;#x5BB6;&amp;#x8D70;&amp;#x4E00;&amp;#x904D;&amp;#x4E86;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x90FD;&amp;#x8D34;&amp;#x51FA;&amp;#x6765;&amp;#x6587;&amp;#x7AE0;&amp;#x5C31;&amp;#x53D8;&amp;#x6210;&amp;#x4EE3;&amp;#x7801;&amp;#x7C98;&amp;#x8D34;&amp;#x677F;&amp;#x4E86;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x5173;&amp;#x6CE8;&amp;#x6838;&amp;#x5FC3;&amp;#x903B;&amp;#x8F91;&amp;#xFF0C;&amp;#x5176;&amp;#x5B83;&amp;#x611F;&amp;#x5174;&amp;#x8DA3;&amp;#x7684;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x884C;&amp;#x67E5;&amp;#x770B;&amp;#x6E90;&amp;#x7801;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private void loadFromDisk() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (mLock) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mLoaded) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mBackupFile.exists()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mFile.delete();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mBackupFile.renameTo(mFile);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Debugging&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mFile.exists() &amp;amp;&amp;amp; !mFile.canRead()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Log.w(TAG, &amp;quot;Attempt to read preferences file &amp;quot; + mFile + &amp;quot; without permission&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Map&amp;lt;String, Object&amp;gt; map = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    StructStat stat = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Throwable thrown = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        stat = Os.stat(mFile.getPath());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (mFile.canRead()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            BufferedInputStream str = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                str = new BufferedInputStream(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        new FileInputStream(mFile), 16 * 1024);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                map = (Map&amp;lt;String, Object&amp;gt;) XmlUtils.readMapXml(str);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } catch (Exception e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Log.w(TAG, &amp;quot;Cannot read &amp;quot; + mFile.getAbsolutePath(), e);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                IoUtils.closeQuietly(str);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (ErrnoException e) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // An errno exception means the stat failed. Treat as empty/non-existing by&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // ignoring.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    } catch (Throwable t) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        thrown = t;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (mLock) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mLoaded = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mThrowable = thrown;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // It&amp;apos;s important that we always signal waiters, even if we&amp;apos;ll make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // them fail with an exception. The try-finally is pretty wide, but&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // better safe than sorry.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if (thrown == null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (map != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mMap = map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mStatTimestamp = stat.st_mtim;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mStatSize = stat.st_size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mMap = new HashMap&amp;lt;&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // In case of a thrown exception, we retain the old map. That allows&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // any open editors to commit and store updates.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (Throwable t) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mThrowable = t;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } finally {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mLock.notifyAll();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x901A;&amp;#x8FC7;&amp;#x5BF9;&amp;#x8C61;&amp;#x9501;mLock&amp;#x673A;&amp;#x5236;&amp;#x6765;&amp;#x5BF9;&amp;#x5176;&amp;#x8FDB;&amp;#x884C;&amp;#x52A0;&amp;#x9501;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&amp;#x53EA;&amp;#x6709;&amp;#x5F53;sp&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5168;&amp;#x90E8;&amp;#x8BFB;&amp;#x53D6;&amp;#x5B8C;&amp;#x6BD5;&amp;#x4E4B;&amp;#x540E;&amp;#x624D;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;mLock.notifyAll()&amp;#x6765;&amp;#x91CA;&amp;#x653E;&amp;#x9501;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x53E6;&amp;#x4E00;&amp;#x8FB9;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#x7684;get&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;getString&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public String getString(String key, @Nullable String defValue) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (mLock) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        awaitLoadedLocked();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String v = (String)mMap.get(key);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return v != null ? v : defValue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private void awaitLoadedLocked() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (!mLoaded) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Raise an explicit StrictMode onReadFromDisk for this&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // thread, since the real read will be in a different&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // thread and otherwise ignored by StrictMode.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        BlockGuard.getThreadPolicy().onReadFromDisk();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (!mLoaded) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mLock.wait(); // &amp;#x7B49;&amp;#x5F85;sp&amp;#x6587;&amp;#x4EF6;&amp;#x8BFB;&amp;#x53D6;&amp;#x5B8C;&amp;#x6BD5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } catch (InterruptedException unused) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (mThrowable != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        throw new IllegalStateException(mThrowable);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F1A;&amp;#x5728;awaitLoadedLocked&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x8C03;&amp;#x7528;mLock.wait()&amp;#x6765;&amp;#x7B49;&amp;#x5F85;sp&amp;#x7684;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x5B8C;&amp;#x6210;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x5982;&amp;#x679C;sp&amp;#x6587;&amp;#x4EF6;&amp;#x8FC7;&amp;#x5927;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x6240;&amp;#x82B1;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x8FC7;&amp;#x591A;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x540E;&amp;#x9762;sp&amp;#x6570;&amp;#x636E;&amp;#x83B7;&amp;#x53D6;&amp;#x65F6;&amp;#x7684;&amp;#x963B;&amp;#x585E;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&quot;&gt;&lt;a href=&quot;#&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&quot;&gt;&lt;/a&gt;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&lt;/h3&gt;&lt;p&gt;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x4F7F;&amp;#x7528;sp&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x7528;&amp;#x7684;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x5B83;&amp;#x7684;put&amp;#x4E0E;get&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&amp;#x73B0;&amp;#x5728;&amp;#x6211;&amp;#x4EEC;&amp;#x7528;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x5199;&amp;#x4E00;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sp = getSharedPreferences(&amp;quot;settings_preference&amp;quot;, Context.MODE_PRIVATE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x67D0;&amp;#x4E00;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sp.edit().putString(&amp;quot;key_name_from_sp&amp;quot;, &amp;quot;from sp&amp;quot;).apply()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sp.edit().putInt(&amp;quot;key_name_from_sp&amp;quot;, &amp;quot;from sp&amp;quot;).apply()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#x83B7;&amp;#x53D6;key_name_from_sp&amp;#x503C;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sp.getString(&amp;quot;key_name_from_sp&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x8FD0;&amp;#x884C;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x53D1;&amp;#x73B0;&amp;#x7A0B;&amp;#x5E8F;&amp;#x8FD0;&amp;#x884C;&amp;#x5F02;&amp;#x5E38;&amp;#xFF0C;&amp;#x672C;&amp;#x8D28;&amp;#x95EE;&amp;#x9898;&amp;#x662F;&amp;#x5BF9;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;key&amp;#x8D4B;&amp;#x503C;&amp;#x4E86;&amp;#x4E0D;&amp;#x540C;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x503C;&amp;#x3002;&amp;#x5C06;&amp;#x539F;&amp;#x6765;String&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x503C;&amp;#x8F6C;&amp;#x53D8;&amp;#x6210;Int&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;sp&amp;#x5185;&amp;#x90E8;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;Map&amp;#x6765;&amp;#x4FDD;&amp;#x5B58;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7684;key-value&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x5E76;&amp;#x4E0D;&amp;#x80FD;&amp;#x4FDD;&amp;#x8BC1;key-value&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x56FA;&amp;#x5B9A;&amp;#xFF0C;&amp;#x4E5F;&amp;#x8FDB;&amp;#x4E00;&amp;#x6B65;&amp;#x5BFC;&amp;#x81F4;&amp;#x901A;&amp;#x8FC7;get&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;key&amp;#x7684;&amp;#x503C;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x4E5F;&amp;#x662F;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&amp;#x7684;&amp;#x3002;&amp;#x8FD9;&amp;#x5C31;&amp;#x9020;&amp;#x6210;&amp;#x4E86;&amp;#x6240;&amp;#x8C13;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public String getString(String key, @Nullable String defValue) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    synchronized (mLock) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        awaitLoadedLocked();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String v = (String)mMap.get(key);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return v != null ? v : defValue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;getString&amp;#x7684;&amp;#x6E90;&amp;#x7801;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8FDB;&amp;#x884C;&amp;#x7C7B;&amp;#x578B;&amp;#x5F3A;&amp;#x5236;&amp;#x8F6C;&amp;#x6362;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5BF9;&amp;#x5C31;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5D29;&amp;#x6E83;&amp;#x3002;&amp;#x7531;&amp;#x4E8E;sp&amp;#x4E0D;&amp;#x4F1A;&amp;#x5728;&amp;#x4EE3;&amp;#x7801;&amp;#x7F16;&amp;#x8BD1;&amp;#x65F6;&amp;#x8FDB;&amp;#x884C;&amp;#x63D0;&amp;#x9192;&amp;#xFF0C;&amp;#x53EA;&amp;#x80FD;&amp;#x5728;&amp;#x4EE3;&amp;#x7801;&amp;#x8FD0;&amp;#x884C;&amp;#x4E4B;&amp;#x540E;&amp;#x624D;&amp;#x80FD;&amp;#x53D1;&amp;#x73B0;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5C31;&amp;#x907F;&amp;#x514D;&amp;#x4E0D;&amp;#x6389;&amp;#x53EF;&amp;#x80FD;&amp;#x53D1;&amp;#x751F;&amp;#x7684;&amp;#x5F02;&amp;#x5E38;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x5BFC;&amp;#x81F4;sp&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;apply&amp;#x5F02;&amp;#x6B65;&amp;#x6CA1;&amp;#x6709;&amp;#x56DE;&amp;#x8C03;&quot;&gt;&lt;a href=&quot;#apply&amp;#x5F02;&amp;#x6B65;&amp;#x6CA1;&amp;#x6709;&amp;#x56DE;&amp;#x8C03;&quot; class=&quot;headerlink&quot; title=&quot;apply&amp;#x5F02;&amp;#x6B65;&amp;#x6CA1;&amp;#x6709;&amp;#x56DE;&amp;#x8C03;&quot;&gt;&lt;/a&gt;apply&amp;#x5F02;&amp;#x6B65;&amp;#x6CA1;&amp;#x6709;&amp;#x56DE;&amp;#x8C03;&lt;/h3&gt;&lt;p&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x9632;&amp;#x6B62;sp&amp;#x5199;&amp;#x5165;&amp;#x65F6;&amp;#x963B;&amp;#x585E;&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4E00;&amp;#x822C;&amp;#x90FD;&amp;#x4F1A;&amp;#x4F7F;&amp;#x7528;apply&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x5C06;&amp;#x6570;&amp;#x636E;&amp;#x5F02;&amp;#x6B65;&amp;#x63D0;&amp;#x4EA4;&amp;#x5230;&amp;#x78C1;&amp;#x76D8;&amp;#xFF0C;&amp;#x5373;&amp;#x5199;&amp;#x5165;&amp;#x5230;&amp;#x6587;&amp;#x4EF6;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x867D;&amp;#x7136;apply&amp;#x662F;&amp;#x5F02;&amp;#x6B65;&amp;#xFF0C;&amp;#x4F46;&amp;#x5B83;&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FD4;&amp;#x56DE;&amp;#x503C;&amp;#xFF0C;&amp;#x540C;&amp;#x6837;&amp;#x4E5F;&amp;#x6CA1;&amp;#x6709;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x56DE;&amp;#x8C03;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void apply() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x5BFC;&amp;#x81F4;ANR&quot;&gt;&lt;a href=&quot;#&amp;#x5BFC;&amp;#x81F4;ANR&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5BFC;&amp;#x81F4;ANR&quot;&gt;&lt;/a&gt;&amp;#x5BFC;&amp;#x81F4;ANR&lt;/h3&gt;&lt;p&gt;apply&amp;#x5F02;&amp;#x6B65;&amp;#x63D0;&amp;#x4EA4;&amp;#x89E3;&amp;#x51B3;&amp;#x4E86;&amp;#x7EBF;&amp;#x7A0B;&amp;#x7684;&amp;#x963B;&amp;#x585E;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x4F46;&amp;#x5982;&amp;#x679C;apply&amp;#x4EFB;&amp;#x52A1;&amp;#x8FC7;&amp;#x591A;&amp;#x6570;&amp;#x636E;&amp;#x91CF;&amp;#x8FC7;&amp;#x5927;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;ANR&amp;#x7684;&amp;#x4EA7;&amp;#x751F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;ANR&amp;#x7684;&amp;#x4EA7;&amp;#x751F;&amp;#x662F;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&amp;#x957F;&amp;#x65F6;&amp;#x95F4;&amp;#x672A;&amp;#x54CD;&amp;#x5E94;&amp;#x5BFC;&amp;#x81F4;&amp;#x7684;&amp;#x3002;apply&amp;#x4E0D;&amp;#x662F;&amp;#x5F02;&amp;#x6B65;&amp;#x7684;&amp;#x5417;&amp;#xFF1F;&amp;#x5B83;&amp;#x600E;&amp;#x4E48;&amp;#x53C8;&amp;#x4F1A;&amp;#x4EA7;&amp;#x751F;ANR&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x6765;&amp;#x770B;&amp;#x4E0B;apply&amp;#x7684;&amp;#x6E90;&amp;#x7801;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void apply() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final long startTime = System.currentTimeMillis();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final MemoryCommitResult mcr = commitToMemory();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    final Runnable awaitCommit = new Runnable() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            public void run() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                try {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    mcr.writtenToDiskLatch.await();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                } catch (InterruptedException ignored) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if (DEBUG &amp;amp;&amp;amp; mcr.wasWritten) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    Log.d(TAG, mFile.getName() + &amp;quot;:&amp;quot; + mcr.memoryStateGeneration&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            + &amp;quot; applied after &amp;quot; + (System.currentTimeMillis() - startTime)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            + &amp;quot; ms&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#x6CE8;&amp;#x610F;&amp;#xFF1A;&amp;#x5C06;awaitCommit&amp;#x6DFB;&amp;#x52A0;&amp;#x5230;&amp;#x961F;&amp;#x5217;&amp;#x4E2D;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    QueuedWork.addFinisher(awaitCommit);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Runnable postWriteRunnable = new Runnable() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            public void run() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                awaitCommit.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;#x6210;&amp;#x529F;&amp;#x5199;&amp;#x5165;&amp;#x78C1;&amp;#x76D8;&amp;#x4E4B;&amp;#x540E;&amp;#x624D;&amp;#x5C06;awaitCommit&amp;#x79FB;&amp;#x9664;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                QueuedWork.removeFinisher(awaitCommit);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        };&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SharedPreferencesImpl.this.enqueueDiskWrite(mcr, postWriteRunnable);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Okay to notify the listeners before it&amp;apos;s hit disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // because the listeners should always get the same&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // SharedPreferences instance back, which has the&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // changes reflected in memory.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    notifyListeners(mcr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x5173;&amp;#x952E;&amp;#x70B9;&amp;#x662F;&amp;#x4F1A;&amp;#x5C06;awaitCommit&amp;#x52A0;&amp;#x5165;&amp;#x5230;QueuedWork&amp;#x961F;&amp;#x5217;&amp;#x4E2D;&amp;#xFF0C;&amp;#x53EA;&amp;#x6709;&amp;#x5F53;awaitCommit&amp;#x6267;&amp;#x884C;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#x624D;&amp;#x4F1A;&amp;#x8FDB;&amp;#x884C;&amp;#x79FB;&amp;#x9664;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x65B9;&amp;#x9762;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x770B;&amp;#x53E6;&amp;#x4E00;&amp;#x65B9;&amp;#x9762;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;Activity&amp;#x7684;onPause&amp;#x4E0E;onStop&amp;#x3001;Service&amp;#x7684;onDestory&amp;#x4E2D;&amp;#x4F1A;&amp;#x7B49;&amp;#x5F85;QueuedWork&amp;#x4E2D;&amp;#x7684;&amp;#x4EFB;&amp;#x52A1;&amp;#x5168;&amp;#x90E8;&amp;#x5B8C;&amp;#x6210;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;QueuedWork&amp;#x4E2D;&amp;#x7684;&amp;#x4EFB;&amp;#x52A1;&amp;#x975E;&amp;#x5E38;&amp;#x8017;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;sp&amp;#x7684;&amp;#x5199;&amp;#x5165;&amp;#x78C1;&amp;#x76D8;&amp;#x6570;&amp;#x636E;&amp;#x91CF;&amp;#x8FC7;&amp;#x591A;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x4E3B;&amp;#x7EBF;&amp;#x7A0B;&amp;#x957F;&amp;#x65F6;&amp;#x95F4;&amp;#x672A;&amp;#x54CD;&amp;#x5E94;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x4EA7;&amp;#x751F;ANR&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x8C03;&amp;#x7528;&amp;#x5206;&amp;#x522B;&amp;#x5728;ActivityThread&amp;#x4E2D;&amp;#x7684;handlePauseActivity&amp;#x3001;handlePauseActivity&amp;#x4E0E;handleStopService&amp;#x65B9;&amp;#x6CD5;&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public void handlePauseActivity(IBinder token, boolean finished, boolean userLeaving,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        int configChanges, PendingTransactionActions pendingActions, String reason) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ActivityClientRecord r = mActivities.get(token);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (r != null) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (userLeaving) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            performUserLeavingActivity(r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.activity.mConfigChangeFlags |= configChanges;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        performPauseActivity(r, finished, reason, pendingActions);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // Make sure any pending writes are now committed.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (r.isPreHoneycomb()) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //&amp;#x7B49;&amp;#x5F85;&amp;#x4EFB;&amp;#x52A1;&amp;#x5B8C;&amp;#x6210;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            QueuedWork.waitToFinish();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mSomeActivitiesChanged = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x5982;&amp;#x4F55;&amp;#x89E3;&amp;#x51B3;&amp;#x5462;&amp;#xFF1F;&amp;#x9996;&amp;#x5148;&amp;#x4F7F;&amp;#x7528;sp&amp;#x4E0D;&amp;#x8981;&amp;#x5B58;&amp;#x50A8;&amp;#x8FC7;&amp;#x5927;&amp;#x7684;key-value&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x672C;&amp;#x8EAB;sp&amp;#x5C31;&amp;#x662F;&amp;#x8F7B;&amp;#x91CF;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5927;&amp;#x6570;&amp;#x636E;&amp;#x8FD8;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;room&amp;#x6765;&amp;#x5B58;&amp;#x50A8;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6B64;&amp;#x7C7B;ANR&amp;#x90FD;&amp;#x662F;&amp;#x7ECF;&amp;#x7531;QueuedWork.waitToFinish()&amp;#x89E6;&amp;#x53D1;&amp;#x7684;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5728;&amp;#x8C03;&amp;#x7528;&amp;#x6B64;&amp;#x51FD;&amp;#x6570;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x5C06;&amp;#x5176;&amp;#x4E2D;&amp;#x4FDD;&amp;#x5B58;&amp;#x7684;&amp;#x961F;&amp;#x5217;&amp;#x624B;&amp;#x52A8;&amp;#x6E05;&amp;#x7A7A;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x662F;&amp;#x4E0D;&amp;#x662F;&amp;#x80FD;&amp;#x89E3;&amp;#x51B3;&amp;#x95EE;&amp;#x9898;&amp;#x5462;&amp;#xFF0C;&amp;#x7B54;&amp;#x6848;&amp;#x662F;&amp;#x80AF;&amp;#x5B9A;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x5728;&amp;#x4ECA;&amp;#x65E5;&amp;#x5934;&amp;#x6761;&amp;#x7684;&amp;#x4E00;&amp;#x7BC7;&amp;#x6587;&amp;#x7AE0;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x63D0;&amp;#x51FA;&amp;#x89E3;&amp;#x51B3;ANR&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x89E3;&amp;#x51B3;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x884C;&amp;#x67E5;&amp;#x770B;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI1MzYzMjE0MQ==&amp;amp;mid=2247484387&amp;amp;idx=1&amp;amp;sn=e3c8d6ef52520c51b5e07306d9750e70&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x5256;&amp;#x6790; SharedPreference apply &amp;#x5F15;&amp;#x8D77;&amp;#x7684; ANR &amp;#x95EE;&amp;#x9898;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x4E0D;&amp;#x80FD;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&quot;&gt;&lt;a href=&quot;#&amp;#x4E0D;&amp;#x80FD;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x4E0D;&amp;#x80FD;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&quot;&gt;&lt;/a&gt;&amp;#x4E0D;&amp;#x80FD;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&lt;/h3&gt;&lt;p&gt;sp&amp;#x662F;&amp;#x4E0D;&amp;#x80FD;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x7684;&amp;#xFF0C;&amp;#x867D;&amp;#x7136;&amp;#x5728;&amp;#x83B7;&amp;#x53D6;sp&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;MODE_MULTI_PROCESS&amp;#xFF0C;&amp;#x4F46;&amp;#x5185;&amp;#x90E8;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x7528;&amp;#x6765;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public SharedPreferences getSharedPreferences(File file, int mode) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if ((mode &amp;amp; Context.MODE_MULTI_PROCESS) != 0 ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        getApplicationInfo().targetSdkVersion &amp;lt; android.os.Build.VERSION_CODES.HONEYCOMB) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // &amp;#x91CD;&amp;#x65B0;&amp;#x8BFB;&amp;#x53D6;SP&amp;#x6587;&amp;#x4EF6;&amp;#x5185;&amp;#x5BB9;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sp.startReloadIfChangedUnexpectedly();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return sp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;MODE_MULTI_PROCESS&amp;#x53EA;&amp;#x662F;&amp;#x91CD;&amp;#x65B0;&amp;#x8BFB;&amp;#x53D6;&amp;#x4E00;&amp;#x904D;&amp;#x6587;&amp;#x4EF6;&amp;#x800C;&amp;#x5DF2;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E0D;&amp;#x80FD;&amp;#x4FDD;&amp;#x8BC1;&amp;#x8DE8;&amp;#x8FDB;&amp;#x7A0B;&amp;#x901A;&amp;#x4FE1;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;sp&amp;#x95EE;&amp;#x9898;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;&amp;#x4F60;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x662F;&amp;#x5426;&amp;#x6709;&amp;#x9047;&amp;#x5230;&amp;#x8FC7;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x8BF4;&amp;#x6709;&amp;#x5E78;&amp;#x4E2D;&amp;#x6807;&amp;#x51E0;&amp;#x6761;&amp;#xFF0C;&amp;#x5927;&amp;#x5BB6;&amp;#x53EF;&amp;#x4EE5;&amp;#x7559;&amp;#x8A00;&amp;#x6765;&amp;#x5BF9;&amp;#x6BD4;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x8BF4;&amp;#x51FA;&amp;#x4F60;&amp;#x7684;&amp;#x6545;&amp;#x4E8B;(&amp;#x6B64;&amp;#x5904;&amp;#x5E94;&amp;#x8BE5;&amp;#x6709;&amp;#x9152;)&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;DataStore&quot;&gt;&lt;a href=&quot;#DataStore&quot; class=&quot;headerlink&quot; title=&quot;DataStore&quot;&gt;&lt;/a&gt;DataStore&lt;/h2&gt;&lt;p&gt;&amp;#x9488;&amp;#x5BF9;sp&amp;#x90A3;&amp;#x51E0;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;DataStore&amp;#x90FD;&amp;#x591F;&amp;#x80FD;&amp;#x89C4;&amp;#x907F;&amp;#x3002;&amp;#x4E3A;&amp;#x4E86;&amp;#x7CBE;&amp;#x7B80;&amp;#x8BED;&amp;#x8A00;&amp;#xFF0C;&amp;#x4E0B;&amp;#x9762;&amp;#x90FD;&amp;#x5C06;DataStore&amp;#x7B80;&amp;#x79F0;ds&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ds&amp;#x5185;&amp;#x90E8;&amp;#x4F7F;&amp;#x7528;kotlin&amp;#x534F;&amp;#x7A0B;&amp;#x901A;&amp;#x8FC7;&amp;#x6302;&amp;#x8D77;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x907F;&amp;#x514D;&amp;#x963B;&amp;#x585E;&amp;#x7EBF;&amp;#x7A0B;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x4E5F;&amp;#x907F;&amp;#x514D;&amp;#x4EA7;&amp;#x751F;ANR&amp;#x3002;&lt;/li&gt;
&lt;li&gt;ds&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;sp&amp;#x540C;&amp;#x65F6;&amp;#x8FD8;&amp;#x652F;&amp;#x6301;protocol buffers&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#xFF0C;&amp;#x800C;protocol buffers&amp;#x53EF;&amp;#x4EE5;&amp;#x4FDD;&amp;#x8BC1;&amp;#x6570;&amp;#x636E;&amp;#x7C7B;&amp;#x578B;&amp;#x5B89;&amp;#x5168;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;ds&amp;#x80FD;&amp;#x591F;&amp;#x5728;&amp;#x7F16;&amp;#x8BD1;&amp;#x9636;&amp;#x6BB5;&amp;#x63D0;&amp;#x9192;sp&amp;#x7C7B;&amp;#x578B;&amp;#x9519;&amp;#x8BEF;&amp;#xFF0C;&amp;#x4FDD;&amp;#x8BC1;sp&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;ds&amp;#x4F7F;&amp;#x7528;Flow&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x6BCF;&amp;#x6B21;&amp;#x4FDD;&amp;#x5B58;&amp;#x6570;&amp;#x636E;&amp;#x4E4B;&amp;#x540E;&amp;#x90FD;&amp;#x4F1A;&amp;#x901A;&amp;#x77E5;&amp;#x6700;&amp;#x8FD1;&amp;#x7684;Flow&amp;#x3002;&lt;/li&gt;
&lt;li&gt;ds&amp;#x5B8C;&amp;#x7F8E;&amp;#x652F;&amp;#x6301;sp&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x8FC1;&amp;#x79FB;&amp;#xFF0C;&amp;#x4F60;&amp;#x53EF;&amp;#x4EE5;&amp;#x65E0;&amp;#x6210;&amp;#x672C;&amp;#x8FC7;&amp;#x6E21;&amp;#x5230;ds&amp;#x3002;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;ds&amp;#x5C06;&amp;#x4F1A;&amp;#x662F;Android&amp;#x540E;&amp;#x7EED;&amp;#x8F7B;&amp;#x91CF;&amp;#x6570;&amp;#x636E;&amp;#x5B58;&amp;#x50A8;&amp;#x7684;&amp;#x9996;&amp;#x9009;&amp;#x7EC4;&amp;#x4EF6;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x4E5F;&amp;#x662F;&amp;#x65F6;&amp;#x5019;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;ds&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5F15;&amp;#x5165;DataStore&quot;&gt;&lt;a href=&quot;#&amp;#x5F15;&amp;#x5165;DataStore&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5F15;&amp;#x5165;DataStore&quot;&gt;&lt;/a&gt;&amp;#x5F15;&amp;#x5165;DataStore&lt;/h3&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x6211;&amp;#x4EEC;&amp;#x8981;&amp;#x5F15;&amp;#x5165;ds&amp;#xFF0C;&amp;#x65B9;&amp;#x5F0F;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;build&amp;#x4E2D;&amp;#x6DFB;&amp;#x52A0;&amp;#x4F9D;&amp;#x8D56;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&amp;#x552F;&amp;#x4E00;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;ds&amp;#x652F;&amp;#x6301;sp&amp;#x4E0E;protocol buffers&amp;#x4E24;&amp;#x79CD;&amp;#x7C7B;&amp;#x578B;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4E5F;&amp;#x6709;&amp;#x4E24;&amp;#x79CD;&amp;#x4F9D;&amp;#x8D56;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// Preferences DataStore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;implementation &amp;quot;androidx.datastore:datastore-preferences:1.0.0-alpha01&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Proto DataStore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;implementation  &amp;quot;androidx.datastore:datastore-core:1.0.0-alpha01&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x9488;&amp;#x5BF9;&amp;#x8FD9;&amp;#x4E24;&amp;#x79CD;&amp;#x7C7B;&amp;#x578B;&amp;#x5206;&amp;#x522B;&amp;#x505A;&amp;#x4ECB;&amp;#x7ECD;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x521B;&amp;#x5EFA;DataStore&quot;&gt;&lt;a href=&quot;#&amp;#x521B;&amp;#x5EFA;DataStore&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x521B;&amp;#x5EFA;DataStore&quot;&gt;&lt;/a&gt;&amp;#x521B;&amp;#x5EFA;DataStore&lt;/h3&gt;&lt;p&gt;&amp;#x9488;&amp;#x5BF9;sp&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;ds&amp;#x53EA;&amp;#x9700;&amp;#x901A;&amp;#x8FC7;createDataStore&amp;#x65B9;&amp;#x6CD5;&amp;#x6765;&amp;#x83B7;&amp;#x53D6;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;ds&amp;#x5BF9;&amp;#x8C61;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private val dataStore = createDataStore(&amp;quot;settings&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;settings&amp;#x4E3A;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x540D;&amp;#xFF0C;&amp;#x5B58;&amp;#x50A8;&amp;#x65B9;&amp;#x5F0F;&amp;#x4E3A;datastore/ + name + .preferences_pb&lt;/p&gt;
&lt;p&gt;protocol buffers&amp;#x7C7B;&amp;#x578B;&amp;#x9700;&amp;#x8981;&amp;#x989D;&amp;#x5916;&amp;#x5B9E;&amp;#x73B0;Serializer&amp;#x63A5;&amp;#x53E3;&amp;#xFF0C;&amp;#x63D0;&amp;#x4F9B;&amp;#x8BFB;&amp;#x5199;&amp;#x7684;&amp;#x5165;&amp;#x53E3;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;object SettingsSerializer : Serializer&amp;lt;Settings&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun readFrom(input: InputStream): Settings {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return Settings.parseFrom(input)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun writeTo(t: Settings, output: OutputStream) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        t.writeTo(output)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private val dataStoreProto = createDataStore(&amp;quot;settings.pb&amp;quot;, SettingsSerializer)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;&amp;#x7684;Settings&amp;#x7C7B;&amp;#x662F;&amp;#x901A;&amp;#x8FC7;protocol buffers&amp;#x811A;&amp;#x672C;&amp;#x81EA;&amp;#x52A8;&amp;#x751F;&amp;#x6210;&amp;#x7684;&amp;#x3002;&amp;#x8981;&amp;#x751F;&amp;#x6210;Settings&amp;#x7C7B;&amp;#xFF0C;&amp;#x4F60;&amp;#x9700;&amp;#x8981;&amp;#x505A;&amp;#x4E24;&amp;#x4EF6;&amp;#x4E8B;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;#x914D;&amp;#x7F6E;protocol buffers&amp;#x73AF;&amp;#x5883;&lt;/li&gt;
&lt;li&gt;&amp;#x7F16;&amp;#x5199;.proto&amp;#x6587;&amp;#x4EF6;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x4F60;&amp;#x53EF;&amp;#x80FD;&amp;#x9700;&amp;#x8981;&amp;#x61C2;&amp;#x4E00;&amp;#x70B9;protocol buffers&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x8BED;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x540E;&amp;#x7EED;&amp;#x6709;&amp;#x7A7A;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x5355;&amp;#x72EC;&amp;#x5F00;&amp;#x6587;&amp;#x7AE0;&amp;#x4ECB;&amp;#x7ECD;&amp;#x4E00;&amp;#x4E0B;protocol buffers&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#xFF0C;&amp;#x5927;&amp;#x5382;&amp;#x7528;&amp;#x7684;&amp;#x57FA;&amp;#x672C;&amp;#x4E0A;&amp;#x90FD;&amp;#x662F;protocol buffers&amp;#x3002;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;syntax = &amp;quot;proto3&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;option java_multiple_files = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;message Settings {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    string key_name = 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;protocol buffers&amp;#x8FD0;&amp;#x884C;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5C31;&amp;#x80FD;&amp;#x81EA;&amp;#x52A8;&amp;#x5E2E;&amp;#x6211;&amp;#x4EEC;&amp;#x751F;&amp;#x6210;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Settings&amp;#x7C7B;&amp;#x3002;&amp;#x5176;&amp;#x4E2D;&amp;#x5B83;&amp;#x91CC;&amp;#x9762;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x53D8;&amp;#x91CF;&amp;#x5C31;&amp;#x662F;keyName_&amp;#xFF0C;&amp;#x5B83;&amp;#x662F;String&amp;#x7C7B;&amp;#x578B;&amp;#x3002;&amp;#x901A;&amp;#x8FC7;&amp;#x521B;&amp;#x5EFA;&amp;#x7C7B;&amp;#x4E0E;&amp;#x5BF9;&amp;#x5E94;&amp;#x53D8;&amp;#x91CF;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x7EA6;&amp;#x5B9A;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x5B89;&amp;#x5168;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x8BFB;&quot;&gt;&lt;a href=&quot;#&amp;#x8BFB;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8BFB;&quot;&gt;&lt;/a&gt;&amp;#x8BFB;&lt;/h3&gt;&lt;p&gt;sp&amp;#x4E0E;protocol buffers&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x8BFB;&amp;#x64CD;&amp;#x4F5C;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&amp;#x90FD;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x90FD;&amp;#x8981;&amp;#x521B;&amp;#x5EFA;Preferences.Key&amp;#x7C7B;&amp;#x578B;&amp;#x7684;key&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;val DATA_KEY = preferencesKey&amp;lt;String&amp;gt;(&amp;quot;key_name&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;preferencesKey&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;inline fun &amp;lt;reified T : Any&amp;gt; preferencesKey(name: String): Preferences.Key&amp;lt;T&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return when (T::class) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Int::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Preferences.Key&amp;lt;T&amp;gt;(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Preferences.Key&amp;lt;T&amp;gt;(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Boolean::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Preferences.Key&amp;lt;T&amp;gt;(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Float::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Preferences.Key&amp;lt;T&amp;gt;(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Long::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Preferences.Key&amp;lt;T&amp;gt;(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Set::class -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw IllegalArgumentException(&amp;quot;Use `preferencesSetKey` to create keys for Sets.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        else -&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            throw IllegalArgumentException(&amp;quot;Type not supported: ${T::class.java}&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5B83;&amp;#x652F;&amp;#x6301;Int&amp;#x3001;String&amp;#x3001;Boolean&amp;#x3001;Float&amp;#x4E0E;Long&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x53E6;&amp;#x5916;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;preferencesSetKey&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x652F;&amp;#x6301;set&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8C03;&amp;#x7528;preferencesKey&amp;#x6BCF;&amp;#x6B21;&amp;#x90FD;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;Preferences.Key&amp;#x5BF9;&amp;#x8C61;&amp;#xFF0C;&amp;#x90A3;&amp;#x5B83;&amp;#x8FD9;&amp;#x6837;&amp;#x5982;&amp;#x4F55;&amp;#x4FDD;&amp;#x8BC1;&amp;#x662F;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;key&amp;#x5462;?&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x53BB;&amp;#x770B;&amp;#x6E90;&amp;#x7801;&amp;#x5C31;&amp;#x4F1A;&amp;#x4E00;&amp;#x76EE;&amp;#x4E86;&amp;#x7136;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;internal constructor(val name: String) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun equals(other: Any?) =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (other is Key&amp;lt;*&amp;gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            name == other.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    override fun hashCode(): Int {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return name.hashCode()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x539F;&amp;#x6765;&amp;#x662F;&amp;#x5B83;&amp;#x91CD;&amp;#x5199;&amp;#x4E86;equals&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5185;&amp;#x90E8;&amp;#x5B9E;&amp;#x73B0;&amp;#x5BF9;name&amp;#x7684;&amp;#x6BD4;&amp;#x8F83;&amp;#x3002;&amp;#x90A3;&amp;#x4E48;&amp;#x53EA;&amp;#x8981;&amp;#x521B;&amp;#x5EFA;preferencesKey&amp;#x65F6;&amp;#x4F20;&amp;#x5165;&amp;#x7684;name&amp;#x76F8;&amp;#x540C;&amp;#xFF0C;&amp;#x5C31;&amp;#x80FD;&amp;#x4FDD;&amp;#x8BC1;&amp;#x83B7;&amp;#x53D6;&amp;#x5230;&amp;#x7684;&amp;#x662F;&amp;#x540C;&amp;#x4E00;&amp;#x4E2A;key&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;key&amp;#xFF0C;&amp;#x518D;&amp;#x6765;&amp;#x901A;&amp;#x8FC7;dataStore.data.map&amp;#x6765;&amp;#x83B7;&amp;#x53D6;Flow&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x66B4;&amp;#x9732;&amp;#x51FA;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;Preferences&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private suspend fun read() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dataStore.data.map {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // unSafe type&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (it[DATA_KEY] is String) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            it[DATA_KEY] ?: &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        } else {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;type is String: ${it[DATA_KEY] is String}&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }.collect {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Toast.makeText(this@DataStoreActivity, &amp;quot;read result: $it&amp;quot;, Toast.LENGTH_LONG).show()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x540C;&amp;#x65F6;&amp;#x5728;read&amp;#x4E2D;&amp;#x5199;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x9A8C;&amp;#x8BC1;SharedPreference&amp;#x7C7B;&amp;#x578B;&amp;#x4E0D;&amp;#x5B89;&amp;#x5168;&amp;#x7684;&amp;#x793A;&amp;#x4F8B;&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x5728;&amp;#x522B;&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x8D4B;&amp;#x503C;&amp;#x4E86;DATA_KEY&amp;#x975E;String&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x65F6;&amp;#xFF0C;&amp;#x5C06;&amp;#x4F1A;&amp;#x5F39;&amp;#x51FA;else&amp;#x4E2D;&amp;#x7684;&amp;#x8BED;&amp;#x53E5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;protocol buffers&amp;#x7684;&amp;#x8BFB;&amp;#x53D6;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private suspend fun protoRead() {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dataStoreProto.data.map {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // safe type&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.keyName&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }.collect {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Toast.makeText(this, &amp;quot;read result success form proto: $it&amp;quot;, Toast.LENGTH_LONG).show()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#x8FD9;&amp;#x91CC;&amp;#x83B7;&amp;#x53D6;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5C31;&amp;#x662F;&amp;#x7C7B;&amp;#x578B;&amp;#x5B89;&amp;#x5168;&amp;#x7684;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x7684;it&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5C31;&amp;#x662F;&amp;#x5728;ds&amp;#x521B;&amp;#x5EFA;&amp;#x65F6;&amp;#x4EA7;&amp;#x751F;&amp;#x7684;Settings&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5199;&quot;&gt;&lt;a href=&quot;#&amp;#x5199;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5199;&quot;&gt;&lt;/a&gt;&amp;#x5199;&lt;/h3&gt;&lt;p&gt;&amp;#x5199;sp&amp;#x4E0E;protocol buffers&amp;#x6709;&amp;#x6240;&amp;#x4E0D;&amp;#x540C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;sp&amp;#x76F4;&amp;#x63A5;&amp;#x4F7F;&amp;#x7528;dataStore.edit&amp;#x6765;&amp;#x5199;&amp;#x5165;&amp;#x6570;&amp;#x636E;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private suspend fun write(value: String) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dataStore.edit {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it[DATA_KEY] = value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LogUtils.d(&amp;quot;dataStore write: $value&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x800C;protocol buffers&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;updateData&amp;#x65B9;&amp;#x6CD5;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private suspend fun protoWrite(value: String) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dataStoreProto.updateData {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        it.toBuilder().setKeyName(value).build()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x8FC1;&amp;#x79FB;SharedPreferences&quot;&gt;&lt;a href=&quot;#&amp;#x8FC1;&amp;#x79FB;SharedPreferences&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8FC1;&amp;#x79FB;SharedPreferences&quot;&gt;&lt;/a&gt;&amp;#x8FC1;&amp;#x79FB;SharedPreferences&lt;/h3&gt;&lt;p&gt;&amp;#x8FC1;&amp;#x79FB;&amp;#x4E5F;&amp;#x5206;&amp;#x4E3A;&amp;#x4E24;&amp;#x79CD;&amp;#xFF0C;&amp;#x4E00;&amp;#x79CD;&amp;#x662F;&amp;#x8FC1;&amp;#x79FB;&amp;#x5230;ds&amp;#x7684;sp&amp;#x4E2D;&amp;#xFF1B;&amp;#x53E6;&amp;#x4E00;&amp;#x79CD;&amp;#x662F;&amp;#x8FC1;&amp;#x79FB;&amp;#x5230;protocol buffers&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5177;&amp;#x4F53;&amp;#x6765;&amp;#x770B;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8FC1;&amp;#x79FB;&amp;#x5230;ds&amp;#x7684;sp&amp;#x4E2D;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x5728;&amp;#x4E4B;&amp;#x524D;&amp;#x521B;&amp;#x5EFA;ds&amp;#x57FA;&amp;#x7840;&amp;#x4E0A;&amp;#x989D;&amp;#x5916;&amp;#x518D;&amp;#x52A0;&amp;#x4E00;&amp;#x4E2A;migrations&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private val dataStore = createDataStore(&amp;quot;settings&amp;quot;, migrations = listOf(SharedPreferencesMigration(this, &amp;quot;settings_preference&amp;quot;)))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x901A;&amp;#x8FC7;&amp;#x521B;&amp;#x5EFA;SharedPreferencesMigration&amp;#x6765;&amp;#x8FC1;&amp;#x79FB;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;sp&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x8FC1;&amp;#x79FB;&amp;#x5230;protocol buffers&amp;#x4E2D;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;val settingsDataStore: DataStore&amp;lt;Settings&amp;gt; = context.createDataStore(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    produceFile = { File(context.filesDir, &amp;quot;settings.preferences_pb&amp;quot;) },&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    serializer = SettingsSerializer,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    migrations = listOf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        SharedPreferencesMigration(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            context,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;settings_preferences&amp;quot;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ) { sharedPrefs: SharedPreferencesView, currentData: UserPreferences -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // Map your sharedPrefs to your type here&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FC1;&amp;#x79FB;&amp;#x5B8C;&amp;#x4E4B;&amp;#x540E;&amp;#x9700;&amp;#x8981;&amp;#x6267;&amp;#x884C;&amp;#x4E00;&amp;#x6B21;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x540C;&amp;#x65F6;&amp;#x5E94;&amp;#x8BE5;&amp;#x505C;&amp;#x6B62;&amp;#x518D;&amp;#x6B21;&amp;#x4F7F;&amp;#x7528;sp&amp;#x3002;&amp;#x5982;&amp;#x679C;&amp;#x8FC1;&amp;#x79FB;&amp;#x6210;&amp;#x529F;&amp;#x5C06;&amp;#x4F1A;&amp;#x5220;&amp;#x9664;&amp;#x4E4B;&amp;#x524D;sp&amp;#x7684;.xml&amp;#x7C7B;&amp;#x578B;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x751F;&amp;#x6210;&amp;#x5BF9;&amp;#x5E94;ds&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x9644;&amp;#x4E0A;&amp;#x4E00;&amp;#x5F20;Google&amp;#x5206;&amp;#x6790;&amp;#x7684;SharedPreferences&amp;#x548C;DataStore&amp;#x7684;&amp;#x533A;&amp;#x522B;&amp;#x56FE;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://3.bp.blogspot.com/-Vk_q5hWw6DQ/X00ZfiRrB9I/AAAAAAAAPlo/u-kvBvmMfzgRnNViYLwaAim-E7wq5yxKACLcBGAsYHQ/s1600/Screen%2BShot%2B2020-08-31%2Bat%2B11.25.43%2BAM.png&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x76EE;&amp;#x524D;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;DataStore&amp;#x8FD8;&amp;#x5904;&amp;#x5728;alpha&amp;#x7248;&amp;#x672C;&amp;#xFF0C;&amp;#x975E;&amp;#x5E38;&amp;#x671F;&amp;#x5F85;&amp;#x5B83;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x6B63;&amp;#x5F0F;&amp;#x7248;&amp;#x672C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;&amp;#x9488;&amp;#x5BF9;DataStore&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x6211;&amp;#x5199;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;demo&amp;#xFF0C;&amp;#x5927;&amp;#x5BB6;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;&amp;#x4E2D;&amp;#x83B7;&amp;#x53D6;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x6700;&amp;#x8FD1;Jetpack&amp;#x53C8;&amp;#x589E;&amp;#x52A0;&amp;#x4E86;&amp;#x65B0;&amp;#x6210;&amp;#x5458;&amp;#xFF0C;&amp;#x63D0;&amp;#x51FA;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x5173;&amp;#
    
    </summary>
    
      <category term="android" scheme="https://www.rousetime.com/categories/android/"/>
    
    
      <category term="jetpack" scheme="https://www.rousetime.com/tags/jetpack/"/>
    
  </entry>
  
  <entry>
    <title>算法之旅:复杂度分析</title>
    <link href="https://www.rousetime.com/2020/12/03/%E7%AE%97%E6%B3%95%E4%B9%8B%E6%97%85-%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/"/>
    <id>https://www.rousetime.com/2020/12/03/算法之旅-复杂度分析/</id>
    <published>2020-12-03T13:30:15.000Z</published>
    <updated>2022-11-30T13:37:06.241Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x6B63;&amp;#x5F0F;&amp;#x5F00;&amp;#x542F;&amp;#x7B97;&amp;#x6CD5;&amp;#x4E4B;&amp;#x65C5;&amp;#xFF01;&lt;/p&gt;
&lt;p&gt;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x5408;&amp;#x683C;&amp;#x7684;&amp;#x6280;&amp;#x672F;&amp;#x4EBA;&amp;#x5458;&amp;#xFF0C;&amp;#x7B97;&amp;#x6CD5;&amp;#x662F;&amp;#x5FC5;&amp;#x5907;&amp;#x77E5;&amp;#x8BC6;&amp;#x3002;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FD9;&amp;#x4E48;&amp;#x8BF4;&amp;#xFF0C;&amp;#x867D;&amp;#x7136;&amp;#x4E0D;&amp;#x61C2;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x4EBA;&amp;#x5E76;&amp;#x4E0D;&amp;#x4F1A;&amp;#x5931;&amp;#x4E1A;&amp;#xFF0C;&amp;#x4F46;&amp;#x5982;&amp;#x679C;&amp;#x4F60;&amp;#x60F3;&amp;#x5FEB;&amp;#x901F;&amp;#x664B;&amp;#x5347;&amp;#x6446;&amp;#x8131;&amp;#x4E1A;&amp;#x52A1;&amp;#x5DE5;&amp;#x7A0B;&amp;#x5E08;CRUD&amp;#x7684;&amp;#x547D;&amp;#x8FD0;&amp;#x5C31;&amp;#x4E00;&amp;#x5B9A;&amp;#x79BB;&amp;#x4E0D;&amp;#x5F00;&amp;#x7B97;&amp;#x6CD5;&amp;#x3002;&amp;#x540C;&amp;#x65F6;&amp;#x4E0D;&amp;#x7BA1;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5DE5;&amp;#x4F5C;&amp;#x8FD8;&amp;#x662F;&amp;#x9762;&amp;#x8BD5;&amp;#x90FD;&amp;#x662F;&amp;#x975E;&amp;#x5E38;&amp;#x6709;&amp;#x7528;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7531;&amp;#x4E8E;&amp;#x8FD9;&amp;#x662F;&amp;#x7B97;&amp;#x6CD5;&amp;#x7B2C;&amp;#x4E00;&amp;#x7BC7;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x4ECE;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x8BF4;&amp;#x8D77;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4EFB;&amp;#x4F55;&amp;#x7B97;&amp;#x6CD5;&amp;#x90FD;&amp;#x79BB;&amp;#x4E0D;&amp;#x5F00;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x8861;&amp;#x91CF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x5F3A;&amp;#x4E0E;&amp;#x5F31;&amp;#xFF0C;&amp;#x5176;&amp;#x4E2D;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x7EDF;&amp;#x4E00;&amp;#x7684;&amp;#x6807;&amp;#x51C6;&amp;#x5C31;&amp;#x662F;&amp;#x770B;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x6709;&amp;#x6240;&amp;#x7591;&amp;#x95EE;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8981;&amp;#x770B;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5462;&amp;#xFF1F;&amp;#x6211;&amp;#x76F4;&amp;#x63A5;&amp;#x8DD1;&amp;#x4E00;&amp;#x4E0B;&amp;#x4EE3;&amp;#x7801;&amp;#x770B;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#x4E0D;&amp;#x5C31;&amp;#x5B8C;&amp;#x4E8B;&amp;#x4E86;&amp;#x5417;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x662F;&amp;#x7684;&amp;#x8FD9;&amp;#x6837;&amp;#x4E5F;&amp;#x80FD;&amp;#x7EDF;&amp;#x8BA1;&amp;#x51FA;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x4F46;&amp;#x8FD9;&amp;#x79CD;&amp;#x65B9;&amp;#x6CD5;&amp;#x5B58;&amp;#x5728;&amp;#x975E;&amp;#x5E38;&amp;#x5927;&amp;#x7684;&amp;#x5C40;&amp;#x9650;&amp;#x6027;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8BD5;&amp;#x60F3;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF0C;&amp;#x4F60;&amp;#x5728;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#x5F97;&amp;#x5230;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x662F;&amp;#x5426;&amp;#x975E;&amp;#x5E38;&amp;#x4F9D;&amp;#x8D56;&amp;#x4E8E;&amp;#x6240;&amp;#x5904;&amp;#x7684;&amp;#x6D4B;&amp;#x8BD5;&amp;#x73AF;&amp;#x5883;&amp;#xFF0C;&amp;#x4F8B;&amp;#x5982;&amp;#x540C;&amp;#x4E00;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#x5728;2G&amp;#x4E0E;8G&amp;#x7684;&amp;#x624B;&amp;#x673A;&amp;#x4E0A;&amp;#x8FD0;&amp;#x884C;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x80FD;&amp;#x4E00;&amp;#x6837;&amp;#x5417;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x975E;&amp;#x5E38;&amp;#x660E;&amp;#x663E;&amp;#x7684;&amp;#x7F3A;&amp;#x9677;&amp;#x662F;&amp;#x6837;&amp;#x672C;&amp;#x89C4;&amp;#x6A21;&amp;#x592A;&amp;#x5C0F;&amp;#xFF0C;&amp;#x540C;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#x53EF;&amp;#x80FD;&amp;#x5BF9;&amp;#x4E0D;&amp;#x540C;&amp;#x89C4;&amp;#x6A21;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x4F1A;&amp;#x4EA7;&amp;#x751F;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F8B;&amp;#x5982;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5C0F;&amp;#x89C4;&amp;#x6A21;&amp;#x7684;&amp;#x6392;&amp;#x5E8F;&amp;#xFF0C;&amp;#x63D2;&amp;#x5165;&amp;#x6392;&amp;#x5E8F;&amp;#x53EF;&amp;#x80FD;&amp;#x6BD4;&amp;#x5FEB;&amp;#x901F;&amp;#x6392;&amp;#x5E8F;&amp;#x66F4;&amp;#x5FEB;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4E2A;&amp;#x66F4;&amp;#x79D1;&amp;#x5B66;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x8861;&amp;#x91CF;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x5F3A;&amp;#x4E0E;&amp;#x5F31;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#x5C31;&amp;#x662F;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x53C8;&amp;#x5206;&amp;#x4E3A;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E0E;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E24;&amp;#x5927;&amp;#x7C7B;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x96BE;&amp;#x70B9;&amp;#x5C31;&amp;#x662F;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x8BA1;&amp;#x7B97;&amp;#xFF0C;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x76F8;&amp;#x5BF9;&amp;#x7B80;&amp;#x5355;&amp;#x8BB8;&amp;#x591A;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&lt;/h2&gt;&lt;p&gt;&amp;#x5728;&amp;#x8BF4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E4B;&amp;#x524D;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x518D;&amp;#x6765;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;&amp;#x5B83;&amp;#x7684;&amp;#x8868;&amp;#x793A;&amp;#x65B9;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5148;&amp;#x4ECE;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x4F8B;&amp;#x5B50;&amp;#x8FDB;&amp;#x884C;&amp;#x5206;&amp;#x6790;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun test(n: Int) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0 //1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt; n) { //2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var j = 0 //3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        while (j &amp;lt; n) { //4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            j++ //5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++ //6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5047;&amp;#x8BBE;&amp;#x6267;&amp;#x884C;&amp;#x6BCF;&amp;#x4E00;&amp;#x884C;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x4E3A;k&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x4ECE;&amp;#x4E0A;&amp;#x5F80;&amp;#x4E0B;&amp;#x4F9D;&amp;#x6B21;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x603B;&amp;#x548C;&amp;#x4E3A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T(n) = k + n * k + n * k + n^2 * k + n^2 * k + n * k &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    = (1 + 3 * n + 2 * n^2) * k&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x516C;&amp;#x5F0F;&amp;#x6211;&amp;#x4EEC;&amp;#x5206;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;&amp;#x770B;&amp;#xFF0C;&amp;#x5DE6;&amp;#x8FB9;T(n)&amp;#x4EE3;&amp;#x8868;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x53F3;&amp;#x8FB9;(1 + 3 &lt;em&gt; n + 2 &lt;/em&gt; n^2)&amp;#x90E8;&amp;#x5206;&amp;#x53EF;&amp;#x4EE5;&amp;#x4EE3;&amp;#x8868;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6B21;&amp;#x6570;&amp;#x603B;&amp;#x548C;&amp;#xFF0C;&amp;#x800C;k&amp;#x662F;&amp;#x6BCF;&amp;#x884C;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8BD5;&amp;#x60F3;&amp;#x4E00;&amp;#x4E0B;&amp;#x662F;&amp;#x5426;&amp;#x4E0D;&amp;#x7BA1;&amp;#x662F;&amp;#x4EC0;&amp;#x4E48;&amp;#x4EE3;&amp;#x7801;&amp;#x90FD;&amp;#x53EF;&amp;#x4EE5;&amp;#x7531;&amp;#x8FD9;&amp;#x4E09;&amp;#x90E8;&amp;#x5206;&amp;#x7EC4;&amp;#x6210;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x7B54;&amp;#x6848;&amp;#x81EA;&amp;#x7136;&amp;#x662F;&amp;#x53EF;&amp;#x4EE5;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&amp;#x5C31;&amp;#x4EA7;&amp;#x751F;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;&amp;#x91CD;&amp;#x8981;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&amp;#x4E86;&amp;#xFF1A;&amp;#x4EE3;&amp;#x7801;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;T(n)&amp;#x4E0E;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6B21;&amp;#x6570;&amp;#x603B;&amp;#x548C;&amp;#x6210;&amp;#x6B63;&amp;#x6BD4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E2A;&amp;#x89C4;&amp;#x5F8B;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C06;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x8F6C;&amp;#x6362;&amp;#x6210;&amp;#x5927;O&amp;#x6765;&amp;#x8868;&amp;#x793A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T(n) = O(f(n))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;n&amp;#x4EE3;&amp;#x8868;&amp;#x6570;&amp;#x636E;&amp;#x89C4;&amp;#x6A21;&amp;#xFF0C;T(n)&amp;#x4EE3;&amp;#x8868;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;f(n)&amp;#x4EE3;&amp;#x8868;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6B21;&amp;#x6570;&amp;#x603B;&amp;#x548C;&amp;#xFF0C;&amp;#x5927;O&amp;#x4EE3;&amp;#x8868;&amp;#x4EE3;&amp;#x7801;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;T(n)&amp;#x4E0E;&amp;#x4EE3;&amp;#x7801;&amp;#x7684;&amp;#x6267;&amp;#x884C;&amp;#x6B21;&amp;#x6570;&amp;#x603B;&amp;#x548C;&amp;#x6210;&amp;#x6B63;&amp;#x6BD4;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x5957;&amp;#x5165;&amp;#x5230;f(n)&amp;#x4E2D;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x8868;&amp;#x793A;&amp;#x4E3A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T(n) = O(1 + 3 * n + 2 * n^2)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x5C31;&amp;#x662F;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EE3;&amp;#x8868;&amp;#x7684;&amp;#x5E76;&amp;#x4E0D;&amp;#x662F;&amp;#x4EE3;&amp;#x7801;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x771F;&amp;#x6B63;&amp;#x65F6;&amp;#x95F4;&amp;#xFF0C;&amp;#x800C;&amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x8D8B;&amp;#x52BF;&amp;#xFF0C;&amp;#x5373;&amp;#x4EE3;&amp;#x8868;&amp;#x6267;&amp;#x884C;&amp;#x65F6;&amp;#x95F4;&amp;#x968F;&amp;#x6570;&amp;#x636E;&amp;#x89C4;&amp;#x6A21;&amp;#x53D8;&amp;#x5316;&amp;#x7684;&amp;#x8D8B;&amp;#x52BF;&amp;#xFF0C;&amp;#x4E1A;&amp;#x754C;&amp;#x79F0;&amp;#x4E4B;&amp;#x4E3A;&amp;#x6E10;&amp;#x8FDB;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#xFF0C;&amp;#x7B80;&amp;#x79F0;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;n&amp;#x7684;&amp;#x89C4;&amp;#x6A21;&amp;#x5F88;&amp;#x5927;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5C06;&amp;#x5E38;&amp;#x6570;&amp;#x3001;&amp;#x7CFB;&amp;#x6570;&amp;#x4E0E;&amp;#x4F4E;&amp;#x4EF7;&amp;#x8FDB;&amp;#x884C;&amp;#x5FFD;&amp;#x7565;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x5B83;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x4E0D;&amp;#x80FD;&amp;#x5DE6;&amp;#x53F3;&amp;#x8D8B;&amp;#x52BF;&amp;#x7684;&amp;#x53D8;&amp;#x5316;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x5C31;&amp;#x5F97;&amp;#x5230;&amp;#x6211;&amp;#x4EEC;&amp;#x65E5;&amp;#x5E38;&amp;#x6240;&amp;#x770B;&amp;#x5230;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T(n) = O(n^2)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot;&gt;&lt;a href=&quot;#&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot;&gt;&lt;/a&gt;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&lt;/h2&gt;&lt;p&gt;&amp;#x8BF4;&amp;#x5B8C;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&amp;#xFF0C;&amp;#x73B0;&amp;#x5728;&amp;#x6B63;&amp;#x5F0F;&amp;#x5206;&amp;#x6790;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x8003;&amp;#x5BDF;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x5F80;&amp;#x5F80;&amp;#x90FD;&amp;#x8981;&amp;#x5206;&amp;#x6790;&amp;#x5B83;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x53C8;&amp;#x8BE5;&amp;#x5982;&amp;#x4F55;&amp;#x53C8;&amp;#x5FEB;&amp;#x53C8;&amp;#x51C6;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x51FA;&amp;#x6765;&amp;#x5462;&amp;#xFF1F;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x5B9E;&amp;#x5F88;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x6211;&amp;#x6559;&amp;#x5927;&amp;#x5BB6;&amp;#x51E0;&amp;#x4E2A;&amp;#x4E2A;&amp;#x65B9;&amp;#x6CD5;&amp;#xFF0C;&amp;#x8BA9;&amp;#x4F60;&amp;#x66F4;&amp;#x52A0;&amp;#x8FC5;&amp;#x901F;&amp;#x4E0E;&amp;#x51C6;&amp;#x786E;&amp;#x7684;&amp;#x5F97;&amp;#x5230;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x8D2A;&amp;#x5FC3;&amp;#x6CD5;&amp;#x5219;&quot;&gt;&lt;a href=&quot;#&amp;#x8D2A;&amp;#x5FC3;&amp;#x6CD5;&amp;#x5219;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x8D2A;&amp;#x5FC3;&amp;#x6CD5;&amp;#x5219;&quot;&gt;&lt;/a&gt;&amp;#x8D2A;&amp;#x5FC3;&amp;#x6CD5;&amp;#x5219;&lt;/h3&gt;&lt;p&gt;&amp;#x4F55;&amp;#x4E3A;&amp;#x8D2A;&amp;#x5FC3;&amp;#x6CD5;&amp;#x5219;&amp;#xFF1F;&amp;#x7B80;&amp;#x5355;&amp;#x6765;&amp;#x8BF4;&amp;#x5C31;&amp;#x662F;&amp;#x627E;&amp;#x5230;&amp;#x4F60;&amp;#x8BA4;&amp;#x4E3A;&amp;#x6700;&amp;#x590D;&amp;#x6742;&amp;#x7684;&amp;#x90A3;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x8BF4;&amp;#x5FAA;&amp;#x73AF;&amp;#x6B21;&amp;#x6570;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x90A3;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x6CD5;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x8BA1;&amp;#x7B97;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x90FD;&amp;#x4F1A;&amp;#x5FFD;&amp;#x7565;&amp;#x5E38;&amp;#x6570;&amp;#x3001;&amp;#x7CFB;&amp;#x6570;&amp;#x4E0E;&amp;#x4F4E;&amp;#x4EF7;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6211;&amp;#x4EEC;&amp;#x53EA;&amp;#x9700;&amp;#x5173;&amp;#x6CE8;&amp;#x6B21;&amp;#x6570;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x90A3;&amp;#x884C;&amp;#x4EE3;&amp;#x7801;&amp;#x3002;&amp;#x4F8B;&amp;#x5982;:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun search(n: Int): Int {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt;= n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E00;&amp;#x770B;&amp;#x5C31;&amp;#x77E5;&amp;#x9053;&amp;#x6267;&amp;#x884C;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5728;while&amp;#x5FAA;&amp;#x5E8F;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x7528;&amp;#x5927;O&amp;#x8868;&amp;#x793A;&amp;#x4E3A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;T(n) = O(3 * n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     = O(n)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6CE8;&amp;#x610F;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E0D;&amp;#x7BA1;&amp;#x6709;&amp;#x591A;&amp;#x5C11;&amp;#x4E2A;&amp;#x5E73;&amp;#x7EA7;&amp;#x7684;while&amp;#x5FAA;&amp;#x5E8F;&amp;#xFF0C;&amp;#x6700;&amp;#x7EC8;&amp;#x901A;&amp;#x8FC7;&amp;#x52A0;&amp;#x6CD5;&amp;#x5408;&amp;#x5E76;&amp;#x5728;&amp;#x4E00;&amp;#x8D77;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x53BB;&amp;#x6389;&amp;#x5E38;&amp;#x6570;&amp;#xFF0C;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x8FD8;&amp;#x662F;O(n)&amp;#x3002;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun search(n: Int): Int {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt;= n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var j = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (j &amp;lt;= n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=j&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        j++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;&amp;#x6C42;&amp;#x540C;&amp;#x5B58;&amp;#x5F02;&quot;&gt;&lt;a href=&quot;#&amp;#x6C42;&amp;#x540C;&amp;#x5B58;&amp;#x5F02;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6C42;&amp;#x540C;&amp;#x5B58;&amp;#x5F02;&quot;&gt;&lt;/a&gt;&amp;#x6C42;&amp;#x540C;&amp;#x5B58;&amp;#x5F02;&lt;/h3&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x7D2F;&amp;#x8BA1;&amp;#x7684;&amp;#x53EA;&amp;#x9002;&amp;#x7528;&amp;#x4E8E;&amp;#x5355;&amp;#x4E2A;&amp;#x89C4;&amp;#x6A21;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5904;&amp;#x5728;&amp;#x591A;&amp;#x4E2A;&amp;#x89C4;&amp;#x6A21;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#xFF0C;&amp;#x5C31;&amp;#x76F4;&amp;#x63A5;&amp;#x6309;&amp;#x7167;&amp;#x6B63;&amp;#x5E38;&amp;#x7684;&amp;#x52A0;&amp;#x6CD5;&amp;#x8FD0;&amp;#x7B97;&amp;#x8FDB;&amp;#x884C;&amp;#x4FDD;&amp;#x7559;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun search(n: Int, m: Int): Int {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt;= n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var j = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (j &amp;lt;= m) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=j&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        j++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6B64;&amp;#x65F6;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(n+m),&amp;#x56E0;&amp;#x4E3A;&amp;#x5B58;&amp;#x5728;n&amp;#x3001;m&amp;#x4E24;&amp;#x4E2A;&amp;#x4E0D;&amp;#x540C;&amp;#x89C4;&amp;#x6A21;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0D;&amp;#x80FD;&amp;#x76F4;&amp;#x63A5;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x53EA;&amp;#x80FD;&amp;#x5171;&amp;#x5B58;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3E;&amp;#x4E00;&amp;#x53CD;&amp;#x4E09;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;n&amp;#x3001;m&amp;#x5D4C;&amp;#x5957;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x6309;&amp;#x7167;&amp;#x4E58;&amp;#x6CD5;&amp;#x6CD5;&amp;#x5219;&amp;#x8FDB;&amp;#x884C;&amp;#x8FD0;&amp;#x884C;&amp;#x3002;&amp;#x4F8B;&amp;#x5982;&amp;#xFF1A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun search(n: Int, m: Int): Int {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt;= n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result+=i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var j = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        while (j &amp;lt;= m) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	 result+=j&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	 j++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(n*m)&lt;/p&gt;
&lt;p&gt;&amp;#x76F8;&amp;#x5BF9;&amp;#x6765;&amp;#x8BF4;&amp;#x6211;&amp;#x4EEC;&amp;#x9047;&amp;#x5230;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x6837;&amp;#x5F0F;&amp;#x5E76;&amp;#x4E0D;&amp;#x591A;&amp;#xFF0C;&amp;#x4E3B;&amp;#x8981;&amp;#x4E3A;&amp;#x4EE5;&amp;#x4E0B;&amp;#x51E0;&amp;#x79CD;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;O(1)&amp;#xFF1A;&amp;#x5E38;&amp;#x6570;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(n)&amp;#xFF1A;&amp;#x7EBF;&amp;#x6027;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(n^2)&amp;#xFF1A;&amp;#x5E73;&amp;#x65B9;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(logn)&amp;#xFF1A;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(nlogn)&amp;#xFF1A;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(2^n)&amp;#xFF1A;&amp;#x6307;&amp;#x6570;&amp;#x9636;&lt;/li&gt;
&lt;li&gt;O(n!)&amp;#xFF1A;&amp;#x9636;&amp;#x4E58;&amp;#x9636;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;#x800C;&amp;#x7528;&amp;#x7684;&amp;#x6700;&amp;#x591A;&amp;#x7684;&amp;#x5C31;&amp;#x662F;O(1)&amp;#x3001;O(logn)&amp;#x3001;O(n)&amp;#x3001;O(nlogn)&amp;#x3001;O(n^2)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5BF9;O(n)&amp;#x4E0E;O(n^2)&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x4E3E;&amp;#x4F8B;&amp;#xFF0C;&amp;#x81F3;&amp;#x4E8E;&amp;#x5E38;&amp;#x6570;&amp;#x9636;O(1)&amp;#x5C31;&amp;#x4E0D;&amp;#x591A;&amp;#x8BF4;&amp;#x4E86;&amp;#xFF0C;&amp;#x53EA;&amp;#x8981;&amp;#x5B83;&amp;#x6CA1;&amp;#x6709;&amp;#x5FAA;&amp;#x73AF;&amp;#x4F53;&amp;#x6216;&amp;#x8005;&amp;#x9012;&amp;#x5F52;&amp;#x5B58;&amp;#x5728;&amp;#xFF0C;&amp;#x90A3;&amp;#x5B83;&amp;#x7684;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5C31;&amp;#x662F;O(1)&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x518D;&amp;#x6765;&amp;#x5206;&amp;#x6790;&amp;#x4E0B;O(logn)&amp;#x4E0E;O(nlogn)&lt;/p&gt;
&lt;h3 id=&quot;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x4E0E;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&quot;&gt;&lt;a href=&quot;#&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x4E0E;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x4E0E;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&quot;&gt;&lt;/a&gt;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x4E0E;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var i = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while(i &amp;lt; n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    i = i * 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6BCF;&amp;#x6B21;&amp;#x5FAA;&amp;#x73AF;&amp;#x90FD;&amp;#x5C06;&amp;#x5F53;&amp;#x524D;&amp;#x503C;&amp;#x4E58;&amp;#x4EE5;2&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0D;&amp;#x96BE;&amp;#x5F97;&amp;#x51FA;&amp;#x5B83;&amp;#x7684;&amp;#x7EC8;&amp;#x6B62;&amp;#x8868;&amp;#x8FBE;&amp;#x5F0F;&amp;#x4E3A;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;2^0 , 2^1 , 2^2 , 2^3 , ... , 2^x = n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6C42;&amp;#x5F97;x&amp;#x7B49;&amp;#x4E8E;log2^n&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(log2^n)&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x6211;&amp;#x518D;&amp;#x5C06;i = i &lt;em&gt; 2&amp;#x6539;&amp;#x6210;i = i &lt;/em&gt; 3&amp;#xFF0C;&amp;#x5176;&amp;#x5B83;&amp;#x90FD;&amp;#x4E0D;&amp;#x53D8;&amp;#xFF0C;&amp;#x6B64;&amp;#x65F6;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;O(log3^n)&lt;/p&gt;
&lt;p&gt;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;&amp;#x5BF9;&amp;#x6570;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x76F8;&amp;#x4E92;&amp;#x8F6C;&amp;#x6362;&amp;#x89C4;&amp;#x5F8B;&amp;#xFF0C;log3^n = log3^2 &lt;em&gt; log2^n&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;O(log3^n)&amp;#x53EF;&amp;#x4EE5;&amp;#x8F6C;&amp;#x6210;O(k &lt;/em&gt; log2^n)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;k&amp;#x662F;&amp;#x5E38;&amp;#x91CF;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x5FFD;&amp;#x7565;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8F6C;&amp;#x5316;&amp;#x4E4B;&amp;#x540E;&amp;#x5B83;&amp;#x4EEC;&amp;#x90FD;&amp;#x662F;O(log2^n)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x56E0;&amp;#x6B64;&amp;#xFF0C;&amp;#x5728;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x8868;&amp;#x793A;&amp;#x65B9;&amp;#x6CD5;&amp;#x91CC;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5FFD;&amp;#x7565;&amp;#x5BF9;&amp;#x6570;&amp;#x7684;&amp;#x5E95;&amp;#xFF0C;&amp;#x7EDF;&amp;#x4E00;&amp;#x8868;&amp;#x793A;&amp;#x4E3A;O(logn)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x90A3;&amp;#x4E48;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;O(nlogn)&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x5BF9;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x6267;&amp;#x884C;&amp;#x4E86;n&amp;#x904D;&amp;#xFF0C;&amp;#x539F;&amp;#x7406;&amp;#x90FD;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4F60;&amp;#x53EF;&amp;#x80FD;&amp;#x8FD8;&amp;#x542C;&amp;#x8BF4;&amp;#x8FC7;&amp;#x6700;&amp;#x597D;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3001;&amp;#x6700;&amp;#x574F;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3001;&amp;#x5E73;&amp;#x5747;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E0E;&amp;#x5747;&amp;#x644A;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x3002;&amp;#x5176;&amp;#x5B9E;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E5F;&amp;#x5F88;&amp;#x597D;&amp;#x7406;&amp;#x89E3;&amp;#xFF0C;&amp;#x672C;&amp;#x8D28;&amp;#x5C31;&amp;#x662F;&amp;#x5B57;&amp;#x9762;&amp;#x4E0A;&amp;#x7684;&amp;#x610F;&amp;#x601D;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5C31;&amp;#x4E0D;&amp;#x5230;&amp;#x8FD9;&amp;#x8FC7;&amp;#x591A;&amp;#x8BF4;&amp;#x660E;&amp;#xFF0C;&amp;#x540E;&amp;#x7EED;&amp;#x9047;&amp;#x5230;&amp;#x5177;&amp;#x4F53;&amp;#x7B97;&amp;#x6CD5;&amp;#x540E;&amp;#x518D;&amp;#x8FDB;&amp;#x884C;&amp;#x5177;&amp;#x4F53;&amp;#x8BF4;&amp;#x660E;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6700;&amp;#x540E;&amp;#x518D;&amp;#x9644;&amp;#x4E0A;&amp;#x4E00;&amp;#x5F20;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x66F2;&amp;#x7EBF;&amp;#x56FE;&amp;#xFF0C;&amp;#x6765;&amp;#x66F4;&amp;#x52A0;&amp;#x76F4;&amp;#x89C2;&amp;#x7684;&amp;#x770B;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x53D8;&amp;#x5316;&amp;#x8D8B;&amp;#x52BF;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2020/12/03/&amp;#x7B97;&amp;#x6CD5;&amp;#x4E4B;&amp;#x65C5;-&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5206;&amp;#x6790;/1.png&quot; alt&gt;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot;&gt;&lt;a href=&quot;#&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&quot;&gt;&lt;/a&gt;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&lt;/h2&gt;&lt;p&gt;&amp;#x5206;&amp;#x6790;&amp;#x5B8C;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#xFF0C;&amp;#x518D;&amp;#x6765;&amp;#x770B;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5C31;&amp;#x7B80;&amp;#x5355;&amp;#x8BB8;&amp;#x591A;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E5F;&amp;#x662F;&amp;#x7528;&amp;#x5927;O&amp;#x6765;&amp;#x8868;&amp;#x793A;&amp;#xFF0C;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E5F;&amp;#x662F;&amp;#x6E10;&amp;#x8FDB;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#xFF0C;&amp;#x8868;&amp;#x793A;&amp;#x7B97;&amp;#x6CD5;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x5B58;&amp;#x50A8;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E0E;&amp;#x6570;&amp;#x636E;&amp;#x89C4;&amp;#x6A21;&amp;#x4E4B;&amp;#x95F4;&amp;#x7684;&amp;#x5173;&amp;#x7CFB;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x7B80;&amp;#x5355;&amp;#x770B;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F8B;&amp;#x5B50;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private fun test(n: Int) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var i = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    val temp = IntArray(n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (i &amp;lt; n) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        temp[i] = i + 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x7533;&amp;#x8BF7;&amp;#x4E86;&amp;#x4E00;&amp;#x4E2A;n&amp;#x5927;&amp;#x5C0F;&amp;#x7684;temp&amp;#x6570;&amp;#x7EC4;&amp;#xFF0C;&amp;#x53EA;&amp;#x6709;&amp;#x8FD9;&amp;#x4E00;&amp;#x5757;&amp;#x6709;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x7533;&amp;#x8BF7;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5B83;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x5C31;&amp;#x662F;O(n)&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E38;&amp;#x89C1;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4E3A;&amp;#xFF1A;O(1)&amp;#x3001;O(n)&amp;#x4E0E;O(n^2)&amp;#xFF0C;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x3001;&amp;#x7EBF;&amp;#x6027;&amp;#x5BF9;&amp;#x6570;&amp;#x9636;&amp;#x3001;&amp;#x9636;&amp;#x4E58;&amp;#x9636;&amp;#x4E0E;&amp;#x6307;&amp;#x6570;&amp;#x9636;&amp;#x90FD;&amp;#x57FA;&amp;#x672C;&amp;#x7528;&amp;#x4E0D;&amp;#x5230;&amp;#x3002;&amp;#x6240;&amp;#x4EE5;&amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E;&amp;#x65F6;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x7A7A;&amp;#x95F4;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x4E5F;&amp;#x4F1A;&amp;#x5728;&amp;#x4E4B;&amp;#x540E;&amp;#x7684;&amp;#x7B97;&amp;#x6CD5;&amp;#x4E2D;&amp;#x8FDB;&amp;#x884C;&amp;#x540C;&amp;#x6B65;&amp;#x5206;&amp;#x6790;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5173;&amp;#x4E8E;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x4ECA;&amp;#x5929;&amp;#x5C31;&amp;#x804A;&amp;#x5230;&amp;#x8FD9;&amp;#x91CC;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x7B97;&amp;#x6CD5;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#xFF0C;&amp;#x6211;&amp;#x4EEC;&amp;#x5E76;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x523B;&amp;#x610F;&amp;#x7684;&amp;#x53BB;&amp;#x627E;&amp;#x7B97;&amp;#x6CD5;&amp;#x8FDB;&amp;#x884C;&amp;#x7EC3;&amp;#x4E60;&amp;#xFF0C;&amp;#x53EA;&amp;#x9700;&amp;#x5728;&amp;#x6BCF;&amp;#x6B21;&amp;#x9047;&amp;#x5230;&amp;#x7684;&amp;#x7B97;&amp;#x6CD5;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x6709;&amp;#x590D;&amp;#x6742;&amp;#x5EA6;&amp;#x7684;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6982;&amp;#x5FF5;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5728;&amp;#x5199;&amp;#x5B8C;&amp;#x7B97;&amp;#x6CD5;&amp;#x4E4B;&amp;#x540E;&amp;#x8FDB;&amp;#x884C;&amp;#x5206;&amp;#x6790;&amp;#x5BF9;&amp;#x6BD4;&amp;#x5373;&amp;#x53EF;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;a href=&quot;#&amp;#x9879;&amp;#x76EE;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x9879;&amp;#x76EE;&quot;&gt;&lt;/a&gt;&amp;#x9879;&amp;#x76EE;&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-startup&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android_startup&lt;/a&gt;: &amp;#x63D0;&amp;#x4F9B;&amp;#x4E00;&amp;#x79CD;&amp;#x5728;&amp;#x5E94;&amp;#x7528;&amp;#x542F;&amp;#x52A8;&amp;#x65F6;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x52A0;&amp;#x7B80;&amp;#x5355;&amp;#x3001;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x6765;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x7EC4;&amp;#x4EF6;&amp;#xFF0C;&amp;#x4F18;&amp;#x5316;&amp;#x542F;&amp;#x52A8;&amp;#x901F;&amp;#x5EA6;&amp;#x3002;&amp;#x4E0D;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;Jetpack App Startup&amp;#x7684;&amp;#x5168;&amp;#x90E8;&amp;#x529F;&amp;#x80FD;&amp;#xFF0C;&amp;#x8FD8;&amp;#x63D0;&amp;#x4F9B;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x540C;&amp;#x6B65;&amp;#x4E0E;&amp;#x5F02;&amp;#x6B65;&amp;#x7B49;&amp;#x5F85;&amp;#x3001;&amp;#x7EBF;&amp;#x7A0B;&amp;#x63A7;&amp;#x5236;&amp;#x4E0E;&amp;#x591A;&amp;#x8FDB;&amp;#x7A0B;&amp;#x652F;&amp;#x6301;&amp;#x7B49;&amp;#x529F;&amp;#x80FD;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/AwesomeGithub&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AwesomeGithub&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Github&amp;#x7684;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x7EAF;&amp;#x7EC3;&amp;#x4E60;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x7EC4;&amp;#x4EF6;&amp;#x5316;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x652F;&amp;#x6301;&amp;#x8D26;&amp;#x6237;&amp;#x5BC6;&amp;#x7801;&amp;#x4E0E;&amp;#x8BA4;&amp;#x8BC1;&amp;#x767B;&amp;#x9646;&amp;#x3002;&amp;#x4F7F;&amp;#x7528;Kotlin&amp;#x8BED;&amp;#x8A00;&amp;#x8FDB;&amp;#x884C;&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9879;&amp;#x76EE;&amp;#x67B6;&amp;#x6784;&amp;#x662F;&amp;#x57FA;&amp;#x4E8E;JetPack&amp;amp;DataBinding&amp;#x7684;MVVM&amp;#xFF1B;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E86;Arouter&amp;#x3001;Retrofit&amp;#x3001;Coroutine&amp;#x3001;Glide&amp;#x3001;Dagger&amp;#x4E0E;Hilt&amp;#x7B49;&amp;#x6D41;&amp;#x884C;&amp;#x5F00;&amp;#x6E90;&amp;#x6280;&amp;#x672F;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/flutter_github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;flutter_github&lt;/a&gt;: &amp;#x57FA;&amp;#x4E8E;Flutter&amp;#x7684;&amp;#x8DE8;&amp;#x5E73;&amp;#x53F0;&amp;#x7248;&amp;#x672C;Github&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#xFF0C;&amp;#x4E0E;AwesomeGithub&amp;#x76F8;&amp;#x5BF9;&amp;#x5E94;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/android-api-analysis&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;android-api-analysis&lt;/a&gt;: &amp;#x7ED3;&amp;#x5408;&amp;#x8BE6;&amp;#x7EC6;&amp;#x7684;Demo&amp;#x6765;&amp;#x5168;&amp;#x9762;&amp;#x89E3;&amp;#x6790;Android&amp;#x76F8;&amp;#x5173;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x70B9;, &amp;#x5E2E;&amp;#x52A9;&amp;#x8BFB;&amp;#x8005;&amp;#x80FD;&amp;#x591F;&amp;#x66F4;&amp;#x5FEB;&amp;#x7684;&amp;#x638C;&amp;#x63E1;&amp;#x4E0E;&amp;#x7406;&amp;#x89E3;&amp;#x6240;&amp;#x9610;&amp;#x8FF0;&amp;#x7684;&amp;#x8981;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/idisfkj/daily_algorithm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;daily_algorithm&lt;/a&gt;: &amp;#x6BCF;&amp;#x65E5;&amp;#x4E00;&amp;#x7B97;&amp;#x6CD5;&amp;#xFF0C;&amp;#x7531;&amp;#x6D45;&amp;#x5165;&amp;#x6DF1;&amp;#xFF0C;&amp;#x6B22;&amp;#x8FCE;&amp;#x52A0;&amp;#x5165;&amp;#x4E00;&amp;#x8D77;&amp;#x5171;&amp;#x52C9;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4ECA;&amp;#x5929;&amp;#x6B63;&amp;#x5F0F;&amp;#x5F00;&amp;#x542F;&amp;#x7B97;&amp;#x6CD5;&amp;#x4E4B;&amp;#x65C5;&amp;#xFF01;&lt;/p&gt;
&lt;p&gt;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x5408;&amp;
    
    </summary>
    
      <category term="算法" scheme="https://www.rousetime.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="算法" scheme="https://www.rousetime.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
</feed>
