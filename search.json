[{"title":"Android Gradle系列-进阶篇","url":"https://www.rousetime.com/2019/06/03/Android-Gradle系列-进阶篇/","content":"<p>&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5C06;Gradle&#x57FA;&#x7840;&#x8FD0;&#x7528;&#x4ECB;&#x7ECD;&#x4E86;&#x4E00;&#x904D;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x8BF4;&#xFF0C;&#x53EA;&#x8981;&#x4F60;&#x4E00;&#x76F4;&#x770B;&#x4E86;&#x6211;&#x8FD9;&#x4E2A;Gradle&#x7CFB;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x7684;Gradle&#x4E5F;&#x5C06;&#x8FC7;&#x5173;&#x4E86;&#xFF0C;&#x5E94;&#x5BF9;&#x6B63;&#x5E38;&#x7684;&#x5DE5;&#x4F5C;&#x5F00;&#x53D1;&#x5DF2;&#x7ECF;&#x4E0D;&#x6210;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x8981;&#x5411;&#x4F60;&#x4ECB;&#x7ECD;&#x7684;&#x662F;&#x5173;&#x4E8E;&#x5982;&#x4F55;&#x4F7F;&#x7528;Gradle&#x6765;&#x66F4;&#x52A0;&#x4F18;&#x96C5;&#x7684;&#x7BA1;&#x7406;&#x591A;&#x4E2A;module&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;</p>\n<p>&#x76F8;&#x4FE1;&#x4F60;&#x4E00;&#x5B9A;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x7ECF;&#x5386;&#xFF1A;&#x4E3B;&#x9879;&#x76EE;&#x4F9D;&#x8D56;&#x4E8E;&#x591A;&#x4E2A;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x6216;&#x8005;&#x9879;&#x76EE;&#x95F4;&#x4E92;&#x76F8;&#x4F9D;&#x8D56;&#x3002;&#x4E0D;&#x540C;&#x5B50;&#x9879;&#x76EE;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7248;&#x672C;&#x53C8;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#xFF0C;&#x5347;&#x7EA7;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x7684;&#x9879;&#x76EE;&#x90FD;&#x8981;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF1B;&#x751A;&#x81F3;minSdkVersion&#x4E0E;targetSdkVersion&#x4E5F;&#x4E0D;&#x76F8;&#x540C;&#x3002;</p>\n<p>&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x8BA9;Gradle&#x7248;&#x672C;&#x7BA1;&#x7406;&#x66F4;&#x52A0;&#x4F18;&#x96C5;&#x3002;</p>\n<h2 id=\"Google&#x63A8;&#x8350;\"><a href=\"#Google&#x63A8;&#x8350;\" class=\"headerlink\" title=\"Google&#x63A8;&#x8350;\"></a>Google&#x63A8;&#x8350;</h2><p>&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;<a href=\"\">Android Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;</a>&#x4E2D;&#x7684;dependencies&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x5F15;&#x7528;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6709;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;kotlin&#x9879;&#x76EE;&#x7684;&#x7ECF;&#x5386;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C06;&#x770B;&#x5230;Google&#x63A8;&#x8350;&#x7684;&#x65B9;&#x6848;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    ext.kotlin_version = <span class=\"string\">&apos;1.1.51&apos;</span></div><div class=\"line\">    repositories {</div><div class=\"line\">        google()</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\">    dependencies {</div><div class=\"line\">        classpath <span class=\"string\">&apos;com.android.tools.build:gradle:3.0.0&apos;</span></div><div class=\"line\">        classpath <span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</span></div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;rootProject&#x7684;build.gradle&#x4E2D;&#x4F7F;&#x7528;<strong>ext</strong>&#x6765;&#x5B9A;&#x4E49;&#x7248;&#x672C;&#x53F7;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;module&#x7684;build.gradle&#x4E2D;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x8FD9;&#x4E9B;&#x5B9A;&#x4E49;&#x7684;&#x53D8;&#x91CF;&#x3002;&#x5F15;&#x7528;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    implementation fileTree(<span class=\"string\">dir:</span> <span class=\"string\">&apos;libs&apos;</span>, <span class=\"string\">include:</span> [<span class=\"string\">&apos;*.jar&apos;</span>])</div><div class=\"line\">    implementation<span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version&quot;</span></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#x7406;&#x89E3;&#x4E3A;java&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x80FD;&#x591F;&#x8FBE;&#x5230;&#x4E0D;&#x540C;module&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x7EDF;&#x4E00;&#xFF0C;&#x4F46;&#x5C40;&#x9650;&#x6027;&#x662F;&#xFF0C;&#x4E00;&#x4F46;&#x914D;&#x7F6E;&#x9879;&#x8FC7;&#x591A;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x914D;&#x7F6E;&#x90FD;&#x5C06;&#x5199;&#x5230;rootProject&#x9879;&#x76EE;&#x7684;build.gradle&#x4E2D;&#xFF0C;&#x5BFC;&#x81F4;build.gradle&#x81C3;&#x80BF;&#x3002;&#x8FD9;&#x4E0D;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x6240;&#x63D0;&#x5021;&#x7684;&#x6A21;&#x5757;&#x5F00;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x8BE5;&#x60F3;&#x529E;&#x6CD5;&#x5C06;ext&#x7684;&#x914D;&#x7F6E;&#x5355;&#x72EC;&#x5206;&#x79BB;&#x51FA;&#x6765;&#x3002;</p>\n<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x5C31;&#x8981;&#x7528;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;<a href=\"\">Android Gradle&#x7CFB;&#x5217;-&#x539F;&#x7406;&#x7BC7;</a>&#x4E2D;&#x6240;&#x4ECB;&#x7ECD;&#x7684;apply&#x51FD;&#x6570;&#x3002;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x53EA;&#x4F7F;&#x7528;&#x4E86;apply&#x4E09;&#x79CD;&#x60C5;&#x51B5;&#x4E4B;&#x4E00;&#x7684;plugin(&#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;id&#x6216;&#x8005;class&#x540D;)&#xFF0C;&#x53EA;&#x4F7F;&#x7528;&#x5728;&#x5B50;&#x9879;&#x76EE;&#x7684;build.gradle&#x4E2D;&#x3002;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply <span class=\"string\">plugin:</span> <span class=\"string\">&apos;com.android.application&apos;</span></div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#x7684;<strong>from</strong>&#xFF0C;&#x5B83;&#x4E3B;&#x8981;&#x662F;&#x7684;&#x4F5C;&#x7528;&#x662F;<strong>&#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x6587;&#x4EF6;</strong>&#x3002;&#x4F5C;&#x7528;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x7684;&#x662F;&#x5C06;ext&#x914D;&#x7F6E;&#x5355;&#x72EC;&#x653E;&#x5230;&#x4E00;&#x4E2A;gradle&#x811A;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5728;rootProject&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;gradle&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x53D6;&#x540D;&#x4E3A;version.gradle&#x3002;</p>\n<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5728;version.gralde&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;ext&#x6765;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x3002;&#x4F8B;&#x5982;&#x4E4B;&#x524D;&#x7684;kotlin&#x7248;&#x672C;&#x53F7;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">ext.deps = [:]</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">def</span> versions = [:]</div><div class=\"line\">versions.support = <span class=\"string\">&quot;26.1.0&quot;</span></div><div class=\"line\">versions.kotlin = <span class=\"string\">&quot;1.2.51&quot;</span></div><div class=\"line\">versions.gradle = <span class=\"string\">&apos;3.2.1&apos;</span></div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">def</span> support = [:]</div><div class=\"line\">support.app_compat = <span class=\"string\">&quot;com.android.support:appcompat-v7:$versions.support&quot;</span></div><div class=\"line\">support.recyclerview = <span class=\"string\">&quot;com.android.support:recyclerview-v7:$versions.support&quot;</span></div><div class=\"line\">deps.support = support</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">def</span> kotlin = [:]</div><div class=\"line\">kotlin.kotlin_stdlib = <span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:$versions.kotlin&quot;</span></div><div class=\"line\">kotlin.plugin = <span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin&quot;</span></div><div class=\"line\">deps.kotlin = kotlin</div><div class=\"line\"> </div><div class=\"line\">deps.gradle_plugin = <span class=\"string\">&quot;com.android.tools.build:gradle:$versions.gradle&quot;</span></div><div class=\"line\"> </div><div class=\"line\">ext.deps = deps</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">def</span> build_versions = [:]</div><div class=\"line\">build_versions.target_sdk = <span class=\"number\">26</span></div><div class=\"line\">build_versions.min_sdk = <span class=\"number\">16</span></div><div class=\"line\">build_versions.build_tools = <span class=\"string\">&quot;28.0.3&quot;</span></div><div class=\"line\">ext.build_versions = build_versions</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">def</span> addRepos(RepositoryHandler handler) {</div><div class=\"line\">    handler.google()</div><div class=\"line\">    handler.jcenter()</div><div class=\"line\">    handler.maven { url <span class=\"string\">&apos;https://oss.sonatype.org/content/repositories/snapshots&apos;</span> }</div><div class=\"line\">}</div><div class=\"line\">ext.addRepos = <span class=\"keyword\">this</span>.&amp;addRepos</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x56E0;&#x4E3A;gradle&#x4F7F;&#x7528;&#x7684;&#x662F;groovy&#x8BED;&#x8A00;&#xFF0C;&#x6240;&#x4EE5;&#x4EE5;&#x4E0A;&#x90FD;&#x662F;groovy&#x8BED;&#x6CD5;</p>\n</blockquote>\n<p>&#x4F8B;&#x5982;kotlin&#x7248;&#x672C;&#x63A7;&#x5236;&#xFF0C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x5C06;&#x6709;&#x4E2A;kotlin&#x76F8;&#x5173;&#x7684;&#x7248;&#x672C;&#x4F9D;&#x8D56;&#x653E;&#x5230;deps&#x7684;kotlin&#x53D8;&#x91CF;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;deps&#x653E;&#x5230;&#x4E86;ext&#x4E2D;&#x3002;&#x5176;&#x5B83;&#x7684;&#x4EA6;&#x662F;&#x5982;&#x6B64;&#x3002;</p>\n<p>&#x65E2;&#x7136;&#x5B9A;&#x4E49;&#x597D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x5F15;&#x5165;&#x5230;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA9;&#x6240;&#x6709;&#x7684;&#x5B50;&#x9879;&#x76EE;&#x90FD;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<strong>apply from</strong>&#x5C06;&#x5176;&#x5F15;&#x5165;&#x5230;rootProject&#x7684;build.gradle&#x4E2D;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    apply <span class=\"string\">from:</span> <span class=\"string\">&apos;versions.gradle&apos;</span></div><div class=\"line\">    addRepos(repositories)</div><div class=\"line\">    dependencies {</div><div class=\"line\">        classpath deps.gradle_plugin</div><div class=\"line\">        classpath deps.kotlin.plugin</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;build.gradle&#x4E2D;&#x5C31;&#x9ED8;&#x8BA4;&#x6709;&#x4E86;ext&#x6240;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5C31;&#x5982;dependencies&#x4E2D;&#x7684;&#x5F15;&#x7528;&#x4E00;&#x6837;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E0A;&#x9762;&#x7684;addRepos&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x5173;&#x4E8E;Gradle&#x539F;&#x7406;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#x5DF2;&#x7ECF;&#x5206;&#x6790;&#x4E86;repositories&#x4F1A;&#x901A;&#x8FC7;RepositoryHandler&#x6765;&#x6267;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x7EDF;&#x4E00;&#x8C03;&#x7528;RepositoryHandler&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5728;build.gradle&#x4E2D;&#x5C31;&#x65E0;&#x9700;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;addRepos&#x65B9;&#x6CD5;&#x5373;&#x53EF;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//&#x4E4B;&#x524D;&#x8C03;&#x7528;</span></div><div class=\"line\">repositories {</div><div class=\"line\">    google()</div><div class=\"line\">    jcenter()</div><div class=\"line\">}</div><div class=\"line\"><span class=\"comment\">//&#x73B0;&#x5728;&#x8C03;&#x7528;</span></div><div class=\"line\">addRepos(repositories)</div></pre></td></tr></table></figure>\n<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;module&#xFF0C;&#x4F8B;&#x5982;&#x6709;module1&#xFF0C;&#x73B0;&#x5728;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;module1&#x4E2D;&#x7684;build.gradle&#x4E2D;&#x4F7F;&#x7528;&#x5B9A;&#x4E49;&#x597D;&#x7684;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    implementation fileTree(<span class=\"string\">dir:</span> <span class=\"string\">&apos;libs&apos;</span>, <span class=\"string\">include:</span> [<span class=\"string\">&apos;*.jar&apos;</span>])</div><div class=\"line\">    <span class=\"comment\">// support</span></div><div class=\"line\">    implementation deps.support.app_compat</div><div class=\"line\">    <span class=\"comment\">//kotlin</span></div><div class=\"line\">    implementation deps.kotlin.kotlin_stdlib</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x8FD8;&#x5B9A;&#x4E49;&#x4E86;sdk&#x4E0E;tools&#x7248;&#x672C;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x7EDF;&#x4E00;&#x4F7F;&#x7528;&#xFF0C;&#x6548;&#x679C;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">android {</div><div class=\"line\">    compileSdkVersion build_versions.target_sdk</div><div class=\"line\">    buildToolsVersion build_versions.build_tools</div><div class=\"line\">    defaultConfig {</div><div class=\"line\">        applicationId <span class=\"string\">&quot;com.idisfkj.androidapianalysis&quot;</span></div><div class=\"line\">        minSdkVersion build_versions.min_sdk</div><div class=\"line\">        targetSdkVersion build_versions.target_sdk</div><div class=\"line\">        versionCode <span class=\"number\">1</span></div><div class=\"line\">        versionName <span class=\"string\">&quot;1.0&quot;</span></div><div class=\"line\">        testInstrumentationRunner <span class=\"string\">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span></div><div class=\"line\">    }</div><div class=\"line\">    ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x65E6;&#x5B9E;&#x73B0;&#x4E86;&#x7EDF;&#x4E00;&#x914D;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x8981;&#x4FEE;&#x6539;&#x76F8;&#x5173;&#x7684;&#x7248;&#x672C;&#x5C31;&#x53EA;&#x9700;&#x5728;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;version.gradle&#x4E2D;&#x4FEE;&#x6539;&#x5373;&#x53EF;&#x3002;&#x65E0;&#x9700;&#x518D;&#x5BF9;&#x6240;&#x7528;&#x7684;module&#x8FDB;&#x884C;&#x9010;&#x4E00;&#x4FEE;&#x6539;&#x4E0E;&#x7EDF;&#x4E00;&#x914D;&#x7F6E;&#x3002;</p>\n<h2 id=\"BuildSrc-amp-Kotlin\"><a href=\"#BuildSrc-amp-Kotlin\" class=\"headerlink\" title=\"BuildSrc&amp;Kotlin\"></a>BuildSrc&amp;Kotlin</h2><p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x4E86;kotlin&#xFF0C;&#x90A3;&#x4E48;<strong>buildSrc&amp;Kotlin</strong>&#x7684;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x65B9;&#x6848;&#x5C06;&#x66F4;&#x9002;&#x5408;&#x4F60;&#x3002;</p>\n<p>Gradle&#x9879;&#x76EE;&#x4F1A;&#x9ED8;&#x8BA4;&#x8BC6;&#x522B;buildSrc&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5C06;&#x8BE5;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x6CE8;&#x5165;&#x5230;build.gradle&#x4E2D;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x8BA9;build.gradle&#x80FD;&#x591F;&#x76F4;&#x63A5;&#x5F15;&#x7528;buildSrc&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x9879;&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;&#x4E4B;&#x524D;version.gradle&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x653E;&#x5165;&#x5230;buildSrc&#x4E2D;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x5B9E;&#x73B0;&#x3002;</p>\n<p>&#x9996;&#x5148;&#x5728;&#x6839;&#x76EE;&#x5F55;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;buildSrc&#x76EE;&#x5F55;(&#x4E0E;app&#x540C;&#x7EA7;)&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8BE5;&#x76EE;&#x5F55;&#x65B0;&#x5EFA;src/main/java&#x76EE;&#x5F55;&#xFF0C;&#x8BE5;&#x76EE;&#x5F55;&#x662F;&#x4F60;&#x4E4B;&#x540E;&#x914D;&#x7F6E;&#x9879;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#xFF1B;&#x540C;&#x65F6;&#x518D;&#x65B0;&#x5EFA;build.gradle.kts&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;kotlin-dsl</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins {</div><div class=\"line\">    `kotlin-dsl`</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">repositories {</div><div class=\"line\">    jcenter()</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E4B;&#x540E;&#x518D;sync project&#xFF0C;&#x6700;&#x7EC8;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x5982;&#x4E0B;</p>\n<p><img src=\"/2019/06/03/Android-Gradle&#x7CFB;&#x5217;-&#x8FDB;&#x9636;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x8FDB;&#x9636;&#x7BC7;1.jpg\" alt=\"\"></p>\n<p>&#x642D;&#x5EFA;&#x597D;&#x4E86;&#x76EE;&#x5F55;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5728;src/main/java&#x4E0B;&#x4F7F;&#x7528;kotlin&#x65B0;&#x5EFA;Dependencies&#x6587;&#x4EF6;(&#x6587;&#x4EF6;&#x540D;&#x4EFB;&#x610F;)&#xFF0C;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x914D;&#x7F6E;&#x9879;&#x653E;&#x8FDB;&#x6765;&#xFF0C;&#x53EA;&#x662F;&#x4F7F;&#x7528;kotlin&#x8BED;&#x6CD5;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x800C;&#x5DF2;&#xFF0C;&#x8F6C;&#x5316;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">object</span> Versions {</div><div class=\"line\">    const <span class=\"keyword\">val</span> support = <span class=\"string\">&quot;26.1.0&quot;</span></div><div class=\"line\">    const <span class=\"keyword\">val</span> kotlin = <span class=\"string\">&quot;1.3.31&quot;</span></div><div class=\"line\">    const <span class=\"keyword\">val</span> gradle = <span class=\"string\">&quot;3.4.1&quot;</span></div><div class=\"line\">    const <span class=\"keyword\">val</span> target_sdk = <span class=\"number\">26</span></div><div class=\"line\">    const <span class=\"keyword\">val</span> min_sdk = <span class=\"number\">16</span></div><div class=\"line\">    const <span class=\"keyword\">val</span> build_tools = <span class=\"string\">&quot;28.0.3&quot;</span></div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">object</span> Dependencies {</div><div class=\"line\">    <span class=\"keyword\">val</span> app_compat = <span class=\"string\">&quot;com.android.support:appcompat-v7:<span class=\"subst\">${Versions.support}</span>&quot;</span></div><div class=\"line\">    <span class=\"keyword\">val</span> kotlin_stdlib = <span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:<span class=\"subst\">${Versions.kotlin}</span>&quot;</span></div><div class=\"line\">    <span class=\"keyword\">val</span> kotlin_plugin = <span class=\"string\">&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:<span class=\"subst\">${Versions.kotlin}</span>&quot;</span></div><div class=\"line\">    <span class=\"keyword\">val</span> gradle_plugin = <span class=\"string\">&quot;com.android.tools.build:gradle:<span class=\"subst\">${Versions.gradle}</span>&quot;</span></div><div class=\"line\">    <span class=\"keyword\">val</span> addRepos: (handler: RepositoryHandler) -&gt; <span class=\"built_in\">Unit</span> = {</div><div class=\"line\">        it.google()</div><div class=\"line\">        it.jcenter()</div><div class=\"line\">        it.maven { url = URI(<span class=\"string\">&quot;https://oss.sonatype.org/content/repositories/snapshots&quot;</span>) }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;Dependencies&#x4E0E;Versions&#x5728;&#x5404;&#x4E2A;build.gradle&#x4E2D;&#x5F15;&#x7528;&#xFF0C;&#x4F8B;&#x5982;app&#x4E0B;&#x7684;build.gradle</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">android {</div><div class=\"line\">    compileSdkVersion Versions.target_sdk</div><div class=\"line\">    buildToolsVersion Versions.build_tools</div><div class=\"line\">    defaultConfig {</div><div class=\"line\">        applicationId <span class=\"string\">&quot;com.idisfkj.androidapianalysis&quot;</span></div><div class=\"line\">        minSdkVersion Versions.min_sdk</div><div class=\"line\">        targetSdkVersion Versions.target_sdk</div><div class=\"line\">        versionCode <span class=\"number\">1</span></div><div class=\"line\">        versionName <span class=\"string\">&quot;1.0&quot;</span></div><div class=\"line\">        testInstrumentationRunner <span class=\"string\">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span></div><div class=\"line\">    }</div><div class=\"line\">    ...</div><div class=\"line\">}</div><div class=\"line\">dependencies {</div><div class=\"line\">    implementation fileTree(<span class=\"string\">dir:</span> <span class=\"string\">&apos;libs&apos;</span>, <span class=\"string\">include:</span> [<span class=\"string\">&apos;*.jar&apos;</span>])</div><div class=\"line\">    <span class=\"comment\">// support</span></div><div class=\"line\">    implementation Dependencies.app_compat</div><div class=\"line\">    <span class=\"comment\">//kotlin</span></div><div class=\"line\">    implementation Dependencies.kotlin_stdlib</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x76EE;&#x5F55;&#x7684;build.gralde&#x4EA6;&#x662F;&#x5982;&#x6B64;</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    Dependencies.addRepos.invoke(repositories)</div><div class=\"line\">    dependencies {</div><div class=\"line\">        classpath Dependencies.gradle_plugin</div><div class=\"line\">        classpath Dependencies.kotlin_plugin</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">allprojects {</div><div class=\"line\">    Dependencies.addRepos.invoke(repositories)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">task clean(<span class=\"string\">type:</span> Delete) {</div><div class=\"line\">    delete rootProject.buildDir</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x9700;&#x8981;get&#x5230;&#x7684;&#x662F;&#x4E00;&#x79CD;&#x601D;&#x60F3;&#xFF0C;&#x5C06;&#x914D;&#x7F6E;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x3002;&#x81F3;&#x4E8E;&#x5230;&#x5E95;&#x4F7F;&#x7528;&#x54EA;&#x4E00;&#x79CD;&#xFF0C;&#x8FD9;&#x5C31;&#x770B;&#x4E2A;&#x4EBA;&#x559C;&#x597D;&#x4E86;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x4E86;kotlin&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x4F60;&#x4F7F;&#x7528;buildSrc&#x6A21;&#x5F0F;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E8E;Groovy&#x8BED;&#x6CD5;&#x800C;&#x8A00;&#xFF0C;&#x6211;&#x76F8;&#x4FE1;&#x4F60;&#x8FD8;&#x662F;&#x5BF9;Kotlin&#x66F4;&#x52A0;&#x719F;&#x6089;&#x3002;</p>\n<p>&#x6E90;&#x7801;&#x5730;&#x5740;: <a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/android-api-analysis</a></p>\n<p><img src=\"/2019/06/03/Android-Gradle&#x7CFB;&#x5217;-&#x8FDB;&#x9636;&#x7BC7;/Android&#x8865;&#x7ED9;&#x7AD9;.jpg\" alt=\"\"></p>\n"},{"title":"Android Gradle系列-运用篇","url":"https://www.rousetime.com/2019/05/23/Gradle系列-运用篇/","content":"<p>&#x4E0A;&#x6B21;&#x6211;&#x4EEC;&#x8BF4;&#x5230;gradle&#x7684;&#x539F;&#x7406;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x504F;&#x7406;&#x8BBA;&#x4E0A;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#xFF0C;&#x76F4;&#x901A;&#x8F66;&#x5728;&#x8FD9;<a href=\"https://www.rousetime.com/2019/05/13/Android-Gradle%E7%B3%BB%E5%88%97-%E5%8E%9F%E7%90%86%E7%AF%87/\">Android Gradle&#x7CFB;&#x5217;-&#x539F;&#x7406;&#x7BC7;</a>&#x3002;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x6765;&#x70B9;&#x5B9E;&#x6218;&#x7684;&#xFF0C;&#x968F;&#x4FBF;&#x5DE9;&#x56FA;&#x4E0B;&#x4E4B;&#x524D;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x3002;</p>\n<h2 id=\"android\"><a href=\"#android\" class=\"headerlink\" title=\"android\"></a>android</h2><p>&#x5728;app module&#x4E0B;&#x7684;gradle.build&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;android&#x95ED;&#x5305;&#xFF0C;&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x90FD;&#x5728;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x3002;&#x4F8B;&#x5982;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x9879;&#xFF1A;defaultConfig&#xFF1B;&#x7B7E;&#x540D;&#x76F8;&#x5173;&#xFF1A;signingConfig&#xFF1B;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#xFF1A;buildTypes&#xFF1B;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#xFF1A;productFlavors&#xFF1B;&#x6E90;&#x96C6;&#x914D;&#x7F6E;&#xFF1A;sourceSets&#x7B49;&#x3002;</p>\n<h3 id=\"defaultConfig\"><a href=\"#defaultConfig\" class=\"headerlink\" title=\"defaultConfig\"></a>defaultConfig</h3><p>&#x5BF9;&#x4E8E;defaultConfig&#x5176;&#x5B9E;&#x5B83;&#x662F;&#x4E5F;&#x4E00;&#x4E2A;productFlavor&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x662F;&#x7528;&#x6765;&#x63D0;&#x4F9B;&#x9ED8;&#x8BA4;&#x7684;&#x8BBE;&#x7F6E;&#x9879;&#xFF0C;&#x5982;&#x679C;&#x4E4B;&#x540E;&#x7684;productFlavor&#x6CA1;&#x6709;&#x7279;&#x6B8A;&#x6307;&#x5B9A;&#x7684;&#x914D;&#x7F6E;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;defaultConfig&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class DefaultConfig extends BaseFlavor {</div><div class=\"line\">    @Inject</div><div class=\"line\">    public DefaultConfig(</div><div class=\"line\">            @NonNull String name,</div><div class=\"line\">            @NonNull Project project,</div><div class=\"line\">            @NonNull ObjectFactory objectFactory,</div><div class=\"line\">            @NonNull DeprecationReporter deprecationReporter,</div><div class=\"line\">            @NonNull Logger logger) {</div><div class=\"line\">        super(name, project, objectFactory, deprecationReporter, logger);</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">public abstract class BaseFlavor extends DefaultProductFlavor implements CoreProductFlavor {</div><div class=\"line\">\t...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;defaultConfig&#x7684;&#x8D85;&#x7EA7;&#x7236;&#x7C7B;&#x5C31;&#x662F;DefaultProductFlavor&#x3002;&#x800C;&#x5728;DefaultProductFlavor&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x8BB8;&#x591A;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x89C1;&#x5230;&#x7684;&#x914D;&#x7F6E;&#xFF1A;VersionCode&#x3001;VersionName&#x3001;minSdkVersion&#x3001;targetSdkVersion&#x4E0E;applicationId&#x7B49;&#x7B49;&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x90A3;&#x4E48;&#x5728;defaultConfig&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x914D;&#x7F6E;&#x7684;&#x53D8;&#x91CF;&#x5C31;&#x663E;&#x800C;&#x6613;&#x89C1;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">defaultConfig {</div><div class=\"line\">    applicationId &quot;com.idisfkj.androidapianalysis&quot;</div><div class=\"line\">    minSdkVersion 16</div><div class=\"line\">    targetSdkVersion 26</div><div class=\"line\">    versionCode 1</div><div class=\"line\">    versionName &quot;1.0&quot;</div><div class=\"line\">    testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"signingConfigs\"><a href=\"#signingConfigs\" class=\"headerlink\" title=\"signingConfigs\"></a>signingConfigs</h3><p>signingConfig&#x662F;&#x7528;&#x6765;&#x914D;&#x7F6E;keyStore&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;keyStore&#xFF0C;&#x4F8B;&#x5982;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">signingConfigs {</div><div class=\"line\">    config { //&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;</div><div class=\"line\">        storeFile file(&apos;key.store&apos;)</div><div class=\"line\">        storePassword &apos;android123&apos;</div><div class=\"line\">        keyAlias &apos;android&apos;</div><div class=\"line\">        keyPassword &apos;android123&apos;</div><div class=\"line\">    }</div><div class=\"line\">    dev { //dev&#x6D4B;&#x8BD5;&#x7248;&#x914D;&#x7F6E;</div><div class=\"line\">        storeFile file(&apos;xxxx&apos;)</div><div class=\"line\">        storePassword &apos;xxx&apos;</div><div class=\"line\">        keyAlias &apos;xxx&apos;</div><div class=\"line\">        keyPassword &apos;xxx&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6709;&#x4EBA;&#x53EF;&#x80FD;&#x4F1A;&#x8BF4;&#x8FD9;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5BC6;&#x7801;&#x90FD;&#x662F;&#x660E;&#x6587;&#xFF0C;&#x90FD;&#x66B4;&#x9732;&#x51FA;&#x53BB;&#x4E86;&#x3002;&#x662F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;&#x8FDC;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;&#x79D8;&#x94A5;&#x5C31;&#x6CC4;&#x9732;&#x51FA;&#x53BB;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x5B89;&#x5168;&#x8D77;&#x89C1;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5BF9;&#x5176;&#x8FDB;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x3002;</p>\n<ol>\n<li>&#x901A;&#x8FC7;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x83B7;&#x53D6;&#x79D8;&#x94A5;</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">storePassword System.getenv(&quot;KSTOREPWD&quot;)</div><div class=\"line\">keyPassword System.getenv(&quot;KEYPWD&quot;)</div></pre></td></tr></table></figure>\n<ol>\n<li>&#x4ECE;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x83B7;&#x53D6;&#x79D8;&#x94A5;</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">storePassword System.console().readLine(&quot;\\nKeystore password: &quot;)</div><div class=\"line\">keyPassword System.console().readLine(&quot;\\nKey password: &quot;)</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x4E24;&#x79CD;&#x662F;Android Develop&#x5B98;&#x7F51;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x4F46;&#x7ECF;&#x8FC7;&#x6D4B;&#x8BD5;&#x90FD;&#x4F1A;&#x62A5;null&#x5F02;&#x5E38;&#xFF0C;&#x67E5;&#x4E86;&#x4E0B;&#x8D44;&#x6599;&#x90FD;&#x8BF4;&#x662F;gradle&#x4E0D;&#x652F;&#x6301;(&#x5982;&#x679C;&#x6709;&#x6210;&#x529F;&#x7684;&#x53EF;&#x4EE5;&#x544A;&#x77E5;&#x6211;)&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x63A8;&#x8350;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;</p>\n<p>&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x4E0B;(settings.gradle&#x5E73;&#x7EA7;)&#x521B;&#x5EFA;keystore.properties&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x79D8;&#x94A5;&#xFF0C;&#x5B83;&#x662F;&#x652F;&#x6301;key-value&#x6A21;&#x5F0F;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">storePassword = android123</div><div class=\"line\">keyPassword = android123</div></pre></td></tr></table></figure>\n<p>&#x4E4B;&#x540E;&#x5C31;&#x662F;&#x8BFB;&#x53D6;&#x5176;&#x4E2D;&#x7684;password&#xFF0C;&#x5728;build.gradle&#x901A;&#x8FC7;afterEvaluate&#x56DE;&#x8C03;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x4E0E;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">afterEvaluate {</div><div class=\"line\">    def propsFile = rootProject.file(&apos;keystore.properties&apos;)</div><div class=\"line\">    def configName = &apos;config&apos;</div><div class=\"line\">    if (propsFile.exists() &amp;&amp; android.signingConfigs.hasProperty(configName)) {</div><div class=\"line\">        def props = new Properties()</div><div class=\"line\">        props.load(new FileInputStream(propsFile))</div><div class=\"line\">        android.signingConfigs[configName].keyPassword = props[&apos;keyPassword&apos;]</div><div class=\"line\">        android.signingConfigs[configName].storePassword = props[&apos;storePassword&apos;]</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x52A8;&#x6001;&#x8BFB;&#x53D6;&#x4E86;password&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4E4B;&#x524D;&#x7684;signingConfigs&#x4E2D;&#x5C31;&#x65E0;&#x9700;&#x518D;&#x914D;&#x7F6E;password</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">signingConfigs {</div><div class=\"line\">    config {</div><div class=\"line\">        storeFile file(&apos;key.store&apos;)</div><div class=\"line\">        keyAlias &apos;android&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x4E00;&#x6B65;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x79D8;&#x94A5;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x5728;.gitignore&#x4E2D;&#x6DFB;&#x52A0;keystore.properties&#x7684;&#x5FFD;&#x7565;&#x914D;&#x7F6E;&#xFF0C;&#x9632;&#x6B62;&#x4E0A;&#x4F20;&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x50A8;&#x66B4;&#x9732;&#x79D8;&#x94A5;&#x3002;</p>\n<h3 id=\"buildTypes\"><a href=\"#buildTypes\" class=\"headerlink\" title=\"buildTypes\"></a>buildTypes</h3><p>&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x914D;&#x7F6E;shrinkResources&#xFF1A;&#x8D44;&#x6E90;&#x662F;&#x5426;&#x9700;&#x8981;&#x538B;&#x7F29;&#x3001;zipAlignEnabled&#xFF1A;&#x538B;&#x7F29;&#x662F;&#x5426;&#x5BF9;&#x9F50;&#x3001;minifyEnabled&#xFF1A;&#x662F;&#x5426;&#x4EE3;&#x7801;&#x6DF7;&#x6DC6;&#x4E0E;signingConfig&#xFF1A;&#x7B7E;&#x540D;&#x914D;&#x7F6E;&#x7B49;&#x7B49;&#x3002;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x6709;&#x4E00;&#x4E2A;release&#x914D;&#x7F6E;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;debug&#x6A21;&#x5F0F;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x6CD5;&#x8C03;&#x8BD5;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x6DF7;&#x6DC6;&#x3001;&#x538B;&#x7F29;&#x7B49;&#x5904;&#x7406;&#x3002;&#x6216;&#x8005;outer&#x6A21;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x7684;&#x7B7E;&#x540D;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x662F;&#x8FD9;&#x6837;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildTypes {</div><div class=\"line\">    debug {</div><div class=\"line\">        minifyEnabled false</div><div class=\"line\">        zipAlignEnabled false</div><div class=\"line\">        shrinkResources false</div><div class=\"line\">        signingConfig signingConfigs.config</div><div class=\"line\">    }</div><div class=\"line\">    outer {</div><div class=\"line\">        minifyEnabled false</div><div class=\"line\">        zipAlignEnabled false</div><div class=\"line\">        shrinkResources false</div><div class=\"line\">        signingConfig signingConfigs.outConfig</div><div class=\"line\">    }</div><div class=\"line\">    release {</div><div class=\"line\">        minifyEnabled true</div><div class=\"line\">        zipAlignEnabled true</div><div class=\"line\">        shrinkResources true</div><div class=\"line\">        signingConfig signingConfigs.config</div><div class=\"line\">        proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Sync Now&#x4E4B;&#x540E;&#xFF0C;&#x6253;&#x5F00;Android Studio &#x53F3;&#x8FB9;&#x7684;Gradle&#xFF0C;&#x627E;&#x5230;app-&gt;Tasks-&gt;build&#xFF0C;&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;assembleDebug&#x4E0E;assembleOuter&#x6784;&#x5EFA;task&#x3002;</p>\n<h3 id=\"productFlavors\"><a href=\"#productFlavors\" class=\"headerlink\" title=\"productFlavors\"></a>productFlavors</h3><p>&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x53EF;&#x80FD;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x73AF;&#x5883;&#xFF0C;&#x4F8B;&#x5982;&#x5F00;&#x53D1;&#x529F;&#x80FD;&#x4E2D;&#x7684;&#x5F00;&#x53D1;&#x7248;&#x3001;&#x9879;&#x76EE;&#x4E0A;&#x7EBF;&#x7684;&#x6B63;&#x5F0F;&#x7248;&#x3002;&#x5F00;&#x53D1;&#x7248;&#x4E0E;&#x6B63;&#x5F0F;&#x7248;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;api&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;productFlavor&#x6765;&#x6784;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x9762;&#x7684;dev&#x4E0E;prod&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">flavorDimensions &quot;mode&quot;</div><div class=\"line\">productFlavors {</div><div class=\"line\">    dev {</div><div class=\"line\">        applicationIdSuffix &quot;.dev&quot;</div><div class=\"line\">        dimension &quot;mode&quot;</div><div class=\"line\">        manifestPlaceholders = [PROJECT_NAME: &quot;@string/app_name_dev&quot;,</div><div class=\"line\">                                APP_ID      : &quot;21321843&quot;]</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;API_URL&apos;, &apos;&quot;https://dev.idisfkj.android.com&quot;&apos;</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;APP_KEY&apos;, &apos;&quot;3824yk32&quot;&apos;</div><div class=\"line\">    }</div><div class=\"line\">    prod {</div><div class=\"line\">        applicationIdSuffix &quot;.prod&quot;</div><div class=\"line\">        dimension &quot;mode&quot;</div><div class=\"line\">        manifestPlaceholders = [PROJECT_NAME: &quot;@string/app_name&quot;,</div><div class=\"line\">                                APP_ID      : &quot;12932843&quot;]</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;API_URL&apos;, &apos;&quot;https://prod.idisfkj.android.com&quot;&apos;</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;APP_KEY&apos;, &apos;&quot;32143dsk2&quot;&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;app&#xFF0C;&#x624B;&#x673A;&#x7CFB;&#x7EDF;&#x662F;&#x6839;&#x636E;app&#x7684;applicationId&#x6765;&#x8BC6;&#x522B;&#x7684;&#xFF0C;&#x9ED8;&#x8BA4;applicationId&#x662F;packageName&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x8BA9;dev&#x4E0E;prod&#x7684;&#x7248;&#x672C;&#x90FD;&#x80FD;&#x5171;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x624B;&#x673A;&#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;applicationIdSuffix&#x6765;&#x4E3A;applicationId&#x589E;&#x52A0;&#x540E;&#x7F00;&#xFF0C;&#x6539;&#x53D8;&#x5B89;&#x88C5;&#x5305;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x3002;</p>\n<p>&#x8FD8;&#x6709;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;manifestPlaceholders&#x6765;&#x914D;&#x7F6E;&#x53EF;&#x7528;&#x4E8E;AndroidManifest&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4F8B;&#x5982;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#x663E;&#x793A;&#x4E0D;&#x540C;&#x7684;app&#x540D;&#x79F0;</p>\n<p>dev&#x4E0E;prod&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x65F6;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;api host&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;buildConfigField&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x901A;&#x8FC7;BuildConfig&#x83B7;&#x53D6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">fun getApiUlr(): String {</div><div class=\"line\">    return BuildConfig.API_URL</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;BuildConfig&#x4F1A;&#x6839;&#x636E;&#x4F60;&#x6784;&#x5EFA;&#x7684;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF0C;&#x5B83;&#x4F4D;&#x4E8E;build-&gt;generated-&gt;source-&gt;buildConfig-&gt;&#x53D8;&#x4F53;&#xFF0C;&#x5927;&#x81F4;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public final class BuildConfig {</div><div class=\"line\">  public static final boolean DEBUG = Boolean.parseBoolean(&quot;true&quot;);</div><div class=\"line\">  public static final String APPLICATION_ID = &quot;com.idisfkj.androidapianalysis.dev&quot;;</div><div class=\"line\">  public static final String BUILD_TYPE = &quot;debug&quot;;</div><div class=\"line\">  public static final String FLAVOR = &quot;devMinApi21&quot;;</div><div class=\"line\">  public static final int VERSION_CODE = 20001;</div><div class=\"line\">  public static final String VERSION_NAME = &quot;1.0-minApi21&quot;;</div><div class=\"line\">  public static final String FLAVOR_mode = &quot;dev&quot;;</div><div class=\"line\">  public static final String FLAVOR_api = &quot;minApi21&quot;;</div><div class=\"line\">  // Fields from product flavor: dev</div><div class=\"line\">  public static final String API_URL = &quot;https://dev.idisfkj.android.com&quot;;</div><div class=\"line\">  public static final String APP_KEY = &quot;3824yk32&quot;;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Sync Now&#x4E4B;&#x540E;&#xFF0C;&#x6253;&#x5F00;Android Studio &#x53F3;&#x8FB9;&#x7684;Gradle&#xFF0C;&#x627E;&#x5230;app-&gt;Tasks-&gt;build&#xFF0C;&#x53D1;&#x73B0;&#x65B0;&#x6DFB;&#x52A0;&#x4E86;assembleDev&#x4E0E;assembleProd&#x6784;&#x5EFA;task&#x3002;</p>\n<p>flavorDimensions&#x662F;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x591A;&#x7EF4;&#x5EA6;&#x7684;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x53EA;&#x5C55;&#x793A;&#x4E86;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;dimension&#x4E3A;mode&#x7684;&#x5F62;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x65B0;&#x589E;&#x4E00;&#x4E2A;api&#x7EF4;&#x5EA6;&#xFF0C;&#x6784;&#x5EFA;&#x4E0D;&#x540C;&#x7684;minSkdVerison&#x7248;&#x672C;&#x7684;apk</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">flavorDimensions &quot;mode&quot;, &quot;api&quot;</div><div class=\"line\">productFlavors {</div><div class=\"line\">    dev {</div><div class=\"line\">        applicationIdSuffix &quot;.dev&quot;</div><div class=\"line\">        dimension &quot;mode&quot;</div><div class=\"line\">        manifestPlaceholders = [PROJECT_NAME: &quot;@string/app_name_dev&quot;,</div><div class=\"line\">                                APP_ID      : &quot;21321843&quot;]</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;API_URL&apos;, &apos;&quot;https://dev.idisfkj.android.com&quot;&apos;</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;APP_KEY&apos;, &apos;&quot;3824yk32&quot;&apos;</div><div class=\"line\">    }</div><div class=\"line\">    prod {</div><div class=\"line\">        applicationIdSuffix &quot;.prod&quot;</div><div class=\"line\">        dimension &quot;mode&quot;</div><div class=\"line\">        manifestPlaceholders = [PROJECT_NAME: &quot;@string/app_name&quot;,</div><div class=\"line\">                                APP_ID      : &quot;12932843&quot;]</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;API_URL&apos;, &apos;&quot;https://prod.idisfkj.android.com&quot;&apos;</div><div class=\"line\">        buildConfigField &apos;String&apos;, &apos;APP_KEY&apos;, &apos;&quot;32143dsk2&quot;&apos;</div><div class=\"line\">    }</div><div class=\"line\">    minApi16 {</div><div class=\"line\">        dimension &quot;api&quot;</div><div class=\"line\">        minSdkVersion 16</div><div class=\"line\">        versionCode 10000 + android.defaultConfig.versionCode</div><div class=\"line\">        versionNameSuffix &quot;-minApi16&quot;</div><div class=\"line\">    }</div><div class=\"line\">    minApi21 {</div><div class=\"line\">        dimension &quot;api&quot;</div><div class=\"line\">        minSdkVersion 21</div><div class=\"line\">        versionCode 20000 + android.defaultConfig.versionCode</div><div class=\"line\">        versionNameSuffix &quot;-minApi21&quot;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>gradle&#x521B;&#x5EFA;&#x7684;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x6570;&#x91CF;&#x7B49;&#x4E8E;&#x6BCF;&#x4E2A;&#x98CE;&#x683C;&#x7EF4;&#x5EA6;&#x4E2D;&#x7684;&#x98CE;&#x683C;&#x6570;&#x91CF;&#x4E0E;&#x4F60;&#x914D;&#x7F6E;&#x7684;&#x6784;&#x5EFA;&#x7C7B;&#x578B;&#x6570;&#x91CF;&#x7684;&#x4E58;&#x79EF;&#xFF0C;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x7684;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x6570;&#x91CF;&#x4E3A;12&#x4E2A;&#x3002;&#x5728;gradle&#x4E3A;&#x6BCF;&#x4E2A;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x6216;&#x5BF9;&#x5E94;apk&#x547D;&#x540D;&#x65F6;&#xFF0C;&#x5C5E;&#x4E8E;&#x8F83;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x98CE;&#x683C;&#x7EF4;&#x5EA6;&#x7684;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#x9996;&#x5148;&#x663E;&#x793A;&#xFF0C;&#x4E4B;&#x540E;&#x662F;&#x8F83;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7EF4;&#x5EA6;&#x7684;&#x4EA7;&#x54C1;&#x98CE;&#x683C;&#xFF0C;&#x518D;&#x4E4B;&#x540E;&#x662F;&#x6784;&#x5EFA;&#x7C7B;&#x578B;&#x3002;&#x800C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x5224;&#x65AD;&#x5219;&#x4EE5;flavorDimensions&#x7684;&#x503C;&#x987A;&#x5E8F;&#x4E3A;&#x4F9D;&#x636E;&#xFF0C;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x6784;&#x5EFA;&#x914D;&#x7F6E;&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<p>&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#xFF1A;[dev, prod][minApi16, minApi21][debug, outer, release]<br>&#x5BF9;&#x5E94;apk&#xFF1A;app-[dev, prod]-[minApi16, minApi21]-[debug, outer, release].apk</p>\n<p>&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x6709;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5168;&#x90E8;&#x9700;&#x8981;&#xFF0C;&#x4F8B;&#x5982;&#x4F60;&#x4E0D;&#x9700;&#x8981;mode&#x4E3A;dev&#xFF0C;api&#x4E3A;minApi16&#x7684;&#x53D8;&#x4F53;&#xFF0C;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;variantFilter&#x65B9;&#x6CD5;&#x6765;&#x8FC7;&#x6EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">variantFilter { variant -&gt;</div><div class=\"line\">    def names = variant.flavors*.name</div><div class=\"line\">    if (names.contains(&quot;minApi16&quot;) &amp;&amp; names.contains(&quot;dev&quot;)) {</div><div class=\"line\">        setIgnore(true)</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F60;&#x518D;&#x56DE;&#x5230;app-&gt;Tasks&#x4E2D;&#x67E5;&#x770B;&#x53D8;&#x4F53;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x5C06;devMinApi16&#x76F8;&#x5173;&#x7684;&#x53D8;&#x4F53;&#x8FC7;&#x6EE4;&#x4E86;&#x3002;</p>\n<p>&#x4F60;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x8FC7;&#x6EE4;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x9ED8;&#x8BA4;&#x7684;apk&#x8F93;&#x51FA;&#x540D;&#x79F0;&#x3002;&#x4F8B;&#x5982;&#x4F60;&#x60F3;&#x4FEE;&#x6539;buildType&#x4E3A;release&#x7684;apk&#x540D;&#x79F0;&#xFF0C;&#x8FD9;&#x65F6;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;android.applicationVariants.all</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">android.applicationVariants.all { variant -&gt;</div><div class=\"line\">    if (variant.buildType.name == buildTypes.release.name) {</div><div class=\"line\">        variant.outputs.all {</div><div class=\"line\">            outputFileName = &quot;analysis-release-${defaultConfig.versionName}.apk&quot;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x5728;release&#x4E0B;&#x7684;&#x5305;&#x540D;&#x90FD;&#x662F;&#x4EE5;analysis&#x6253;&#x5934;</p>\n<h3 id=\"sourceSets\"><a href=\"#sourceSets\" class=\"headerlink\" title=\"sourceSets\"></a>sourceSets</h3><p>Android Studio&#x4F1A;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x9ED8;&#x8BA4;&#x7684;main&#x6E90;&#x96C6;&#x4E0E;&#x76EE;&#x5F55;(&#x4F4D;&#x4E8E;app/src/main)&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6240;&#x6709;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x95F4;&#x7684;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;main&#x6E90;&#x96C6;&#x6765;&#x66F4;&#x6539;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x4F8B;&#x5982;&#x73B0;&#x5728;&#x4F60;&#x60F3;&#x5C06;res&#x7684;&#x8DEF;&#x5F84;&#x4FEE;&#x6539;&#x6210;src/custom/res</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sourceSets {</div><div class=\"line\">    main {</div><div class=\"line\">        res.srcDirs = [&apos;src/custom/res&apos;]</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;res&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x5C31;&#x5B9A;&#x4F4D;&#x5230;&#x4E86;src/custom/res&#x4E0B;&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x5176;&#x5B83;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;java&#x3001;assets&#x3001;jni&#x7B49;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x914D;&#x7F6E;&#x4E86;&#x591A;&#x4E2A;&#x8DEF;&#x5F84;&#xFF0C;&#x5373;&#x8DEF;&#x5F84;&#x96C6;&#x5408;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sourceSets {</div><div class=\"line\">    main {</div><div class=\"line\">        res.srcDirs = [&apos;src/custom/res&apos;, &apos;scr/main/res&apos;]</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x4F60;&#x8981;&#x4FDD;&#x8BC1;&#x4E0D;&#x80FD;&#x6709;&#x76F8;&#x540C;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x53EA;&#x80FD;&#x552F;&#x4E00;&#x5B58;&#x5728;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x3002;</p>\n<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6240;&#x4EE5;&#x7684;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x8DEF;&#x5F84;: &#x70B9;&#x51FB;&#x53F3;&#x8FB9;gradle-&gt;app-&gt;android-&gt;sourceSets&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x7C7B;&#x4F3C;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">------------------------------------------------------------</div><div class=\"line\">Project :app</div><div class=\"line\">------------------------------------------------------------</div><div class=\"line\"> </div><div class=\"line\">androidTest</div><div class=\"line\">-----------</div><div class=\"line\">Compile configuration: androidTestCompile</div><div class=\"line\">build.gradle name: android.sourceSets.androidTest</div><div class=\"line\">Java sources: [app/src/androidTest/java]</div><div class=\"line\">Manifest file: app/src/androidTest/AndroidManifest.xml</div><div class=\"line\">Android resources: [app/src/androidTest/res]</div><div class=\"line\">Assets: [app/src/androidTest/assets]</div><div class=\"line\">AIDL sources: [app/src/androidTest/aidl]</div><div class=\"line\">RenderScript sources: [app/src/androidTest/rs]</div><div class=\"line\">JNI sources: [app/src/androidTest/jni]</div><div class=\"line\">JNI libraries: [app/src/androidTest/jniLibs]</div><div class=\"line\">Java-style resources: [app/src/androidTest/resources]</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x662F;androidTest&#x53D8;&#x4F53;&#x7684;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#xFF0C;&#x9996;&#x5148;&#x5B83;&#x4F1A;&#x53BB;&#x67E5;&#x627E;&#x76F8;&#x5E94;&#x7684;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x7684;&#x9ED8;&#x8BA4;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#xFF0C;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;main&#x6E90;&#x96C6;&#x4E0B;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x6089;&#x7684;app/src/main&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x8D44;&#x6E90;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x8DDF;&#x6784;&#x5EFA;&#x53D8;&#x4F53;&#x6765;&#x641C;&#x7D22;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x6709;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#xFF1A;</p>\n<ol>\n<li>src/modeApiDebug: &#x6784;&#x5EFA;&#x53D8;&#x4F53;</li>\n<li>src/debug&#xFF1A;&#x6784;&#x5EFA;&#x7C7B;&#x578B;</li>\n<li>src/modeApi&#xFF1A;&#x4EA7;&#x54C1;&#x98CE;&#x683C;</li>\n<li>src/main&#xFF1A;&#x9ED8;&#x8BA4;main&#x6E90;</li>\n</ol>\n<p>&#x5BF9;&#x4E8E;&#x6E90;&#x96C6;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x5728;app/src&#x4E0B;&#x53F3;&#x952E;&#x65B0;&#x5EFA;&#xFF0C;&#x4F46;&#x5B83;&#x53EA;&#x4F1A;&#x5E2E;&#x4F60;&#x521B;&#x5EFA;&#x6E90;&#x96C6;&#x4E0B;&#x7684;java&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x8981;&#x4F60;&#x81EA;&#x5DF1;&#x9010;&#x4E2A;&#x521B;&#x5EFA;</p>\n<p><img src=\"/2019/05/23/Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;/Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;1.png\" alt=\"\"></p>\n<p>&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;debug&#x6E90;&#x96C6;&#xFF0C;&#x6240;&#x4EE5;&#x8FDB;&#x53BB;&#x4E4B;&#x540E;Target Source Set&#x9009;&#x62E9;debug&#xFF0C;&#x518D;&#x70B9;&#x51FB;finish&#x7ED3;&#x675F;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x5C06;&#x4F1A;&#x5728;src&#x4E0B;&#x770B;&#x5230;debug&#x6587;&#x4EF6;&#x5939;</p>\n<p>&#x73B0;&#x5728;&#x4F60;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;debug&#x7684;&#x6E90;&#x96C6;&#x76EE;&#x5F55;&#xFF0C;&#x5047;&#x8BBE;&#x4F60;&#x73B0;&#x5728;&#x8981;&#x4F7F;debug&#x4E0B;&#x7684;app&#x540D;&#x79F0;&#x5C55;&#x793A;&#x6210;Android&#x7CBE;&#x534E;&#x5F55;debug(&#x9ED8;&#x8BA4;&#x662F;Android&#x7CBE;&#x534E;&#x5F55;)&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x53EF;&#x4EE5;&#x53F3;&#x952E;debug&#x65B0;&#x5EFA;values</p>\n<p><img src=\"/2019/05/23/Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;/Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;2.png\" alt=\"\"></p>\n<p>&#x5728;values&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;strings.xml&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x914D;&#x7F6E;app_name</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;resources&gt;</div><div class=\"line\">    &lt;string name=&quot;app_name&quot;&gt;Android&#x7CBE;&#x534E;&#x5F55;debug&lt;/string&gt;</div><div class=\"line\">&lt;/resources&gt;</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x4F60;&#x518D;&#x53BB;&#x6784;&#x5EFA;debug&#x76F8;&#x5173;&#x7684;&#x53D8;&#x4F53;&#x65F6;&#xFF0C;&#x4F60;&#x5B89;&#x88C5;&#x7684;app&#x5C55;&#x793A;&#x7684;&#x540D;&#x79F0;&#x5C06;&#x662F;Android&#x7CBE;&#x534E;&#x5F55;debug&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x4FEE;&#x6539;mian&#x6E90;&#x96C6;&#x6216;&#x8005;&#x914D;&#x7F6E;&#x5176;&#x5B83;&#x7684;&#x53D8;&#x4F53;&#x6E90;&#x96C6;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6839;&#x636E;&#x53D8;&#x4F53;&#x52A0;&#x8F7D;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;&#x8FD9;&#x6837;&#x7CFB;&#x7EDF;&#x5316;&#x7684;&#x914D;&#x7F6E;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#x5C06;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x9879;&#x76EE;&#x6D4B;&#x8BD5;&#x4E0E;&#x7248;&#x672C;&#x9700;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>\n<h2 id=\"dependencies\"><a href=\"#dependencies\" class=\"headerlink\" title=\"dependencies\"></a>dependencies</h2><p>dependencies&#x95ED;&#x5305;&#x4E0A;&#x7528;&#x6765;&#x914D;&#x7F6E;&#x9879;&#x76EE;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x6709;&#x8BBE;&#x7F6E;&#x53D8;&#x4F53;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C06;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x53D8;&#x4F53;&#x6765;&#x9009;&#x62E9;&#x6027;&#x7684;&#x4F9D;&#x8D56;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</div><div class=\"line\">    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version&quot;</div><div class=\"line\">    implementation &apos;com.android.support:appcompat-v7:26.1.0&apos;</div><div class=\"line\">    implementation &apos;com.android.support.constraint:constraint-layout:1.0.2&apos;</div><div class=\"line\">    testImplementation &apos;junit:junit:4.12&apos;</div><div class=\"line\">    androidTestImplementation &apos;com.android.support.test:runner:1.0.1&apos;</div><div class=\"line\">    androidTestImplementation &apos;com.android.support.test.espresso:espresso-core:3.0.1&apos;</div><div class=\"line\">    //&#x6839;&#x636E;&#x53D8;&#x4F53;&#x9009;&#x62E9;&#x6027;&#x4F9D;&#x8D56;</div><div class=\"line\">    outerImplementation &apos;...&apos;</div><div class=\"line\">    prodMinApi21Implementation &apos;...&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5173;&#x4E8E;dependencies&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x4E4B;&#x540E;&#x6211;&#x8FD8;&#x4F1A;&#x5355;&#x72EC;&#x62BD;&#x51FA;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x6765;&#x5199;&#x7CFB;&#x7EDF;&#x5316;&#x7684;&#x914D;&#x7F6E;dependencies&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x4E0B;&#x3002;</p>\n<p>gradle&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x51B0;&#x5C71;&#x4E00;&#x89D2;&#xFF0C;&#x4F46;&#x6211;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#x6839;&#x636E;&#x4F60;&#x7684;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x53BB;&#x5B66;&#x4E60;&#x4E0E;&#x7814;&#x7A76;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x4E5F;&#x4F1A;&#x6709;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x6210;&#x957F;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x9644;&#x4E0A;&#x6E90;&#x7801;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/android-api-analysis</a></p>\n<h2 id=\"&#x7CFB;&#x5217;\"><a href=\"#&#x7CFB;&#x5217;\" class=\"headerlink\" title=\"&#x7CFB;&#x5217;\"></a>&#x7CFB;&#x5217;</h2><p><a href=\"https://www.rousetime.com/2019/05/05/Android-Gradle%E7%B3%BB%E5%88%97-%E5%85%A5%E9%97%A8%E7%AF%87/\">Android Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;</a><br><a href=\"https://www.rousetime.com/2019/05/13/Android-Gradle%E7%B3%BB%E5%88%97-%E5%8E%9F%E7%90%86%E7%AF%87/\">Android Gradle&#x7CFB;&#x5217;-&#x539F;&#x7406;&#x7BC7;</a></p>\n<p><img src=\"/2019/05/23/Gradle&#x7CFB;&#x5217;-&#x8FD0;&#x7528;&#x7BC7;/Android&#x8865;&#x7ED9;&#x7AD9;.jpg\" alt=\"\"></p>\n"},{"title":"Android Gradle系列-原理篇","url":"https://www.rousetime.com/2019/05/13/Android-Gradle系列-原理篇/","content":"<p>&#x4E0A;&#x5468;&#x6211;&#x4EEC;&#x5728;<a href=\"https://www.rousetime.com/2019/05/05/Android-Gradle%E7%B3%BB%E5%88%97-%E5%85%A5%E9%97%A8%E7%AF%87/\">Android Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;</a>&#x6587;&#x7AE0;&#x4E2D;&#x5DF2;&#x7ECF;&#x5C06;gradle&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x7ED3;&#x6784;&#x8FC7;&#x4E86;&#x4E00;&#x904D;&#x3002;&#x5BF9;&#x4E8E;gradle&#xFF0C;&#x6211;&#x4EEC;&#x8BB8;&#x591A;&#x65F6;&#x5019;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x7C7B;&#x4F3C;&#x4E0E;*.gradle&#x6587;&#x4EF6;&#xFF0C;&#x505A;&#x7684;&#x6700;&#x591A;&#x7684;&#x5E94;&#x8BE5;&#x662F;&#x5728;dependencies&#x4E2D;&#x6DFB;&#x52A0;&#x7B2C;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x4FEE;&#x6539;sdk&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x4EA6;&#x6216;&#x8005;&#x6BCF;&#x6B21;&#x53D1;&#x7248;&#x672C;&#x6539;&#x4E0B;versionCode&#x4E0E;versionName&#x3002;&#x5373;&#x4F7F;&#x78B0;&#x5230;&#x95EE;&#x9898;&#x4E5F;&#x662F;&#x76F4;&#x63A5;&#x4E0A;google&#x5BFB;&#x627E;&#x7B54;&#x6848;&#xFF0C;&#x800C;&#x5E76;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x7406;&#x89E3;&#x5B83;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x6216;&#x8005;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x7684;&#xFF1F;</p>\n<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4F1A;&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x7684;&#x7F16;&#x5199;gradle&#x6587;&#x4EF6;&#xFF0C;&#x4ECE;&#x9879;&#x76EE;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x5230;gradle&#x7684;&#x914D;&#x7F6E;&#x3002;&#x76F8;&#x4FE1;&#x6709;&#x4E86;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x4F60;&#x5C06;&#x5BF9;gradle&#x7684;&#x5185;&#x90E8;&#x8FD0;&#x884C;&#x5C06;&#x6709;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x8BA4;&#x8BC6;&#x3002;</p>\n<h2 id=\"Groovy\"><a href=\"#Groovy\" class=\"headerlink\" title=\"Groovy\"></a>Groovy</h2><p>&#x5728;&#x8BB2;gradle&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x660E;&#x767D;&#x4E00;&#x70B9;&#xFF0C;gradle&#x8BED;&#x6CD5;&#x662F;&#x57FA;&#x4E8E;groovy&#x7684;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4E86;&#x89E3;&#x4E00;&#x4E9B;groovy&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x6211;&#x4EEC;&#x4E4B;&#x540E;&#x7684;&#x7406;&#x89E3;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x6709;groovy&#x7684;&#x57FA;&#x7840;&#x4F60;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x4E5F;&#x4E0D;&#x7528;&#x614C;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x8981;&#x4F60;&#x61C2;java&#x5C31;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x96BE;&#x9898;&#x3002;</p>\n<h3 id=\"syntax\"><a href=\"#syntax\" class=\"headerlink\" title=\"syntax\"></a>syntax</h3><p>&#x4E0B;&#x9762;&#x6211;&#x5C06;&#x901A;&#x8FC7;code&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5217;&#x51FA;&#x51E0;&#x70B9;</p>\n<ul>\n<li>&#x5F53;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;()&#xFF0C;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">def printAge(String name, int age) {</div><div class=\"line\">\tprint(&quot;$name is $age years old&quot;)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">def printEmptyLine() {</div><div class=\"line\">\tprintln()</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">def callClosure(Closure closure) {</div><div class=\"line\">\tclosure()</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">printAge &quot;John&quot;, 24 //&#x8F93;&#x51FA;John is 24 years old</div><div class=\"line\">printEmptyLine() //&#x8F93;&#x51FA;&#x7A7A;&#x884C;</div><div class=\"line\">callClosure { println(&quot;From closure&quot;) } //&#x8F93;&#x51FA;From closure</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x5982;&#x679C;&#x6700;&#x540E;&#x7684;&#x53C2;&#x6570;&#x662F;&#x95ED;&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x5199;&#x5728;&#x62EC;&#x53F7;&#x7684;&#x5916;&#x9762;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">def callWithParam(String param, Closure&lt;String&gt; closure) {</div><div class=\"line\">\tclosure(param)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">callWithParam(&quot;param&quot;, { println it }) //&#x8F93;&#x51FA;param</div><div class=\"line\">callWithParam(&quot;param&quot;) { println it } //&#x8F93;&#x51FA;param</div><div class=\"line\">callWithParam &quot;param&quot;, { println it } //&#x8F93;&#x51FA;param</div></pre></td></tr></table></figure>\n<ul>\n<li>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x65F6;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x540D;&#x8FDB;&#x884C;&#x4F20;&#x53C2;&#xFF0C;&#x6709;&#x6307;&#x5B9A;&#x7684;&#x4F1A;&#x8F6C;&#x5316;&#x5230;Map&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x5C06;&#x6309;&#x6B63;&#x5E38;&#x4F20;&#x53C2;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">def printPersonInfo(Map&lt;String, Object&gt; person) {</div><div class=\"line\">\tprintln(&quot;${person.name} is ${person.age} years old&quot;)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">def printJobInfo(Map&lt;String, Object&gt; job, String employeeName) {</div><div class=\"line\">\tprintln(&quot;${employeeName} works as ${job.name} at ${job.company}&quot;)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">printPersonInfo name: &quot;Jake&quot;, age: 29</div><div class=\"line\">printJobInfo &quot;Payne&quot;, name: &quot;Android Engineer&quot;, company: &quot;Google&quot;</div></pre></td></tr></table></figure>\n<p>&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x8C03;&#x7528;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x62EC;&#x53F7;&#xFF0C;&#x540C;&#x65F6;printJobInfo&#x7684;&#x8C03;&#x7528;&#x53C2;&#x6570;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;</p>\n<h3 id=\"Closure\"><a href=\"#Closure\" class=\"headerlink\" title=\"Closure\"></a>Closure</h3><p>&#x5728;gradle&#x4E2D;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x8BB8;&#x591A;&#x95ED;&#x5305;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;<a href=\"http://groovy-lang.org/closures.html\" target=\"_blank\" rel=\"external\">&#x95ED;&#x5305;</a>&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x4E86;&#x89E3;&#x3002;&#x5982;&#x679C;&#x4F60;&#x719F;&#x6089;kotlin&#xFF0C;&#x5B83;&#x4E0E;<a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" target=\"_blank\" rel=\"external\">Function literals with receiver</a>&#x7C7B;&#x4F3C;&#x3002;</p>\n<p>&#x5728;groovy&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;Closures&#x5F53;&#x505A;&#x6210;lambdas&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5F53;&#x505A;&#x4EE3;&#x7801;&#x5757;&#x6267;&#x884C;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x4F46;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x5176;&#x81EA;&#x8EAB;&#x7684;&#x4EE3;&#x7406;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">class DelegateOne {</div><div class=\"line\">\tdef callContent(String content) {</div><div class=\"line\">\t\tprintln &quot;From delegateOne: $content&quot;</div><div class=\"line\">\t}</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">class DelegateTow {</div><div class=\"line\">\tdef callContent(String content) {</div><div class=\"line\">\t\tprintln &quot;From delegateTwo: $content&quot;</div><div class=\"line\">\t}</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">def callClosure = {</div><div class=\"line\">\tcallContent &quot;I am bird&quot;</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">callClosure.delegate = new DelegateOne()</div><div class=\"line\">callClosure() //&#x8F93;&#x51FA;From delegateOne: I am bird</div><div class=\"line\">callClosure.delegate = new DelegateTow()</div><div class=\"line\">callClosure() //&#x8F93;&#x51FA;From delegateTow: I am bird</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x6539;&#x53D8;callClosure&#x7684;delegate&#xFF0C;&#x8BA9;&#x5176;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x7684;callContent&#x3002;<br>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x9605;&#x8BFB;groovy<a href=\"http://groovy-lang.org/closures.html#_delegation_strategy\" target=\"_blank\" rel=\"external\">&#x6587;&#x6863;</a></p>\n<h2 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h2><p>&#x5728;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x6709;&#x5173;gradle&#x7684;&#x811A;&#x6B65;&#x76F8;&#x5173;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x518D;&#x7D2F;&#x8D58;&#x3002;<br>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x6784;&#x5EFA;gradle&#x3002;</p>\n<h3 id=\"&#x642D;&#x5EFA;&#x9879;&#x76EE;&#x5C42;&#x7EA7;\"><a href=\"#&#x642D;&#x5EFA;&#x9879;&#x76EE;&#x5C42;&#x7EA7;\" class=\"headerlink\" title=\"&#x642D;&#x5EFA;&#x9879;&#x76EE;&#x5C42;&#x7EA7;\"></a>&#x642D;&#x5EFA;&#x9879;&#x76EE;&#x5C42;&#x7EA7;</h3><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;example&#xFF0C;cd&#x8FDB;&#x5165;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5728;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;gradle projects&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5DF2;&#x7ECF;&#x662F;&#x4E00;&#x4E2A;gradle&#x9879;&#x76EE;&#x4E86;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ gradle projects</div><div class=\"line\">&gt; Task :projects</div><div class=\"line\"> </div><div class=\"line\">------------------------------------------------------------</div><div class=\"line\">Root project</div><div class=\"line\">------------------------------------------------------------</div><div class=\"line\"> </div><div class=\"line\">Root project &apos;example&apos;</div><div class=\"line\">No sub-projects</div><div class=\"line\"> </div><div class=\"line\">To see a list of the tasks of a project, run gradle &lt;project-path&gt;:tasks</div><div class=\"line\">For example, try running gradle :tasks</div><div class=\"line\"> </div><div class=\"line\">BUILD SUCCESSFUL in 5s</div></pre></td></tr></table></figure>\n<p>&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x4E0D;&#x662F;&#x5728;Android Studio&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x672C;&#x5730;&#x6CA1;&#x6709;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;gradle&#x73AF;&#x5883;&#xFF0C;&#x5C06;&#x4E0D;&#x4F1A;&#x6709;gradle&#x547D;&#x4EE4;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x4E00;&#x70B9;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#x3002;</p>\n<p>&#x6BCF;&#x4E00;&#x4E2A;android&#x9879;&#x76EE;&#x5728;&#x5B83;&#x7684;root project&#x4E0B;&#x90FD;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;settings.gradle&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7740;&#x9879;&#x76EE;&#x7684;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x3002;&#x540C;&#x65F6;&#x4F7F;&#x7528;void include(String[] projectPaths)&#x65B9;&#x6CD5;&#x6765;&#x6DFB;&#x52A0;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x4E3A;example&#x6DFB;&#x52A0;app&#x5B50;&#x9879;&#x76EE;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ echo &quot;include &apos;:app&apos;&quot; &gt; settings.gradle</div><div class=\"line\">$ gradle projects</div><div class=\"line\">&gt; Task :projects</div><div class=\"line\"> </div><div class=\"line\">------------------------------------------------------------</div><div class=\"line\">Root project</div><div class=\"line\">------------------------------------------------------------</div><div class=\"line\"> </div><div class=\"line\">Root project &apos;example&apos;</div><div class=\"line\">\\--- Project &apos;:app&apos;</div><div class=\"line\"> </div><div class=\"line\">To see a list of the tasks of a project, run gradle &lt;project-path&gt;:tasks</div><div class=\"line\">For example, try running gradle :app:tasks</div><div class=\"line\"> </div><div class=\"line\">BUILD SUCCESSFUL in 1s</div><div class=\"line\">1 actionable task: 1 executed</div></pre></td></tr></table></figure>\n<p>:app&#x4E2D;&#x7684;:&#x4EE3;&#x8868;&#x7684;&#x662F;&#x8DEF;&#x5F84;&#x7684;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x540C;&#x65F6;&#x5728;settings.gradle&#x4E2D;&#x9ED8;&#x8BA4;root project&#x662F;&#x8BE5;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x540D;&#x79F0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;rootProject.name = name&#x6765;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;</p>\n<h3 id=\"&#x642D;&#x5EFA;Android&#x5B50;&#x9879;&#x76EE;\"><a href=\"#&#x642D;&#x5EFA;Android&#x5B50;&#x9879;&#x76EE;\" class=\"headerlink\" title=\"&#x642D;&#x5EFA;Android&#x5B50;&#x9879;&#x76EE;\"></a>&#x642D;&#x5EFA;Android&#x5B50;&#x9879;&#x76EE;</h3><p>&#x73B0;&#x5728;&#x9700;&#x8981;&#x505A;&#x7684;&#x662F;&#x5C06;&#x5B50;&#x9879;&#x76EE;app&#x6784;&#x5EFA;&#x6210;Android&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x914D;&#x7F6E;app&#x7684;build.gradle&#x3002;&#x56E0;&#x4E3A;gradle&#x53EA;&#x662F;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x662F;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x63D2;&#x4EF6;&#x6765;&#x6784;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x7B26;&#x5408;Android&#x7684;&#x6784;&#x5EFA;&#xFF0C;&#x9700;&#x8981;&#x7533;&#x660E;&#x5E94;&#x7528;&#x7684;&#x63D2;&#x4EF6;&#x3002;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;apply&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#x7C7B;&#x578B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">void apply(Closure closure)</div><div class=\"line\">void apply(Map&lt;String, ?&gt; options)</div><div class=\"line\">void apply(Action&lt;? super ObjectConfigurationAction&gt; action)</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x7B2C;&#x4E8C;&#x79CD;&#xFF0C;&#x5B83;&#x7684;map&#x53C2;&#x6570;&#x9700;&#x8981;&#x4E0E;ObjectConfigurationAction&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x76F8;&#x5339;&#x914D;&#xFF0C;&#x800C;&#x5B83;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;</p>\n<ul>\n<li>from: &#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x6587;&#x4EF6;</li>\n<li>plugin: &#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;id&#x6216;&#x8005;class&#x540D;</li>\n<li>to: &#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</li>\n</ul>\n<p>&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8981;&#x4F7F;&#x7528;android&#x63D2;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4F7F;&#x7528;apply(plugin: &#x2018;com.android.application&#x2019;)&#xFF0C;&#x53C8;&#x7531;&#x4E8E;groovy&#x7684;&#x8BED;&#x6CD5;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x62EC;&#x53F7;&#x7701;&#x7565;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x5728;build.gradle&#x4E2D;&#x7684;&#x8868;&#x73B0;&#x53EF;&#x4EE5;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ echo &quot;apply plugin: &apos;com.android.application&apos;&quot; &gt; app/build.gradle</div></pre></td></tr></table></figure>\n<p>&#x6DFB;&#x52A0;&#x5B8C;&#x4EE5;&#x540E;&#xFF0C;&#x518D;&#x6765;&#x6267;&#x884C;&#x4E00;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ gradle app:tasks</div><div class=\"line\"></div><div class=\"line\">FAILURE: Build failed with an exception.</div><div class=\"line\"> </div><div class=\"line\">* Where:</div><div class=\"line\">Build file &apos;/Users/idisfkj/example/app/build.gradle&apos; line: 1</div><div class=\"line\"> </div><div class=\"line\">* What went wrong:</div><div class=\"line\">A problem occurred evaluating project &apos;:app&apos;.</div><div class=\"line\">&gt; Plugin with id &apos;com.android.application&apos; not found.</div><div class=\"line\"> </div><div class=\"line\">* Try:</div><div class=\"line\">Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</div><div class=\"line\"> </div><div class=\"line\">* Get more help at https://help.gradle.org</div><div class=\"line\"> </div><div class=\"line\">BUILD FAILED in 6s</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x663E;&#x793A;com.android.application&#x7684;&#x63D2;&#x4EF6;id&#x627E;&#x4E0D;&#x5230;&#x3002;&#x8FD9;&#x6B63;&#x5E38;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8FD8;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x5B83;&#x3002;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x5728;project&#x4E0B;&#x7684;build.gradle&#x4E2D;&#x58F0;&#x660E;&#x5B83;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x76F4;&#x63A5;&#x5230;app&#x4E0B;&#x7684;build.gradle&#x58F0;&#x660E;&#x5462;&#xFF1F;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x662F;android&#x9879;&#x76EE;&#xFF0C;project&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;sub-project&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5728;&#x5B50;&#x9879;&#x76EE;&#x4E2D;&#x91CD;&#x590D;&#x58F0;&#x660E;&#xFF0C;&#x7EDF;&#x4E00;&#x5230;&#x4E3B;&#x9879;&#x76EE;&#x4E2D;&#x58F0;&#x660E;&#x3002;</p>\n<p>project&#x7684;build.gradle&#x58F0;&#x660E;&#x63D2;&#x4EF6;&#x9700;&#x8981;&#x5728;buildscript&#x4E2D;&#xFF0C;&#x800C;buildscript&#x4F1A;&#x901A;&#x8FC7;ScriptHandler&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;sub-project&#x4E5F;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x7533;&#x660E;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        google()</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    dependencies {</div><div class=\"line\">        classpath &apos;com.android.tools.build:gradle:3.3.2&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x7684;buildscript&#x3001;repositories&#x4E0E;dependencies&#x65B9;&#x6CD5;&#x90FD;&#x662F;&#x4EE5;Closure&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x901A;&#x8FC7;delegate&#x8FDB;&#x884C;&#x8C03;&#x7528;</p>\n<ul>\n<li>buildscript(Closure)&#x5728;Project&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x901A;&#x8FC7;ScriptHandler&#x6765;&#x6267;&#x884C;Closure</li>\n<li>repositories(Closure)&#x5728;ScriptHandler&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x901A;&#x8FC7;RepositoryHandler&#x6765;&#x6267;&#x884C;Closure</li>\n<li>dependencies(Closure)&#x5728;ScriptHandler&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x901A;&#x8FC7;DependencyHandler&#x6765;&#x6267;&#x884C;Closure</li>\n</ul>\n<p>&#x76F8;&#x5E94;&#x7684;google()&#x4E0E;jcenter()&#x4F1A;&#x5728;RepositoryHandler&#x6267;&#x884C;&#xFF0C;classpaht(String)&#x4F1A;&#x5728;DependencyHandler(*)&#x6267;&#x884C;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x4E86;&#x89E3;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:buildscript%28groovy.lang.Closure%29\" target=\"_blank\" rel=\"external\">&#x6587;&#x6863;</a></p>\n<p>&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x4E00;&#x6B21;&#x6267;&#x884C;gradle projects</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ gradle projects</div><div class=\"line\"></div><div class=\"line\">FAILURE: Build failed with an exception.</div><div class=\"line\"> </div><div class=\"line\">* What went wrong:</div><div class=\"line\">A problem occurred configuring project &apos;:app&apos;.</div><div class=\"line\">&gt; compileSdkVersion is not specified.</div><div class=\"line\"> </div><div class=\"line\">* Try:</div><div class=\"line\">Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</div><div class=\"line\"> </div><div class=\"line\">* Get more help at https://help.gradle.org</div><div class=\"line\"> </div><div class=\"line\">BUILD FAILED in 1s</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x62A5;&#x6CA1;&#x6709;&#x6307;&#x5B9A;compileSdkVersion&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x8FD8;&#x6CA1;&#x6709;&#x5BF9;app&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53EA;&#x662F;&#x5F15;&#x7528;&#x4E86;android&#x63D2;&#x4EF6;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6765;&#x8FDB;&#x884C;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#xFF0C;&#x5728;app/build.gradle&#x4E2D;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">android {</div><div class=\"line\">   buildToolsVersion &quot;28.0.1&quot;</div><div class=\"line\">   compileSdkVersion 28</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x5728;android&#x4E2D;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#xFF0C;android&#x65B9;&#x6CD5;&#x4F1A;&#x52A0;&#x5165;&#x5230;project&#x5B9E;&#x4F8B;&#x4E2D;&#x3002;buildToolsVersion&#x4E0E;compileSdkVersion&#x5C06;&#x901A;&#x8FC7;Closure&#x5BF9;&#x8C61;&#x8FDB;&#x884C;delegate&#x3002;</p>\n<h3 id=\"Extensions\"><a href=\"#Extensions\" class=\"headerlink\" title=\"Extensions\"></a>Extensions</h3><p>android&#x65B9;&#x6CD5;&#x4F1A;&#x662F;&#x5982;&#x4F55;&#x4E0E;project&#x8FDB;&#x884C;&#x5173;&#x8054;&#x7684;&#xFF1F;&#x5728;&#x6211;&#x4EEC;&#x58F0;&#x660E;&#x7684;Android&#x63D2;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F1A;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;AppExtension&#x7C7B;&#xFF0C;&#x8FD9;&#x4E2A;extension&#x5C06;&#x4F1A;&#x4E0E;android&#x547D;&#x540D;&#x3002;&#x6240;&#x4EE5;gradle&#x80FD;&#x591F;&#x8C03;&#x7528;android&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x5728;<a href=\"https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.AppExtension.html\" target=\"_blank\" rel=\"external\">AppExtension</a>&#x4E2D;&#x5DF2;&#x7ECF;&#x58F0;&#x660E;&#x4E86;&#x5404;&#x79CD;&#x65B9;&#x6CD5;&#x5C5E;&#x6027;&#xFF0C;&#x4F8B;&#x5982;buildTypes&#x3001;defaultConfig&#x4E0E;signingConfigs&#x7B49;&#x3002;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5728;android&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x539F;&#x56E0;&#x3002;&#x4E0B;&#x9762;&#x662F;extension&#x7684;&#x521B;&#x5EFA;&#x90E8;&#x5206;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"> @Override</div><div class=\"line\"> void apply(Project project) {</div><div class=\"line\">     super.apply(project)</div><div class=\"line\">     // This is for testing.</div><div class=\"line\">     if (pluginHolder != null) {</div><div class=\"line\">         pluginHolder.plugin = this;</div><div class=\"line\">     }</div><div class=\"line\">     def buildTypeContainer = project.container(DefaultBuildType,</div><div class=\"line\">             new BuildTypeFactory(instantiator,  project.fileResolver))</div><div class=\"line\">     def productFlavorContainer = project.container(GroupableProductFlavorDsl,</div><div class=\"line\">             new GroupableProductFlavorFactory(instantiator, project.fileResolver))</div><div class=\"line\">     def signingConfigContainer = project.container(SigningConfig,</div><div class=\"line\">             new SigningConfigFactory(instantiator))</div><div class=\"line\">     extension = project.extensions.create(&apos;android&apos;, AppExtension,</div><div class=\"line\">             this, (ProjectInternal) project, instantiator,</div><div class=\"line\">             buildTypeContainer, productFlavorContainer, signingConfigContainer)</div><div class=\"line\">     setBaseExtension(extension)</div><div class=\"line\">     ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"Dependencies\"><a href=\"#Dependencies\" class=\"headerlink\" title=\"Dependencies\"></a>Dependencies</h3><p>android&#x65B9;&#x6CD5;&#x4E0B;&#x9762;&#x5C31;&#x662F;dependencies&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;dependencies</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    implementation &apos;io.reactivex.rxjava2:rxjava:2.0.4&apos;</div><div class=\"line\">    testImplementation &apos;junit:junit:4.12&apos;</div><div class=\"line\">    annotationProcessor &apos;org.parceler:parceler:1.1.6&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5E94;&#x8BE5;&#x4F1A;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;dependencies&#x662F;&#x4F1A;&#x88AB;delegate&#x7ED9;DependencyHandler&#xFF0C;&#x4E0D;&#x8FC7;&#x5982;&#x679C;&#x4F60;&#x5230;<a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html#N162FA\" target=\"_blank\" rel=\"external\">DependencyHandler</a>&#x4E2D;&#x53BB;&#x67E5;&#x627E;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x627E;&#x4E0D;&#x5230;&#x4E0A;&#x9762;&#x7684;implementation&#x3001;testImplementation&#x7B49;&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x5B83;&#x4EEC;&#x6709;&#x5230;&#x5E95;&#x662F;&#x600E;&#x4E48;&#x6765;&#x7684;&#x5462;&#xFF1F;&#x4EA6;&#x6216;&#x8005;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;dev flavor&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x53C8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;devImplementation&#x3002;&#x8FD9;&#x91CC;&#x5C31;&#x6D89;&#x53CA;&#x5230;&#x4E86;groovy&#x7684;<a href=\"http://www.groovy-lang.org/metaprogramming.html#_methodmissing\" target=\"_blank\" rel=\"external\">methodMissing</a>&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x80FD;&#x591F;&#x5728;runtime(*)&#x4E2D;&#x6355;&#x83B7;&#x5230;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x81F3;&#x4E8E;(*)&#x662F;gradle&#x7684;methodMissing&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x611F;&#x5FF5;&#xFF0C;&#x5B83;&#x7533;&#x660E;&#x5728;MethodMixIn&#x4E2D;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;DependencyHandler&#x7684;&#x5B9E;&#x73B0;&#x89C4;&#x5219;&#x662F;&#xFF1A;<br>&#x5728;DependencyHandler&#x4E2D;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x56DE;&#x8C03;&#x4E86;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4E14;&#x5B83;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x53C2;&#x6570;&#xFF1B;&#x540C;&#x65F6;&#x5B83;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x5728;configuration(*)&#x4E2D;&#xFF1B;&#x90A3;&#x4E48;&#x5C06;&#x4F1A;&#x6839;&#x636E;&#x65B9;&#x6CD5;&#x540D;&#x4E0E;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x6765;&#x8C03;&#x7528;doAdd&#x7684;&#x76F8;&#x5E94;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;configuration(*)&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;plugin&#x90FD;&#x6709;&#x4ED6;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;java&#x63D2;&#x4EF6;&#x5B9A;&#x4E49;&#x4E86;compile&#x3001;compileClassPath&#x3001;testCompile&#x7B49;&#x3002;&#x800C;&#x5BF9;&#x4E8E;Android&#x63D2;&#x4EF6;&#x5728;&#x8FD9;&#x57FA;&#x7840;&#x4E0A;&#x8FD8;&#x4F1A;&#x5B9A;&#x4E49;annotationProcessor&#xFF0C;(variant)Implementation&#x3001;(variant)TestImplementation&#x7B49;&#x3002;&#x5BF9;&#x4E8E;variant&#x5219;&#x662F;&#x57FA;&#x4E8E;&#x4F60;&#x8BBE;&#x7F6E;&#x7684;buildTypes&#x4E0E;flavors&#x3002;</p>\n<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x7531;&#x4E8E;doAdd()&#x662F;&#x79C1;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;add()&#x662F;&#x516C;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;dependencies&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;add</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    add(&apos;implementation&apos;, &apos;io.reactivex.rxjava2:rxjava:2.0.4&apos;)</div><div class=\"line\">    add(&apos;testImplementation&apos;, &apos;junit:junit:4.12&apos;)</div><div class=\"line\">    add(&apos;annotationProcessor&apos;, &apos;org.parceler:parceler:1.1.6&apos;)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#x5E76;&#x4E0D;&#x63A8;&#x8350;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x7406;&#x89E3;&#x5B83;&#x7684;&#x539F;&#x7406;&#x3002;</p>\n<p>gradle&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x5BF9;&#x6709;&#x5173;Android&#x7684;&#x4E00;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x8FDB;&#x884C;gradle&#x914D;&#x7F6E;&#x7684;&#x65F6;&#xFF0C;&#x4E0D;&#x81F3;&#x4E8E;&#x5BF9;gradle&#x7684;&#x8BED;&#x6CD5;&#x611F;&#x5230;&#x9B54;&#x5E7B;&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x611F;&#x5230;&#x4E0D;&#x89E3;&#x3002;</p>\n<p>&#x6211;&#x5728;github&#x4E0A;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x4ED3;&#x5E93;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Android&#x7CBE;&#x534E;&#x5F55;</a>&#xFF0C;&#x6536;&#x96C6;Android&#x76F8;&#x5173;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x9700;&#x8981;&#x7684;&#x53EF;&#x4EE5;&#x53BB;&#x770B;&#x4E00;&#x4E0B;&#xFF0C;&#x6709;&#x597D;&#x7684;&#x6587;&#x7AE0;&#x53EF;&#x4EE5;&#x52A0;&#x6211;&#x5FAE;&#x4FE1;fan331100&#x63A8;&#x8350;&#x7ED9;&#x6211;&#x3002;</p>\n<p><img src=\"/2019/05/13/Android-Gradle&#x7CFB;&#x5217;-&#x539F;&#x7406;&#x7BC7;/Android&#x8865;&#x7ED9;&#x7AD9;.jpg\" alt=\"Android&#x8865;&#x7ED9;&#x7AD9;\"></p>\n"},{"title":"Gson与List<T>对象间的相亲之旅","url":"https://www.rousetime.com/2019/05/08/Gson与List-T-对象间的相亲之旅/","content":"<p>&#x968F;&#x7740;&#x4EBA;&#x4EEC;&#x7684;&#x751F;&#x6D3B;&#x6C34;&#x5E73;&#x7684;&#x63D0;&#x9AD8;&#xFF0C;&#x8FDE;&#x5E26;&#x7740;&#x4EBA;&#x4E0E;&#x4EBA;&#x4E4B;&#x95F4;&#x7684;&#x76F8;&#x4EB2;&#x6E20;&#x9053;&#x4E5F;&#x8FDB;&#x4E00;&#x6B65;&#x6539;&#x5584;&#x3002;&#x6700;&#x8FD1;&#x5076;&#x5C14;&#x770B;&#x5230;&#x51E0;&#x6863;&#x76F8;&#x4EB2;&#x7684;&#x7EFC;&#x827A;&#x8282;&#x76EE;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x5E73;&#x6C11;&#x8FD8;&#x662F;&#x660E;&#x661F;&#x3002;&#x53EF;&#x89C1;&#x76F8;&#x4EB2;&#x7684;&#x70ED;&#x6F6E;&#x6B63;&#x6251;&#x9762;&#x800C;&#x6765;&#x3002;&#x8FD9;&#x4E0D;Google&#x4E0E;Java&#x4E24;&#x4E2A;&#x8001;&#x5BB6;&#x4F19;&#x4E5F;&#x5750;&#x4E0D;&#x4F4F;&#x4E86;&#xFF0C;&#x5206;&#x522B;&#x60F3;&#x7740;&#x81EA;&#x5DF1;&#x6392;&#x884C;285&#x7684;&#x513F;&#x5B50;Gson&#x4E0E;&#x81EA;&#x5DF1;&#x6392;&#x884C;570&#x7684;&#x5973;&#x513F;List<t>&#x4E5F;&#x8BE5;&#x5230;&#x4E86;&#x76F8;&#x4EB2;&#x7684;&#x5E74;&#x9F84;&#x4E86;&#x3002;&#x4E8E;&#x662F;Google&#x4E0E;Java&#x4E24;&#x4E2A;&#x8001;&#x6CB9;&#x6761;&#x4F1A;&#x5FC3;&#x4E00;&#x7B11;&#xFF0C;&#x4E00;&#x8D77;&#x7B56;&#x5212;&#x4E86;&#x4ECA;&#x5929;&#x7684;&#x8FD9;&#x6B21;&#x76F8;&#x4EB2;&#x4E4B;&#x65C5;&#x3002;</t></p>\n<h2 id=\"&#x5730;&#x4E0B;&#x604B;&#x60C5;\"><a href=\"#&#x5730;&#x4E0B;&#x604B;&#x60C5;\" class=\"headerlink\" title=\"&#x5730;&#x4E0B;&#x604B;&#x60C5;\"></a>&#x5730;&#x4E0B;&#x604B;&#x60C5;</h2><p>Google&#x56DE;&#x5230;&#x5BB6;&#x5C31;&#x5C06;&#x6B64;&#x4E8B;&#x544A;&#x8BC9;&#x4E86;Gson&#xFF0C;&#x901A;&#x77E5;&#x4ED6;&#x660E;&#x5929;&#x5C31;&#x53BB;Android Studio&#x5306;&#x5306;&#x90A3;&#x5E74;&#x9910;&#x5385;&#x89C1;&#x9762;&#x3002;Gson&#x6B32;&#x8A00;&#x6B32;&#x6B62;&#xFF0C;&#x597D;&#x50CF;&#x53E6;&#x6709;&#x9690;&#x60C5;&#xFF0C;&#x4F46;&#x5728;&#x7236;&#x4EB2;&#x9AD8;&#x5927;&#x8EAB;&#x8EAF;&#x4E0E;&#x51CC;&#x5389;&#x7684;&#x773C;&#x795E;&#x4E0B;&#x7B54;&#x5E94;&#x4E86;&#x4E0B;&#x6765;&#xFF0C;&#x800C;&#x4E14;&#x7236;&#x4EB2;&#x80FD;&#x591F;&#x5728;&#x8FD9;&#x4F17;&#x591A;&#x7684;&#x513F;&#x5B50;&#x4E2D;&#x60F3;&#x5230;&#x81EA;&#x5DF1;&#xFF0C;&#x4E5F;&#x4E0D;&#x5FCD;&#x5FC3;&#x62D2;&#x7EDD;&#x7236;&#x4EB2;&#x7684;&#x5584;&#x610F;&#x3002;</p>\n<p>Gson&#x56DE;&#x5230;&#x623F;&#xFF0C;&#x8EBA;&#x7740;&#x5E8A;&#x4E0A;&#xFF0C;&#x8111;&#x6D77;&#x56DE;&#x60F3;&#x8D77;&#x81EA;&#x5DF1;&#x4E0E;Java&#x6392;&#x884C;520&#x7684;&#x5973;&#x513F;Object&#x7684;&#x5730;&#x4E0B;&#x604B;&#x60C5;&#x3002;</p>\n<p>Gson&#x4E0E;Object&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x89C1;&#x9762;&#x8FD8;&#x662F;&#x88AB;&#x5B83;&#x7684;Json&#x5B57;&#x7B26;&#x4E32;&#x88C5;&#x626E;&#x6240;&#x5438;&#x5F15;&#x3002;&#x90A3;&#x4E00;&#x5929;&#x5979;&#x5B9B;&#x5982;&#x4E00;&#x6735;&#x542B;&#x82DE;&#x5F85;&#x653E;&#x7684;&#x7261;&#x4E39;&#x82B1;&#xFF0C;&#x7F8E;&#x800C;&#x4E0D;&#x5996;&#xFF0C;&#x8273;&#x800C;&#x4E0D;&#x4FD7;&#xFF0C;&#x5343;&#x5A07;&#x767E;&#x5A9A;&#xFF0C;&#x65E0;&#x4E0E;&#x4F26;&#x6BD4;&#x3002;(&#x4EE5;&#x4E0A;&#x5747;&#x4E3A;Gson&#x89C6;&#x89D2;&#xFF0C;&#x8BF7;&#x52FF;&#x8FF7;&#x604B;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;code&#x89C6;&#x89D2;)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">{</div><div class=\"line\">    &quot;marquee&quot;: {</div><div class=\"line\">        &quot;content&quot;: &quot;&#x7FE0;&#x7EFF;&#x70DF;&#x7EB1;&#x6563;&#x82B1;&#x88D9;&quot;,</div><div class=\"line\">        &quot;status&quot;: true</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E00;&#x4E0B;&#x5C31;&#x6FC0;&#x8D77;&#x4E86;Gson&#x7684;&#x6B32;&#x671B;&#xFF0C;&#x800C;&#x4E14;Gson&#x8FD8;&#x6709;&#x70B9;&#x5C0F;&#x5F97;&#x610F;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x5973;&#x5B69;&#x4ED6;&#x5DF2;&#x7ECF;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x5957;&#x5B8C;&#x6574;&#x653B;&#x7565;&#x65B9;&#x6848;&#x3002;&#x65E2;&#x7136;&#x77E5;&#x9053;&#x4E86;&#x5B83;&#x7684;Json&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FC5;&#x901F;&#x521B;&#x5EFA;&#x51FA;&#x5B83;&#x5BF9;&#x5E94;&#x7684;java&#x7C7B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class HomeMarqueeModel {</div><div class=\"line\"> </div><div class=\"line\">    private MarqueeModel marquee;</div><div class=\"line\"> </div><div class=\"line\">    public static class MarqueeModel {</div><div class=\"line\">        private String content;</div><div class=\"line\">        private boolean status;</div><div class=\"line\"> </div><div class=\"line\">        public String getContent() {</div><div class=\"line\">            return content;</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        public boolean isStatus() {</div><div class=\"line\">            return status;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public MarqueeModel getMarquee() {</div><div class=\"line\">        return marquee;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x6839;&#x636E;API&#x653B;&#x7565;&#x6CD5;&#x5219;&#x7B2C;3089&#x6761;&#xFF0C;&#x4F7F;&#x7528;fromJson&#x65B9;&#x6848;&#x8FDB;&#x884C;&#x653B;&#x7565;&#xFF0C;&#x6210;&#x529F;&#x7387;&#x9AD8;&#x8FBE;100%</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">HomeMarqueeModel model = new Gson().fromJson(jsonStr, HomeMarqueeModel.class);</div></pre></td></tr></table></figure>\n<p>&#x5C31;&#x8FD9;&#x6837;Gson&#x5B8C;&#x6210;&#x4E86;&#x5BF9;Object&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x653B;&#x7565;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x4E86;Object&#x7684;&#x597D;&#x611F;&#x3002;&#x4F46;Gson&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x4E3A;&#x4E86;&#x5B8C;&#x5168;&#x8BA9;Object&#x5BF9;&#x81EA;&#x5DF1;&#x6B7B;&#x5FC3;&#x584C;&#x5730;&#xFF0C;&#x5FC5;&#x987B;&#x5E94;&#x5BF9;Object&#x7684;&#x6240;&#x6709;Json&#x5B57;&#x7B26;&#x4E32;&#x683C;&#x5F0F;&#x3002;</p>\n<p>&#x56DE;&#x53BB;&#x4E4B;&#x540E;&#xFF0C;Gson&#x5728;Android Studio&#x5FAE;&#x4FE1;&#x5E73;&#x53F0;&#x4E0E;Java&#x4E2D;&#x7684;&#x597D;&#x54E5;&#x4EEC;&#x6CDB;&#x578B;T&#x6253;&#x63A2;Object&#x7684;&#x7279;&#x6027;&#x3002;&#x7ECF;&#x8FC7;&#x4EA4;&#x6D41;&#xFF0C;&#x53D1;&#x73B0;T&#x5B83;&#x521A;&#x597D;&#x662F;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x80FD;&#x624B;&#xFF0C;T&#x544A;&#x8BC9;Gson&#x6BCF;&#x4E00;&#x4E2A;Object&#x90FD;&#x6709;&#x5B83;&#x72EC;&#x7528;&#x7684;Class&#x5C5E;&#x6027;&#xFF0C;&#x4E3A;&#x4E86;&#x4EE3;&#x8868;&#x6240;&#x6709;&#x7684;Class&#x7C7B;&#x578B;&#xFF0C;&#x521A;&#x597D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x6CDB;&#x578B;T&#x6765;&#x8868;&#x793A;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x6709;&#x4E86;<code>Class&lt;T&gt;</code>&#x3002;</p>\n<p>&#x7B2C;&#x4E8C;&#x5929;&#xFF0C;Gson&#x4E3B;&#x52A8;&#x51FA;&#x51FB;&#x9080;&#x8BF7;Object&#x53BB;Android Studio&#x5306;&#x5306;&#x90A3;&#x5E74;&#x9910;&#x5385;&#x5403;&#x996D;&#x3002;Gson&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x5B83;&#x7684;fromJson&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x8FD9;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;&#x4E86;T&#x7684;&#x601D;&#x60F3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public &lt;T&gt; T getObjectGirl(String jsonStr, Class&lt;T&gt; tGirl) {</div><div class=\"line\">    T girl = getGson().fromJson(jsonStr, tGirl);</div><div class=\"line\">    return girl;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5C31;&#x8FD9;&#x6837;&#xFF0C;Gson&#x5B8C;&#x6210;&#x5BF9;Object&#x7684;&#x6240;&#x6709;&#x7C7B;&#x578B;&#x7684;&#x653B;&#x7565;&#xFF0C;&#x4ECE;&#x6B64;&#x4E0D;&#x518D;&#x4E3A;&#x5973;&#x53CB;&#x800C;&#x53D1;&#x6101;&#x3002;<br>&#x56DE;&#x60F3;&#x7ED3;&#x675F;&#xFF0C;&#x62C9;&#x56DE;&#x5230;&#x73B0;&#x5B9E;&#xFF0C;&#x5BF9;&#x4E8E;&#x660E;&#x5929;&#x7684;&#x76F8;&#x4EB2;&#xFF0C;Gson&#x6253;&#x7B97;&#x5148;&#x7528;&#x4E4B;&#x524D;&#x7684;&#x65B9;&#x6CD5;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x6BD5;&#x7ADF;Gson&#x7ECF;&#x8FC7;&#x524D;&#x9762;&#x7684;&#x6210;&#x529F;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x5C0F;&#x81A8;&#x80C0;&#xFF0C;</p>\n<h2 id=\"&#x521D;&#x6B21;&#x89C1;&#x9762;\"><a href=\"#&#x521D;&#x6B21;&#x89C1;&#x9762;\" class=\"headerlink\" title=\"&#x521D;&#x6B21;&#x89C1;&#x9762;\"></a>&#x521D;&#x6B21;&#x89C1;&#x9762;</h2><p>&#x65E9;&#x4E0A;9&#x70B9;&#xFF0C;Gson&#x6574;&#x88C5;&#x5F85;&#x53D1;&#xFF0C;&#x5F00;&#x7740;&#x81EA;&#x5DF1;&#x7684;&#x5170;&#x535A;&#x57FA;&#x5C3C;&#x5411;Android Studio&#x5306;&#x5306;&#x90A3;&#x5E74;&#x9910;&#x5385;&#x8FDB;&#x53D1;&#x3002;&#x5927;&#x7EA6;10&#x70B9;Gson&#x5230;&#x8FBE;&#x9910;&#x5385;&#xFF0C;&#x4E14;&#x5DF2;&#x7ECF;&#x9009;&#x597D;&#x4E86;&#x4E00;&#x5904;&#x98CE;&#x666F;&#x4F18;&#x96C5;&#x4E14;&#x9762;&#x671D;&#x5927;&#x6D77;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x9759;&#x9759;&#x7684;&#x7B49;&#x5019;List&#x7684;&#x5230;&#x6765;&#x3002;&#x534A;&#x5C0F;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x53EA;&#x89C1;&#x4E00;&#x4E2A;&#x8EAB;&#x7A7F;&#x85D5;&#x8272;&#x7EB1;&#x886B;&#x7684;&#x5973;&#x5B69;&#xFF0C;&#x8138;&#x5E26;&#x5FAE;&#x7B11;&#xFF0C;&#x8EAB;&#x5F62;&#x82D7;&#x6761;&#xFF0C;&#x957F;&#x53D1;&#x62AB;&#x5411;&#x80CC;&#x5FC3;&#xFF0C;&#x7528;&#x4E00;&#x6839;&#x94F6;&#x8272;&#x4E1D;&#x5E26;&#x8F7B;&#x8F7B;&#x633D;&#x4F4F;&#xFF0C;&#x8FCE;&#x9762;&#x800C;&#x6765;&#x3002;Gson&#x671B;&#x7740;&#x5979;&#x7684;&#x8EAB;&#x5F71;&#xFF0C;&#x53EA;&#x89C9;&#x8FD9;&#x5973;&#x5B69;&#x8EAB;&#x65C1;&#x4F3C;&#x6709;&#x70DF;&#x971E;&#x8F7B;&#x7B3C;&#xFF0C;&#x5F53;&#x771F;&#x975E;&#x5C18;&#x4E16;&#x4E2D;&#x4EBA;&#x3002;(&#x4EE5;&#x4E0A;&#x5747;&#x4E3A;Gson&#x89C6;&#x89D2;&#xFF0C;&#x8BF7;&#x52FF;&#x8FF7;&#x604B;&#x3002;&#x4EE5;&#x4E0B;&#x4E3A;code&#x89C6;&#x89D2;)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">[</div><div class=\"line\">    {</div><div class=\"line\">        &quot;title&quot;: &quot;&#x8EAB;&#x7A7F;&#x85D5;&#x8272;&#x7EB1;&#x886B;&quot;,</div><div class=\"line\">        &quot;url&quot;: &quot;http://127.0.0.1:8000/admin2/operation/banner-list/&quot;,</div><div class=\"line\">        &quot;status&quot;: true</div><div class=\"line\">    },</div><div class=\"line\">    {</div><div class=\"line\">        &quot;title&quot;: &quot;&#x957F;&#x53D1;&#x62AB;&#x5411;&#x80CC;&#x5FC3;&quot;,</div><div class=\"line\">        &quot;url&quot;: &quot;http://127.0.0.1:8000/admin2/operation/banner-list/&quot;,</div><div class=\"line\">        &quot;status&quot;: true</div><div class=\"line\">    }</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<p>&#x4E3A;&#x4E86;&#x4FDD;&#x5B88;&#x8D77;&#x89C1;&#xFF0C;Gson&#x51B3;&#x5B9A;&#x8FD8;&#x662F;&#x6309;&#x90E8;&#x5C31;&#x73ED;&#x6765;&#xFF0C;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x51FA;&#x8BE5;Json&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#x7684;java&#x7C7B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class HomeBannerModel {</div><div class=\"line\">    private String title;</div><div class=\"line\">    private String url;</div><div class=\"line\">    private boolean status;</div><div class=\"line\"> </div><div class=\"line\">    public String getTitle() {</div><div class=\"line\">        return title;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public String getUrl() {</div><div class=\"line\">        return url;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public boolean isStatus() {</div><div class=\"line\">        return status;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x4F7F;&#x7528;fromJson&#x65B9;&#x6848;&#x8FDB;&#x884C;&#x653B;&#x7565;&#xFF0C;&#x7A0D;&#x5FAE;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x8FD9;&#x91CC;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">HomeBannerModel[] array = new Gson().fromJson(jsonStr, HomeBannerModel[].class);</div><div class=\"line\">List&lt;HomeBannerModel&gt; list = Arrays.asList(array);</div></pre></td></tr></table></figure>\n<p>&#x55EF;&#xFF0C;&#x770B;&#x6837;&#x5B50;&#x6548;&#x679C;&#x4E0D;&#x9519;&#xFF0C;&#x6709;&#x8FDB;&#x4E00;&#x6B65;&#x53D1;&#x5C55;&#x7684;&#x673A;&#x4F1A;&#x3002;&#x4E8E;&#x662F;Gson&#x53C8;&#x5C55;&#x793A;&#x5B83;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x653B;&#x7565;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Type type = new TypeToken&lt;List&lt;HomeBannerModel&gt;&gt;(){}.getType();</div><div class=\"line\">List&lt;HomeBannerModel&gt; list = new Gson().fromJson(jsonStr, type);</div></pre></td></tr></table></figure>\n<p>&#x679C;&#x7136;&#xFF0C;Gson&#x518D;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x9017;&#x7B11;&#x4E86;List&#x3002;Gson&#x7684;&#x81A8;&#x80C0;&#x5FC3;&#x518D;&#x4E00;&#x6B21;&#x66B4;&#x6DA8;&#x3002;Gson&#x4E8E;&#x662F;&#x5927;&#x80C6;&#x8D77;&#x6765;&#xFF0C;&#x5957;&#x7528;&#x4E4B;&#x524D;&#x6CDB;&#x578B;T&#x7684;&#x601D;&#x60F3;&#x3002;&#x4E8E;&#x662F;&#x6709;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x7B2C;&#x4E00;&#x6B21;T&#x5C1D;&#x8BD5;</p>\n<p><img src=\"/2019/05/08/Gson&#x4E0E;List-T-&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x76F8;&#x4EB2;&#x4E4B;&#x65C5;/Gson&#x4E0E;List-T-&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x76F8;&#x4EB2;&#x4E4B;&#x65C5;1.jpg\" alt=\"\"></p>\n<p>&#x53D1;&#x73B0;&#x4E0D;&#x884C;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x6CDB;&#x578B;T&#x89E3;&#x6790;&#x3002;&#x65E2;&#x7136;&#x8FD9;&#x79CD;&#x4E0D;&#x884C;&#xFF0C;&#x8FD8;&#x5C31;&#x6362;&#x53E6;&#x4E00;&#x79CD;,&#x4E8E;&#x662F;&#x5C31;&#x6709;&#x4E86;&#x7B2C;&#x4E8C;&#x6B21;T&#x7684;&#x5C1D;&#x8BD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public &lt;T&gt; List&lt;T&gt; getListGirl(String jsonStr) {</div><div class=\"line\">      Type type = new TypeToken&lt;List&lt;T&gt;&gt;(){}.getType();</div><div class=\"line\">      List&lt;T&gt; listGirl = new Gson().fromJson(jsonStr, type);</div><div class=\"line\">      return listGirl;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x518D;&#x6765;&#x5B9E;&#x8DF5;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;&#x3002;&#x53D1;&#x73B0;&#x4F1A;&#x62A5;&#x5982;&#x4E0B;&#x5F02;&#x5E38;&#xFF0C;&#x5BFC;&#x81F4;&#x5C0F;&#x59D0;&#x59D0;&#x4E0D;&#x5F00;&#x5FC3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">java.lang.AssertionError: illegal type variable reference</div></pre></td></tr></table></figure>\n<p>&#x8BF4;&#x660E;Gson&#x89E3;&#x6790;&#x4E0D;&#x652F;&#x6301;&#x8BE5;&#x6CDB;&#x578B;T&#x4E66;&#x5199;&#xFF0C;&#x5BFC;&#x81F4;Type&#x89E3;&#x6790;&#x51FA;&#x9519;&#xFF0C;Gson&#x4E00;&#x4E0B;&#x61F5;&#x4E86;&#xFF0C;&#x90A3;&#x8BE5;&#x548B;&#x6574;&#x5462;&#xFF1F;&#x867D;&#x7136;&#x524D;&#x9762;&#x7684;&#x653B;&#x7565;&#x6709;&#x6548;&#x679C;&#xFF0C;&#x4F46;&#x6700;&#x540E;&#x7684;&#x5C1D;&#x8BD5;&#x6CA1;&#x6709;&#x6210;&#x529F;&#x3002;&#x4F46;&#x5929;&#x8272;&#x4EE5;&#x665A;&#xFF0C;&#x4ECA;&#x5929;&#x7684;&#x76F8;&#x4EB2;&#x4E5F;&#x53EA;&#x80FD;&#x5C31;&#x6B64;&#x6253;&#x4F4F;&#xFF0C;&#x6709;&#x5F85;&#x8FDB;&#x4E00;&#x6B65;&#x5546;&#x69B7;&#x3002;</p>\n<h2 id=\"&#x8BF7;&#x6559;\"><a href=\"#&#x8BF7;&#x6559;\" class=\"headerlink\" title=\"&#x8BF7;&#x6559;\"></a>&#x8BF7;&#x6559;</h2><p>&#x56DE;&#x5230;&#x5BB6;Gson&#x4E00;&#x76F4;&#x6302;&#x5FF5;&#x7740;&#x8FD9;&#x4EF6;&#x4E8B;&#xFF0C;&#x4E00;&#x7B79;&#x83AB;&#x5C55;&#x3002;Google&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x513F;&#x5B50;&#x6101;&#x7709;&#x82E6;&#x5C55;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x4E0D;&#x7ECF;&#x8BE2;&#x95EE;&#x4ECA;&#x5929;&#x7684;&#x8FDB;&#x5C55;&#x3002;&#x4E86;&#x89E3;&#x60C5;&#x51B5;&#x540E;&#xFF0C;Google&#x7ED9;Gson&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x8BF7;&#x6559;&#x4E0B;ParameterizedType&#x3002;&#x4E8E;&#x662F;Gson&#x8FEB;&#x4E0D;&#x53CA;&#x5F85;&#x7684;&#x53BB;&#x627E;ParameterizedType&#x5B66;&#x4E60;&#x4EBA;&#x751F;&#x771F;&#x8C1B;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x8BF7;&#x6559;&#xFF0C;&#x53D1;&#x73B0;ParameterizedType&#x662F;&#x7EE7;&#x627F;&#x4E8E;Type&#xFF0C;&#x81EA;&#x5DF1;&#x53E6;&#x5916;&#x63D0;&#x4F9B;&#x4E86;&#x4E09;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x4E3A;</p>\n<ol>\n<li>Type[] getActualTypeArguments() &#x8FD4;&#x56DE;&#x771F;&#x6B63;&#x6240;&#x9700;&#x7684;Type&#x7C7B;&#x578B;&#x6570;&#x7EC4;</li>\n<li>Type getRawType() &#x8FD4;&#x56DE;&#x539F;&#x59CB;&#x7684;Type&#x7C7B;&#x578B;</li>\n<li>Type getOwnerType() &#x8FD4;&#x56DE;&#x6B64;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x7C7B;&#x578B;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<code>O&lt;T&gt;.I&lt;S&gt;</code>&#x3002;&#x5982;&#x679C;&#x4E3A;&#x9876;&#x5C42;&#x7C7B;&#x578B;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;null&#x3002;</li>\n</ol>\n<p>&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x4E4B;&#x524D;&#x7684;&#x95EE;&#x9898;&#xFF0C;Gson&#x6253;&#x7B97;&#x5148;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;GirlParameterizedType&#x7C7B;&#xFF0C;&#x8BA9;&#x5B83;&#x5B9E;&#x73B0;ParameterizedType&#x63A5;&#x53E3;&#x3002;code&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static class GirlParameterizedType implements ParameterizedType {</div><div class=\"line\"> </div><div class=\"line\">    private Class aClass;</div><div class=\"line\"> </div><div class=\"line\">    GirlParameterizedType(Class aClass) {</div><div class=\"line\">        this.aClass = aClass;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @NonNull</div><div class=\"line\">    @Override</div><div class=\"line\">    public Type[] getActualTypeArguments() {</div><div class=\"line\">        return new Type[]{aClass};</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @NonNull</div><div class=\"line\">    @Override</div><div class=\"line\">    public Type getRawType() {</div><div class=\"line\">        return List.class;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public Type getOwnerType() {</div><div class=\"line\">        return null;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x627E;&#x5230;&#x95EE;&#x9898;&#x6240;&#x5728;&#xFF0C;Gson&#x8FEB;&#x4E0D;&#x53CA;&#x5F85;&#x7684;&#x9080;&#x8BF7;List&#x53BB;&#x901B;Android Studio&#x5546;&#x57CE;&#xFF0C;&#x5E0C;&#x671B;&#x660E;&#x5929;&#x80FD;&#x591F;&#x987A;&#x5229;&#x62FF;&#x4E0B;List&#x5973;&#x795E;&#x3002;</p>\n<h2 id=\"&#x518D;&#x6B21;&#x76F8;&#x89C1;\"><a href=\"#&#x518D;&#x6B21;&#x76F8;&#x89C1;\" class=\"headerlink\" title=\"&#x518D;&#x6B21;&#x76F8;&#x89C1;\"></a>&#x518D;&#x6B21;&#x76F8;&#x89C1;</h2><p>&#x5728;Android Studio&#x5546;&#x57CE;&#xFF0C;Gson&#x518D;&#x4E00;&#x6B21;&#x770B;&#x5230;&#x4E86;List&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x5979;&#x4ECA;&#x5929;&#x5DF2;&#x7ECF;&#x6362;&#x4E86;&#x4E00;&#x8EAB;&#x88C5;&#x626E;&#x3002;&#x53EA;&#x89C1;&#x5979;&#x8EAB;&#x7A7F;&#x7C89;&#x7EA2;&#x73AB;&#x7470;&#x9999;&#x7D27;&#x8EAB;&#x888D;&#x888D;&#x8896;&#x4E0A;&#x8863;&#xFF0C;&#x4E0B;&#x7F69;&#x7FE0;&#x7EFF;&#x70DF;&#x7EB1;&#x6563;&#x82B1;&#x88D9;&#xFF0C;&#x8170;&#x95F4;&#x7528;&#x91D1;&#x4E1D;&#x8F6F;&#x70DF;&#x7F57;&#x7CFB;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x5927;&#x7684;&#x8774;&#x8776;&#x7ED3;&#xFF0C;&#x9B13;&#x53D1;&#x4F4E;&#x5782;&#x659C;&#x63D2;&#x78A7;&#x7389;&#x74D2;&#x51E4;&#x9497;&#xFF0C;&#x663E;&#x7684;&#x4F53;&#x6001;&#x4FEE;&#x957F;&#x5996;&#x5996;&#x8273;&#x8273;&#x52FE;&#x4EBA;&#x9B42;&#x9B44;&#x3002;&#x4E0D;&#x8FC7;Gson&#x5DF2;&#x65E9;&#x6709;&#x51C6;&#x5907;&#xFF0C;&#x76F4;&#x63A5;&#x6B65;&#x5165;&#x4E3B;&#x9898;&#xFF0C;&#x62FF;&#x51FA;&#x6628;&#x5929;&#x51C6;&#x5907;&#x597D;&#x7684;GirlParameterizedType&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public &lt;T&gt; List&lt;T&gt; getListGirl(String jsonStr, Class&lt;T&gt; tClass) {</div><div class=\"line\">      Type type =  getGson().fromJson(response, new HttpClientParameterizedType(tClass));</div><div class=\"line\">      List&lt;T&gt; listGirl = new Gson().fromJson(jsonStr, type);</div><div class=\"line\">      return listGirl;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x662F;&#x5982;&#x6B64;&#x7684;&#x7B80;&#x5355;&#xFF0C;&#x4E00;&#x51FB;&#x5FC5;&#x4E2D;&#xFF0C;&#x76F4;&#x51FB;List&#x82B3;&#x5FC3;&#x3002;&#x4E8E;&#x662F;&#x4E00;&#x5C0F;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;Gson&#x53CC;&#x624B;&#x5DF2;&#x7ECF;&#x6302;&#x6EE1;&#x4E86;&#x5546;&#x54C1;&#xFF0C;&#x989D;&#x5934;&#x4E5F;&#x6EE1;&#x5934;&#x5927;&#x6C57;&#xFF0C;&#x4F46;List&#x8FD8;&#x6709;&#x610F;&#x672A;&#x5C3D;&#x7684;&#x6837;&#x5B50;&#xFF0C;Gson&#x4E07;&#x4E07;&#x6CA1;&#x60F3;&#x5230;&#x6700;&#x540E;&#x5C45;&#x7136;&#x8D25;&#x5728;&#x8D2D;&#x7269;&#x4E0A;&#xFF0C;&#x679C;&#x7136;&#x5E26;&#x5973;&#x5B69;&#x6765;&#x5546;&#x57CE;&#x5C31;&#x662F;&#x4E2A;&#x9519;&#x8BEF;&#x7684;&#x9009;&#x62E9;&#x2026;</p>\n<p>&#x8FD9;&#x6B21;&#x7684;&#x76F8;&#x4EB2;&#x4E5F;&#x7B97;&#x5B8C;&#x7F8E;&#x7ED3;&#x675F;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;Gson&#x5FC3;&#x4E2D;&#x53C8;&#x6709;&#x4E86;&#x5FC3;&#x7684;&#x7591;&#x8651;&#xFF0C;&#x5BF9;&#x4E8E;Object&#x4E0E;List&#x90FD;&#x662F;&#x767E;&#x5E74;&#x96BE;&#x9047;&#x7684;&#x5973;&#x5B69;&#xFF0C;&#x8BE5;&#x5982;&#x4F55;&#x6289;&#x62E9;&#x5462;&#xFF1F;&#x8981;&#x4E0D;&#x5404;&#x4F4D;&#x770B;&#x5B98;&#x8FD9;&#x4E2A;&#x6289;&#x62E9;&#x5C31;&#x4EA4;&#x7ED9;&#x4F60;&#x4EEC;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x4EEC;&#x4F1A;&#x505A;&#x51FA;&#x6B63;&#x786E;&#x7684;&#x6289;&#x62E9;&#x7684;&#xFF0C;&#x6BD5;&#x7ADF;&#x5927;&#x5BB6;&#x90FD;&#x4E0D;&#x60F3;&#x5728;code&#x7684;&#x4EBA;&#x751F;&#x4E2D;&#x7559;&#x4E0B;&#x4E00;&#x4E1D;bug&#x7684;&#x8EAB;&#x5F71;&#x3002;</p>\n<p>&#x6700;&#x540E;&#xFF0C;&#x4E0D;&#x77E5;&#x5927;&#x5BB6;&#x770B;&#x7684;&#x611F;&#x53D7;&#x5982;&#x4F55;&#xFF0C;&#x6709;&#x4EC0;&#x4E48;&#x611F;&#x53D7;&#x4E5F;&#x53EF;&#x4EE5;&#x53CD;&#x9988;&#x7ED9;&#x6211;&#x3002;&#x5982;&#x679C;&#x559C;&#x6B22;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#xFF1A;Android&#x8865;&#x7ED9;&#x7AD9;&#xFF0C;&#x4EE5;&#x4FBF;&#x53CA;&#x65F6;&#x63A8;&#x9001;&#x6700;&#x65B0;&#x6587;&#x7AE0;&#x7ED9;&#x4F60;&#x54DF;~</p>\n<p><img src=\"/2019/05/08/Gson&#x4E0E;List-T-&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x76F8;&#x4EB2;&#x4E4B;&#x65C5;/Android&#x8865;&#x7ED9;&#x7AD9;.jpg\" alt=\"\"></p>\n"},{"title":"Android Gradle系列-入门篇","url":"https://www.rousetime.com/2019/05/05/Android-Gradle系列-入门篇/","content":"<p>&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4F1A;&#x5BF9;Android Gradle&#x7684;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x8FDB;&#x884C;&#x68B3;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x501F;&#x6B64;&#x6574;&#x7406;&#x6210;&#x4E00;&#x4E2A;&#x7CFB;&#x5217;&#x3002;&#x5982;&#x679C;&#x4F60;&#x662F;&#x521A;&#x5165;&#x884C;&#x7684;&#x65B0;&#x79C0;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x5C06;&#x4F1A;&#x975E;&#x5E38;&#x9002;&#x5408;&#x4F60;&#xFF0C;&#x56E0;&#x4E3A;Android&#x57FA;&#x672C;&#x7684;&#x914D;&#x7F6E;&#x90FD;&#x4E0E;Gradle&#x6709;&#x5173;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x5165;&#x884C;&#xFF0C;&#x4F46;&#x5BF9;Gradle&#x8FD8;&#x662F;&#x505C;&#x7559;&#x5728;&#x8868;&#x9762;&#x7684;&#x8BA4;&#x77E5;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x4E5F;&#x4F1A;&#x5BF9;&#x4F60;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</p>\n<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5B9A;&#x4E49;&#x4E3A;&#x5165;&#x95E8;&#x7BC7;&#xFF0C;&#x5C06;&#x7ED3;&#x5408;&#x81EA;&#x5DF1;&#x521A;&#x5F00;&#x59CB;&#x5B66;&#x4E60;Android&#x65F6;&#x7684;&#x7591;&#x60D1;&#x4E0E;&#x73B0;&#x5728;&#x5BF9;Gradle&#x7684;&#x8BA4;&#x8BC6;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x6574;&#x7406;Gradle&#x5728;Android&#x4E2D;&#x7684;&#x6574;&#x4F53;&#x7ED3;&#x6784;&#x3002;</p>\n<h2 id=\"&#x601D;&#x8003;\"><a href=\"#&#x601D;&#x8003;\" class=\"headerlink\" title=\"&#x601D;&#x8003;\"></a>&#x601D;&#x8003;</h2><p>&#x5F53;&#x6211;&#x4F7F;&#x7528;Android Studio&#x65F6;&#xFF0C;&#x4E00;&#x76F4;&#x6709;&#x51E0;&#x4E2A;&#x7591;&#x95EE;&#x56F4;&#x7ED5;&#x7740;&#x6211;&#xFF1A;</p>\n<ol>\n<li>Android Studio&#x662F;&#x600E;&#x6837;&#x5C06;Java&#x4E0E;Kotlin&#x4EE3;&#x7801;&#x7684;&#x7F16;&#x8BD1;&#x6210;APK&#x6587;&#x4EF6;&#xFF1F;</li>\n<li>Gradle&#x662F;&#x600E;&#x6837;&#x5C06;Java&#x4E0E;Kotlin&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;APK&#x6587;&#x4EF6;&#xFF1F;</li>\n</ol>\n<p>&#x540E;&#x6765;&#x77E5;&#x9053;Android Studio&#x81EA;&#x8EAB;&#x662F;&#x4E0D;&#x80FD;&#x591F;&#x7F16;&#x8BD1;&#x6210;APK&#x7684;&#xFF0C;&#x5B83;&#x662F;&#x96C6;&#x6210;&#x4E86;Gradle&#x3002;&#x901A;&#x8FC7;&#x7814;&#x7A76;Gradle&#xFF0C;&#x53D1;&#x73B0;Gradle&#x4E5F;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;&#x771F;&#x6B63;&#x7F16;&#x8BD1;&#x6210;APK&#x7684;&#x529F;&#x80FD;&#x662F;&#x7531;Android app plugins&#x63D0;&#x4F9B;&#x7684;&#x3002;Gradle&#x53EA;&#x662F;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF0C;&#x63D0;&#x4F9B;&#x6784;&#x5EFA;&#x65F6;&#x7684;&#x5404;&#x79CD;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;building&#x3001;testing&#x3001;publishing&#x7B49;&#x3002;&#x6240;&#x4EE5;Gradle&#x4E0D;&#x4EC5;&#x652F;&#x6301;Android&#x8FD8;&#x652F;&#x6301;C/C++&#x3001;Scale&#x7B49;&#x3002;</p>\n<p>&#x800C;&#x8FD9;&#x4E2A;plugin&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5728;project&#x4E2D;&#x7684;build.gradle&#x4E2D;&#x58F0;&#x660E;&#x7684;classpath</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        // Gradle 4.1 and higher include support for Google&apos;s Maven repo using</div><div class=\"line\">        // the google() method. And you need to include this repo to download</div><div class=\"line\">        // Android Gradle plugin 3.0.0 or higher.</div><div class=\"line\">        google()</div><div class=\"line\">        ...</div><div class=\"line\">    }</div><div class=\"line\">    dependencies {</div><div class=\"line\">        classpath &apos;com.android.tools.build:gradle:3.4.0&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x6709;&#x6BCF;&#x6B21;&#x5BF9;Android&#x6784;&#x5EFA;&#x8FDB;&#x884C;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x8981;&#x6765;&#x66F4;&#x65B0;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>\n<h2 id=\"Scripts\"><a href=\"#Scripts\" class=\"headerlink\" title=\"Scripts\"></a>Scripts</h2><p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Android&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x4E0E;Gradle&#x76F8;&#x5173;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>\n<p><img src=\"/2019/05/05/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;1.jpg\" alt=\"\"></p>\n<p>&#x4F60;&#x4F1A;&#x770B;&#x5230;&#x6587;&#x4EF6;&#x540D;&#x51E0;&#x4E4E;&#x90FD;&#x6709;gradle&#x5B57;&#x6BB5;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x4E00;&#x4E00;&#x4ECB;&#x7ECD;&#x5B83;&#x4EEC;&#x7684;&#x4F5C;&#x7528;</p>\n<h3 id=\"Gradle-Wrapper\"><a href=\"#Gradle-Wrapper\" class=\"headerlink\" title=\"Gradle Wrapper\"></a>Gradle Wrapper</h3><p>&#x9996;&#x5148;&#x662F;gradle-wrapper.properties&#x6587;&#x4EF6;&#xFF0C;&#x6253;&#x5F00;&#x5B83;&#x4F60;&#x5C06;&#x4F1A;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x7C7B;&#x4F3C;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">#Sat Jan 19 08:25:46 CST 2019</div><div class=\"line\">distributionBase=GRADLE_USER_HOME</div><div class=\"line\">distributionPath=wrapper/dists</div><div class=\"line\">zipStoreBase=GRADLE_USER_HOME</div><div class=\"line\">zipStorePath=wrapper/dists</div><div class=\"line\">distributionUrl=https\\://services.gradle.org/distributions/gradle-4.6-all.zip</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x662F;gradle&#x7248;&#x672C;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x7533;&#x660E;&#x4F60;&#x5F53;&#x524D;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;gradle&#x7248;&#x672C;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x6784;&#x5EFA;&#x9879;&#x76EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x7248;&#x672C;&#x81EA;&#x52A8;&#x4E0B;&#x8F7D;&#x3002;&#x5E76;&#x4E14;&#x4FDD;&#x5B58;&#x5230;&#x4F60;&#x7684;&#x7535;&#x8111;&#x672C;&#x5730;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;Mac&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x4F60;&#x7684;&#x6240;&#x6709;&#x5DF2;&#x7ECF;&#x4E0B;&#x8F7D;&#x7684;gradle&#x7248;&#x672C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ls ~/.gradle/wrapper/dists/</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x6EE1;&#x610F;&#x5F53;&#x524D;&#x7248;&#x672C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x67E5;&#x770B;<a href=\"https://gradle.org/releases/\" target=\"_blank\" rel=\"external\">version of Gradle</a>&#x4FEE;&#x6539;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x7248;&#x672C;</p>\n<h3 id=\"settings-gradle\"><a href=\"#settings-gradle\" class=\"headerlink\" title=\"settings.gradle\"></a>settings.gradle</h3><p>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x662F;&#x9879;&#x76EE;&#x4E0E;&#x5176;&#x5B50;&#x9879;&#x76EE;&#x6216;&#x8005;module&#x95F4;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x91CC;&#x9762;&#x901A;&#x8FC7;include&#x51FD;&#x6570;&#x6765;&#x544A;&#x8BC9;&#x8BE5;&#x9879;&#x76EE;&#x6240;&#x5305;&#x6362;&#x7684;&#x5B50;&#x9879;&#x76EE;&#x6216;&#x8005;&#x4F9D;&#x8D56;&#x7684;module&#x3002;&#x4F8B;&#x5982;&#x521A;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#x65F6;&#x53EA;&#x6709;&#x4E00;&#x4E2A;app&#x5B50;&#x9879;&#x76EE;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">include &apos;:app&apos;</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;settings.gradle&#x662F;&#x4F4D;&#x4E8E;project&#x7684;&#x6700;&#x5916;&#x5C42;&#xFF0C;&#x5373;&#x4E0E;app&#x540C;&#x7EA7;&#x3002;</p>\n<h3 id=\"build-gradle\"><a href=\"#build-gradle\" class=\"headerlink\" title=\"build.gradle\"></a>build.gradle</h3><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x4E00;&#x4E2A;project&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;sub-projects&#xFF0C;&#x800C;Android&#x4E00;&#x822C;&#x4F1A;&#x5C06;sub-projects&#x5F53;&#x505A;module&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x4F1A;&#x5728;&#x8FD9;&#x770B;&#x5230;&#x4E24;&#x4E2A;build.gradle&#x3002;&#x6839;&#x636E;&#x540E;&#x9762;&#x7684;hint&#x63D0;&#x793A;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x6765;&#x81EA;&#x4E0E;project&#x4E0E;module&#x3002;</p>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6765;&#x770B;project&#x4E2D;&#x7684;build.gradle&#xFF0C;&#x5373;&#x4F4D;&#x4E8E;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript { //1</div><div class=\"line\"> </div><div class=\"line\">    ext.objectboxVersion = &apos;2.3.0&apos; //4</div><div class=\"line\">      </div><div class=\"line\">    repositories { //2</div><div class=\"line\">        google()</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\">    dependencies { //3</div><div class=\"line\">        classpath &apos;com.android.tools.build:gradle:3.3.2&apos;</div><div class=\"line\">        classpath &quot;io.objectbox:objectbox-gradle-plugin:$objectboxVersion&quot;        </div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">allprojects { //5</div><div class=\"line\">    repositories {</div><div class=\"line\">        google()</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">task clean(type: Delete) { //6</div><div class=\"line\">    delete rootProject.buildDir</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<ol>\n<li>buildscript&#x95ED;&#x5305;&#x662F;&#x7533;&#x660E;&#x7F16;&#x8BD1;&#x8BE5;&#x9879;&#x76EE;&#x6240;&#x9700;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;</li>\n<li>&#x544A;&#x77E5;gradle&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#x5C06;&#x4ECE;google()&#x4E0E;jcenter()&#x4E2D;&#x83B7;&#x53D6;</li>\n<li>&#x7533;&#x660E;&#x76F8;&#x5173;&#x7684;plugin&#xFF0C;&#x4F8B;&#x5982;Android Plugin for Gradle&#x3002;</li>\n<li>&#x5728;gradle&#x4E2D;&#x6709;&#x4E00;&#x4E2A;<a href=\"https://docs.gradle.org/current/javadoc/org/gradle/api/Project.html#extraproperties\" target=\"_blank\" rel=\"external\">extra property</a>&#x5C5E;&#x6027;&#xFF0C;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5B83;&#x6765;&#x7533;&#x660E;&#x4E00;&#x4E9B;&#x53D8;&#x91CF;&#xFF0C;&#x4F8B;&#x5982;plugin&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#x5728;gradle&#x4E2D;&#x90FD;&#x662F;&#x5168;&#x5C40;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x591A;&#x4E2A;module&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x6765;&#x7EDF;&#x4E00;&#x76F8;&#x5173;&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;&#x6700;&#x540E;&#x5728;3&#x4E2D;&#x901A;&#x8FC7;${name}&#x6765;&#x5F15;&#x7528;</li>\n<li>&#x56E0;&#x4E3A;&#x53EF;&#x80FD;&#x6709;&#x591A;&#x4E2A;sub-project&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x76F8;&#x540C;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;allprojects&#x6765;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x3002;</li>\n<li>&#x7533;&#x660E;&#x4E00;&#x4E2A;task&#xFF0C;&#x7528;&#x6765;&#x6267;&#x884C;&#x76F8;&#x5173;&#x4EFB;&#x52A1;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;clean&#x64CD;&#x4F5C;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x5220;&#x9664;build&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x7684;&#x6570;&#x636E;</li>\n</ol>\n<p>&#x4E0B;&#x9762;&#x662F;module&#x4E2D;&#x7684;build.gradle</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply plugin: &apos;com.android.application&apos;</div><div class=\"line\">apply plugin: &apos;io.objectbox&apos; //1</div><div class=\"line\"> </div><div class=\"line\">android { //2</div><div class=\"line\">    compileSdkVersion 28</div><div class=\"line\">    defaultConfig {</div><div class=\"line\">        minSdkVersion 21</div><div class=\"line\">        targetSdkVersion 27</div><div class=\"line\">        versionCode 100005</div><div class=\"line\">        versionName &quot;1.0.5&quot;</div><div class=\"line\">        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;</div><div class=\"line\">    }</div><div class=\"line\">    buildTypes {</div><div class=\"line\">       release {</div><div class=\"line\">            minifyEnabled false</div><div class=\"line\">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">dependencies { //3</div><div class=\"line\">    implementation fileTree(include: [&apos;*.jar&apos;], dir: &apos;libs&apos;)</div><div class=\"line\">    implementation &apos;com.android.support:appcompat-v7:28.0.0&apos;</div><div class=\"line\">    implementation &apos;com.android.support:support-v4:28.0.0&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<ol>\n<li>&#x901A;&#x8FC7;&#x8C03;&#x7528;apply&#x51FD;&#x6570;&#xFF0C;&#x5F15;&#x5165;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x7684;plugin&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x6839;build.gradle&#x4E2D;&#x7533;&#x660E;&#x7684;classpath</li>\n<li>android&#x95ED;&#x5305;&#x662F;gradle&#x6700;&#x91CD;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x7533;&#x660E;&#xFF0C;&#x4F8B;&#x5982;&#x9ED8;&#x8BA4;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;defaultConfig&#xFF0C;&#x5305;&#x542B;minSdkVersion&#x6700;&#x5C0F;&#x652F;&#x6301;&#x7684;android&#x7248;&#x672C;&#xFF0C;versionCode&#x4E0E;versionName&#x7B49;&#x3002;&#x8FD9;&#x4E9B;&#x914D;&#x7F6E;&#x90FD;&#x4E0E;&#x7F16;&#x8BD1;&#x606F;&#x606F;&#x76F8;&#x5173;&#xFF0C;&#x6700;&#x597D;&#x4F60;&#x5E94;&#x8BE5;&#x719F;&#x6089;&#x5B83;&#x4EEC;&#x3002;&#x4F60;&#x5B9E;&#x5728;&#x8BB0;&#x4E0D;&#x4F4F;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4E5F;&#x6709;&#x79D8;&#x7C4D;&#xFF0C;<a href=\"https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.AppExtension.html\" target=\"_blank\" rel=\"external\">AppExtension</a>&#x8FD9;&#x91CC;&#x9762;&#x5305;&#x542B;&#x6240;&#x6709;&#x7684;&#x914D;&#x7F6E;&#x9879;&#x4E0E;&#x6240;&#x4EE3;&#x8868;&#x7684;&#x610F;&#x4E49;&#x3002;</li>\n<li>&#x8FD9;&#x91CC;&#x7684;dependencies&#x7528;&#x6765;&#x7533;&#x660E;&#x9879;&#x76EE;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x5E93;&#x7684;&#x83B7;&#x53D6;&#x6765;&#x6E90;&#x65E0;&#x9700;&#x518D;&#x6B21;&#x7533;&#x660E;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x7684;build.gradle&#x4E2D;&#x7684;allprojects&#x95ED;&#x5305;&#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x7533;&#x660E;&#x3002;&#x518D;&#x8005;&#x4E4B;&#x524D;&#x7684;ext&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x3002;</li>\n</ol>\n<h3 id=\"gradle-properties\"><a href=\"#gradle-properties\" class=\"headerlink\" title=\"gradle.properties\"></a>gradle.properties</h3><p>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x672C;&#x5730;&#x6587;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5BF9;gradle&#x6784;&#x5EFA;&#x7684;&#x4E00;&#x4E9B;&#x4E2A;&#x4EBA;&#x914D;&#x7F6E;&#x9879;&#x3002;&#x4F8B;&#x5982;gradle&#x8FD0;&#x884C;&#x662F;&#x5426;&#x5E76;&#x884C;&#xFF0C;gradle&#x7684;jvmargs&#x5927;&#x5C0F;&#x3001;&#x662F;&#x5426;&#x5F00;&#x542F;daemon&#x7B49;&#x7B49;&#x3002;&#x5B83;&#x4F1A;&#x5728;gradle&#x8FD0;&#x884C;&#x65F6;&#x6CE8;&#x5165;&#x5230;&#x76F8;&#x5E94;&#x7684;build.gradle&#x4E2D;&#x3002;</p>\n<h3 id=\"local-properties\"><a href=\"#local-properties\" class=\"headerlink\" title=\"local.properties\"></a>local.properties</h3><p>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E5F;&#x662F;&#x672C;&#x5730;&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x5B83;&#x7528;&#x6765;&#x914D;&#x7F6E;gradle&#x4E4B;&#x5916;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;ndk&#x4E0E;sdk&#x76EE;&#x5F55;&#xFF0C;&#x6216;&#x8005;&#x4E00;&#x4E9B;&#x654F;&#x611F;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x6253;&#x5305;&#x4E0A;&#x4F20;&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x8FD9;&#x65F6;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8D26;&#x53F7;&#x3001;&#x5BC6;&#x7801;&#x3001;api_key&#x7B49;&#xFF0C;&#x9632;&#x6B62;&#x6253;&#x5305;&#x65F6;&#x66B4;&#x9732;&#x3002;</p>\n<h2 id=\"Gradle-Tasks\"><a href=\"#Gradle-Tasks\" class=\"headerlink\" title=\"Gradle Tasks\"></a>Gradle Tasks</h2><p>gradle tasks&#x662F;&#x7528;&#x6765;&#x6267;&#x884C;&#x7279;&#x5B9A;&#x7684;gradle&#x4EFB;&#x52A1;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x70B9;&#x51FB;Android Studio&#x53F3;&#x8FB9;&#x7684;Gradle&#x6309;&#x94AE;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5728;Tasks&#x4E0B;&#x4F1A;&#x5217;&#x51FA;&#x8BE5;&#x9879;&#x76EE;&#x7684;&#x6240;&#x7528;&#x53EF;&#x6267;&#x884C;&#x7684;gradle&#x4EFB;&#x52A1;&#x3002;</p>\n<p><img src=\"/2019/05/05/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;2.jpg\" alt=\"\"></p>\n<p>&#x6216;&#x8005;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;app&#x4E0B;&#x7684;&#x6240;&#x6709;tasks</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew app:tasks</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/05/05/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;3.jpg\" alt=\"\"></p>\n<p>&#x6211;&#x4EEC;&#x987A;&#x4FBF;&#x70B9;&#x51FB;&#x4E00;&#x4E2A;&#xFF0C;&#x4F8B;&#x5982;assembleDebug&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F1A;&#x5728;Run&#x65E5;&#x5FD7;&#x7CFB;&#x7EDF;&#x4E2D;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x6267;&#x884C;&#x7ED3;&#x679C;</p>\n<p><img src=\"/2019/05/05/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;4.jpg\" alt=\"\"></p>\n<p>&#x6839;&#x636E;&#x8F93;&#x51FA;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x4E5F;&#x6807;&#x660E;&#x5B83;&#x662F;&#x6267;&#x884C;&#x4E86;task: assembleDebug</p>\n<p>&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;&#x6307;&#x5B9A;&#x7684;task&#xFF0C;&#x4F8B;&#x5982;&#x8981;&#x8FBE;&#x5230;&#x4E0A;&#x9762;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8F93;&#x5165;&#x5982;&#x4E0B;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew assembleDebug --console plain</div></pre></td></tr></table></figure>\n<ol>\n<li>./gradlew &#x4EE3;&#x8868;&#x7684;&#x662F;&#x4F7F;&#x7528;Gradle Wrapper&#x4E2D;&#x7684;gradle&#xFF0C;&#x5C31;&#x662F;&#x8BE5;&#x9879;&#x76EE;&#x672C;&#x8EAB;&#x7684;gradle&#x7248;&#x672C;&#xFF0C;&#x907F;&#x514D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;gradle&#x547D;&#x4EE4;</li>\n<li>assembleDebug&#x662F;task&#x7684;&#x540D;&#x79F0;</li>\n<li>&#x2013;console plain&#x8F93;&#x51FA;&#x5B8C;&#x6574;&#x7684;&#x65E5;&#x5FD7;</li>\n</ol>\n<p>&#x65E2;&#x7136;&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x518D;&#x8BF4;&#x4E00;&#x4E2A;&#x521D;&#x7EA7;&#x8005;&#x5BB9;&#x6613;&#x505A;&#x7684;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6709;&#x65F6;&#x4F1A;&#x78B0;&#x5230;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x800C;&#x53BB;&#x70B9;&#x51FB;Clean Project&#xFF0C;&#x518D;&#x70B9;&#x51FB;Rebuild Project&#x3002;&#x5176;&#x5B9E;Clean Project&#x662F;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5148;&#x70B9;&#x51FB;Rebuild Project&#xFF0C;&#x67E5;&#x770B;&#x65E5;&#x5FD7;</p>\n<p><img src=\"/2019/05/05/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;/Android-Gradle&#x7CFB;&#x5217;-&#x5165;&#x95E8;&#x7BC7;5.jpg\" alt=\"\"></p>\n<p>&#x7ED3;&#x679C;&#x662F;&#x5B83;&#x5206;&#x522B;&#x6267;&#x884C;&#x4E86;task: clean&#xFF0C;assembleDebug&#x3002;&#x6240;&#x4EE5;Rebuild Project&#x5C31;&#x5DF2;&#x7ECF;&#x5305;&#x542B;&#x4E86;Clean Project&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x591A;&#x6B64;&#x4E00;&#x4E3E;&#x6267;&#x884C;Clean Project&#x3002;</p>\n<p>&#x55EF;&#xFF0C;&#x5C31;&#x8FD9;&#x4E9B;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x5E0C;&#x671B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x5927;&#x5BB6;&#x5BF9;gradle&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x7ED3;&#x6784;&#x4E0E;&#x6240;&#x5904;&#x7684;&#x5730;&#x4F4D;&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x6E05;&#x6670;&#x7684;&#x7406;&#x89E3;&#x3002;</p>\n"},{"title":"Vue:scoped与module的使用与利弊","url":"https://www.rousetime.com/2019/01/11/Vue-scoped与module的使用与利弊/","content":"<p>&#x4E00;&#x4E2A;web&#x5E94;&#x7528;&#x662F;&#x79BB;&#x4E0D;&#x5F00;html&#x3001;css&#x4E0E;js&#xFF0C;&#x5176;&#x4E2D;css&#x5145;&#x65A5;&#x7684;&#x6574;&#x4E2A;web&#x9879;&#x76EE;&#x4E2D;&#x3002;css&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#xFF0C;&#x5B83;&#x662F;&#x5168;&#x5C40;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x7279;&#x6027;&#x5BFC;&#x81F4;&#x7684;&#x7ED3;&#x679C;&#x662F;&#xFF0C;&#x4E00;&#x65E6;&#x4F60;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x5B9A;&#x4E49;&#x4E86;&#x76F8;&#x540C;&#x7684;css&#x547D;&#x540D;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4EEC;&#x7684;&#x6837;&#x5F0F;&#x5C31;&#x4F1A;&#x76F8;&#x4E92;&#x8986;&#x76D6;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7684;style&#x9519;&#x4E71;&#xFF0C;&#x4ECE;&#x800C;&#x5F71;&#x54CD;&#x6574;&#x4E2A;&#x7F51;&#x9875;&#x5E03;&#x5C40;&#x3002;</p>\n<p>&#x6211;&#x76F8;&#x4FE1;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x79CD;css&#x6837;&#x5F0F;&#x8986;&#x76D6;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x503C;&#x5F97;&#x5E86;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x524D;&#x8F88;&#x90FD;&#x5DF2;&#x7ECF;&#x7ED9;&#x51FA;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>\n<p>&#x5728;Vue&#x4E2D;&#x6211;&#x4EEC;&#x901A;&#x8FC7;Scoped&#x4E0E;Module&#x6765;&#x89E3;&#x51B3;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x5206;&#x522B;&#x5BF9;scoped&#x4E0E;module&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x5206;&#x6790;&#x5B83;&#x4EEC;&#x7684;&#x5229;&#x5F0A;&#x4E0E;&#x9009;&#x62E9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x672A;&#x4F7F;&#x7528;&#x8FC7;&#x6216;&#x8005;&#x8BF4;&#x5BF9;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5229;&#x5F0A;&#x4E0E;&#x9009;&#x62E9;&#x5B58;&#x5728;&#x7591;&#x95EE;&#x7684;&#xFF0C;&#x76F8;&#x4FE1;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x80FD;&#x591F;&#x5E2E;&#x4F60;&#x89E3;&#x60D1;&#x3002;</p>\n<h2 id=\"Scoped\"><a href=\"#Scoped\" class=\"headerlink\" title=\"Scoped\"></a>Scoped</h2><p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709;&#x5982;&#x4E0B;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#xFF1A;</p>\n<p>index.vue</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div class=&quot;content&quot;&gt;</div><div class=\"line\">    &lt;div class=&quot;title-wrap&quot;&gt;&#x6211;&#x662F;&#x7EA2;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">    &lt;green-title&gt;&lt;/green-title&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;style lang=&quot;scss&quot;&gt;</div><div class=\"line\">.content {</div><div class=\"line\">  .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p>GreenTitle.vue</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div class=&quot;content&quot;&gt;</div><div class=\"line\">    &lt;div class=&quot;title-wrap&quot;&gt;&#x6211;&#x662F;&#x7EFF;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;style lang=&quot;scss&quot;&gt;</div><div class=\"line\">.content {</div><div class=\"line\">  .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: green;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/1.jpg\" alt=\"\"></p>\n<p>&#x6700;&#x7EC8;&#x8FD9;&#x5C4F;&#x5E55;&#x4E0A;&#x5C55;&#x793A;&#x7684;&#x662F;&#x4E24;&#x884C;&#x7EA2;&#x8272;&#x7684;&#x6587;&#x5B57;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x7236;&#x7EC4;&#x4EF6;&#x4E0E;&#x5B50;&#x7EC4;&#x4EF6;&#x90FD;&#x5B9A;&#x4E49;&#x4E86;title-wrap&#x7684;&#x6837;&#x5F0F;&#xFF0C;&#x5BFC;&#x81F4;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x88AB;&#x7236;&#x7EC4;&#x4EF6;&#x6240;&#x8986;&#x76D6;&#x3002;</p>\n<p>&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;style&#x6807;&#x7B7E;&#x4E2D;&#x6DFB;&#x52A0;scoped&#x5C5E;&#x6027;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style lang=&quot;scss&quot; scoped&gt;</div><div class=\"line\">.content {</div><div class=\"line\">  .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/2.jpg\" alt=\"\"></p>\n<p>scoped&#x4F5C;&#x7528;&#x7684;&#x963B;&#x6B62;&#x4E0A;&#x5C42;&#x7684;css&#x6837;&#x5F0F;&#x4F20;&#x9012;&#x5230;&#x4E0B;&#x5C42;&#xFF0C;&#x9650;&#x5236;&#x5F53;&#x524D;css&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x4F7F;&#x5176;&#x53EA;&#x5BF9;&#x5F53;&#x524D;&#x7EC4;&#x4EF6;&#x751F;&#x6548;&#x3002;</p>\n<p>&#x77E5;&#x9053;&#x4E86;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5728;&#x5F00;&#x6DF1;&#x5165;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/3.jpg\" alt=\"\"><br><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/4.jpg\" alt=\"\"><br>&#x524D;&#x9762;&#x7684;&#x662F;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;scoped&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x540E;&#x9762;&#x662F;&#x6DFB;&#x52A0;&#x4E86;scoped&#x7684;&#x6E90;&#x7801;&#x3002;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x4E00;&#x4E00;&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x73B0;&#x524D;&#x9762;&#x7684;&#x4E24;&#x4E2A;div&#x6807;&#x7B7E;&#x90FD;&#x4F7F;&#x7528;&#x4E86;title-wrap&#x6837;&#x5F0F;&#xFF0C;&#x81EA;&#x7136;&#x5BFC;&#x81F4;&#x6837;&#x5F0F;&#x8986;&#x76D6;&#xFF1B;&#x800C;&#x540E;&#x9762;&#x7684;&#x4E24;&#x4E2A;div&#x6807;&#x7B7E;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x589E;&#x52A0;&#x4E86;data-v-67e6b31f&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x7236;&#x7EC4;&#x7684;style&#x4E2D;&#x589E;&#x52A0;scoped&#x7684;&#x6548;&#x679C;&#xFF0C;&#x533A;&#x522B;&#x4E0E;&#x7B2C;&#x4E8C;&#x4E2A;div&#x4E2D;&#x7684;title-wrap&#x6837;&#x5F0F;&#x3002;</p>\n<p>scoped&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x501F;&#x52A9;&#x4E86;PostCSS&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4E00;&#x65E6;&#x589E;&#x52A0;&#x4E86;scoped&#xFF0C;&#x4ED6;&#x4F1A;&#x5C06;&#x4E4B;&#x524D;&#x8986;&#x76D6;&#x7684;&#x6837;&#x5F0F;&#x8F6C;&#x6362;&#x6210;&#x4E0B;&#x9762;&#x7684;&#x6837;&#x5F0F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style lang=&quot;scss&quot;&gt;</div><div class=\"line\">.content[data-v-67e6b31f] {</div><div class=\"line\">  .title-wrap[data-v-67e6b31f] {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x8F6C;&#x6362;&#x65B9;&#x5F0F;&#xFF0C;&#x95F4;&#x63A5;&#x7684;&#x6539;&#x53D8;&#x4E86;&#x539F;&#x6709;&#x7684;css&#x547D;&#x540D;&#x3002;&#x9632;&#x6B62;&#x4E0A;&#x5C42;&#x7EC4;&#x4EF6;&#x6837;&#x5F0F;&#x8986;&#x76D6;&#x4E0B;&#x5C42;&#x7EC4;&#x4EF6;&#x6837;&#x5F0F;&#x3002;</p>\n<h3 id=\"&#x7279;&#x6027;\"><a href=\"#&#x7279;&#x6027;\" class=\"headerlink\" title=\"&#x7279;&#x6027;\"></a>&#x7279;&#x6027;</h3><p>&#x7EC6;&#x5FC3;&#x7684;&#x8BFB;&#x8005;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x7684;&#x540E;&#x4E00;&#x5F20;&#x6E90;&#x7801;&#x56FE;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;div&#x7684;content&#x4E2D;&#x4E5F;&#x6709;data-v-67e6b31f&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x7591;&#x95EE;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;content&#x4E0D;&#x662F;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;css&#x5417;&#xFF1F;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#x672A;&#x6DFB;&#x52A0;scoped&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x4F1A;&#x6DFB;&#x52A0;data-v-67e6b31f&#x524D;&#x7F00;&#xFF1F;</p>\n<p>&#x8FD9;&#x662F;scoped&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x4F7F;&#x7528; scoped &#x540E;&#xFF0C;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x5C06;&#x4E0D;&#x4F1A;&#x6E17;&#x900F;&#x5230;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#x3002;&#x4E0D;&#x8FC7;&#x4E00;&#x4E2A;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x6839;&#x8282;&#x70B9;&#x4F1A;&#x540C;&#x65F6;&#x53D7;&#x5176;&#x7236;&#x7EC4;&#x4EF6;&#x6709;&#x4F5C;&#x7528;&#x57DF;&#x7684; CSS &#x548C;&#x5B50;&#x7EC4;&#x4EF6;&#x6709;&#x4F5C;&#x7528;&#x57DF;&#x7684; CSS &#x7684;&#x5F71;&#x54CD;&#x3002;&#x8FD9;&#x6837;&#x8BBE;&#x8BA1;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x7236;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x4ECE;&#x5E03;&#x5C40;&#x7684;&#x89D2;&#x5EA6;&#x51FA;&#x53D1;&#xFF0C;&#x8C03;&#x6574;&#x5176;&#x5B50;&#x7EC4;&#x4EF6;&#x6839;&#x5143;&#x7D20;&#x7684;&#x6837;&#x5F0F;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5C06;&#x5B50;&#x7EC4;&#x4EF6;&#x505A;&#x5982;&#x4E0B;&#x4FEE;&#x6539;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;!-- &lt;div class=&quot;content&quot;&gt; --&gt;</div><div class=\"line\">    &lt;div class=&quot;title-wrap&quot;&gt;&#x6211;&#x662F;&#x7EFF;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">  &lt;!-- &lt;/div&gt; --&gt;</div><div class=\"line\">&lt;/template&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/1.jpg\" alt=\"\"><br><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/5.jpg\" alt=\"\"><br>&#x7531;&#x4E8E;&#x7236;&#x7EC4;&#x4EF6;scoped&#x7279;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;title-wrap&#xFF0C;&#x4E5F;&#x4F1A;&#x6DFB;&#x52A0;data-v-67e6b31f&#x524D;&#x7F00;</p>\n<p>&#x90A3;&#x4E48;&#x53C8;&#x6709;&#x4E2A;&#x7591;&#x95EE;&#xFF0C;&#x589E;&#x52A0;&#x4E86;scoped&#x662F;&#x5426;&#x5C31;&#x4E00;&#x5B9A;&#x4E0D;&#x80FD;&#x4F20;&#x9012;&#x7684;&#x4E0B;&#x5C42;&#x7EC4;&#x4EF6;&#x5462;&#xFF1F;&#x6BD5;&#x7ADF;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x6709;&#x9700;&#x8981;&#x4E2A;&#x522B;&#x6837;&#x5F0F;&#x4F20;&#x9012;&#x5230;&#x4E0B;&#x5C42;&#x7684;&#x9700;&#x6C42;&#x3002;&#x522B;&#x6025;&#xFF0C;&#x63A5;&#x7740;&#x770B;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x80FD;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x89E3;&#x51B3;&#x3002;</p>\n<h3 id=\"&#x6DF1;&#x5EA6;&#x4F5C;&#x7528;\"><a href=\"#&#x6DF1;&#x5EA6;&#x4F5C;&#x7528;\" class=\"headerlink\" title=\"&#x6DF1;&#x5EA6;&#x4F5C;&#x7528;\"></a>&#x6DF1;&#x5EA6;&#x4F5C;&#x7528;</h3><p>&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;scoped&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x6837;&#x5F0F;&#x80FD;&#x591F;&#x4F5C;&#x7528;&#x7684;&#x66F4;&#x6DF1;&#xFF0C;&#x5F71;&#x54CD;&#x5230;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>&gt;&gt;&gt;</code>&#x64CD;&#x4F5C;&#x7B26;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style scoped&gt;</div><div class=\"line\">.content &gt;&gt;&gt; .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p>&#x6CE8;&#x610F;&#x770B;&#x6211;&#x5C06;style&#x4E2D;&#x7684;lang=&#x201D;scss&#x201D;&#x53BB;&#x6389;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x52A0;&#x4E86;&#x9884;&#x5904;&#x7406;&#x5668;&#x540E;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x89E3;&#x6790;<code>&gt;&gt;&gt;</code>&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;/deep/&#x4EE3;&#x66FF;&#xFF0C;&#x672C;&#x8D28;&#x662F;<code>&gt;&gt;&gt;</code>&#x7684;&#x522B;&#x540D;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style lang=&quot;scss&quot; scoped&gt;</div><div class=\"line\">.content {</div><div class=\"line\">  /deep/ {</div><div class=\"line\">    .title-wrap {</div><div class=\"line\">      font-size: 20px;</div><div class=\"line\">      color: red;</div><div class=\"line\">    }</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p>&#x5C06;&#x4F1A;&#x7F16;&#x8BD1;&#x6210;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">.content[data-v-67e6b31f] .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/1.jpg\" alt=\"\"></p>\n<blockquote>\n<p>&#x901A;&#x8FC7; v-html &#x521B;&#x5EFA;&#x7684; DOM &#x5185;&#x5BB9;&#x4E0D;&#x53D7;&#x4F5C;&#x7528;&#x57DF;&#x5185;&#x7684;&#x6837;&#x5F0F;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6DF1;&#x5EA6;&#x4F5C;&#x7528;&#x9009;&#x62E9;&#x5668;&#x6765;&#x4E3A;&#x4ED6;&#x4EEC;&#x8BBE;&#x7F6E;&#x6837;&#x5F0F;</p>\n</blockquote>\n<h2 id=\"Module\"><a href=\"#Module\" class=\"headerlink\" title=\"Module\"></a>Module</h2><p>&#x9488;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x8986;&#x76D6;&#x95EE;&#x9898;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;module&#x6765;&#x89E3;&#x51B3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div :class=&quot;$style.content&quot;&gt;</div><div class=\"line\">    &lt;div :class=&quot;$style[&apos;title-wrap&apos;]&quot;&gt;&#x6211;&#x662F;&#x7EA2;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">    &lt;green-title&gt;&lt;/green-title&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;style lang=&quot;scss&quot; module&gt;</div><div class=\"line\">.content {</div><div class=\"line\">  .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: red;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/2.jpg\" alt=\"\"></p>\n<p>module&#x7684;&#x7528;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x8981;&#x5728;style&#x4E2D;&#x589E;&#x52A0;<code>module</code>&#x5C5E;&#x6027;&#x5373;&#x53EF;&#x3002;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x662F;&#x5B83;&#x5728;&#x5E03;&#x5C40;&#x4E2D;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x524D;&#x7F00;<code>$style</code>&#x3002;&#x56E0;&#x4E3A;&#x901A;&#x8FC7;module&#x4F5C;&#x7528;&#x7684;style&#x90FD;&#x88AB;&#x4FDD;&#x5B58;&#x5230;<code>$style</code>&#x5BF9;&#x8C61;&#x4E2D;&#x3002;&#x6211;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;console&#x67E5;&#x770B;&#x5B83;&#x7684;&#x5177;&#x4F53;&#x5F15;&#x7528;&#x540D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mounted() {</div><div class=\"line\">  console.log(this.$style)</div><div class=\"line\">  console.log(this.$style[&apos;title-wrap&apos;])</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/6.jpg\" alt=\"\"></p>\n<p>&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#xFF0C;&#x53D1;&#x73B0;&#x5F15;&#x7528;&#x540D;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5F8B;&#x3002;&#x90FD;&#x662F;&#x5DF2;index&#x5F00;&#x5934;&#xFF0C;&#x540E;&#x9762;&#x518D;&#x63A5;&#x7740;style&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x547D;&#x540D;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x63A5;&#x4E2A;&#x540E;&#x7F00;&#x3002;&#x8FD9;&#x91CC;&#x7684;index&#x662F;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x6587;&#x4EF6;&#x540D;index.vue&#x3002;&#x6240;&#x4EE5;&#x901A;&#x8FC7;module&#x4F5C;&#x7528;&#x7684;style&#x5C06;&#x4F1A;&#x91CD;&#x65B0;&#x547D;&#x540D;&#x4E3A;&#xFF1A;&#x6587;&#x4EF6;&#x540D;<em>&#x539F;style&#x540D;</em>&#x4E0D;&#x5B9A;&#x540E;&#x7F00;&#x3002;</p>\n<p>&#x8FD9;&#x4E48;&#x547D;&#x540D;&#x53C8;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x5C55;&#x793A;&#x7684;&#x6548;&#x679C;</p>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/7.jpg\" alt=\"\"></p>\n<p>&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x6D4F;&#x89C8;&#x7684;&#x63A7;&#x5236;&#x53F0;&#x67E5;&#x770B;Elements&#x65F6;&#xFF0C;&#x4F18;&#x70B9;&#x663E;&#x800C;&#x6613;&#x89C1;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;scoped&#x7684;&#x65B9;&#x5F0F;&#xFF0C;module&#x7684;&#x65B9;&#x5F0F;&#x80FD;&#x591F;&#x4E00;&#x773C;&#x77E5;&#x9053;&#x8BE5;&#x5143;&#x7D20;&#x65F6;&#x5C5E;&#x4E8E;&#x54EA;&#x4E2A;&#x6587;&#x4EF6;&#x7EC4;&#x4EF6;&#x4E2D;&#x3002;&#x5728;&#x5927;&#x578B;&#x9879;&#x76EE;&#x4E2D;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FC5;&#x901F;&#x5B9A;&#x4F4D;&#x5230;&#x8981;&#x67E5;&#x627E;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>\n<p>&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x7684;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;&#xFF0C;&#x7531;&#x4E8E;module&#x4F1A;&#x5C06;&#x6240;&#x6709;&#x7684;style&#x90FD;&#x5F52;&#x5165;<code>$style</code>&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x7075;&#x6D3B;&#x7684;&#x5C06;&#x4EFB;&#x610F;&#x7684;&#x7236;&#x7EC4;&#x4EF6;&#x6837;&#x5F0F;&#x4F20;&#x9012;&#x5230;&#x4EFB;&#x610F;&#x6DF1;&#x5C42;&#x7684;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5C06;&#x7236;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;<code>title-wrap</code>&#x901A;&#x8FC7;props&#x4F20;&#x9012;&#x5230;&#x5B50;&#x7EC4;&#x4EF6;&#x4E2D;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div :class=&quot;$style.content&quot;&gt;</div><div class=\"line\">    &lt;div :class=&quot;$style[&apos;title-wrap&apos;]&quot;&gt;&#x6211;&#x662F;&#x7EA2;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">    &lt;green-title :styleTitle=&quot;$style[&apos;title-wrap&apos;]&quot;&gt;&lt;/green-title&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div class=&quot;content&quot;&gt;</div><div class=\"line\">    &lt;div :class=&quot;styleTitle&quot;&gt;&#x6211;&#x662F;&#x7EFF;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div><div class=\"line\">&lt;script&gt;</div><div class=\"line\"> </div><div class=\"line\">export default {</div><div class=\"line\">  props: {</div><div class=\"line\">    styleTitle: String,</div><div class=\"line\">  },</div><div class=\"line\">}</div><div class=\"line\">&lt;/script&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/1.jpg\" alt=\"\"><br><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/8.jpg\" alt=\"\"></p>\n<p>module&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5BFC;&#x51FA;&#x5B9A;&#x4E49;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5C06;&#x53D8;&#x91CF;&#x5F52;&#x5165;<code>$style</code>&#x4E2D;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;template&gt;</div><div class=\"line\">  &lt;div :class=&quot;$style.content&quot;&gt;</div><div class=\"line\">    &lt;div :class=&quot;$style[&apos;title-wrap&apos;]&quot;&gt;&#x6211;&#x662F;&#x7EA2;&#x8272;&#x7684;&lt;/div&gt;</div><div class=\"line\">    &lt;green-title :styleTitle=&quot;$style[&apos;title-wrap&apos;]&quot;&gt;&lt;/green-title&gt;</div><div class=\"line\">    &lt;div&gt;{{$style.titleColor}}&lt;/div&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/template&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;style lang=&quot;scss&quot; module&gt;</div><div class=\"line\">$title-color: red;</div><div class=\"line\">:export {</div><div class=\"line\">  titleColor: $title-color</div><div class=\"line\">}</div><div class=\"line\">.content {</div><div class=\"line\">  .title-wrap {</div><div class=\"line\">    font-size: 20px;</div><div class=\"line\">    color: $title-color;</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">&lt;/style&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/9.jpg\" alt=\"\"></p>\n<blockquote>\n<p>&#x66F4;&#x591A;module&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;<a href=\"https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fcss-modules%2Fcss-modules\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;</a></p>\n</blockquote>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>scoped&#x4E0E;module&#x90FD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3001;&#x6613;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5462;&#xFF1F;</p>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4F7F;&#x7528;&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x73B0;scoped&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x53EA;&#x8981;&#x5728;style&#x4E2D;&#x5B9A;&#x4E49;scoped&#x5C5E;&#x6027;&#x5373;&#x53EF;&#xFF0C;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x7B80;&#x4FBF;&#x3002;&#x4F46;&#x5B83;&#x7684;&#x5C40;&#x9650;&#x6027;&#x662F;&#x9002;&#x7528;&#x4E8E;&#x4E2D;&#x5C0F;&#x9879;&#x76EE;&#x4E2D;&#x3002;&#x56E0;&#x4E3A;scoped&#x4F5C;&#x7528;&#x7684;style&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x4E0D;&#x76F4;&#x89C2;&#xFF0C;&#x5BF9;&#x4E8E;&#x5FEB;&#x901F;&#x67E5;&#x627E;&#x5B9A;&#x4F4D;&#xFF0C;module&#x66F4;&#x52A0;&#x5408;&#x9002;&#xFF0C;&#x540C;&#x65F6;module&#x5BF9;&#x4E8E;style&#x5411;&#x4E0B;&#x4F20;&#x9012;&#x7684;&#x63A7;&#x5236;&#x6743;&#x4E5F;&#x975E;&#x5E38;&#x7075;&#x6D3B;&#xFF1B;&#x989D;&#x5916;&#x7684;&#x8FD8;&#x6709;&#x53D8;&#x91CF;&#x5BFC;&#x51FA;&#x7B49;&#x4FBF;&#x6377;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x662F;&#x5C0F;&#x9879;&#x76EE;&#x4E2D;&#x4E14;&#x4F4E;&#x6210;&#x672C;&#x7684;&#x4F7F;&#x7528;&#xFF0C;scoped&#x66F4;&#x52A0;&#x9002;&#x5408;&#xFF1B;&#x800C;&#x5BF9;&#x5927;&#x9879;&#x76EE;module&#x66F4;&#x52A0;&#x5408;&#x9002;&#xFF0C;&#x867D;&#x7136;&#x6709;&#x4E00;&#x70B9;&#x5B66;&#x4E60;&#x6210;&#x672C;&#xFF0C;&#x4F46;&#x5BF9;&#x4E8E;&#x7528;&#x66F4;&#x597D;&#x7684;&#x63A7;&#x5236;&#x6743;&#x3001;&#x53EF;&#x89C2;&#x6027;&#x4E0E;&#x5B9A;&#x4F4D;&#x901F;&#x5EA6;&#x6765;&#x8BF4;&#x4E5F;&#x5C31;&#x4E0D;&#x503C;&#x4E00;&#x63D0;&#x3002;</p>\n<h2 id=\"&#x516C;&#x4F17;&#x53F7;\"><a href=\"#&#x516C;&#x4F17;&#x53F7;\" class=\"headerlink\" title=\"&#x516C;&#x4F17;&#x53F7;\"></a>&#x516C;&#x4F17;&#x53F7;</h2><p>&#x611F;&#x89C9;&#x4E0D;&#x9519;&#x7684;&#x53EF;&#x4EE5;&#x6765;&#x4E00;&#x6CE2;&#x5173;&#x6CE8;&#xFF0C;&#x626B;&#x63CF;&#x4E0B;&#x65B9;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;:<code>&#x602A;&#x8C08;&#x65F6;&#x95F4;</code>&#xFF0C;&#x53CA;&#x65F6;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x77E5;&#x8BC6;&#x6280;&#x5DE7;&#x4E0E;&#x4E92;&#x8054;&#x7F51;&#x65B0;&#x52A8;&#x6001;&#x3002;</p>\n<p><img src=\"/2019/01/11/Vue-scoped&#x4E0E;module&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x5229;&#x5F0A;/wx.jpg\" alt=\"\"></p>\n"},{"title":"vps携手hexo的博客搭建之旅","url":"https://www.rousetime.com/2019/01/06/vps携手hexo的博客搭建之旅/","content":"<p>&#x7531;&#x4E8E;&#x81EA;&#x5DF1;&#x641E;&#x4E86;&#x4E2A;vps&#xFF0C;&#x4E5F;&#x642D;&#x5EFA;&#x4E86;vpn&#xFF0C;&#x65E5;&#x5E38;&#x79D1;&#x5B66;&#x4E0A;&#x7F51;&#x4E0E;&#x770B;&#x770B;&#x89C6;&#x9891;&#x8FD8;&#x662F;&#x6CA1;&#x4EC0;&#x4E48;&#x538B;&#x529B;&#x7684;&#x3002;&#x60F3;&#x7740;&#x4E5F;&#x4E0D;&#x80FD;&#x767D;&#x767D;&#x6D6A;&#x8D39;&#x6BCF;&#x4E2A;&#x6708;500G&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x4E8E;&#x662F;&#x60F3;&#x8D77;&#x81EA;&#x5DF1;&#x73B0;&#x5728;&#x7684;hexo&#x535A;&#x5BA2;&#x3002;&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x79C1;&#x6709;&#x57DF;&#x540D;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7528;&#x7684;&#x8FD8;&#x662F;&#x4F20;&#x7EDF;&#x7684;github.io&#x901A;&#x7528;&#x57DF;&#x540D;&#x3002;&#x4F5C;&#x4E3A;it&#x754C;&#x7684;&#x4E00;&#x5458;&#xFF0C;&#x65E2;&#x7136;&#x6709;&#x6761;&#x4EF6;&#x80FD;&#x53D8;&#x5F97;&#x66F4;&#x597D;&#x5C31;&#x4E0D;&#x5E94;&#x8BE5;&#x4E0D;&#x53BB;&#x505A;&#x3002;&#x4E8E;&#x662F;&#x82B1;&#x4E00;&#x5929;&#x65F6;&#x95F4;&#x6298;&#x817E;&#x51FA;&#x6765;&#x7684;&#x81EA;&#x5DF1;&#x7684;&#x4E13;&#x5C5E;&#x535A;&#x5BA2;&#x7CFB;&#x7EDF;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x5C06;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x4E0E;&#x6B65;&#x9AA4;&#x7F57;&#x5217;&#x51FA;&#x6765;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x6709;&#x540C;&#x6837;&#x9700;&#x6C42;&#x7684;&#x4F60;&#x3002;</p>\n<h2 id=\"&#x524D;&#x63D0;&#x6761;&#x4EF6;\"><a href=\"#&#x524D;&#x63D0;&#x6761;&#x4EF6;\" class=\"headerlink\" title=\"&#x524D;&#x63D0;&#x6761;&#x4EF6;\"></a>&#x524D;&#x63D0;&#x6761;&#x4EF6;</h2><p>&#x9996;&#x5148;&#x6211;&#x7684;&#x642D;&#x5EFA;&#x662F;&#x57FA;&#x4E8E;&#x4EE5;&#x4E0B;&#x6761;&#x4EF6;&#x4E4B;&#x4E0A;&#x7684;</p>\n<ol>\n<li>&#x672C;&#x5730;hexo&#x535A;&#x5BA2;&#x5DF2;&#x5B8C;&#x6210;(github.io&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;)</li>\n<li>&#x6709;&#x81EA;&#x5DF1;&#x7684;vps</li>\n<li>&#x670D;&#x52A1;&#x5668;&#x7CFB;&#x7EDF;Centos 6 x86_64</li>\n<li>&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x57DF;&#x540D;</li>\n<li>&#x57DF;&#x540D;&#x5DF2;&#x8FDB;&#x884C;&#x89E3;&#x6790;</li>\n</ol>\n<blockquote>\n<p>&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4ECB;&#x7ECD;hexo&#x535A;&#x5BA2;&#x672C;&#x5730;&#x6784;&#x5EFA;&#xFF0C;&#x60F3;&#x4E86;&#x89E3;&#x7684;&#x63A8;&#x8350;&#x9605;&#x8BFB;<a href=\"https://rousetime.com/2016/03/04/Hexo-install/\" target=\"_blank\" rel=\"external\">Hexo&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;</a></p>\n</blockquote>\n<p>&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x4E3B;&#x8981;&#x95EE;&#x9898;&#x662F;&#xFF1A;</p>\n<ol>\n<li>SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;</li>\n<li>&#x4E0B;&#x8F7D;git&#x4E0E;&#x521B;&#x5EFA;git&#x670D;&#x52A1;&#x5668;</li>\n<li>&#x4E0B;&#x8F7D;nginx&#x4E0E;&#x914D;&#x7F6E;nginx&#x73AF;&#x5883;</li>\n<li>&#x672C;&#x5730;hexo&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x5173;&#x8054;</li>\n</ol>\n<h2 id=\"SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;\"><a href=\"#SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;\" class=\"headerlink\" title=\"SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;\"></a>SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;</h2><p>SSH&#x975E;&#x5E38;&#x5F3A;&#x5927;&#xFF0C;&#x5728;&#x6211;&#x65E5;&#x5E38;&#x5DE5;&#x4F5C;&#x4E2D;&#x65F6;&#x523B;&#x76F8;&#x9047;&#x3002;&#x76F8;&#x4FE1;&#x4F60;&#x4E5F;&#x662F;&#xFF0C;&#x53EF;&#x80FD;&#x4F60;&#x4E0D;&#x66FE;&#x6CE8;&#x610F;&#x5230;&#x5B83;&#x800C;&#x5DF2;&#x3002;&#x65E5;&#x5E38;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x62C9;&#x53D6;&#x4E0E;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x901A;&#x8FC7;SSH&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#x3002;&#x867D;&#x7136;&#x5C06;&#x751F;&#x6210;&#x7684;id_rsa.pub&#x516C;&#x94A5;&#x4EA4;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x540E;&#x5C31;&#x518D;&#x6CA1;&#x600E;&#x4E48;&#x63A5;&#x89E6;&#x8FC7;&#x5B83;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x80FD;&#x5426;&#x8BA4;&#x5B83;&#x7684;&#x5B58;&#x5728;&#x3002;</p>\n<p>&#x7531;&#x4E8E;SSH&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x5B89;&#x5168;&#x4E0E;&#x7A33;&#x5B9A;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x8FD9;&#x91CC;&#x4E5F;&#x4F7F;&#x7528;SSH&#x6765;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x3002;</p>\n<p>&#x5728;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x524D;&#xFF0C;&#x4F60;&#x9700;&#x77E5;&#x9053;&#x81EA;&#x5DF1;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x76F8;&#x4FE1;&#x90FD;&#x80FD;&#x591F;&#x62FF;&#x5230;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"># &#x4EE5;root&#x7528;&#x6237;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;</div><div class=\"line\"># &#x5C06;12.12.12.12&#x6362;&#x6210;&#x81EA;&#x5DF1;&#x670D;&#x52A1;&#x5668;IP</div><div class=\"line\"># &#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x57DF;&#x540D;&#x4E14;&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x89E3;&#x6790;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x57DF;&#x540D;&#x4EE3;&#x66FF;</div><div class=\"line\">ssh root@12.12.12.12</div></pre></td></tr></table></figure>\n<p>&#x76F8;&#x4FE1;&#x8FD9;&#x4E00;&#x6B65;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x90FD;&#x4F1A;&#x62A5;&#x4E0B;&#x9762;&#x4E00;&#x6BB5;&#x9519;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssh: connect to host 12.12.12.12 port 22: Connection refused</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x4F60;&#x7684;ssh&#x9ED8;&#x8BA4;&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;22&#x4E0E;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53E3;&#x4E0D;&#x4E00;&#x81F4;&#x5BFC;&#x81F4;&#x7684;&#x3002;&#x8BE5;&#x95EE;&#x9898;&#x6709;&#x4E24;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x4E00;&#x662F;&#x6539;&#x53D8;ssh&#x7684;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF1B;&#x5176;&#x4E8C;&#x662F;&#x6307;&#x5B9A;&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;&#x3002;&#x7B2C;&#x4E00;&#x4E2D;&#x4E0D;&#x63A8;&#x8350;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x90FD;&#x575A;&#x6301;&#x80FD;&#x4E0D;&#x52A8;&#x9ED8;&#x8BA4;&#x7684;&#x7684;&#x5C31;&#x4E0D;&#x51FA;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x4E2D;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x8FDE;&#x63A5;&#x547D;&#x4EE4;&#x884C;&#x540E;&#x518D;&#x52A0;&#x4E0A;&#x7AEF;&#x53E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssh root@12.12.12.12 -p &#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x63A5;&#x4E0B;&#x6765;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x8FDE;&#x63A5;&#x4E0A;&#x670D;&#x52A1;&#x5668;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x7535;&#x8111;&#x4E0A;&#x8FDC;&#x7A0B;&#x64CD;&#x4F5C;&#x670D;&#x52A1;&#x5668;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x63D2;&#x66F2;\"><a href=\"#&#x63D2;&#x66F2;\" class=\"headerlink\" title=\"&#x63D2;&#x66F2;\"></a>&#x63D2;&#x66F2;</h3><p>&#x5982;&#x679C;&#x4F60;&#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x6CA1;&#x6709;ssh&#x516C;&#x94A5;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;<a href=\"https://rousetime.com/2016/03/04/Hexo-install/\" target=\"_blank\" rel=\"external\">Hexo&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;</a>&#x6765;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;</p>\n<p>&#x627E;&#x5230;&#x516C;&#x94A5;&#xFF0C;&#x516C;&#x94A5;&#x4F4D;&#x7F6E;&#xFF1A;~/.ssh/id_rsa.pub&#xFF0C;&#x540E;&#x7EED;&#x4F1A;&#x7528;&#x5230;&#x3002;</p>\n<h2 id=\"git&#x670D;&#x52A1;&#x5668;\"><a href=\"#git&#x670D;&#x52A1;&#x5668;\" class=\"headerlink\" title=\"git&#x670D;&#x52A1;&#x5668;\"></a>git&#x670D;&#x52A1;&#x5668;</h2><p>&#x8FDE;&#x63A5;&#x4E0A;&#x670D;&#x52A1;&#x4E4B;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x67E5;&#x770B;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x4E86;git&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x4F7F;&#x7528;yum&#x8FDB;&#x884C;&#x6309;&#x7167;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install git</div></pre></td></tr></table></figure>\n<h3 id=\"&#x88F8;&#x5E93;\"><a href=\"#&#x88F8;&#x5E93;\" class=\"headerlink\" title=\"&#x88F8;&#x5E93;\"></a>&#x88F8;&#x5E93;</h3><p>&#x5728;&#x5F00;&#x59CB;&#x642D;&#x5EFA;git&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x73B0;&#x6709;&#x7684;&#x4ED3;&#x5E93;&#x5BFC;&#x51FA;&#x4E3A;&#x88F8;&#x4ED3;&#x5E93;&#x3002;&#x610F;&#x601D;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x5305;&#x542B;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x7684;&#x4ED3;&#x5E93;&#x3002;&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;git&#x7684;&#x2013;bare&#x3002;&#x5728;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x56DE;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone --bare my_project blog.git</div></pre></td></tr></table></figure>\n<p>my_project&#x5982;&#x679C;&#x4E3A;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x5C31;&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x7684;ssh&#x94FE;&#x63A5;, blog.git&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x547D;&#x540D;&#x4F46;&#x5FC5;&#x987B;&#x4EE5;.git&#x7ED3;&#x5C3E;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4ED3;&#x5E93;&#x7684;&#x88F8;&#x5E93;&#x4E86;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x9700;&#x8981;&#x5C06;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x88F8;&#x5E93;copy&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x672C;&#x8D28;&#x4E5F;&#x662F;&#x901A;&#x8FC7;ssh&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>\n<p>&#x5047;&#x8BBE;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5DF2;&#x7ECF;&#x6709;/opt/git/&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;copy&#x5230;&#x670D;&#x52A1;&#x5668;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scp -r blog.git user@Ip:/opt/git</div></pre></td></tr></table></figure>\n<p>user&#x4E3A;&#x8FDE;&#x63A5;&#x7528;&#x6237;&#xFF0C;&#x4F8B;&#x5982;root&#x3002;&#x5982;&#x679C;&#x53C8;&#x9047;&#x5230;&#x7AEF;&#x53E3;&#x95EE;&#x9898;&#xFF0C;&#x66FF;&#x6362;&#x6210;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scp -P &#x7AEF;&#x53E3; -r blog.git user@IP:/opt/git</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x6CE8;&#x610F;&#x5927;&#x5199;P</p>\n</blockquote>\n<p>&#x5982;&#x679C;&#x901A;&#x8FC7;ssh&#x8FDE;&#x63A5;&#x7684;&#x7528;&#x6237;&#x5BF9;blog.git&#x62E5;&#x6709;&#x53EF;&#x8BFB;&#x6743;&#x9650;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x514B;&#x9686;&#x4F60;&#x7684;&#x4ED3;&#x5E93;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone user@IP:/opt/git/blog.git</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x5982;&#x62E5;&#x6709;&#x53EF;&#x5199;&#x6743;&#x9650;&#xFF0C;&#x4ED6;&#x4E5F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;<strong>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x540E;&#x7EED;&#x4F60;&#x53D1;&#x73B0;&#x64CD;&#x4F5C;&#x4E0D;&#x4E86;&#x4ED3;&#x5E93;&#x65F6;&#xFF0C;&#x5F88;&#x5927;&#x53EF;&#x80FD;&#x662F;&#x8BE5;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x8BFB;&#x6216;&#x5199;&#x6743;&#x9650;</strong>&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x521B;&#x5EFA;git&#x7528;&#x6237;</p>\n<h3 id=\"git&#x7528;&#x6237;&#x4E0E;&#x8BA4;&#x8BC1;\"><a href=\"#git&#x7528;&#x6237;&#x4E0E;&#x8BA4;&#x8BC1;\" class=\"headerlink\" title=\"git&#x7528;&#x6237;&#x4E0E;&#x8BA4;&#x8BC1;\"></a>git&#x7528;&#x6237;&#x4E0E;&#x8BA4;&#x8BC1;</h3><p>&#x56DE;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5BF9;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#x3002;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x4F7F;&#x7528;authorized_keys&#x8FDB;&#x884C;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7528;&#x6237;git&#xFF0C;&#x5E76;&#x4E3A;&#x5B83;&#x5EFA;&#x7ACB;.ssh&#x76EE;&#x5F55;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo adduser git</div><div class=\"line\">su git</div><div class=\"line\">cd</div><div class=\"line\">mkdir .ssh &amp;&amp; chomd 700 .ssh</div><div class=\"line\">touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</div></pre></td></tr></table></figure>\n<p>&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6743;&#x9650;&#x95EE;&#x9898;&#xFF0C;&#x7EC8;&#x6781;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;git&#x6DFB;&#x52A0;&#x5230;sudo&#x7528;&#x6237;&#x7EC4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"># &#x5207;&#x6362;&#x5230;root&#x7528;&#x6237;</div><div class=\"line\">su root</div><div class=\"line\">sudo vi /etc/sudoers</div></pre></td></tr></table></figure>\n<p>&#x6253;&#x5F00;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;:/root&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF0C;&#x5728;root&#x4E0B;&#x6DFB;&#x52A0;git&#x7528;&#x6237;</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">## Next comes the main part: which users can run what software on</div><div class=\"line\">## which machines (the sudoers file can be shared between multiple</div><div class=\"line\">## systems).</div><div class=\"line\">## Syntax:</div><div class=\"line\">##</div><div class=\"line\">##      user    MACHINE=COMMANDS</div><div class=\"line\">##</div><div class=\"line\">## The COMMANDS section may have other options added to it.</div><div class=\"line\">##</div><div class=\"line\">## Allow root to run any commands anywhere</div><div class=\"line\">root    ALL=(ALL)       ALL</div><div class=\"line\">git     ALL=(ALL)       ALL</div><div class=\"line\"></div><div class=\"line\">## Allows members of the &apos;sys&apos; group to run networking, software,</div><div class=\"line\">## service management apps and more.</div><div class=\"line\"># %sys ALL = NETWORKING, SOFTWARE, SERVICES, STORAGE, DELEGATING, PROCESSES, LOCATE, DRIVERS</div></pre></td></tr></table></figure>\n<p>&#x56DE;&#x5230;&#x8BA4;&#x8BC1;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x7CFB;&#x7EDF;&#x7528;&#x6237;git&#x7684;authorized_keys&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x7528;&#x6237;&#x7684;ssh&#x516C;&#x94A5;&#xFF0C;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5BA2;&#x6237;&#x7AEF;&#x751F;&#x6210;&#x7684;&#x516C;&#x94A5;&#x3002;&#x5047;&#x8BBE;&#x4F60;&#x5DF2;&#x7ECF;&#x5C06;id_rsa.pub&#x4FDD;&#x5B58;&#x5230;&#x4E34;&#x65F6;&#x6587;&#x4EF6;/tmp/id_rsa.pub&#x4E2D;&#x3002;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;&#x5C06;&#x516C;&#x94A5;&#x52A0;&#x5165;&#x5230;authorized_keys&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat /tmp/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</div></pre></td></tr></table></figure>\n<p>&#x8BBE;&#x7F6E;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x8FD4;&#x56DE;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;&#x6D4B;&#x8BD5;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x4E0A;&#x670D;&#x52A1;&#x5668;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssh -v git@IP -p &#x7AEF;&#x53E3;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;git&#x670D;&#x52A1;&#x5668;&#x3001;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x4E0E;&#x64CD;&#x4F5C;&#x6743;&#x9650;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x4ED3;&#x5E93;&#x7684;&#x4EBA;&#x5458;&#x6DFB;&#x52A0;&#x4E0E;&#x4ED3;&#x5E93;&#x5206;&#x652F;&#x7B49;&#x7684;&#x64CD;&#x4F5C;&#x6743;&#x9650;&#x9650;&#x5236;&#x3002;&#x8BE5;&#x529F;&#x80FD;&#x5C31;&#x4E5F;&#x5E02;&#x9762;&#x4E0A;&#x7684;&#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5E73;&#x53F0;&#x7C7B;&#x4F3C;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x53BB;&#x7814;&#x7A76;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E00;&#x5927;&#x534A;&#x4E86;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x5668;&#x6307;&#x5411;&#x57DF;&#x540D;&#x4E0E;&#x4EE3;&#x7801;&#x4E0A;&#x4F20;&#x670D;&#x52A1;&#x5668;&#x3002;</p>\n<h2 id=\"Nginx&#x914D;&#x7F6E;\"><a href=\"#Nginx&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Nginx&#x914D;&#x7F6E;\"></a>Nginx&#x914D;&#x7F6E;</h2><p>nginx&#x76F8;&#x4FE1;&#x6216;&#x591A;&#x6216;&#x5C11;&#x90FD;&#x6709;&#x4E00;&#x70B9;&#x63A5;&#x89E6;&#x5427;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x670D;&#x52A1;&#x7AEF;&#x4E0E;&#x524D;&#x7AEF;&#x3002;&#x6700;&#x8FD1;&#x5B66;&#x4E60;&#x4E86;&#x524D;&#x7AEF;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x5DF1;&#x5BF9;nginx&#x4E5F;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x964C;&#x751F;&#x3002;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x524D;&#x7AEF;&#x4E3B;&#x8981;&#x662F;&#x7528;nginx&#x6765;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x4EE3;&#x7406;&#xFF0C;&#x65B9;&#x4FBF;&#x672C;&#x5730;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x73B0;&#x5728;&#x8FDB;&#x884C;nginx&#x914D;&#x7F6E;</p>\n<h3 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h3><p>&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5C31;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x662F;&#x5E78;&#x8FD0;&#x7684;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install nginx</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x4E00;&#x5207;&#x987A;&#x5229;&#xFF0C;&#x8BF7;&#x8DF3;&#x8FC7;&#x5B89;&#x88C5;&#x8FD9;&#x90E8;&#x5206;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x793A;&#x6CA1;&#x6709;&#x627E;&#x5230;nginx&#xFF0C;&#x8BF7;&#x63A5;&#x4E0B;&#x770B;&#x3002;</p>\n<p>&#x7531;&#x4E8E;&#x6211;&#x662F;&#x4F7F;&#x7528;Centos 6&#xFF0C;nginx&#x4F4D;&#x4E8E;&#x7B2C;&#x4E09;&#x65B9;&#x7684;yum&#x6E90;&#x4E2D;&#xFF0C;&#x800C;nginx&#x4E0D;&#x5728;Centos 6&#x5B98;&#x65B9;yum&#x4E2D;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5B89;&#x88C5;epel(Extra Packages for Enterprise Linux)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install epel-release</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x67E5;&#x770B;&#x662F;&#x5426;&#x5728;&#x6E90;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x8FD9;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x80FD;&#x4E0D;&#x5728;&#x6E90;&#x5217;&#x8868;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum repolist</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/06/vps&#x643A;&#x624B;hexo&#x7684;&#x535A;&#x5BA2;&#x642D;&#x5EFA;&#x4E4B;&#x65C5;/1.jpg\" alt=\"\"></p>\n<p>&#x53EA;&#x6709;&#x663E;&#x793A;&#x4E86;epel&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x4F60;&#x6267;&#x884C;nginx&#x7684;&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#x624D;&#x4E0D;&#x4F1A;&#x5931;&#x8D25;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install nginx</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4F60;&#x6267;&#x884C;&#x4E0A;&#x8FF0;&#x547D;&#x4EE4;nginx&#x8FD8;&#x662F;&#x627E;&#x4E0D;&#x5230;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x610F;&#x601D;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x65E0;&#x5934;&#x7EEA;&#x4E3A;&#x4EC0;&#x4E48;&#x4E00;&#x76F4;&#x62A5;nginx&#x627E;&#x4E0D;&#x5230;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x8D70;&#x3002;</p>\n<p>&#x6253;&#x5F00;&#x6587;&#x4EF6;epel.repo&#xFF0C;&#x5C06;&#x5176;&#x4E2D;&#x7684;enable=0&#x6539;&#x4E3A;enable=1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/yum.repos.d/epel.repo</div></pre></td></tr></table></figure>\n<p><img src=\"/2019/01/06/vps&#x643A;&#x624B;hexo&#x7684;&#x535A;&#x5BA2;&#x642D;&#x5EFA;&#x4E4B;&#x65C5;/2.jpg\" alt=\"\"></p>\n<p>&#x7136;&#x540E;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x67E5;&#x770B;epel&#x662F;&#x5426;&#x5B58;&#x5728;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum repolist 2&gt;&amp;1 | grep epel</div><div class=\"line\">epel          Extra Packages for Enterprise Linux 6 - x86_64              12,517</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x5C55;&#x793A;&#x4E86;epel&#xFF0C;&#x4EE3;&#x8868;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x518D;&#x6267;&#x884C;&#x5B89;&#x88C5;nginx&#x7684;&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x6210;&#x529F;&#x4E86;&#x3002;</p>\n<p>&#x5B89;&#x88C5;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x5C06;&#x5176;&#x542F;&#x52A8;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">service nginx start</div><div class=\"line\"># &#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x542F;&#x52A8;</div><div class=\"line\">chkconfig nginx on</div></pre></td></tr></table></figure>\n<p>&#x8FDB;&#x884C;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x670D;&#x52A1;&#x5668;&#x7684;ip&#x590D;&#x5236;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x770B;&#x5230;nginx&#x7684;welcome&#x754C;&#x9762;&#xFF0C;&#x8BF4;&#x660E;nginx&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x3002;</p>\n<h3 id=\"&#x914D;&#x7F6E;\"><a href=\"#&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;\"></a>&#x914D;&#x7F6E;</h3><p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8981;&#x914D;&#x7F6E;nginx&#xFF0C;&#x8BA9;&#x5176;&#x6307;&#x5411;&#x6211;&#x4EEC;&#x7684;blog&#x5730;&#x5740;&#x3002;&#x6253;&#x5F00;nginx&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/nginx/conf.d/default.conf</div></pre></td></tr></table></figure>\n<p>&#x5B89;&#x88C5;&#x5982;&#x4E0B;&#x8BF4;&#x660E;&#x66FF;&#x6362;&#x81EA;&#x5DF1;&#x7684;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">#</div><div class=\"line\"># The default server</div><div class=\"line\">#</div><div class=\"line\"> </div><div class=\"line\">server {</div><div class=\"line\">    listen       80;</div><div class=\"line\">    # listen       [::]:80 default_server;</div><div class=\"line\">    server_name  rousetime.com; # &#x66FF;&#x6362;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x57DF;&#x540D;</div><div class=\"line\">    root         /usr/share/nginx/html/blog; # &#x535A;&#x5BA2;&#x6240;&#x5728;&#x76EE;&#x5F55;</div><div class=\"line\"> </div><div class=\"line\">    # Load configuration files for the default server block.</div><div class=\"line\">    include /etc/nginx/default.d/*.conf;</div><div class=\"line\"> </div><div class=\"line\">    location / {</div><div class=\"line\">        root /usr/share/nginx/html/blog; # &#x535A;&#x5BA2;&#x6240;&#x5728;&#x76EE;&#x5F55;</div><div class=\"line\">        index index.html index.htm;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    error_page 404 /404.html;</div><div class=\"line\">        location = /40x.html {</div><div class=\"line\">        root /usr/share/nginx/html/blog; # &#x535A;&#x5BA2;&#x6240;&#x5728;&#x76EE;&#x5F55;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    error_page 500 502 503 504 /50x.html;</div><div class=\"line\">        location = /50x.html {</div><div class=\"line\">        root /usr/share/nginx/html/blog; # &#x535A;&#x5BA2;&#x6240;&#x5728;&#x76EE;&#x5F55;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>/usr/share/nginx/html/blog</strong>&#x662F;&#x6211;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B58;&#x653E;&#x535A;&#x5BA2;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x8FD9;&#x6837;nginx&#x5C31;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x3002;</p>\n<h2 id=\"&#x672C;&#x5730;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x540C;&#x6B65;\"><a href=\"#&#x672C;&#x5730;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x540C;&#x6B65;\" class=\"headerlink\" title=\"&#x672C;&#x5730;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x540C;&#x6B65;\"></a>&#x672C;&#x5730;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x540C;&#x6B65;</h2><p>&#x73B0;&#x5728;&#x5C31;&#x5269;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x4E86;&#xFF0C;&#x5C06;&#x672C;&#x5730;hexo&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x6BCF;&#x6B21;&#x901A;&#x8FC7;git&#x66F4;&#x65B0;&#x4EE3;&#x7801;&#x540E;&#x90FD;&#x4F1A;&#x540C;&#x6B65;&#x5230;&#x670D;&#x52A1;&#x5668;&#x3002;</p>\n<p>&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5EFA;&#x7ACB;&#x4E86;git&#x670D;&#x52A1;&#x5668;&#x4E0E;git&#x88F8;&#x5E93;&#xFF0C;&#x4E3A;&#x4E86;&#x4E4B;&#x540E;&#x7684;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;&#x5173;&#x8054;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x501F;&#x52A9;git&#x7684;&#x670D;&#x52A1;&#x94A9;&#x5B50;post-receive&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x4ED3;&#x5E93;&#x6536;&#x5230;push&#x4EE3;&#x7801;&#x540E;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x901A;&#x77E5;&#x4E0E;&#x66F4;&#x65B0;&#x7B49;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x5728;blog.git/hooks&#x4E2D;&#x65B0;&#x5EFA;post-receive&#x6587;&#x4EF6; (&#x8FD9;&#x91CC;&#x6211;&#x5DF2;&#x5C06;blog.git&#x8F6C;&#x79FB;&#x5230;git&#x7528;&#x6237;&#x4E0B;/home/git)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">su git</div><div class=\"line\">vi ~/blog.git/hooks/post-receive</div></pre></td></tr></table></figure>\n<p>&#x5411;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF0C;&#x6307;&#x660E;git&#x7684;&#x5DE5;&#x4F5C;&#x6811;&#x8DEF;&#x5F84;&#x4E0E;&#x4ED3;&#x5E93;&#x8DEF;&#x5F84;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">#! /bin/sh</div><div class=\"line\">git --work-tree=/usr/share/nginx/html/blog --git-dir=/home/git/blog.git checkout -f</div></pre></td></tr></table></figure>\n<p>&#x4FDD;&#x5B58;&#x540E;&#x9000;&#x51FA;&#xFF0C;&#x518D;&#x7ED9;&#x5176;&#x8D4B;&#x4E88;&#x53EF;&#x6267;&#x884C;&#x6743;&#x9650;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">chmod +x ~/blog.git/hooks/post-receive</div></pre></td></tr></table></figure>\n<h3 id=\"hexo&#x4EE3;&#x7801;&#x540C;&#x6B65;\"><a href=\"#hexo&#x4EE3;&#x7801;&#x540C;&#x6B65;\" class=\"headerlink\" title=\"hexo&#x4EE3;&#x7801;&#x540C;&#x6B65;\"></a>hexo&#x4EE3;&#x7801;&#x540C;&#x6B65;</h3><p>&#x8FD4;&#x56DE;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6253;&#x5F00;hexo&#x7684;_config.xml&#x6587;&#x4EF6;&#xFF0C;&#x627E;&#x5230;deploy&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x8BBE;&#x7F6E;&#x540E;&#x9762;&#x518D;&#x6DFB;&#x52A0;&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4ED3;&#x5E93;&#x5730;&#x5740;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">deploy:</div><div class=\"line\">- type: git</div><div class=\"line\">  repository: xxx # &#x4E4B;&#x524D;&#x7684;github&#x4ED3;&#x5E93;&#x5730;&#x5740;</div><div class=\"line\">  branch: master</div><div class=\"line\">- type: git</div><div class=\"line\">  # repository: git@rousetime.com:/~/blog.git # &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x751F;&#x6548;&#x4F7F;&#x7528;</div><div class=\"line\">  # repository: ssh://git@rousetime.com:&#x7AEF;&#x53E3;/~/blog.git # &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x4E0D;&#x751F;&#x6548;&#x4F7F;&#x7528;&#xFF0C;&#x8BBE;&#x7F6E;&#x7AEF;&#x53E3;</div><div class=\"line\">  branch: master</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5C06;hexo&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4E2D;&#x7684;github.io&#x57DF;&#x540D;&#x90FD;&#x6362;&#x6210;&#x4F60;&#x81EA;&#x5DF1;&#x7684;</p>\n</blockquote>\n<p>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x63D0;&#x4EA4;&#x4E00;&#x904D;hexo&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hexo clean</div><div class=\"line\">hexo g</div><div class=\"line\">heox d</div></pre></td></tr></table></figure>\n<p>&#x64CD;&#x4F5C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;git&#x5C06;&#x4EE3;&#x7801;push&#x5230;&#x4E4B;&#x524D;&#x7684;github&#x4ED3;&#x5E93;&#x4E0E;&#x6211;&#x4EEC;&#x7684;&#x642D;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4ED3;&#x5E93;&#x3002;</p>\n<p>&#x90E8;&#x7F72;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8F93;&#x5165;&#x57DF;&#x540D;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x8FD9;&#x662F;&#x6211;&#x7684;<a href=\"https://www.rousetime.com\">blog&#x5730;&#x5740;</a>&#x6B22;&#x8FCE;&#x8BBF;&#x95EE;&#x3002;</p>\n<p>&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x6298;&#x817E;&#x4E86;&#x4E00;&#x5929;&#x642D;&#x5EFA;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;&#x5982;&#x6709;&#x4EFB;&#x4F55;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x968F;&#x65F6;@&#x6211;&#x3002;</p>\n<h2 id=\"&#x8D44;&#x6599;\"><a href=\"#&#x8D44;&#x6599;\" class=\"headerlink\" title=\"&#x8D44;&#x6599;\"></a>&#x8D44;&#x6599;</h2><p><a href=\"http://www.voidcn.com/article/p-zqxjbnjm-brx.html\" target=\"_blank\" rel=\"external\">SSH&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x5668;</a><br><a href=\"https://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%90%AD%E5%BB%BA-Git\" target=\"_blank\" rel=\"external\">&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684; Git</a><br><a href=\"https://hexo.io/zh-cn/docs/deployment.html\" target=\"_blank\" rel=\"external\">hexo&#x90E8;&#x7F72;</a><br><a href=\"https://www.binarytides.com/setup-epel-repository-centos/\" target=\"_blank\" rel=\"external\">EPEL</a><br><a href=\"https://unix.stackexchange.com/questions/165916/trying-to-enable-epel-on-centos-6-and-it-wont-show-in-repolist\" target=\"_blank\" rel=\"external\">EPEL&#x672A;&#x6FC0;&#x6D3B;&#x89E3;&#x51B3;&#x65B9;&#x6848;</a><br><a href=\"https://teddysun.com/342.html\" target=\"_blank\" rel=\"external\">Shadowsocks Python&#x7248;&#x4E00;&#x952E;&#x5B89;&#x88C5;&#x811A;&#x672C;</a></p>\n<p><img src=\"/2019/01/06/vps&#x643A;&#x624B;hexo&#x7684;&#x535A;&#x5BA2;&#x642D;&#x5EFA;&#x4E4B;&#x65C5;/wx_qr_code.png\" alt=\"\"></p>\n"},{"title":"你不该忽略的LaunchMode","url":"https://www.rousetime.com/2019/01/03/你不该忽略的LaunchMode/","content":"<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x5FFD;&#x89C6;&#x6389;Activity&#x7684;&#x542F;&#x52A8;&#x65B9;&#x5F0F;launchMode&#x3002;&#x6BCF;&#x6B21;&#x65B0;&#x5EFA;Activity&#x65F6;&#xFF0C;&#x5185;&#x5FC3;&#x90FD;&#x8981;&#x95EE;&#x95EE;&#x81EA;&#x5DF1;&#x8FD9;&#x4E2A;&#x754C;&#x9762;&#x542F;&#x52A8;&#x573A;&#x666F;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5B83;&#x5E94;&#x8BE5;&#x9002;&#x5E94;&#x4E8E;&#x54EA;&#x79CD;&#x542F;&#x52A8;&#x65B9;&#x5F0F;&#xFF1F;&#x5982;&#x679C;&#x8981;&#x5FEB;&#x901F;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9;launchMode&#x7684;&#x56DB;&#x79CD;&#x542F;&#x52A8;&#x65B9;&#x5F0F;&#x4E86;&#x7136;&#x4E8E;&#x80F8;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x9010;&#x4E00;&#x901A;&#x8FC7;&#x7B80;&#x6D01;&#x7684;&#x8BED;&#x8A00;&#x4ECB;&#x7ECD;&#x5B83;&#x4EEC;&#x7684;&#x610F;&#x4E49;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E00;&#x53E5;&#x8BDD;&#x6765;&#x603B;&#x7ED3;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FC5;&#x901F;&#x4E86;&#x7136;&#x4E8E;&#x80F8;&#x3002;</p>\n<h2 id=\"standard\"><a href=\"#standard\" class=\"headerlink\" title=\"standard\"></a>standard</h2><p>&#x5982;&#x679C;&#x4E0D;&#x5BF9;&#x65B0;&#x5EFA;&#x7684;Activity&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x5B83;&#x5728;&#x6E05;&#x5355;&#x6587;&#x4EF6;&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;launchMode&#x4E3A;standard</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;activity </div><div class=\"line\">\tandroid:name=&quot;.MainActivity&quot;</div><div class=\"line\">\tandroid:launchMode=&quot;standard&quot;&gt;</div><div class=\"line\">&lt;/activity&gt;</div></pre></td></tr></table></figure>\n<p>&#x4EA6;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x6CA1;&#x6709;launchMode&#xFF0C;&#x4F46;&#x5185;&#x90E8;&#x9ED8;&#x8BA4;&#x8FD8;&#x662F;standard&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x542F;&#x52A8;&#x7684;Activity&#x7684;&#x4FDD;&#x5B58;&#x5728;stack&#x4E2D;&#xFF0C;&#x5047;&#x8BBE;&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x6B64;&#x65F6;&#x6211;&#x4E3A;B&#x6DFB;&#x52A0;launchMode=&#x201D;standard&#x201D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;D&#x4E2D;&#x542F;&#x52A8;B&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>B &#xFF08;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;B&#xFF09;</li>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x6240;&#x4EE5;standard&#x6A21;&#x5F0F;&#x8868;&#x73B0;&#x4E3A;&#xFF1A;<strong>&#x4E0D;&#x5173;&#x5FC3;&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#xFF0C;&#x5B83;&#x603B;&#x4F1A;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x52A0;&#x5165;&#x5F53;&#x524D;&#x5806;&#x6808;&#x4E2D;</strong>&#x3002;</p>\n<h2 id=\"singleTop\"><a href=\"#singleTop\" class=\"headerlink\" title=\"singleTop\"></a>singleTop</h2><p>1.&#x8FD8;&#x662F;&#x4E4B;&#x524D;&#x7684;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x73B0;&#x5728;&#x6211;&#x5BF9;C&#x6DFB;&#x52A0;launchMode=&#x201D;singleTop&#x201D;&#xFF0C;&#x5E76;&#x5728;D&#x4E2D;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;&#x7684;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;C&#xFF09;</li>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x8868;&#x73B0;&#x65B9;&#x5F0F;&#x4E0E;&#x9ED8;&#x8BA4;&#x7684;standard&#x6A21;&#x5F0F;&#x4E00;&#x81F4;</p>\n<p>2.&#x5982;&#x679C;&#x6211;&#x5C06;&#x4E4B;&#x524D;&#x7684;Activity&#x5806;&#x6808;&#x7A0D;&#x4F5C;&#x4FEE;&#x6539;</p>\n<ul>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x518D;&#x6B21;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x4E4B;&#x524D;&#x7684;&#x5B9E;&#x4F8B;C&#xFF0C;&#x65B0;&#x7684;intent&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;onNewIntent&#x83B7;&#x53D6;&#xFF09;</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>3.&#x5982;&#x679C;&#x4E4B;&#x524D;&#x7684;Activity&#x5806;&#x6808;&#x4E2D;&#x6CA1;&#x6709;C</p>\n<ul>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x518D;&#x6B21;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;C&#xFF09;</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x8868;&#x73B0;&#x65B9;&#x5F0F;&#x4E0E;&#x9ED8;&#x8BA4;&#x7684;standard&#x6A21;&#x5F0F;&#x4E00;&#x81F4;</p>\n<p>&#x6240;&#x4EE5;singleTop&#x6A21;&#x5F0F;&#x8868;&#x73B0;&#x4E3A;&#xFF1A;<strong>&#x53EA;&#x5173;&#x5FC3;&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x7684;&#x6808;&#x9876;&#x662F;&#x5426;&#x5B58;&#x5728;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x5B9E;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5219;&#x4E0D;&#x65B0;&#x5EFA;&#x5B9E;&#x4F8B;&#xFF1B;&#x5426;&#x5219;&#x65B0;&#x5EFA;&#x5B9E;&#x4F8B;</strong></p>\n<h2 id=\"singleTask\"><a href=\"#singleTask\" class=\"headerlink\" title=\"singleTask\"></a>singleTask</h2><p>1.&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x73B0;&#x5728;&#x6211;&#x5BF9;C&#x6DFB;&#x52A0;launchMode=&#x201D;singleTask&#x201D;&#xFF0C;&#x5E76;&#x5728;D&#x4E2D;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x4E4B;&#x524D;&#x7684;&#x5B9E;&#x4F8B;C&#xFF0C;&#x65B0;&#x7684;intent&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;onNewIntent&#x83B7;&#x53D6;&#xFF09;</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>D&#x4F1A;&#x88AB;&#x4ECE;Activity&#x5806;&#x6808;&#x4E2D;&#x79FB;&#x9664;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x590D;&#x7528;&#x4E4B;&#x524D;&#x7684;&#x5B9E;&#x4F8B;</p>\n<p>2.&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x518D;&#x6B21;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x4E4B;&#x524D;&#x7684;&#x5B9E;&#x4F8B;C&#xFF0C;&#x65B0;&#x7684;intent&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;onNewIntent&#x83B7;&#x53D6;&#xFF09;</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x8868;&#x73B0;&#x65B9;&#x5F0F;&#x4E0E;singlTop&#x6A21;&#x5F0F;&#x4E00;&#x81F4;</p>\n<p>3.&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x518D;&#x6B21;&#x542F;&#x52A8;C&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>C &#xFF08;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;C&#xFF09;</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x8868;&#x73B0;&#x65B9;&#x5F0F;&#x4E0E;&#x9ED8;&#x8BA4;&#x7684;standard&#x6A21;&#x5F0F;&#x4E00;&#x81F4;</p>\n<p>&#x6240;&#x4EE5;singleTask&#x8868;&#x73B0;&#x4E3A;&#xFF1A;<strong>&#x53EA;&#x5173;&#x5FC3;&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x5B9E;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5219;&#x5148;&#x5C06;&#x5B83;&#x9876;&#x90E8;&#x6240;&#x6709;&#x5806;&#x6808;&#x5B9E;&#x4F8B;&#x51FA;&#x6808;&#xFF0C;&#x4F7F;&#x5176;&#x56DE;&#x5230;&#x6808;&#x9876;&#xFF0C;&#x518D;&#x590D;&#x7528;&#x5F53;&#x524D;&#x6808;&#x9876;&#x5B9E;&#x4F8B;&#xFF0C;&#x5426;&#x5219;&#x65B0;&#x5EFA;&#x5B9E;&#x4F8B;</strong></p>\n<h2 id=\"singleInstance\"><a href=\"#singleInstance\" class=\"headerlink\" title=\"singleInstance\"></a>singleInstance</h2><p>1.&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x73B0;&#x5728;&#x6211;&#x4E3A;E&#x6DFB;&#x52A0;launchMode=&#x201D;singleInstance&#x201D;&#xFF0C;&#x7136;&#x540E;&#x5728;D&#x4E2D;&#x542F;&#x52A8;E&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<p>&#x7B2C;&#x4E00;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x7B2C;&#x4E8C;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>E</li>\n</ul>\n<p>&#x4F60;&#x4F1A;&#x53D1;&#x73B0;E&#x4E0D;&#x5B58;&#x5728;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x5806;&#x6808;&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x65B0;&#x5F00;&#x4E00;&#x4E2A;Activity&#x5806;&#x6808;&#x3002;</p>\n<p>2.&#x5982;&#x679C;&#x5728;1&#x7684;&#x7ED3;&#x679C;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x6211;&#x5728;E&#x4E2D;&#x7EE7;&#x7EED;&#x542F;&#x52A8;F&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<p>&#x7B2C;&#x4E00;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>F</li>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x7B2C;&#x4E8C;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>E</li>\n</ul>\n<p>&#x540E;&#x7EED;&#x542F;&#x52A8;&#x7684;&#x5B9E;&#x4F8B;&#x8FD8;&#x662F;&#x4F1A;&#x52A0;&#x5165;&#x5230;&#x4E4B;&#x524D;&#x7684;Activity&#x5806;&#x6808;&#x4E2D;&#x3002;</p>\n<p>3.&#x5F53;&#x524D;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<p>&#x7B2C;&#x4E00;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x7B2C;&#x4E8C;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>E</li>\n</ul>\n<p>&#x73B0;&#x5728;&#x6211;&#x5728;D&#x4E2D;&#x542F;&#x52A8;E&#xFF0C;&#x6B64;&#x65F6;Activity&#x5806;&#x6808;&#x4E3A;</p>\n<p>&#x7B2C;&#x4E00;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>D</li>\n<li>C</li>\n<li>B</li>\n<li>A</li>\n</ul>\n<p>&#x7B2C;&#x4E8C;&#x4E2A;Activity&#x5806;&#x6808;</p>\n<ul>\n<li>E &#xFF08;&#x4E4B;&#x524D;&#x7684;&#x5B9E;&#x4F8B;E&#xFF0C;&#x65B0;&#x7684;intent&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;onNewIntent&#x83B7;&#x53D6;&#xFF09;</li>\n</ul>\n<p>E&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;&#x5355;&#x72EC;&#x7684;Activity&#x5806;&#x6808;&#x4E2D;&#xFF0C;&#x4E0D;&#x4F1A;&#x518D;&#x65B0;&#x5EFA;&#x5B9E;&#x4F8B;</p>\n<p>&#x6240;&#x4EE5;singleInstance&#x8868;&#x73B0;&#x4E3A;&#xFF1A;<strong>&#x53EA;&#x5173;&#x5FC3;&#x81EA;&#x5DF1;&#x662F;&#x5426;&#x5904;&#x4E8E;&#x5355;&#x72EC;&#x7684;Activity&#x5806;&#x6808;&#x4E2D;&#xFF0C;&#x5373;&#x5806;&#x6808;&#x4E2D;&#x53EA;&#x80FD;&#x6709;&#x5B83;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E5F;&#x4E0D;&#x65B0;&#x52A0;&#x5176;&#x5B83;&#x5B9E;&#x4F8B;&#xFF1B;&#x5426;&#x5219;&#x65B0;&#x5F00;Activity&#x5806;&#x6808;</strong></p>\n<h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x4F60;&#x5DF2;&#x7ECF;&#x5BF9;&#x8FD9;&#x56DB;&#x79CD;&#x542F;&#x52A8;&#x6A21;&#x5F0F;&#x6709;&#x4E86;&#x5168;&#x65B0;&#x7684;&#x7406;&#x89E3;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x6211;&#x60F3;&#x95EE;&#x7684;&#x662F;&#xFF1A;&#x4F60;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x4E86;&#x7136;&#x4E8E;&#x80F8;&#x4E86;&#xFF1F;</p>\n<p><img src=\"/2019/01/03/&#x4F60;&#x4E0D;&#x8BE5;&#x5FFD;&#x7565;&#x7684;LaunchMode/wx_qr_code.png\" alt=\"\"></p>\n"},{"title":"React Native Fetch封装那点事...","url":"https://www.rousetime.com/2018/08/28/React-Native-Fetch封装那点事/","content":"<p>&#x6BCF;&#x4E00;&#x95E8;&#x8BED;&#x8A00;&#x90FD;&#x79BB;&#x4E0D;&#x5F00;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x5957;Networking Api&#x3002;React Native&#x4F7F;&#x7528;&#x7684;&#x662F;Fetch&#x3002;    &#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x6765;&#x8C08;&#x8C08;&#x4E0E;Fetch&#x76F8;&#x5173;&#x7684;&#x4E00;&#x4E9B;&#x4E8B;&#x60C5;&#x3002;</p>\n<h2 id=\"purpose\"><a href=\"#purpose\" class=\"headerlink\" title=\"purpose\"></a>purpose</h2><p>&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x4F60;&#x5C06;&#x4E86;&#x89E3;&#x5230;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#x5173;&#x4E8E;Fetch&#x7684;&#x72EC;&#x5BB6;&#x62A5;&#x9053;</p>\n<ul>\n<li>Fetch&#x7684;&#x7B80;&#x5355;&#x8FD0;&#x7528;</li>\n<li>Fetch&#x7684;&#x4E3B;&#x8981;Api</li>\n<li>Fetch&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</li>\n<li>Fetch&#x7684;Promise&#x5C01;&#x88C5;</li>\n</ul>\n<h2 id=\"fetch\"><a href=\"#fetch\" class=\"headerlink\" title=\"fetch\"></a>fetch</h2><p>fetch&#x7684;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x4F20;&#x5165;&#x8BF7;&#x6C42;&#x7684;url</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetch(&apos;https://facebook.github.io/react-native/movies.json&apos;);</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x662F;&#x5426;&#x8BF7;&#x6C42;&#x6210;&#x529F;&#x4E0E;&#x6570;&#x636E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x5904;&#x7406;&#x6210;&#x529F;&#x4E0E;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">function getMoviesFromApiAsync() {</div><div class=\"line\">  return fetch(&apos;https://facebook.github.io/react-native/movies.json&apos;)</div><div class=\"line\">    .then((response) =&gt; response.json())</div><div class=\"line\">    .then((responseJson) =&gt; {</div><div class=\"line\">      return responseJson.movies;</div><div class=\"line\">    })</div><div class=\"line\">    .catch((error) =&gt; {</div><div class=\"line\">      console.error(error);</div><div class=\"line\">    });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;response.json()&#x5C06;&#x8BF7;&#x6C42;&#x7684;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x8F6C;&#x5316;&#x6210;json&#x6570;&#x636E;&#x4EE5;&#x4FBF;&#x4F7F;&#x7528;&#x3002;&#x901A;&#x8FC7;<code>.then</code>&#x6765;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#x5904;&#x7406;&#x6216;&#x6700;&#x7EC8;&#x66B4;&#x9732;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#xFF1B;<code>.catch</code>&#x5BF9;&#x5F02;&#x5E38;&#x7684;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x8BE5;&#x8BF7;&#x6C42;&#x9ED8;&#x8BA4;&#x662F;get&#x65B9;&#x5F0F;&#x3002;&#x90A3;&#x4E48;post&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x8BF7;&#x6C42;&#x5462;&#xFF1F;</p>\n<h2 id=\"Api-amp-Note\"><a href=\"#Api-amp-Note\" class=\"headerlink\" title=\"Api &amp; Note\"></a>Api &amp; Note</h2><p>&#x5728;fetch&#x4E2D;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F20;&#x5165;url&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#xFF0C;&#x5176;&#x5B9E;&#x5185;&#x90E8;&#x672C;&#x8D28;&#x662F;&#x4F7F;&#x7528;&#x4E86;Request&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x662F;&#x5C06;url&#x51FA;&#x5165;&#x5230;&#x4E86;Request&#x5BF9;&#x8C61;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">const myRequest = new Request(&apos;https://facebook.github.io/react-native/movies.json&apos;);</div><div class=\"line\"> </div><div class=\"line\">const myURL = myRequest.url; // https://facebook.github.io/react-native/movies.jsonflowers.jpg</div><div class=\"line\">const myMethod = myRequest.method; // GET</div><div class=\"line\"> </div><div class=\"line\">fetch(myRequest)</div><div class=\"line\">  .then(response =&gt; response.json())</div><div class=\"line\">  .then(responseJson =&gt; {</div><div class=\"line\">    //todo</div><div class=\"line\">  });</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BF7;&#x6C42;post&#xFF0C;&#x9700;&#x8981;&#x6539;&#x53D8;Request&#x7684;method&#x5C5E;&#x6027;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetch(&apos;https://mywebsite.com/endpoint/&apos;, {</div><div class=\"line\">  method: &apos;POST&apos;,</div><div class=\"line\">  headers: {</div><div class=\"line\">    Accept: &apos;application/json&apos;,</div><div class=\"line\">    &apos;Content-Type&apos;: &apos;application/json&apos;,</div><div class=\"line\">  },</div><div class=\"line\">  body: JSON.stringify({</div><div class=\"line\">    firstParam: &apos;yourValue&apos;,</div><div class=\"line\">    secondParam: &apos;yourOtherValue&apos;,</div><div class=\"line\">  }),</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x5728;url&#x540E;&#x76F4;&#x63A5;&#x4F20;&#x5165;{}&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x4E2D;&#x6307;&#x5B9A;method&#x4F7F;&#x7528;post&#x3002;</p>\n<p>&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x90FD;&#x77E5;&#x9053;get&#x4E0E;post&#x7684;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x662F;get&#x53EF;&#x4EE5;&#x5728;url&#x4E0A;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#xFF0C;&#x800C;post&#x4E3A;&#x4E86;&#x5B89;&#x5168;&#x90FD;&#x4E0D;&#x91C7;&#x7528;&#x76F4;&#x63A5;&#x5C06;&#x53C2;&#x6570;&#x8FFD;&#x52A0;&#x5230;url&#x4E0A;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;body&#x6765;&#x4F20;&#x7ED9;service&#x7AEF;&#x3002;</p>\n<p>&#x5728;&#x4F7F;&#x7528;body&#x524D;&#xFF0C;&#x8FD9;&#x91CC;&#x8FD8;&#x9700;&#x77E5;&#x9053;headers&#x3002;&#x4E0B;&#x9762;&#x67D0;&#x4E2A;post&#x8BF7;&#x6C42;&#x7684;headers&#x4FE1;&#x606F;</p>\n<p><img src=\"/2018/08/28/React-Native-Fetch&#x5C01;&#x88C5;&#x90A3;&#x70B9;&#x4E8B;/fetch_headers.jpg\" alt=\"\"></p>\n<blockquote>\n<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;Content-Type&#x5B57;&#x6BB5;&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7684;&#x662F;service&#x7AEF;&#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x56FE;&#x7247;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F;application/x-www-form-urlencoded&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x7684;body&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x3002;&#x53EA;&#x6709;&#x5339;&#x914D;Content-Type&#x7684;&#x7C7B;&#x578B;&#x624D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x4F20;&#x9012;&#x53C2;&#x6570;&#x4FE1;&#x606F;&#x3002;</p>\n</blockquote>\n<p>&#x793A;&#x4F8B;&#x7684;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x7684;&#x662F;application/json&#xFF0C;&#x6240;&#x4EE5;body&#x4F7F;&#x7528;Json.stringify()&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x8F6C;&#x6362;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;Content-Type&#x4E3A;application/x-www-form-urlencoded&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;queryString.stringify()&#x3002;</p>\n<p>Request&#x4E2D;&#x9664;&#x4E86;method&#x3001;headers&#x4E0E;body&#xFF0C;&#x8FD8;&#x6709;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;</p>\n<ul>\n<li>Request.cache: &#x8BF7;&#x6C42;&#x7684;&#x7F13;&#x5B58;&#x6A21;&#x5F0F;(default/reload/no-cache)</li>\n<li>Request.context: &#x8BF7;&#x6C42;&#x7684;&#x4E0A;&#x4E0B;&#x6587;(audio/image/iframe)</li>\n<li>Request.credentials: &#x8BF7;&#x6C42;&#x7684;&#x8BC1;&#x4E66;(omit/same-origin/include)</li>\n<li>Request.destination: &#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x63CF;&#x8FF0;&#x7C7B;&#x578B;</li>\n<li>Request.integrity: &#x8BF7;&#x6C42;&#x7684; subresource integrity </li>\n<li>Request.mode: &#x8BF7;&#x6C42;&#x7684;&#x6A21;&#x5F0F;(cors/no-cors/same-origin/navigate)</li>\n<li>Request.redirect: &#x8BF7;&#x6C42;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x65B9;&#x5F0F;(follow/error/manual)</li>\n<li>Request.referrer: &#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;(client)</li>\n<li>Request.referrerPolicy: &#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;&#x653F;&#x7B56;(no-referrer)</li>\n<li>Request.bodyUsed: &#x58F0;&#x660E;body&#x662F;&#x5426;&#x4F7F;&#x7528;&#x5728;response&#x4E2D;</li>\n</ul>\n<p>&#x8BF7;&#x6C42;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528;.then&#x6765;&#x8F6C;&#x6362;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x591A;&#x7684;&#x662F;Body.json()&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x7684;&#x51E0;&#x79CD;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x7C7B;&#x578B;</p>\n<ul>\n<li>Body.arrayBuffer</li>\n<li>Body.blob</li>\n<li>Body.formData</li>\n<li>Body.text</li>\n</ul>\n<p>&#x4EE5;&#x4E0A;&#x662F;fetch&#x8BF7;&#x6C42;&#x76F8;&#x5173;&#x7684;&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x6709;&#x6240;&#x4E86;&#x89E3;&#xFF0C;&#x90A3;&#x4E48;&#x606D;&#x559C;&#x4F60;&#x5BF9;fetch&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x5DF2;&#x7ECF;&#x8FC7;&#x5173;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x5BF9;fetch&#x7684;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#x3002;</p>\n<h2 id=\"&#x5C01;&#x88C5;\"><a href=\"#&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"&#x5C01;&#x88C5;\"></a>&#x5C01;&#x88C5;</h2><p>&#x5728;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;url&#x7684;host&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x8BF7;&#x6C42;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x4E0E;&#x53C2;&#x6570;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x73AF;&#x5883;(debug|release)&#x8BF7;&#x6C42;&#x7684;&#x65B9;&#x5F0F;&#x4E5F;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x5728;debug&#x73AF;&#x5883;&#x4E2D;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8C03;&#x8BD5;&#x67E5;&#x770B;&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;&#x662F;&#x5426;&#x6B63;&#x786E;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528;get&#x6765;&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5C01;&#x88C5;&#x4E4B;&#x524D;&#x8981;&#x660E;&#x786E;&#x4EC0;&#x4E48;&#x662F;&#x4E0D;&#x53D8;&#x7684;&#xFF0C;&#x4EC0;&#x4E48;&#x662F;&#x53D8;&#x5316;&#x7684;&#xFF0C;&#x6210;&#x529F;&#x4E0E;&#x5931;&#x8D25;&#x7684;&#x54CD;&#x5E94;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x7F57;&#x5217;&#x4E00;&#x4E0B;&#x5C01;&#x88C5;&#x9700;&#x8981;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p>\n<ul>\n<li>&#x4E0D;&#x53D8;&#x7684;: host,headers,body.json()</li>\n<li>&#x53D8;&#x5316;&#x7684;: url,method,body</li>\n<li>&#x54CD;&#x5E94;&#x65B9;&#x5F0F;: Promise(resolve/reject)</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">function convertUrl(url, params) {</div><div class=\"line\">    let realUrl = ApiModule.isDebug?</div><div class=\"line\">        url + &quot;?&quot; + queryString.stringify(Object.assign({}, params, commonParams)) : url;</div><div class=\"line\"></div><div class=\"line\">    if (ApiModule.isDebug) {</div><div class=\"line\">        console.log(&quot;request: &quot; + realUrl);</div><div class=\"line\">    }</div><div class=\"line\">    return realUrl;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x5BF9;url&#x4E0E;&#x53C2;&#x6570;params&#x8FDB;&#x884C;&#x62FC;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x4E3A;debug&#x6A21;&#x5F0F;&#x5C06;params&#x62FC;&#x63A5;&#x5230;url&#x540E;&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5230;&#x4E86;Object.assign()&#x5C06;params&#x4E0E;commonParams&#x7EC4;&#x5408;&#x6210;&#x4E00;&#x4E2A;{}&#x5BF9;&#x8C61;&#x3002;&#x6700;&#x7EC8;&#x901A;&#x8FC7;queryString.stringify&#x8F6C;&#x5316;&#x6210;string&#x3002;</p>\n<blockquote>\n<p>ApiModule.isDebug&#x662F;&#x539F;&#x751F;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x503C;&#xFF0C;&#x5BF9;&#x4E8E;Android/IOS&#x53EA;&#x9700;&#x4F20;&#x9012;&#x81EA;&#x5DF1;&#x7684;ApiModule&#x5373;&#x53EF;&#x3002;</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">function getMethod() {</div><div class=\"line\">    return ApiModule.isDebug? &quot;get&quot;: &quot;post&quot;;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x8FF0;&#x63D0;&#x5230;&#x7684;get&#x4E0E;post&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#x673A;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">const headers = {</div><div class=\"line\">    Accept: &apos;application/json&apos;,</div><div class=\"line\">    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</div><div class=\"line\">};</div></pre></td></tr></table></figure>\n<p>&#x5728;headers&#x4E2D;Content-Type&#x7C7B;&#x578B;&#x4E3A;application/x-www-form-urlencode</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">function convertBody(params) {</div><div class=\"line\">    return ApiModule.isDebug? undefined : queryString.stringify(Object.assign({}, params, commonParams));</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;debug&#x6A21;&#x5F0F;&#x4F7F;&#x7528;&#x7684;&#x662F;get&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;get&#x89C4;&#x5B9A;&#x662F;&#x4E0D;&#x80FD;&#x6709;body&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E86;undefined&#x6765;&#x6807;&#x8BC6;&#x3002;&#x540C;&#x65F6;&#x4E3A;&#x4E86;&#x5339;&#x914D;headers&#x4E2D;&#x7684;Content-Type&#xFF0C;params&#x7684;&#x8F6C;&#x5316;&#x5FC5;&#x987B;&#x4F7F;&#x7528;queryString.stringify&#xFF1B;&#x5982;&#x679C;&#x63A5;&#x53D7;&#x7684;&#x662F;json,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;JSON.stringify&#x3002;</p>\n<p>&#x5B9A;&#x4E49;&#x5B8C;&#x4E4B;&#x540E;fetch&#x5BF9;&#x5916;&#x53EA;&#x9700;&#x63A5;&#x53D7;params&#x53C2;&#x6570;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">async function fetchRequest(params){</div><div class=\"line\">    let body = convertBody(params);</div><div class=\"line\">    fetch(convertUrl(baseUrl, params),{</div><div class=\"line\">        method: method,</div><div class=\"line\">        headers: headers,</div><div class=\"line\">        body: body</div><div class=\"line\">    })</div><div class=\"line\">    .then((response) =&gt; response.json())</div><div class=\"line\">    .then((responseJson) =&gt; {</div><div class=\"line\">        //todo success</div><div class=\"line\">    })</div><div class=\"line\">    .catch((error) =&gt; {</div><div class=\"line\">        if (ApiModule.isDebug) {</div><div class=\"line\">            console.error(&quot;request error: &quot; + error);</div><div class=\"line\">        };</div><div class=\"line\">        //todo error</div><div class=\"line\">    });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>fetch&#x7684;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;&#x5B8C;&#x6210;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x7684;&#x6210;&#x529F;&#x4E0E;&#x5931;&#x8D25;&#x7684;&#x72B6;&#x6001;&#x5E76;&#x6CA1;&#x6709;&#x901A;&#x77E5;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x673A;&#x5236;&#x3002;Promise&#x662F;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x6700;&#x7EC8;&#x5B8C;&#x6210;&#x6216;&#x8005;&#x5931;&#x8D25;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x51FD;&#x6570;resolve&#x3001;reject</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">const p = new Promise((resolve, reject){</div><div class=\"line\">\t...</div><div class=\"line\">\t//success</div><div class=\"line\">\tresolve(&apos;success&apos;)</div><div class=\"line\">\t//error</div><div class=\"line\">\treject(&apos;error&apos;)</div><div class=\"line\">});</div><div class=\"line\">//use</div><div class=\"line\">p.then(success =&gt; {</div><div class=\"line\">\t\tconsole.log(success);</div><div class=\"line\">\t}, error =&gt; {</div><div class=\"line\">  \t\tconsole.log(error)\t</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5C06;fetch&#x8BF7;&#x6C42;&#x653E;&#x5165;&#x5230;Promise&#x7684;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x65E6;&#x6570;&#x636E;&#x6210;&#x529F;&#x8FD4;&#x56DE;&#x5C31;&#x8C03;&#x7528;resolve&#x51FD;&#x6570;&#x56DE;&#x8C03;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#xFF1B;&#x5931;&#x8D25;&#x8C03;&#x7528;reject&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x5931;&#x8D25;&#x4FE1;&#x606F;&#x3002;&#x800C;&#x8C03;&#x7528;&#x8005;&#x53EA;&#x9700;&#x4F7F;&#x7528;Promise&#x7684;.then&#x65B9;&#x6CD5;&#x7B49;&#x5019;&#x6570;&#x636E;&#x7684;&#x56DE;&#x8C03;&#x901A;&#x77E5;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x5B8C;&#x6574;&#x7684;fetch&#x5C01;&#x88C5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">async function fetchRequest(params){</div><div class=\"line\">    let body = convertBody(params);</div><div class=\"line\">    return new Promise(function(resolve, reject){</div><div class=\"line\">        fetch(convertUrl(baseUrl, params),{</div><div class=\"line\">            method: method,</div><div class=\"line\">            headers: headers,</div><div class=\"line\">            body: body</div><div class=\"line\">        })</div><div class=\"line\">        .then((response) =&gt; response.json())</div><div class=\"line\">        .then((responseJson) =&gt; {</div><div class=\"line\">            resolve(responseJson);</div><div class=\"line\">        })</div><div class=\"line\">        .catch((error) =&gt; {</div><div class=\"line\">            if (ApiModule.isDebug) {</div><div class=\"line\">                console.error(&quot;request error: &quot; + error);</div><div class=\"line\">            };</div><div class=\"line\">            reject(error);</div><div class=\"line\">        });</div><div class=\"line\">    });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E4B;&#x540E;&#x5BF9;fetch&#x7684;&#x4F7F;&#x7528;&#x5C31;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x53EA;&#x9700;&#x4F20;&#x5165;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">fetchRequest({method: &quot;goods.getInfo&quot;, goodsId: 27021599158370074})</div><div class=\"line\">.then(res =&gt;{</div><div class=\"line\">    this.setState({</div><div class=\"line\">        shareInfo: res.data.shareInfo</div><div class=\"line\">    });</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x4EE5;&#x4E0A;&#x662F;&#x6709;&#x5173;fetch&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;&#xFF0C;&#x5F53;&#x7136;&#x5728;React Native&#x4E2D;&#x8FD8;&#x6709;&#x5176;&#x5B83;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x8BF7;&#x6C42;&#x5E93;&#xFF1A;XMLHttpRequest&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x652F;&#x6301;WebSockets&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x53BB;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#xFF0C;&#x76F8;&#x4FE1;&#x4F1A;&#x6709;&#x4E0D;&#x9519;&#x7684;&#x6536;&#x83B7;&#x3002;</p>\n<p>&#x62C9;&#x7C89;&#x73AF;&#x8282;&#xFF1A;&#x611F;&#x89C9;&#x4E0D;&#x9519;&#x7684;&#x53EF;&#x4EE5;&#x6765;&#x4E00;&#x6CE2;&#x5173;&#x6CE8;&#xFF0C;&#x626B;&#x63CF;&#x4E0B;&#x65B9;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x53CA;&#x65F6;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x77E5;&#x8BC6;&#x6280;&#x5DE7;&#x3002;</p>\n<p><img src=\"/2018/08/28/React-Native-Fetch&#x5C01;&#x88C5;&#x90A3;&#x70B9;&#x4E8B;/wx_qr_code.png\" alt=\"\"></p>\n"},{"title":"5分钟吃透React Native Flexbox","url":"https://www.rousetime.com/2018/08/23/5分钟吃透React-Native-Flexbox/","content":"<p>&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x6765;&#x804A;&#x804A;Flexbox&#xFF0C;&#x5B83;&#x662F;&#x524D;&#x7AEF;&#x7684;&#x4E00;&#x4E2A;&#x5E03;&#x5C40;&#x65B9;&#x5F0F;&#x3002;&#x5728;React Native&#x4E2D;&#x662F;&#x4E3B;&#x6D41;&#x5E03;&#x5C40;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x521A;&#x521A;&#x5165;&#x95E8;React Native&#xFF0C;&#x6216;&#x8005;&#x6CA1;&#x6709;&#x591A;&#x5C11;&#x524D;&#x7AEF;&#x7684;&#x6280;&#x672F;&#x7ECF;&#x9A8C;&#xFF0C;&#x4EA6;&#x6216;&#x8005;&#x5BF9;&#x5176;&#x534A;&#x77E5;&#x534A;&#x89E3;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x5F88;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x4F60;&#x53C2;&#x900F;Flexbox&#x7684;&#x6574;&#x4E2A;&#x5168;&#x8C8C;&#x3002;</p>\n<h2 id=\"purpose\"><a href=\"#purpose\" class=\"headerlink\" title=\"purpose\"></a>purpose</h2><p>&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4F60;&#x5C06;&#x5FEB;&#x901F;&#x5403;&#x900F;&#x6574;&#x4E2A;Flexbox&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E8E;Flexbox&#x4F60;&#x53EA;&#x9700;&#x638C;&#x63E1;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#x5C5E;&#x6027;&#x5373;&#x53EF;&#x3002;</p>\n<ul>\n<li>flex</li>\n<li>flexDirection</li>\n<li>justifyContent</li>\n<li>alignItems</li>\n<li>flexWrap</li>\n<li>alignSelf</li>\n</ul>\n<h2 id=\"flex\"><a href=\"#flex\" class=\"headerlink\" title=\"flex\"></a>flex</h2><p>Flexbox&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5F39;&#x6027;&#x5E03;&#x5C40;&#xFF0C;&#x5B83;&#x6709;&#x4E2A;&#x5C5E;&#x6027;flex&#x7528;&#x6765;&#x63A7;&#x5236;&#x5B83;&#x7684;&#x5F39;&#x6027;&#x3002;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E0E;Android&#x5E03;&#x5C40;&#x4E2D;&#x7684;weight&#x5C5E;&#x6027;&#x3002;&#x5F53;&#x7136;&#x4E0E;&#x524D;&#x7AEF;&#x7684;css&#x4E2D;&#x7684;flex&#x4E5F;&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x7684;&#x7C7B;&#x578B;&#x662F;number&#x4E0D;&#x662F;string&#x3002;&#x5B83;&#x6709;&#x4E09;&#x79CD;&#x72B6;&#x6001;&#xFF1A;&#x6B63;&#x6570;&#x3001;&#x96F6;&#x4E0E;&#x8D1F;&#x6570;&#x3002;&#x76F4;&#x63A5;&#x770B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\">import React, {Component} from &apos;react&apos;;</div><div class=\"line\">import {StyleSheet, Text, View} from &apos;react-native&apos;;</div><div class=\"line\"> </div><div class=\"line\">export default class App extends Component&lt;Props&gt; {</div><div class=\"line\">  render() {</div><div class=\"line\">    return (</div><div class=\"line\">      &lt;View style={styles.container}&gt;</div><div class=\"line\">          &lt;View style={styles.red}/&gt;</div><div class=\"line\">          &lt;View style={styles.blue}/&gt;</div><div class=\"line\">          &lt;View style={styles.orange}/&gt;</div><div class=\"line\">      &lt;/View&gt;</div><div class=\"line\">    );</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\">   </div><div class=\"line\">const styles = StyleSheet.create({</div><div class=\"line\">  container: {</div><div class=\"line\">    flex: 1,</div><div class=\"line\">    justifyContent: &apos;center&apos;,</div><div class=\"line\">    alignItems: &apos;center&apos;,</div><div class=\"line\">    backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">  },</div><div class=\"line\">  red: {</div><div class=\"line\">      flex: 1,</div><div class=\"line\">      width: 100,</div><div class=\"line\">      backgroundColor: &apos;red&apos;</div><div class=\"line\">  },</div><div class=\"line\">  blue: {</div><div class=\"line\">      flex: 2,</div><div class=\"line\">      width: 100,</div><div class=\"line\">      backgroundColor: &apos;blue&apos;</div><div class=\"line\">  },</div><div class=\"line\">  orange: {</div><div class=\"line\">      width: 100,</div><div class=\"line\">      height: 100,</div><div class=\"line\">      backgroundColor: &apos;orange&apos;</div><div class=\"line\">  }</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x7236;&#x5BB9;&#x5668;&#x4F7F;&#x7528;flex:1&#x6765;&#x6491;&#x6EE1;&#x6574;&#x4E2A;&#x5C4F;&#x5E55;&#xFF0C;orange&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x4E00;&#x4E2A;view&#xFF0C;&#x800C;red&#x4E0E;blue&#x4F7F;&#x7528;flex&#xFF0C;&#x901A;&#x8FC7;flex&#x7684;&#x503C;&#x8FDB;&#x884C;&#x7B49;&#x6BD4;(1:2)&#x5206;&#x644A;&#x5269;&#x4F59;&#x7684;&#x7A7A;&#x95F4;&#x3002;&#x6765;&#x770B;&#x4E0B;&#x8FD0;&#x884C;&#x6548;&#x679C;&#x3002;</p>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_flex_positive.jpg\" alt=\"\"></p>\n<p>&#x8FD9;&#x662F;&#x4E3A;&#x6B63;&#x6570;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;flex:0&#xFF0C;&#x63A7;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x5C31;&#x4F1A;&#x6839;&#x636E;&#x8BBE;&#x7F6E;&#x7684;width&#x4E0E;height&#x6765;&#x56FA;&#x5B9A;&#x663E;&#x793A;&#x3002;</p>\n<p>&#x5982;&#x679C;flex:-1&#xFF0C;&#x5982;&#x679C;&#x7A7A;&#x95F4;&#x8DB3;&#x591F;&#xFF0C;&#x63A7;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x4E5F;&#x4F1A;&#x6839;&#x636E;width&#x4E0E;height&#x6765;&#x5C55;&#x793A;&#xFF1B;&#x5982;&#x679C;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C;&#x4F1A;&#x6839;&#x636E;minWidth&#x4E0E;minHeight&#x6765;&#x5C55;&#x793A;&#x3002;</p>\n<blockquote>\n<p>&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;flex:-1&#xFF0C;&#x800C;&#x4E14;&#x7ECF;&#x8FC7;&#x6D4B;&#x8BD5;&#xFF0C;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x65F6;minWidth&#x4E0E;minHeight&#x5E76;&#x4E0D;&#x4F1A;&#x751F;&#x6548;&#x3002;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x751F;&#x6548;&#x7684;&#x65B9;&#x5F0F;&#x8BF7;&#x52A1;&#x5FC5;&#x544A;&#x77E5;&#x3002;</p>\n</blockquote>\n<h2 id=\"flexDirection\"><a href=\"#flexDirection\" class=\"headerlink\" title=\"flexDirection\"></a>flexDirection</h2><p>&#x5728;Flexbox&#x4E2D;&#x6709;&#x4E3B;&#x8F74;&#x4E0E;&#x526F;&#x8F74;&#x4E4B;&#x5206;&#xFF0C;&#x4E3B;&#x8F74;&#x63A7;&#x5236;child&#x7684;&#x6392;&#x5217;&#x65B9;&#x5411;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;column&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;flexDirection&#x5C5E;&#x6027;&#x6539;&#x53D8;&#x4E3B;&#x8F74;&#x65B9;&#x5411;&#x3002;&#x5B83;&#x6709;&#x56DB;&#x4E2A;&#x53EF;&#x9009;&#x503C;&#x5206;&#x522B;&#x4E3A;</p>\n<ul>\n<li>row: child&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x6392;&#x5217;</li>\n<li>column: child&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x6392;&#x5217;(&#x9ED8;&#x8BA4;)</li>\n<li>row-reverse: child&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x53CD;&#x5411;&#x6392;&#x5217;</li>\n<li>column-reverse: child&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x53CD;&#x5411;&#x6392;&#x5217;</li>\n</ul>\n<p>&#x5728;&#x4E0A;&#x9762;&#x7684;demo&#x57FA;&#x7840;&#x4E0A;&#x6539;&#x53D8;style&#x6837;&#x5F0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">const styles = StyleSheet.create({</div><div class=\"line\">  container: {</div><div class=\"line\">    flex: 1,</div><div class=\"line\">    flexDirection: &apos;row&apos;,</div><div class=\"line\">    justifyContent: &apos;center&apos;,</div><div class=\"line\">    alignItems: &apos;center&apos;,</div><div class=\"line\">    backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">  },</div><div class=\"line\">  red: {</div><div class=\"line\">      height: 100,</div><div class=\"line\">      width: 100,</div><div class=\"line\">      backgroundColor: &apos;red&apos;</div><div class=\"line\">  },</div><div class=\"line\">  blue: {</div><div class=\"line\">      width: 100,</div><div class=\"line\">      height: 100,</div><div class=\"line\">      backgroundColor: &apos;blue&apos;</div><div class=\"line\">  },</div><div class=\"line\">  orange: {</div><div class=\"line\">      width: 100,</div><div class=\"line\">      height: 100,</div><div class=\"line\">      backgroundColor: &apos;orange&apos;</div><div class=\"line\">  }</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<p>&#x5206;&#x522B;&#x6539;&#x53D8;container&#x4E2D;flexDirection&#x7684;&#x503C;&#xFF1A;row&#x3001;row-reverse&#x3001;column&#x3001;column-reverse</p>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_flex_direction.jpg\" alt=\"\"></p>\n<h2 id=\"justifyContent\"><a href=\"#justifyContent\" class=\"headerlink\" title=\"justifyContent\"></a>justifyContent</h2><p>&#x56FA;&#x5B9A;&#x597D;&#x4E3B;&#x8F74;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;justifyContent&#x6765;&#x6307;&#x5B9A;&#x4E3B;&#x8F74;&#x65B9;&#x5411;child&#x7684;&#x6392;&#x5217;&#x65B9;&#x5F0F;&#xFF0C;&#x5B83;&#x6709;&#x516D;&#x4E2A;&#x53EF;&#x9009;&#x503C;</p>\n<ul>\n<li>flex-start: child&#x5BF9;&#x9F50;&#x4E3B;&#x8F74;&#x7684;&#x8D77;&#x70B9;(&#x9ED8;&#x8BA4;)</li>\n<li>flex-end: child&#x5BF9;&#x9F50;&#x4E3B;&#x8F74;&#x7684;&#x7EC8;&#x70B9;</li>\n<li>center: child&#x5C45;&#x4E2D;&#x5BF9;&#x9F50;&#x4E3B;&#x8F74;</li>\n<li>space-between: child&#x5728;&#x4E3B;&#x8F74;&#x65B9;&#x5411;&#x76F8;&#x90BB;child&#x7B49;&#x95F4;&#x8DDD;&#x5BF9;&#x9F50;&#xFF0C;&#x9996;&#x5C3E;child&#x4E0E;&#x7236;&#x5BB9;&#x5668;&#x5BF9;&#x9F50;</li>\n<li>space-around: child&#x5728;&#x4E3B;&#x8F74;&#x65B9;&#x5411;&#x76F8;&#x90BB;child&#x7B49;&#x95F4;&#x8DDD;&#x5BF9;&#x9F50;&#xFF0C;&#x9996;&#x5C3E;child&#x4E0E;&#x7236;&#x5BB9;&#x5668;&#x7684;&#x95F4;&#x8DDD;&#x76F8;&#x7B49;&#x4E14;&#x4E3A;&#x76F8;&#x90BB;child&#x95F4;&#x8DDD;&#x7684;&#x4E00;&#x534A;</li>\n<li>space-evenly: child&#x5728;&#x4E3B;&#x8F74;&#x65B9;&#x5411;&#x5747;&#x5300;&#x5206;&#x5E03;&#x3002;&#x76F8;&#x90BB;&#x95F4;&#x8DDD;&#x4E0E;&#x9996;&#x5C3E;&#x95F4;&#x8DDD;&#x76F8;&#x7B49;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">container: {</div><div class=\"line\">  flex: 1,</div><div class=\"line\">  flexDirection: &apos;row&apos;,</div><div class=\"line\">  justifyContent: &apos;flex-start&apos;,</div><div class=\"line\">  backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F9D;&#x6B21;&#x6539;&#x53D8;container&#x4E2D;&#x7684;justifyContent&#xFF1A;flex-start&#x3001;flex-end&#x3001;center&#x3001;space-between&#x3001;space-around&#x4E0E;space-evenly</p>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_justify_content_flex_start_end.jpg\" alt=\"\"><br><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_justify_content_center_space_between.jpg\" alt=\"\"><br><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_justify_content_space_around_evenly.jpg\" alt=\"\"></p>\n<h2 id=\"alignItems\"><a href=\"#alignItems\" class=\"headerlink\" title=\"alignItems\"></a>alignItems</h2><p>&#x4E3B;&#x8F74;&#x56FA;&#x5B9A;&#x4E4B;&#x540E;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x526F;&#x8F74;&#xFF0C;alignItems&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x63A7;&#x5236;&#x526F;&#x8F74;&#x4E0A;&#x7684;child&#x6392;&#x5217;&#x65B9;&#x5F0F;&#x3002;&#x5B83;&#x6709;&#x4E94;&#x4E2A;&#x53EF;&#x9009;&#x9879;&#x5206;&#x522B;&#x4E3A;</p>\n<ul>\n<li>flex-start: child&#x5BF9;&#x9F50;&#x526F;&#x8F74;&#x8D77;&#x70B9;(&#x9ED8;&#x8BA4;)</li>\n<li>flex-end: child&#x5BF9;&#x9F50;&#x526F;&#x8F74;&#x7EC8;&#x70B9;</li>\n<li>center: child&#x5C45;&#x4E2D;&#x5BF9;&#x9F50;&#x526F;&#x8F74;</li>\n<li>stretch: child&#x4E3A;&#x5F39;&#x6027;&#x5E03;&#x5C40;&#x65F6;(&#x672A;&#x8BBE;&#x7F6E;&#x526F;&#x8F74;&#x65B9;&#x5411;&#x7684;&#x5927;&#x5C0F;&#x6216;&#x8005;&#x4E3A;auto)&#xFF0C;&#x62C9;&#x4F38;&#x5BF9;&#x9F50;&#x526F;&#x8F74;</li>\n<li>baseline: &#x6709;&#x6587;&#x672C;&#x5B58;&#x5728;&#x65F6;&#xFF0C;child&#x5728;&#x526F;&#x8F74;&#x65B9;&#x5411;&#x57FA;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x57FA;&#x7EBF;&#x5BF9;&#x9F50;</li>\n</ul>\n<p>&#x6539;&#x53D8;container&#x7684;style&#xFF0C;&#x4E3B;&#x8F74;&#x8BBE;&#x7F6E;&#x4E3A;row&#xFF0C;&#x4F9D;&#x6B21;&#x6539;&#x53D8;alignItems&#xFF1A;flex-start&#x3001;flex-end&#x3001;center</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">container: {</div><div class=\"line\">  flex: 1,</div><div class=\"line\">  flexDirection: &apos;row&apos;,</div><div class=\"line\">  alignItems: &apos;flex-start&apos;,</div><div class=\"line\">  backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5C06;alignItems&#x8BBE;&#x7F6E;&#x4E3A;stretch&#xFF0C;&#x5E76;&#x4E14;&#x6539;&#x53D8;red&#x7684;height&#xFF0C;red&#x4F1A;&#x88AB;&#x62C9;&#x4F38;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">container: {</div><div class=\"line\">  flex: 1,</div><div class=\"line\">  flexDirection: &apos;row&apos;,</div><div class=\"line\">  alignItems: &apos;stretch&apos;,</div><div class=\"line\">  backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">},</div><div class=\"line\">red: {</div><div class=\"line\">    width: 100,</div><div class=\"line\">    height: &apos;auto&apos;,</div><div class=\"line\">    backgroundColor: &apos;red&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_align_items_flex_start_end.jpg\" alt=\"\"><br><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_align_items_center_stretch.jpg\" alt=\"\"></p>\n<p>alignItems: baseline&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6587;&#x672C;&#x7684;&#x6B63;&#x4E2D;&#x5FC3;&#xFF0C;&#x800C;&#x662F;&#x6587;&#x672C;View&#x7684;&#x5BB9;&#x5668;&#x5E95;&#x90E8;&#x3002;&#x5728;&#x4E0A;&#x9762;&#x57FA;&#x7840;&#x4E0A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;Text&#xFF0C;&#x8BA9;&#x6587;&#x672C;&#x81EA;&#x8EAB;&#x5C45;&#x4E2D;&#x5C55;&#x793A;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">container: {</div><div class=\"line\">  flex: 1,</div><div class=\"line\">  flexDirection: &apos;row&apos;,</div><div class=\"line\">  alignItems: &apos;baseline&apos;,</div><div class=\"line\">  backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">},</div><div class=\"line\">text: {</div><div class=\"line\">    width: 80,</div><div class=\"line\">    height: 80,</div><div class=\"line\">    fontSize: 20,</div><div class=\"line\">    color: &apos;white&apos;,</div><div class=\"line\">    marginTop: 110,</div><div class=\"line\">    backgroundColor: &apos;black&apos;,</div><div class=\"line\">    textAlign: &apos;center&apos;,</div><div class=\"line\">    textAlignVertical: &apos;center&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_align_items_baseline.jpg\" alt=\"\"></p>\n<h2 id=\"flexWrap\"><a href=\"#flexWrap\" class=\"headerlink\" title=\"flexWrap\"></a>flexWrap</h2><p>&#x5982;&#x679C;&#x518D;&#x589E;&#x52A0;&#x4E00;&#x4E2A;View&#xFF0C;&#x7531;&#x4E8E;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x5B83;&#x4F1A;&#x5C55;&#x793A;&#x4E0D;&#x5168;&#x3002;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;flexWrap&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x81EA;&#x52A8;&#x6362;&#x884C;&#x5C55;&#x793A;&#x3002;</p>\n<ul>\n<li>nowrap: &#x4E0D;&#x6362;&#x884C;(&#x9ED8;&#x8BA4;)</li>\n<li>wrap: &#x81EA;&#x52A8;&#x6362;&#x884C;</li>\n</ul>\n<p>&#x5728;container&#x4E2D;&#x6DFB;&#x52A0;flexWrap&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x518D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;green view</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">container: {</div><div class=\"line\">  flex: 1,</div><div class=\"line\">  flexDirection: &apos;row&apos;,</div><div class=\"line\">  flexWrap: &apos;wrap&apos;,</div><div class=\"line\">  justifyContent: &apos;flex-start&apos;,</div><div class=\"line\">  backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">},</div><div class=\"line\">green: {</div><div class=\"line\">    width: 100,</div><div class=\"line\">    height: 100,</div><div class=\"line\">    backgroundColor: &apos;green&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_flex_wrap.jpg\" alt=\"\"></p>\n<h2 id=\"alignSelf\"><a href=\"#alignSelf\" class=\"headerlink\" title=\"alignSelf\"></a>alignSelf</h2><p>alignSelf&#x5C5E;&#x6027;&#x7C7B;&#x4F3C;&#x4E8E;alignItems&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x63A7;&#x5236;&#x526F;&#x8F74;&#x4E0A;&#x7684;&#x6392;&#x5217;&#x89C4;&#x5219;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x662F;child&#x81EA;&#x5DF1;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x7236;&#x5BB9;&#x5668;alignItems&#x7684;&#x5C5E;&#x6027;&#x63A7;&#x5236;&#x7684;child&#x6392;&#x5217;&#x89C4;&#x5219;&#xFF0C;&#x5728;&#x526F;&#x8F74;&#x4E0A;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x6392;&#x5217;&#x89C4;&#x5219;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;auto&#xFF0C;&#x7EE7;&#x627F;&#x7236;&#x5BB9;&#x5668;&#x7684;alignItems&#x5C5E;&#x6027;&#x3002;&#x56E0;&#x6B64;&#x5B83;&#x4E5F;&#x6709;&#x4E94;&#x4E2A;&#x53EF;&#x9009;&#x503C;&#xFF1A;flex-start&#x3001;flex-end&#x3001;center&#x3001;stretch&#x4E0E;baseline&#x3002;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x4E3A;range&#x6DFB;&#x52A0;alignSelf&#xFF0C;&#x5176;&#x5B83;&#x7684;child&#x4E0D;&#x53D8;&#xFF0C;&#x90FD;&#x7EE7;&#x627F;&#x7236;&#x5BB9;&#x5668;&#x7684;alignItems: flex-start</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">orange: {</div><div class=\"line\">    width: 100,</div><div class=\"line\">    height: 100,</div><div class=\"line\">    backgroundColor: &apos;orange&apos;,</div><div class=\"line\">    alignSelf: &apos;flex-end&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/flexbox_align_self.jpg\" alt=\"\"></p>\n<blockquote>\n<p>&#x5176;&#x5B83;&#x7684;&#x53EF;&#x9009;&#x503C;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x8BF4;&#x660E;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;alignItems</p>\n</blockquote>\n<h2 id=\"other\"><a href=\"#other\" class=\"headerlink\" title=\"other\"></a>other</h2><p>&#x6700;&#x540E;&#x8FD8;&#x6709;&#x4E09;&#x4E2A;&#x6BD4;&#x8F83;&#x51B7;&#x95E8;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8BE6;&#x7EC6;&#x4E00;&#x4E00;&#x4EE3;&#x7801;&#x4E0E;&#x8D34;&#x56FE;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E0B;&#x5B83;&#x4EEC;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x76F8;&#x540C;&#x70B9;&#x662F;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x5728;child&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x4E0E;alignSelf&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x4E00;&#x6837;&#x3002;</p>\n<ul>\n<li>flexBasis: &#x8BBE;&#x7F6E;&#x4E3B;&#x8F74;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;auto&#x3002;&#x5982;&#x679C;&#x4E0E;width&#x6216;&#x8005;height&#x540C;&#x65F6;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x4F1A;&#x8986;&#x76D6;&#x5B83;&#x4EEC;&#x7684;&#x503C;</li>\n<li>flexGrow: &#x8BBE;&#x7F6E;chid&#x7684;&#x653E;&#x5927;&#x6BD4;&#x4F8B;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;flex&#xFF0C;&#x7A7A;&#x95F4;&#x5145;&#x8DB3;&#x65F6;&#x81EA;&#x52A8;&#x6309;&#x6BD4;&#x4F8B;&#x653E;&#x5927;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0</li>\n<li>flexShrink: &#x8BBE;&#x7F6E;chid&#x7684;&#x7F29;&#x5C0F;&#x6BD4;&#x4F8B;&#x3002;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x65F6;&#x81EA;&#x52A8;&#x6309;&#x6BD4;&#x4F8B;&#x7F29;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0</li>\n</ul>\n<p>&#x6709;&#x5173;Flexbox&#xFF0C;&#x7EB5;&#x89C2;&#x5168;&#x6587;&#x53EA;&#x9700;&#x638C;&#x63E1;&#x5F00;&#x5934;&#x6240;&#x5217;&#x7684;&#x516D;&#x79CD;&#x5C5E;&#x6027;&#xFF0C;React Native&#x4E2D;&#x7684;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x5E03;&#x5C40;&#x4E5F;&#x5C31;&#x4E0D;&#x6210;&#x95EE;&#x9898;&#x3002;&#x73B0;&#x5728;&#x5BF9;&#x4E8E;Flexbox&#x662F;&#x5426;&#x6E05;&#x6670;&#x4E86;&#x8BB8;&#x591A;&#x5462;&#xFF1F;&#x8D76;&#x7D27;&#x4EB2;&#x81EA;&#x53BB;&#x8BD5;&#x8BD5;&#x5427;~</p>\n<p>&#x611F;&#x89C9;&#x4E0D;&#x9519;&#x7684;&#x53EF;&#x4EE5;&#x6765;&#x4E00;&#x6CE2;&#x5173;&#x6CE8;&#xFF0C;&#x626B;&#x63CF;&#x4E0B;&#x65B9;&#x4E8C;&#x7EF4;&#x7801;&#xFF0C;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x53CA;&#x65F6;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x77E5;&#x8BC6;&#x6280;&#x5DE7;&#x3002;</p>\n<p><img src=\"/2018/08/23/5&#x5206;&#x949F;&#x5403;&#x900F;React-Native-Flexbox/wx_qr_code.png\" alt=\"\"></p>\n"},{"title":"ViewDragHelper之手势操作神器","url":"https://www.rousetime.com/2018/08/19/ViewDragHelper之手势操作神器/","content":"<p><img src=\"/2018/08/19/ViewDragHelper&#x4E4B;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x795E;&#x5668;/cover.jpg\" alt=\"cover\"></p>\n<p>&#x5728;Android&#x4E2D;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x81EA;&#x5B9A;&#x4E49;ViewGroup&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x539F;&#x751F;&#x63A7;&#x4EF6;&#x6240;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x7684;&#x9700;&#x6C42;&#x3002;&#x5C24;&#x5176;&#x662F;&#x590D;&#x6742;&#x7684;ViewGroup&#x5B9E;&#x73B0;&#xFF0C;&#x624B;&#x52BF;&#x7684;&#x5904;&#x7406;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;ViewGroup&#x6765;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;<code>onInterceptTouchEvent</code>&#x4E0E;<code>onTouchEvent</code>&#x4E8B;&#x4EF6;&#x7B49;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x6709;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7B80;&#x4FBF;&#x7684;&#x65B9;&#x6CD5;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;ViewDragHelper&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x8D1F;&#x8D23;&#x7684;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x3002;&#x5B83;&#x662F;&#x5B98;&#x65B9;&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;ViewGroup&#x5904;&#x7406;&#x62D6;&#x62FD;&#x7684;&#x624B;&#x52BF;&#x7C7B;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x5B98;&#x65B9;&#x7684;&#x539F;&#x6587;&#x5F15;&#x7528;&#x8BF4;&#x660E;</p>\n<blockquote>\n<p>ViewDragHelper is a utility class for writing custom ViewGroups. It offers a number of useful operations and state tracking for allowing a user to drag and reposition views within their parent ViewGroup.</p>\n</blockquote>\n<h2 id=\"Purpose\"><a href=\"#Purpose\" class=\"headerlink\" title=\"Purpose\"></a>Purpose</h2><p>&#x901A;&#x8FC7;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4F60;&#x5C06;&#x4F1A;&#x638C;&#x63E1;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;&#xFF1A;</p>\n<ol>\n<li>ViewDragHelper&#x7684;&#x7B80;&#x5355;&#x5165;&#x95E8;</li>\n<li>ViewDragHelper&#x7684;&#x5173;&#x952E;API&#x7528;&#x9014;</li>\n<li>&#x4F7F;&#x7528;ViewDragHelper&#x5B9E;&#x73B0;view&#x7684;&#x62D6;&#x62FD;</li>\n</ol>\n<h2 id=\"use\"><a href=\"#use\" class=\"headerlink\" title=\"use\"></a>use</h2><p>&#x9996;&#x5148;&#x9700;&#x8981;&#x6784;&#x5EFA;ViewDragHelper&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x7684;&#x9759;&#x6001;<code>create</code>&#x65B9;&#x6CD5;&#x751F;&#x6210;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mViewDragHelper = ViewDragHelper.create(this, object : ViewDragHelper.Callback() {</div><div class=\"line\">    override fun tryCaptureView(child: View?, pointerId: Int): Boolean {</div><div class=\"line\">        TODO(&quot;not implemented&quot;) //To change body of created functions use File | Settings | File Templates.</div><div class=\"line\">    }</div><div class=\"line\">})</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x53C2;&#x6570;&#x4E3A;<code>ViewGroup</code>&#x4E0E;<code>ViewDragHelper.Callback</code>&#x3002;Callback&#x662F;&#x5BF9;view&#x64CD;&#x4F5C;&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x7EDD;&#x5BF9;&#x591A;&#x6570;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x4E2D;&#x5B8C;&#x6210;&#x3002;<code>tryCaptureView</code>&#x65B9;&#x6CD5;&#x662F;&#x5B83;&#x552F;&#x4E00;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x9ED8;&#x8BA4;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x3002;&#x6839;&#x636E;&#x53C2;&#x6570;child&#x5224;&#x65AD;&#x7528;&#x6237;&#x89E6;&#x6478;&#x7684;view&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x8BA9;ViewDragHelper&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7B80;&#x5316;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x9700;&#x4E3A;&#x5B83;&#x4F20;&#x5165;&#x76F8;&#x5173;&#x7684;<code>MotionEvent</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun onInterceptTouchEvent(ev: MotionEvent?): Boolean {</div><div class=\"line\">    return mViewDragHelper.shouldInterceptTouchEvent(ev)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">override fun onTouchEvent(event: MotionEvent?): Boolean {</div><div class=\"line\">    mViewDragHelper.processTouchEvent(event)</div><div class=\"line\">    return true</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5206;&#x522B;&#x8C03;&#x7528;ViewDragHelper&#x7684;<code>shouldInterceptTouchEvent</code>&#x4E0E;<code>processTouchEvent</code>&#x6765;&#x7B80;&#x5316;&#x624B;&#x52BF;&#x7684;&#x64CD;&#x4F5C;&#x5224;&#x65AD;&#x3002;&#x5C06;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x5168;&#x90E8;&#x4EA4;&#x7531;ViewDragHelper&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x8981;&#x5904;&#x7406;&#x60EF;&#x6027;&#x6ED1;&#x52A8;&#xFF0C;&#x518D;&#x91CD;&#x5199;<code>computeScroll</code>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun computeScroll() {</div><div class=\"line\">    if (mViewDragHelper.continueSettling(true)) {</div><div class=\"line\">        invalidate()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>ViewDragHelper&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x7B97;&#x4E86;&#x4E00;&#x4E0B;&#x4E5F;&#x5C31;&#x5341;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x8BB8;&#x591A;&#x4EE3;&#x7801;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x5FEB;&#x901F;&#x7B80;&#x4FBF;&#x7684;&#x5B9E;&#x73B0;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#xFF0C;ViewDragHelper&#x662F;&#x4E0D;&#x4E8C;&#x4E4B;&#x9009;&#x3002;</p>\n<h2 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h2><p>&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x6765;&#x5BF9;ViewDragHelper&#x7684;&#x4E3B;&#x8981;Api&#x7684;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;&#x9996;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x521D;&#x6B65;&#x6548;&#x679C;&#x3002;</p>\n<p><img src=\"/2018/08/19/ViewDragHelper&#x4E4B;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x795E;&#x5668;/view_drag_helper.gif\" alt=\"\"></p>\n<p>&#x6709;&#x4E09;&#x4E2A;view&#xFF0C;&#x5206;&#x522B;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6C34;&#x5E73;&#x3001;&#x7AD6;&#x76F4;&#x4E0E;&#x4EFB;&#x610F;&#x4F4D;&#x7F6E;&#x6ED1;&#x52A8;&#x3002;&#x800C;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x6548;&#x679C;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x5C31;&#x662F;ViewDragHelper.Callback&#x4E2D;&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"tryCaptureView\"><a href=\"#tryCaptureView\" class=\"headerlink\" title=\"tryCaptureView\"></a>tryCaptureView</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5E03;&#x5C14;&#x503C;&#x6765;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x7684;view&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6355;&#x83B7;&#x3002;demo&#x4E2D;&#x9700;&#x8981;&#x8FD9;&#x4E09;&#x4E2A;view&#x90FD;&#x80FD;&#x88AB;&#x6355;&#x83B7;&#x5230;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x7B80;&#x5355;&#x53EA;&#x9700;&#x4E0E;&#x53C2;&#x6570;&#x7684;child&#x505A;&#x5BF9;&#x6BD4;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun tryCaptureView(child: View?, pointerId: Int): Boolean {</div><div class=\"line\">    if (mLeft == 0 || mTop == 0){</div><div class=\"line\">        mLeft = mFlexibleView.left</div><div class=\"line\">        mTop = mFlexibleView.top</div><div class=\"line\">    }</div><div class=\"line\">    return child == mHorizontalView || child == mVerticalView || child == mFlexibleView</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x521D;&#x59CB;&#x5316;&#x4E86;&#x4EFB;&#x610F;&#x6ED1;&#x52A8;view&#x7684;&#x521D;&#x59CB;left&#x4E0E;top&#xFF0C;&#x4EE5;&#x4FBF;&#x540E;&#x7EED;&#x4F7F;&#x7528;&#x3002;</p>\n</blockquote>\n<h3 id=\"clampViewPositionHorizontal\"><a href=\"#clampViewPositionHorizontal\" class=\"headerlink\" title=\"clampViewPositionHorizontal\"></a>clampViewPositionHorizontal</h3><p>&#x6709;&#x4E86;view&#x7684;&#x6355;&#x83B7;&#x5224;&#x65AD;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5BF9;&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x7684;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun clampViewPositionHorizontal(child: View?, left: Int, dx: Int): Int {</div><div class=\"line\">    if (child != mVerticalView) {</div><div class=\"line\">        return left</div><div class=\"line\">    }</div><div class=\"line\">    return child.left</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x7684;&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x4E0E;&#x8FD4;&#x56DE;&#x503C;</p>\n<ul>\n<li>child&#xFF1A;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x7684;view</li>\n<li>left: &#x5C06;&#x8981;&#x5230;&#x8FBE;&#x7684;&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x7684;&#x8DDD;&#x79BB;</li>\n<li>dx: &#x76F8;&#x5BF9;&#x4E8E;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x7684;&#x504F;&#x79FB;&#x91CF;</li>\n<li>return&#xFF1A;&#x6240;&#x5904;&#x7684;&#x6C34;&#x5E73;&#x8DDD;&#x79BB;</li>\n</ul>\n<p>&#x7531;&#x4E8E;&#x53EA;&#x6709;&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x7684;view&#x4E0D;&#x80FD;&#x968F;&#x610F;&#x79FB;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x6355;&#x83B7;&#x7684;view&#x4E3A;&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x65F6;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;child.left&#x539F;&#x6765;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B;&#x53CD;&#x4E4B;&#x8FD4;&#x56DE;left&#x3002;</p>\n<h3 id=\"clampViewPositionVertical\"><a href=\"#clampViewPositionVertical\" class=\"headerlink\" title=\"clampViewPositionVertical\"></a>clampViewPositionVertical</h3><p>&#x5BF9;&#x4E8E;&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x7684;&#x64CD;&#x4F5C;&#x5224;&#x65AD;&#x4E0E;&#x6C34;&#x5E73;&#x65B9;&#x5411;&#x540C;&#x7406;&#xFF0C;&#x770B;&#x4E0B;&#x4EE3;&#x7801;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun clampViewPositionVertical(child: View?, top: Int, dy: Int): Int {</div><div class=\"line\">    if (child != mHorizontalView) {</div><div class=\"line\">        return top</div><div class=\"line\">    }</div><div class=\"line\">    return child.top</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6B64;&#x65F6;&#x8FD0;&#x884C;&#x9879;&#x76EE;&#xFF0C;&#x8BE5;demo&#x7684;&#x529F;&#x80FD;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#xFF0C;&#x4E09;&#x4E2A;view&#x90FD;&#x80FD;&#x9884;&#x671F;&#x62D6;&#x52A8;&#x3002;&#x53EA;&#x662F;&#x8981;&#x5230;&#x8FBE;&#x4EFB;&#x610F;view&#x62D6;&#x52A8;&#x4E4B;&#x540E;&#x56DE;&#x5230;&#x521D;&#x59CB;&#x4F4D;&#x7F6E;&#x8FD8;&#x9700;&#x91CD;&#x5199;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"onViewReleased\"><a href=\"#onViewReleased\" class=\"headerlink\" title=\"onViewReleased\"></a>onViewReleased</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun onViewReleased(releasedChild: View?, xvel: Float, yvel: Float) {</div><div class=\"line\">    if (releasedChild == mFlexibleView) {</div><div class=\"line\">        mViewDragHelper.settleCapturedViewAt(mLeft, mTop)</div><div class=\"line\">        invalidate()</div><div class=\"line\">    } else {</div><div class=\"line\">        super.onViewReleased(releasedChild, xvel, yvel)</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x5BF9;view&#x91CA;&#x653E;&#x540E;&#x7684;&#x56DE;&#x8C03;&#x3002;&#x5982;&#x679C;&#x8981;&#x5BF9;view&#x91CA;&#x653E;&#x540E;&#x7684;&#x8F68;&#x8FF9;&#x505A;&#x6539;&#x53D8;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x65B9;&#x6CD5;&#x4E2D;&#x5B9E;&#x73B0;&#x3002;</p>\n<ul>\n<li>releaseChild: &#x5F53;&#x524D;&#x91CA;&#x653E;&#x7684;view</li>\n<li>xvel: &#x6C34;&#x5E73;&#x65B9;&#x5411;&#x7684;&#x901F;&#x5EA6;</li>\n<li>yvel: &#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x7684;&#x901F;&#x5EA6;</li>\n</ul>\n<p>&#x8FD9;&#x91CC;&#x8FD8;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>settleCapturedViewAt</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5C06;&#x5F53;&#x524D;view&#x5B9A;&#x4F4D;&#x5230;&#x6240;&#x7ED9;&#x7684;&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#x3002;&#x5185;&#x90E8;&#x4F1A;&#x56DE;&#x5230;<code>continueSettling</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x52A8;&#x753B;&#x3002;</p>\n<blockquote>\n<p>xvel&#x4E0E;yvel&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x91CA;&#x653E;view&#x540E;&#x7684;&#x60EF;&#x6027;&#x79FB;&#x52A8;&#x64CD;&#x4F5C;&#x3002;</p>\n</blockquote>\n<p>&#x4ECE;&#x5934;&#x5230;&#x5C3E;&#x53EA;&#x4F7F;&#x7528;&#x4E86;ViewDragHelper.Callback&#x4E2D;&#x7684;&#x56DB;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;demo&#x4E2D;&#x7684;&#x62D6;&#x62FD;&#x6548;&#x679C;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#xFF0C;&#x7B80;&#x5355;&#x7A0B;&#x5EA6;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x3002;&#x6240;&#x4EE5;&#x719F;&#x7EC3;&#x4F7F;&#x7528;ViewDragHelper&#x4E0D;&#x4EC5;&#x80FD;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x73B0;&#x6548;&#x7387;&#x4E0E;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x8FD8;&#x80FD;&#x51CF;&#x5C11;&#x51FA;&#x9519;&#x7387;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x5176;&#x5B83;&#x7684;Api&#x90FD;&#x662F;&#x4E9B;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x4E2D;&#x4E5F;&#x7528;&#x7684;&#x5C11;&#xFF0C;&#x624B;&#x52BF;&#x7684;&#x64CD;&#x4F5C;&#x903B;&#x8F91;&#x90FD;&#x4E0D;&#x4F1A;&#x5728;&#x8FD9;&#x4E9B;Api&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x4ECB;&#x7ECD;&#x3002;&#x4E0A;&#x9762;&#x7684;demo view&#x62D6;&#x62FD;&#x8D85;&#x51FA;&#x8FB9;&#x754C;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x56FA;&#x5B9A;&#x8FB9;&#x754C;&#xFF0C;&#x53EA;&#x9700;&#x5728;clampViewPositionHorizontal&#x4E0E;clampViewPositionVertical&#x4E2D;&#x8FB9;&#x754C;&#x5224;&#x65AD;&#x5373;&#x53EF;&#xFF0C;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x7559;&#x7ED9;&#x8BFB;&#x8005;&#x601D;&#x8003;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#xFF1A;&#x5982;&#x679C;&#x4F7F;&#x7528;Button&#x6216;&#x8005;TextView&#x8BBE;&#x7F6E;&#x4E86;clickable=true&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x7684;Demo&#x4E2D;&#x7684;view&#x4E0D;&#x80FD;&#x64CD;&#x4F5C;&#x4E86;&#x3002;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;&#xFF0C;&#x5982;&#x679C;view&#x4E0D;&#x6D88;&#x8D39;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#xFF0C;&#x5219;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x5C06;&#x76F4;&#x63A5;&#x8FDB;&#x5165;<code>onTouchEvent</code>&#xFF0C;&#x5728;Down&#x4E8B;&#x4EF6;&#x4E2D;&#x5C31;&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#x4E86;&#x6355;&#x83B7;&#x7684;view&#xFF1B;&#x5982;&#x679C;&#x6D88;&#x8D39;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F1A;&#x8FDB;&#x5165;<code>onInterceptTouchEvent</code>&#x5224;&#x65AD;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6355;&#x83B7;&#xFF0C;&#x800C;&#x5224;&#x65AD;&#x7684;&#x8FC7;&#x7A0B;&#x4F1A;&#x53BB;&#x8C03;&#x7528;<code>getViewHorizontalDragRange</code>&#x4E0E;<code>getViewVerticalDragRange</code>&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x4E24;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5927;&#x4E8E;0&#x7684;&#x503C;&#x624D;&#x80FD;&#x88AB;&#x6355;&#x83B7;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x89E3;&#x51B3;&#x62D6;&#x62FD;&#x4E0D;&#x52A8;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x9700;&#x91CD;&#x5199;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">override fun getViewHorizontalDragRange(child: View?): Int {</div><div class=\"line\">    return measuredWidth - (child?.measuredWidth?:0)</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">override fun getViewVerticalDragRange(child: View?): Int {</div><div class=\"line\">    return measuredHeight - (child?.measuredHeight?:0)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"finally\"><a href=\"#finally\" class=\"headerlink\" title=\"finally\"></a>finally</h2><p>ok&#xFF0C;&#x5230;&#x8FD9;&#x91CC;ViewDragHelper&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x5165;&#x95E8;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x5173;&#x952E;&#x7684;Api&#x4E5F;&#x5DF2;&#x7ECF;&#x4E86;&#x7136;&#x4E8E;&#x80F8;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;ViewDragHelper&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x4E0E;&#x997F;&#x4E86;&#x4E48;&#x7684;&#x5546;&#x54C1;&#x8BE6;&#x60C5;&#x754C;&#x9762;&#x6548;&#x679C;&#x7C7B;&#x4F3C;&#x3002;</p>\n<p><img src=\"/2018/08/19/ViewDragHelper&#x4E4B;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x795E;&#x5668;/view_drag_helper_real.gif\" alt=\"\"></p>\n<p>&#x4E0A;&#x9762;&#x7684;&#x624B;&#x52BF;&#x52A8;&#x753B;&#x4F7F;&#x7528;&#x7684;&#x5C31;&#x662F;ViewDragHelper&#xFF0C;&#x800C;&#x7528;&#x5230;&#x7684;Api&#x4E5F;&#x662F;&#x5168;&#x90E8;&#x662F;&#x6587;&#x7AE0;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x3002;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x6587;&#x7AE0;&#x4E2D;&#x7684;demo&#x6548;&#x679C;&#x80FD;&#x591F;&#x52A0;&#x6DF1;ViewDragHelper&#x5BF9;&#x5927;&#x5BB6;&#x7684;&#x5F71;&#x54CD;&#x4E0E;&#x5BF9;&#x5B83;&#x7684;&#x671F;&#x671B;&#x5EA6;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5728;&#x65E5;&#x5E38;&#x5F00;&#x53D1;&#x4E2D;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x8F7B;&#x677E;&#x89E3;&#x51B3;&#x624B;&#x52BF;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github&#x4E2D;</a>&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<code>feat_viewdraghelper_dev</code></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p>&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;</p>\n<p><img src=\"/2018/08/19/ViewDragHelper&#x4E4B;&#x624B;&#x52BF;&#x64CD;&#x4F5C;&#x795E;&#x5668;/wx.jpg\" alt=\"\"></p>\n"},{"title":"自定义Android注解Part3:绑定","url":"https://www.rousetime.com/2018/07/11/自定义Android注解Part3-绑定/","content":"<p><img src=\"/2018/07/11/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3-&#x7ED1;&#x5B9A;/2018-07-11-2.jpeg\" alt=\"\"></p>\n<p>&#x4E0A;&#x4E00;&#x8282;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5C06;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x6CE8;&#x89E3;&#x4EE3;&#x7801;&#x90E8;&#x5206;&#x4ECB;&#x7ECD;&#x5B8C;&#x6BD5;&#xFF0C;&#x4ECA;&#x5929;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x662F;&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;&#x7CFB;&#x5217;&#x7684;&#x6700;&#x540E;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x3002;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x8FD9;&#x4E00;&#x8DEF;&#x8D70;&#x6765;&#x6709;&#x6240;&#x6536;&#x83B7;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x524D;&#x9762;&#x7684;&#x4E86;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x4E09;&#x5927;&#x90E8;&#x5206;&#xFF1A;butterknife-annotations&#x3001;butterknife-compiler&#x4E0E;butterknife-bind&#x3002;&#x73B0;&#x5728;&#x5C31;&#x5269;&#x4E0B;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;butterknife-bind&#x3002;&#x8BE5;&#x90E8;&#x5206;&#x662F;&#x5BF9;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x4E0E;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#xFF0C;&#x5373;&#x8C03;&#x7528;&#x6211;&#x4EEC;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;butterknife-bind&#x6A21;&#x677F;&#x5E93;&#x7684;&#x7ED3;&#x6784;&#xFF1A;</p>\n<p><img src=\"/2018/07/11/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3-&#x7ED1;&#x5B9A;/2018-07-11-1.png\" alt=\"\"></p>\n<p>&#x53EA;&#x6709;Butterknife&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x5C06;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x7684;module&#x5F15;&#x5165;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    ...</div><div class=\"line\">    compile project(path: &apos;:butterknife-annotations&apos;)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6709;&#x4E86;&#x4E4B;&#x524D;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x6211;&#x4EEC;<strong>Make Project</strong>&#x9879;&#x76EE;&#x5DE5;&#x7A0B;&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x627E;&#x5230;MainActivity$Binding&#x7C7B;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x5728;<strong>/app/build/generated/source/kapt/debug/</strong>&#x76EE;&#x5F55;&#x4E0B;&#x67E5;&#x627E;&#x3002;</p>\n<h2 id=\"Bind\"><a href=\"#Bind\" class=\"headerlink\" title=\"Bind\"></a>Bind</h2><p>MainActivity$Binding&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x5C31;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x8981;&#x7684;bindView&#x4E0E;setOnClickListener&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x53EA;&#x9700;&#x5B9E;&#x4F8B;&#x5316;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x662F;&#x8BE5;&#x7C7B;&#x662F;&#x901A;&#x8FC7;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x5668;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x7C7B;&#x540D;&#x5168;&#x79F0;(&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x76F8;&#x5F53;&#x4E8E;&#x67E5;&#x770B;&#x4E86;&#x6E90;&#x7801;&#xFF0C;&#x624D;&#x77E5;&#x9053;&#x662F;&#x4EE5;$Binding&#x7ED3;&#x5C3E;)&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x662F;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;<strong>new</strong>&#x5173;&#x952E;&#x5B57;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x3002;&#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x5B9E;&#x4F8B;&#x5316;&#x5B83;&#x5462;&#xFF1F;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;butterknife-bind&#x4E2D;&#x7684;&#x552F;&#x4E00;&#x7684;&#x7C7B;Butterknife</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Butterknife {</div><div class=\"line\"> </div><div class=\"line\">    private Butterknife() {</div><div class=\"line\"> </div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private static &lt;T extends Activity&gt; void initialization(T target, String suffix) {</div><div class=\"line\">        Class&lt;?&gt; tClass = target.getClass();</div><div class=\"line\">        String className = tClass.getName();</div><div class=\"line\">        try {</div><div class=\"line\">            Class&lt;?&gt; bindingClass = tClass.getClassLoader().loadClass(className + suffix);</div><div class=\"line\">            Constructor&lt;?&gt; constructor = bindingClass.getConstructor(tClass);</div><div class=\"line\">            constructor.newInstance(target);</div><div class=\"line\">        } catch (ClassNotFoundException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        } catch (NoSuchMethodException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        } catch (InstantiationException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        } catch (IllegalAccessException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        } catch (InvocationTargetException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public static void bind(Activity activity) {</div><div class=\"line\">        initialization(activity, ConstantUtils.BINDING_BUTTERKNIFE_SUFFIX);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;initialization&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<strong>java&#x53CD;&#x5C04;</strong>&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;MainActivity$Binding&#x3002;&#x65E2;&#x7136;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x662F;&#x7531;&#x539F;&#x59CB;&#x7C7B;(MainActivity)+&#x540E;&#x7F00;($Binding)&#x7EC4;&#x6210;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x4F7F;&#x7528;java&#x53CD;&#x5C04;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x6240;&#x9700;&#x7684;&#x7C7B;&#x3002;&#x5BF9;&#x4E8E;&#x5916;&#x754C;&#x7684;&#x8C03;&#x7528;&#x53EA;&#x9700;&#x4F7F;&#x7528;bind&#x65B9;&#x6CD5;&#xFF0C;&#x4F20;&#x5165;&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x7684;&#x7C7B;&#x5373;&#x53EF;&#x3002;</p>\n<h2 id=\"Use\"><a href=\"#Use\" class=\"headerlink\" title=\"Use\"></a>Use</h2><p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6240;&#x4EE5;&#x7684;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5728;MainActivity&#x4E2D;&#x4F7F;&#x7528;&#x3002;&#x9996;&#x5148;&#x5C06;&#x5B9A;&#x4E49;&#x7684;&#x5E93;&#x8FDB;&#x884C;&#x4F9D;&#x8D56;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    ...</div><div class=\"line\">    implementation project(&apos;:butterknife-bind&apos;)</div><div class=\"line\">    kapt project(&apos;:butterknife-compiler&apos;)</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;MainActivity&#x4E2D;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">class MainActivity : AppCompatActivity() {</div><div class=\"line\"> </div><div class=\"line\">    @BindView(R.id.public_service, R.string.public_service)</div><div class=\"line\">    lateinit var sName: TextView</div><div class=\"line\"> </div><div class=\"line\">    @BindView(R.id.personal_wx, R.string.personal_wx)</div><div class=\"line\">    lateinit var sPhone: TextView</div><div class=\"line\"> </div><div class=\"line\">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_main)</div><div class=\"line\">        Butterknife.bind(this)</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @OnClick(R.id.public_service)</div><div class=\"line\">    fun nameClick(view: View) {</div><div class=\"line\">        Toast.makeText(this, getString(R.string.public_service_click_toast), Toast.LENGTH_LONG).show()</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @OnClick(R.id.personal_wx)</div><div class=\"line\">    fun phoneClick(view: View) {</div><div class=\"line\">        Toast.makeText(this, getString(R.string.personal_wx_click_toast), Toast.LENGTH_LONG).show()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;@BindView&#x7ED1;&#x5B9A;View&#x7684;Id&#x4E0E;&#x9ED8;&#x8BA4;&#x503C;&#xFF1B;&#x4F7F;&#x7528;@OnClick&#x7ED1;&#x5B9A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF1B;&#x4F7F;&#x7528;Butterknife.bind(this)&#x7ED1;&#x5B9A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#x4E0E;&#x5F00;&#x6E90;&#x5E93;Butterknife&#x76F8;&#x4F3C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h2 id=\"progurad\"><a href=\"#progurad\" class=\"headerlink\" title=\"progurad\"></a>progurad</h2><p>&#x73B0;&#x5728;&#x4F60;&#x5728;&#x6A21;&#x62DF;&#x5668;&#x6216;&#x8005;&#x771F;&#x673A;&#x4E0A;&#x8DD1;&#x7740;&#x975E;&#x5E38;&#x5B8C;&#x7F8E;&#xFF0C;&#x7136;&#x540E;&#x4F60;&#x4E0D;&#x5C0F;&#x5FC3;&#x5207;&#x6362;&#x5230;<strong>release</strong>&#x7248;&#x672C;&#x5E76;&#x4E14;&#x5F00;&#x542F;&#x4E86;<strong>&#x6DF7;&#x6DC6;</strong>&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;mmp&#x5C45;&#x7136;&#x6CA1;&#x6709;&#x6548;&#x679C;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;debug&#x4E0E;release&#x7684;&#x533A;&#x522B;&#xFF0C;&#x7EDD;&#x5927;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x662F;&#x6DF7;&#x6DC6;&#x60F9;&#x7684;&#x7978;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x5B9E;&#x4F8B;&#x5316;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x662F;java&#x53CD;&#x5C04;&#x673A;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x65E6;&#x6DF7;&#x6DC6;&#x4E86;&#x6211;&#x4EEC;&#x7684;java&#x53CD;&#x5C04;&#x5C31;&#x627E;&#x4E0D;&#x5230;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x7C7B;&#x540D;&#xFF0C;&#x8FD9;&#x6837;&#x81EA;&#x7136;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x6548;&#x679C;&#x4E86;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;&#x522B;&#x6025;&#xFF0C;&#x662F;&#x5426;&#x8FD8;&#x8BB0;&#x5F97;&#x5728;&#x7CFB;&#x5217;&#x7684;<strong>Part1</strong>&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;<strong>@Keep</strong>&#x3002;</p>\n<p>&#x5728;MainActivity$Binding&#x7C7B;&#x4E0A;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;@Keep&#x6765;&#x6807;&#x8BC6;&#x8BE5;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x6807;&#x8BC6;&#x544A;&#x8BC9;proguard&#x4E0D;&#x53BB;&#x6DF7;&#x6DC6;&#x4F7F;&#x7528;@Keep&#x6807;&#x8BB0;&#x7684;&#x7C7B;&#x3002;&#x8981;&#x8FBE;&#x5230;&#x8FD9;&#x79CD;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x7ECF;&#x8FC7;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF1A;</p>\n<p>1.&#x5728;butterknife-bind&#x7684;proguard-rules.pro&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">-keep class com.idisfkj.butterknife.annotations.Keep**</div><div class=\"line\">-keep @com.idisfkj.butterknife.annotations.Keep public class *</div><div class=\"line\">-keepclassmembers @com.idisfkj.butterknife.annotations.Keep class ** {*;}</div></pre></td></tr></table></figure>\n<p>2.&#x4E3A;&#x4E86;&#x662F;&#x4F9D;&#x8D56;&#x5E93;&#x7684;&#x6DF7;&#x6DC6;&#x751F;&#x6548;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x4F7F;&#x7528;consumerProguardFiles&#x58F0;&#x660E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">defaultConfig {</div><div class=\"line\">    ...</div><div class=\"line\">    consumerProguardFiles &apos;proguard-rules.pro&apos; //&#x4F9D;&#x8D56;&#x5E93;&#x6DF7;&#x6DC6;&#x751F;&#x6548;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B8C;&#x6210;&#x8FD9;&#x4E24;&#x6B65;&#x540E;&#x6211;&#x4EEC;&#x5728;&#x91CD;&#x65B0;&#x6784;&#x5EFA;release&#x7248;&#x672C;&#xFF0C;&#x8FD9;&#x65F6;&#x7A0B;&#x5E8F;&#x5B8C;&#x7F8E;&#x8FD0;&#x884C;&#x3002;&#x7EC8;&#x4E8E;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x7684;&#x4F11;&#x606F;&#x4F1A;&#x4E86;&#xFF01;</p>\n<h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;&#x7CFB;&#x5217;&#x5B8C;&#x7F8E;&#x6536;&#x5DE5;&#xFF0C;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x8FD9;&#x4E09;&#x90E8;&#x66F2;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x6CE8;&#x89E3;&#x5E93;&#x3002;&#x6700;&#x540E;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x70B9;&#x8D5E;&#x652F;&#x6301;&#x4E00;&#x4E0B;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>\n<p>&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<strong>feat_annotation_processing</strong></p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/07/01/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part1-%E6%B3%A8%E8%A7%A3%E5%8F%98%E9%87%8F/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1:&#x6CE8;&#x89E3;&#x53D8;&#x91CF;</a></p>\n<p><a href=\"https://idisfkj.github.io/2018/07/04/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part2-%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2:&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p>&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;</p>\n<p><img src=\"/2018/07/11/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3-&#x7ED1;&#x5B9A;/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"自定义Android注解Part2:代码自动生成","url":"https://www.rousetime.com/2018/07/04/自定义Android注解Part2-代码自动生成/","content":"<p><img src=\"/2018/07/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/2018-07-10.jpg\" alt=\"\"></p>\n<p>&#x4E0A;&#x4E00;&#x671F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x628A;butterknife-annotations&#x4E2D;&#x7684;&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x90FD;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x597D;&#x4E86;&#xFF0C;&#x5206;&#x522B;&#x4E3A;BindView&#x3001;OnClick&#x4E0E;Keep&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8FDB;&#x5165;&#x672C;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF0C;&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x8DF3;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x67E5;&#x770B;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x8981;&#x4E0D;&#x7136;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x70B9;&#x4E91;&#x91CC;&#x96FE;&#x91CC;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5B83;&#x5C06;&#x4E0E;&#x5F00;&#x6E90;&#x5E93;ButterKnife&#x7684;&#x64CD;&#x4F5C;&#x7C7B;&#x4F3C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">class MainActivity : AppCompatActivity() {</div><div class=\"line\"> </div><div class=\"line\">    @BindView(R.id.public_service, R.string.public_service)</div><div class=\"line\">    lateinit var sName: TextView</div><div class=\"line\"> </div><div class=\"line\">    @BindView(R.id.personal_wx, R.string.personal_wx)</div><div class=\"line\">    lateinit var sPhone: TextView</div><div class=\"line\"> </div><div class=\"line\">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_main)</div><div class=\"line\">        Butterknife.bind(this)</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @OnClick(R.id.public_service)</div><div class=\"line\">    fun nameClick(view: View) {</div><div class=\"line\">        Toast.makeText(this, getString(R.string.public_service_click_toast), Toast.LENGTH_LONG).show()</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @OnClick(R.id.personal_wx)</div><div class=\"line\">    fun phoneClick(view: View) {</div><div class=\"line\">        Toast.makeText(this, getString(R.string.personal_wx_click_toast), Toast.LENGTH_LONG).show()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;@BindView&#x6765;&#x7ED1;&#x5B9A;&#x6211;&#x7684;View&#xFF0C;&#x4F7F;&#x7528;@OnClick&#x6765;&#x7ED1;&#x5B9A;View&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;&#x4F7F;&#x7528;Butterknife.bind&#x6765;&#x7ED1;&#x5B9A;&#x8BE5;Class&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x3002;(&#x8BE5;&#x90E8;&#x5206;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x63D0;&#x53CA;)</p>\n<p>&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x7ED1;&#x5B9A;&#x6CE8;&#x89E3;&#x5E93;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;1/3&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C06;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x90E8;&#x5206;&#x3002;&#x8FD9;&#x65F6;&#x5C31;&#x5230;&#x4E86;&#x4E0A;&#x671F;&#x63D0;&#x5230;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;Module&#xFF1A;butterknife-compiler&#x3002;</p>\n<p><img src=\"/2018/07/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/1.png\" alt=\"\"></p>\n<p><strong>NameUtils</strong>&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x91CF;&#x7684;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x7C7B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">final class NameUtils {</div><div class=\"line\"> </div><div class=\"line\">    static String getAutoGeneratorTypeName(String typeName) {</div><div class=\"line\">        return typeName + ConstantUtils.BINDING_BUTTERKNIFE_SUFFIX;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    static class Package{</div><div class=\"line\">        static final String ANDROID_VIEW = &quot;android.view&quot;;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    static class Class {</div><div class=\"line\">        static final String CLASS_VIEW = &quot;View&quot;;</div><div class=\"line\">        static final String CLASS_ON_CLICK_LISTENER = &quot;OnClickListener&quot;;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    static class Method{</div><div class=\"line\">        static final String BIND_VIEW = &quot;bindView&quot;;</div><div class=\"line\">        static final String SET_ON_CLICK_LISTENER = &quot;setOnClickListener&quot;;</div><div class=\"line\">        static final String ON_CLICK = &quot;onClick&quot;;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    static class Variable{</div><div class=\"line\">        static final String ANDROID_ACTIVITY = &quot;activity&quot;;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>NameUitls&#x5305;&#x542B;&#x4E86;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x540D;&#x79F0;&#xFF0C;&#x5305;&#x540D;&#xFF0C;&#x65B9;&#x6CD5;&#x540D;&#xFF0C;&#x53D8;&#x91CF;&#x540D;&#x3002;&#x603B;&#x4E4B;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x4EE3;&#x7801;&#x66F4;&#x5065;&#x5168;&#xFF0C;&#x65B9;&#x4FBF;&#x7BA1;&#x7406;&#x3002;</p>\n<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x7C7B;Processor&#x662F;&#x4ECA;&#x5929;&#x7684;&#x91CD;&#x4E2D;&#x4E4B;&#x91CD;&#x3002;&#x4E5F;&#x662F;&#x6CE8;&#x89E3;&#x5E93;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x3002;&#x7531;&#x4E8E;&#x6CE8;&#x89E3;&#x7684;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x5728;&#x6CE8;&#x89E3;&#x8FDB;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<strong>AbstractProcessor</strong>&#xFF0C;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x3002;</p>\n<ol>\n<li>init&#xFF1A;&#x521D;&#x59CB;&#x5316;&#x5FC5;&#x8981;&#x7684;&#x6570;&#x636E;</li>\n<li>getSupportedAnnotationTypes&#xFF1A;&#x6240;&#x652F;&#x6301;&#x7684;&#x6CE8;&#x89E3;</li>\n<li>process&#xFF1A;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#xFF0C;&#x7F16;&#x5199;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;</li>\n</ol>\n<h2 id=\"init\"><a href=\"#init\" class=\"headerlink\" title=\"init\"></a>init</h2><p>&#x4ECE;&#x7B80;&#x5355;&#x5230;&#x5BB9;&#x6613;&#xFF0C;&#x5148;&#x662F;init&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x770B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public synchronized void init(ProcessingEnvironment processingEnv) {</div><div class=\"line\">    super.init(processingEnv);</div><div class=\"line\">    mFiler = processingEnv.getFiler();</div><div class=\"line\">    mMessager = processingEnv.getMessager();</div><div class=\"line\">    mElementUtils = processingEnv.getElementUtils();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x65B9;&#x6CD5;&#x53C2;&#x6570;processingEnv&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x6240;&#x9700;&#x7684;&#x73AF;&#x5883;&#x72B6;&#x6001;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;getFiler()&#x3001;getMessager()&#x4E0E;getElementUthis()&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x521B;&#x5EFA;&#x6E90;&#x4EE3;&#x7801;&#x7684;Filer&#x3001;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x5668;Messager(&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5411;&#x5916;&#x754C;&#x53D1;&#x9001;&#x9519;&#x8BEF;&#x4FE1;&#x606F;)&#x4E0E;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#x6240;&#x9700;&#x7684;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#xFF1A;&#x5F53;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6784;&#x5EFA;&#x597D;&#x4E86;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Filter&#x6765;&#x5C06;&#x4EE3;&#x7801;&#x5199;&#x5165;&#x5230;java&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5982;&#x9047;&#x9519;&#x8BEF;&#x4F7F;&#x7528;Messager&#x5C06;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x5199;&#x5165;java&#x6587;</div><div class=\"line\">try {</div><div class=\"line\">    JavaFile.builder(packageName, typeBuilder.build()).build().writeTo(mFiler)</div><div class=\"line\">} catch (IOException e) {</div><div class=\"line\">    mMessager.printMessage(Diagnostic.Kind.ERROR, e.getMessage(), typeElement);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x4E2D;&#x7684;JavaFile&#x4E0E;typeBuilder&#x90FD;&#x662F;JavaPoet&#x4E2D;&#x7684;&#x7C7B;&#x3002;JavaPote&#x4E3B;&#x8981;&#x63D0;&#x4F9B;Java API&#x6765;&#x5E2E;&#x52A9;&#x751F;&#x6210;<code>.java</code>&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x3002;</p>\n<h2 id=\"getSupportedAnnotationTypes\"><a href=\"#getSupportedAnnotationTypes\" class=\"headerlink\" title=\"getSupportedAnnotationTypes\"></a>getSupportedAnnotationTypes</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public Set&lt;String&gt; getSupportedAnnotationTypes() {</div><div class=\"line\">    return new TreeSet&lt;&gt;(Arrays.asList(</div><div class=\"line\">            BindView.class.getCanonicalName(),</div><div class=\"line\">            OnClick.class.getCanonicalName(),</div><div class=\"line\">            Keep.class.getCanonicalName())</div><div class=\"line\">    );</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF0C;&#x5305;&#x542B;&#x6240;&#x652F;&#x6301;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x5C06;&#x5176;&#x901A;&#x8FC7;set&#x96C6;&#x5408;&#x6765;&#x8FD4;&#x56DE;&#x3002;&#x8FD9;&#x91CC;&#x5C06;&#x6211;&#x4EEC;&#x4E0A;&#x4E00;&#x671F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x6DFB;&#x52A0;&#x5230;set&#x96C6;&#x5408;&#x4E2D;&#x5373;&#x53EF;&#x3002;</p>\n<h2 id=\"process\"><a href=\"#process\" class=\"headerlink\" title=\"process\"></a>process</h2><p>&#x5230;&#x4E86;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x6838;&#x5FC3;&#xFF0C;process&#x7528;&#x6765;&#x751F;&#x6210;&#x4E0E;&#x6CE8;&#x89E3;&#x76F8;&#x5339;&#x914D;&#x7684;&#x65B9;&#x6CD5;&#x4EE3;&#x7801;&#x3002;&#x901A;&#x8FC7;&#x89E3;&#x6790;Class&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x751F;&#x6210;&#x4E0E;&#x6CE8;&#x89E3;&#x76F8;&#x5173;&#x8054;&#x7684;&#x7C7B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {</div><div class=\"line\">    ....</div><div class=\"line\">    ....</div><div class=\"line\">    return true;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;annotations&#x4E0E;roundEnv&#xFF0C;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4EE3;&#x8868;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#xFF1B;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x5668;&#x6240;&#x9700;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x3002;</p>\n<p>&#x5728;&#x5F00;&#x59CB;&#x89E3;&#x6790;&#x6CE8;&#x89E3;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5148;&#x8FC7;&#x6EE4;&#x6211;&#x4EEC;&#x6240;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x6CE8;&#x89E3;&#x3002;&#x56DE;&#x5934;&#x770B;getSupportedAnnotationTypes&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x652F;&#x6301;BindView&#x3001;OnClick&#x4E0E;Keep&#x8FD9;&#x4E09;&#x4E2A;&#x6CE8;&#x89E3;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x6790;&#x51FA;&#x76F8;&#x5339;&#x914D;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5355;&#x72EC;&#x62BD;&#x79BB;&#x51FA;&#x6765;&#xFF0C;&#x4EA4;&#x7531;getTypeElementsByAnnotationType&#x6765;&#x7BA1;&#x7406;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Set&lt;TypeElement&gt; getTypeElementsByAnnotationType(Set&lt;? extends TypeElement&gt; annotations, Set&lt;? extends Element&gt; elements) {</div><div class=\"line\">    Set&lt;TypeElement&gt; result = new HashSet&lt;&gt;();</div><div class=\"line\">    //&#x904D;&#x5386;&#x5305;&#x542B;&#x7684; package class method</div><div class=\"line\">    for (Element element : elements) {</div><div class=\"line\">        //&#x5339;&#x914D; class or interface</div><div class=\"line\">        if (element instanceof TypeElement) {</div><div class=\"line\">            boolean found = false;</div><div class=\"line\">            //&#x904D;&#x5386;class&#x4E2D;&#x5305;&#x542B;&#x7684; filed method constructors</div><div class=\"line\">            for (Element subElement : element.getEnclosedElements()) {</div><div class=\"line\">                //&#x904D;&#x5386;element&#x4E2D;&#x5305;&#x542B;&#x7684;&#x6CE8;&#x91CA;</div><div class=\"line\">                for (AnnotationMirror annotationMirror : subElement.getAnnotationMirrors()) {</div><div class=\"line\">                    for (TypeElement annotation : annotations) {</div><div class=\"line\">                        //&#x5339;&#x914D;&#x6CE8;&#x91CA;</div><div class=\"line\">                        if (annotationMirror.getAnnotationType().asElement().equals(annotation)) {</div><div class=\"line\">                            result.add((TypeElement) element);</div><div class=\"line\">                            found = true;</div><div class=\"line\">                            break;</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                    if (found) break;</div><div class=\"line\">                }</div><div class=\"line\">                if (found) break;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    return result;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x7406;&#x89E3;Element&#x662F;&#x4EC0;&#x4E48;&#xFF1F;Element&#x4EE3;&#x8868;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5305;&#x540D;&#x3001;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6CE8;&#x89E3;&#x6240;&#x652F;&#x6301;&#x7684;&#x4F5C;&#x7528;&#x7C7B;&#x578B;&#x3002;&#x7136;&#x540E;&#x518D;&#x56DE;&#x5230;&#x4EE3;&#x7801;&#x90E8;&#x5206;&#xFF0C;&#x5DF2;&#x7ECF;&#x7ED9;&#x51FA;&#x8BE6;&#x7EC6;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x3002;<br>&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x5230;&#x6709;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x7684;class&#x3002;&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;</p>\n<ol>\n<li>getEnclosedElements()&#xFF1A;&#x83B7;&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x95ED;&#x5305;&#x7684;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x4F8B;&#x4E2D;&#x5143;&#x7D20;&#x4E3A;MainActivity(TypeElement&#xFF0C;Type&#x4EE3;&#x8868;Class)&#xFF0C;&#x800C;&#x95ED;&#x5305;&#x7684;&#x6CE8;&#x89E3;&#x5143;&#x7D20;&#x5219;&#x4E3A;sName&#x3001;sPhone&#x3001;nameClick&#x3001;phoneClick&#x4E0E;onCreate&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x83B7;&#x53D6;&#x6709;&#x6CE8;&#x89E3;&#x7684;&#x5B57;&#x6BB5;&#x540D;&#x3001;&#x65B9;&#x6CD5;&#x540D;</li>\n<li>getAnnotationMirrors()&#xFF1A;&#x83B7;&#x53D6;&#x4E0A;&#x8FF0;&#x95ED;&#x5305;&#x5143;&#x7D20;&#x7684;&#x6240;&#x6709;&#x6CE8;&#x89E3;&#x3002;&#x8FD9;&#x91CC;&#x5206;&#x522B;&#x4E3A;sName&#x4E0E;sPhone&#x4E0A;&#x7684;@BindeView&#x3001;nameClick&#x4E0E;phoneClick&#x4E0A;&#x7684;@OnClick&#x3001;onCreate&#x4E0A;&#x7684;@Override&#x3002;</li>\n</ol>\n<p>&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x6CD5;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x7684;&#x5C31;&#x662F;MainActivity&#xFF0C;&#x5B83;&#x5C06;&#x88AB;&#x8F6C;&#x5316;&#x4E3A;TypeElement&#x7C7B;&#x578B;&#x8FD4;&#x56DE;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x7531;processing&#x6765;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x518D;&#x56DE;&#x5230;process&#x65B9;&#x6CD5;&#x4E2D;&#x3002;&#x901A;&#x8FC7;getTypeElementsByAnnotationType()&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x7684;TypeElement(MainActivity)&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x83B7;&#x53D6;&#x4E0E;annotation&#x76F8;&#x5339;&#x914D;&#x7684;TypeElement,&#x5373;&#x6709;&#x6CE8;&#x91CA;&#x58F0;&#x660E;&#x7684;class</div><div class=\"line\">Set&lt;TypeElement&gt; elements = getTypeElementsByAnnotationType(annotations, roundEnv.getRootElements());</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x518D;&#x83B7;&#x53D6;&#x6784;&#x5EFA;&#x7C7B;&#x6240;&#x9700;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x5305;&#x540D;</div><div class=\"line\">String packageName = mElementUtils.getPackageOf(typeElement).getQualifiedName().toString();</div><div class=\"line\">//&#x7C7B;&#x540D;</div><div class=\"line\">String typeName = typeElement.getSimpleName().toString();</div><div class=\"line\">//&#x5168;&#x79F0;&#x7C7B;&#x540D;</div><div class=\"line\">ClassName className = ClassName.get(packageName, typeName);</div><div class=\"line\">//&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7C7B;&#x5168;&#x79F0;&#x540D;</div><div class=\"line\">ClassName autoGenerationClassName = ClassName.get(packageName,</div><div class=\"line\">        NameUtils.getAutoGeneratorTypeName(typeName));</div><div class=\"line\"> </div><div class=\"line\">//&#x6784;&#x5EFA;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;</div><div class=\"line\">TypeSpec.Builder typeBuilder = TypeSpec.classBuilder(autoGenerationClassName)</div><div class=\"line\">        .addModifiers(Modifier.PUBLIC)</div><div class=\"line\">        .addAnnotation(Keep.class);</div></pre></td></tr></table></figure>\n<p>&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x5212;&#x5206;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x56DB;&#x4E2A;&#x6B65;&#x9AA4;</p>\n<ol>\n<li>&#x83B7;&#x53D6;&#x5BF9;&#x5E94;typeElement&#x7684;&#x5305;&#x540D;&#xFF08;&#x8FD9;&#x91CC;&#x83B7;&#x53D6;&#x7684;&#x662F;com.idisfkj.androidapianalysis&#xFF09;</li>\n<li>&#x83B7;&#x53D6;typeElement&#x7684;SimpleName&#xFF08;&#x8FD9;&#x91CC;&#x4E3A;MainActivity&#x5B57;&#x7B26;&#x4E32;&#xFF09;</li>\n<li>&#x6839;&#x636E;&#x4E0A;&#x8FF0;&#x83B7;&#x53D6;&#x7684;&#x5305;&#x540D;&#x4E0E;SimpleName&#x6765;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;ClassName&#xFF0C;&#x4E3A;&#x4E86;&#x540E;&#x7EED;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#xFF08;&#x8FD9;&#x91CC;&#x4E3A;MainActivity&#x7C7B;&#xFF0C;&#x6CE8;&#x610F;&#x662F;MainActivity&#x7C7B;&#x578B;&#xFF09;</li>\n<li>&#x6784;&#x5EFA;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;ClassName&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;NameUtils.getAutoGeneratorTypeName&#x8FDB;&#x884C;&#x4E86;&#x7EDF;&#x4E00;&#x547D;&#x540D;&#xFF08;&#x8FD9;&#x91CC;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x540D;&#x4E3A;MainActivity$Binding&#xFF0C;&#x90FD;&#x4EE5;&#x539F;&#x59CB;&#x7C7B;&#x540D;&#x540E;&#x9762;&#x52A0;$Binding&#xFF09;</li>\n</ol>\n<p>&#x6240;&#x6709;&#x4FE1;&#x606F;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x5B9A;&#x4E49;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x3002;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<strong>TypeSpec.Builder</strong>&#x6765;&#x6784;&#x5EFA;&#x3002;&#x5B83;&#x662F;JavaPoet&#x4E2D;&#x7684;&#x7C7B;&#x3002;</p>\n<h2 id=\"JavaPoet\"><a href=\"#JavaPoet\" class=\"headerlink\" title=\"JavaPoet\"></a>JavaPoet</h2><p>&#x7531;&#x4E8E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;JavaFileObject&#x751F;&#x6210;.java&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x662F;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x63A8;&#x8350;&#x4F7F;&#x7528;JavaPoet&#x3002;JavaPoet&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5E2E;&#x52A9;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;&#x7684;&#x751F;&#x6210;.java&#x7684;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x3002;&#x60F3;&#x8981;&#x5168;&#x9762;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://github.com/square/javapoet\" target=\"_blank\" rel=\"external\">Github</a>&#x94FE;&#x63A5;&#x3002;&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x5FEB;&#x901F;&#x8BFB;&#x61C2;&#x8BE5;&#x6587;&#x7AE0;&#xFF0C;&#x8FD9;&#x91CC;&#x5BF9;&#x5176;&#x4E2D;&#x51E0;&#x4E2A;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4ECB;&#x7ECD;&#x3002;&#x5F53;&#x7136;&#x5728;&#x4F7F;&#x7528;&#x524D;&#x8FD8;&#x9700;&#x5728;butterknife-compiler&#x4E2D;&#x7684;builder.gradle&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</div><div class=\"line\">    implementation project(&apos;:butterknife-annotations&apos;)</div><div class=\"line\">    implementation &apos;com.squareup:javapoet:1.11.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x4E5F;&#x5C06;&#x4E0A;&#x4E00;&#x671F;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;Module&#x5F15;&#x5165;&#x3002;</p>\n<ol>\n<li>TypeSpec.Builder: &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;</li>\n<li>addModifiers: &#x5B9A;&#x4E49;private&#x3001;public&#x4E0E;protected&#x7C7B;&#x578B;</li>\n<li>addAnnotation: &#x5BF9;Element&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;&#x3002;&#x4F8B;&#x5982;&#xFF1A;@Keep</li>\n<li>TypeSpec.Builder -&gt; addMethod: &#x6DFB;&#x52A0;&#x65B9;&#x6CD5;</li>\n<li>MethodSpec -&gt; addParameter: &#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E0E;&#x53C2;&#x6570;&#x540D;</li>\n<li>MethodSpec -&gt; addStatement: &#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;&#x4EE3;&#x7801;&#x5757;&#x3002;&#x800C;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x4F1A;&#x4F7F;&#x7528;&#x5360;&#x4F4D;&#x7B26;&#x66FF;&#x4EE3;&#x3002;&#x4F8B;&#x5982;&#xFF1A;addStatement(&#x201C;$N($N)&#x201D;, &#x201C;bindView&#x201D;, &#x201C;activity&#x201D;)&#xFF0C;&#x5B83;&#x5C06;&#x4F1A;&#x751F;&#x6210;bindView(activity)&#x3002;&#x5360;&#x4F4D;&#x7B26;&#xFF1A;$N -&gt; name, $T -&gt; type(ClassName), $L -&gt; literals</li>\n</ol>\n<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x7406;&#x89E3;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6784;&#x5EFA;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;</div><div class=\"line\">TypeSpec.Builder typeBuilder = TypeSpec.classBuilder(autoGenerationClassName)</div><div class=\"line\">        .addModifiers(Modifier.PUBLIC)</div><div class=\"line\">        .addAnnotation(Keep.class);</div><div class=\"line\"> </div><div class=\"line\">//&#x6DFB;&#x52A0;&#x6784;&#x9020;&#x65B9;&#x6CD5;</div><div class=\"line\">typeBuilder.addMethod(MethodSpec.constructorBuilder()</div><div class=\"line\">        .addModifiers(Modifier.PUBLIC)</div><div class=\"line\">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY)</div><div class=\"line\">        .addStatement(&quot;$N($N)&quot;,</div><div class=\"line\">                NameUtils.Method.BIND_VIEW,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY)</div><div class=\"line\">        .addStatement(&quot;$N($N)&quot;,</div><div class=\"line\">                NameUtils.Method.SET_ON_CLICK_LISTENER,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY)</div><div class=\"line\">        .build());</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x901A;&#x8FC7;TypeSpec.Builder&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x7C7B;&#x540D;&#x4E3A;autoGenerationClassName(MainActivity$Binding)&#xFF0C;&#x7C7B;&#x7684;&#x8BBF;&#x95EE;&#x7EA7;&#x522B;&#x4E3A;public&#xFF0C;&#x7531;&#x4E8E;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6DF7;&#x6DC6;&#x4F7F;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;@Keep&#x6CE8;&#x89E3;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x518D;&#x6765;&#x6DFB;&#x52A0;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;addMethod&#x3001;addModifiers&#x3001;addParameter&#x4E0E;addStatement&#x5206;&#x522B;&#x6784;&#x5EFA;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x540D;&#x3001;&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;&#x7EA7;&#x522B;&#x3001;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x4E0E;&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x3002;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6700;&#x7EC8;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Keep</div><div class=\"line\">public class MainActivity$Binding {</div><div class=\"line\">  public MainActivity$Binding(MainActivity activity) {</div><div class=\"line\">    bindView(activity);</div><div class=\"line\">    setOnClickListener(activity);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;bindView&#x4E0E;setOnClickListener&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x6784;&#x5EFA;&#x3002;</p>\n<h2 id=\"bindView\"><a href=\"#bindView\" class=\"headerlink\" title=\"bindView\"></a>bindView</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6DFB;&#x52A0;bindView&#x6210;&#x5458;&#x65B9;&#x6CD5;</div><div class=\"line\">MethodSpec.Builder bindViewBuilder = MethodSpec.methodBuilder(NameUtils.Method.BIND_VIEW)</div><div class=\"line\">        .addModifiers(Modifier.PRIVATE)</div><div class=\"line\">        .returns(TypeName.VOID)</div><div class=\"line\">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY);</div><div class=\"line\"> </div><div class=\"line\">//&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x5185;&#x5BB9;</div><div class=\"line\">for (VariableElement variableElement : ElementFilter.fieldsIn(typeElement.getEnclosedElements())) {</div><div class=\"line\">    BindView bindView = variableElement.getAnnotation(BindView.class);</div><div class=\"line\">    if (bindView != null) {</div><div class=\"line\">        bindViewBuilder.addStatement(&quot;$N.$N=($T)$N.findViewById($L)&quot;,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                variableElement.getSimpleName(),</div><div class=\"line\">                variableElement,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                bindView.value()[0]</div><div class=\"line\">        ).addStatement(&quot;$N.$N.setText($N.getString($L))&quot;,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                variableElement.getSimpleName(),</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                bindView.value()[1]);</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">typeBuilder.addMethod(bindViewBuilder.build());</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;MethodSpec.Builder&#x6765;&#x521B;&#x5EFA;bindView&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x4E0E;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#x3002;&#x4F7F;&#x7528;returns&#x4E3A;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;void&#x7C7B;&#x578B;&#x3002;&#x7136;&#x540E;&#x518D;&#x904D;&#x5386;MainActivity&#x4E2D;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x627E;&#x5230;&#x4E0E;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;BindView&#x76F8;&#x5339;&#x914D;&#x7684;&#x5B57;&#x6BB5;&#x3002;&#x6700;&#x540E;&#x5206;&#x522B;&#x5411;bindView&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;findViewById&#x4E0E;setText&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;typeBuilder&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x6267;&#x884C;&#x5B8C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x540E;&#x5728;MainActivity$Binding&#x4E2D;&#x5C55;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void bindView(MainActivity activity) {</div><div class=\"line\">  activity.sName=(TextView)activity.findViewById(2131165265);</div><div class=\"line\">  activity.sName.setText(activity.getString(2131427362));</div><div class=\"line\">  activity.sPhone=(TextView)activity.findViewById(2131165262);</div><div class=\"line\">  activity.sPhone.setText(activity.getString(2131427360));</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x73B0;&#x4E86;&#x6211;&#x4EEC;&#x6700;&#x521D;&#x7684;View&#x7684;&#x7ED1;&#x5B9A;&#x4E0E;TextView&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x8BBE;&#x7F6E;&#x3002;</p>\n<h2 id=\"setOnClickListener\"><a href=\"#setOnClickListener\" class=\"headerlink\" title=\"setOnClickListener\"></a>setOnClickListener</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6DFB;&#x52A0;setOnClickListener&#x6210;&#x5458;&#x65B9;&#x6CD5;</div><div class=\"line\">MethodSpec.Builder setOnClickListenerBuilder = MethodSpec.methodBuilder(NameUtils.Method.SET_ON_CLICK_LISTENER)</div><div class=\"line\">        .addModifiers(Modifier.PRIVATE)</div><div class=\"line\">        .returns(TypeName.VOID)</div><div class=\"line\">        .addParameter(className, NameUtils.Variable.ANDROID_ACTIVITY, Modifier.FINAL);</div><div class=\"line\"> </div><div class=\"line\">//&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x5185;&#x5BB9;</div><div class=\"line\">ClassName viewClassName = ClassName.get(NameUtils.Package.ANDROID_VIEW, NameUtils.Class.CLASS_VIEW);</div><div class=\"line\">ClassName onClickListenerClassName = ClassName.get(NameUtils.Package.ANDROID_VIEW, NameUtils.Class.CLASS_VIEW, NameUtils.Class.CLASS_ON_CLICK_LISTENER);</div><div class=\"line\"> </div><div class=\"line\">for (ExecutableElement executableElement : ElementFilter.methodsIn(typeElement.getEnclosedElements())) {</div><div class=\"line\">    OnClick onClick = executableElement.getAnnotation(OnClick.class);</div><div class=\"line\">    if (onClick != null) {</div><div class=\"line\">        //&#x6784;&#x5EFA;&#x533F;&#x540D;class</div><div class=\"line\">        TypeSpec typeSpec = TypeSpec.anonymousClassBuilder(&quot;&quot;)</div><div class=\"line\">                .addSuperinterface(onClickListenerClassName)</div><div class=\"line\">                .addMethod(MethodSpec.methodBuilder(NameUtils.Method.ON_CLICK)</div><div class=\"line\">                        .addModifiers(Modifier.PUBLIC)</div><div class=\"line\">                        .addParameter(viewClassName, NameUtils.Class.CLASS_VIEW)</div><div class=\"line\">                        .returns(TypeName.VOID)</div><div class=\"line\">                        .addStatement(&quot;$N.$N($N)&quot;,</div><div class=\"line\">                                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                                executableElement.getSimpleName(),</div><div class=\"line\">                                NameUtils.Class.CLASS_VIEW)</div><div class=\"line\">                        .build())</div><div class=\"line\">                .build();</div><div class=\"line\"></div><div class=\"line\">        setOnClickListenerBuilder.addStatement(&quot;$N.findViewById($L).setOnClickListener($L)&quot;,</div><div class=\"line\">                NameUtils.Variable.ANDROID_ACTIVITY,</div><div class=\"line\">                onClick.value(),</div><div class=\"line\">                typeSpec);</div><div class=\"line\">    }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">typeBuilder.addMethod(setOnClickListenerBuilder.build());</div></pre></td></tr></table></figure>\n<p>&#x4E0E;bindView&#x65B9;&#x6CD5;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x533F;&#x540D;&#x7C7B;OnClickListener&#x4E0E;&#x7C7B;View&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x4E5F;&#x8981;&#x5B9A;&#x4E49;&#x4ED6;&#x4EEC;&#x7684;ClassName&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;TypeSpec&#x6765;&#x751F;&#x6210;&#x533F;&#x540D;&#x7C7B;&#x3002;&#x751F;&#x6210;&#x4E4B;&#x540E;&#x518D;&#x6DFB;&#x52A0;&#x5230;setOnClickListener&#x65B9;&#x6CD5;&#x4E2D;&#x3002;&#x6700;&#x540E;&#x518D;&#x5C06;setOnClickListener&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;MainActivity$Binding&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x5C55;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void setOnClickListener(final MainActivity activity) {</div><div class=\"line\">  activity.findViewById(2131165265).setOnClickListener(new View.OnClickListener() {</div><div class=\"line\">    public void onClick(View View) {</div><div class=\"line\">      activity.nameClick(View);</div><div class=\"line\">    }</div><div class=\"line\">  });</div><div class=\"line\">  activity.findViewById(2131165262).setOnClickListener(new View.OnClickListener() {</div><div class=\"line\">    public void onClick(View View) {</div><div class=\"line\">      activity.phoneClick(View);</div><div class=\"line\">    }</div><div class=\"line\">  });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x7684;MainActivity$Binding&#x7C7B;&#x5C31;&#x5DF2;&#x7ECF;&#x5B9A;&#x4E49;&#x5B8C;&#x6210;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5199;&#x5165;&#x5230;java&#x6587;&#x4EF6;&#x4E2D;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x5199;&#x5165;java&#x6587;&#x4EF6;</div><div class=\"line\">try {</div><div class=\"line\">    JavaFile.builder(packageName, typeBuilder.build()).build().writeTo(mFiler);</div><div class=\"line\">} catch (IOException e) {</div><div class=\"line\">    mMessager.printMessage(Diagnostic.Kind.ERROR, e.getMessage(), typeElement);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"services\"><a href=\"#services\" class=\"headerlink\" title=\"services\"></a>services</h2><p>&#x5728;butterknife-compiler&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x76EE;&#x5F55;&#xFF1A;<br><code>butterknife-compiler/src/main/resources/META-INF/services</code></p>\n<p>&#x5728;services&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;<code>javax.annotation.processing.Processor</code>&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x662F;&#x7528;&#x6765;&#x544A;&#x8BC9;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x5F53;&#x5B83;&#x5728;&#x7F16;&#x8BD1;&#x4EE3;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6B63;&#x5904;&#x4E8E;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x4E2D;&#x65F6;&#xFF0C;&#x4F1A;&#x544A;&#x8BC9;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x5668;&#x6765;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x54EA;&#x4E9B;&#x7C7B;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x5C06;&#x6DFB;&#x52A0;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Processor&#x8DEF;&#x5F84;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">com.idisfkj.butterknife.compiler.Processor</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x6CE8;&#x89E3;&#x5668;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x6307;&#x5B9A;&#x7684;Processor&#x3002;&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;butterknife-compiler&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;<code>Make Project</code>&#x4E00;&#x4E0B;&#x5DE5;&#x7A0B;&#xFF0C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5168;&#x5C40;&#x641C;&#x7D22;&#x5230;MainActivity$Binding&#x6587;&#x4EF6;&#x4E86;&#x3002;&#x6216;&#x8005;&#x5728;&#x5982;&#x4E0B;&#x8DEF;&#x5F84;&#x4E2D;&#x67E5;&#x770B;&#xFF1A;</p>\n<p><code>/app/build/generated/source/kapt/debug/com/idisfkj/androidapianalysis/MainActivity$Binding.java</code></p>\n<p>&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<strong>feat_annotation_processing</strong></p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/07/01/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part1-%E6%B3%A8%E8%A7%A3%E5%8F%98%E9%87%8F/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1:&#x6CE8;&#x89E3;&#x53D8;&#x91CF;</a></p>\n<p><a href=\"https://idisfkj.github.io/2018/07/11/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part3-%E7%BB%91%E5%AE%9A/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3:&#x7ED1;&#x5B9A;</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/07/04/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2-&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"自定义Android注解Part1:注解变量","url":"https://www.rousetime.com/2018/07/01/自定义Android注解Part1-注解变量/","content":"<p><img src=\"/2018/07/01/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1-&#x6CE8;&#x89E3;&#x53D8;&#x91CF;/cover.png\" alt=\"\"></p>\n<p>&#x5BF9;&#x4E8E;Android&#x6CE8;&#x89E3;&#xFF0C;&#x6216;&#x591A;&#x6216;&#x5C11;&#x90FD;&#x6709;&#x4E00;&#x70B9;&#x63A5;&#x89E6;&#xFF0C;&#x4F46;&#x76F8;&#x4FE1;&#x5927;&#x591A;&#x6570;&#x4EBA;&#x90FD;&#x662F;&#x5728;&#x4F7F;&#x7528;&#x5176;&#x5B83;&#x4F9D;&#x8D56;&#x5E93;&#x7684;&#x65F6;&#x5019;&#x63A5;&#x89E6;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#x6709;&#x4E9B;&#x5E93;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4F7F;&#x7528;&#x5B83;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x5B83;&#x6240;&#x63D0;&#x4F9B;&#x7684;&#x6CE8;&#x89E3;&#x3002;&#x4F8B;&#x5982;&#xFF1A;ButterKnife&#x3001;Dagger2&#x3001;Room&#x7B49;&#x7B49;&#x3002;</p>\n<p>&#x81F3;&#x4E8E;&#x4E3A;&#x4F55;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#xFF1F;&#x4F7F;&#x7528;&#x8FC7;&#x7684;&#x5E94;&#x8BE5;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x6700;&#x660E;&#x663E;&#x7684;&#x5C31;&#x662F;&#x65B9;&#x4FBF;&#x3001;&#x7B80;&#x6D01;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x5728;&#x9879;&#x76EE;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x4E9B;&#x91CD;&#x590D;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x51CF;&#x8F7B;&#x6211;&#x4EEC;&#x7684;&#x8D1F;&#x62C5;&#x3002;&#x5178;&#x578B;&#x7684;ButterKnife&#x672C;&#x8D28;&#x5C31;&#x662F;&#x4F7F;&#x7528;Android&#x6CE8;&#x89E3;&#xFF0C;&#x901A;&#x8FC7;&#x6CE8;&#x89E3;&#x6765;&#x51CF;&#x5C11;&#x6211;&#x4EEC;&#x5BF9;view.findViewById&#x7684;&#x7F16;&#x5199;&#xFF0C;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;&#x4E0A;&#x4E00;&#x4E2A;&#x7CFB;&#x5217;(AAC)&#x7684;Room&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Entity(tableName = &quot;contacts&quot;)</div><div class=\"line\">data class ContactsModel(</div><div class=\"line\">        @PrimaryKey</div><div class=\"line\">        @ColumnInfo(name = &quot;contacts_id&quot;)</div><div class=\"line\">        val id: Int,</div><div class=\"line\">        @ColumnInfo(name = &quot;name&quot;)</div><div class=\"line\">        val name: String,</div><div class=\"line\">        @ColumnInfo(name = &quot;phone&quot;)</div><div class=\"line\">        val phone: String</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x6765;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x8868;&#xFF0C;&#x4E5F;&#x5C31;10&#x884C;&#x5DE6;&#x53F3;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5982;&#x679C;&#x8981;&#x6211;&#x4EEC;&#x5168;&#x90E8;&#x81EA;&#x5DF1;&#x5199;&#x90A3;&#x7EDD;&#x5BF9;&#x8981;&#x4E24;&#x4E09;&#x767E;&#x884C;&#x4EE3;&#x7801;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x5176;&#x4E2D;&#x8FD8;&#x53EF;&#x80FD;&#x51FA;&#x9519;&#xFF0C;&#x53C8;&#x8981;&#x6539;bug&#x7B49;&#x7B49;&#x3002;&#x6548;&#x7387;&#x5C31;&#x4E25;&#x91CD;&#x964D;&#x4F4E;&#x3002;&#x5BF9;&#x4E8E;&#x4F9D;&#x8D56;&#x5E93;&#x5982;&#x679C;&#x90FD;&#x8FD9;&#x4E48;&#x9EBB;&#x70E6;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x4EBA;&#x7528;&#x4E86;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x4F9D;&#x8D56;&#x5E93;&#x662F;&#x5426;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x8981;&#x8BB0;&#x4F4F;&#x4EE5;&#x4E0B;&#x4E24;&#x70B9;&#x5373;&#x53EF;&#xFF1A;</p>\n<ol>\n<li>&#x9700;&#x8981;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x80FD;&#x4E0E;&#x9879;&#x76EE;&#x903B;&#x8F91;&#x6709;&#x5173;</li>\n<li>Android&#x6CE8;&#x89E3;&#x53EA;&#x80FD;&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x4EE3;&#x7801;</li>\n</ol>\n<blockquote>\n<p>&#x8FD9;&#x91CC;&#x900F;&#x9732;&#x4E00;&#x4E0B;&#xFF0C;Android&#x6CE8;&#x89E3;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4F7F;&#x7528;Java&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;&#xFF0C;&#x540E;&#x7EED;&#x4F1A;&#x8BE6;&#x7EC6;&#x8BF4;&#x660E;</p>\n</blockquote>\n<h2 id=\"&#x9879;&#x76EE;&#x67B6;&#x6784;\"><a href=\"#&#x9879;&#x76EE;&#x67B6;&#x6784;\" class=\"headerlink\" title=\"&#x9879;&#x76EE;&#x67B6;&#x6784;\"></a>&#x9879;&#x76EE;&#x67B6;&#x6784;</h2><p>&#x76F8;&#x4FE1;ButterKnife&#x5E94;&#x8BE5;&#x6709;&#x63A5;&#x89E6;&#x8FC7;&#x5427;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x4E5F;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x73B0;&#x5728;&#x6B63;&#x662F;&#x65F6;&#x5019;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F1A;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;BindView&#x4E0E;OnClick&#x6CE8;&#x89E3;&#xFF0C;&#x5B9E;&#x73B0;ButterKnife&#x4E2D;&#x7684;&#x5BF9;&#x5E94;&#x6CE8;&#x89E3;&#x529F;&#x80FD;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x6574;&#x4F53;&#x7684;&#x9879;&#x76EE;&#x67B6;&#x6784;</p>\n<p><img src=\"/2018/07/01/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1-&#x6CE8;&#x89E3;&#x53D8;&#x91CF;/1.png\" alt=\"\"></p>\n<p>&#x901A;&#x8FC7;&#x9879;&#x76EE;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6E05;&#x6670;&#x7684;&#x770B;&#x5230;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x90E8;&#x5206;</p>\n<ol>\n<li>butterknife-annotations&#xFF1A;&#x6CE8;&#x89E3;&#x5E93;&#xFF0C;&#x5305;&#x542B;BindView&#x4E0E;OnClick&#x7B49;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;</li>\n<li>butterknife-bind&#xFF1A;&#x7ED1;&#x5B9A;&#x5E93;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x4E0E;&#x58F0;&#x660E;&#x7684;&#x7C7B;&#x7ED1;&#x5B9A;</li>\n<li>butterknife-compiler: &#x89E3;&#x6790;&#x7F16;&#x8BD1;&#x751F;&#x6210;&#x5E93;&#xFF0C;&#x89E3;&#x6790;&#x58F0;&#x660E;&#x7C7B;&#x4E2D;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x76F8;&#x5E94;&#x7684;&#x4EE3;&#x7801;&#x3002;</li>\n</ol>\n<p>&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x80FD;&#x591F;&#x66F4;&#x8F7B;&#x677E;&#x7684;&#x7406;&#x89E3;Android&#x6CE8;&#x89E3;&#xFF0C;&#x4ECA;&#x5929;&#x4E3B;&#x8981;&#x5206;&#x6790;&#x7684;&#x5C31;&#x662F;butterknife-annotations&#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;&#x5E93;&#x3002;&#x5E26;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x6765;&#x58F0;&#x660E;&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x3002;</p>\n<h2 id=\"BindView\"><a href=\"#BindView\" class=\"headerlink\" title=\"BindView\"></a>BindView</h2><p>&#x4E3A;&#x4E86;&#x8981;&#x5B9E;&#x73B0;&#x5F00;&#x6E90;&#x5E93;butterknife&#x7C7B;&#x4F3C;&#x7684;&#x7ED1;&#x5B9A;id&#x6548;&#x679C;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;BindView&#x6CE8;&#x89E3;&#xFF0C;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Retention(RetentionPolicy.SOURCE)</div><div class=\"line\">@Target(ElementType.FIELD)</div><div class=\"line\">public @interface BindView {</div><div class=\"line\">    @IdRes int[] value();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x55EF;&#xFF0C;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5BF9;&#x5427;&#x3002;&#x4E5F;&#x5C31;5&#x884C;&#x4EE3;&#x7801;&#x89E3;&#x51B3;BindView&#x6CE8;&#x89E3;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x518D;&#x6765;&#x8BE6;&#x7EC6;&#x5256;&#x6790;&#x8FD9;5&#x884C;&#x4EE3;&#x7801;&#x3002;</p>\n<h3 id=\"Retention\"><a href=\"#Retention\" class=\"headerlink\" title=\"Retention\"></a>Retention</h3><p>&#x9996;&#x5148;&#x662F;&#x7B2C;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x7684;Retention&#xFF0C;&#x770B;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5C31;&#x80FD;&#x77E5;&#x9053;&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x58F0;&#x660E;&#x4E86;&#x7684;&#x6CE8;&#x89E3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Documented</div><div class=\"line\">@Retention(RetentionPolicy.RUNTIME)</div><div class=\"line\">@Target(ElementType.ANNOTATION_TYPE)</div><div class=\"line\">public @interface Retention {</div><div class=\"line\">    /**</div><div class=\"line\">     * Returns the retention policy.</div><div class=\"line\">     * @return the retention policy</div><div class=\"line\">     */</div><div class=\"line\">    RetentionPolicy value();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8BE5;&#x6CE8;&#x89E3;&#x53EA;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x4E3A;RetentionPolicy&#x7C7B;&#x578B;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5728;&#x8FDB;&#x4E00;&#x6B65;&#x6DF1;&#x5165;RetentionPolicy&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public enum RetentionPolicy {</div><div class=\"line\">    /**</div><div class=\"line\">     * Annotations are to be discarded by the compiler.</div><div class=\"line\">     */</div><div class=\"line\">    SOURCE,</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Annotations are to be recorded in the class file by the compiler</div><div class=\"line\">     * but need not be retained by the VM at run time.  This is the default</div><div class=\"line\">     * behavior.</div><div class=\"line\">     */</div><div class=\"line\">    CLASS,</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Annotations are to be recorded in the class file by the compiler and</div><div class=\"line\">     * retained by the VM at run time, so they may be read reflectively.</div><div class=\"line\">     *</div><div class=\"line\">     * @see java.lang.reflect.AnnotatedElement</div><div class=\"line\">     */</div><div class=\"line\">    RUNTIME</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5B83;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x679A;&#x4E3E;&#xFF0C;&#x5728;&#x679A;&#x4E3E;&#x4E2D;&#x652F;&#x6301;&#x4E09;&#x4E2A;&#x5E38;&#x91CF;&#xFF0C;&#x5206;&#x522B;&#x4E3A;SOURCE&#x3001;CLASS&#x4E0E;RUNTIME&#x3002;&#x5B83;&#x4EEC;&#x7684;&#x533A;&#x522B;&#x4E3B;&#x8981;&#x662F;&#x4F5C;&#x7528;&#x7684;&#x5468;&#x671F;&#x8303;&#x56F4;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x518D;&#x5BF9;&#x8FD9;&#x4E09;&#x4E2A;&#x7684;&#x4F5C;&#x7528;&#x8FDB;&#x884C;&#x7FFB;&#x8BD1;&#x4E00;&#x904D;&#xFF1A;</p>\n<ol>\n<li>SOURCE&#xFF1A; &#x4F7F;&#x7528;&#x8BE5;&#x6807;&#x660E;&#x7684;&#x6CE8;&#x89E3;&#x5C06;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x5C31;&#x88AB;&#x629B;&#x5F03;&#x6389;&#x3002;</li>\n<li>CLASS&#xFF1A;&#x4F7F;&#x7528;&#x8BE5;&#x6807;&#x660E;&#x7684;&#x6CE8;&#x89E3;&#x5C06;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x8BB0;&#x5F55;&#x5230;&#x751F;&#x6210;&#x7684;class&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F46;&#x5728;&#x8FD0;&#x884C;&#x9636;&#x6BB5;&#x65F6;&#x53C8;&#x4F1A;&#x88AB;VM&#x629B;&#x5F03;&#x3002;&#x9ED8;&#x8BA4;&#x662F;&#x8BE5;&#x6A21;&#x5F0F;&#x3002;</li>\n<li>RUNTIME&#xFF1A;&#x4F7F;&#x7528;&#x8BE5;&#x6807;&#x660E;&#x7684;&#x6CE8;&#x89E3;&#x5C06;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x88AB;&#x4FDD;&#x5B58;&#x5728;&#x751F;&#x6210;&#x7684;class&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x8FD0;&#x884C;&#x9636;&#x6BB5;&#x65F6;&#x4F1A;&#x4FDD;&#x5B58;&#x5230;VM&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x5B83;&#x8BE5;&#x6CE8;&#x89E3;&#x5C06;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#xFF0C;&#x81EA;&#x7136;&#x80FD;&#x591F;&#x901A;&#x8FC7;java&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x3002;</li>\n</ol>\n<p>&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x7684;&#x5B58;&#x5728;&#x7684;&#x751F;&#x547D;&#x65F6;&#x957F;&#x4E3A;SOURCE &lt; CLASS &lt; RUNTIME&#x3002;&#x77E5;&#x9053;&#x4E86;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x65F6;&#x5C31;&#x8981;&#x5C3D;&#x91CF;&#x8F83;&#x5C0F;&#x6CE8;&#x89E3;&#x7684;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#xFF0C;&#x63D0;&#x9AD8;&#x9879;&#x76EE;&#x7684;&#x7F16;&#x8BD1;&#x4E0E;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;BindView&#x6CE8;&#x89E3;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x8FDB;&#x884C;Viwe&#x7684;&#x7ED1;&#x5B9A;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x5C31;&#x65E0;&#x9700;&#x5B58;&#x5728;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5C31;&#x4F7F;&#x7528;&#x4E86;CLASS&#x6765;&#x8FDB;&#x884C;&#x6807;&#x660E;&#x3002;</p>\n<h3 id=\"Target\"><a href=\"#Target\" class=\"headerlink\" title=\"Target\"></a>Target</h3><p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5728;&#x6765;&#x770B;&#x7B2C;&#x4E8C;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x6CE8;&#x89E3;Target&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Documented</div><div class=\"line\">@Retention(RetentionPolicy.RUNTIME)</div><div class=\"line\">@Target(ElementType.ANNOTATION_TYPE)</div><div class=\"line\">public @interface Target {</div><div class=\"line\">    /**</div><div class=\"line\">     * Returns an array of the kinds of elements an annotation type</div><div class=\"line\">     * can be applied to.</div><div class=\"line\">     * @return an array of the kinds of elements an annotation type</div><div class=\"line\">     * can be applied to</div><div class=\"line\">     */</div><div class=\"line\">    ElementType[] value();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6CE8;&#x89E3;&#x7684;&#x6E90;&#x7801;&#x90FD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x63A5;&#x6536;&#x4E86;&#x4E00;&#x4E2A;ElementType&#x6570;&#x7EC4;&#x53C2;&#x6570;&#xFF0C;ElementType&#x4E0D;&#x96BE;&#x731C;&#x51FA;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x679A;&#x4E3E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">public enum ElementType {</div><div class=\"line\">    /** Class, interface (including annotation type), or enum declaration */</div><div class=\"line\">    TYPE,</div><div class=\"line\"> </div><div class=\"line\">    /** Field declaration (includes enum constants) */</div><div class=\"line\">    FIELD,</div><div class=\"line\"> </div><div class=\"line\">    /** Method declaration */</div><div class=\"line\">    METHOD,</div><div class=\"line\"> </div><div class=\"line\">    /** Formal parameter declaration */</div><div class=\"line\">    PARAMETER,</div><div class=\"line\"> </div><div class=\"line\">    /** Constructor declaration */</div><div class=\"line\">    CONSTRUCTOR,</div><div class=\"line\"> </div><div class=\"line\">    /** Local variable declaration */</div><div class=\"line\">    LOCAL_VARIABLE,</div><div class=\"line\"> </div><div class=\"line\">    /** Annotation type declaration */</div><div class=\"line\">    ANNOTATION_TYPE,</div><div class=\"line\"> </div><div class=\"line\">    /** Package declaration */</div><div class=\"line\">    PACKAGE,</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Type parameter declaration</div><div class=\"line\">     *</div><div class=\"line\">     * @since 1.8</div><div class=\"line\">     */</div><div class=\"line\">    TYPE_PARAMETER,</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Use of a type</div><div class=\"line\">     *</div><div class=\"line\">     * @since 1.8</div><div class=\"line\">     */</div><div class=\"line\">    TYPE_USE</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>ElementType&#x4E2D;&#x867D;&#x7136;&#x6709;10&#x5E38;&#x91CF;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x771F;&#x6B63;&#x5E38;&#x7528;&#x7684;&#x4E5F;&#x5C31;&#x662F;&#x524D;&#x9762;8&#x79CD;&#x3002;&#x5B83;&#x4EEC;&#x4EE3;&#x8868;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x80FD;&#x591F;&#x4F5C;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5206;&#x522B;&#x4E3A;&#xFF1A;</p>\n<ol>\n<li>TYPE: &#x4F5C;&#x7528;&#x4E8E;&#x7C7B;&#x3001;&#x63A5;&#x53E3;&#x6216;&#x8005;&#x679A;&#x4E3E;</li>\n<li>FIELD&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x7C7B;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x5B57;&#x6BB5;&#x6216;&#x8005;&#x679A;&#x4E3E;&#x4E2D;&#x7684;&#x5E38;&#x91CF;</li>\n<li>METHOD&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x65B9;&#x6CD5;&#x7684;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>PARAMETER&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x53C2;&#x6570;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>CONSTRUCTOR&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x6784;&#x9020;&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>LOCAL_VARIABLE&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7684;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>ANNOTATION_TYPE&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x6CE8;&#x89E3;&#x7684;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>PACKAGE&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x5305;&#x7684;&#x58F0;&#x660E;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>TYPE_PARAMETER&#xFF1A;java 1.8&#x4E4B;&#x540E;&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;&#x7C7B;&#x578B;&#x58F0;&#x660E;&#x7684;&#x8BED;&#x53E5;&#x4E2D;</li>\n<li>TYPE_USE&#xFF1A;java 1.8&#x4E4B;&#x540E;&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;&#x4F7F;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x4EFB;&#x610F;&#x8BED;&#x53E5;&#x4E2D;</li>\n</ol>\n<p>&#x7ED3;&#x5408;&#x6211;&#x4EEC;&#x7684;BindView&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5BF9;View&#x8FDB;&#x884C;id&#x7ED1;&#x5B9A;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x4F5C;&#x7528;&#x4E0E;&#x58F0;&#x660E;&#x7684;&#x5B57;&#x6BB5;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x5728;BindView&#x4E2D;&#x4F7F;&#x7528;&#x4E86;FIELD&#x3002;</p>\n<p>&#x518D;&#x6765;&#x770B;&#x7B2C;&#x56DB;&#x884C;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@IdRes int[] value()</div></pre></td></tr></table></figure>\n<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x89E3;&#x63A5;&#x89E6;&#xFF0C;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x8FD9;&#x662F;&#x6807;&#x660E;BindView&#x5C06;&#x63A5;&#x6536;&#x4E00;&#x4E2A;int&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#x53C2;&#x6570;&#x3002;&#x5BF9;&#x4E8E;&#x5F00;&#x6E90;&#x5E93;butterknife&#x4E2D;&#x7684;BindView&#x662F;&#x63A5;&#x6536;&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x7684;View&#x7684;id&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E2A;&#x6539;&#x7248;&#xFF0C;&#x518D;&#x63A5;&#x6536;&#x4E00;&#x4E2A;String&#x7684;id&#xFF0C;&#x7528;&#x6765;&#x4E3A;&#x7ED1;&#x5B9A;&#x7684;View&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x7684;BindView&#x6CE8;&#x91CA;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>\n<h2 id=\"OnClick\"><a href=\"#OnClick\" class=\"headerlink\" title=\"OnClick\"></a>OnClick</h2><p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x518D;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;OnClick&#x70B9;&#x51FB;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8111;&#x6D77;&#x4E2D;&#x60F3;&#x60F3;Retention&#x4E0E;Target&#x5206;&#x522B;&#x4EC0;&#x4E48;&#x503C;&#xFF1F;</p>\n<p>&#x60F3;&#x597D;&#x4E86;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x5728;&#x6765;&#x8FC7;&#x4E00;&#x904D;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Retention(RetentionPolicy.SOURCE)</div><div class=\"line\">@Target(ElementType.METHOD)</div><div class=\"line\">public @interface OnClick {</div><div class=\"line\">    @IdRes int value();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Retention&#x7684;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#x4E0E;BindView&#x4E00;&#x6837;&#x9996;&#x9875;SOURCE&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x5C31;&#x65E0;&#x9700;&#x5B58;&#x5728;&#xFF1B;Target&#x7684;&#x4F5C;&#x7528;&#x5BF9;&#x8C61;&#x4E0E;BindView&#x4E0D;&#x540C;&#xFF0C;&#x65E2;&#x7136;&#x662F;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x70B9;&#x51FB;&#x64CD;&#x4F5C;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x4F5C;&#x7528;&#x5728;&#x64CD;&#x4F5C;&#x903B;&#x8F91;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;METHOD&#x3002;</p>\n<h2 id=\"keep\"><a href=\"#keep\" class=\"headerlink\" title=\"keep\"></a>keep</h2><p>&#x6587;&#x7AE0;&#x5F00;&#x5934;&#x6709;&#x63D0;&#x53CA;&#x5230;&#x672C;&#x8D28;&#x662F;&#x901A;&#x8FC7;&#x6CE8;&#x89E3;&#x6765;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF0C;&#x4E3A;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x6240;&#x9700;&#x7684;&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x6DF7;&#x6DC6;&#x4E86;&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x5BFC;&#x81F4;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x7684;&#x7C7B;&#x5931;&#x6548;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x89E3;&#x5931;&#x6548;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5176;&#x5931;&#x6548;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x518D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x6CE8;&#x89E3;keep&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Retention(RetentionPolicy.CLASS)</div><div class=\"line\">@Target(ElementType.TYPE)</div><div class=\"line\">public @interface Keep {</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Retention&#x7684;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#x662F;&#x5728;class&#x6587;&#x4EF6;&#x4E2D;&#x8FD8;&#x8981;&#x80FD;&#x591F;&#x88AB;&#x5176;&#x5B83;class&#x8C03;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;CLASS&#xFF1B;Target&#x4F5C;&#x7528;&#x5BF9;&#x8C61;&#x662F;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;TYPE&#x3002;&#x81F3;&#x4E8E;&#x53C2;&#x6570;&#x5219;&#x4E0D;&#x5FC5;&#x8981;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x6807;&#x660E;&#x7C7B;&#xFF0C;&#x9632;&#x6B62;&#x5176;&#x88AB;&#x6DF7;&#x6DC6;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>butterknife-annotations&#x5E93;&#x4E2D;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x70B9;&#x4E3B;&#x8981;&#x5F52;&#x7ED3;&#x4E8E;&#x4EE5;&#x4E0B;&#x4E09;&#x70B9;&#xFF1A;</p>\n<ol>\n<li>Retention: &#x660E;&#x786E;&#x6CE8;&#x89E3;&#x4F5C;&#x7528;&#x7684;&#x751F;&#x547D;&#x65F6;&#x957F;&#xFF0C;&#x5C3D;&#x65E9;&#x7684;&#x6D88;&#x9664;</li>\n<li>Target: &#x660E;&#x786E;&#x6CE8;&#x89E3;&#x4F5C;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li>\n<li>Keep: &#x9632;&#x6B62;&#x540E;&#x7EED;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x88AB;&#x6DF7;&#x6DC6;</li>\n</ol>\n<p>&#x6CE8;&#x89E3;&#x53D8;&#x91CF;&#x7684;&#x5B9A;&#x4E49;&#x5C31;&#x5230;&#x8FD9;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x540C;&#x65F6;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;feat_annotation_processing</p>\n<p>&#x6700;&#x540E;&#x656C;&#x8BF7;&#x5173;&#x6CE8;&#x4E0B;&#x4E00;&#x90E8;&#x5206;<strong>&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2:&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;</strong></p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/07/04/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part2-%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part2:&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x751F;&#x6210;</a></p>\n<p><a href=\"https://idisfkj.github.io/2018/07/11/%E8%87%AA%E5%AE%9A%E4%B9%89Android%E6%B3%A8%E8%A7%A3Part3-%E7%BB%91%E5%AE%9A/\" target=\"_blank\" rel=\"external\">&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part3:&#x7ED1;&#x5B9A;</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/07/01/&#x81EA;&#x5B9A;&#x4E49;Android&#x6CE8;&#x89E3;Part1-&#x6CE8;&#x89E3;&#x53D8;&#x91CF;/wx.jpg\" alt=\"\"></p>\n"},{"title":"Android Architecture Components Part4:ViewModel","url":"https://www.rousetime.com/2018/06/22/Android-Architecture-Components-Part4-ViewModel/","content":"<p><img src=\"/2018/06/22/Android-Architecture-Components-Part4-ViewModel/cover.png\" alt=\"\"></p>\n<p>&#x5728;Android Architecture Components(AAC)&#x4E2D;ViewMode&#x662F;&#x4E3A;&#x754C;&#x9762;&#x7EC4;&#x4EF6;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x5E76;&#x53EF;&#x5728;&#x754C;&#x9762;&#x914D;&#x7F6E;&#x66F4;&#x6539;&#x540E;&#x7EE7;&#x7EED;&#x5B58;&#x5728;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x4F8B;&#x5982;&#x754C;&#x9762;&#x7684;&#x65CB;&#x8F6C;&#x5BFC;&#x81F4;&#x754C;&#x9762;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x6539;&#x53D8;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x4E3A;&#x754C;&#x9762;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x6240;&#x77E5;&#x9053;&#x7684;&#x4E5F;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x4E9B;&#x6A21;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;MVP&#x7684;Presenter&#x4E0E;MVVM&#x4E2D;&#x7684;ViewModel&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x5047;&#x8BBE;&#xFF0C;&#x5982;&#x679C;Activity&#x53D1;&#x751F;&#x754C;&#x9762;&#x65CB;&#x8F6C;&#xFF0C;&#x6B64;&#x65F6;&#x4E0A;&#x8FF0;&#x7684;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x7684;&#x6A21;&#x5F0F;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<ol>\n<li>&#x5BF9;&#x4E8E;Activity&#x7684;&#x91CD;&#x5EFA;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;ui&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x91CD;&#x65B0;&#x83B7;&#x53D6;&#x6570;&#x636E;(&#x7F51;&#x7EDC;&#x6216;&#x8005;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;)&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x8981;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x64CD;&#x4F5C;&#x3002;</li>\n<li>&#x5728;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x5904;&#x7406;&#x4E00;&#x4E9B;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x7684;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x95EE;&#x9898;&#x3002;</li>\n</ol>\n<p>&#x5BF9;&#x4E8E;&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#xFF0C;ViewModel&#x90FD;&#x80FD;&#x591F;&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x3002;&#x53EA;&#x8981;Activity&#x6CA1;&#x6709;&#x5F7B;&#x5E95;&#x88AB;&#x9500;&#x6BC1;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;ViewModel&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;&#x5B83;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x9500;&#x6BC1;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x8FDB;&#x884C;&#x7EF4;&#x62A4;&#x7BA1;&#x7406;&#xFF0C;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x4FDD;&#x8BC1;&#x8D44;&#x6E90;&#x7684;&#x91CA;&#x653E;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x5F20;&#x56FE;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x7684;&#x89C2;&#x5BDF;&#x5B83;&#x5728;Activity&#x4E2D;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;</p>\n<p><img src=\"/2018/06/22/Android-Architecture-Components-Part4-ViewModel/viewmodel.png\" alt=\"\"></p>\n<p>ViewModel&#x8D2F;&#x7A7F;Activity&#x7684;&#x6574;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x53EA;&#x6709;&#x5F53;Activity&#x5F7B;&#x5E95;&#x91CA;&#x653E;&#x65F6;&#x624D;&#x4F1A;&#x5C06;&#x5176;&#x9500;&#x6BC1;&#x3002;&#x6240;&#x4EE5;&#x5B83;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#xFF0C;&#x9632;&#x6B62;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#xFF0C;&#x63D0;&#x9AD8;App&#x7684;&#x6027;&#x80FD;&#x3002;</p>\n<blockquote>\n<p>&#x662F;&#x4E0D;&#x662F;&#x6709;&#x70B9;&#x597D;&#x5947;&#x4E86;&#x5462;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x7B80;&#x5355;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x771F;&#x7684;&#x5F88;&#x7B80;&#x5355;&#x2026;</p>\n</blockquote>\n<h2 id=\"&#x4F9D;&#x8D56;\"><a href=\"#&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x4F9D;&#x8D56;\"></a>&#x4F9D;&#x8D56;</h2><p>&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x89E3;&#x8FC7;&#x4E0A;&#x7BC7;&#x5173;&#x4E8E;Lifecycle&#x7684;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/\" target=\"_blank\" rel=\"external\">(Android Architecture Components Part3:Lifecycle)</a>&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x4F9D;&#x8D56;&#x90E8;&#x5206;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x3002;</p>\n<p>&#x5728;&#x4F7F;&#x7528;ViewModel&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;App&#x6216;&#x8005;Module&#x7684;build.gradle&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    def lifecycle_version = &quot;1.1.1&quot;</div><div class=\"line\"> </div><div class=\"line\">    // ViewModel and LiveData</div><div class=\"line\">    implementation &quot;android.arch.lifecycle:extensions:$lifecycle_version&quot;   </div><div class=\"line\">    annotationProcessor &quot;android.arch.lifecycle:compiler:$lifecycle_version&quot;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h2><p>&#x4F9D;&#x8D56;&#x5DF2;&#x7ECF;&#x51C6;&#x5907;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsViewModel(application: Application, private val defTitle: String = &quot;Contacts&quot;) : AndroidViewModel(application) {</div><div class=\"line\">    val message: MutableLiveData&lt;String&gt; by lazy { MutableLiveData&lt;String&gt;() }</div><div class=\"line\">    val contactsList: MutableLiveData&lt;List&lt;ContactsModel&gt;&gt; = MutableLiveData()</div><div class=\"line\">    ....</div><div class=\"line\">    ....</div><div class=\"line\">    </div><div class=\"line\">    fun getContacts(refresh: Boolean): LiveData&lt;List&lt;ContactsModel&gt;&gt; {</div><div class=\"line\">        message.value = &quot;&quot;</div><div class=\"line\">        if (refresh) {</div><div class=\"line\">            getDataFromRemote()</div><div class=\"line\">        } else if (contactsList.value == null || contactsList.value?.size ?: 0 &lt;= 0) {</div><div class=\"line\">            message.value = &quot;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x4E2D;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#xFF01;&quot;</div><div class=\"line\">            if (mLocalData.isEmpty()) {</div><div class=\"line\">                getDataFromLocal()</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        return contactsList</div><div class=\"line\">    }</div><div class=\"line\">    ...</div><div class=\"line\">    ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;ContactsViewModel&#xFF0C;&#x8BA9;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;AndroidViewModel&#xFF0C;&#x5B83;&#x662F;&#x5BF9;&#x62BD;&#x8C61;ViewModel&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x65F6;&#x9700;&#x8981;&#x4F20;&#x5165;Application&#x5BF9;&#x8C61;&#xFF0C;&#x65B9;&#x4FBF;&#x4E00;&#x4E9B;&#x8D44;&#x6E90;&#x7684;&#x83B7;&#x53D6;&#x3002;&#x7531;&#x4E8E;ViewModel&#x7684;&#x7279;&#x6027;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4E0D;&#x80FD;&#x6301;&#x6709;&#x4E0E;Activity&#x76F8;&#x5173;&#x7684;&#x5F15;&#x7528;(Context)&#xFF0C;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E0E;&#x5E94;&#x7528;&#x751F;&#x547D;&#x5468;&#x671F;&#x7ED1;&#x5B9A;&#x7684;Application&#x3002;</p>\n<p>&#x5728;ContactsViewModel&#x4E2D;&#x6211;&#x4EEC;&#x7ED3;&#x5408;MutableLiveData&#x6765;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x66F4;&#x65B0;&#x3002;</p>\n<p>ViewModel&#x521B;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x53EA;&#x5269;&#x4E0B;&#x5728;Activity&#x4E2D;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsActivity : AppCompatActivity() {</div><div class=\"line\"> </div><div class=\"line\">    private lateinit var mViewModel: ContactsViewModel</div><div class=\"line\"> </div><div class=\"line\">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_contacts_layout)</div><div class=\"line\">        setupViewModel()</div><div class=\"line\">    }</div><div class=\"line\">    </div><div class=\"line\">    private fun setupViewModel() {</div><div class=\"line\">        mViewModel = ViewModelProviders.of(this)[ContactsViewModel::class.java]</div><div class=\"line\">        //active STARTED&#x3001;RESUMED</div><div class=\"line\">        mViewModel.getContacts(true).observe(this,</div><div class=\"line\">                Observer {</div><div class=\"line\">                    //todo ...</div><div class=\"line\">                })</div><div class=\"line\">        mViewModel.message.observe(this,</div><div class=\"line\">                Observer {</div><div class=\"line\">                    //todo ...</div><div class=\"line\">                })</div><div class=\"line\">    }   </div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;ViewModel&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;<strong>ViewModelProviders.of()</strong>&#x65B9;&#x6CD5;&#x4F20;&#x5165;Activity&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;ViewModelProvider&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x4F7F;&#x7528;&#x5B83;&#x7684;<strong>get()</strong>&#x6765;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;ViewModel&#x7684;Class&#x5BF9;&#x8C61;&#x6765;&#x83B7;&#x53D6;&#x5230;&#x76F8;&#x5E94;&#x7684;ViewModel&#x5B9E;&#x4F8B;&#x3002;</p>\n<p>&#x53EA;&#x8981;Activity&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#xFF0C;&#x540C;&#x65F6;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;ViewModel&#x7684;Class&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x65E0;&#x8BBA;&#x4F55;&#x65F6;&#x83B7;&#x53D6;&#x7684;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;ViewModel&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x5728;Activity&#x4E2D;&#x7684;ViewModel&#x6301;&#x4E45;&#x5316;&#x7279;&#x6027;&#x3002;&#x7531;&#x4E8E;ViewModel&#x662F;&#x540C;&#x4E00;&#x4E2A;&#xFF0C;&#x81EA;&#x7136;&#x5B83;&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#x4E5F;&#x662F;&#x540C;&#x4E00;&#x4EFD;&#x3002;</p>\n<p>&#x5F97;&#x5230;ViewModel&#x540E;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x4E0E;&#x54CD;&#x5E94;&#x3002;&#x8FD9;&#x91CC;&#x7ED3;&#x5408;&#x4E86;LiveData&#x6240;&#x4EE5;&#x65B9;&#x4FBF;&#x4E86;&#x8BB8;&#x591A;&#x3002;</p>\n<blockquote>\n<p>LiveData&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x6709;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#xFF0C;&#x5982;&#x9700;&#x4E86;&#x89E3;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6587;&#x7AE0;&#x672B;&#x7684;&#x94FE;&#x63A5;&#x3002;</p>\n</blockquote>\n<h2 id=\"ViewModelProvider\"><a href=\"#ViewModelProvider\" class=\"headerlink\" title=\"ViewModelProvider\"></a>ViewModelProvider</h2><p>&#x5230;&#x8FD9;&#x91CC;&#x6211;&#x60F3;&#x4F60;&#x5FC3;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x7591;&#x95EE;</p>\n<ol>\n<li>ViewModel&#x5B83;&#x662F;&#x5982;&#x4F55;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF0C;&#x5BF9;&#x8C61;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x4F8B;&#x5316;&#x7684;</li>\n<li>&#x5982;&#x4F55;&#x5411;ViewModel&#x4E2D;&#x4F20;&#x9012;&#x521D;&#x59CB;&#x5316;&#x7684;&#x53C2;&#x6570;</li>\n</ol>\n<p>&#x8FD9;&#x4E24;&#x4E2A;&#x7591;&#x95EE;&#x90FD;&#x5C06;&#x7531;ViewModelProvider&#x6765;&#x89E3;&#x51B3;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x83B7;&#x53D6;ViewModelProvider&#x7684;<strong>ViewModelProviders.of()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x5165;&#x6E90;&#x7801;&#x67E5;&#x770B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@NonNull</div><div class=\"line\">@MainThread</div><div class=\"line\">public static ViewModelProvider of(@NonNull FragmentActivity activity,</div><div class=\"line\">        @Nullable Factory factory) {</div><div class=\"line\">    Application application = checkApplication(activity);</div><div class=\"line\">    if (factory == null) {</div><div class=\"line\">        factory = ViewModelProvider.AndroidViewModelFactory.getInstance(application);</div><div class=\"line\">    }</div><div class=\"line\">    return new ViewModelProvider(ViewModelStores.of(activity), factory);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4E5F;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x53D1;&#x73B0;factory&#x3002;&#x6211;&#x4EEC;&#x5728;&#x83B7;&#x53D6;ViewModel&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x4F20;&#x5165;factory&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4F1A;&#x8D70;&#x7A7A;&#x5224;&#x65AD;&#x91CC;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;factory&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x518D;&#x8FDB;&#x5165;ViewModelProvider&#x4E2D;&#x67E5;&#x770B;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;AndroidViewModelFactory</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static class AndroidViewModelFactory extends ViewModelProvider.NewInstanceFactory {</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\">    ...</div><div class=\"line\"> </div><div class=\"line\">    @NonNull</div><div class=\"line\">    @Override</div><div class=\"line\">    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {</div><div class=\"line\">        if (AndroidViewModel.class.isAssignableFrom(modelClass)) {</div><div class=\"line\">            //noinspection TryWithIdenticalCatches</div><div class=\"line\">            try {</div><div class=\"line\">                return modelClass.getConstructor(Application.class).newInstance(mApplication);</div><div class=\"line\">            } catch (NoSuchMethodException e) {</div><div class=\"line\">                throw new RuntimeException(&quot;Cannot create an instance of &quot; + modelClass, e);</div><div class=\"line\">            } catch (IllegalAccessException e) {</div><div class=\"line\">                throw new RuntimeException(&quot;Cannot create an instance of &quot; + modelClass, e);</div><div class=\"line\">            } catch (InstantiationException e) {</div><div class=\"line\">                throw new RuntimeException(&quot;Cannot create an instance of &quot; + modelClass, e);</div><div class=\"line\">            } catch (InvocationTargetException e) {</div><div class=\"line\">                throw new RuntimeException(&quot;Cannot create an instance of &quot; + modelClass, e);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        return super.create(modelClass);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x53EA;&#x770B;&#x5173;&#x952E;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;NewInstanceFactory&#xFF0C;&#x5176;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<strong>create()</strong>&#x3002;AndroidViewModelFactory&#x91CD;&#x65B0;&#x5B9E;&#x73B0;&#x4E86;<strong>create()</strong>&#xFF0C;&#x5728;&#x91CD;&#x5199;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x4E86;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x5B83;&#x901A;&#x8FC7;Class&#x7684;<strong>getConstructor()</strong>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5339;&#x914D;&#x7684;Constructor&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x901A;&#x8FC7;<strong>newInstance()</strong>&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x5339;&#x914D;&#x7684;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;ViewModel&#x5B9E;&#x4F8B;&#x5C31;&#x521B;&#x5EFA;&#x4E86;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x7591;&#x95EE;&#x5C31;&#x6B64;&#x89E3;&#x51B3;&#x3002;</p>\n<p>&#x81F3;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2A;&#x7591;&#x95EE;&#xFF0C;&#x7EC6;&#x5FC3;&#x7684;&#x8BDD;&#x4E0D;&#x96BE;&#x53D1;&#x73B0;&#xFF0C;&#x4E0A;&#x9762;&#x5728;&#x8C03;&#x7528;<strong>newInstance()</strong>&#x65B9;&#x6CD5;&#x65F6;&#x5DF2;&#x7ECF;&#x4F20;&#x4E86;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x53C2;&#x6570;mApplication&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8981;&#x518D;&#x4F20;&#x5165;&#x5176;&#x5B83;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x521D;&#x59CB;&#x5316;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x9700;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;<strong>create()</strong>&#x65B9;&#x6CD5;&#x3002;&#x8981;&#x81EA;&#x5B9A;&#x4E49;<strong>create()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;factory&#xFF0C;&#x7EE7;&#x627F;NewInstanceFactory&#x7C7B;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x5B9E;&#x73B0;ContactsViewModel&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x4F20;&#x5165;&#x7279;&#x5B9A;&#x7684;title&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsFactory(private val application: Application) : ViewModelProvider.NewInstanceFactory() {</div><div class=\"line\"> </div><div class=\"line\">    companion object {</div><div class=\"line\">        @SuppressLint(&quot;StaticFieldLeak&quot;)</div><div class=\"line\">        private var instance: ContactsFactory? = null</div><div class=\"line\"> </div><div class=\"line\">        fun getInstance(application: Application): ContactsFactory {</div><div class=\"line\">            if (instance == null) {</div><div class=\"line\">                instance = ContactsFactory(application)</div><div class=\"line\">            }</div><div class=\"line\">            return instance as ContactsFactory</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {</div><div class=\"line\">        if (modelClass.isAssignableFrom(ContactsViewModel::class.java)) {</div><div class=\"line\">            return ContactsViewModel(application, &quot;Factory Contacts&quot;) as T</div><div class=\"line\">        }</div><div class=\"line\">        return super.create(modelClass)</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x91CD;&#x70B9;&#x81EA;&#x7136;&#x662F;<strong>create()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;<strong>isAssignableFrom()</strong>&#x65B9;&#x6CD5;&#x5224;&#x65AD;&#x9700;&#x8981;&#x5B9E;&#x4F8B;&#x5316;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x660E;&#x786E;&#x5230;&#x5177;&#x4F53;&#x7684;&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6B63;&#x5E38;&#x7684;&#x7C7B;&#x5B9E;&#x4F8B;&#x5316;&#x64CD;&#x4F5C;&#x3002;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;factory&#xFF0C;&#x6700;&#x540E;&#x5728;&#x83B7;&#x53D6;ViewModel&#x65F6;&#x4F20;&#x5165;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mViewModel = ViewModelProviders.of(this, ContactsFactory.getInstance(application))[ContactsViewModel::class.java]</div></pre></td></tr></table></figure>\n<p>ViewModel&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x5B83;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5374;&#x5F02;&#x5E38;&#x7A81;&#x51FA;&#x3002;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x8FEB;&#x4E0D;&#x53CA;&#x5F85;&#x4E86;&#x5462;&#xFF1F;&#x8D76;&#x7D27;&#x6765;&#x8BD5;&#x8BD5;&#x5B83;&#x7684;&#x7279;&#x6027;&#x5427;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x6700;&#x540E;Android Architecture Components(AAC)&#x7CFB;&#x5217;&#x5230;&#x6B64;&#x5C31;&#x544A;&#x4E00;&#x6BB5;&#x843D;&#x4E86;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x56DE;&#x987E;&#x4E00;&#x4E0B;AAC&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;Room&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x65B9;&#x4FBF;&#x7684;&#x5B9E;&#x73B0;&#x672C;&#x5730;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF1B;&#x7ED3;&#x5408;LiveData&#x6765;&#x89C2;&#x6D4B;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#x53D8;&#x5316;&#x4E0E;&#x53CA;&#x65F6;&#x53CD;&#x6620;&#x5230;UI&#x5C42;&#xFF1B;&#x540C;&#x65F6;&#x4F7F;&#x7528;Lifecycle&#x6765;&#x8BA9;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x6216;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x7684;&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7684;&#x51CF;&#x5C11;&#x751F;&#x547D;&#x72B6;&#x6001;&#x7684;&#x5904;&#x7406;&#x4E0E;&#x5F02;&#x5E38;&#x9519;&#x8BEF;&#x7684;&#x53D1;&#x751F;&#xFF1B;&#x6700;&#x540E;&#x5C06;&#x754C;&#x9762;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5230;ViewModel&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x6570;&#x636E;&#x8FBE;&#x5230;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x51CF;&#x5C11;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x4E0E;&#x8D44;&#x6E90;&#x6D88;&#x8017;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x7684;&#x80FD;&#x591F;&#x521D;&#x6B65;&#x4F53;&#x73B0;&#x4F7F;&#x7528;AAC&#x540E;&#x7684;App&#x9879;&#x76EE;&#x67B6;&#x6784;&#x5F62;&#x6001;</p>\n<p><img src=\"/2018/06/22/Android-Architecture-Components-Part4-ViewModel/architectureComponents.png\" alt=\"\"></p>\n<p>&#x6700;&#x540E;&#x611F;&#x8C22;&#x5927;&#x5BB6;&#x5BF9;AAC&#x67B6;&#x6784;&#x7CFB;&#x5217;&#x7684;&#x652F;&#x6301;&#xFF01;&#x540C;&#x65F6;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;feat_architecture_components</p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/06/07/Android-Architecture-Components-Part1-Room/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part1:Room</a><br><a href=\"https://idisfkj.github.io/2018/06/10/Android-Architecture-Components-Part2-LiveData/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part2:LiveData</a><br><a href=\"https://idisfkj.github.io/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part3:Lifecycle</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/06/22/Android-Architecture-Components-Part4-ViewModel/wx.jpg\" alt=\"\"></p>\n"},{"title":"Android Architecture Components Part3:Lifecycle","url":"https://www.rousetime.com/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/","content":"<p><img src=\"/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/cover.png\" alt=\"\"></p>\n<p>&#x4E0A;&#x671F;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x4E86;LiveData&#xFF0C;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x89C2;&#x5BDF;&#x5BB9;&#x5668;&#x540C;&#x65F6;&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x53C8;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;&#x5728;&#x4F7F;&#x7528;LiveData&#x8FDB;&#x884C;&#x6CE8;&#x518C;observer&#x65F6;&#xFF0C;&#x662F;&#x5426;&#x8BB0;&#x5F97;&#x5176;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x5176;&#x4E00;&#x662F;Observer&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x5C31;&#x662F;LifecycleOwner&#x3002;&#x5B83;&#x5C31;&#x5C5E;&#x4E8E;Lifecycle&#x4E2D;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>\n<p>Activity/Fragment&#x5C31;&#x662F;&#x5177;&#x6709;&#x751F;&#x547D;&#x72B6;&#x6001;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x800C;&#x4E14;&#x4ED6;&#x4EEC;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6216;&#x8005;framework&#x6765;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;App&#x4E2D;&#x662F;&#x5F88;&#x96BE;&#x6765;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x6765;&#x7BA1;&#x7406;&#x4ED6;&#x4EEC;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x9075;&#x5FAA;&#x4ED6;&#x4EEC;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x5C06;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x7684;&#x8BDD;&#xFF0C;&#x5C06;&#x4F1A;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;&#x4E0E;&#x751F;&#x547D;&#x5468;&#x671F;&#x6709;&#x5173;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x800C;Lifecycle&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;</p>\n<h2 id=\"Lifecycle\"><a href=\"#Lifecycle\" class=\"headerlink\" title=\"Lifecycle\"></a>Lifecycle</h2><p>Lifecycle&#x53EF;&#x4EE5;&#x4E3A;&#x754C;&#x9762;/&#x975E;&#x754C;&#x9762;&#x7EC4;&#x4EF6;&#x6DFB;&#x52A0;&#x751F;&#x547D;&#x5468;&#x671F;&#x72B6;&#x6001;&#x611F;&#x77E5;&#xFF0C;&#x5141;&#x8BB8;&#x89C2;&#x5BDF;&#x8005;&#x53BB;&#x76D1;&#x542C;&#x8FD9;&#x4E9B;&#x751F;&#x547D;&#x72B6;&#x6001;&#x3002;Lifecycle&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x4E24;&#x4E2A;&#x679A;&#x4E3E;&#x6765;&#x8FFD;&#x8E2A;&#x751F;&#x547D;&#x72B6;&#x6001;&#x3002;</p>\n<ol>\n<li>Event&#xFF1A;&#x4EE3;&#x8868;&#x751F;&#x547D;&#x4E8B;&#x4EF6;&#xFF0C;&#x662F;&#x7531;framework&#x5C42;&#x5206;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E8B;&#x4EF6;&#x4E0E;Activity/Fragment&#x4E2D;&#x7684;&#x751F;&#x547D;&#x56DE;&#x8C03;&#x76F8;&#x5339;&#x914D;&#x3002;</li>\n<li>State&#xFF1A;&#x4EE3;&#x8868;&#x5F53;&#x524D;&#x8FFD;&#x8E2A;&#x7684;&#x7EC4;&#x4EF6;&#x6240;&#x5904;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#x3002;</li>\n</ol>\n<p>Event&#x4E0E;State&#x7684;&#x8054;&#x7CFB;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x6765;&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;&#x3002;</p>\n<p><img src=\"/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/lifecycle.png\" alt=\"\"></p>\n<h2 id=\"&#x4F9D;&#x8D56;\"><a href=\"#&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x4F9D;&#x8D56;\"></a>&#x4F9D;&#x8D56;</h2><p>&#x5728;&#x4F7F;&#x7528;Lifecycle&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;App&#x6216;&#x8005;Module&#x7684;build.gradle&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    def lifecycle_version = &quot;1.1.1&quot;</div><div class=\"line\"> </div><div class=\"line\">    // ViewModel and LiveData</div><div class=\"line\">    implementation &quot;android.arch.lifecycle:extensions:$lifecycle_version&quot;   </div><div class=\"line\">    annotationProcessor &quot;android.arch.lifecycle:compiler:$lifecycle_version&quot;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"LifecycleObserver\"><a href=\"#LifecycleObserver\" class=\"headerlink\" title=\"LifecycleObserver\"></a>LifecycleObserver</h2><p>LifecycleObserver&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x65B9;&#x6CD5;&#xFF0C;&#x4F5C;&#x4E3A;&#x6807;&#x5FD7;&#x4F5C;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x6765;&#x751F;&#x6210;&#x65B9;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x9996;&#x5148;&#x6765;&#x81EA;&#x5B9A;&#x4E49;MyLifeCycleObserver</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">class MyLifeCycleObserver(private val lifecycle: Lifecycle) : LifecycleObserver {</div><div class=\"line\">    @OnLifecycleEvent(Lifecycle.Event.ON_CREATE)</div><div class=\"line\">    fun create() {</div><div class=\"line\">        if (lifecycle.currentState.isAtLeast(Lifecycle.State.CREATED)) {</div><div class=\"line\">           //todo ...</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @OnLifecycleEvent(Lifecycle.Event.ON_START)</div><div class=\"line\">    fun start() {</div><div class=\"line\">        //todo ...</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x4F7F;&#x7528;<strong>@OnLifecycleEvent</strong>&#x6CE8;&#x91CA;&#x6765;&#x6807;&#x660E;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E0E;&#x751F;&#x547D;&#x5468;&#x671F;&#x72B6;&#x6001;&#x76F8;&#x5173;&#x7684;&#x65B9;&#x6CD5;&#x56DE;&#x8C03;&#xFF1B;&#x540C;&#x65F6;&#x901A;&#x8FC7;<strong>Lifecycle.Event</strong>&#xFF0C;&#x5373;Event&#x679A;&#x4E3E;&#xFF0C;&#x6765;&#x7CBE;&#x786E;&#x5B9A;&#x4F4D;&#x5230;&#x67D0;&#x4E00;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5206;&#x522B;&#x5B9A;&#x4F4D;&#x5230;&#x4E86;ON_CREATE&#x4E0E;ON_START&#xFF0C;&#x5373;Activity/Fragment&#x7684;<strong>onCreate()</strong>&#x4E0E;<strong>onStart()</strong>&#x65B9;&#x6CD5;&#x3002;&#x540C;&#x65F6;Lifecycle&#x63D0;&#x4F9B;<strong>getCurrentState()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x65F6;&#x523B;&#x67E5;&#x8BE2;&#x5F53;&#x524D;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#xFF1B;&#x800C;<strong>isAtLeast()</strong>&#x65B9;&#x6CD5;&#x5219;&#x53EF;&#x4EE5;&#x6BD4;&#x8F83;&#x5F53;&#x524D;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#x662F;&#x5426;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x67D0;&#x4E00;&#x4E2A;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x7684;&#x8F85;&#x52A9;&#x6211;&#x4EEC;&#x6765;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#x3002;</p>\n<h2 id=\"LifecycleOwner\"><a href=\"#LifecycleOwner\" class=\"headerlink\" title=\"LifecycleOwner\"></a>LifecycleOwner</h2><p>&#x73B0;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x89C2;&#x5BDF;&#x8005;MyLifeCycleObserver&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x89C2;&#x5BDF;&#x8005;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x76D1;&#x542C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsActivity : AppCompatActivity() {</div><div class=\"line\"> </div><div class=\"line\">   override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_contacts_layout)</div><div class=\"line\">        lifecycle.addObserver(MyLifeCycleObserver(lifecycle))</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x83B7;&#x53D6;Lifecycle&#x5BF9;&#x8C61;&#x6765;&#x6DFB;&#x52A0;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5C06;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x81EA;&#x5B9A;&#x4E49;&#x7684;MyLifeCycleObserver&#x52A0;&#x5165;&#x89C2;&#x5BDF;&#x961F;&#x5217;&#x3002;&#x800C;<strong>getLifecycle()</strong>&#x662F;LifecycleOwner&#x63A5;&#x53E3;&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x65B9;&#x6CD5;&#x3002;AppCompatActivity/Fragment&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x4E86;LifecycleOwner&#x63A5;&#x53E3;&#x3002;&#x5185;&#x90E8;&#x901A;&#x8FC7;LifecycleRegistry&#x6765;&#x6CE8;&#x518C;&#x4E86;&#x751F;&#x547D;&#x5468;&#x671F;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x4E00;&#x65E6;&#x754C;&#x9762;&#x7684;&#x751F;&#x547D;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;&#xFF0C;&#x5C31;&#x4F1A;&#x901A;&#x77E5;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x89C2;&#x5BDF;&#x8005;MyLifeCycleObserver&#xFF0C;&#x5373;&#x56DE;&#x8C03;MyLifeCycleObserver&#x4E2D;&#x6240;&#x5339;&#x914D;&#x7684;&#x6CE8;&#x91CA;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x4E0D;&#x77E5;&#x4E0D;&#x89C9;&#x4E2D;&#x901A;&#x8FC7;Lifecycle&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5C06;&#x4E0E;&#x751F;&#x547D;&#x72B6;&#x6001;&#x76F8;&#x5173;&#x7684;&#x4EE3;&#x7801;&#x62BD;&#x79BB;&#x5230;&#x4E86;MyLifeCycleObserver&#x4E2D;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x5BF9;Activity/Fragemnt&#x751F;&#x547D;&#x72B6;&#x6001;&#x76F8;&#x5173;&#x7684;&#x89E3;&#x8026;&#x3002;</p>\n<h2 id=\"&#x81EA;&#x5B9A;&#x4E49;LifecycleOwner\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;LifecycleOwner\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;LifecycleOwner\"></a>&#x81EA;&#x5B9A;&#x4E49;LifecycleOwner</h2><p>Activity/Fragment&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x4E86;LifecycleOwner&#x63A5;&#x53E3;&#xFF0C;&#x4F46;&#x5FC5;&#x987B;&#x662F;&#x5728;<strong>Support Library 26.1.0</strong>&#x4E4B;&#x540E;&#x624D;&#x652F;&#x6301;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x5728;&#x5B83;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;LifecycleOwner&#x63A5;&#x53E3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">class LifecycleActivity : Activity(), LifecycleOwner {</div><div class=\"line\">    private lateinit var mMyLifecycle: LifecycleRegistry</div><div class=\"line\"> </div><div class=\"line\">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_contacts_layout)</div><div class=\"line\">        mMyLifecycle = LifecycleRegistry(this)</div><div class=\"line\">        mMyLifecycle.markState(Lifecycle.State.CREATED)</div><div class=\"line\">        lifecycle.addObserver(MyLifeCycleObserver(lifecycle))</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    override fun onStart() {</div><div class=\"line\">        super.onStart()</div><div class=\"line\">        mMyLifecycle.markState(Lifecycle.State.STARTED)</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    override fun getLifecycle(): Lifecycle = mMyLifecycle</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x8BA9;&#x6211;&#x4EEC;&#x7684;class&#x5B9E;&#x73B0;LifecycleOwner&#x63A5;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x501F;&#x52A9;LifecycleRegistry&#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;Lifecycle&#x63A5;&#x53E3;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5982;&#x679C;&#x8981;&#x8BA9;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x7684;Observer&#x80FD;&#x591F;&#x4E0E;&#x4E4B;&#x524D;&#x4E00;&#x6837;&#x5339;&#x914D;&#x751F;&#x547D;&#x5468;&#x671F;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x4E3A;&#x751F;&#x6210;&#x7684;Lifecycle&#x5728;&#x751F;&#x547D;&#x5468;&#x671F;&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;&#x6807;&#x8BB0;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x5728;<strong>onCreate()</strong>&#x65B9;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;<strong>makeState()</strong>&#x6765;&#x7ED1;&#x5B9A;Lifecycle.State.CREATED&#x72B6;&#x6001;&#x3002;&#x5982;&#x6B64;&#xFF0C;&#x5728;Activity&#x7684;onCreate&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x7684;MyLifeCycleObserver&#x4E2D;&#x7684;&#x6CE8;&#x91CA;onCreate&#x65B9;&#x6CD5;&#x4E5F;&#x4F1A;&#x76F8;&#x5E94;&#x7684;&#x56DE;&#x8C03;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x7ED3;&#x5408;LifecycleObserver&#x3001;LifecycleOwner&#x4E0E;LifecycleRegistry&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E3A;&#x4EFB;&#x610F;&#x975E;&#x751F;&#x547D;&#x611F;&#x77E5;&#x7684;&#x7EC4;&#x4EF6;&#x5B9E;&#x73B0;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5BF9;&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;&#x51CF;&#x5C11;&#x903B;&#x8F91;&#x5904;&#x7406;&#x4E0E;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5F02;&#x5E38;&#x53D1;&#x751F;&#x3002;</p>\n<h2 id=\"Lifecycle-amp-LiveData\"><a href=\"#Lifecycle-amp-LiveData\" class=\"headerlink\" title=\"Lifecycle &amp; LiveData\"></a>Lifecycle &amp; LiveData</h2><p>&#x90A3;&#x4E48;&#x518D;&#x56DE;&#x5230;&#x6587;&#x7AE0;&#x6700;&#x521D;&#x6240;&#x8BF4;&#x7684;LiveData&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;LiveData&#x662F;&#x5982;&#x4F55;&#x501F;&#x52A9;Lifecycle&#x6765;&#x5B9E;&#x73B0;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;</p>\n<blockquote>\n<p>&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x5047;&#x8BBE;&#x4F60;&#x5DF2;&#x7ECF;&#x5BF9;LiveData&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x4E86;&#x89E3;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://idisfkj.github.io/2018/06/10/Android-Architecture-Components-Part2-LiveData/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part2:LiveData</a>&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;LiveData</p>\n</blockquote>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;LiveData&#x7684;observer&#x65B9;&#x6CD5;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@MainThread</div><div class=\"line\">public void observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;T&gt; observer) {</div><div class=\"line\">    if (owner.getLifecycle().getCurrentState() == DESTROYED) {</div><div class=\"line\">        // ignore</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    LifecycleBoundObserver wrapper = new LifecycleBoundObserver(owner, observer);</div><div class=\"line\">    ObserverWrapper existing = mObservers.putIfAbsent(observer, wrapper);</div><div class=\"line\">    if (existing != null &amp;&amp; !existing.isAttachedTo(owner)) {</div><div class=\"line\">        throw new IllegalArgumentException(&quot;Cannot add the same observer&quot;</div><div class=\"line\">                + &quot; with different lifecycles&quot;);</div><div class=\"line\">    }</div><div class=\"line\">    if (existing != null) {</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    owner.getLifecycle().addObserver(wrapper);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E86;&#x8BB8;&#x591A;&#x719F;&#x6089;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x663E;&#x800C;&#x6613;&#x89C1;&#x5B83;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;LifecycleBoundObserver&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;Lifecycle&#x7684;&#x76D1;&#x542C;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x4E00;&#x65E6;&#x751F;&#x547D;&#x5468;&#x671F;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x5C31;&#x4F1A;&#x56DE;&#x8C03;LifecycleBoundObserver&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x800C;LifecycleBoundObserver&#x5B9E;&#x73B0;&#x4E86;GenericLifecycleObserver&#x63A5;&#x53E3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GenericLifecycleObserver extends LifecycleObserver {</div><div class=\"line\">    /**</div><div class=\"line\">     * Called when a state transition event happens.</div><div class=\"line\">     *</div><div class=\"line\">     * @param source The source of the event</div><div class=\"line\">     * @param event The event</div><div class=\"line\">     */</div><div class=\"line\">    void onStateChanged(LifecycleOwner source, Lifecycle.Event event);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;GenericLifecycleObserver&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E86;&#x719F;&#x6089;&#x7684;LifecycleObserver&#x3002;&#x672C;&#x8D28;&#x4E0E;&#x6587;&#x7AE0;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x7684;MyLifeCycleObserver&#x76F8;&#x540C;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;<strong>onStateChanged()</strong>&#x65B9;&#x6CD5;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x5C31;&#x662F;Lifecycle&#x89C2;&#x5BDF;&#x5230;&#x751F;&#x547D;&#x5468;&#x671F;&#x6539;&#x53D8;&#x65F6;&#x901A;&#x77E5;Observer&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x3002;</p>\n<p>Observer&#x660E;&#x767D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x6700;&#x521D;&#x7684;Lifecycle&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x7684;&#x662F;&#x5B83;&#x6765;&#x81EA;&#x4E8E;Activity/Fragment&#xFF0C;&#x6211;&#x4EEC;&#x5230;Activity&#x4E2D;&#x5BFB;&#x627E;(Fragment&#x4E5F;&#x662F;&#x4E00;&#x6837;)&#x3002;&#x6700;&#x540E;&#x5728;&#x7EE7;&#x627F;&#x7684;SupportActivity&#x4E2D;&#x627E;&#x5230;&#x4E86;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class SupportActivity extends Activity implements LifecycleOwner {</div><div class=\"line\"></div><div class=\"line\">    private LifecycleRegistry mLifecycleRegistry = new LifecycleRegistry(this);</div><div class=\"line\">    ...</div><div class=\"line\">    ...</div><div class=\"line\">    ...</div><div class=\"line\">     </div><div class=\"line\">    @CallSuper</div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onSaveInstanceState(Bundle outState) {</div><div class=\"line\">        mLifecycleRegistry.markState(Lifecycle.State.CREATED);</div><div class=\"line\">        super.onSaveInstanceState(outState);</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    @Override</div><div class=\"line\">    public Lifecycle getLifecycle() {</div><div class=\"line\">        return mLifecycleRegistry;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">   ...</div><div class=\"line\">   ...</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x518D;&#x4E00;&#x6B21;&#x770B;&#x5230;&#x4E86;LifecycleRegistry&#x4E0E;LifecycleOwner&#xFF0C;&#x5B83;&#x7684;&#x7528;&#x6CD5;&#x4E5F;&#x4E0E;&#x4E0A;&#x9762;&#x63D0;&#x53CA;&#x7684;&#x81EA;&#x5B9A;&#x4E49;LifecycleOwner&#x5982;&#x51FA;&#x4E00;&#x8F99;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x505A;&#x8BF4;&#x660E;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x4E0E;Observer&#x7684;&#x8FDE;&#x63A5;&#x3002;</p>\n<p>&#x5982;&#x4E0A;&#x6240;&#x793A;&#x5F53;Activity&#x7684;onSaveInstanceState&#x56DE;&#x8C03;&#x65F6;&#x4F1A;&#x8C03;&#x7528;<strong>markState()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x5728;&#x5176;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x5185;&#x90E8;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x6765;&#x5230;ObserverWithState&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">static class ObserverWithState {</div><div class=\"line\">    State mState;</div><div class=\"line\">    GenericLifecycleObserver mLifecycleObserver;</div><div class=\"line\"> </div><div class=\"line\">    ObserverWithState(LifecycleObserver observer, State initialState) {</div><div class=\"line\">        mLifecycleObserver = Lifecycling.getCallback(observer);</div><div class=\"line\">        mState = initialState;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    void dispatchEvent(LifecycleOwner owner, Event event) {</div><div class=\"line\">        State newState = getStateAfter(event);</div><div class=\"line\">        mState = min(mState, newState);</div><div class=\"line\">        mLifecycleObserver.onStateChanged(owner, event);</div><div class=\"line\">        mState = newState;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<strong>dispatchEvent()</strong>&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x8C03;&#x7528;mLifecycleObserver&#xFF0C;&#x4ED4;&#x7EC6;&#x770B;&#x8FD9;&#x4E2A;Observer&#x5C31;&#x662F;GenericLifecycleObserver&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4F1A;&#x8C03;&#x7528;<strong>onStateChanged()</strong>&#x65B9;&#x6CD5;&#x3002;</p>\n<p>&#x5230;&#x8FD9;&#x91CC;LifecycleObserver&#x4E0E;LifecycleOwner&#x5C31;&#x5B8C;&#x7F8E;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x4E86;&#xFF0C;&#x4E3A;LiveData&#x5B9E;&#x73B0;&#x4E86;&#x751F;&#x547D;&#x72B6;&#x6001;&#x7684;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;&#x901A;&#x8FC7;LiveData&#x4E0E;Lifecycle&#x7684;&#x8FD0;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E86;Lifecycle&#x7684;&#x7075;&#x6D3B;&#x6027;&#x4E0E;&#x5B83;&#x7684;&#x5F3A;&#x5927;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4E3A;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;Lifecycle&#x7684;&#x5F3A;&#x5927;&#x6BCB;&#x5EB8;&#x7F6E;&#x7591;&#x3002;</p>\n<p>&#x5176;&#x6B21;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;LiveData&#x4E0E;Lifecycle&#x7684;&#x8FD0;&#x7528;&#x4E0D;&#x4EC5;&#x5982;&#x6B64;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x5B83;&#x7684;&#x6CE8;&#x518C;&#x76D1;&#x542C;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5B83;&#x7684;<strong>postValue()</strong>&#x4E0E;<strong>setValue()</strong>&#x3002;&#x7531;&#x4E8E;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x662F;&#x5206;&#x6790;Lifecycle&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x505A;&#x5206;&#x6790;&#x3002;</p>\n<blockquote>\n<p>&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;feat_architecture_components</p>\n</blockquote>\n<p>&#x6700;&#x540E;&#x505A;&#x4E2A;&#x9884;&#x544A;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8981;&#x4E86;&#x89E3;&#x7684;&#x662F;AAC&#x4E2D;&#x7684;ViewModel&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x4E5F;&#x4F1A;&#x9A6C;&#x4E0A;&#x559C;&#x6B22;&#x4E0A;&#x5B83;&#x3002;</p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/06/07/Android-Architecture-Components-Part1-Room/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part1:Room</a><br><a href=\"https://idisfkj.github.io/2018/06/10/Android-Architecture-Components-Part2-LiveData/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part2:LiveData</a><br><a href=\"https://idisfkj.github.io/2018/06/22/Android-Architecture-Components-Part4-ViewModel/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part4:ViewModel</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/wx.jpg\" alt=\"\"></p>\n"},{"title":"Android Architecture Components Part2:LiveData","url":"https://www.rousetime.com/2018/06/10/Android-Architecture-Components-Part2-LiveData/","content":"<p><img src=\"/2018/06/10/Android-Architecture-Components-Part2-LiveData/cover.png\" alt=\"\"></p>\n<p>&#x611F;&#x8C22;&#x4F60;&#x7684;&#x518D;&#x6B21;&#x5149;&#x4E34;&#xFF0C;&#x6B22;&#x8FCE;&#x6765;&#x5230;Android Architecture Components&#xFF08;ACC&#xFF09;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x3002;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x8BA8;&#x8BBA;&#x4E86;Room&#xFF0C;&#x901A;&#x8FC7;Room&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x65B9;&#x4FBF;&#x7684;&#x64CD;&#x4F5C;App&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;App&#x5BF9;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#x6709;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x8BDD;&#xFF0C;Room&#x4F60;&#x503C;&#x5F97;&#x62E5;&#x6709;&#x3002;</p>\n<p>&#x4ECA;&#x5929;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7EE7;&#x7EED;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x6B65;&#x4F10;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6765;&#x5168;&#x9762;&#x4E86;&#x89E3;ACC&#x53E6;&#x4E00;&#x5F3A;&#x5927;&#x7684;&#x7EC4;&#x4EF6;LiveData&#x3002;&#x76F8;&#x4FE1;&#x4F60;&#x9A6C;&#x4E0A;&#x4F1A;&#x559C;&#x6B22;&#x4E0A;&#x5979;&#xFF01;&#x1F60D;&#x1F60D;&#x1F60D;</p>\n<h2 id=\"&#x7B80;&#x8FF0;\"><a href=\"#&#x7B80;&#x8FF0;\" class=\"headerlink\" title=\"&#x7B80;&#x8FF0;\"></a>&#x7B80;&#x8FF0;</h2><p>LiveData&#x662F;&#x4E00;&#x79CD;&#x53EF;&#x89C2;&#x6D4B;&#x6570;&#x636E;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;&#x6570;&#x636E;&#x53D8;&#x5316;&#x65F6;&#x901A;&#x77E5;&#x89C2;&#x6D4B;&#x5668;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x65B0;&#x9875;&#x9762;&#xFF1B;&#x540C;&#x65F6;&#x5B83;&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x65F6;&#x89C2;&#x5BDF;Activity/Fragment&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x65E2;&#x7136;&#x5B83;&#x662F;&#x53EF;&#x89C2;&#x5BDF;&#x6570;&#x636E;&#x5BB9;&#x5668;&#x4E0E;&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x4F18;&#x70B9;&#x4E5F;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x53EF;&#x4EE5;&#x5F52;&#x7EB3;&#x4E0E;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;</p>\n<ol>\n<li>&#x786E;&#x4FDD;ui&#x8DDF;&#x968F;&#x6570;&#x636E;&#x66F4;&#x65B0;</li>\n<li>&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x6CC4;&#x9732;</li>\n<li>&#x9632;&#x6B62;&#x5F02;&#x5E38;crashs</li>\n<li>&#x65E0;&#x9700;&#x7BA1;&#x7406;&#x7ED1;&#x5B9A;&#x8005;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</li>\n<li>ui&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6700;&#x8FD1;&#x6700;&#x7EC8;&#x7684;&#x66F4;&#x65B0;&#x6570;&#x636E;</li>\n</ol>\n<h2 id=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x4F7F;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"></a>&#x4F7F;&#x7528;&#x573A;&#x666F;</h2><p>&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x76D1;&#x542C;&#x67D0;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x65F6;&#xFF0C;LiveData&#x5C06;&#x5927;&#x663E;&#x8EAB;&#x624B;&#x3002;&#x4F8B;&#x5982;&#x754C;&#x9762;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x901A;&#x77E5;&#x754C;&#x9762;&#x8FDB;&#x884C;&#x66F4;&#x65B0;ui&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;LiveData&#x5728;&#x5F53;&#x524D;Activity/Fragment&#x4E2D;&#x5BF9;&#x8BE5;&#x6570;&#x636E;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#xFF0C;&#x5B9E;&#x65F6;&#x76D1;&#x542C;&#x6570;&#x636E;&#x7684;&#x4EFB;&#x4F55;&#x6539;&#x52A8;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x6539;&#x52A8;LiveData&#x90FD;&#x4F1A;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x7ED9;&#x89C2;&#x5BDF;&#x8005;&#x3002;</p>\n<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;LiveData&#x611F;&#x77E5;&#x754C;&#x9762;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x6709;&#x5728;&#x754C;&#x9762;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;<strong>STARTED</strong>&#x6216;&#x8005;<strong>RESUMED</strong>&#x72B6;&#x6001;&#x624D;&#x4F1A;&#x901A;&#x77E5;&#x89C2;&#x5BDF;&#x8005;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x540E;&#x53F0;&#x4E14;&#x6570;&#x636E;&#x4E00;&#x76F4;&#x5728;&#x53D8;&#x5316;&#xFF0C;LiveData&#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x901A;&#x77E5;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x754C;&#x9762;&#x518D;&#x4E00;&#x6B21;&#x56DE;&#x5230;&#x524D;&#x53F0;&#xFF0C;&#x8FD9;&#x65F6;LiveData&#x624D;&#x4F1A;&#x53D1;&#x751F;&#x901A;&#x77E5;&#x4E14;&#x53EA;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x6B21;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#x53D6;&#x7684;&#x662F;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x7684;&#x53D8;&#x5316;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x7684;&#x907F;&#x514D;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x4E0E;ui&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#x5BFC;&#x81F4;&#x7684;<strong>NullPointerException</strong></p>\n<h2 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h2><p>&#x9996;&#x9875;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x6211;&#x4EEC;&#x7684;app&#x4E0B;&#x7684;build.gradle&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4F9D;&#x8D56;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    def lifecycle_version = &quot;1.1.1&quot;</div><div class=\"line\"> </div><div class=\"line\">    // ViewModel and LiveData</div><div class=\"line\">    implementation &quot;android.arch.lifecycle:extensions:$lifecycle_version&quot;</div><div class=\"line\">    // alternatively - just LiveData</div><div class=\"line\">    implementation &quot;android.arch.lifecycle:livedata:$lifecycle_version&quot;</div><div class=\"line\"> </div><div class=\"line\">    annotationProcessor &quot;android.arch.lifecycle:compiler:$lifecycle_version&quot;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x6B63;&#x5F0F;&#x4F7F;&#x7528;LiveData&#xFF0C;&#x770B;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsViewModel(application: Application, private val defTitle: String = &quot;Contacts&quot;) : AndroidViewModel(application) {</div><div class=\"line\">    val message: MutableLiveData&lt;String&gt; by lazy { MutableLiveData&lt;String&gt;() }</div><div class=\"line\">    val contactsList: MutableLiveData&lt;List&lt;ContactsModel&gt;&gt; = MutableLiveData()</div><div class=\"line\">     </div><div class=\"line\">   fun getContacts(refresh: Boolean): LiveData&lt;List&lt;ContactsModel&gt;&gt; {</div><div class=\"line\">        message.value = &quot;&quot;</div><div class=\"line\">        if (refresh) {</div><div class=\"line\">            getDataFromRemote()</div><div class=\"line\">        } else if (contactsList.value == null || contactsList.value?.size ?: 0 &lt;= 0) {</div><div class=\"line\">            message.value = &quot;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x4E2D;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#xFF01;&quot;</div><div class=\"line\">            if (mLocalData.isEmpty()) {</div><div class=\"line\">                getDataFromLocal()</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        return contactsList</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    private fun getDataFromLocal() {</div><div class=\"line\">        val runnable = Runnable {</div><div class=\"line\">            val dao = mContactsDao.getAllContacts()</div><div class=\"line\">            if (dao.isNotEmpty()) {</div><div class=\"line\">                contactsList.postValue(dao)</div><div class=\"line\">            } else {</div><div class=\"line\">                getDataFromRemote()</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        mExecutors.disIoExecutor.execute(runnable)</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private fun getDataFromRemote() {</div><div class=\"line\">        Handler().postDelayed({</div><div class=\"line\">            contactsList.value = mRemoteData</div><div class=\"line\">            mLocalData = mRemoteData</div><div class=\"line\">            saveContacts(mRemoteData)</div><div class=\"line\">            Thread(Runnable {</div><div class=\"line\">                title.postValue(&quot;Remote Contacts&quot;)</div><div class=\"line\">            }).start()</div><div class=\"line\">            message.value = &quot;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;~&quot;</div><div class=\"line\">        }, MDELAY_MILLIS)</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x4F7F;&#x7528;MutableLiveDat&#x5BF9;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4E86;&#x5305;&#x88F9;&#xFF0C;MutableLiveData&#x5B83;&#x7EE7;&#x627F;&#x4E0E;LiveData&#xFF0C;&#x66B4;&#x9732;&#x4E86;<strong>postValue()</strong>&#x4E0E;<strong>setValue()</strong>&#x65B9;&#x6CD5;&#x3002;&#x4E00;&#x65E6;MutableLiveData&#x6240;&#x5305;&#x88F9;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<strong>postValue()</strong>(asynchronously)&#x4E0E;<strong>setValue()</strong>(synchronously)&#x6765;&#x8BBE;&#x7F6E;&#x503C;&#x4E0E;&#x53D1;&#x9001;&#x901A;&#x77E5;&#xFF0C;&#x544A;&#x8BC9;&#x89C2;&#x5BDF;&#x8005;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x6539;&#x53D8;&#x3002;</p>\n<blockquote>\n<p>&#x5728;<strong>getDataFromLocal()</strong>&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;Room&#x6765;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x540C;&#x65F6;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x8FD4;&#x56DE;LiveData&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x5F97;Room&#x4E0E;LiveData&#x5B8C;&#x7F8E;&#x7ED3;&#x5408;&#x3002;</p>\n</blockquote>\n<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;&#x89C2;&#x5BDF;&#x8005;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">class ContactsActivity : AppCompatActivity() {</div><div class=\"line\"> </div><div class=\"line\">    private lateinit var mViewModel: ContactsViewModel</div><div class=\"line\"> </div><div class=\"line\">    override fun onCreate(savedInstanceState: Bundle?) {</div><div class=\"line\">        super.onCreate(savedInstanceState)</div><div class=\"line\">        setContentView(R.layout.activity_contacts_layout)</div><div class=\"line\">        setupViewModel()</div><div class=\"line\">    }</div><div class=\"line\">    </div><div class=\"line\">    private fun setupViewModel() {</div><div class=\"line\">        mViewModel = ViewModelProviders.of(this, ContactsFactory.getInstance(application))[ContactsViewModel::class.java]</div><div class=\"line\">        //active STARTED&#x3001;RESUMED</div><div class=\"line\">        mViewModel.getContacts(true).observe(this,</div><div class=\"line\">                Observer {</div><div class=\"line\">                    //todo ...</div><div class=\"line\">                })</div><div class=\"line\">        mViewModel.message.observe(this,</div><div class=\"line\">                Observer {</div><div class=\"line\">                    //todo ...</div><div class=\"line\">                })</div><div class=\"line\">    }   </div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4E3A;&#x6240;&#x9700;&#x8981;&#x89C2;&#x5BDF;&#x7684;&#x6570;&#x636E;&#x6DFB;&#x52A0;&#x4E86;observer&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;LifecyleOwner&#xFF0C;&#x4EE5;&#x4FBF;&#x8BA9;LiveData&#x5177;&#x6709;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x8FD9;&#x91CC;&#x8981;&#x611F;&#x77E5;&#x7684;&#x662F;ContactsActivity&#xFF0C;&#x6240;&#x4EE5;&#x4F20;&#x5165;this&#x5373;&#x53EF;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x65E6;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x5B83;&#x7684;<strong>onChanged()</strong>&#x5C31;&#x4F1A;&#x56DE;&#x8C03;&#xFF0C;&#x5E76;&#x5C06;&#x6570;&#x636E;&#x5E26;&#x56DE;&#xFF0C;&#x8FD9;&#x6837;&#x754C;&#x9762;&#x5C31;&#x80FD;&#x5B9E;&#x65F6;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x7531;&#x4E8E;LiveData&#x662F;&#x751F;&#x547D;&#x611F;&#x77E5;&#x7684;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E5F;&#x65E0;&#x9700;&#x62C5;&#x5FC3;&#x4ED6;&#x7684;register/unregister</p>\n<h2 id=\"Extend\"><a href=\"#Extend\" class=\"headerlink\" title=\"Extend\"></a>Extend</h2><p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;LiveData&#x4F1A;&#x5BF9;&#x5904;&#x4E8E;STATERD&#x6216;&#x8005;RESUMED&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x53D1;&#x9001;&#x901A;&#x77E5;&#xFF0C;<strong>&#x5982;&#x679C;&#x8BE5;&#x72B6;&#x6001;&#x4E0B;&#x5B58;&#x5728;observer&#xFF0C;&#x7531;&#x65E0;&#x5230;&#x6709;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;active&#xFF0C;&#x53CD;&#x6B63;&#x79F0;&#x4E4B;&#x4E3A;inactive</strong>&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x77E5;&#x9053;&#x4F55;&#x65F6;&#x4E3A;active&#x4E0E;&#x4F55;&#x65F6;&#x4E3A;inactive&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;LiveData&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;LiveData&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<strong>onActive()</strong>&#x4E0E;<strong>onInactive()</strong>&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x60F3;&#x4E3A;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x5B9E;&#x73B0;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5982;&#x4E0B;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class StockLiveData extends LiveData&lt;BigDecimal&gt; {</div><div class=\"line\">    private static StockLiveData sInstance;</div><div class=\"line\">    private StockManager mStockManager;</div><div class=\"line\"> </div><div class=\"line\">    private SimplePriceListener mListener = new SimplePriceListener() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onPriceChanged(BigDecimal price) {</div><div class=\"line\">            setValue(price);</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"> </div><div class=\"line\">    @MainThread</div><div class=\"line\">    public static StockLiveData get(String symbol) {</div><div class=\"line\">        if (sInstance == null) {</div><div class=\"line\">            sInstance = new StockLiveData(symbol);</div><div class=\"line\">        }</div><div class=\"line\">        return sInstance;</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private StockLiveData(String symbol) {</div><div class=\"line\">        mStockManager = new StockManager(symbol);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onActive() {</div><div class=\"line\">        mStockManager.requestPriceUpdates(mListener);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onInactive() {</div><div class=\"line\">        mStockManager.removeUpdates(mListener);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x65E6;observer&#x7531;&#x65E0;&#x5230;&#x6709;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x5728;<strong>onActive()</strong>&#x65B9;&#x6CD5;&#x4E2D;&#x8FDB;&#x884C;&#x76D1;&#x542C;&#x5668;&#x7684;&#x6CE8;&#x518C;&#x3002;observer&#x7531;&#x6709;&#x5230;&#x65E0;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;<strong>onInactive()</strong>&#x4E2D;&#x8FDB;&#x884C;&#x6CE8;&#x9500;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x76D1;&#x542C;&#x5668;&#x5177;&#x5907;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;&#x907F;&#x514D;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x6216;&#x8005;&#x4E00;&#x6B21;crash&#x3002;&#x540C;&#x65F6;&#x4E00;&#x65E6;&#x76D1;&#x542C;&#x5668;&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x751F;&#x6548;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;LiveData&#x7684;<strong>setValue()</strong>&#x6765;&#x5BF9;&#x89C2;&#x5BDF;&#x8005;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#x3002;&#x6240;&#x4EE5;&#x89C2;&#x5BDF;&#x8005;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class MyFragment extends Fragment {</div><div class=\"line\">    @Override</div><div class=\"line\">    public void onActivityCreated(Bundle savedInstanceState) {</div><div class=\"line\">        StockLiveData.get(getActivity()).observe(this, price -&gt; {</div><div class=\"line\">            // Update the UI.</div><div class=\"line\">        });</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x7EC6;&#x5FC3;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x7684;StockLiveData&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x76D1;&#x542C;&#x5668;&#x5171;&#x4EAB;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x591A;&#x4E2A;&#x754C;&#x9762;&#x4E2D;&#x4F7F;&#x7528;StockLiveData&#x8FDB;&#x884C;&#x6DFB;&#x52A0;observer&#x3002;&#x4F8B;&#x5982;&#x5728;Activity&#x4E2D;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;observer&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x4E00;&#x76F4;&#x76D1;&#x542C;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x3002;</p>\n<blockquote>\n<p>&#x6848;&#x4F8B;&#xFF1A;&#x5BF9;&#x4E8E;App&#x7EDF;&#x8BA1;&#x9700;&#x6C42;&#xFF0C;&#x4E00;&#x65E6;&#x6D89;&#x53CA;&#x5230;&#x591A;&#x4E2A;&#x9875;&#x9762;&#x95F4;&#x7684;&#x7EDF;&#x8BA1;&#x53C2;&#x6570;&#x4F20;&#x9012;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x6269;&#x5C55;LiveData&#x6765;&#x5168;&#x5C40;&#x76D1;&#x542C;&#x53C2;&#x6570;&#x7684;&#x4F20;&#x9012;&#x4E0E;&#x53D8;&#x5316;&#x3002;</p>\n</blockquote>\n<h2 id=\"Transform\"><a href=\"#Transform\" class=\"headerlink\" title=\"Transform\"></a>Transform</h2><p>&#x5728;&#x901A;&#x77E5;&#x89C2;&#x5BDF;&#x8005;&#x6570;&#x636E;&#x6539;&#x53D8;&#x4E4B;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x6539;&#x53D8;LiveData&#x4E2D;&#x7684;&#x503C;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Transformations</p>\n<h3 id=\"Transformations-map\"><a href=\"#Transformations-map\" class=\"headerlink\" title=\"Transformations.map()\"></a>Transformations.map()</h3><p>&#x83B7;&#x53D6;&#x539F;&#x6709;&#x7C7B;&#x578B;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7C7B;&#x578B;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x6BD4;&#x55BB;&#x4E3A;&#x89E3;&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>map()</strong>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">LiveData&lt;User&gt; userLiveData = ...;</div><div class=\"line\">LiveData&lt;String&gt; userName = Transformations.map(userLiveData, user -&gt; {</div><div class=\"line\">    user.name + &quot; &quot; + user.lastName</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<h3 id=\"Transformations-switchMap\"><a href=\"#Transformations-switchMap\" class=\"headerlink\" title=\"Transformations.switchMap()\"></a>Transformations.switchMap()</h3><p>&#x4E0E;map&#x5BF9;&#x5E94;&#x7684;&#x662F;<strong>switchMap()</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x6253;&#x5305;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">private LiveData&lt;User&gt; getUser(String id) {</div><div class=\"line\">  ...;</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">LiveData&lt;String&gt; userId = ...;</div><div class=\"line\">LiveData&lt;User&gt; user = Transformations.switchMap(userId, id -&gt; getUser(id) );</div></pre></td></tr></table></figure>\n<h2 id=\"MediatorLiveData\"><a href=\"#MediatorLiveData\" class=\"headerlink\" title=\"MediatorLiveData\"></a>MediatorLiveData</h2><p>&#x4E0E;LiveData&#x76F8;&#x5173;&#x7684;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;MediatorLiveData&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x662F;&#xFF1A;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x591A;&#x4E2A;LiveData&#x3002;&#x4F8B;&#x5982;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x672C;&#x5730;&#x6570;&#x636E;&#x4E0E;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">LiveData&lt;List&lt;User&gt;&gt; usersFromDatabase;</div><div class=\"line\">LiveData&lt;List&lt;User&gt;&gt; usersFromNetwork;</div><div class=\"line\"> </div><div class=\"line\">MediatorLiveData&lt;List&lt;User&gt;&gt; usersLiveData = </div><div class=\"line\">    new MediatorLiveData&lt;&gt;();</div><div class=\"line\">     </div><div class=\"line\">usersLiveData.addSource(usersFromDatabase, newUserList -&gt;</div><div class=\"line\">    usersLiveData.setValue(value));</div><div class=\"line\">     </div><div class=\"line\">usersLiveData.addSource(usersFromNetwork, newUserList -&gt;</div><div class=\"line\">    usersLiveData.setValue(value));</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x65E6;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x53D1;&#x9001;&#x53D8;&#x5316;&#xFF0C;MediatorLiveData&#x90FD;&#x4F1A;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x7ED9;observer&#x3002;</p>\n<p>&#x662F;&#x5426;&#x611F;&#x89C9;LiveData&#x5F88;&#x5F3A;&#x5927;&#x5462;&#xFF1F;&#x90A3;&#x4E48;&#x8D76;&#x7D27;&#x884C;&#x52A8;&#x8D77;&#x6765;&#x5427;&#xFF0C;&#x8BA9;&#x4F60;&#x7684;App&#x4E2D;&#x6570;&#x636E;&#x4E5F;&#x5177;&#x6709;&#x53EF;&#x89C2;&#x5BDF;&#x4E0E;&#x751F;&#x547D;&#x611F;&#x77E5;&#x80FD;&#x529B;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<strong>feat_architecture_components</strong></p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/06/07/Android-Architecture-Components-Part1-Room/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part1:Room</a><br><a href=\"https://idisfkj.github.io/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part3:Lifecycle</a><br><a href=\"https://idisfkj.github.io/2018/06/22/Android-Architecture-Components-Part4-ViewModel/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part4:ViewModel</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/06/10/Android-Architecture-Components-Part2-LiveData/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"Android Architecture Components Part1:Room","url":"https://www.rousetime.com/2018/06/07/Android-Architecture-Components-Part1-Room/","content":"<p><img src=\"/2018/06/07/Android-Architecture-Components-Part1-Room/cover.png\" alt=\"cover\"></p>\n<h2 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h2><p>Android Architecture Components&#xFF08;AAC&#xFF09;&#x9996;&#x6B21;&#x53D1;&#x5E03;&#x4E0E;2017 GoogleI/O&#x5927;&#x4F1A;&#xFF0C;&#x7ECF;&#x8FC7;&#x8FD1;&#x4E00;&#x5E74;&#x7684;&#x7EF4;&#x62A4;&#xFF0C;&#x73B0;&#x5728;Google&#x56E2;&#x961F;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03;&#x4E86;&#x7A33;&#x5B9A;&#x7248;&#xFF08;v1.1.1&#xFF09;&#x3002;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x6765;&#x6784;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;App&#x5E94;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x4E86;&#x89E3;ACC&#x73B0;&#x5728;&#x65F6;&#x95F4;&#x521A;&#x521A;&#x597D;&#xFF0C;&#x6765;&#x4E0D;&#x53CA;&#x89E3;&#x91CA;&#xFF0C;&#x8D76;&#x7D27;&#x4E0A;&#x8F66;&#x5427;&#x3002;</p>\n<p>ACC&#x662F;&#x4E00;&#x4E2A;&#x67B6;&#x6784;&#x7EC4;&#x4EF6;&#xFF0C;&#x5B83;&#x80FD;&#x5E2E;&#x5FD9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x7684;&#x6765;&#x7BA1;&#x7406;&#x6211;&#x4EEC;&#x7684;App&#xFF0C;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x3002;&#x5B83;&#x80FD;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7684;App&#x66F4;&#x597D;&#x7684;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3001;&#x7BA1;&#x7406;&#x751F;&#x547D;&#x5468;&#x671F;&#x3001;&#x8FDB;&#x884C;&#x6A21;&#x5757;&#x5316;&#x3001;&#x907F;&#x514D;&#x5E38;&#x89C1;&#x7684;&#x9519;&#x8BEF;&#x3001;&#x51CF;&#x5C11;&#x6837;&#x677F;&#x6587;&#x4EF6;&#x7684;&#x7F16;&#x5199;&#x3002;</p>\n<p>ACC&#x4E3B;&#x8981;&#x7531;4&#x4E2A;&#x5355;&#x4E00;&#x7EC4;&#x4EF6;&#x7EC4;&#x6210;&#xFF0C;&#x5206;&#x522B;&#x4E3A;&#xFF1A;Room&#x3001;LiveData&#x3001;Lifecycle&#x4E0E;ViewModel&#x3002;&#x5B83;&#x4EEC;&#x6BCF;&#x4E00;&#x4E2A;&#x90FD;&#x662F;&#x72EC;&#x7ACB;&#x5B58;&#x5728;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#x5176;&#x4E2D;&#x51E0;&#x4E2A;&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x5168;&#x90E8;&#x6574;&#x5408;&#x5230;&#x4E00;&#x8D77;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;ACC&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x96C6;&#x6210;&#x5230;&#x6211;&#x4EEC;&#x7684;App&#x4E2D;&#x3002;</p>\n<p>&#x4ECA;&#x5929;&#x4E3B;&#x8981;&#x662F;&#x5BF9;ACC&#x5176;&#x4E2D;&#x7684;Room&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;Room&#x662F;&#x4E00;&#x4E2A;&#x7A33;&#x5065;&#x7684;SQL&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5E93;&#xFF0C;&#x7528;&#x6765;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x7684;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x672C;&#x5730;&#x5B58;&#x50A8;&#x3002;&#x81F3;&#x4E8E;&#x4E3A;&#x4F55;&#x8981;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x5F53;&#x7528;&#x6237;&#x65E0;&#x7F51;&#x7EDC;&#x6216;&#x8005;&#x7F51;&#x7EDC;&#x5DEE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x7684;&#x63D0;&#x9AD8;&#x7528;&#x6237;&#x5BF9;&#x6211;&#x4EEC;App&#x7684;&#x4F53;&#x9A8C;&#x3002;</p>\n<h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><p>&#x5728;&#x4F7F;&#x7528;Room&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x8981;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4F9D;&#x8D56;&#x6DFB;&#x52A0;&#x3002;<br>&#x9996;&#x5148;&#x5728;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;build.gradle&#x4E2D;&#x6DFB;&#x52A0;google()&#x5E93;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">allprojects {</div><div class=\"line\">    repositories {</div><div class=\"line\">        jcenter()</div><div class=\"line\">        google()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E4B;&#x540E;&#x6253;&#x5F00;&#x4F60;&#x7684;App&#x6216;&#x8005;module&#x4E2D;&#x7684;build.gradle&#x6587;&#x4EF6;&#xFF0C;&#x5728;dependencies&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    def room_version = &quot;1.1.0&quot; // or, for latest rc, use &quot;1.1.1-rc1&quot;</div><div class=\"line\"> </div><div class=\"line\">    implementation &quot;android.arch.persistence.room:runtime:$room_version&quot;</div><div class=\"line\">    annotationProcessor &quot;android.arch.persistence.room:compiler:$room_version&quot;</div><div class=\"line\"> </div><div class=\"line\">    // optional - RxJava support for Room</div><div class=\"line\">    implementation &quot;android.arch.persistence.room:rxjava2:$room_version&quot;</div><div class=\"line\"> </div><div class=\"line\">    // optional - Guava support for Room, including Optional and ListenableFuture</div><div class=\"line\">    implementation &quot;android.arch.persistence.room:guava:$room_version&quot;</div><div class=\"line\"> </div><div class=\"line\">    // Test helpers</div><div class=\"line\">    testImplementation &quot;android.arch.persistence.room:testing:$room_version&quot;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"Room\"><a href=\"#Room\" class=\"headerlink\" title=\"Room\"></a>Room</h2><p>&#x4E0A;&#x9762;&#x7684;&#x4F9D;&#x8D56;&#x6DFB;&#x52A0;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6B63;&#x5F0F;&#x4F7F;&#x7528;Room&#x3002;&#x5728;Android App&#x4E2D;&#x8FDB;&#x884C;&#x672C;&#x5730;&#x6570;&#x636E;&#x7684;&#x5B58;&#x50A8;&#x90FD;&#x662F;&#x4F7F;&#x7528;SQLite&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x539F;&#x751F;&#x7684;SQLite&#x8FDB;&#x884C;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7F16;&#x5199;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x8981;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x5E93;&#x7ED3;&#x6784;&#xFF0C;&#x8FD8;&#x8981;&#x521B;&#x5EFA;SQLiteHelper&#xFF0C;&#x7F16;&#x5199;&#x4E00;&#x8FDE;&#x4E32;&#x7684;SQL&#x8BED;&#x53E5;&#x3002;&#x8FD9;&#x6837;&#x4EE3;&#x7801;&#x91CF;&#x4E0E;&#x590D;&#x6742;&#x5EA6;&#x4E0D;&#x65AD;&#x4E0A;&#x5347;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x3002;&#x800C;Room&#x6B63;&#x597D;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x51CF;&#x5C11;&#x4EE3;&#x7801;&#x3001;&#x7B80;&#x5316;&#x590D;&#x6742;&#x5EA6;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;Room&#x7684;&#x4F7F;&#x7528;&#x4E3B;&#x8981;&#x7531;&#x4E09;&#x90E8;&#x5206;&#x6784;&#x6210;&#xFF1A;</p>\n<ol>\n<li>Entity&#xFF1A;&#x6807;&#x8BC6;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x8868;&#x7ED3;&#x6784;</li>\n<li>DAO&#xFF1A; &#x6807;&#x8BC6;&#x63D0;&#x4F9B;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x65B9;&#x6CD5;</li>\n<li>Database&#xFF1A;&#x6807;&#x8BC6;&#x6240;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x6570;&#x636E;&#x5E93;</li>\n</ol>\n<p>&#x4EE5;&#x4E0A;&#x4E09;&#x90E8;&#x5206;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x4EE3;&#x7801;&#x7684;&#x7CBE;&#x7B80;&#x3002;</p>\n<h3 id=\"Entity\"><a href=\"#Entity\" class=\"headerlink\" title=\"Entity\"></a>Entity</h3><p>Entity&#x4F5C;&#x7528;&#x5728;model&#x4E0A;&#xFF0C;&#x5373;&#x6211;&#x4EEC;&#x4E0E;&#x6570;&#x636E;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x6240;&#x5339;&#x914D;&#x7684;model&#x7C7B;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x8054;&#x7CFB;&#x4EBA;&#x76F8;&#x5173;&#x7684;model&#xFF0C;&#x5BF9;&#x4E8E;&#x6B63;&#x5E38;&#x7684;model&#x5EFA;&#x7ACB;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">data class ContactsModel(val id: Int, val name: String, val phone: String)</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x8981;&#x628A;ContactsModel&#x6620;&#x5C04;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x8868;&#xFF0C;&#x53EA;&#x9700;&#x8FDB;&#x884C;&#x5982;&#x4E0B;&#x64CD;&#x4F5C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Entity(tableName = &quot;contacts&quot;)</div><div class=\"line\">data class ContactsModel(</div><div class=\"line\">        @PrimaryKey</div><div class=\"line\">        @ColumnInfo(name = &quot;contacts_id&quot;)</div><div class=\"line\">        val id: Int,</div><div class=\"line\">        @ColumnInfo(name = &quot;name&quot;)</div><div class=\"line\">        val name: String,</div><div class=\"line\">        @ColumnInfo(name = &quot;phone&quot;)</div><div class=\"line\">        val phone: String</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5728;ContactsModel&#x4E2D;&#x6DFB;&#x52A0;@Entity&#x6CE8;&#x91CA;&#xFF0C;&#x8868;&#x660E;&#x5B83;&#x5C06;&#x6620;&#x5C04;&#x6210;&#x4E00;&#x79CD;&#x8868;&#x3002;&#x5728;Entity&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;tableName&#x6765;&#x4E3A;&#x8BE5;&#x8868;&#x547D;&#x540D;&#xFF0C;&#x8FD9;&#x91CC;&#x5C06;&#x5176;&#x547D;&#x540D;&#x672A;contacts&#x3002;</p>\n<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F7F;&#x7528;@ColumnInfo&#x6765;&#x6807;&#x660E;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;@PrimaryKey&#x6765;&#x6807;&#x660E;&#x8868;&#x7684;&#x4E3B;&#x952E;&#x3002;&#x5176;&#x4E2D;@ColumnInfo&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;(name = &#x201C;name&#x201D;)&#x6765;&#x547D;&#x540D;&#x5B57;&#x6BB5;&#x540D;&#x3002;&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x522B;&#x7684;&#x6CE8;&#x91CA;&#x4F8B;&#x5982;&#x5916;&#x952E;&#x7684;&#x6807;&#x660E;&#xFF1A;@ForeignKey</p>\n<h3 id=\"DAO\"><a href=\"#DAO\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><p>&#x6570;&#x636E;&#x5E93;&#x8868;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x662F;&#x63D0;&#x4F9B;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Dao</div><div class=\"line\">interface ContactsDao {</div><div class=\"line\"> </div><div class=\"line\">    @Query(&quot;SELECT * FROM contacts&quot;)</div><div class=\"line\">    fun getAllContacts(): List&lt;ContactsModel&gt;</div><div class=\"line\"> </div><div class=\"line\">    @Query(&quot;SELECT * FROM contacts WHERE contacts_id = :id&quot;)</div><div class=\"line\">    fun getContactsById(id: Int): LiveData&lt;ContactsModel&gt;</div><div class=\"line\"> </div><div class=\"line\">    @Insert(onConflict = OnConflictStrategy.REPLACE)</div><div class=\"line\">    fun insertContacts(contactsModel: ContactsModel)</div><div class=\"line\"> </div><div class=\"line\">    @Query(&quot;UPDATE contacts SET name = :name AND phone = :phone WHERE contacts_id = :id&quot;)</div><div class=\"line\">    fun updateContacts(id: Int, name: String, phone: String)</div><div class=\"line\"> </div><div class=\"line\">    @Query(&quot;DELETE FROM contacts WHERE contacts_id = :id&quot;)</div><div class=\"line\">    fun deleteContacts(id: Int)</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x901A;&#x8FC7;@Dao&#x6765;&#x6807;&#x660E;&#x5B83;&#x662F;&#x63D0;&#x4F9B;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x8868;&#x7684;&#x65B9;&#x6CD5;&#x96C6;&#x3002;&#x8981;&#x6CE8;&#x610F;&#x5B83;&#x5FC5;&#x987B;&#x4E3A;interface&#xFF0C;&#x5728;&#x63A5;&#x53E3;&#x4E2D;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#x3002;&#x4E0E;&#x5E73;&#x5E38;&#x7684;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x4E0A;&#x901A;&#x8FC7;&#x6CE8;&#x91CA;&#x6765;&#x6807;&#x660E;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>\n<p>&#x4F8B;&#x5982;getAllContacts()&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x4E86;&#x8BA9;&#x5B83;&#x5B9E;&#x73B0;&#x83B7;&#x53D6;contacts&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x5176;&#x65B9;&#x6CD5;&#x4E2D;&#x6DFB;&#x52A0;@Query&#x6CE8;&#x91CA;&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x67E5;&#x8BE2;&#x65B9;&#x6CD5;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x4F7F;&#x7528;Query&#xFF0C;&#x5982;&#x679C;&#x662F;&#x63D2;&#x5165;&#x65B9;&#x6CD5;&#x5C31;&#x662F;Insert(&#x7B2C;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;)&#x3002;&#x5176;&#x6B21;()&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x3002;&#x8FD9;&#x91CC;&#x662F;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;Contacts&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Query(&quot;SELECT * FROM contacts&quot;)</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x6709;&#x53C2;&#x6570;&#x7684;sql&#x8BED;&#x53E5;&#x7F16;&#x5199;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x7B2C;&#x4E8C;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x53C2;&#x6570;&#x503C;&#x53EA;&#x9700;&#x5728;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x540D;&#x524D;&#x52A0;&#x5165;:&#x524D;&#x7F00;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4F20;&#x53C2;&#x7684;&#x683C;&#x5F0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Query(&quot;SELECT * FROM contacts WHERE contacts_id = :id&quot;)</div><div class=\"line\">fun getContactsById(id: Int): LiveData&lt;ContactsModel&gt;</div></pre></td></tr></table></figure>\n<p>Room&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x901A;&#x8FC7;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x4E0E;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x518D;&#x7ED3;&#x5408;&#x6CE8;&#x91CA;&#x6765;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x91CF;&#x4E0E;&#x590D;&#x6742;&#x5EA6;&#x3002;&#x5F53;&#x7136;&#x6700;&#x7EC8;Room&#x4F1A;&#x6839;&#x636E;&#x6CE8;&#x91CA;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;build&#x9879;&#x76EE;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x5230;ContactsDao_Impl&#x7C7B;&#xFF0C;&#x8FD9;&#x4E2A;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x5C1D;&#x8BD5;&#x3002;&#x672C;&#x8D28;&#x662F;ContactsDao_Impl&#x5B9E;&#x73B0;&#x4E86;ContactsDao&#x63A5;&#x53E3;&#x3002;</p>\n<blockquote>\n<p>Room&#x7684;&#x5F3A;&#x5927;&#x4E4B;&#x4E00;&#x662F;&#xFF1A;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x68C0;&#x6D4B;&#x4F60;&#x7684;SQL&#x8BED;&#x53E5;&#x662F;&#x5426;&#x7F16;&#x5199;&#x6B63;&#x786E;&#xFF0C;&#x5982;&#x679C;&#x7F16;&#x5199;&#x9519;&#x8BEF;&#x5C06;&#x5BFC;&#x81F4;&#x7F16;&#x8BD1;&#x5931;&#x8D25;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x907F;&#x514D;App&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5BFC;&#x81F4;&#x5D29;&#x6E83;&#x3002;&#x8FD9;&#x4E2A;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;</p>\n</blockquote>\n<h3 id=\"Database\"><a href=\"#Database\" class=\"headerlink\" title=\"Database\"></a>Database</h3><p>&#x73B0;&#x5728;&#x6570;&#x636E;&#x8868;&#x6709;&#x4E86;&#xFF0C;&#x5BF9;&#x8868;&#x7684;&#x64CD;&#x4F5C;&#x65B9;&#x6CD5;&#x4E5F;&#x6709;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x5C31;&#x5DEE;&#x6570;&#x636E;&#x5E93;&#x6765;&#x4FDD;&#x5B58;&#x5404;&#x4E2A;&#x6570;&#x636E;&#x8868;&#x4E86;&#x3002;Talk is cheap. Show me the code&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Database(entities = arrayOf(ContactsModel::class), version = 1)</div><div class=\"line\">abstract class ContactsDataBase : RoomDatabase() {</div><div class=\"line\"> </div><div class=\"line\">    abstract fun contactsDao(): ContactsDao</div><div class=\"line\"> </div><div class=\"line\">    companion object {</div><div class=\"line\">        private var instance: ContactsDataBase? = null</div><div class=\"line\">        fun getInstance(context: Context): ContactsDataBase {</div><div class=\"line\">            if (instance == null) {</div><div class=\"line\">                instance = Room.databaseBuilder(context.applicationContext,</div><div class=\"line\">                        ContactsDataBase::class.java,</div><div class=\"line\">                        &quot;contacts.db&quot;).build()</div><div class=\"line\">            }</div><div class=\"line\">            return instance as ContactsDataBase</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6CA1;&#x9519;&#xFF0C;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;ContactsDataBase&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x8BA9;&#x5B83;&#x7EE7;&#x627F;RoomDatabase&#x62BD;&#x8C61;&#x7C7B;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x662F;&#x540C;@Database&#x6765;&#x6807;&#x660E;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5B83;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x4E3A;entities&#x4E0E;version&#xFF0C;&#x524D;&#x8005;&#x63A5;&#x6536;&#x7684;&#x7C7B;&#x578B;&#x662F;Class[]&#x6570;&#x7EC4;&#xFF0C;&#x5185;&#x5BB9;&#x4E3A;&#x5BF9;&#x4E8E;&#x8868;&#x7684;Class&#xFF1B;&#x540E;&#x8005;&#x662F;int&#x7684;&#x6570;&#x636E;&#x5E93;&#x7248;&#x672C;&#x53F7;&#x3002;</p>\n<p>&#x5728;ContactsDataBase&#x4E2D;&#x8FD8;&#x9700;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x8BA9;&#x5B83;&#x8FD4;&#x56DE;&#x7531;@Dao&#x6CE8;&#x91CA;&#x7684;ContactsDao&#xFF0C;&#x5373;&#x63D0;&#x4F9B;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x8868;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x672C;&#x8D28;&#x7684;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x66B4;&#x9732;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x8868;&#x7684;&#x5165;&#x53E3;&#x3002;&#x81F3;&#x4E8E;&#x5B83;&#x7684;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;build&#x6765;&#x67E5;&#x770B;&#x5BF9;&#x5E94;&#x7684;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x6587;&#x4EF6;ContactsDataBase_Impl&#x7C7B;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;contactsDao&#x662F;&#x6570;&#x636E;&#x5E93;&#x7684;&#x552F;&#x4E00;&#x5165;&#x53E3;&#xFF0C;&#x907F;&#x514D;&#x6BCF;&#x6B21;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x65F6;&#x90FD;&#x521B;&#x5EFA;ContactsDataBase&#x5B9E;&#x4F8B;&#xFF0C;&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x6765;&#x51CF;&#x5C11;&#x5B9E;&#x4F8B;&#x9891;&#x7E41;&#x521B;&#x5EFA;&#x7684;&#x5F00;&#x9500;&#x3002;</p>\n<h3 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h3><p>&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;Entity&#x3001;DAO&#x4E0E;Database&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#x7ED3;&#x6784;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x53F2;&#x4E0A;&#x6700;&#x7B80;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x7684;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">private val mContactsDao by lazy { ContactsDataBase.getInstance(application).contactsDao() }</div><div class=\"line\"> </div><div class=\"line\">fun getContactsById(id: Int): LiveData&lt;ContactsModel&gt; = mContactsDao.getContactsById(id)</div></pre></td></tr></table></figure>\n<p>&#x4F60;&#x6CA1;&#x770B;&#x9519;&#x53EA;&#x9700;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x4E2D;Contacts&#x8868;&#x4E2D;&#x7684;&#x6240;&#x7528;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x7B2C;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x83B7;&#x53D6;&#x4E86;ContactsDao&#x5B9E;&#x4F8B;&#xFF0C;&#x8BE5;&#x5B9E;&#x4F8B;&#x5305;&#x542B;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x8868;&#x7684;&#x6240;&#x4EE5;&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x7B2C;&#x4E8C;&#x884C;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x8C03;&#x7528;ContactsDao&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x65B9;&#x6CD5;&#x3002;&#x8FD4;&#x56DE;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x5728;&#x7B2C;&#x4E8C;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x7EC6;&#x5FC3;&#x7684;&#x4F60;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x8FD4;&#x56DE;&#x4E86;LiveData<contactsmodel>&#x7C7B;&#x578B;&#x6570;&#x636E;&#x3002;&#x5B83;&#x662F;ACC&#x7684;&#x53E6;&#x4E00;&#x5F3A;&#x5927;&#x7EC4;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;Room&#x7684;&#x53E6;&#x4E00;&#x5F3A;&#x5927;&#x4E4B;&#x5904;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;LiveData&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x5B8C;&#x7F8E;&#x4E0E;LiveData&#x7ED3;&#x5408;&#x3002;&#x81F3;&#x4E8E;LiveData&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x656C;&#x8BF7;&#x5173;&#x6CE8;&#x4E0B;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;Android Architecture Components Part2:LiveData&#x3002;</contactsmodel></p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x5982;&#x679C;&#x4F60;&#x7684;App&#x4F7F;&#x7528;&#x4E86;Room&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x7684;App&#x672C;&#x5730;&#x6570;&#x636E;&#x83B7;&#x53D6;&#x67B6;&#x6784;&#x5C06;&#x4F1A;&#x662F;&#x8FD9;&#x6837;&#x7684;</p>\n<p><img src=\"/2018/06/07/Android-Architecture-Components-Part1-Room/room.png\" alt=\"Room\"></p>\n<p>&#x6700;&#x540E;&#x6587;&#x7AE0;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x53EF;&#x4EE5;&#x5728;<a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">Github</a>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8BF7;&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<strong>feat_architecture_components</strong></p>\n<h2 id=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"><a href=\"#&#x76F8;&#x5173;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x6587;&#x7AE0;\"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href=\"https://idisfkj.github.io/2018/06/10/Android-Architecture-Components-Part2-LiveData/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part2:LiveData</a><br><a href=\"https://idisfkj.github.io/2018/06/14/Android-Architecture-Components-Part3-Lifecycle/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part3:Lifecycle</a><br><a href=\"https://idisfkj.github.io/2018/06/22/Android-Architecture-Components-Part4-ViewModel/\" target=\"_blank\" rel=\"external\">Android Architecture Components Part4:ViewModel</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/06/07/Android-Architecture-Components-Part1-Room/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"ConstraintLayout使用汇总","url":"https://www.rousetime.com/2018/05/03/ConstraintLayout使用汇总/","content":"<h2 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h2><p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x8981;&#x5411;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;ConstraintLayout&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x79CD;&#x5E03;&#x5C40;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5728;&#x5BF9;Android&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x65F6;&#x51CF;&#x5C11;&#x5BF9;&#x5E03;&#x5C40;&#x5C42;&#x6B21;&#x7684;&#x5D4C;&#x5957;&#xFF0C;&#x8FDB;&#x800C;&#x63D0;&#x9AD8;app&#x7684;&#x6027;&#x80FD;&#x3002;</p>\n<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4F1A;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x793A;&#x4F8B;&#x6765;&#x5168;&#x9762;&#x4ECB;&#x7ECD;ConstraintLayout&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x4E0E;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x7279;&#x6027;&#x3002;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x6B63;&#x5728;&#x5B66;&#x4E60;ConstraintLayout&#x4F7F;&#x7528;&#x7684;&#x540C;&#x5B66;&#x4EEC;&#x3002;</p>\n<h2 id=\"ConstraintLayout-VS-RelativeLayout\"><a href=\"#ConstraintLayout-VS-RelativeLayout\" class=\"headerlink\" title=\"ConstraintLayout VS RelativeLayout\"></a>ConstraintLayout VS RelativeLayout</h2><p>&#x76F8;&#x4FE1;&#x5F53;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x591A;&#x7684;&#x5E94;&#x8BE5;&#x662F;LinearLayout&#x4E0E;RelativeLayout&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x590D;&#x6742;&#x4E00;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x6765;&#x8BF4;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5D4C;&#x5957;&#x4F7F;&#x7528;&#x5C31;&#x6700;&#x6B63;&#x5E38;&#x4E0D;&#x8FC7;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5D4C;&#x5957;&#x5E03;&#x5C40;&#xFF0C;Google&#x7279;&#x610F;&#x5F00;&#x53D1;&#x7684;ConstraintLayout&#x3002;&#x5B83;&#x540C;&#x65F6;&#x652F;&#x6301;LinearLayout&#x4E0E;RelativeLayout&#x7684;&#x6240;&#x7528;&#x7279;&#x6027;&#x3002;&#x540C;&#x65F6;&#x5B83;&#x5B8C;&#x5168;&#x901A;&#x8FC7;&#x7EA6;&#x675F;&#x6765;&#x51CF;&#x5C11;&#x5E03;&#x5C40;&#x7684;&#x5D4C;&#x5957;&#x3002;&#x610F;&#x601D;&#x5C31;&#x662F;&#x57FA;&#x672C;&#x4E0A;&#x6700;&#x5916;&#x5C42;&#x53EA;&#x9700;&#x8981;&#x4E00;&#x4E2A;ConstraintLayout&#x8282;&#x70B9;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x5148;&#x4ECE;RelativeLayout&#x5F00;&#x59CB;&#xFF0C;&#x770B;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x6765;&#x5B9E;&#x73B0;RelativeLayout&#x7684;&#x7279;&#x6027;&#x3002;</p>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x5217;&#x4E3E;&#x4E00;&#x4E9B;RelativeLayout&#x7684;&#x7279;&#x6027;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:layout_alignStart=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignLeft=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignEnd=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignRight=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignTop=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignBaseline=&quot;@id/view&quot;</div><div class=\"line\">android:layout_alignBottom=&quot;@id/view&quot;</div><div class=\"line\"> </div><div class=\"line\">android:layout_toStartOf=&quot;@id/view&quot;</div><div class=\"line\">android:layout_toLeftOf=&quot;@id/view&quot;</div><div class=\"line\">android:layout_toEndOf=&quot;@id/view&quot;</div><div class=\"line\">android:layout_toRightOf=&quot;@id/view&quot;</div><div class=\"line\">android:layout_above=&quot;@id/view&quot;</div><div class=\"line\">android:layout_below=&quot;@id/view&quot;</div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentStart=&quot;true&quot;</div><div class=\"line\">android:layout_alignParentLeft=&quot;true&quot;</div><div class=\"line\">android:layout_alignParentEnd=&quot;true&quot;</div><div class=\"line\">android:layout_alignParentRight=&quot;true&quot;</div><div class=\"line\">android:layout_alignParentTop=&quot;true&quot;</div><div class=\"line\">android:layout_alignParentBottom=&quot;true&quot;</div><div class=\"line\"> </div><div class=\"line\">android:layout_centerInParent=&quot;true&quot;</div><div class=\"line\">android:layout_centerHorizontal=&quot;true&quot;</div><div class=\"line\">android:layout_centerVertical=&quot;true&quot;</div></pre></td></tr></table></figure>\n<p>&#x76F8;&#x4FE1;&#x4E0A;&#x9762;&#x7684;&#x7279;&#x6027;&#x5927;&#x5BB6;&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#x4E86;&#x3002;&#x5BF9;&#x4E8E;layout_align*&#x7684;&#x5C5E;&#x6027;&#x5728;ConstraintLayout&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x66FF;&#x4EE3;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">app:layout_constraintStart_toStartOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintLeft_toLeftOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintEnd_toEndOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintRight_toRightOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintTop_toTopOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintBaseline_toBaselineOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintBottom_toBottomOf=&quot;@id/view&quot;</div></pre></td></tr></table></figure>\n<p>&#x800C;&#x5BF9;&#x4E8E;layout_to*&#x7684;&#x5C5E;&#x6027;ConstraintLayout&#x4E5F;&#x6709;&#x4E0E;&#x4E4B;&#x5B8C;&#x7F8E;&#x66FF;&#x4EE3;&#x7684;&#x7279;&#x6027;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">app:layout_constraintStart_toEndOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintLeft_toRightOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintEnd_toStartOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintRight_toLeftOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintTop_toBottomOf=&quot;@id/view&quot;</div><div class=\"line\">app:layout_constraintBottom_toTopOf=&quot;@id/view&quot;</div></pre></td></tr></table></figure>\n<p>&#x63A5;&#x4E0B;&#x6765;&#x662F;layout_alignParent*&#x7684;&#x66FF;&#x4EE3;&#x5B9E;&#x73B0;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">app:layout_constraintStart_toStartOf=&quot;parent&quot;</div><div class=\"line\">app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">app:layout_constraintEnd_toEndOf=&quot;parent&quot;</div><div class=\"line\">app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">app:layout_constraintTop_toTopOf=&quot;parent&quot;</div><div class=\"line\">app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E0E;&#x4E4B;&#x524D;&#x7684;layout_align*&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x5B83;&#x7684;&#x6240;&#x4EE5;&#x7EA6;&#x675F;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x540C;&#x800C;&#x5DF2;&#xFF0C;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x5BF9;&#x7236;&#x5E03;&#x5C40;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x8FD9;&#x91CC;&#x7EDF;&#x4E00;&#x90FD;&#x662F;parent&#x3002;</p>\n<p>&#x6700;&#x540E;&#x662F;layout_center*&#x5C5E;&#x6027;&#xFF0C;&#x672C;&#x8D28;&#x4E0E;&#x4E0A;&#x9762;&#x7684;&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#x3002;&#x4E0B;&#x9762;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x5B9E;&#x4F8B;&#x6765;&#x5C55;&#x793A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Button</div><div class=\"line\">       android:id=&quot;@+id/center&quot;</div><div class=\"line\">       android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">       android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">       android:text=&quot;center&quot;</div><div class=\"line\">       app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">       app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">       app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">       app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x76F8;&#x4FE1;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#xFF0C;&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x6C34;&#x5E73;&#x5C45;&#x4E2D;&#x53EA;&#x9700;&#x8BBE;&#x7F6E;left&#x4E0E;right&#x5206;&#x522B;&#x7EA6;&#x675F;parent&#xFF0C;&#x800C;&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x7AD6;&#x76F4;&#x5C45;&#x4E2D;&#x5219;&#x53EA;&#x9700;&#x8BBE;&#x7F6E;top&#x4E0E;bottom&#x5206;&#x522B;&#x7EA6;&#x675F;parent&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x5DE9;&#x56FA;&#x4E0A;&#x9762;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x4E0E;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x7406;&#x89E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">    android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">    android:layout_height=&quot;match_parent&quot;&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;left&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;right&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;bottom&quot;</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/center&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;center&quot;</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;center top&quot;</div><div class=\"line\">        app:layout_constraintBottom_toTopOf=&quot;@+id/center&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;center bottom&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/center&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;center left&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/center&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/center&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;center right&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/center&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/center&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/android.support.constraint.ConstraintLayout&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_normal.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<blockquote>\n<p>&#x5728;ConstraintLayout&#x4E2D;&#x6CA1;&#x6709;match_parent,&#x800C;&#x4E0E;&#x4E4B;&#x66FF;&#x4EE3;&#x7684;&#x662F;match_constraint&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x4E2D;&#x901A;&#x8FC7;0dp&#x6765;&#x4EE3;&#x8868;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x4F7F;&#x7528;&#x4E86;match_parent&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x7EA6;&#x675F;&#x5C06;&#x4F1A;&#x5931;&#x6548;&#x3002;</p>\n</blockquote>\n<h2 id=\"ConstraintLayout-VS-LinearLayout\"><a href=\"#ConstraintLayout-VS-LinearLayout\" class=\"headerlink\" title=\"ConstraintLayout VS LinearLayout\"></a>ConstraintLayout VS LinearLayout</h2><p>&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8FBE;&#x5230;LinearLayout&#x7684;&#x6548;&#x679C;&#xFF0C;ConstraintLayout&#x5F15;&#x5165;&#x4E86;Chain Style.&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x6765;&#x8BBE;&#x7F6E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">app:layout_constraintHorizontal_chainStyle=&quot;&quot;</div><div class=\"line\">app:layout_constraintVertical_chainStyle=&quot;&quot;</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#x5206;&#x522B;&#x4E3A;&#xFF1A;</p>\n<ol>\n<li>spread_inside:&#x4E24;&#x8FB9;&#x4E0D;&#x7559;&#x7A7A;&#x95F4;&#xFF0C;&#x4E2D;&#x95F4;&#x95F4;&#x8DDD;&#x5E73;&#x5206;</li>\n<li>spread:&#x5B8C;&#x5168;&#x5747;&#x5206;</li>\n<li>packed:&#x5B8C;&#x5168;&#x4E0D;&#x7559;&#x95F4;&#x8DDD;</li>\n</ol>\n<p>&#x89E3;&#x91CA;&#x7684;&#x6709;&#x70B9;&#x751F;&#x786C;&#xFF0C;&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4E00;&#x5F20;&#x5B98;&#x65B9;&#x56FE;&#x6765;&#x66F4;&#x76F4;&#x89C2;&#x7684;&#x4E86;&#x89E3;</p>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/2.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;&#x8981;&#x8FBE;&#x5230;&#x4E0A;&#x7684;&#x7684;chain&#x6548;&#x679C;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x5FC5;&#x987B;&#x5B8C;&#x5168;&#x76F8;&#x4E92;&#x7EA6;&#x675F;&#xFF0C;&#x540C;&#x65F6;chain style&#x7684;&#x8BBE;&#x7F6E;&#x90FD;&#x662F;&#x4EE5;&#x7B2C;&#x4E00;&#x4E2A;view&#x4E3A;&#x57FA;&#x70B9;&#x3002;&#x540C;&#x65F6;&#x9ED8;&#x8BA4;chain style&#x4E3A;spread&#x3002;</p>\n</blockquote>\n<p>&#x540C;&#x6837;&#x7684;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x4E0E;&#x6548;&#x679C;&#x56FE;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;android.support.constraint.ConstraintLayout</div><div class=\"line\">xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">    android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">    android:layout_height=&quot;match_parent&quot;&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/first&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;first&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/second&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/second&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;second&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/first&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/third&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/third&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;third&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/second&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/match_first&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;first&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/match_second&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/match_second&quot;</div><div class=\"line\">        android:layout_width=&quot;0dp&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;second&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_weight=&quot;3&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/match_first&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/match_third&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/match_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/match_third&quot;</div><div class=\"line\">        android:layout_width=&quot;0dp&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;third&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_weight=&quot;4&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/match_second&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/match_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/spread_first&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;first&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_chainStyle=&quot;spread_inside&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/spread_second&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/match_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/spread_second&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;second&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/spread_first&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/spread_third&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/spread_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/spread_third&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;third&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/spread_second&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/spread_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/packed_first&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;first&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/packed_second&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/spread_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/packed_second&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;second&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/packed_first&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/packed_third&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/packed_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/packed_third&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;third&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/packed_second&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/packed_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/bias_first&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;first&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_bias=&quot;0.2&quot;</div><div class=\"line\">        app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/bias_second&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/packed_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/bias_second&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;second&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/bias_first&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/bias_third&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/bias_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/bias_third&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;third&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/bias_second&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/bias_first&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;/android.support.constraint.ConstraintLayout&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/3.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_chain.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<p>&#x901A;&#x8FC7;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x7B2C;&#x4E8C;&#x884C;&#x4ED6;&#x4EEC;&#x5360;&#x7684;&#x6BD4;&#x4F8B;&#x4E0D;&#x540C;&#xFF0C;&#x8FD4;&#x56DE;&#x770B;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#x5176;&#x5B9E;&#x4E0E;LinearLayout&#x7C7B;&#x4F3C;,&#x4F7F;&#x7528;&#x4E86;<code>app:layout_constraintHorizontal_weight=&quot;&quot;</code>&#x6743;&#x91CD;&#x5C5E;&#x6027;&#x3002;&#x5F53;&#x7136;&#x8981;&#x4F7F;&#x5F97;&#x5176;&#x751F;&#x6548;&#x5FC5;&#x987B;layout_width&#x4E0E;layout_height&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x4E3A;0dp&#x3002;<br>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x7B2C;4&#x3001;5&#x884C;&#xFF0C;&#x5982;&#x679C;chain style&#x7684;&#x503C;&#x4E3A;packed&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x9ED8;&#x8BA4;&#x662F;&#x5C45;&#x4E2D;&#x6392;&#x5217;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x6539;&#x53D8;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<code>app:layout_constraintHorizontal_bias=&quot;0.2&quot;</code>&#x4E0E;<code>app:layout_constraintVertical_bias=&quot;0.2&quot;</code>&#x3002;</p>\n<h2 id=\"margin-amp-goneMargin\"><a href=\"#margin-amp-goneMargin\" class=\"headerlink\" title=\"margin &amp; goneMargin\"></a>margin &amp; goneMargin</h2><h3 id=\"margin\"><a href=\"#margin\" class=\"headerlink\" title=\"margin\"></a>margin</h3><p>ConstraintLayout&#x7684;margin&#x4E0E;&#x539F;&#x6765;&#x7684;&#x4F7F;&#x7528;&#x533A;&#x522B;&#x4E3B;&#x8981;&#x4E3A;&#x4E24;&#x70B9;&#xFF1A;&#x5176;&#x4E00;android:layout_margin*&#x6548;&#x679C;&#x4E0D;&#x53D8;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x503C;&#x4E0D;&#x80FD;&#x4E3A;&#x8D1F;&#x503C;&#xFF1B;&#x5176;&#x4E8C;&#x76F8;&#x5E94;&#x65B9;&#x5411;&#x7684;margin&#x8BBE;&#x7F6E;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x7EA6;&#x675F;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x751F;&#x6548;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv1&quot;</div><div class=\"line\">    ...</div><div class=\"line\">    android:layout_marginRight=&quot;100dp&quot;        </div><div class=\"line\">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;/&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:layout_marginLeft=&quot;10dp&quot;</div><div class=\"line\">    ...       </div><div class=\"line\">    app:layout_constraintBaseline_toBaselineOf=&quot;@+id/tv1&quot;</div><div class=\"line\">    app:layout_constraintLeft_toRightOf=&quot;@+id/tv1&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x7B2C;&#x4E8C;&#x4E2A;TextView&#xFF0C;&#x5B83;&#x7684;marginLeft&#x4F1A;&#x751F;&#x6548;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x6709;left&#x65B9;&#x5411;&#x7684;&#x7EA6;&#x675F;&#xFF1A;app:layout_constraintLeft_toRightOf=&#x201D;@+id/tv1&#x201D;&#xFF1B;&#x800C;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;TextView&#xFF0C;&#x5B83;&#x7684;marginRight&#x4E0D;&#x4F1A;&#x751F;&#x6548;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7684;right&#x65B9;&#x5411;&#x4E0A;&#x6CA1;&#x6709;&#x7EA6;&#x675F;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8981;&#x751F;&#x6548;&#x53EF;&#x4EE5;&#x52A0;&#x5165;:app:layout_constraintRight_toRightOf=&#x201D;parent&#x7EA6;&#x675F;&#x3002;</p>\n<p>&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x539F;&#x6765;&#x5E03;&#x5C40;margin&#x4F7F;&#x7528;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x4E0D;&#x4E60;&#x60EF;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;padding&#x4EE3;&#x66FF;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;ConstraintLayout&#x6240;&#x63A8;&#x8350;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>\n<h3 id=\"goneMargin\"><a href=\"#goneMargin\" class=\"headerlink\" title=\"goneMargin\"></a>goneMargin</h3><p>&#x5728;ConstraintLayout&#x4E2D;&#x8FD8;&#x589E;&#x52A0;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x79CD;goneMargin&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x4E3B;&#x8981;&#x662F;&#xFF1A;&#x4E00;&#x65E6;&#x67D0;&#x4E2A;&#x65B9;&#x5411;&#x4E0A;&#x7684;&#x7EA6;&#x675F;view&#x4E0D;&#x53EF;&#x4EE5;&#x89C1;&#xFF0C;&#x8FD9;&#x65F6;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x8BE5;&#x5C5E;&#x6027;&#xFF0C;&#x8BE5;&#x65B9;&#x5411;&#x5C06;&#x81EA;&#x52A8;&#x589E;&#x52A0;margin&#x503C;&#x3002;&#x5373;&#x76EE;&#x6807;&#x5FC5;&#x987B;&#x4E0D;&#x53EF;&#x89C1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">    android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">    android:layout_height=&quot;match_parent&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:id=&quot;@+id/tv1&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;100dp&quot;</div><div class=\"line\">        android:text=&quot;tv1&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:layout_marginLeft=&quot;10dp&quot;</div><div class=\"line\">        android:text=&quot;tv2&quot;</div><div class=\"line\">        ....</div><div class=\"line\">        app:layout_constraintBaseline_toBaselineOf=&quot;@+id/tv1&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/tv1&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:id=&quot;@+id/tv3&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        android:text=&quot;tv3&quot;</div><div class=\"line\">        android:visibility=&quot;gone&quot;</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:id=&quot;@+id/tv4&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;10dp&quot;</div><div class=\"line\">        android:text=&quot;tv4&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/tv3&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_goneMarginLeft=&quot;100dp&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:id=&quot;@+id/tv5&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        android:layout_marginBottom=&quot;10dp&quot;</div><div class=\"line\">        android:text=&quot;tv5&quot;</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintVertical_bias=&quot;0.33&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;/android.support.constraint.ConstraintLayout&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/4.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_margin.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<h2 id=\"Circle\"><a href=\"#Circle\" class=\"headerlink\" title=\"Circle\"></a>Circle</h2><p>&#x5728;ConstraintLayout&#x4E2D;&#x4F60;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x5BF9;&#x4EFB;&#x610F;view&#x8FDB;&#x884C;&#x6C34;&#x5E73;&#x4E0E;&#x7AD6;&#x76F4;&#x65B9;&#x5411;&#x7684;&#x7EA6;&#x675F;&#xFF0C;&#x540C;&#x65F6;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x5C45;&#x4E8E;&#x7EA6;&#x675F;view&#x7684;&#x4E2D;&#x5FC3;&#x70B9;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x89D2;&#x5EA6;&#x65B9;&#x5411;&#x7684;&#x7EA6;&#x675F;&#x3002;&#x4E3B;&#x8981;&#x5C5E;&#x6027;&#x6709;&#x5982;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;</p>\n<ol>\n<li>layout_constraintCircle: &#x4EE3;&#x8868;&#x7EA6;&#x675F;&#x7684;view&#x7684;id</li>\n<li>layout_constraintCircleAngle: &#x4EE3;&#x8868;&#x7EA6;&#x675F;&#x7684;&#x89D2;&#x5EA6;</li>\n<li>layout_constraintCircleRadius: &#x4EE3;&#x8868;&#x7EA6;&#x675F;&#x7684;&#x534A;&#x5F84;&#x5927;&#x5C0F;</li>\n</ol>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/5.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;android.support.constraint.ConstraintLayout</div><div class=\"line\">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\"> ...</div><div class=\"line\"> &gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:id=&quot;@+id/tv1&quot;</div><div class=\"line\">        android:text=&quot;tv1&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintRight_toRightOf=&quot;parent&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:text=&quot;tv2&quot;</div><div class=\"line\">        ...</div><div class=\"line\">        app:layout_constraintCircle=&quot;@id/tv1&quot;</div><div class=\"line\">        app:layout_constraintCircleAngle=&quot;45&quot;</div><div class=\"line\">        app:layout_constraintCircleRadius=&quot;100dp&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;/android.support.constraint.ConstraintLayout&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/6.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_circle.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<h2 id=\"GuideLine\"><a href=\"#GuideLine\" class=\"headerlink\" title=\"GuideLine\"></a>GuideLine</h2><p>GuideLine&#x4E5F;&#x662F;ConstraintLayout&#x7279;&#x6709;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;&#x53C2;&#x8003;&#x7EBF;&#xFF0C;&#x4E14;&#x5B83;&#x7684;&#x5E03;&#x5C40;&#x4E2D;&#x4E0D;&#x4F1A;&#x5C55;&#x793A;&#x3002;</p>\n<p>GuidLine&#x6709;&#x6C34;&#x5E73;&#x4E0E;&#x7AD6;&#x76F4;&#x65B9;&#x6CD5;&#x7684;&#x8BBE;&#x7F6E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:orientation=&quot;horizontal|vertical&quot;</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#x4E3A;&#xFF1A;</p>\n<ol>\n<li>layout_constraintGuide_begin: &#x4EE3;&#x8868;&#x8DDD;&#x79BB;GuideLine&#x5DE6;&#x8FB9;&#x6216;&#x8005;&#x5E95;&#x90E8;&#x7684;&#x8DDD;&#x79BB;</li>\n<li>layout_constraintGuide_end: &#x4EE3;&#x8868;&#x8DDD;&#x79BB;GuideLine&#x53F3;&#x8FB9;&#x6216;&#x8005;&#x5E95;&#x90E8;&#x7684;&#x8DDD;&#x79BB;</li>\n<li>layout_constraintGuide_percent&#xFF1A;&#x4EE3;&#x8868;GuideLine&#x76F8;&#x5BF9;&#x4E8E;parent&#x7684;&#x4F4D;&#x7F6E;&#x767E;&#x5206;&#x6BD4;</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;android.support.constraint.ConstraintLayout </div><div class=\"line\">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">   ...</div><div class=\"line\">    &gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;android.support.constraint.Guideline</div><div class=\"line\">        android:id=&quot;@+id/vertical_guide_line&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:orientation=&quot;vertical&quot;</div><div class=\"line\">        app:layout_constraintGuide_begin=&quot;150dp&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/button&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;16dp&quot;</div><div class=\"line\">        android:text=&quot;Button&quot;</div><div class=\"line\">        app:layout_constraintLeft_toLeftOf=&quot;@+id/vertical_guide_line&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;android.support.constraint.Guideline</div><div class=\"line\">        android:id=&quot;@+id/horizontal_guide_line&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:orientation=&quot;horizontal&quot;</div><div class=\"line\">        app:layout_constraintGuide_end=&quot;150dp&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/button1&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;Button1&quot;</div><div class=\"line\">        app:layout_constraintRight_toLeftOf=&quot;@+id/vertical_guide_line&quot;</div><div class=\"line\">        app:layout_constraintTop_toTopOf=&quot;@+id/horizontal_guide_line&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:id=&quot;@+id/button2&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;Button2&quot;</div><div class=\"line\">        app:layout_constraintBottom_toBottomOf=&quot;@+id/horizontal_guide_line&quot;</div><div class=\"line\">        app:layout_constraintLeft_toRightOf=&quot;@+id/vertical_guide_line&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;android.support.constraint.Guideline</div><div class=\"line\">        android:id=&quot;@+id/percent_guide_Line&quot;</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:orientation=&quot;horizontal&quot;</div><div class=\"line\">        app:layout_constraintGuide_percent=&quot;0.3&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">    &lt;Button</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:text=&quot;margin top of parent 30%&quot;</div><div class=\"line\">        app:layout_constraintTop_toBottomOf=&quot;@+id/percent_guide_Line&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;/android.support.constraint.ConstraintLayout&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/7.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_guide_line.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<h2 id=\"Barrier-amp-Group\"><a href=\"#Barrier-amp-Group\" class=\"headerlink\" title=\"Barrier &amp; Group\"></a>Barrier &amp; Group</h2><h3 id=\"Barrier\"><a href=\"#Barrier\" class=\"headerlink\" title=\"Barrier\"></a>Barrier</h3><p>Barrier&#x4E0E;GuideLine&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E5F;&#x662F;&#x5E03;&#x5C40;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x5C31;&#x7EA6;&#x675F;&#x5BF9;&#x8C61;&#x7684;&#xFF0C;&#x770B;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/8.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x5982;&#x679C;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x79CD;&#x9700;&#x6C42;&#xFF1A;tv3&#x59CB;&#x7EC8;&#x5728;tv1&#x4E0E;tv2&#x7684;&#x6700;&#x8FD1;&#x53F3;&#x8FB9;&#xFF0C;&#x4F46;tv1&#x4E0E;tv2&#x7684;&#x5BBD;&#x5EA6;&#x7684;&#x4E0D;&#x770B;&#x9884;&#x671F;&#x7684;&#xFF0C;&#x5373;&#x53EF;&#x80FD;tv1&#x66F4;&#x957F;&#x6216;&#x8005;tv2&#x66F4;&#x957F;&#x3002;&#x8FD9;&#x65F6;Barrier&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x8FD9;&#x95EE;&#x9898;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!--barrier--&gt;</div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv1&quot;</div><div class=\"line\">    android:layout_width=&quot;150dp&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;5dp&quot;</div><div class=\"line\">    android:text=&quot;tv1&#xFF0C;&#x56FA;&#x5B9A;&#x5BBD;&#x5EA6;&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv2&quot;</div><div class=\"line\">    android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_marginTop=&quot;20dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;5dp&quot;</div><div class=\"line\">    android:text=&quot;tv2&#xFF0C;&#x5BBD;&#x5EA6;&#x4E0D;&#x56FA;&#x5B9A;&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv1&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;android.support.constraint.Barrier</div><div class=\"line\">    android:id=&quot;@+id/barrier&quot;</div><div class=\"line\">    android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    app:barrierDirection=&quot;end&quot;</div><div class=\"line\">    app:constraint_referenced_ids=&quot;tv1,tv2&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv3&quot;</div><div class=\"line\">    android:layout_width=&quot;0dp&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_marginLeft=&quot;5dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;5dp&quot;</div><div class=\"line\">    android:text=&quot;@string/barrier_tv3&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constraintLeft_toRightOf=&quot;@+id/barrier&quot;</div><div class=\"line\">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x5728;Barrier&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x5206;&#x522B;&#x4E3A;:</p>\n<ol>\n<li>barrierDirection&#xFF1A;&#x63A7;&#x5236;&#x5176;&#x65B9;&#x5411;</li>\n<li>constraint_referenced_ids&#xFF1A;&#x7EA6;&#x675F;&#x7684;view&#x7684;&#x53C2;&#x8003;id</li>\n</ol>\n<h3 id=\"Group\"><a href=\"#Group\" class=\"headerlink\" title=\"Group\"></a>Group</h3><p>&#x7EC6;&#x5FC3;&#x7684;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x65E2;&#x7136;ConstraintLayout&#x4E2D;&#x80FD;&#x51CF;&#x5C11;&#x5E03;&#x5C40;&#x7684;&#x5D4C;&#x5957;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x6A21;&#x5757;&#x7684;UI&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x6574;&#x4F53;&#x64CD;&#x4F5C;&#xFF0C;&#x662F;&#x5426;&#x53EA;&#x80FD;&#x9010;&#x4E00;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF08;&#x663E;&#x9690;&#x64CD;&#x4F5C;&#xFF09;&#xFF1F;ConstraintLayout&#x7ED9;&#x51FA;&#x4E86;&#x5B83;&#x7684;&#x7B54;&#x6848;&#xFF0C;&#x5C31;&#x662F;Group&#x3002;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5BF9;&#x591A;&#x4E2A;view&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#x64CD;&#x4F5C;&#xFF0C;&#x5F53;&#x7136;&#x5728;&#x5E03;&#x5C40;&#x4E2D;&#x4E5F;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x3002;&#x4E3B;&#x8981;&#x5C5E;&#x6027;&#x662F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">constraint_referenced_ids: &#x7EA6;&#x675F;&#x7684;view&#x7684;&#x53C2;&#x8003;id</div></pre></td></tr></table></figure>\n<p>&#x5C31;&#x62FF;&#x4E0A;&#x9762;Barrier&#x7684;&#x793A;&#x4F8B;&#x6765;&#x8BF4;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!--group &#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x5173;&#x8054;id&#x6765;&#x63A7;&#x5236;&#x5B83;&#x4EEC;&#x7684;&#x663E;&#x9690;--&gt;</div><div class=\"line\">&lt;android.support.constraint.Group</div><div class=\"line\">    android:id=&quot;@+id/group&quot;</div><div class=\"line\">    android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:visibility=&quot;visible&quot;</div><div class=\"line\">    app:constraint_referenced_ids=&quot;tv1,tv2&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x52A0;&#x4E86;&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;group&#x8FDB;&#x884C;VISIBLE&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5BF9;&#x540C;&#x65F6;&#x4F5C;&#x7528;&#x4E8E;tv1&#x4E0E;tv2&#x3002;</p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_barrier_group.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<h2 id=\"other\"><a href=\"#other\" class=\"headerlink\" title=\"other\"></a>other</h2><p>&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;ConstraintLayout&#x65F6;&#xFF0C;&#x4E00;&#x4E9B;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x505A;&#x5C11;&#x8D70;&#x5F2F;&#x8DEF;&#x3002;</p>\n<h3 id=\"wrap-content\"><a href=\"#wrap-content\" class=\"headerlink\" title=\"wrap_content\"></a>wrap_content</h3><p>&#x5982;&#x679C;&#x4F60;&#x7684;View&#x4E2D;&#x5BF9;&#x5BBD;&#x9AD8;&#x4F7F;&#x7528;&#x4E86;wrap_content&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x8981;&#x65F6;&#x523B;&#x6CE8;&#x610F;&#xFF0C;&#x5B83;&#x7684;&#x7EA6;&#x675F;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x4F1A;&#x5F88;&#x597D;&#x7684;&#x751F;&#x6548;&#x3002;&#x4F8B;&#x5982;&#x5982;&#x4E0B;&#x5B9E;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!--&#x5F53;&#x4E3A;wrap_content&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5F3A;&#x5236;&#x7EA6;&#x675F;--&gt;</div><div class=\"line\">&lt;!--app:layout_constrainedWidth=&#x201D;true|false&#x201D;--&gt;</div><div class=\"line\">&lt;!--app:layout_constrainedHeight=&#x201D;true|false&#x201D;--&gt;</div><div class=\"line\">&lt;!--android:minWidth--&gt;</div><div class=\"line\">&lt;!--android:minHeight--&gt;</div><div class=\"line\">&lt;!--android:maxWidth--&gt;</div><div class=\"line\">&lt;!--android:maxHeight--&gt;</div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv1&quot;</div><div class=\"line\">    android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;10dp&quot;</div><div class=\"line\">    android:text=&quot;tv1&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class=\"line\"> </div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv2&quot;</div><div class=\"line\">    android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_marginLeft=&quot;10dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;10dp&quot;</div><div class=\"line\">    android:text=&quot;@string/other_tv2&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constrainedWidth=&quot;true&quot;</div><div class=\"line\">    app:layout_constraintLeft_toRightOf=&quot;@+id/tv1&quot;</div><div class=\"line\">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/10.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x5982;&#x679C;&#x5C06;app:layout_constrainedWidth=&#x201D;true&#x201D;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x5220;&#x9664;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C06;&#x4F1A;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x6548;&#x679C;</p>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/9.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p>&#x5728;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x4E2D;&#x5DF2;&#x7ECF;&#x8BF4;&#x660E;&#xFF0C;&#x5728;&#x4F7F;&#x7528;wrap_content&#x65F6;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;minWith&#x7B49;&#x5C5E;&#x6027;&#x3002;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4E3A; min/max &gt; constraintWith/Height</p>\n</blockquote>\n<h3 id=\"MATCH-CONSTRAIN\"><a href=\"#MATCH-CONSTRAIN\" class=\"headerlink\" title=\"MATCH_CONSTRAIN\"></a>MATCH_CONSTRAIN</h3><p>&#x5F53;&#x4F7F;&#x7528;&#x4E86;MATCH_CONSTRAIN&#xFF0C;&#x5373;0dp&#x6765;&#x5C55;&#x793A;&#x5BBD;&#x9AD8;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x6765;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#x76F8;&#x5E94;&#x5BBD;&#x9AD8;&#x503C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!--&#x5F53;&#x4E3A;MATCH_CONSTRAINT &#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x8BBE;&#x7F6E;&#x6765;&#x7EA6;&#x675F;&#x5BBD;&#x9AD8;--&gt;</div><div class=\"line\">&lt;!--layout_constraintWidth_min and layout_constraintHeight_min--&gt;</div><div class=\"line\">&lt;!--layout_constraintWidth_max and layout_constraintHeight_max--&gt;</div><div class=\"line\">&lt;!--layout_constraintWidth_percent and layout_constraintHeight_percent--&gt;</div><div class=\"line\">&lt;!--android:minWidth--&gt;</div><div class=\"line\">&lt;!--android:minHeight--&gt;</div><div class=\"line\">&lt;!--android:maxWidth--&gt;</div><div class=\"line\">&lt;!--android:maxHeight--&gt;</div><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv3&quot;</div><div class=\"line\">    android:layout_width=&quot;0dp&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_marginTop=&quot;50dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;10dp&quot;</div><div class=\"line\">    android:text=&quot;tv3&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv1&quot;</div><div class=\"line\">    app:layout_constraintWidth_percent=&quot;0.5&quot; /&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/11.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x5982;&#x679C;&#x5C06;app:layout_constraintWidth_percent=&#x201D;0.5&#x201D;&#x53BB;&#x6389;&#x7684;&#x8BDD;&#xFF0C;&#x4F60;&#x5C06;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x6548;&#x679C;&#xFF1A;</p>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/12.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p>&#x6CE8;&#x610F;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4E3A;parent &gt; min/max &gt; constraint_min/max</p>\n</blockquote>\n<h3 id=\"Ratio\"><a href=\"#Ratio\" class=\"headerlink\" title=\"Ratio\"></a>Ratio</h3><p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x9700;&#x8981;&#x662F;&#x5BF9;View&#x8FDB;&#x884C;&#x56FA;&#x5B9A;&#x5BBD;&#x9AD8;&#x6BD4;&#x5C55;&#x793A;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;Ratio&#x7684;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x5C06;&#x975E;&#x5E38;&#x9002;&#x5408;&#x4F60;&#x3002;&#x4F60;&#x53EA;&#x9700;&#x8BBE;&#x7F6E;&#x5B83;&#x7684;layout_constraintDimensionRatio&#x5C5E;&#x6027;&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x5982;&#x679C;layout_width&#x4E0E;layout_height&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x4E3A;MATCH_CONSTRAIN&#xFF08;0dp&#xFF09;, MATCH_CONSTRAIN&#xFF08;0dp&#xFF09;&#x7684;&#x503C;&#x5C06;&#x6839;&#x636E;layout_constraintDimensionRatio&#x6240;&#x8BBE;&#x7684;&#x503C;&#x6765;&#x8BA1;&#x7B97;&#xFF08;w:h&#xFF09;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv4&quot;</div><div class=\"line\">    android:layout_width=&quot;0dp&quot;</div><div class=\"line\">    android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">    android:layout_marginTop=&quot;50dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;10dp&quot;</div><div class=\"line\">    android:text=&quot;tv4&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constraintDimensionRatio=&quot;2:1&quot;</div><div class=\"line\">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv3&quot; /&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/13.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x5982;&#x679C;layout_width&#x4E0E;layout_height&#x90FD;&#x4E3A;MATCH_CONSTRAIN&#xFF08;0dp&#xFF09;, &#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5BF9;layout_constraintDimensionRatio&#x6DFB;&#x52A0;&#x524D;&#x7F00;W/H&#xFF08;H&#xFF0C;w:h&#xFF0C;&#x6765;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5BBD;&#x9AD8;&#x65B9;&#x5411;&#x7684;&#x7EA6;&#x675F;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x6BD4;&#x4F8B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TextView</div><div class=\"line\">    android:id=&quot;@+id/tv5&quot;</div><div class=\"line\">    android:layout_width=&quot;0dp&quot;</div><div class=\"line\">    android:layout_height=&quot;0dp&quot;</div><div class=\"line\">    android:layout_marginTop=&quot;50dp&quot;</div><div class=\"line\">    android:background=&quot;@color/colorPrimary&quot;</div><div class=\"line\">    android:padding=&quot;10dp&quot;</div><div class=\"line\">    android:text=&quot;tv5&quot;</div><div class=\"line\">    android:textColor=&quot;@android:color/white&quot;</div><div class=\"line\">    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</div><div class=\"line\">    app:layout_constraintDimensionRatio=&quot;H,3:1&quot;</div><div class=\"line\">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv4&quot; /&gt;</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/14.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x6839;&#x636E;&#x6548;&#x679C;&#x56FE;&#x5C55;&#x793A;&#x7684;&#x5BBD;&#x9AD8;&#x6BD4;&#x4E3A;1:3&#x3002;&#x5373;&#x5BF9;&#x5E94;&#x4E86;H,3:1&#x3002;</p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis/blob/master/app/src/main/res/layout/activity_constraint_layout_other.xml\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x6E90;&#x7801;</a></p>\n<h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>&#x5230;&#x8FD9;&#x91CC;ConstraintLayout&#x7684;&#x4F7F;&#x7528;&#x5168;&#x90E8;&#x4ECB;&#x7ECD;&#x5B8C;&#x6BD5;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x6709;&#x6240;&#x4F5C;&#x7528;&#x4E0E;&#x5E2E;&#x52A9;&#x3002;&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x8DF3;&#x8F6C;&#x5230;&#x9879;&#x76EE;&#x5730;&#x5740;</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/05/03/ConstraintLayout&#x4F7F;&#x7528;&#x6C47;&#x603B;/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"Bitmap的图片压缩汇总","url":"https://www.rousetime.com/2018/03/21/Bitmap的图片压缩汇总/","content":"<h2 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h2><p>Bitmap&#x662F;Android&#x4E2D;&#x4E00;&#x79CD;&#x91CD;&#x8981;&#x7684;&#x56FE;&#x7247;&#x5904;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x88C1;&#x526A;&#x3001;&#x7F29;&#x653E;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x56FE;&#x7247;&#x683C;&#x5F0F;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x3002;&#x76F8;&#x4FE1;&#x5BF9;&#x4E8E;OOM&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#x4E86;&#xFF0C;OOM&#x7684;&#x4EA7;&#x751F;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5934;&#x75BC;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x7684;&#x65F6;&#x5019;&#x672A;&#x5BF9;&#x5927;&#x56FE;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5B83;&#x5C06;&#x4F1A;&#x5360;&#x7528;&#x975E;&#x5E38;&#x5927;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x4EA7;&#x751F;OOM&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x610F;&#x8BC6;&#x7684;&#x5BF9;&#x5927;&#x56FE;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4FDD;&#x8BC1;App&#x7684;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x4E0E;&#x6027;&#x80FD;&#x7684;&#x7A33;&#x5B9A;&#x3002;</p>\n<h2 id=\"Bitmap&#x5927;&#x5C0F;&#x8BA1;&#x7B97;\"><a href=\"#Bitmap&#x5927;&#x5C0F;&#x8BA1;&#x7B97;\" class=\"headerlink\" title=\"Bitmap&#x5927;&#x5C0F;&#x8BA1;&#x7B97;\"></a>Bitmap&#x5927;&#x5C0F;&#x8BA1;&#x7B97;</h2><p>&#x90A3;&#x4E48;&#x5982;&#x679C;&#x8BA1;&#x7B97;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x4E2D;&#x6240;&#x5360;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x5462;&#xFF1F;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5173;&#x4E8E;Bitmap&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x914D;&#x7F6E;&#x3002;</p>\n<h3 id=\"CompressFormat\"><a href=\"#CompressFormat\" class=\"headerlink\" title=\"CompressFormat\"></a>CompressFormat</h3><p>&#x8FD9;&#x662F;&#x7528;&#x6765;&#x6307;&#x5B9A;Bitmap&#x7684;&#x56FE;&#x7247;&#x7684;&#x538B;&#x7F29;&#x683C;&#x5F0F;&#xFF0C;&#x5728;Bitmap&#x4E2D;&#x662F;&#x4E00;&#x4E2A;Enum&#x7ED3;&#x6784;&#xFF0C;&#x4E3B;&#x8981;&#x8868;&#x73B0;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#x683C;&#x5F0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public enum CompressFormat {</div><div class=\"line\">    JPEG    (0),</div><div class=\"line\">    PNG     (1),</div><div class=\"line\">    WEBP    (2);</div><div class=\"line\"></div><div class=\"line\">    CompressFormat(int nativeInt) {</div><div class=\"line\">        this.nativeInt = nativeInt;</div><div class=\"line\">    }</div><div class=\"line\">    final int nativeInt;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<ul>\n<li>JPEG: &#x4EE5;JPEG&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x7684;&#x56FE;&#x7247;&#x683C;&#x5F0F;&#x53EF;&#x4EE5;&#x4E3A;.jpeg&#x6216;&#x8005;.jpg&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6709;&#x635F;&#x538B;&#x7F29;&#xFF0C;&#x6CA1;&#x6709;&#x900F;&#x660E;&#x5EA6;&#x3002;</li>\n<li>PNG&#xFF1A;&#x4EE5;PNG&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x7684;&#x56FE;&#x7247;&#x683C;&#x5F0F;&#x662F;.png&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x65E0;&#x635F;&#x538B;&#x7F29;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x900F;&#x660E;&#x5EA6;&#x3002;</li>\n<li>WEBP&#xFF1A;&#x4EE5;WEBP&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x7684;&#x56FE;&#x7247;&#x683C;&#x5F0F;&#x662F;.webp&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6709;&#x635F;&#x538B;&#x7F29;&#x3002;&#x76F8;&#x540C;&#x8D28;&#x91CF;&#x4E0B;&#xFF0C;webp&#x6BD4;jpeg&#x56FE;&#x50CF;&#x5C0F;40%&#xFF0C;&#x4F46;webp&#x56FE;&#x7247;&#x7684;&#x7F16;&#x7801;&#x65F6;&#x95F4;&#x6BD4;jpeg&#x957F;8&#x500D;&#x3002;</li>\n</ul>\n<h3 id=\"Config\"><a href=\"#Config\" class=\"headerlink\" title=\"Config\"></a>Config</h3><p>&#x8FD9;&#x662F;&#x5173;&#x4E8E;Bitmap&#x50CF;&#x7D20;&#x5B58;&#x50A8;&#x7684;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x50CF;&#x7D20;&#x5B58;&#x50A8;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x7684;&#x8D28;&#x91CF;&#x4E5F;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5F71;&#x54CD;&#x3002;&#x5728;Bitmap&#x4E2D;&#x662F;&#x4E00;&#x4E2A;Enum&#x7ED3;&#x6784;&#xFF0C;&#x4E3B;&#x8981;&#x8868;&#x73B0;&#x4E8E;&#x4EE5;&#x4E0B;&#x56DB;&#x79CD;&#x683C;&#x5F0F;&#x3002;</p>\n<ul>\n<li>ALPHA_8&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x90FD;&#x53EA;&#x50A8;&#x5B58;&#x5355;&#x4E00;&#x7684;&#x900F;&#x660E;&#x5EA6;&#xFF0C;&#x5373;&#x53EA;&#x6709;&#x900F;&#x660E;&#x5EA6;&#xFF0C;&#x603B;&#x5171;&#x5360;8&#x4F4D;&#xFF0C;1&#x5B57;&#x8282;&#x3002;</li>\n<li>ARGB_4444&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x90FD;&#x4EE5;A&#xFF08;&#x900F;&#x660E;&#x5EA6;&#xFF09;R&#xFF08;Red&#xFF09;G&#xFF08;Green&#xFF09;B&#xFF08;Blue&#xFF09;&#x56DB;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;&#x6BCF;&#x90E8;&#x5206;&#x5360;4&#x4F4D;&#xFF0C;&#x603B;&#x5171;&#x5360;16&#x4F4D;&#xFF0C;2&#x5B57;&#x8282;&#x3002;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x56FE;&#x7247;&#x8D28;&#x91CF;&#x592A;&#x5DEE;&#xFF0C;&#x6240;&#x4EE5;&#x4E2D;API 13&#x5C31;&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;&#x4E86;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;ARGB_8888&#x3002;</li>\n<li>ARGB_8888&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x90FD;&#x4EE5;A&#xFF08;&#x900F;&#x660E;&#x5EA6;&#xFF09;R&#xFF08;Red&#xFF09;G&#xFF08;Green&#xFF09;B&#xFF08;Blue&#xFF09;&#x56DB;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;&#x6BCF;&#x90E8;&#x5206;&#x5360;8&#x4F4D;&#xFF0C;&#x603B;&#x5171;32&#x4F4D;&#xFF0C;4&#x5B57;&#x8282;&#x3002;</li>\n<li>RGB_565&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x90FD;&#x4EE5;R&#xFF08;Red&#xFF09;G&#xFF08;Green&#xFF09;B&#xFF08;Blue&#xFF09;&#x4E09;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#x5206;&#x522B;&#x5360;5&#x4F4D;&#xFF0C;6&#x4F4D;&#xFF0C;5&#x4F4D;&#xFF0C;&#x603B;&#x5171;16&#x4F4D;&#xFF0C;2&#x5B57;&#x8282;&#x3002;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;OOM&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x4F7F;&#x7528;RGB_565&#x683C;&#x5F0F;&#xFF0C;&#x56E0;&#x4E3A;ALPHA_8&#x53EA;&#x6709;&#x900F;&#x660E;&#x5EA6;&#xFF0C;&#x5BF9;&#x4E8E;&#x6B63;&#x5E38;&#x56FE;&#x7247;&#x672A;&#x610F;&#x4E49;&#xFF1B;ARGB_4444&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x8D28;&#x91CF;&#x592A;&#x5DEE;&#xFF1B;ARGB_8888&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x6700;&#x591A;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x5EA6;&#x4E3A;1080&#x3001;&#x9AD8;&#x5EA6;&#x4E3A;675&#x3001;Config&#x4E3A;ARGB_8888&#x3002;&#x90A3;&#x4E48;&#x5B83;&#x5360;&#x7684;&#x5185;&#x5B58;&#x4E3A;&#xFF1A;1080 x 675 x 4 = 2916000.&#x6298;&#x7B97;&#x6210;M&#x4E3A;2916000 / 1024 / 1024 = 2.78M&#x3002;&#x4E00;&#x79CD;&#x56FE;&#x7247;&#x5C31;&#x8FD1;3M&#xFF0C;&#x5982;&#x679C;&#x52A0;&#x8F7D;10&#x5F20;&#x6216;&#x8005;100&#x5F20;&#xFF0C;&#x6240;&#x5360;&#x7684;&#x5185;&#x5B58;&#x53EF;&#x60F3;&#x800C;&#x77E5;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#x5C06;&#x5185;&#x5B58;&#x6D88;&#x8017;&#x6B86;&#x5C3D;&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;Android App&#x6765;&#x8BF4;&#x6839;&#x672C;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x4E48;&#x9AD8;&#x6E05;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x5BF9;&#x5BBD;&#x9AD8;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#xFF0C;&#x4EA6;&#x6216;&#x8005;&#x5C06;Config&#x6539;&#x6211;RGB_565&#x3002;&#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x6709;&#x6548;&#x7684;&#x51CF;&#x5C0F;&#x4E86;&#x5185;&#x5B58;&#x7684;&#x5360;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4E0D;&#x5F71;&#x54CD;&#x56FE;&#x7247;&#x7684;&#x6E05;&#x6670;&#x5EA6;&#x7684;&#x5C55;&#x793A;&#x3002;</p>\n<blockquote>\n<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x5982;&#x4F55;&#x901A;&#x8FC7;Bitmap&#x4E0E;BitmapFactory&#x6765;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x5904;&#x7406;</p>\n</blockquote>\n<h2 id=\"Bitmap&#x76F8;&#x5173;\"><a href=\"#Bitmap&#x76F8;&#x5173;\" class=\"headerlink\" title=\"Bitmap&#x76F8;&#x5173;\"></a>Bitmap&#x76F8;&#x5173;</h2><p>&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;Bitmap&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x7684;&#x538B;&#x7F29;&#x5904;&#x7406;&#xFF0C;&#x5B83;&#x4E3B;&#x8981;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;&#x6709;&#x6548;&#x65B9;&#x6CD5;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">status return</th>\n<th style=\"text-align:center\">method name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">boolean</td>\n<td style=\"text-align:center\">compress(Bitmap.CompressFormat format, int quality, OutputStream stream)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(DisplayMetrics display, int[] colors, int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(DisplayMetrics display, int[] colors, int offset, int stride, int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(Bitmap source, int x, int y, int width, int height)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(Bitmap src)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(DisplayMetrics display, int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(Bitmap source, int x, int y, int width, int height, Matrix m, boolean filter)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createBitmap(int[] colors, int offset, int stride, int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitamp</td>\n<td style=\"text-align:center\">createBitmap(int[] colors, int width, int height, Bitmap.Config config)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">createScaledBitmap(Bitmap src, int dstWidth, int dstHeight, boolean filter)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"compress\"><a href=\"#compress\" class=\"headerlink\" title=\"compress\"></a>compress</h3><p>compress&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x56FE;&#x7247;&#x7684;CompressFormat&#x683C;&#x5F0F;&#x4E0E;&#x538B;&#x7F29;&#x767E;&#x5206;&#x6BD4;&#x6765;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5904;&#x7406;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x538B;&#x7F29;&#x7684;&#x56FE;&#x7247;&#x4FDD;&#x5B58;&#x5230;&#x6307;&#x5B9A;&#x7684;outputStream&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x5177;&#x4F53;&#x7528;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">val fs = FileOutputStream(path)</div><div class=\"line\">val out = ByteArrayOutputStream()</div><div class=\"line\">scaleBitmap.compress(Bitmap.CompressFormat.JPEG, 30, out)</div><div class=\"line\">LogUtils.d(&quot;compressBitmap jpeg of byteCount %d.&quot;, out.toByteArray().size)</div><div class=\"line\">fs.write(out.toByteArray())</div><div class=\"line\">fs.close()</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;quality&#x4EE3;&#x8868;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x503C;&#x4E3A;0~100&#xFF0C;&#x503C;&#x8D8A;&#x5C0F;&#x538B;&#x7F29;&#x7684;&#x540E;&#x7684;&#x5927;&#x5C0F;&#x5C31;&#x8D8A;&#x5C0F;&#x3002;&#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#xFF0C;quality&#x4E3A;30&#xFF0C;&#x5219;&#x4EE3;&#x8868;&#x5BF9;&#x539F;&#x56FE;&#x8FDB;&#x884C;&#x538B;&#x7F29;70%&#xFF0C;&#x4FDD;&#x7559;30%&#x3002;&#x540C;&#x65F6;Bitmap.CompressFormat&#x5728;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E86;&#xFF0C;&#x8981;&#x6CE8;&#x610F;&#x4E0D;&#x540C;&#x7684;&#x683C;&#x5F0F;&#x56FE;&#x7247;&#x7684;&#x5C55;&#x793A;&#x6548;&#x679C;&#x4E5F;&#x4E0D;&#x540C;&#xFF0C;&#x4F8B;&#x5982;JPEG&#x7684;&#x683C;&#x5F0F;&#x56FE;&#x7247;&#x662F;&#x6CA1;&#x6709;&#x900F;&#x660E;&#x5EA6;&#x7684;&#x3002;</p>\n<blockquote>\n<p>&#x7279;&#x522B;&#x6CE8;&#x610F;&#x7684;&#xFF1A;&#x5BF9;&#x4E8E;Bitmap.CompressFormat.PNG&#x7C7B;&#x578B;&#x7684;&#x683C;&#x5F0F;&#xFF0C;quality&#x5C06;&#x5931;&#x53BB;&#x6548;&#x679C;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x683C;&#x5F0F;&#x662F;&#x65E0;&#x635F;&#x7684;&#x538B;&#x7F29;&#xFF1B;&#x518D;&#x8005;&#xFF0C;&#x4F7F;&#x7528;compress&#x65B9;&#x6CD5;&#x5E76;&#x4E0D;&#x662F;&#x5BF9;&#x663E;&#x793A;&#x5904;&#x7406;&#x7684;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x4E86;&#x538B;&#x7F29;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x5BF9;&#x539F;&#x56FE;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x540E;&#x4FDD;&#x5B58;&#x5230;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;&#x5E76;&#x4E0D;&#x6539;&#x53D8;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x9014;&#x4F5C;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0B;&#x6B21;&#x52A0;&#x8F7D;&#xFF0C;&#x51CF;&#x5C0F;&#x56FE;&#x7247;&#x5728;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x6240;&#x5360;&#x7684;&#x78C1;&#x76D8;&#x5927;&#x5C0F;&#x3002;</p>\n</blockquote>\n<h3 id=\"createBitmap\"><a href=\"#createBitmap\" class=\"headerlink\" title=\"createBitmap\"></a>createBitmap</h3><p>&#x5BF9;&#x4E8E;createBitmap&#x65B9;&#x6CD5;&#xFF0C;Bitmap&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;9&#x79CD;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x6E90;&#x7684;&#x538B;&#x7F29;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#x3002;&#x5206;&#x522B;&#x6709;&#x901A;&#x8FC7;colors&#x6570;&#x7EC4;&#x3001;Bitmap&#x4E0E;DisplayMetrics&#x7B49;&#x6765;&#x51B3;&#x5B9A;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#x4F7F;&#x7528;colors&#x6570;&#x7EC4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">val colors = intArrayOf(Color.RED, Color.GREEN, Color.BLUE,</div><div class=\"line\">                        Color.GREEN, Color.BLUE, Color.RED,</div><div class=\"line\">                        Color.BLUE, Color.RED, Color.GREEN)</div><div class=\"line\">val displayMetricsBitmap = Bitmap.createBitmap(DisplayMetrics(),colors,3, 3,Bitmap.Config.ARGB_8888)</div><div class=\"line\">LogUtils.d(&quot;displayMetricsBitmap of byteCount %d and rowBytes %d&quot;, displayMetricsBitmap.byteCount, displayMetricsBitmap.rowBytes)</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;3 x 3&#x7684;&#x56FE;&#x7247;&#xFF0C;Config&#x4E3A;ARGB_8888&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x56FE;&#x7247;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5927;&#x5C0F;&#x4E3A;3 x 3 x 4 = 36&#x5B57;&#x8282;&#x3002;&#x800C;&#x56FE;&#x7247;&#x7684;&#x5C55;&#x793A;&#x6548;&#x679C;&#x662F;&#x901A;&#x8FC7;colors&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x989C;&#x8272;&#x4E5F;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;3 x 3 = 9 &#x5206;&#x522B;&#x5BF9;&#x5E94;colors&#x4E2D;&#x7684;9&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x7684;&#x8272;&#x503C;&#x3002;&#x6240;&#x4EE5;colors&#x7684;&#x5927;&#x5C0F;&#x6700;&#x5C0F;&#x5FC5;&#x987B;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;9&#xFF0C;&#x5373;&#x5BBD;*&#x9AD8;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4E3A;&#x4F55;&#x8BF4;&#x6700;&#x5C0F;&#xFF0C;&#x56E0;&#x4E3A;Bitmap&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;offset&#x4E0E;stride&#x53C2;&#x6570;&#x7684;&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x5728;colors&#x4E2D;&#x7684;&#x5F00;&#x59CB;&#x70B9;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x4E0E;&#x53D6;&#x503C;&#x7684;&#x6B65;&#x4F10;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x53D6;&#x503C;&#x70B9;&#x95F4;&#x7684;&#x8DE8;&#x5EA6;&#x3002;</p>\n<p>&#x5728;&#x5B9E;&#x9645;&#x662F;&#x4F7F;&#x7528;createBitmap&#x6700;&#x591A;&#x7684;&#x8FD8;&#x662F;&#x7528;&#x5B83;&#x7684;Bitmap&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5BF9;&#x539F;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x88C1;&#x526A;&#x3002;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x770B;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">//bitmap</div><div class=\"line\">val bitmapBitmap = Bitmap.createBitmap(scaleBitmap, 150, 0, 100, 100)</div><div class=\"line\">image_view?.setImageBitmap(scaleBitmap)</div><div class=\"line\">image_view_text.text = &quot;width: &quot; + scaleBitmap.width + &quot; height: &quot; + scaleBitmap.height</div><div class=\"line\">sub_image_view.setImageBitmap(bitmapBitmap)</div><div class=\"line\">sub_image_view_text.text = &quot;startX: 150 startY: 0\\n&quot; + &quot;width: &quot; + bitmapBitmap.width + &quot; height: &quot; + bitmapBitmap.height</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x53C2;&#x6570;&#x662F;&#x539F;Bitmap&#xFF0C;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5728;&#x539F;Bitmap&#x4E2D;&#x8FDB;&#x884C;&#x7684;&#x3002;&#x5176;&#x4E2D;x = 150&#x3001;y = 0&#x4EE3;&#x8868;&#x4ECE;&#x539F;Bitmap&#x4E2D;&#x7684;&#x5750;&#x6807;&#xFF08;150&#xFF0C;0&#xFF09;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x88C1;&#x526A;;width = 100&#x3001;height = 100&#xFF0C;&#x88C1;&#x526A;&#x540E;&#x8FD4;&#x56DE;&#x65B0;&#x7684;&#x7684;Bitmap&#xFF0C;&#x4E14;&#x5927;&#x5C0F;&#x4E3A;100 x 100&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (!source.isMutable() &amp;&amp; x == 0 &amp;&amp; y == 0 &amp;&amp; width == source.getWidth() &amp;&amp;</div><div class=\"line\">        height == source.getHeight() &amp;&amp; (m == null || m.isIdentity())) {</div><div class=\"line\">    return source;</div><div class=\"line\"> }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x539F;Bitmap&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684;&#xFF0C;&#x540C;&#x65F6;&#x9700;&#x8981;&#x7684;&#x56FE;&#x53C2;&#x6570;&#x4E0E;&#x539F;&#x56FE;&#x7247;&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4F1A;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x539F;Bitmap&#x3002;&#x662F;&#x5426;&#x53EF;&#x53D8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Bitmap.isMutable&#x5224;&#x65AD;&#x3002;</p>\n</blockquote>\n<p>&#x770B;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6240;&#x5C55;&#x793A;&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF1A;<br><img src=\"/2018/03/21/Bitmap&#x7684;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x6C47;&#x603B;/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x6700;&#x540E;&#x901A;&#x8FC7;&#x4F20;&#x9012;Bitmap&#x53C2;&#x6570;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x53C2;&#x6570;Matrix&#xFF0C;&#x5B83;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5BF9;Bitmap&#x8FDB;&#x884C;&#x77E9;&#x9635;&#x53D8;&#x6362;&#x3002;</p>\n<h3 id=\"createScaledBitmap\"><a href=\"#createScaledBitmap\" class=\"headerlink\" title=\"createScaledBitmap\"></a>createScaledBitmap</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x76F8;&#x5BF9;&#x4E0A;&#x9762;&#x4E24;&#x79CD;&#x5C31;&#x7B80;&#x5355;&#x591A;&#x4E86;&#xFF0C;&#x5B83;&#x76EE;&#x7684;&#x662F;&#x5BF9;&#x539F;Bitmap&#x8FDB;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x5BBD;&#x9AD8;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#xFF0C;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x65B0;&#x7684;Bitmap&#x3002;</p>\n<blockquote>\n<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F20;&#x5165;&#x7684;&#x5BBD;&#x9AD8;&#x4E0E;&#x539F;Bitmap&#x76F8;&#x540C;&#xFF0C;&#x5B83;&#x5C06;&#x8FD4;&#x56DE;&#x539F;Bitmap&#x5BF9;&#x8C61;&#x3002;</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">//createScaledBitmap</div><div class=\"line\">val createScaledBitmap = Bitmap.createScaledBitmap(scaleBitmap, 500, 300, false)</div><div class=\"line\">image_view?.setImageBitmap(scaleBitmap)</div><div class=\"line\">image_view_text.text = &quot;width: &quot; + scaleBitmap.width + &quot; height: &quot; + scaleBitmap.height</div><div class=\"line\">sub_image_view.setImageBitmap(createScaledBitmap)</div><div class=\"line\">sub_image_view_text.text = &quot;width: &quot; + createScaledBitmap.width + &quot; height: &quot; + createScaledBitmap.height</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/03/21/Bitmap&#x7684;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x6C47;&#x603B;/2.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x518D;&#x6765;&#x770B;&#x4E0B;&#x5176;&#x5B9E;&#x73B0;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static Bitmap createScaledBitmap(@NonNull Bitmap src, int dstWidth, int dstHeight,</div><div class=\"line\">        boolean filter) {</div><div class=\"line\">    Matrix m = new Matrix();</div><div class=\"line\"> </div><div class=\"line\">    final int width = src.getWidth();</div><div class=\"line\">    final int height = src.getHeight();</div><div class=\"line\">    if (width != dstWidth || height != dstHeight) {</div><div class=\"line\">        final float sx = dstWidth / (float) width;</div><div class=\"line\">        final float sy = dstHeight / (float) height;</div><div class=\"line\">        m.setScale(sx, sy);</div><div class=\"line\">    }</div><div class=\"line\">    return Bitmap.createBitmap(src, 0, 0, width, height, m, filter);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x76EE;&#x4E86;&#x7136;&#xFF0C;&#x5185;&#x90E8;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x5230;&#x4E86;Matrix&#xFF0C;&#x8FD0;&#x7528;Matrix&#x7684;&#x77E5;&#x8BC6;&#x8FDB;&#x884C;&#x5BBD;&#x9AD8;&#x7F29;&#x653E;&#xFF1B;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;&#x524D;&#x9762;&#x6240;&#x5206;&#x6790;&#x7684;createBitmap&#x65B9;&#x6CD5;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x4E86;&#x521D;&#x59CB;&#x70B9;&#xFF08;0&#xFF0C;0&#xFF09;&#x800C;&#x5DF2;&#xFF0C;&#x518D;&#x4F20;&#x5165;&#x539F;Bitmap&#x7684;&#x5BBD;&#x9AD8;&#x4E0E;&#x751F;&#x6210;&#x7684;Matrix&#x3002;&#x56E0;&#x6B64;createBitmap&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x6CE8;&#x610F;&#x70B9;&#x4E5F;&#x662F;&#x5E94;&#x7528;&#x5230;createScaledBitmap&#x4E2D;&#x3002;</p>\n<h2 id=\"BitmapFactory&#x76F8;&#x5173;\"><a href=\"#BitmapFactory&#x76F8;&#x5173;\" class=\"headerlink\" title=\"BitmapFactory&#x76F8;&#x5173;\"></a>BitmapFactory&#x76F8;&#x5173;</h2><p>BitmapFactory&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x7801;Bitmap&#xFF0C;&#x901A;&#x8FC7;&#x4E0D;&#x540C;&#x7684;&#x8D44;&#x6E90;&#x7C7B;&#x578B;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;files&#x3001;streams&#x4E0E;byte-arrays&#x3002;&#x65E2;&#x7136;&#x662F;&#x7EE7;&#x7EED;&#x8D44;&#x6E90;&#x7684;&#x89E3;&#x7801;&#xFF0C;&#x81EA;&#x7136;&#x53EF;&#x4EE5;&#x5728;&#x89E3;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x5904;&#x7406;&#x3002;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x4E3B;&#x8981;&#x89E3;&#x7801;&#x65B9;&#x6CD5;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">status return</th>\n<th style=\"text-align:center\">method name </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeByteArray(byte[] data, int offset, int length, BitmapFactory.Options opts)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeByteArray(byte[] data, int offset, int length)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeFile(String pathName)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeFile(String pathName, BitmapFactory.Options opts)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeFileDescriptor(FileDescriptor fd)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeFileDescriptor(FileDescriptor fd, Rect outPadding, BitmapFactory.Options opts)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeResource(Resources res, int id, BitmapFactory.Options opts)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeResource(Resources res, int id)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeResourceStream(Resources res, TypedValue value, InputStream is, Rect pad, BitmapFactory.Options opts)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeStream(InputStream is)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">static Bitmap</td>\n<td style=\"text-align:center\">decodeStream(InputStream is, Rect outPadding, BitmapFactory.Options opts)</td>\n</tr>\n</tbody>\n</table>\n<p>&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x80FD;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x5206;&#x8FA8;&#x51FA;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x8D44;&#x6E90;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x64CD;&#x4F5C;&#x3002;&#x4F8B;&#x5982;&#xFF1A;decodeByteArray&#x65B9;&#x6CD5;&#x662F;&#x901A;&#x8FC7;byte&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x89E3;&#x6790;&#x6E90;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x89E3;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;offset&#x4E0E;length&#x6765;&#x63A7;&#x5236;&#x89E3;&#x7801;&#x7684;&#x8D77;&#x59CB;&#x70B9;&#x4E0E;&#x89E3;&#x7801;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x80FD;&#x591F;&#x7CBE;&#x786E;&#x63A7;&#x5236;offset&#x4E0E;length&#x4E5F;&#x5C31;&#x80FD;&#x591F;&#x505A;&#x5230;&#x56FE;&#x7247;&#x7684;&#x88C1;&#x526A;&#x6548;&#x679C;&#x3002;decodeFileDescriptor&#x65B9;&#x6CD5;&#x662F;&#x901A;&#x8FC7;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x8FDB;&#x884C;&#x89E3;&#x7801;Bitmap&#x3002;&#x4E00;&#x822C;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x4E0B;&#x9762;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x51E0;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"decodeFile\"><a href=\"#decodeFile\" class=\"headerlink\" title=\"decodeFile\"></a>decodeFile</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x662F;&#x901A;&#x8FC7;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x6765;&#x89E3;&#x7801;&#x51FA;Bitmap</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">//decodeFile</div><div class=\"line\">val decodeFileOptions = BitmapFactory.Options()</div><div class=\"line\">val decodeFileBitmap = BitmapFactory.decodeFile(mRootPath +&quot;bitmap&quot;, decodeFileOptions)</div><div class=\"line\">decodeFileOptions.inSampleSize = 2</div><div class=\"line\">val decodeFileScaleBitmap = BitmapFactory.decodeFile(mRootPath + &quot;bitmap&quot;, decodeFileOptions)</div><div class=\"line\">image_view?.setImageBitmap(decodeFileBitmap)</div><div class=\"line\">image_view_text.text = &quot;width: &quot; + decodeFileBitmap.width + &quot; height: &quot; + decodeFileBitmap.height</div><div class=\"line\">sub_image_view.setImageBitmap(decodeFileScaleBitmap)</div><div class=\"line\">sub_image_view_text.text = &quot;width: &quot; + decodeFileScaleBitmap.width + &quot; height: &quot; + decodeFileScaleBitmap.height</div></pre></td></tr></table></figure>\n<p><img src=\"/2018/03/21/Bitmap&#x7684;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x6C47;&#x603B;/3.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x7247;&#x6BD4;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x7247;&#x5BBD;&#x9AD8;&#x90FD;&#x7F29;&#x5C0F;&#x4E86;&#x4E00;&#x534A;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x4E86;&#x538B;&#x7F29;&#x64CD;&#x4F5C;&#x3002;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x65F6;&#x8BBE;&#x7F6E;&#x4E86;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">decodeFileOptions.inSampleSize = 2</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x5C31;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;BitmapFactory.Options&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x4E0A;&#x9762;&#x7684;&#x8868;&#x53D1;&#x73B0;&#x5927;&#x591A;&#x6570;&#x65B9;&#x6CD5;&#x90FD;&#x6709;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x9879;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x9014;&#x662F;&#x5728;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x5BF9;&#x56FE;&#x7247;&#x7684;&#x539F;&#x6709;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x5927;&#x591A;&#x6570;&#x4EE5;in&#x524D;&#x7F00;&#x5F00;&#x5934;&#xFF0C;&#x4E0B;&#x9762;&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th>type</th>\n<th>name</th>\n<th>description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>boolean</td>\n<td>inJustDecodeBounds</td>\n<td>&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x89E3;&#x7801;&#x540E;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;Bitmap&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;Bitmap&#x5BBD;&#x9AD8;&#x5C06;&#x8FD4;&#x56DE;&#x5230;options.outWidth&#x4E0E;options.outHeight&#x4E2D;&#xFF1B;&#x53CD;&#x4E4B;&#x8FD4;&#x56DE;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x53EA;&#x9700;&#x83B7;&#x53D6;&#x89E3;&#x7801;&#x540E;&#x7684;Bitmap&#x7684;&#x5927;&#x5C0F;&#x3002;</td>\n</tr>\n<tr>\n<td>boolean</td>\n<td>inMutable</td>\n<td>&#x4E3A;true&#xFF0C;&#x4EE3;&#x8868;&#x8FD4;&#x56DE;&#x53EF;&#x53D8;&#x5C5E;&#x6027;&#x7684;Bitmap&#xFF0C;&#x53CD;&#x4E4B;&#x4E0D;&#x53EF;&#x53D8;</td>\n</tr>\n<tr>\n<td>boolean</td>\n<td>inPreferQualityOverSpeed</td>\n<td>&#x4E3A;true&#xFF0C;&#x5C06;&#x5728;&#x89E3;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x727A;&#x7272;&#x89E3;&#x7801;&#x7684;&#x901F;&#x5EA6;&#x6765;&#x83B7;&#x53D6;&#x66F4;&#x9AD8;&#x8D28;&#x91CF;&#x7684;Bitmap</td>\n</tr>\n<tr>\n<td>Bitmap.Config</td>\n<td>inPreferredConfig</td>\n<td>&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;Config&#x6765;&#x8FDB;&#x884C;&#x89E3;&#x7801;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;Bitmap.Config.RGB_565&#x7B49;</td>\n</tr>\n<tr>\n<td>int</td>\n<td>inSampleSize</td>\n<td>&#x5982;&#x679C;&#x503C;&#x5927;&#x4E8E;1&#xFF0C;&#x5728;&#x89E3;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C06;&#x6309;&#x6BD4;&#x4F8B;&#x8FD4;&#x56DE;&#x5360;&#x66F4;&#x5C0F;&#x5185;&#x5B58;&#x7684;Bitmap&#x3002;&#x4F8B;&#x5982;&#x503C;&#x4E3A;2&#xFF0C;&#x5219;&#x5BF9;&#x5BBD;&#x9AD8;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x4E00;&#x534A;&#x3002;</td>\n</tr>\n<tr>\n<td>boolean</td>\n<td>inScaled</td>\n<td>&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x4E14;inDesity&#x4E0E;inTargetDensity&#x90FD;&#x4E0D;&#x4E3A;0&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C06;&#x4F1A;&#x6839;&#x636E;inTargetDensityl&#x6765;&#x7F29;&#x653E;&#xFF0C;&#x5728;drawn&#x4E2D;&#x4E0D;&#x4F9D;&#x9760;&#x4E8E;&#x56FE;&#x7247;&#x81EA;&#x8EAB;&#x7684;&#x7F29;&#x653E;&#x5C5E;&#x6027;&#x3002;</td>\n</tr>\n<tr>\n<td>int</td>\n<td>inDensity</td>\n<td>Bitmap&#x81EA;&#x8EAB;&#x7684;&#x5BC6;&#x5EA6;</td>\n</tr>\n<tr>\n<td>int</td>\n<td>inTargetDensity</td>\n<td>Bitmap drawn&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x5BC6;&#x5EA6;</td>\n</tr>\n</tbody>\n</table>\n<p>&#x6211;&#x4EEC;&#x5728;&#x6765;&#x770B;&#x4E0B;decodeFile&#x7684;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static Bitmap decodeFile(String pathName, Options opts) {</div><div class=\"line\">    validate(opts);</div><div class=\"line\">    Bitmap bm = null;</div><div class=\"line\">    InputStream stream = null;</div><div class=\"line\">    try {</div><div class=\"line\">        stream = new FileInputStream(pathName);</div><div class=\"line\">        bm = decodeStream(stream, null, opts);</div><div class=\"line\">    } catch (Exception e) {</div><div class=\"line\">        /*  do nothing.</div><div class=\"line\">            If the exception happened on open, bm will be null.</div><div class=\"line\">        */</div><div class=\"line\">        Log.e(&quot;BitmapFactory&quot;, &quot;Unable to decode stream: &quot; + e);</div><div class=\"line\">    } finally {</div><div class=\"line\">        if (stream != null) {</div><div class=\"line\">            try {</div><div class=\"line\">                stream.close();</div><div class=\"line\">            } catch (IOException e) {</div><div class=\"line\">                // do nothing here</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    return bm;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5185;&#x90E8;&#x6839;&#x636E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x521B;&#x5EFA;FileInputStream&#xFF0C;&#x6700;&#x7EC8;&#x8C03;&#x7528;decodeStream&#x65B9;&#x6CD5;&#x8FDB;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x3002;</p>\n<h3 id=\"decodeStream-amp-decodeResourceStream\"><a href=\"#decodeStream-amp-decodeResourceStream\" class=\"headerlink\" title=\"decodeStream &amp; decodeResourceStream\"></a>decodeStream &amp; decodeResourceStream</h3><p>&#x81F3;&#x4E8E;decodeStream&#x5185;&#x90E8;&#x5219;&#x662F;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;InputStream&#x7C7B;&#x578B;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x7684;native&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x4E3A;AssetManager.AssetInputStrea&#x7C7B;&#x578B;&#x5219;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nativeDecodeAsset(asset, outPadding, opts);</div></pre></td></tr></table></figure>\n<p>&#x5426;&#x5219;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">nativeDecodeStream(is, tempStorage, outPadding, opts);</div></pre></td></tr></table></figure>\n<p>&#x8FD8;&#x6709;&#x5BF9;&#x5E94;&#x7684;decodeResourceStream&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x4E5F;&#x662F;&#x8C03;&#x7528;&#x4E86;decodeStream.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static Bitmap decodeResourceStream(Resources res, TypedValue value,</div><div class=\"line\">        InputStream is, Rect pad, Options opts) {</div><div class=\"line\">    validate(opts);</div><div class=\"line\">    if (opts == null) {</div><div class=\"line\">        opts = new Options();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    if (opts.inDensity == 0 &amp;&amp; value != null) {</div><div class=\"line\">        final int density = value.density;</div><div class=\"line\">        if (density == TypedValue.DENSITY_DEFAULT) {</div><div class=\"line\">            opts.inDensity = DisplayMetrics.DENSITY_DEFAULT;</div><div class=\"line\">        } else if (density != TypedValue.DENSITY_NONE) {</div><div class=\"line\">            opts.inDensity = density;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    if (opts.inTargetDensity == 0 &amp;&amp; res != null) {</div><div class=\"line\">        opts.inTargetDensity = res.getDisplayMetrics().densityDpi;</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    return decodeStream(is, pad, opts);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>decodeResourceStream&#x5185;&#x90E8;&#x505A;&#x4E86;&#x5BF9;Bitmap&#x7684;&#x5BC6;&#x5EA6;&#x9002;&#x914D;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;decodeStream&#xFF0C;&#x8FD9;&#x6837;decodeStream&#x4E5F;&#x5206;&#x6790;&#x5B8C;&#x6BD5;&#x3002;</p>\n<h3 id=\"decodeResource\"><a href=\"#decodeResource\" class=\"headerlink\" title=\"decodeResource\"></a>decodeResource</h3><p>decodeResource&#x7528;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F20;&#x5165;&#x76F8;&#x5E94;&#x672C;&#x5730;&#x7684;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x5373;&#x53EF;&#xFF0C;&#x9700;&#x8981;&#x7F29;&#x653E;&#x7684;&#x8BDD;&#x914D;&#x7F6E;options&#x53C2;&#x6570;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">val options = BitmapFactory.Options()</div><div class=\"line\">val bitmap = BitmapFactory.decodeResource(resources, R.drawable.yaodaoji, options)</div></pre></td></tr></table></figure>\n<p>&#x968F;&#x4FBF;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static Bitmap decodeResource(Resources res, int id, Options opts) {</div><div class=\"line\">    validate(opts);</div><div class=\"line\">    Bitmap bm = null;</div><div class=\"line\">    InputStream is = null; </div><div class=\"line\">     </div><div class=\"line\">    try {</div><div class=\"line\">        final TypedValue value = new TypedValue();</div><div class=\"line\">        is = res.openRawResource(id, value);</div><div class=\"line\"></div><div class=\"line\">        bm = decodeResourceStream(res, value, is, null, opts);</div><div class=\"line\">    } catch (Exception e) {</div><div class=\"line\">        /*  do nothing.</div><div class=\"line\">            If the exception happened on open, bm will be null.</div><div class=\"line\">            If it happened on close, bm is still valid.</div><div class=\"line\">        */</div><div class=\"line\">    } finally {</div><div class=\"line\">        try {</div><div class=\"line\">            if (is != null) is.close();</div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            // Ignore</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    if (bm == null &amp;&amp; opts != null &amp;&amp; opts.inBitmap != null) {</div><div class=\"line\">        throw new IllegalArgumentException(&quot;Problem decoding into existing bitmap&quot;);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    return bm;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;res.openRawResource(id, value)&#x6765;&#x83B7;&#x53D6;InputStream&#xFF0C;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;decodeResourceStream(res, value, is, null, opts)&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x53C8;&#x56DE;&#x5230;&#x4E86;&#x4E0A;&#x9762;&#x5206;&#x6790;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x53BB;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E2A;&#x603B;&#x7ED3;&#xFF0C;&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x4E3B;&#x8981;&#x4F7F;&#x7528;&#x5230;Bitmap&#x4E0E;BitmapFactory&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x4F7F;&#x7528;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x4E4B;&#x524D;&#x4E5F;&#x8981;&#x5BF9;Bitmap&#x4E2D;&#x7684;CompressFormat&#x4E0E;Config&#xFF1B;BitmapFactory&#x4E2D;&#x7684;BitmapFactory.Options&#x6709;&#x6240;&#x4E86;&#x89E3;&#x3002;&#x7136;&#x540E;&#x518D;&#x7ED3;&#x5408;&#x4ED6;&#x4EEC;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x538B;&#x7F29;&#x3001;&#x88C1;&#x526A;&#x64CD;&#x4F5C;&#x3002;&#x5176;&#x5B9E;&#x53EA;&#x8981;&#x638C;&#x63E1;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x5728;&#x65E5;&#x5E38;&#x7684;&#x4F7F;&#x7528;&#x4E2D;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x5982;&#x6709;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF0C;&#x5E0C;&#x671B;&#x6307;&#x51FA;&#xFF01;</p>\n<p><a href=\"https://github.com/idisfkj/android-api-analysis\" target=\"_blank\" rel=\"external\">&#x70B9;&#x51FB;&#x8DF3;&#x8F6C;&#x5230;&#x9879;&#x76EE;&#x5730;&#x5740;</a></p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/03/21/Bitmap&#x7684;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x6C47;&#x603B;/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"EventBus的工作原理总结","url":"https://www.rousetime.com/2018/02/27/EventBus的工作原理总结/","content":"<h2 id=\"&#x6982;&#x5FF5;\"><a href=\"#&#x6982;&#x5FF5;\" class=\"headerlink\" title=\"&#x6982;&#x5FF5;\"></a>&#x6982;&#x5FF5;</h2><p>EventBus&#x662F;&#x4E00;&#x4E2A;&#x9762;&#x5411;&#x4E8E;Android&#x4E0E;Java&#x7684;&#x5BF9;&#x4E8B;&#x4EF6;&#x8BA2;&#x9605;&#x4E0E;&#x53D1;&#x5E03;&#x7684;&#x5904;&#x7406;&#x7684;&#x4E00;&#x79CD;&#x673A;&#x5236;&#x3002;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x79CD;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x8BE5;&#x9879;&#x76EE;&#x5DF2;&#x7ECF;&#x5F00;&#x6E90;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x5F20;&#x56FE;&#x80FD;&#x591F;&#x5F88;&#x5168;&#x9762;&#x7684;&#x4F53;&#x73B0;&#x5B83;&#x7684;&#x8FD0;&#x884C;&#x3002;</p>\n<p><img src=\"https://raw.githubusercontent.com/greenrobot/EventBus/master/EventBus-Publish-Subscribe.png\" alt=\"\"></p>\n<p>&#x8FD9;&#x91CC;&#x5C06;EventBus&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x5206;&#x4E3A;&#x4E09;&#x6B65;&#x6765;&#x8BF4;&#x660E;</p>\n<ol>\n<li>EventBus&#x7684;&#x6CE8;&#x518C;&#x4E0E;&#x8BA2;&#x9605;</li>\n<li>EventBus&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x5E03;</li>\n<li>EventBus&#x7684;&#x6CE8;&#x9500;</li>\n</ol>\n<h2 id=\"EventBus&#x7684;&#x6CE8;&#x518C;\"><a href=\"#EventBus&#x7684;&#x6CE8;&#x518C;\" class=\"headerlink\" title=\"EventBus&#x7684;&#x6CE8;&#x518C;\"></a>EventBus&#x7684;&#x6CE8;&#x518C;</h2><p>&#x65E2;&#x7136;&#x662F;&#x5BF9;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x8FDB;&#x884C;&#x603B;&#x7ED3;&#xFF0C;&#x90A3;&#x4E48;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8FDB;&#x5165;EventBus&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x5206;&#x6790;</p>\n<blockquote>\n<p>&#x8BE5;&#x6587;&#x7AE0;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x57FA;&#x4E8E;EventBus<code>3.0.0</code>&#x6765;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x8BF4;&#x660E;</p>\n</blockquote>\n<p>&#x5728;&#x4F7F;&#x7528;EventBus&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x5B83;&#x7684;&#x6CE8;&#x518C;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">EventBus.getDefault().register(this)</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;getDefault()&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;EventBus&#x7684;&#x5B9E;&#x4F8B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static EventBus getDefault() {</div><div class=\"line\">    if (defaultInstance == null) {</div><div class=\"line\">        synchronized (EventBus.class) {</div><div class=\"line\">            if (defaultInstance == null) {</div><div class=\"line\">                defaultInstance = new EventBus();</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    return defaultInstance;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x6E90;&#x7801;&#x53D1;&#x73B0;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;singleton pattern(&#x5355;&#x4F8B;&#x6A21;&#x5F0F;)&#xFF0C;&#x4FDD;&#x8BC1;&#x5B9E;&#x4F8B;&#x7684;&#x5168;&#x5C40;&#x5316;&#xFF0C;&#x51CF;&#x5C11;&#x8D44;&#x6E90;&#x7684;&#x5F00;&#x9500;&#x3002;</p>\n<p>&#x8FDB;&#x5165;EventBus&#x7684;&#x6CE8;&#x518C;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void register(Object subscriber) {</div><div class=\"line\">    Class&lt;?&gt; subscriberClass = subscriber.getClass();</div><div class=\"line\">    //&#x83B7;&#x53D6;&#x8BE5;&#x8BA2;&#x9605;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x4E86;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">    List&lt;SubscriberMethod&gt; subscriberMethods = subscriberMethodFinder.findSubscriberMethods(subscriberClass);</div><div class=\"line\">    synchronized (this) {</div><div class=\"line\">        for (SubscriberMethod subscriberMethod : subscriberMethods) {</div><div class=\"line\">            subscribe(subscriber, subscriberMethod);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;<code>subscriberMethodFinder</code>&#x6210;&#x5458;&#x5B57;&#x6BB5;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5B83;&#x7684;findSubscriberMethods&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x7684;&#x65B9;&#x6CD5;&#x6570;&#x7EC4;&#x3002;&#x8F6C;&#x5230;findSubscriberMethods&#x65B9;&#x6CD5;&#x4E2D;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">List&lt;SubscriberMethod&gt; findSubscriberMethods(Class&lt;?&gt; subscriberClass) {</div><div class=\"line\">//&#x901A;&#x8FC7;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x67E5;&#x627E;&#x662F;&#x5426;&#x5B58;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">    List&lt;SubscriberMethod&gt; subscriberMethods = METHOD_CACHE.get(subscriberClass);</div><div class=\"line\">    if (subscriberMethods != null) {</div><div class=\"line\">        return subscriberMethods;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    if (ignoreGeneratedIndex) {</div><div class=\"line\">    //&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x6765;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">        subscriberMethods = findUsingReflection(subscriberClass);</div><div class=\"line\">    } else {</div><div class=\"line\">    //&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#x65B9;&#x5F0F;&#x6765;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">        subscriberMethods = findUsingInfo(subscriberClass);</div><div class=\"line\">    }</div><div class=\"line\">    if (subscriberMethods.isEmpty()) {</div><div class=\"line\">        throw new EventBusException(&quot;Subscriber &quot; + subscriberClass</div><div class=\"line\">                + &quot; and its super classes have no public methods with the @Subscribe annotation&quot;);</div><div class=\"line\">    } else {</div><div class=\"line\">    //&#x5C06;&#x7ED3;&#x679C;&#x52A0;&#x5165;&#x5230;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x4E2D;</div><div class=\"line\">        METHOD_CACHE.put(subscriberClass, subscriberMethods);</div><div class=\"line\">        return subscriberMethods;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x5173;&#x952E;&#x90E8;&#x5206;&#x7684;&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x5199;&#x51FA;&#x6765;&#x4E86;&#x3002;&#x5982;&#x679C;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;&#xFF0C;&#x5219;&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x6839;&#x636E;<code>ignoreGeneratedIndex</code>&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x3002;&#x5176;&#x4E2D;<code>ignoreGeneratedIndex</code>&#x9ED8;&#x8BA4;&#x4E3A;false&#x3002;&#x8BE5;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x5728;EventBus&#x5B9E;&#x4F8B;&#x5316;&#x7684;&#x9002;&#x5408;&#x9ED8;&#x8BA4;&#x8FDB;&#x884C;&#x4E86;&#x8BBE;&#x7F6E;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">EventBus(EventBusBuilder builder) {</div><div class=\"line\">    subscriptionsByEventType = new HashMap&lt;&gt;();</div><div class=\"line\">    typesBySubscriber = new HashMap&lt;&gt;();</div><div class=\"line\">    stickyEvents = new ConcurrentHashMap&lt;&gt;();</div><div class=\"line\">    mainThreadPoster = new HandlerPoster(this, Looper.getMainLooper(), 10);</div><div class=\"line\">    backgroundPoster = new BackgroundPoster(this);</div><div class=\"line\">    asyncPoster = new AsyncPoster(this);</div><div class=\"line\">    indexCount = builder.subscriberInfoIndexes != null ? builder.subscriberInfoIndexes.size() : 0;</div><div class=\"line\">    //&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x6210;&#x5458;&#x5B57;&#x6BB5;&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;</div><div class=\"line\">    subscriberMethodFinder = new SubscriberMethodFinder(builder.subscriberInfoIndexes,</div><div class=\"line\">            builder.strictMethodVerification, builder.ignoreGeneratedIndex);</div><div class=\"line\">    logSubscriberExceptions = builder.logSubscriberExceptions;</div><div class=\"line\">    logNoSubscriberMessages = builder.logNoSubscriberMessages;</div><div class=\"line\">    sendSubscriberExceptionEvent = builder.sendSubscriberExceptionEvent;</div><div class=\"line\">    sendNoSubscriberEvent = builder.sendNoSubscriberEvent;</div><div class=\"line\">    throwSubscriberException = builder.throwSubscriberException;</div><div class=\"line\">    eventInheritance = builder.eventInheritance;</div><div class=\"line\">    executorService = builder.executorService;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x663E;&#x800C;&#x6613;&#x89C1;&#x662F;&#x901A;&#x8FC7;builder&#x6A21;&#x5F0F;&#x6765;&#x914D;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x53C2;&#x6570;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x9700;&#x8981;&#x6539;&#x53D8;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;builder&#x6765;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">EventBus eventBus = EventBus.builder().ignoreGeneratedIndex(true).build();</div><div class=\"line\">eventBus.register(this);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x7D22;&#x5F15;&#x673A;&#x5236;\"><a href=\"#&#x7D22;&#x5F15;&#x673A;&#x5236;\" class=\"headerlink\" title=\"&#x7D22;&#x5F15;&#x673A;&#x5236;\"></a>&#x7D22;&#x5F15;&#x673A;&#x5236;</h3><p>&#x65E2;&#x7136;&#x9ED8;&#x8BA4;&#x662F;false&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x8C03;&#x7528;findUsingInfo&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">private List&lt;SubscriberMethod&gt; findUsingInfo(Class&lt;?&gt; subscriberClass) {</div><div class=\"line\">\t//&#x5B9E;&#x4F8B;&#x5316;findState</div><div class=\"line\">    FindState findState = prepareFindState();</div><div class=\"line\">    //&#x521D;&#x59CB;&#x5316;findState</div><div class=\"line\">    findState.initForSubscriber(subscriberClass);</div><div class=\"line\">    while (findState.clazz != null) {</div><div class=\"line\">    \t//&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x5E76;&#x4FDD;&#x5B58;&#x5728;findState&#x4E2D;</div><div class=\"line\">        findState.subscriberInfo = getSubscriberInfo(findState);</div><div class=\"line\">        if (findState.subscriberInfo != null) {</div><div class=\"line\">            SubscriberMethod[] array = findState.subscriberInfo.getSubscriberMethods();</div><div class=\"line\">            for (SubscriberMethod subscriberMethod : array) {</div><div class=\"line\">                if (findState.checkAdd(subscriberMethod.method, subscriberMethod.eventType)) {</div><div class=\"line\">                \t//&#x4FDD;&#x5B58;&#x8BA2;&#x9605;&#x8005;&#x76F8;&#x5173;&#x7684;&#x6240;&#x6709;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">                    findState.subscriberMethods.add(subscriberMethod);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        } else {</div><div class=\"line\">        \t//&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x8005;&#x76F8;&#x5173;&#x7684;&#x6240;&#x7528;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">            findUsingReflectionInSingleClass(findState);</div><div class=\"line\">        }</div><div class=\"line\">        //&#x8F6C;&#x79FB;&#x5230;&#x7236;&#x7C7B;&#x67E5;&#x627E;&#x6240;&#x6709;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;</div><div class=\"line\">        findState.moveToSuperclass();</div><div class=\"line\">    }</div><div class=\"line\">    //&#x5C06;&#x83B7;&#x53D6;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x91CD;&#x65B0;&#x6DFB;&#x52A0;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;List&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x5E76;&#x91CA;&#x653E;findState&#x4E2D;&#x7684;&#x8D44;&#x6E90;</div><div class=\"line\">    return getMethodsAndRelease(findState);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;&#x5173;&#x952E;&#x5730;&#x65B9;&#x662F;getSubscriberInfo&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x5185;&#x90E8;&#x67E5;&#x627E;&#x662F;&#x4F7F;&#x7528;index&#x7D22;&#x5F15;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x65B9;&#x6CD5;&#x8FD8;&#x662F;&#x6CA1;&#x6709;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x8F6C;&#x5411;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x8FDB;&#x884C;&#x83B7;&#x53D6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">private SubscriberInfo getSubscriberInfo(FindState findState) {</div><div class=\"line\">    if (findState.subscriberInfo != null &amp;&amp; findState.subscriberInfo.getSuperSubscriberInfo() != null) {</div><div class=\"line\">        SubscriberInfo superclassInfo = findState.subscriberInfo.getSuperSubscriberInfo();</div><div class=\"line\">        if (findState.clazz == superclassInfo.getSubscriberClass()) {</div><div class=\"line\">            return superclassInfo;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    if (subscriberInfoIndexes != null) {</div><div class=\"line\">    \t//&#x904D;&#x5386;&#x67E5;&#x627E;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;</div><div class=\"line\">        for (SubscriberInfoIndex index : subscriberInfoIndexes) {</div><div class=\"line\">            SubscriberInfo info = index.getSubscriberInfo(findState.clazz);</div><div class=\"line\">            if (info != null) {</div><div class=\"line\">                return info;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    return null;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;<code>subscriberInfoIndexes</code>&#x5C31;&#x662F;&#x4E4B;&#x524D;builder&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x76F8;&#x540C;&#x5B57;&#x6BB5;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x3002;&#x8BE5;&#x96C6;&#x5408;&#x7684;&#x503C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;builder&#x6765;&#x52A8;&#x6001;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">EventBus eventBus = EventBus.builder()</div><div class=\"line\">    .addIndex(new MyEventBusAppIndex())</div><div class=\"line\">    .addIndex(new MyEventBusLibIndex()).build();</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x5168;&#x90E8;&#x901A;&#x8FC7;index&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x53EA;&#x6709;&#x5728;EventBus <code>3.x</code>&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#x624D;&#x6709;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x673A;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x901F;&#x5EA6;&#x81EA;&#x7136;&#x4F1A;&#x6BD4;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x6765;&#x83B7;&#x53D6;&#x66F4;&#x5FEB;&#x3002;</p>\n<h3 id=\"&#x53CD;&#x5C04;&#x673A;&#x5236;\"><a href=\"#&#x53CD;&#x5C04;&#x673A;&#x5236;\" class=\"headerlink\" title=\"&#x53CD;&#x5C04;&#x673A;&#x5236;\"></a>&#x53CD;&#x5C04;&#x673A;&#x5236;</h3><p>&#x53CD;&#x5C04;&#x673A;&#x5236;&#x83B7;&#x53D6;&#x7684;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x662F;&#x5728;findUsingReflectionInSingleClass&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FDB;&#x5165;&#x77A7;&#x77A7;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void findUsingReflectionInSingleClass(FindState findState) {</div><div class=\"line\">    Method[] methods;</div><div class=\"line\">    try {</div><div class=\"line\">        // This is faster than getMethods, especially when subscribers are fat classes like Activities</div><div class=\"line\">        //&#x83B7;&#x53D6;&#x6CE8;&#x518C;&#x5BF9;&#x8C61;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x6240;&#x4EE5;&#x65B9;&#x6CD5;</div><div class=\"line\">        methods = findState.clazz.getDeclaredMethods();</div><div class=\"line\">    } catch (Throwable th) {</div><div class=\"line\">        // Workaround for java.lang.NoClassDefFoundError, see https://github.com/greenrobot/EventBus/issues/149</div><div class=\"line\">        methods = findState.clazz.getMethods();</div><div class=\"line\">        findState.skipSuperClasses = true;</div><div class=\"line\">    }</div><div class=\"line\">    for (Method method : methods) {</div><div class=\"line\">        int modifiers = method.getModifiers();</div><div class=\"line\">        //&#x83B7;&#x53D6;&#x516C;&#x6709;&#x4E14;&#x975E;&#x62BD;&#x8C61;&#x6216;&#x8005;&#x9759;&#x6001;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">        if ((modifiers &amp; Modifier.PUBLIC) != 0 &amp;&amp; (modifiers &amp; MODIFIERS_IGNORE) == 0) {</div><div class=\"line\">            Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();</div><div class=\"line\">            //&#x83B7;&#x53D6;&#x53EA;&#x8981;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">            if (parameterTypes.length == 1) {</div><div class=\"line\">            \t//&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x6CE8;&#x91CA;&#x7C7B;&#x578B;</div><div class=\"line\">                Subscribe subscribeAnnotation = method.getAnnotation(Subscribe.class);</div><div class=\"line\">                if (subscribeAnnotation != null) {</div><div class=\"line\">                    Class&lt;?&gt; eventType = parameterTypes[0];</div><div class=\"line\">                    if (findState.checkAdd(method, eventType)) {</div><div class=\"line\">                    \t//&#x83B7;&#x53D6;&#x6CE8;&#x91CA;&#x4E2D;&#x7684;ThreadMode&#x7684;&#x503C;</div><div class=\"line\">                        ThreadMode threadMode = subscribeAnnotation.threadMode();</div><div class=\"line\">                        //&#x5C06;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x4FDD;&#x5B58;</div><div class=\"line\">                        findState.subscriberMethods.add(new SubscriberMethod(method, eventType, threadMode,</div><div class=\"line\">                                subscribeAnnotation.priority(), subscribeAnnotation.sticky()));</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">            } else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) {</div><div class=\"line\">                String methodName = method.getDeclaringClass().getName() + &quot;.&quot; + method.getName();</div><div class=\"line\">                throw new EventBusException(&quot;@Subscribe method &quot; + methodName +</div><div class=\"line\">                        &quot;must have exactly 1 parameter but has &quot; + parameterTypes.length);</div><div class=\"line\">            }</div><div class=\"line\">        } else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) {</div><div class=\"line\">            String methodName = method.getDeclaringClass().getName() + &quot;.&quot; + method.getName();</div><div class=\"line\">            throw new EventBusException(methodName +</div><div class=\"line\">                    &quot; is a illegal @Subscribe method: must be public, non-static, and non-abstract&quot;);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5173;&#x952E;&#x6CE8;&#x91CA;&#x5DF2;&#x7ED9;&#x51FA;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x539F;&#x7406;&#x6765;&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x6240;&#x9700;&#x4FE1;&#x606F;&#x3002;&#x540C;&#x65F6;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x4EE5;&#x4FBF;&#x540E;&#x7EED;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x5E03;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E4B;&#x524D;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x6B65;&#x9AA4;&#x5F00;&#x59CB;&#x7684;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">private List&lt;SubscriberMethod&gt; findUsingReflection(Class&lt;?&gt; subscriberClass) {</div><div class=\"line\">    FindState findState = prepareFindState();</div><div class=\"line\">    findState.initForSubscriber(subscriberClass);</div><div class=\"line\">    while (findState.clazz != null) {</div><div class=\"line\">        findUsingReflectionInSingleClass(findState);</div><div class=\"line\">        findState.moveToSuperclass();</div><div class=\"line\">    }</div><div class=\"line\">    return getMethodsAndRelease(findState);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x903B;&#x8F91;&#x8DDF;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x65B9;&#x5F0F;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x662F;&#x5C11;&#x4E86;&#x5BF9;&#x7D22;&#x5F15;&#x65B9;&#x5F0F;&#x7684;&#x67E5;&#x627E;&#x3002;</p>\n<h3 id=\"&#x8BA2;&#x9605;\"><a href=\"#&#x8BA2;&#x9605;\" class=\"headerlink\" title=\"&#x8BA2;&#x9605;\"></a>&#x8BA2;&#x9605;</h3><p>&#x56DE;&#x5230;register&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x6240;&#x4EE5;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x5B8C;&#x6BD5;&#xFF0C;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x8BA2;&#x9605;&#x64CD;&#x4F5C;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x5BF9;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x4FDD;&#x5B58;&#x3002;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x770B;subscribe&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div></pre></td><td class=\"code\"><pre><div class=\"line\">  private void subscribe(Object subscriber, SubscriberMethod subscriberMethod) {</div><div class=\"line\">  \t//&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x4E2D;&#x6240;&#x7533;&#x660E;&#x7684;&#x53C2;&#x6570;class&#x7C7B;&#x578B;</div><div class=\"line\">      Class&lt;?&gt; eventType = subscriberMethod.eventType;</div><div class=\"line\">      //&#x5BF9;&#x8BA2;&#x9605;&#x8005;&#x4E0E;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x65B9;&#x6CD5;&#x5EFA;&#x7ACB;&#x8054;&#x7CFB;&#xFF0C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#x7BA1;&#x7406;</div><div class=\"line\">      Subscription newSubscription = new Subscription(subscriber, subscriberMethod);</div><div class=\"line\">      //&#x901A;&#x8FC7;EventType&#x6765;&#x67E5;&#x627E;&#x5173;&#x8054;&#x7684;subscribetions&#x96C6;&#x5408;</div><div class=\"line\">      CopyOnWriteArrayList&lt;Subscription&gt; subscriptions = subscriptionsByEventType.get(eventType);</div><div class=\"line\">      if (subscriptions == null) {</div><div class=\"line\">          subscriptions = new CopyOnWriteArrayList&lt;&gt;();</div><div class=\"line\">          //&#x4FDD;&#x5B58;&#x65B0;&#x7684;eventType&#x7684;subscriptions</div><div class=\"line\">          subscriptionsByEventType.put(eventType, subscriptions);</div><div class=\"line\">      } else {</div><div class=\"line\">          if (subscriptions.contains(newSubscription)) {</div><div class=\"line\">              throw new EventBusException(&quot;Subscriber &quot; + subscriber.getClass() + &quot; already registered to event &quot;</div><div class=\"line\">                      + eventType);</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\"></div><div class=\"line\">      int size = subscriptions.size();</div><div class=\"line\">      for (int i = 0; i &lt;= size; i++) {</div><div class=\"line\">      \t//&#x6839;&#x636E;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x63D2;&#x5165;&#x5230;subscriptions&#x4E2D;</div><div class=\"line\">          if (i == size || subscriberMethod.priority &gt; subscriptions.get(i).subscriberMethod.priority) {</div><div class=\"line\">              subscriptions.add(i, newSubscription);</div><div class=\"line\">              break;</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\"></div><div class=\"line\">//&#x6839;&#x636E;&#x8BA2;&#x9605;&#x8005;&#x6765;&#x67E5;&#x627E;&#x6240;&#x6709;&#x7684;EventType</div><div class=\"line\">      List&lt;Class&lt;?&gt;&gt; subscribedEvents = typesBySubscriber.get(subscriber);</div><div class=\"line\">      if (subscribedEvents == null) {</div><div class=\"line\">          subscribedEvents = new ArrayList&lt;&gt;();</div><div class=\"line\">          typesBySubscriber.put(subscriber, subscribedEvents);</div><div class=\"line\">      }</div><div class=\"line\">      //&#x6839;&#x636E;&#x8BA2;&#x9605;&#x8005;&#x4FDD;&#x5B58;&#x6240;&#x6709;&#x7684;EventType</div><div class=\"line\">      subscribedEvents.add(eventType);</div><div class=\"line\"></div><div class=\"line\">//&#x5BF9;&#x5177;&#x6709;sticky&#x7C7B;&#x578B;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x53D1;&#x5E03;&#x5904;&#x7406;</div><div class=\"line\">      if (subscriberMethod.sticky) {</div><div class=\"line\">      \t//&#x9A8C;&#x8BC1;eventType&#x4E0E;stickyEvent&#x95F4;&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;true</div><div class=\"line\">          if (eventInheritance) {</div><div class=\"line\">              // Existing sticky events of all subclasses of eventType have to be considered.</div><div class=\"line\">              // Note: Iterating over all events may be inefficient with lots of sticky events,</div><div class=\"line\">              // thus data structure should be changed to allow a more efficient lookup</div><div class=\"line\">              // (e.g. an additional map storing sub classes of super classes: Class -&gt; List&lt;Class&gt;).</div><div class=\"line\">              Set&lt;Map.Entry&lt;Class&lt;?&gt;, Object&gt;&gt; entries = stickyEvents.entrySet();</div><div class=\"line\">              for (Map.Entry&lt;Class&lt;?&gt;, Object&gt; entry : entries) {</div><div class=\"line\">                  Class&lt;?&gt; candidateEventType = entry.getKey();</div><div class=\"line\">                  //&#x5224;&#x65AD;eventType&#x662F;&#x5426;&#x662F;candidateEventType&#x7684;&#x7236;&#x7C7B;&#x6216;&#x8005;&#x540C;&#x4E00;&#x79CD;&#x7C7B;&#x578B;</div><div class=\"line\">                  if (eventType.isAssignableFrom(candidateEventType)) {</div><div class=\"line\">                      Object stickyEvent = entry.getValue();</div><div class=\"line\">                      //&#x53D1;&#x5E03;&#x4E8B;&#x4EF6;</div><div class=\"line\">                      checkPostStickyEventToSubscription(newSubscription, stickyEvent);</div><div class=\"line\">                  }</div><div class=\"line\">              }</div><div class=\"line\">          } else {</div><div class=\"line\">              Object stickyEvent = stickyEvents.get(eventType);</div><div class=\"line\">              //&#x53D1;&#x5E03;&#x4E8B;&#x4EF6;</div><div class=\"line\">              checkPostStickyEventToSubscription(newSubscription, stickyEvent);</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x8BA2;&#x9605;&#x7684;&#x5904;&#x7406;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x79CD;&#x662F;&#x975E;sticky&#x7C7B;&#x578B;&#xFF0C;&#x6839;&#x636E;eventType&#x6765;&#x4FDD;&#x5B58;subscriptions&#x4E0E;&#x6839;&#x636E;subscribe&#x6765;&#x4FDD;&#x5B58;eventType&#xFF1B;&#x53E6;&#x4E00;&#x79CD;&#x662F;sticky&#x7C7B;&#x578B;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x7EC8;&#x90FD;&#x662F;&#x5BF9;&#x4E8B;&#x4EF6;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x53D1;&#x5E03;&#x3002;</p>\n<h2 id=\"EventBus&#x7684;&#x53D1;&#x5E03;\"><a href=\"#EventBus&#x7684;&#x53D1;&#x5E03;\" class=\"headerlink\" title=\"EventBus&#x7684;&#x53D1;&#x5E03;\"></a>EventBus&#x7684;&#x53D1;&#x5E03;</h2><p>EventBus&#x7684;&#x53D1;&#x5E03;&#x662F;&#x8C03;&#x7528;post&#x65B9;&#x6CD5;&#xFF0C;&#x6307;&#x5B9A;&#x53D1;&#x5E03;&#x7684;Event&#x7C7B;&#x578B;&#xFF0C;&#x53EA;&#x8981;&#x8BA2;&#x9605;&#x8005;&#x6301;&#x6709;&#x8BE5;&#x76F8;&#x5173;Event&#x7C7B;&#x578B;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x90FD;&#x80FD;&#x6536;&#x5230;&#x53D1;&#x5E03;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5177;&#x4F53;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">EventBus.getDefault().post(new MyEvent());</div><div class=\"line\">//&#x6216;&#x8005;&#x53D1;&#x5E03;sticky&#x7C7B;&#x578B;&#x7684;event</div><div class=\"line\">EventBus.getDefault().postSticky(new MyEvent());</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;sticky&#x7C7B;&#x578B;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x5E03;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x8FD8;&#x662F;&#x8C03;&#x7528;&#x4E86;post&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x5BF9;sticky event&#x7684;&#x540C;&#x6B65;&#x4FDD;&#x5B58;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void postSticky(Object event) {</div><div class=\"line\">    synchronized (stickyEvents) {</div><div class=\"line\">        stickyEvents.put(event.getClass(), event);</div><div class=\"line\">    }</div><div class=\"line\">    // Should be posted after it is putted, in case the subscriber wants to remove immediately</div><div class=\"line\">    post(event);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x76F4;&#x63A5;&#x770B;post&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">  public void post(Object event) {</div><div class=\"line\">      PostingThreadState postingState = currentPostingThreadState.get();</div><div class=\"line\">      List&lt;Object&gt; eventQueue = postingState.eventQueue;</div><div class=\"line\">      eventQueue.add(event);</div><div class=\"line\"></div><div class=\"line\">//&#x672C;&#x5730;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x6B63;&#x5728;&#x53D1;&#x5E03;event</div><div class=\"line\">      if (!postingState.isPosting) {</div><div class=\"line\">          postingState.isMainThread = isMainThread();</div><div class=\"line\">          postingState.isPosting = true;</div><div class=\"line\">          if (postingState.canceled) {</div><div class=\"line\">              throw new EventBusException(&quot;Internal error. Abort state was not reset&quot;);</div><div class=\"line\">          }</div><div class=\"line\">          try {</div><div class=\"line\">              while (!eventQueue.isEmpty()) {</div><div class=\"line\">              \t//&#x9010;&#x4E00;&#x53D1;&#x5E03;&#x5355;&#x4E2A;event</div><div class=\"line\">                  postSingleEvent(eventQueue.remove(0), postingState);</div><div class=\"line\">              }</div><div class=\"line\">          } finally {</div><div class=\"line\">              postingState.isPosting = false;</div><div class=\"line\">              postingState.isMainThread = false;</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x53D1;&#x5E03;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;currentPostingThreadState&#x5B57;&#x6BB5;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;ThreadLocal&#xFF0C;&#x4FDD;&#x8BC1;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53D1;&#x5E03;&#x961F;&#x5217;&#x5728;&#x8FDB;&#x884C;&#x4E2D;&#x3002;&#x628A;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x53D1;&#x5E03;&#x7684;event&#x52A0;&#x5165;&#x5230;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x4E2D;&#x7684;&#x961F;&#x5F62;&#x4E2D;&#x3002;&#x5BF9;&#x8BE5;&#x961F;&#x5217;&#x4E2D;&#x7684;event&#x8FDB;&#x884C;&#x9010;&#x4E2A;&#x53D6;&#x51FA;&#x53D1;&#x5E03;&#x3002;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x4E3A;postSingleEvent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void postSingleEvent(Object event, PostingThreadState postingState) throws Error {</div><div class=\"line\">    Class&lt;?&gt; eventClass = event.getClass();</div><div class=\"line\">    boolean subscriptionFound = false;</div><div class=\"line\">    //&#x5982;&#x679C;&#x5F00;&#x542F;&#x4E86;event&#x7684;&#x7EE7;&#x627F;&#x673A;&#x5236;</div><div class=\"line\">    if (eventInheritance) {</div><div class=\"line\">    \t//&#x67E5;&#x627E;&#x6240;&#x6709;&#x7684;eventType&#xFF0C;&#x5373;&#x5305;&#x62EC;&#x5B83;&#x7684;&#x7236;&#x7C7B;&#x4E0E;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;</div><div class=\"line\">        List&lt;Class&lt;?&gt;&gt; eventTypes = lookupAllEventTypes(eventClass);</div><div class=\"line\">        int countTypes = eventTypes.size();</div><div class=\"line\">        for (int h = 0; h &lt; countTypes; h++) {</div><div class=\"line\">            Class&lt;?&gt; clazz = eventTypes.get(h);</div><div class=\"line\">            //&#x53EA;&#x8981;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;eventType&#x88AB;&#x627E;&#x5230;&#x76F8;&#x5E94;&#x7684;subscription&#xFF0C;&#x5C31;&#x4E3A;true</div><div class=\"line\">            subscriptionFound |= postSingleEventForEventType(event, postingState, clazz);</div><div class=\"line\">        }</div><div class=\"line\">    } else {</div><div class=\"line\">    \t//&#x6807;&#x8BC6;&#x8BE5;eventType&#x662F;&#x5426;&#x6709;&#x76F8;&#x5E94;&#x7684;subscription</div><div class=\"line\">        subscriptionFound = postSingleEventForEventType(event, postingState, eventClass);</div><div class=\"line\">    }</div><div class=\"line\">    //&#x5982;&#x679C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;event</div><div class=\"line\">    if (!subscriptionFound) {</div><div class=\"line\">        if (logNoSubscriberMessages) {</div><div class=\"line\">            logger.log(Level.FINE, &quot;No subscribers registered for event &quot; + eventClass);</div><div class=\"line\">        }</div><div class=\"line\">        if (sendNoSubscriberEvent &amp;&amp; eventClass != NoSubscriberEvent.class &amp;&amp;</div><div class=\"line\">                eventClass != SubscriberExceptionEvent.class) {</div><div class=\"line\">            post(new NoSubscriberEvent(this, event));</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5173;&#x952E;&#x4EE3;&#x7801;&#x662F;postSingleEventForEventType&#x65B9;&#x6CD5;&#xFF0C;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;subscriptions&#xFF0C;&#x5373;&#x6240;&#x4EE5;&#x4E0E;&#x8BE5;eventType&#x76F8;&#x5173;&#x7684;&#x8BA2;&#x9605;&#x8005;&#x4E2D;&#x7684;&#x8BA2;&#x9605;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">private boolean postSingleEventForEventType(Object event, PostingThreadState postingState, Class&lt;?&gt; eventClass) {</div><div class=\"line\">    CopyOnWriteArrayList&lt;Subscription&gt; subscriptions;</div><div class=\"line\">    synchronized (this) {</div><div class=\"line\">    \t//&#x901A;&#x8FC7;eventType&#x6765;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;subscriptions</div><div class=\"line\">        subscriptions = subscriptionsByEventType.get(eventClass);</div><div class=\"line\">    }</div><div class=\"line\">    if (subscriptions != null &amp;&amp; !subscriptions.isEmpty()) {</div><div class=\"line\">        for (Subscription subscription : subscriptions) {</div><div class=\"line\">            postingState.event = event;</div><div class=\"line\">            postingState.subscription = subscription;</div><div class=\"line\">            boolean aborted = false;</div><div class=\"line\">            try {</div><div class=\"line\">            \t//&#x53D1;&#x5E03;</div><div class=\"line\">                postToSubscription(subscription, event, postingState.isMainThread);</div><div class=\"line\">                aborted = postingState.canceled;</div><div class=\"line\">            } finally {</div><div class=\"line\">                postingState.event = null;</div><div class=\"line\">                postingState.subscription = null;</div><div class=\"line\">                postingState.canceled = false;</div><div class=\"line\">            }</div><div class=\"line\">            if (aborted) {</div><div class=\"line\">                break;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        return true;</div><div class=\"line\">    }</div><div class=\"line\">    return false;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8BE5;&#x65B9;&#x6CD5;&#x505A;&#x7684;&#x5C31;&#x662F;&#x4ECE;subscriptionsByEventType&#x4E2D;&#x627E;&#x5230;&#x5BF9;&#x5E94;eventType&#x7684;subscriptions&#xFF0C;&#x7136;&#x540E;&#x8F6C;&#x5165;&#x5230;postToSubscription&#x65B9;&#x6CD5;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void postToSubscription(Subscription subscription, Object event, boolean isMainThread) {</div><div class=\"line\">    switch (subscription.subscriberMethod.threadMode) {</div><div class=\"line\">        case POSTING:</div><div class=\"line\">        \t//&#x8C03;&#x7528;&#x8BA2;&#x9605;&#x8005;&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">            invokeSubscriber(subscription, event);</div><div class=\"line\">            break;</div><div class=\"line\">        case MAIN:</div><div class=\"line\">        \t//&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;</div><div class=\"line\">            if (isMainThread) {</div><div class=\"line\">            \t//&#x8C03;&#x7528;&#x8BA2;&#x9605;&#x8005;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">                invokeSubscriber(subscription, event);</div><div class=\"line\">            } else {</div><div class=\"line\">            \t//&#x52A0;&#x5165;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x8FDB;&#x884C;&#x5206;&#x53D1;</div><div class=\"line\">                mainThreadPoster.enqueue(subscription, event);</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\">        case MAIN_ORDERED:</div><div class=\"line\">            if (mainThreadPoster != null) {</div><div class=\"line\">            //&#x52A0;&#x5165;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x8FDB;&#x884C;&#x5206;&#x53D1;</div><div class=\"line\">                mainThreadPoster.enqueue(subscription, event);</div><div class=\"line\">            } else {</div><div class=\"line\">                // temporary: technically not correct as poster not decoupled from subscriber</div><div class=\"line\">                //&#x8C03;&#x7528;&#x8BA2;&#x9605;&#x8005;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">                invokeSubscriber(subscription, event);</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\">        case BACKGROUND:</div><div class=\"line\">            if (isMainThread) {</div><div class=\"line\">            \t//&#x52A0;&#x5165;&#x5230;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x8FDB;&#x884C;&#x5206;&#x53D1;</div><div class=\"line\">                backgroundPoster.enqueue(subscription, event);</div><div class=\"line\">            } else {</div><div class=\"line\">            \t//&#x8C03;&#x7528;&#x8BA2;&#x9605;&#x8005;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;</div><div class=\"line\">                invokeSubscriber(subscription, event);</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\">        case ASYNC:</div><div class=\"line\">        \t//&#x52A0;&#x5165;&#x5230;&#x5F02;&#x6B65;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x8FDB;&#x884C;&#x5206;&#x53D1;</div><div class=\"line\">            asyncPoster.enqueue(subscription, event);</div><div class=\"line\">            break;</div><div class=\"line\">        default:</div><div class=\"line\">            throw new IllegalStateException(&quot;Unknown thread mode: &quot; + subscription.subscriberMethod.threadMode);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;threadMode&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5206;&#x522B;&#x4E3A;</p>\n<ul>\n<li>POSTING&#xFF1A;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</li>\n<li>MAIN&#xFF1A;&#x4E3B;&#x7EBF;&#x7A0B;</li>\n<li>MAIN_ORDERED&#xFF1A;&#x4E3B;&#x7EBF;&#x7A0B;&#x6392;&#x961F;&#x5206;&#x53D1;</li>\n<li>BACKGROUND&#xFF1A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;</li>\n<li>ASYNC&#xFF1A;&#x5F02;&#x6B65;&#x7EBF;&#x7A0B;&#x6C60;</li>\n</ul>\n<p>&#x4E0D;&#x7BA1;&#x662F;&#x6392;&#x961F;&#x5206;&#x53D1;&#x8FD8;&#x662F;&#x76F4;&#x63A5;&#x5206;&#x53D1;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x8C03;&#x7528;invokeSubscriber&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">void invokeSubscriber(Subscription subscription, Object event) {</div><div class=\"line\">    try {</div><div class=\"line\">    \t//&#x5229;&#x7528;&#x57FA;&#x672C;&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x6765;&#x8C03;&#x7528;&#x8BA2;&#x9605;&#x8005;&#x4E2D;&#x7684;&#x5BF9;&#x4E8E;&#x65B9;&#x6CD5;</div><div class=\"line\">        subscription.subscriberMethod.method.invoke(subscription.subscriber, event);</div><div class=\"line\">    } catch (InvocationTargetException e) {</div><div class=\"line\">        handleSubscriberException(subscription, event, e.getCause());</div><div class=\"line\">    } catch (IllegalAccessException e) {</div><div class=\"line\">        throw new IllegalStateException(&quot;Unexpected exception&quot;, e);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x7EC8;&#x7684;&#x53D1;&#x5E03;&#x5B9E;&#x73B0;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x53CD;&#x5C04;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x6765;&#x5B9A;&#x4E49;&#x8BA2;&#x9605;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5230;&#x8FD9;&#x91CC;EventBus&#x7684;&#x53D1;&#x5E03;&#x8FC7;&#x7A0B;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x8FDB;&#x5165;&#x6700;&#x540E;&#x7684;EventBus&#x7684;&#x6CE8;&#x9500;&#x3002;</p>\n<h2 id=\"EventBus&#x7684;&#x6CE8;&#x9500;\"><a href=\"#EventBus&#x7684;&#x6CE8;&#x9500;\" class=\"headerlink\" title=\"EventBus&#x7684;&#x6CE8;&#x9500;\"></a>EventBus&#x7684;&#x6CE8;&#x9500;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">public synchronized void unregister(Object subscriber) {</div><div class=\"line\">\t//&#x901A;&#x8FC7;&#x8BA2;&#x9605;&#x8005;&#x67E5;&#x627E;&#x5230;&#x6240;&#x6709;&#x7684;eventType</div><div class=\"line\">    List&lt;Class&lt;?&gt;&gt; subscribedTypes = typesBySubscriber.get(subscriber);</div><div class=\"line\">    if (subscribedTypes != null) {</div><div class=\"line\">        for (Class&lt;?&gt; eventType : subscribedTypes) {</div><div class=\"line\">        \t//&#x6CE8;&#x9500;&#x6240;&#x6709;&#x7684;subscriptions</div><div class=\"line\">            unsubscribeByEventType(subscriber, eventType);</div><div class=\"line\">        }</div><div class=\"line\">        //&#x5220;&#x9664;&#x6CE8;&#x9500;&#x7684;&#x8BA2;&#x9605;&#x8005;</div><div class=\"line\">        typesBySubscriber.remove(subscriber);</div><div class=\"line\">    } else {</div><div class=\"line\">        logger.log(Level.WARNING, &quot;Subscriber to unregister was not registered before: &quot; + subscriber.getClass());</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x590D;&#x6742;&#x7684;&#x90FD;&#x5DF2;&#x7ECF;&#x5206;&#x6790;&#x5B8C;&#x4E86;&#xFF0C;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;EventBus&#x7684;&#x6CE8;&#x9500;&#x5C31;&#x7B80;&#x5355;&#x591A;&#x4E86;&#xFF0C;&#x65E0;&#x975E;&#x5220;&#x9664;&#x5BF9;&#x4E8E;&#x7684;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#x3002;&#x5728;unregister&#x4E2D;&#x9996;&#x5148;&#x901A;&#x8FC7;typesBySubscriber&#x627E;&#x5230;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x6240;&#x4EE5;eventType&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;unsubscribeByEventType&#x65B9;&#x6CD5;&#x6765;&#x5220;&#x9664;&#x6240;&#x6709;&#x7684;subscriptions&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x8BA2;&#x9605;&#x8005;&#x4ECE;typesBySubscriber&#x4E2D;&#x79FB;&#x9664;&#x3002;&#x90A3;&#x4E48;&#x6700;&#x540E;&#x518D;&#x6765;&#x770B;&#x4E0B;unsubscribeByEventType&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void unsubscribeByEventType(Object subscriber, Class&lt;?&gt; eventType) {</div><div class=\"line\">\t//&#x901A;&#x8FC7;eventType&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;subscriptions</div><div class=\"line\">    List&lt;Subscription&gt; subscriptions = subscriptionsByEventType.get(eventType);</div><div class=\"line\">    if (subscriptions != null) {</div><div class=\"line\">        int size = subscriptions.size();</div><div class=\"line\">        //&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;subscription</div><div class=\"line\">        for (int i = 0; i &lt; size; i++) {</div><div class=\"line\">            Subscription subscription = subscriptions.get(i);</div><div class=\"line\">            if (subscription.subscriber == subscriber) {</div><div class=\"line\">            \t//&#x8BBE;&#x7F6E;subscription&#x7684;&#x72B6;&#x6001;&#x4E3A;&#x975E;&#x6D3B;&#x8DC3;&#x72B6;&#x6001;&#xFF0C;&#x4FDD;&#x8BC1;&#x6B63;&#x5728;&#x4E8B;&#x4EF6;&#x5206;&#x53D1;&#x65F6;&#xFF0C;&#x8BE5;subscription&#x4E0D;&#x88AB;&#x5206;&#x53D1;</div><div class=\"line\">                subscription.active = false;</div><div class=\"line\">                //&#x5220;&#x9664;</div><div class=\"line\">                subscriptions.remove(i);</div><div class=\"line\">                i--;</div><div class=\"line\">                size--;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x903B;&#x8F91;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x66F4;&#x65B0;subscriptionsByEventType&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C06;&#x6CE8;&#x9500;&#x7684;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x79FB;&#x9664;&#x3002;&#x5230;&#x8FD9;&#x91CC;EventBus&#x7684;&#x6CE8;&#x9500;&#x4E5F;&#x5206;&#x6790;&#x5B8C;&#x6BD5;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>EventBus&#x7684;&#x4E3B;&#x8981;&#x6D41;&#x7A0B;&#x662F;&#xFF1A;&#x5BF9;&#x9700;&#x8981;&#x8BA2;&#x9605;&#x7684;&#x7C7B;&#x8FDB;&#x884C;register&#xFF0C;&#x5728;register&#x8FC7;&#x7A0B;&#x4E2D;&#x6839;&#x636E;ignoreGeneratedIndex&#x5B57;&#x6BB5;&#x6765;&#x5206;&#x522B;&#x8FDB;&#x884C;index&#x7D22;&#x5F15;&#x6216;&#x8005;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x83B7;&#x53D6;&#x8BA2;&#x9605;&#x8005;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4FE1;&#x606F;&#xFF0C;&#x53E6;&#x5916;&#x5982;&#x679C;index&#x7D22;&#x5F15;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x83B7;&#x53D6;&#x5230;&#x5BF9;&#x4E8E;&#x7684;&#x65B9;&#x6CD5;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x8FD8;&#x662F;&#x4F1A;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x4FDD;&#x5E95;&#x83B7;&#x53D6;&#xFF1B;&#x7136;&#x540E;&#x5C31;&#x662F;subscribe&#xFF0C;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x4FE1;&#x606F;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#xFF1B;&#x8FDB;&#x4E00;&#x6B65;&#x5C31;&#x662F;post&#xFF0C;&#x4ECE;&#x4FDD;&#x5B58;&#x7684;&#x65B9;&#x6CD5;&#x4FE1;&#x606F;&#x4E2D;&#x8FDB;&#x884C;&#x5339;&#x914D;&#x5230;&#x5BF9;&#x4E8E;&#x7684;event&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x7684;invoke&#x8C03;&#x7528;&#x5339;&#x914D;&#x7684;&#x65B9;&#x6CD5;&#xFF1B;&#x6700;&#x540E;&#x5BF9;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x8BA2;&#x9605;&#x8005;&#x8FDB;&#x884C;&#x6CE8;&#x9500;&#xFF0C;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x3002;</p>\n<h2 id=\"&#x5173;&#x6CE8;\"><a href=\"#&#x5173;&#x6CE8;\" class=\"headerlink\" title=\"&#x5173;&#x6CE8;\"></a>&#x5173;&#x6CE8;</h2><p><img src=\"/2018/02/27/EventBus&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x603B;&#x7ED3;/wx.jpg\" alt=\"&#x602A;&#x8C08;&#x65F6;&#x95F4;&#x5230;&#x4E86;\"></p>\n"},{"title":"Fresco源码分析之Producer","url":"https://www.rousetime.com/2017/12/28/Fresco源码分析之Producer/","content":"<p>Fresco&#x6709;&#x4E09;&#x7EA7;&#x7F13;&#x5B58;&#xFF0C;&#x5206;&#x522B;&#x4E3A;Bitmap&#x7F13;&#x5B58;&#x3001;&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E09;&#x7EA7;&#x7F13;&#x5B58;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x8BF7;&#x6C42;&#x7684;&#x56FE;&#x7247;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x8D70;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8FD9;&#x6761;&#x8DEF;&#x3002;&#x90A3;&#x4E48;Fresco&#x53C8;&#x662F;&#x600E;&#x4E48;&#x7BA1;&#x7406;&#x8FD9;&#x4E9B;&#x7F13;&#x5B58;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x5982;&#x4F55;&#x4ECE;&#x8FD9;&#x4E9B;&#x6B65;&#x9AA4;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x7EC8;&#x7684;Result&#x5E76;&#x4E14;&#x8FD4;&#x56DE;&#x7ED9;UI&#x5C42;&#x7684;&#x5462;&#xFF1F;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8BE5;Producer&#x51FA;&#x573A;&#x4E86;&#x3002;</p>\n<h2 id=\"Producer\"><a href=\"#Producer\" class=\"headerlink\" title=\"Producer\"></a>Producer</h2><p>&#x9996;&#x5148;Producer&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x5185;&#x90E8;&#x5C31;&#x4E00;&#x4E2A;&#x5F85;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;produceResults</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface Producer&lt;T&gt; {</div><div class=\"line\"> </div><div class=\"line\">  /**</div><div class=\"line\">   * Start producing results for given context. Provided consumer is notified whenever progress is</div><div class=\"line\">   * made (new value is ready or error occurs).</div><div class=\"line\">   * @param consumer</div><div class=\"line\">   * @param context</div><div class=\"line\">   */</div><div class=\"line\">  void produceResults(Consumer&lt;T&gt; consumer, ProducerContext context);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Producer&#x4E3B;&#x8981;&#x7528;&#x6765;&#x6267;&#x884C;&#x5BF9;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x83B7;&#x53D6;&#x7684;&#x591A;&#x6837;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x7F51;&#x7EDC;&#x65B9;&#x5F0F;&#x3001;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x65B9;&#x5F0F;&#x3001;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x65B9;&#x5F0F;&#x3001;&#x89E3;&#x7801;&#x65B9;&#x5F0F;&#x4E0E;&#x4E00;&#x4E9B;&#x65CB;&#x8F6C;&#x53D8;&#x6362;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x91CC;&#x7684;Consumer&#x4E3B;&#x8981;&#x4F5C;&#x4E3A;&#x56DE;&#x8C03;&#xFF0C;&#x7531;&#x4E8E;Producer&#x591A;&#x6837;&#x65B9;&#x5F0F;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x662F;&#x901A;&#x8FC7;&#x5185;&#x90E8;&#x9012;&#x5F52;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x9012;&#x5F52;&#x56DE;&#x8C03;&#x5904;&#x7406;&#x662F;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#xFF1B;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;&#x5185;&#x90E8;&#x9012;&#x5F52;&#x65F6;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x7684;&#x4F20;&#x9012;&#xFF0C;&#x5219;&#x662F;&#x901A;&#x8FC7;ProducerContext&#x6765;&#x8FDB;&#x884C;&#x3002;ProducerContext&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x63D0;&#x4F9B;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;&#x7684;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"Result&#x5904;&#x7406;\"><a href=\"#Result&#x5904;&#x7406;\" class=\"headerlink\" title=\"Result&#x5904;&#x7406;\"></a>Result&#x5904;&#x7406;</h2><p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x6700;&#x7EC8;&#x7684;Producer&#x8FD4;&#x56DE;&#x7684;Result&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x3002;&#x770B;&#x4E0B;&#x5B83;&#x662F;&#x5982;&#x679C;&#x5C06;&#x6570;&#x636E;&#x4F20;&#x9012;&#x7ED9;UI&#x5C42;&#xFF0C;&#x4F7F;&#x5F97;UI&#x66F4;&#x65B0;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#x89C6;&#x56FE;&#x3002;</p>\n<p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x5173;&#x4E8E;Controller&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#xFF0C;&#x63D0;&#x5230;&#x5BF9;&#x4E8E;DataSource&#x662F;&#x901A;&#x8FC7;ImagePipeline&#x4E2D;&#x7684;fetchDecodeImage&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x91CD;&#x6E29;&#x5B83;&#x7684;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public DataSource&lt;CloseableReference&lt;CloseableImage&gt;&gt; fetchDecodedImage(</div><div class=\"line\">    ImageRequest imageRequest,</div><div class=\"line\">    Object callerContext,</div><div class=\"line\">    ImageRequest.RequestLevel lowestPermittedRequestLevelOnSubmit) {</div><div class=\"line\">  try {</div><div class=\"line\">    Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; producerSequence =</div><div class=\"line\">        mProducerSequenceFactory.getDecodedImageProducerSequence(imageRequest);</div><div class=\"line\">    return submitFetchRequest(</div><div class=\"line\">        producerSequence,</div><div class=\"line\">        imageRequest,</div><div class=\"line\">        lowestPermittedRequestLevelOnSubmit,</div><div class=\"line\">        callerContext);</div><div class=\"line\">  } catch (Exception exception) {</div><div class=\"line\">    return DataSources.immediateFailedDataSource(exception);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5982;&#x613F;&#x770B;&#x5230;&#x4E86;Producer&#xFF0C;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x9012;&#x5F52;&#x5148;&#x4E0D;&#x770B;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E0B;&#x4E00;&#x6B65;submitFetchRequest&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">private &lt;T&gt; DataSource&lt;CloseableReference&lt;T&gt;&gt; submitFetchRequest(</div><div class=\"line\">    Producer&lt;CloseableReference&lt;T&gt;&gt; producerSequence,</div><div class=\"line\">    ImageRequest imageRequest,</div><div class=\"line\">    ImageRequest.RequestLevel lowestPermittedRequestLevelOnSubmit,</div><div class=\"line\">    Object callerContext) {</div><div class=\"line\">  final RequestListener requestListener = getRequestListenerForRequest(imageRequest);</div><div class=\"line\"> </div><div class=\"line\">  try {</div><div class=\"line\">    ImageRequest.RequestLevel lowestPermittedRequestLevel =</div><div class=\"line\">        ImageRequest.RequestLevel.getMax(</div><div class=\"line\">            imageRequest.getLowestPermittedRequestLevel(),</div><div class=\"line\">            lowestPermittedRequestLevelOnSubmit);</div><div class=\"line\">    SettableProducerContext settableProducerContext = new SettableProducerContext(</div><div class=\"line\">        imageRequest,</div><div class=\"line\">        generateUniqueFutureId(),</div><div class=\"line\">        requestListener,</div><div class=\"line\">        callerContext,</div><div class=\"line\">        lowestPermittedRequestLevel,</div><div class=\"line\">      /* isPrefetch */ false,</div><div class=\"line\">        imageRequest.getProgressiveRenderingEnabled() ||</div><div class=\"line\">            imageRequest.getMediaVariations() != null ||</div><div class=\"line\">            !UriUtil.isNetworkUri(imageRequest.getSourceUri()),</div><div class=\"line\">        imageRequest.getPriority());</div><div class=\"line\">    return CloseableProducerToDataSourceAdapter.create(</div><div class=\"line\">        producerSequence,</div><div class=\"line\">        settableProducerContext,</div><div class=\"line\">        requestListener);</div><div class=\"line\">  } catch (Exception exception) {</div><div class=\"line\">    return DataSources.immediateFailedDataSource(exception);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x8BA9;&#x6211;&#x4EEC;&#x5B9A;&#x4F4D;&#x5230;SettableProducerContext&#xFF0C;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;ProducerContext&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x6765;&#x5BF9;producerSequence&#x7684;&#x5185;&#x90E8;&#x9012;&#x5F52;&#x7684;&#x6570;&#x636E;&#x4F20;&#x9012;&#x3002;&#x4F8B;&#x5982;&#xFF1A;ImageRequest&#x3001;Id&#x3001;ProducerListener&#x4E0E;RequestLevel&#x7B49;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x771F;&#x6B63;&#x7684;DataSource&#x7684;&#x521B;&#x5EFA;CloseableProducerToDataSourceAdapter.creat()&#x3002;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;AbstractProducerToDataSourceAdapter&#xFF0C;&#x5B83;&#x7684;&#x7236;&#x7C7B;AbstractDataSource&#x5B9E;&#x73B0;&#x4E86;DataSource&#x63A5;&#x53E3;&#x3002;&#x5728;AbstractProducerToDataSourceAdapter&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x80FD;&#x591F;&#x627E;&#x5230;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected AbstractProducerToDataSourceAdapter(</div><div class=\"line\">    Producer&lt;T&gt; producer,</div><div class=\"line\">    SettableProducerContext settableProducerContext,</div><div class=\"line\">    RequestListener requestListener) {</div><div class=\"line\">  mSettableProducerContext = settableProducerContext;</div><div class=\"line\">  mRequestListener = requestListener;</div><div class=\"line\">  mRequestListener.onRequestStart(</div><div class=\"line\">      settableProducerContext.getImageRequest(),</div><div class=\"line\">      mSettableProducerContext.getCallerContext(),</div><div class=\"line\">      mSettableProducerContext.getId(),</div><div class=\"line\">      mSettableProducerContext.isPrefetch());</div><div class=\"line\">  //PostprocessedBitmapMemoryCacheProducer</div><div class=\"line\">  producer.produceResults(createConsumer(), settableProducerContext);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>settableProducerContext&#x6570;&#x636E;&#x4F20;&#x9012;&#x4F7F;&#x7528;&#x7684;&#x51FA;&#x795E;&#x5165;&#x5316;&#x3002;&#x8C03;&#x7528;&#x4E86;Producer&#x7684;produceResults&#x65B9;&#x6CD5;&#xFF0C;&#x5F00;&#x542F;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x5404;&#x4E2A;Producer&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;Producer&#x7684;produceResults&#x65B9;&#x6CD5;&#x4E2D;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#xFF0C;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x4E0B;&#x4E00;&#x4E2A;Producer&#x7684;produceResults&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x7EC8;&#x901A;&#x8FC7;Consumer&#x56DE;&#x8C03;&#x5230;&#x6700;&#x521D;&#x7684;Producer&#x4E2D;&#xFF0C;&#x5373;createConsumer()&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Consumer&lt;T&gt; createConsumer() {</div><div class=\"line\">  return new BaseConsumer&lt;T&gt;() {</div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onNewResultImpl(@Nullable T newResult, @Status int status) {</div><div class=\"line\">      AbstractProducerToDataSourceAdapter.this.onNewResultImpl(newResult, status);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onFailureImpl(Throwable throwable) {</div><div class=\"line\">      AbstractProducerToDataSourceAdapter.this.onFailureImpl(throwable);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onCancellationImpl() {</div><div class=\"line\">      AbstractProducerToDataSourceAdapter.this.onCancellationImpl();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onProgressUpdateImpl(float progress) {</div><div class=\"line\">      AbstractProducerToDataSourceAdapter.this.setProgress(progress);</div><div class=\"line\">    }</div><div class=\"line\">  };</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;createConsumer()&#x4E2D;&#x5206;&#x522B;&#x8C03;&#x7528;&#x4E86;onNewResultImpl&#x3001;onFailureImpl&#x3001;setProgress&#x4E0E;onCancellationImpl&#x65B9;&#x6CD5;&#x3002;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x6210;&#x529F;&#x7684;&#x56DE;&#x8C03;&#x3001;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;&#x3001;&#x8BF7;&#x6C42;&#x8FDB;&#x5EA6;&#x56DE;&#x8C03;&#x4E0E;&#x8BF7;&#x6C42;&#x53D6;&#x6D88;&#x56DE;&#x8C03;&#x3002;&#x5BF9;&#x4E8E;&#x524D;&#x4E09;&#x56DE;&#x8C03;&#x90FD;&#x4F1A;&#x89E6;&#x53D1;AbstractDataSource&#x4E2D;&#x7684;notifyDataSubscribers()&#x65B9;&#x6CD5;&#x3002;&#x4F8B;&#x5982;onNewResultImpl&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void onNewResultImpl(@Nullable T result, int status) {</div><div class=\"line\">  boolean isLast = BaseConsumer.isLast(status);</div><div class=\"line\">  //setResult&#x5C06;&#x7ED3;&#x679C;&#x4F20;&#x5165;AbstractDataSource&#x4E2D;</div><div class=\"line\">  if (super.setResult(result, isLast)) {</div><div class=\"line\">    if (isLast) {</div><div class=\"line\">      mRequestListener.onRequestSuccess(</div><div class=\"line\">          mSettableProducerContext.getImageRequest(),</div><div class=\"line\">          mSettableProducerContext.getId(),</div><div class=\"line\">          mSettableProducerContext.isPrefetch());</div><div class=\"line\">    }</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8C03;&#x7528;&#x4E86;&#x7236;&#x7C7B;&#x7684;super.setResult()&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected boolean setResult(@Nullable T value, boolean isLast) {</div><div class=\"line\">  //&#x5C06;&#x4ECE;Producer&#x4E2D;&#x83B7;&#x53D6;&#x90FD;&#x7684;&#x6570;&#x636E;&#x6E90;&#x4FDD;&#x5B58;&#x5230;mResult&#x4E2D;,&#x5916;&#x90E8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;getResult&#x83B7;&#x53D6;&#x3002;</div><div class=\"line\">  boolean result = setResultInternal(value, isLast);</div><div class=\"line\">  if (result) {</div><div class=\"line\">    notifyDataSubscribers();</div><div class=\"line\">  }</div><div class=\"line\">  return result;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>Result&#x4FDD;&#x5B58;&#x5230;DataSource&#x4E2D;&#x7684;mResult&#x4E2D;&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x7684;Controller&#x4E2D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;DataSource&#x7684;getResult&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x7684;Result&#x3002;Controller&#x5BF9;DataSource&#x7684;&#x8BA2;&#x9605;&#x4E5F;&#x5C06;&#x901A;&#x8FC7;notifyDataSubscribers()&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x901A;&#x77E5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void notifyDataSubscribers() {</div><div class=\"line\">  final boolean isFailure = hasFailed();</div><div class=\"line\">  final boolean isCancellation = wasCancelled();</div><div class=\"line\">  //&#x901A;&#x77E5;&#x6240;&#x6709;&#x7684;&#x8BA2;&#x9605;&#x8005;</div><div class=\"line\">  for (Pair&lt;DataSubscriber&lt;T&gt;, Executor&gt; pair : mSubscribers) {</div><div class=\"line\">    notifyDataSubscriber(pair.first, pair.second, isFailure, isCancellation);</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">private void notifyDataSubscriber(</div><div class=\"line\">    final DataSubscriber&lt;T&gt; dataSubscriber,</div><div class=\"line\">    final Executor executor,</div><div class=\"line\">    final boolean isFailure,</div><div class=\"line\">    final boolean isCancellation) {</div><div class=\"line\">  executor.execute(</div><div class=\"line\">      new Runnable() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void run() {</div><div class=\"line\">          if (isFailure) {</div><div class=\"line\">            dataSubscriber.onFailure(AbstractDataSource.this);</div><div class=\"line\">          } else if (isCancellation) {</div><div class=\"line\">            dataSubscriber.onCancellation(AbstractDataSource.this);</div><div class=\"line\">          } else {</div><div class=\"line\">            dataSubscriber.onNewResult(AbstractDataSource.this);</div><div class=\"line\">          }</div><div class=\"line\">        }</div><div class=\"line\">      });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>executor.execute()&#x65B9;&#x6CD5;&#x89E3;&#x91CA;&#x4E86;&#x4E00;&#x5207;&#x3002;&#x8C03;&#x7528;&#x4E86;Controller&#x4E2D;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;dataSubscriber&#x7684;&#x5404;&#x4E2A;&#x56DE;&#x8C03;&#x3002;&#x90A3;&#x4E48;Result&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x5C31;&#x8D70;&#x901A;&#x4E86;&#x3002;</p>\n<blockquote>\n<p>&#x5982;&#x9700;&#x4E86;&#x89E3;Controller&#xFF0C;&#x63A8;&#x8350;&#x9605;&#x8BFB;<a href=\"https://idisfkj.github.io/2017/12/14/Fresco%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BController/\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Controller\n</a></p>\n</blockquote>\n<h2 id=\"Producer&#x7684;&#x5144;&#x5F1F;&#x59D0;&#x59B9;\"><a href=\"#Producer&#x7684;&#x5144;&#x5F1F;&#x59D0;&#x59B9;\" class=\"headerlink\" title=\"Producer&#x7684;&#x5144;&#x5F1F;&#x59D0;&#x59B9;\"></a>Producer&#x7684;&#x5144;&#x5F1F;&#x59D0;&#x59B9;</h2><p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x6765;&#x8BA4;&#x8BC6;&#x4E0B;Producer&#x7684;&#x5BB6;&#x5EAD;&#x6210;&#x5458;&#x3002;&#x56DE;&#x5230;&#x6700;&#x521D;&#x7684;fetchDecodedImage()&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; producerSequence =</div><div class=\"line\">    mProducerSequenceFactory.getDecodedImageProducerSequence(imageRequest);</div></pre></td></tr></table></figure>\n<p>Producer&#x7684;&#x5BB6;&#x5EAD;&#x6210;&#x5458;&#x7684;&#x51FA;&#x751F;&#x5730;&#x90FD;&#x662F;ProducerSequenceFactory&#x5DE5;&#x5382;&#x3002;&#x6700;&#x5148;&#x51FA;&#x751F;&#x7684;&#x662F;&#x89E3;&#x7801;&#x4E86;&#x7684;ImageProducer&#x6210;&#x5458;&#x3002;&#x901A;&#x8FC7;getDecodeImageProducerSquence()&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; getDecodedImageProducerSequence(</div><div class=\"line\">    ImageRequest imageRequest) {</div><div class=\"line\">  //&#x901A;&#x8FC7;Uri&#x7C7B;&#x578B;&#x6765;&#x83B7;&#x53D6;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;</div><div class=\"line\">  Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; pipelineSequence =</div><div class=\"line\">      getBasicDecodedImageSequence(imageRequest);</div><div class=\"line\"> </div><div class=\"line\">  // &#x901A;&#x8FC7;ImageRequestBuilder.setPostprocessor()&#x8BBE;&#x7F6E;, &#x4E00;&#x822C;&#x4E3A;null&#x3002;</div><div class=\"line\">  // &#x4F5C;&#x7528;&#x662F;&#x7528;&#x6765;&#x5BF9;&#x83B7;&#x53D6;&#x5230;&#x7684;Bitmap&#x8FDB;&#x884C;&#x52A0;&#x5DE5;&#x5904;&#x7406;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x6DFB;&#x52A0;&#x6C34;&#x5370;&#x7B49;&#x3002;</div><div class=\"line\">  if (imageRequest.getPostprocessor() != null) {</div><div class=\"line\">    pipelineSequence = getPostprocessorSequence(pipelineSequence);</div><div class=\"line\">  }</div><div class=\"line\"> </div><div class=\"line\">  //&#x4E00;&#x822C;&#x7528;&#x6765;&#x5B9E;&#x9A8C;&#xFF0C;ImagePipelineConfig.Builder-&gt;ImagePipelineExperiments-&gt;setBitmapPrepareToDraw</div><div class=\"line\">  //&#x6240;&#x4EE5;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x90FD;&#x4E3A;false</div><div class=\"line\">  if (mUseBitmapPrepareToDraw) {</div><div class=\"line\">    pipelineSequence = getBitmapPrepareSequence(pipelineSequence);</div><div class=\"line\">  }</div><div class=\"line\">  return pipelineSequence;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x7684;&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x6B63;&#x5E38;&#x7684;&#x6D41;&#x7A0B;&#x53EA;&#x9700;&#x5173;&#x6CE8;getBasicDecodedImageSequence()&#x65B9;&#x6CD5;&#x3002;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x662F;&#x5BF9;&#x83B7;&#x53D6;&#x5230;&#x7684;Result&#x8FDB;&#x884C;&#x52A0;&#x5DE5;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;Result&#x83B7;&#x53D6;&#x6B65;&#x9AA4;&#x3002;&#x90A3;&#x4E48;&#x7EE7;&#x7EED;&#x770B;getBasicDecodedImageSequence&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; getBasicDecodedImageSequence(</div><div class=\"line\">    ImageRequest imageRequest) {</div><div class=\"line\">  Preconditions.checkNotNull(imageRequest);</div><div class=\"line\"> </div><div class=\"line\">  Uri uri = imageRequest.getSourceUri();</div><div class=\"line\">  Preconditions.checkNotNull(uri, &quot;Uri is null.&quot;);</div><div class=\"line\"> </div><div class=\"line\">  switch (imageRequest.getSourceUriType()) {</div><div class=\"line\">    case SOURCE_TYPE_NETWORK:</div><div class=\"line\">      return getNetworkFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_LOCAL_VIDEO_FILE:</div><div class=\"line\">      return getLocalVideoFileFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_LOCAL_IMAGE_FILE:</div><div class=\"line\">      return getLocalImageFileFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_LOCAL_CONTENT:</div><div class=\"line\">      if (MediaUtils.isVideo(mContentResolver.getType(uri))) {</div><div class=\"line\">        return getLocalVideoFileFetchSequence();</div><div class=\"line\">      }</div><div class=\"line\">      return getLocalContentUriFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_LOCAL_ASSET:</div><div class=\"line\">      return getLocalAssetFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_LOCAL_RESOURCE:</div><div class=\"line\">      return getLocalResourceFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_QUALIFIED_RESOURCE:</div><div class=\"line\">      return getQualifiedResourceFetchSequence();</div><div class=\"line\">    case SOURCE_TYPE_DATA:</div><div class=\"line\">      return getDataFetchSequence();</div><div class=\"line\">    default:</div><div class=\"line\">      throw new IllegalArgumentException(</div><div class=\"line\">          &quot;Unsupported uri scheme! Uri is: &quot; + getShortenedUriString(uri));</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x6C34;&#x5CAD;&#xFF0C;&#x6839;&#x636E;ImageRequest&#x7684;SourceUriType&#xFF0C;&#x6765;&#x51B3;&#x5B9A;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x8D44;&#x6E90;&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x3002;&#x8FD9;&#x91CC;&#x4EE5;SOURCE_TYPE_NETWORK&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#xFF0C;getNetworkFetchSequence&#x662F;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private synchronized Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; getNetworkFetchSequence() {</div><div class=\"line\">  if (mNetworkFetchSequence == null) {</div><div class=\"line\">    mNetworkFetchSequence =</div><div class=\"line\">        newBitmapCacheGetToDecodeSequence(getCommonNetworkFetchToEncodedMemorySequence());</div><div class=\"line\">  }</div><div class=\"line\">  return mNetworkFetchSequence;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6587;&#x7AE0;&#x5F00;&#x5934;&#x5DF2;&#x7ECF;&#x63D0;&#x53CA;&#x5230;Fresco&#x6709;&#x4E09;&#x7EA7;&#x7F13;&#x5B58;&#xFF1A;Bitmap&#x7F13;&#x5B58;&#x3001;&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x3002;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x9996;&#x5148;&#x7684;&#x4ECE;Bitmap&#x7F13;&#x5B58;&#x5230;&#x56FE;&#x7247;&#x89E3;&#x7801;&#xFF0C;Bitmap&#x7F13;&#x5B58;&#x5728;newBitmapCacheGetToDecodeSequence&#x4E2D;&#x3002;&#x81F3;&#x4E8E;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x4E86;DecodeProducer&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x3002;</p>\n<h3 id=\"Bitmap&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\"><a href=\"#Bitmap&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\" class=\"headerlink\" title=\"Bitmap&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\"></a>Bitmap&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; newBitmapCacheGetToDecodeSequence(</div><div class=\"line\">    Producer&lt;EncodedImage&gt; inputProducer) {</div><div class=\"line\">  //&#x89E3;&#x7801;Producer,&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x7684;&#x89E3;&#x7801;&#x64CD;&#x4F5C;&#x90FD;&#x5728;DecodeProducer&#x4E2D;&#x8FDB;&#x884C;</div><div class=\"line\">  DecodeProducer decodeProducer = mProducerFactory.newDecodeProducer(inputProducer);</div><div class=\"line\">  //&#x83B7;&#x53D6;Bitmap&#x7F13;&#x5B58;&#x8D44;&#x6E90;</div><div class=\"line\">  return newBitmapCacheGetToBitmapCacheSequence(decodeProducer);</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">  private Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; newBitmapCacheGetToBitmapCacheSequence(</div><div class=\"line\">    Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; inputProducer) {</div><div class=\"line\">  BitmapMemoryCacheProducer bitmapMemoryCacheProducer =</div><div class=\"line\">      mProducerFactory.newBitmapMemoryCacheProducer(inputProducer);</div><div class=\"line\">  BitmapMemoryCacheKeyMultiplexProducer bitmapKeyMultiplexProducer =</div><div class=\"line\">      mProducerFactory.newBitmapMemoryCacheKeyMultiplexProducer(bitmapMemoryCacheProducer);</div><div class=\"line\">  ThreadHandoffProducer&lt;CloseableReference&lt;CloseableImage&gt;&gt; threadHandoffProducer =</div><div class=\"line\">      mProducerFactory.newBackgroundThreadHandoffProducer(</div><div class=\"line\">          bitmapKeyMultiplexProducer,</div><div class=\"line\">          mThreadHandoffProducerQueue);</div><div class=\"line\">  return mProducerFactory.newBitmapMemoryCacheGetProducer(threadHandoffProducer);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x83B7;&#x53D6;Bitmap&#x7F13;&#x5B58;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F9D;&#x6B21;&#x4F7F;&#x7528;&#x4E86;BitmapMemoryCacheGetProducer&#x3001;ThreadHandoffProducer&#x3001;BitmapMemoryCacheKeyMultiplexProducer&#x4E0E;BitmapMemoryCacheProducer&#x3002;</p>\n<blockquote>\n<p>&#x5982;&#x679C;&#x60F3;&#x4E86;&#x89E3;&#x5982;&#x679C;&#x83B7;&#x53D6;Bitmap&#x7F13;&#x5B58;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x67E5;&#x770B;BitmapMemoryCacheProducer&#x3002;&#x7531;&#x4E8E;&#x7BC7;&#x5E45;&#x53D7;&#x9650;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x5BF9;&#x5404;&#x4E2A;Producer&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x540E;&#x7EED;&#x4F1A;&#x5355;&#x72EC;&#x5F00;&#x7BC7;&#x5E45;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\"><a href=\"#&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\" class=\"headerlink\" title=\"&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer\"></a>&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x7CFB;&#x5217;Producer</h3><p>&#x56DE;&#x5230;&#x4E4B;&#x524D;&#x7684;getNetworkFetchSequence&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;Bitmap&#x7F13;&#x5B58;&#x6CA1;&#x6709;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x8FDB;&#x5165;getCommonNetworkFetchToEncodedMemorySequence&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x901A;&#x8FC7;&#x672A;&#x89E3;&#x7801;&#x7684;&#x56FE;&#x7247;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E0E;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x83B7;&#x53D6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">private synchronized Producer&lt;EncodedImage&gt; getCommonNetworkFetchToEncodedMemorySequence() {</div><div class=\"line\">  if (mCommonNetworkFetchToEncodedMemorySequence == null) {</div><div class=\"line\">    //&#x672A;&#x89E3;&#x7801;&#x7684;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;-&gt;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</div><div class=\"line\">    Producer&lt;EncodedImage&gt; inputProducer =</div><div class=\"line\">        newEncodedCacheMultiplexToTranscodeSequence(</div><div class=\"line\">            mProducerFactory.newNetworkFetchProducer(mNetworkFetcher));</div><div class=\"line\">    //&#x5BF9;&#x56FE;&#x7247;&#x7684;Meta Data&#x8FDB;&#x884C;&#x8F6C;&#x6362;</div><div class=\"line\">    mCommonNetworkFetchToEncodedMemorySequence =</div><div class=\"line\">        ProducerFactory.newAddImageTransformMetaDataProducer(inputProducer);</div><div class=\"line\">    //&#x5BF9;JPEG&#x683C;&#x5F0F;&#x7684;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x4E0E;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;</div><div class=\"line\">    mCommonNetworkFetchToEncodedMemorySequence =</div><div class=\"line\">        mProducerFactory.newResizeAndRotateProducer(</div><div class=\"line\">            mCommonNetworkFetchToEncodedMemorySequence,</div><div class=\"line\">            mResizeAndRotateEnabledForNetwork,</div><div class=\"line\">            mUseDownsamplingRatio);</div><div class=\"line\">  }</div><div class=\"line\">  return mCommonNetworkFetchToEncodedMemorySequence;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x9996;&#x5148;&#x4F1A;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x8F6C;&#x6362;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;ResizeAndRotateProducer&#x4F5C;&#x7528;&#x662F;&#x5BF9;JPEG&#x683C;&#x5F0F;&#x7684;&#x56FE;&#x7247;&#x6839;&#x636E;EXIF&#x7684;orientation&#x4E0E;&#x6307;&#x5B9A;&#x7684;rotation&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x4E0E;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;&#x3002;&#x4E4B;&#x540E;&#x5C31;&#x662F;AddImageTransformMetaDataProducer&#x5BF9;&#x56FE;&#x7247;&#x7684;Meta Data&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x3002;&#x6700;&#x540E;&#x8C03;&#x7528;newEncodedCacheMultiplexToTranscodeSequence&#x8FDB;&#x884C;&#x672A;&#x89E3;&#x7801;&#x7684;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x64CD;&#x4F5C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Producer&lt;EncodedImage&gt; newEncodedCacheMultiplexToTranscodeSequence(</div><div class=\"line\">    Producer&lt;EncodedImage&gt; inputProducer) {</div><div class=\"line\">  //&#x5BF9;webp&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x8F6C;&#x7801;</div><div class=\"line\">  if (WebpSupportStatus.sIsWebpSupportRequired &amp;&amp;</div><div class=\"line\">      (!mWebpSupportEnabled || WebpSupportStatus.sWebpBitmapFactory == null)) {</div><div class=\"line\">    inputProducer = mProducerFactory.newWebpTranscodeProducer(inputProducer);</div><div class=\"line\">  }</div><div class=\"line\">  //&#x78C1;&#x76D8;&#x7F13;&#x5B58;</div><div class=\"line\">  inputProducer = newDiskCacheSequence(inputProducer);</div><div class=\"line\">  //&#x672A;&#x89E3;&#x7801;&#x7684;&#x56FE;&#x7247;&#x7F13;&#x5B58;</div><div class=\"line\">  EncodedMemoryCacheProducer encodedMemoryCacheProducer =</div><div class=\"line\">      mProducerFactory.newEncodedMemoryCacheProducer(inputProducer);</div><div class=\"line\">  //&#x8FDB;&#x884C;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x64CD;&#x4F5C;&#xFF0C;&#x901A;&#x8FC7;&#x672A;&#x89E3;&#x7801;&#x7684;&#x7F13;&#x5B58;&#x4F5C;&#x4E3A;key,&#x6765;&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;request</div><div class=\"line\">  return mProducerFactory.newEncodedCacheKeyMultiplexProducer(encodedMemoryCacheProducer);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x8C03;&#x7528;&#x94FE;&#x662F;&#xFF1A;EncodedCacheKeyMultiplexProducer -&gt; EncodedMemoryCacheProducer -&gt; newDiskCacheSequence -&gt; WebpTranscodeProducer&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4EE5;&#x4E0A;&#x6B65;&#x9AA4;&#x90FD;&#x6CA1;&#x6709;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x6B63;&#x5F0F;&#x8FDB;&#x5165;&#x7F51;&#x7EDC;&#x83B7;&#x53D6;&#x3002;&#x5165;&#x53E3;&#x5728;mProducerFactory.newNetworkFetchProducer(mNetworkFetcher))&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;Producer&#x4E3A;NetworkFetchProducer&#x3002;</p>\n<h3 id=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;Producer\"><a href=\"#&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;Producer\" class=\"headerlink\" title=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;Producer\"></a>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;Producer</h3><p>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0B;&#x9762;&#x5BF9;NetworkFetchProducer&#x8FDB;&#x884C;&#x7B80;&#x8981;&#x5206;&#x6790;&#xFF0C;&#x76F4;&#x63A5;&#x770B;&#x5B83;&#x7684;&#x6700;&#x7EC8;&#x65B9;&#x6CD5;produceResults&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void produceResults(Consumer&lt;EncodedImage&gt; consumer, ProducerContext context) {</div><div class=\"line\">  context.getListener()</div><div class=\"line\">      .onProducerStart(context.getId(), PRODUCER_NAME);</div><div class=\"line\">  //&#x4FDD;&#x5B58;fetch&#x7684;&#x8BF7;&#x6C42;&#x72B6;&#x6001;&#x4FE1;&#x606F;(Consumer,ProducerContext)</div><div class=\"line\">  final FetchState fetchState = mNetworkFetcher.createFetchState(consumer, context);</div><div class=\"line\">  mNetworkFetcher.fetch(</div><div class=\"line\">      fetchState, new NetworkFetcher.Callback() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onResponse(InputStream response, int responseLength) throws IOException {</div><div class=\"line\">          //&#x8BE5;response&#x5373;&#x4E3A;&#x6700;&#x7EC8;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x7684;uri&#x54CD;&#x5E94;&#x8D44;&#x6E90;</div><div class=\"line\">          NetworkFetchProducer.this.onResponse(fetchState, response, responseLength);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        @Override</div><div class=\"line\">        public void onFailure(Throwable throwable) {</div><div class=\"line\">          NetworkFetchProducer.this.onFailure(fetchState, throwable);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        @Override</div><div class=\"line\">        public void onCancellation() {</div><div class=\"line\">          NetworkFetchProducer.this.onCancellation(fetchState);</div><div class=\"line\">        }</div><div class=\"line\">      });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x901A;&#x8FC7;mNetworkFetcher&#x521B;&#x5EFA;&#x4E86;FetchState&#xFF0C;mNetworkFetcher&#x662F;&#x7F51;&#x7EDC;&#x5C42;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7279;&#x522B;&#x6307;&#x5B9A;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;HttpUrlConnection&#xFF0C;&#x5BF9;&#x5E94;&#x4E3A;HttpUrlConnectionNetworkFetcher&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x8C03;&#x4E86;fetch&#x65B9;&#x6CD5;&#xFF0C;&#x6B63;&#x5F0F;&#x53D1;&#x8D77;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x7EC6;&#x8282;&#x5B9E;&#x73B0;&#x5728;mNetworkFetcher&#x4E2D;&#x3002;&#x5BF9;&#x5E94;&#x7684;&#x56DE;&#x8C03;&#x54CD;&#x5E94;&#x4E3A;onResponse&#x3001;onFailure&#x4E0E;onCancellation&#xFF0C;&#x8FD9;&#x91CC;&#x62FF;onResponse&#x6B65;&#x9AA4;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void onResponse(</div><div class=\"line\">    FetchState fetchState,</div><div class=\"line\">    InputStream responseData,</div><div class=\"line\">    int responseContentLength)</div><div class=\"line\">    throws IOException {</div><div class=\"line\">  final PooledByteBufferOutputStream pooledOutputStream;</div><div class=\"line\">  //&#x83B7;&#x53D6;pooledOutputStream</div><div class=\"line\">  if (responseContentLength &gt; 0) {</div><div class=\"line\">    pooledOutputStream = mPooledByteBufferFactory.newOutputStream(responseContentLength);</div><div class=\"line\">  } else {</div><div class=\"line\">    pooledOutputStream = mPooledByteBufferFactory.newOutputStream();</div><div class=\"line\">  }</div><div class=\"line\">  final byte[] ioArray = mByteArrayPool.get(READ_SIZE);</div><div class=\"line\">  try {</div><div class=\"line\">    int length;</div><div class=\"line\">    while ((length = responseData.read(ioArray)) &gt;= 0) {</div><div class=\"line\">      if (length &gt; 0) {</div><div class=\"line\">        //&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;pooledOutputStream&#x4E2D;</div><div class=\"line\">        pooledOutputStream.write(ioArray, 0, length);</div><div class=\"line\">        //&#x5B9A;&#x65F6;&#x89E6;&#x53D1;consumer&#x56DE;&#x8C03;</div><div class=\"line\">        maybeHandleIntermediateResult(pooledOutputStream, fetchState);</div><div class=\"line\">        float progress = calculateProgress(pooledOutputStream.size(), responseContentLength);</div><div class=\"line\">        //&#x8FDB;&#x5EA6;&#x66F4;&#x65B0;</div><div class=\"line\">        fetchState.getConsumer().onProgressUpdate(progress);</div><div class=\"line\">      }</div><div class=\"line\">    }</div><div class=\"line\">    mNetworkFetcher.onFetchCompletion(fetchState, pooledOutputStream.size());</div><div class=\"line\">    //&#x5168;&#x90E8;&#x6570;&#x636E;&#x83B7;&#x53D6;&#x5B8C;&#x6BD5;&#xFF0C;&#x56DE;&#x8C03;Consumer</div><div class=\"line\">    handleFinalResult(pooledOutputStream, fetchState);</div><div class=\"line\">  } finally {</div><div class=\"line\">    mByteArrayPool.release(ioArray);</div><div class=\"line\">    pooledOutputStream.close();</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#x89E3;&#x6790;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x4E24;&#x4E2A;&#xFF1A;maybeHandleIntermediateResult&#x4E0E;handleFinalResult&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x662F;&#x5BF9;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x53D1;&#x9001;&#x4F20;&#x9012;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x90FD;&#x662F;&#x8C03;&#x7528;notifyConsumer&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x56DE;&#x8C03;&#x901A;&#x77E5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void maybeHandleIntermediateResult(</div><div class=\"line\">    PooledByteBufferOutputStream pooledOutputStream,</div><div class=\"line\">    FetchState fetchState) {</div><div class=\"line\">  final long nowMs = SystemClock.uptimeMillis();</div><div class=\"line\">  //&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;100&#x6BEB;&#x79D2;&#x8FDB;&#x884C;&#x901A;&#x77E5;</div><div class=\"line\">  if (shouldPropagateIntermediateResults(fetchState) &amp;&amp;</div><div class=\"line\">      nowMs - fetchState.getLastIntermediateResultTimeMs() &gt;= TIME_BETWEEN_PARTIAL_RESULTS_MS) {</div><div class=\"line\">    fetchState.setLastIntermediateResultTimeMs(nowMs);</div><div class=\"line\">    fetchState.getListener()</div><div class=\"line\">        .onProducerEvent(fetchState.getId(), PRODUCER_NAME, INTERMEDIATE_RESULT_PRODUCER_EVENT);</div><div class=\"line\">    notifyConsumer(</div><div class=\"line\">        pooledOutputStream,</div><div class=\"line\">        fetchState.getOnNewResultStatusFlags(),</div><div class=\"line\">        fetchState.getResponseBytesRange(),</div><div class=\"line\">        fetchState.getConsumer());</div><div class=\"line\">  }</div><div class=\"line\">}</div><div class=\"line\"> </div><div class=\"line\">private void handleFinalResult(</div><div class=\"line\">    PooledByteBufferOutputStream pooledOutputStream,</div><div class=\"line\">    FetchState fetchState) {</div><div class=\"line\">  Map&lt;String, String&gt; extraMap = getExtraMap(fetchState, pooledOutputStream.size());</div><div class=\"line\">  ProducerListener listener = fetchState.getListener();</div><div class=\"line\">  listener.onProducerFinishWithSuccess(fetchState.getId(), PRODUCER_NAME, extraMap);</div><div class=\"line\">  listener.onUltimateProducerReached(fetchState.getId(), PRODUCER_NAME, true);</div><div class=\"line\">  notifyConsumer(</div><div class=\"line\">      pooledOutputStream,</div><div class=\"line\">      Consumer.IS_LAST | fetchState.getOnNewResultStatusFlags(),</div><div class=\"line\">      fetchState.getResponseBytesRange(),</div><div class=\"line\">      fetchState.getConsumer());</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x4EEC;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x533A;&#x522B;&#x662F;maybeHandleIntermediateResult&#x662F;&#x95F4;&#x9694;&#x6027;&#x7684;&#x8C03;&#x7528;notifyConsumer&#x901A;&#x77E5;&#x56DE;&#x8C03;&#x8005;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x6700;&#x7EC8;&#x7684;&#x56DE;&#x8C03;&#x901A;&#x77E5;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void notifyConsumer(</div><div class=\"line\">    PooledByteBufferOutputStream pooledOutputStream,</div><div class=\"line\">    @Consumer.Status int status,</div><div class=\"line\">    @Nullable BytesRange responseBytesRange,</div><div class=\"line\">    Consumer&lt;EncodedImage&gt; consumer) {</div><div class=\"line\">  //&#x5BF9;&#x4E8E;PooledByteBuffer&#x6784;&#x5EFA;&#x53EF;&#x5173;&#x95ED;&#x5F15;&#x7528;CloseableReference</div><div class=\"line\">  CloseableReference&lt;PooledByteBuffer&gt; result =</div><div class=\"line\">      CloseableReference.of(pooledOutputStream.toByteBuffer());</div><div class=\"line\">  EncodedImage encodedImage = null;</div><div class=\"line\">  try {</div><div class=\"line\">    //&#x4FDD;&#x5B58;&#x5230;EncodedImage&#x4E2D;</div><div class=\"line\">    encodedImage = new EncodedImage(result);</div><div class=\"line\">    encodedImage.setBytesRange(responseBytesRange);</div><div class=\"line\">    //&#x89E3;&#x6790;MetaData</div><div class=\"line\">    encodedImage.parseMetaData();</div><div class=\"line\">    //&#x56DE;&#x8C03;&#x901A;&#x77E5;</div><div class=\"line\">    consumer.onNewResult(encodedImage, status);</div><div class=\"line\">  } finally {</div><div class=\"line\">    EncodedImage.closeSafely(encodedImage);</div><div class=\"line\">    CloseableReference.closeSafely(result);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x5BF9;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x4FDD;&#x5B58;&#x5230;EncodedImage&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;Consumer&#x56DE;&#x8C03;onNewResult&#x65B9;&#x6CD5;&#x5C06;encodedImage&#x4F20;&#x9012;&#x5230;&#x4E0A;&#x4E00;&#x5C42;&#x7684;Producer&#x7CFB;&#x5217;&#xFF0C;&#x5373;&#x4E4B;&#x524D;&#x6240;&#x8FDB;&#x8FC7;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x672A;&#x89E3;&#x7801;&#x7684;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x4E0E;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x64CD;&#x4F5C;&#x3002;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5C31;&#x662F;&#x901A;&#x8FC7;Consumer&#x5BF9;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x89E3;&#x7801;&#x3001;&#x8F6C;&#x6362;&#x3001;&#x7F13;&#x5B58;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x6700;&#x7EC8;&#x83B7;&#x53D6;&#x5230;Bitmap&#xFF0C;&#x4F20;&#x9012;&#x7ED9;UI&#x5C42;&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x66F4;&#x65B0;&#x8BBE;&#x7F6E;&#x3002;</p>\n<blockquote>\n<p>HttpUrlConnectionNetworkFetcher&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x67E5;&#x770B;&#x6E90;&#x7801;&#xFF0C;&#x5185;&#x90E8;&#x5C31;&#x662F;&#x4F7F;&#x7528;HttpUrlConnection&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8D44;&#x6E90;&#x8BF7;&#x6C42;&#x4E0E;&#x89E3;&#x6790;&#x3002;</p>\n</blockquote>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;&#x7684;Producer&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x90FD;&#x4F1A;&#x56DE;&#x5230;&#x5F00;&#x7BC7;&#x5206;&#x6790;&#x7684;Result&#x5904;&#x7406;&#xFF0C;AbstractProducerToDataSourceAdapter&#x4E2D;&#x7684;onNewResultImpl&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;super.setResult(result, isLast)&#x4F20;&#x9012;&#x7ED3;&#x679C;&#x4E0E;&#x901A;&#x77E5;UI&#x5C42;&#x66F4;&#x65B0;UI&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x6700;&#x540E;&#x5BF9;Producer&#x7684;&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#x505A;&#x4E2A;&#x603B;&#x7ED3;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x8C03;&#x7528;&#x94FE;&#xFF0C;&#x4E3B;&#x8981;&#x53EF;&#x5212;&#x5206;&#x4E3A;&#x4E09;&#x5927;&#x90E8;&#x5206;&#xFF0C;&#x5206;&#x522B;&#x4E3A;&#xFF1A;<br>swallow result if prefetch -&gt; bitmap cache get -&gt;<br>background thread hand-off -&gt; multiplex -&gt; bitmap cache -&gt; decode -&gt; multiplex -&gt;<br>encoded cache -&gt; disk cache -&gt; (webp transcode) -&gt; network fetch<br>&#x5206;&#x522B;&#x5BF9;&#x5E94;Bitmap&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#x3001;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x3001;&#x672A;&#x89E3;&#x7801;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#x3001;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#x4E0E;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x83B7;&#x53D6;&#x3002;</p>\n"},{"title":"Fresco源码分析之Controller","url":"https://www.rousetime.com/2017/12/14/Fresco源码分析之Controller/","content":"<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x770B;&#x6211;&#x7684;<strong>Fresco</strong>&#x7684;&#x6E90;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF0C;&#x8FD9;&#x91CC;&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x4F60;&#x5148;&#x9605;&#x8BFB;&#x6211;&#x7684;&#x524D;&#x9762;&#x4E24;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2017/11/28/Fresco%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BDraweeView/\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;DraweeView</a>&#x4E0E;<a href=\"https://idisfkj.github.io/2017/12/07/Fresco%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BHierarchy/\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Hierarchy</a>&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x5165;&#x6B63;&#x9898;&#x3002;&#x5728;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x4E2D;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#xFF0C;&#x5728;<strong>Fresco</strong>&#x4E2D;&#x5173;&#x4E8E;&#x56FE;&#x7247;&#x7684;&#x7F13;&#x5B58;&#x3001;&#x8BF7;&#x6C42;&#x4E0E;&#x663E;&#x793A;&#x903B;&#x8F91;&#x5904;&#x7406;&#x90FD;&#x5728;<strong>Controller</strong>&#x4E2D;&#x3002;&#x90A3;&#x4E48;<strong>Controller</strong>&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x8D2F;&#x7A7F;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x5148;&#x4ECE;&#x5B83;&#x7684;&#x51FA;&#x751F;&#x5F00;&#x59CB;&#x3002;</p>\n<h1 id=\"Suppiler\"><a href=\"#Suppiler\" class=\"headerlink\" title=\"Suppiler\"></a>Suppiler</h1><p><strong>PipelineDraweeControllerBuilderSupplier</strong>&#x662F;&#x4E00;&#x4E2A;&#x4F9B;&#x5E94;&#x5546;&#xFF0C;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86;<code>Supplier&lt;T&gt;</code>&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<em>T get()</em>&#xFF0C;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x76F8;&#x5173;&#x7684;&#x63D0;&#x4F9B;&#x5B9E;&#x73B0;&#x3002;&#x56E0;&#x6B64;&#x8BE5;&#x4F9B;&#x5E94;&#x7C7B;&#x63D0;&#x4F9B;&#x7684;&#x5C31;&#x662F;<strong>PipelineDraweeControllerBuilder</strong>&#x5B9E;&#x4F8B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public PipelineDraweeControllerBuilder get() {</div><div class=\"line\">  return new PipelineDraweeControllerBuilder(</div><div class=\"line\">      mContext,</div><div class=\"line\">      mPipelineDraweeControllerFactory,</div><div class=\"line\">      mImagePipeline,</div><div class=\"line\">      mBoundControllerListeners);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x751F;&#x6210;&#x7684;<strong>builder</strong>&#x4E2D;&#x6709;4&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;<strong>Context</strong>&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#x4E86;&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;<strong>Controller</strong>&#x7684;&#x5DE5;&#x5382;&#xFF1B;&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#x6570;&#x636E;&#x7BA1;&#x9053;<strong>ImagePipeline</strong>&#xFF1B;&#x7B2C;&#x56DB;&#x4E2A;&#x662F;<strong>listener</strong>&#x7684;<strong>set</strong>&#x96C6;&#x5408;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x5728;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x7684;&#x76D1;&#x542C;&#x56DE;&#x8C03;&#x3002;&#x4E0B;&#x9762;&#x8BE6;&#x7EC6;&#x8BF4;&#x660E;&#x540E;&#x9762;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5185;&#x5BB9;&#x4E0E;&#x4F5C;&#x7528;&#x3002;</p>\n<h2 id=\"PipelineDraweeControllerFactory\"><a href=\"#PipelineDraweeControllerFactory\" class=\"headerlink\" title=\"PipelineDraweeControllerFactory\"></a>PipelineDraweeControllerFactory</h2><p>&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x4E2D;&#x4E3B;&#x8981;&#x5C31;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<strong>internalCreateController</strong>&#x4E0E;<strong>newController</strong>&#xFF0C;&#x5BF9;&#x5916;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x4E00;&#x4E2A;<strong>newController</strong>&#x3002;&#x8FD9;&#x4E2A;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x662F;&#x7528;&#x6765;&#x521B;&#x5EFA;<strong>PipelineDraweeController</strong>&#x5BF9;&#x8C61;&#x3002;&#x5176;&#x4E2D;<strong>newController</strong>&#x5185;&#x90E8;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x4E86;<strong>internalCreateController</strong>&#x6765;&#x8FDB;&#x884C;&#x521B;&#x5EFA;<strong>PipelineDraweeController</strong>&#x5B9E;&#x4F8B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected PipelineDraweeController internalCreateController(</div><div class=\"line\">    Resources resources,</div><div class=\"line\">    DeferredReleaser deferredReleaser,</div><div class=\"line\">    DrawableFactory animatedDrawableFactory,</div><div class=\"line\">    Executor uiThreadExecutor,</div><div class=\"line\">    MemoryCache&lt;CacheKey, CloseableImage&gt; memoryCache,</div><div class=\"line\">    @Nullable ImmutableList&lt;DrawableFactory&gt; globalDrawableFactories,</div><div class=\"line\">    @Nullable ImmutableList&lt;DrawableFactory&gt; customDrawableFactories,</div><div class=\"line\">     Supplier&lt;DataSource&lt;CloseableReference&lt;CloseableImage&gt;&gt;&gt; dataSourceSupplier,</div><div class=\"line\">    String id,</div><div class=\"line\">    CacheKey cacheKey,</div><div class=\"line\">    Object callerContext) {</div><div class=\"line\">  PipelineDraweeController controller = new PipelineDraweeController(</div><div class=\"line\">      resources,</div><div class=\"line\">      deferredReleaser,</div><div class=\"line\">      animatedDrawableFactory,</div><div class=\"line\">      uiThreadExecutor,</div><div class=\"line\">      memoryCache,</div><div class=\"line\">      dataSourceSupplier,</div><div class=\"line\">      id,</div><div class=\"line\">      cacheKey,</div><div class=\"line\">      callerContext,</div><div class=\"line\">      globalDrawableFactories);</div><div class=\"line\">   controller.setCustomDrawableFactories(customDrawableFactories);</div><div class=\"line\">  return controller;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<strong>DeferredReleaser</strong>&#x662F;&#x7528;&#x6765;&#x7BA1;&#x7406;&#x63A8;&#x8FDF;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#xFF0C;&#x5728;<strong>onAttach</strong>&#x4E2D;&#x4F1A;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x8D44;&#x6E90;&#xFF0C;&#x800C;<strong>onDetach</strong>&#x4E2D;&#x53C8;&#x4F1A;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x4E3A;&#x5728;<strong>Fresco</strong>&#x4E2D;&#x5F80;&#x5F80;&#x4F1A;&#x5728;<strong>onDetach</strong>&#x4E0E;<strong>onAttach</strong>&#x4E4B;&#x95F4;&#x9891;&#x7E41;&#x5207;&#x6362;(view&#x7684;&#x663E;&#x9690;&#x3001;&#x7ED8;&#x5236;&#x4E0E;Controller&#x7684;&#x8BBE;&#x7F6E;&#x90FD;&#x4F1A;&#x8C03;&#x7528;)&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x4EEC;&#x90FD;&#x5904;&#x4E8E;&#x5728;&#x540C;&#x4E00;&#x4E2A;<strong>looper</strong>(&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E3B;&#x8FDB;&#x7A0B;&#x7684;looper)&#x4E2D;&#x3002;&#x5982;&#x679C;&#x5728;<strong>onDetach</strong>&#x65F6;&#x9A6C;&#x4E0A;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;&#x8D44;&#x6E90;&#x7684;&#x6EE5;&#x7528;&#xFF0C;&#x5BFC;&#x81F4;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x8D44;&#x6E90;&#x52A0;&#x8F7D;&#x4E0E;&#x91CA;&#x653E;&#x56DE;&#x6536;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x7528;&#x4E86;&#x8FD9;&#x4E2A;&#x8D44;&#x6E90;&#x63A8;&#x8FDF;&#x91CA;&#x653E;&#x7684;&#x673A;&#x5236;(&#x5185;&#x90E8;&#x539F;&#x7406;&#x662F;&#x4F7F;&#x7528;&#x4E86;set&#x96C6;&#x5408;&#x7684;&#x552F;&#x4E00;&#x6027;&#x7684;&#x7279;&#x6027;)&#x3002;</p>\n<p><strong>dataSourceSupplier</strong>&#x662F;<strong>DataSource</strong>&#x7684;&#x4F9B;&#x5E94;&#x5546;&#xFF0C;&#x7528;&#x6765;&#x63D0;&#x4F9B;<strong>DataSource</strong>&#x5B9E;&#x4F8B;&#x3002;&#x800C;<strong>DataSource</strong>&#x662F;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x4E0E;&#x5B58;&#x50A8;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x7684;&#xFF0C;&#x76F8;&#x5F53;&#x4E0E;&#x56FE;&#x7247;&#x6570;&#x636E;&#x6E90;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x4F1A;&#x5728;&#x540E;&#x7EED;&#x7684;<strong>Controller</strong>&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x3002;</p>\n<h2 id=\"ImagePipeline\"><a href=\"#ImagePipeline\" class=\"headerlink\" title=\"ImagePipeline\"></a>ImagePipeline</h2><p>&#x65E2;&#x7136;&#x5B83;&#x662F;&#x6570;&#x636E;&#x7BA1;&#x9053;&#xFF0C;&#x81EA;&#x7136;&#x662F;&#x4E0E;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0E;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x6709;&#x5173;&#x3002;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x5B83;&#x7406;&#x89E3;&#x4E3A;&#x591A;&#x4E2A;&#x7BA1;&#x9053;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x6700;&#x7EC8;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x5C31;&#x662F;&#x6765;&#x81EA;&#x4E8E;&#x5B83;&#x4EEC;&#x4E2D;&#x7684;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x3002;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x5176;&#x4E2D;&#x7684;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<ul>\n<li><em>fetchDecodedImage()</em> &#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD4;&#x56DE;<strong>decode image</strong>&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;</li>\n<li><em>fetchEncodedImage()</em> &#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD4;&#x56DE;<strong>encoded image</strong>&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;</li>\n<li><em>prefetchToBitmapCache()</em> &#x53D1;&#x9001;&#x9884;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x9884;&#x5904;&#x7406;&#x7684;<strong>bitmap</strong>&#x7F13;&#x5B58;&#x6570;&#x636E;&#x3002;</li>\n<li><em>prefetchToDiskCache()</em> &#x53D1;&#x9001;&#x9884;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x9884;&#x5904;&#x7406;&#x7684;&#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x3002;</li>\n<li><em>submitFetchRequest()</em> &#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x76F8;&#x5E94;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;</li>\n<li><em>submitPrefetchRequest()</em> &#x53D1;&#x9001;&#x9884;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x76F8;&#x5E94;&#x7C7B;&#x578B;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x3002;</li>\n</ul>\n<p>&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x6700;&#x591A;&#x7684;&#x8FD8;&#x662F;<em>fetchDecodedImage()</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public DataSource&lt;CloseableReference&lt;CloseableImage&gt;&gt; fetchDecodedImage(</div><div class=\"line\">    ImageRequest imageRequest,</div><div class=\"line\">    Object callerContext,</div><div class=\"line\">    ImageRequest.RequestLevel lowestPermittedRequestLevelOnSubmit) {</div><div class=\"line\">  try {</div><div class=\"line\">    Producer&lt;CloseableReference&lt;CloseableImage&gt;&gt; producerSequence =</div><div class=\"line\">         mProducerSequenceFactory.getDecodedImageProducerSequence(imageRequest);</div><div class=\"line\">    return submitFetchRequest(</div><div class=\"line\">        producerSequence,</div><div class=\"line\">        imageRequest,</div><div class=\"line\">        lowestPermittedRequestLevelOnSubmit,</div><div class=\"line\">        callerContext);</div><div class=\"line\">  } catch (Exception exception) {</div><div class=\"line\">    return DataSources.immediateFailedDataSource(exception);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x5230;<strong>Producer</strong>&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x5185;&#x90E8;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;<em>void produceResults(Consumer<t> consumer, ProducerContext context)</t></em>&#xFF0C;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x6E90;&#x3002;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;<strong>submitFetchRequest</strong>&#x65B9;&#x6CD5;&#x4E2D;&#x7684;<strong>producer</strong>&#x4F20;&#x5165;&#x7684;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x5185;&#x90E8;&#x4F1A;&#x9012;&#x5F52;&#x8C03;&#x7528;<em>produceResults()</em>&#x6765;&#x83B7;&#x53D6;&#x6700;&#x7EC8;&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;</p>\n<blockquote>\n<p>&#x5173;&#x4E8E;<strong>Producer</strong>&#x540E;&#x7EED;&#x6709;&#x65F6;&#x95F4;&#x7684;&#x8BDD;&#x4F1A;&#x5355;&#x72EC;&#x5F00;&#x7BC7;&#x6587;&#x7AE0;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x3002;</p>\n</blockquote>\n<h2 id=\"ControllerListener\"><a href=\"#ControllerListener\" class=\"headerlink\" title=\"ControllerListener\"></a>ControllerListener</h2><p>&#x5982;&#x679C;&#x4F60;&#x5BF9;<strong>ControllerListener</strong>&#x4E0D;&#x719F;&#x6089;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;<strong>BaseControllerListener</strong>&#x5E94;&#x8BE5;&#x6216;&#x591A;&#x6216;&#x5C11;&#x4F7F;&#x7528;&#x8FC7;&#x5427;&#x3002;&#x5B83;&#x5176;&#x5B9E;&#x5C31;&#x662F;<strong>ControllerListener</strong>&#x7684;&#x7A7A;&#x5B9E;&#x73B0;&#x3002;&#x65E2;&#x7136;&#x662F;&#x76D1;&#x542C;&#x56DE;&#x8C03;&#xFF0C;&#x90A3;&#x4E48;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#x4E0E;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x3002;</p>\n<ul>\n<li><em>void onSubmit(String id, Object callerContext)</em> &#x5728;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x8C03;</li>\n<li><em>void onFinalImageSet(String id, @Nullable INFO imageInfo, @Nullable Animatable animatable)</em> &#x5728;&#x6700;&#x7EC8;&#x8BBE;&#x7F6E;<strong>image</strong>&#x56FE;&#x7247;&#x65F6;&#x56DE;&#x8C03;&#xFF0C;&#x5176;&#x4E2D;<strong>imageInfo</strong>&#x5305;&#x542B;&#x56FE;&#x7247;&#x7684;&#x76F8;&#x5173;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#xFF08;width&#x3001;height&#x4E0E;quality&#xFF09;</li>\n<li><em>void onIntermediateImageSet(String id, @Nullable INFO imageInfo)</em> &#x5728;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x4E0E;&#x6700;&#x7EC8;&#x56FE;&#x7247;&#x8BBE;&#x7F6E;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x56DE;&#x8C03;</li>\n<li><em>void onIntermediateImageFailed(String id, Throwable throwable)</em> &#x5728;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x4E0E;&#x6700;&#x7EC8;&#x5931;&#x8D25;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x56DE;&#x8C03;</li>\n<li><em>void onFailure(String id, Throwable throwable)</em> &#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#x65F6;&#x56DE;&#x8C03;</li>\n<li><em>void onRelease(String id)</em> &#x8D44;&#x6E90;&#x91CA;&#x653E;&#x65F6;&#x56DE;&#x8C03;</li>\n</ul>\n<h1 id=\"ControllerBuilder\"><a href=\"#ControllerBuilder\" class=\"headerlink\" title=\"ControllerBuilder\"></a>ControllerBuilder</h1><p>&#x65E2;&#x7136;&#x662F;<strong>builder</strong>&#x6A21;&#x5F0F;&#xFF0C;&#x6700;&#x7EC8;&#x7684;&#x76EE;&#x7684;&#x81EA;&#x7136;&#x5C31;&#x662F;&#x7528;&#x6765;&#x521B;&#x5EFA;<strong>Controller</strong>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5954;&#x7740;&#x5B83;&#x7684;&#x76EE;&#x7684;&#x6765;&#x5206;&#x6790;&#x3002;&#x5728;&#x8FD9;&#x91CC;<strong>Controller</strong>&#x7684;<strong>builder</strong>&#x7C7B;&#x662F;<strong>PipelineDraweeControllerBuilder</strong>&#x3002;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x5B83;&#x7684;<em>build()</em>&#x53D1;&#x73B0;&#x5728;&#x5B83;&#x7684;&#x7236;&#x7C7B;<strong>AbstractDraweeControllerBuilder</strong>&#x4E2D;&#x3002;&#x4F46;&#x6700;&#x7EC8;&#x7684;&#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x8FD8;&#x662F;&#x8C03;&#x7528;&#x4E86;<em>obtainController()</em>&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;&#x53CD;&#x8F6C;&#x8FD8;&#x662F;&#x56DE;&#x5230;&#x4E86;<strong>PipelineDraweeControllerBuilder</strong>&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected PipelineDraweeController obtainController() {</div><div class=\"line\">  DraweeController oldController = getOldController();</div><div class=\"line\">  PipelineDraweeController controller;</div><div class=\"line\">  if (oldController instanceof PipelineDraweeController) {</div><div class=\"line\">    controller = (PipelineDraweeController) oldController;</div><div class=\"line\">    controller.initialize(</div><div class=\"line\">        obtainDataSourceSupplier(),</div><div class=\"line\">        generateUniqueControllerId(),</div><div class=\"line\">        getCacheKey(),</div><div class=\"line\">        getCallerContext(),</div><div class=\"line\">        mCustomDrawableFactories);</div><div class=\"line\">  } else {</div><div class=\"line\">    controller = mPipelineDraweeControllerFactory.newController(</div><div class=\"line\">        obtainDataSourceSupplier(),</div><div class=\"line\">        generateUniqueControllerId(),</div><div class=\"line\">        getCacheKey(),</div><div class=\"line\">        getCallerContext(),</div><div class=\"line\">        mCustomDrawableFactories);</div><div class=\"line\">  }</div><div class=\"line\">  return controller;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x903B;&#x8F91;&#x5DF2;&#x7ECF;&#x5F88;&#x660E;&#x663E;&#x4E86;&#x3002;&#x9996;&#x5148;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;<strong>Controller</strong>&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#x5C31;&#x65E0;&#x9700;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x53EA;&#x9700;&#x8C03;&#x7528;<em>initialize()</em>&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x521D;&#x59CB;&#x5316;&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8C03;&#x7528;&#x6211;&#x4EEC;&#x6587;&#x7AE0;&#x4E4B;&#x524D;&#x5206;&#x6790;&#x7684;<strong>PipelineDraweeControllerFactory</strong>&#x4E2D;&#x7684;<em>newController()</em>&#x6765;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x7684;&#x53C2;&#x6570;&#x8FD8;&#x662F;<em>obtainDataSourceSupplier()</em>&#xFF0C;&#x4E4B;&#x524D;&#x4E5F;&#x7B80;&#x5355;&#x63D0;&#x5230;&#x4E86;&#xFF0C;&#x5B83;&#x662F;<strong>DataSource</strong>&#x7684;&#x4F9B;&#x5E94;&#x8005;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<strong>Supplier</strong>&#x7684;&#x521B;&#x5EFA;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected Supplier&lt;DataSource&lt;IMAGE&gt;&gt; getDataSourceSupplierForRequest(</div><div class=\"line\">    final REQUEST imageRequest,</div><div class=\"line\">    final CacheLevel cacheLevel) {</div><div class=\"line\">  final Object callerContext = getCallerContext();</div><div class=\"line\">  return new Supplier&lt;DataSource&lt;IMAGE&gt;&gt;() {</div><div class=\"line\">    @Override</div><div class=\"line\">    public DataSource&lt;IMAGE&gt; get() {</div><div class=\"line\">      return getDataSourceForRequest(imageRequest, callerContext, cacheLevel);</div><div class=\"line\">    }</div><div class=\"line\">    @Override</div><div class=\"line\">    public String toString() {</div><div class=\"line\">      return Objects.toStringHelper(this)</div><div class=\"line\">          .add(&quot;request&quot;, imageRequest.toString())</div><div class=\"line\">          .toString();</div><div class=\"line\">    }</div><div class=\"line\">  };</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x773C;&#x5C31;&#x770B;&#x5230;&#x4E86;<strong>Supplier</strong>&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4E4B;&#x524D;&#x4E5F;&#x63D0;&#x5230;&#x5B83;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<em>get()</em>&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x6765;&#x63D0;&#x4F9B;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x7684;<strong>DataSource</strong>&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x8FD9;&#x91CC;&#x5B83;&#x8C03;&#x7528;&#x4E86;<em>getDataSourceForRequest()</em>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x7EC6;&#x8282;&#x5B9E;&#x73B0;&#x7531;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x56DE;&#x5230;<strong>getDataSourceForRequest</strong>&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x5C31;&#x80FD;&#x591F;&#x641C;&#x7D22;&#x5230;<em>getDataSourceForRequest()</em>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected DataSource&lt;CloseableReference&lt;CloseableImage&gt;&gt; getDataSourceForRequest(</div><div class=\"line\">    ImageRequest imageRequest,</div><div class=\"line\">    Object callerContext,</div><div class=\"line\">    CacheLevel cacheLevel) {</div><div class=\"line\">  return mImagePipeline.fetchDecodedImage(</div><div class=\"line\">      imageRequest,</div><div class=\"line\">      callerContext,</div><div class=\"line\">      convertCacheLevelToRequestLevel(cacheLevel));</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x770B;&#x5230;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x662F;&#x5426;&#x773C;&#x719F;&#x5462;&#xFF1F;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x6240;&#x63D0;&#x5230;&#x7684;<strong>ImagePipleline</strong>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5728;&#x591A;&#x505A;&#x5206;&#x6790;&#x4E86;&#x3002;&#x8FD9;&#x6837;<strong>Controller</strong>&#x5C31;&#x4E0E;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x901A;&#x9053;&#x5EFA;&#x7ACB;&#x4E86;&#x8054;&#x7CFB;&#x3002;&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x8F6C;&#x6218;&#x5230;<strong>Controller</strong>&#x4E2D;&#xFF0C;&#x770B;&#x770B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x3002;</p>\n<h1 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h1><p><strong>PipelineDraweeController</strong>&#x7EE7;&#x627F;&#x4E8E;<strong>AbstractDraweeController</strong>&#xFF0C;&#x5728;<strong>PipelineDraweeController</strong>&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x4E09;&#x4E2A;</p>\n<ul>\n<li><em>Drawable createDrawable(CloseableImage closeableImage)</em> &#x8FD9;&#x662F;&#x5185;&#x90E8;&#x7C7B;<strong>DrawableFactory</strong>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#xFF0C;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x5B83;&#x662F;&#x7528;&#x6765;&#x521B;&#x5EFA;<strong>Drawable</strong>&#x7684;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x6E90;&#x8FD4;&#x56DE;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x8C03;&#xFF0C;&#x8FDB;&#x800C;&#x663E;&#x793A;&#x5230;<strong>Hierarchy</strong>&#x5C42;&#x3002;</li>\n<li><em>getDataSource()</em> &#x83B7;&#x53D6;&#x6570;&#x636E;&#x6E90;&#x901A;&#x9053;&#xFF0C;&#x4E0E;&#x5176;&#x5EFA;&#x7ACB;&#x8054;&#x7CFB;&#x3002;</li>\n<li><em>void setHierarchy(@Nullable DraweeHierarchy hierarchy)</em> &#x8BBE;&#x7F6E;<strong>Hierarchy</strong>&#x56FE;&#x5C42;&#xFF0C;&#x5185;&#x90E8;&#x6301;&#x6709;&#x7684;&#x5176;&#x5B9E;&#x662F;<strong>SettableDraweeHierarchy</strong>&#x63A5;&#x53E3;&#x5BF9;&#x8C61;&#x3002;&#x6240;&#x4EE5;&#x5185;&#x90E8;&#x8C03;&#x7528;&#x7684;&#x4E5F;&#x5C31;&#x662F;&#x5B83;&#x7684;6&#x4E2A;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x3002;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x4E5F;&#x6709;&#x63D0;&#x53CA;&#xFF0C;&#x7528;&#x6765;&#x63A7;&#x5236;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x663E;&#x793A;&#x903B;&#x8F91;&#x3002;</li>\n</ul>\n<p>&#x5176;&#x4F59;&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#x90FD;&#x5728;&#x5B83;&#x7684;&#x7236;&#x7C7B;<strong>AbstractDraweeController</strong>&#x4E2D;&#x3002;&#x5728;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x591A;&#x6B21;&#x63D0;&#x53CA;&#x5230;<strong>onAttach</strong>&#x4E0E;<strong>onDetach</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;&#x5904;&#x7406;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x4E0E;&#x91CA;&#x653E;&#x3002;</p>\n<h2 id=\"onAttach\"><a href=\"#onAttach\" class=\"headerlink\" title=\"onAttach\"></a>onAttach</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"> @Override</div><div class=\"line\"> public void onAttach() {</div><div class=\"line\">   if (FLog.isLoggable(FLog.VERBOSE)) {</div><div class=\"line\">     FLog.v(</div><div class=\"line\">         TAG,</div><div class=\"line\">         &quot;controller %x %s: onAttach: %s&quot;,</div><div class=\"line\">         System.identityHashCode(this),</div><div class=\"line\">         mId,</div><div class=\"line\">         mIsRequestSubmitted ? &quot;request already submitted&quot; : &quot;request needs submit&quot;);</div><div class=\"line\">   }</div><div class=\"line\">   //&#x4E8B;&#x4EF6;&#x8BB0;&#x5F55;&#x5668;</div><div class=\"line\">mEventTracker.recordEvent(Event.ON_ATTACH_CONTROLLER);</div><div class=\"line\"> Preconditions.checkNotNull(mSettableDraweeHierarchy);</div><div class=\"line\">   //&#x53D6;&#x6D88;&#x8D44;&#x6E90;&#x63A8;&#x8FDF;&#x91CA;&#x653E;&#x673A;&#x5236;&#xFF0C;&#x9632;&#x6B62;&#x8D44;&#x6E90;&#x88AB;&#x91CA;&#x653E;</div><div class=\"line\">   mDeferredReleaser.cancelDeferredRelease(this);</div><div class=\"line\">   mIsAttached = true;</div><div class=\"line\">   if (!mIsRequestSubmitted) {</div><div class=\"line\">     submitRequest();</div><div class=\"line\">   }</div><div class=\"line\"> }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;<strong>mEventTracker</strong>&#x662F;&#x4E8B;&#x4EF6;&#x8BB0;&#x5F55;&#x5668;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x5F00;&#x542F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x5173;&#x95ED;&#x5219;&#x9700;&#x8981;&#x5728;<em>Fresco.initialize()</em>&#x4E4B;&#x524D;&#x8C03;&#x7528;<em>DraweeEventTracker.disable()</em>&#x5173;&#x95ED;&#xFF1B;&#x7136;&#x540E;&#x5C31;&#x662F;&#x5C06;&#x5176;&#x4ECE;&#x8D44;&#x6E90;&#x63A8;&#x8FDF;&#x91CA;&#x653E;&#x673A;&#x5236;&#x4E2D;&#x53D6;&#x6D88;&#xFF1B;&#x6700;&#x540E;&#x5C31;&#x662F;&#x8C03;&#x7528;<em>submitRequest()</em>&#x53D1;&#x9001;&#x6570;&#x636E;&#x6E90;&#x8BF7;&#x6C42;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void submitRequest() {</div><div class=\"line\">  final T closeableImage = getCachedImage();</div><div class=\"line\">  //1.&#x5224;&#x65AD;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;</div><div class=\"line\">  if (closeableImage != null) {</div><div class=\"line\">    mDataSource = null;</div><div class=\"line\">    mIsRequestSubmitted = true;</div><div class=\"line\">    mHasFetchFailed = false;</div><div class=\"line\">     mEventTracker.recordEvent(Event.ON_SUBMIT_CACHE_HIT);</div><div class=\"line\">    //1.1&#x6570;&#x636E;&#x83B7;&#x53D6;&#x4E2D;&#x901A;&#x77E5;&#x56DE;&#x8C03;</div><div class=\"line\">    getControllerListener().onSubmit(mId, mCallerContext);</div><div class=\"line\">    //1.2&#x6570;&#x636E;&#x5904;&#x7406;</div><div class=\"line\">    onNewResultInternal(mId, mDataSource, closeableImage, 1.0f, true, true);</div><div class=\"line\">    return;</div><div class=\"line\">  }</div><div class=\"line\">   mEventTracker.recordEvent(Event.ON_DATASOURCE_SUBMIT);</div><div class=\"line\">  //2.&#x901A;&#x8FC7;DataSource&#x83B7;&#x53D6;&#x6570;&#x636E;&#x6E90;</div><div class=\"line\">  //2.1&#x6570;&#x636E;&#x83B7;&#x53D6;&#x4E2D;&#x901A;&#x77E5;&#x56DE;&#x8C03;</div><div class=\"line\">  getControllerListener().onSubmit(mId, mCallerContext);</div><div class=\"line\">  mSettableDraweeHierarchy.setProgress(0, true);</div><div class=\"line\">  mIsRequestSubmitted = true;</div><div class=\"line\">  mHasFetchFailed = false;</div><div class=\"line\">  mDataSource = getDataSource();</div><div class=\"line\">  if (FLog.isLoggable(FLog.VERBOSE)) {</div><div class=\"line\">    FLog.v(</div><div class=\"line\">        TAG,</div><div class=\"line\">        &quot;controller %x %s: submitRequest: dataSource: %x&quot;,</div><div class=\"line\">        System.identityHashCode(this),</div><div class=\"line\">        mId,</div><div class=\"line\">        System.identityHashCode(mDataSource));</div><div class=\"line\">  }</div><div class=\"line\">  final String id = mId;</div><div class=\"line\">  final boolean wasImmediate = mDataSource.hasResult();</div><div class=\"line\">  //&#x5185;&#x90E8;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x56DE;&#x8C03;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x6E90;&#x8FD4;&#x56DE;&#x65F6;&#x56DE;&#x8C03;</div><div class=\"line\">  final DataSubscriber&lt;T&gt; dataSubscriber =</div><div class=\"line\">      new BaseDataSubscriber&lt;T&gt;() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onNewResultImpl(DataSource&lt;T&gt; dataSource) {</div><div class=\"line\">          // isFinished must be obtained before image, otherwise we might set intermediate result</div><div class=\"line\">          // as final image.</div><div class=\"line\">          boolean isFinished = dataSource.isFinished();</div><div class=\"line\">          float progress = dataSource.getProgress();</div><div class=\"line\">          T image = dataSource.getResult();</div><div class=\"line\">          //2.2&#x6570;&#x636E;&#x5904;&#x7406;</div><div class=\"line\">          if (image != null) {</div><div class=\"line\">            //&#x6210;&#x529F;&#x5904;&#x7406;</div><div class=\"line\">            onNewResultInternal(id, dataSource, image, progress, isFinished, wasImmediate);</div><div class=\"line\">          } else if (isFinished) {</div><div class=\"line\">            //&#x5931;&#x8D25;&#x5904;&#x7406;</div><div class=\"line\">            onFailureInternal(id, dataSource, new NullPointerException(), /* isFinished */ true);</div><div class=\"line\">          }</div><div class=\"line\">        }</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onFailureImpl(DataSource&lt;T&gt; dataSource) {</div><div class=\"line\">          //&#x5931;&#x8D25;&#x5904;&#x7406;</div><div class=\"line\">          onFailureInternal(id, dataSource, dataSource.getFailureCause(), /* isFinished */ true);</div><div class=\"line\">        }</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onProgressUpdate(DataSource&lt;T&gt; dataSource) {</div><div class=\"line\">          boolean isFinished = dataSource.isFinished();</div><div class=\"line\">          float progress = dataSource.getProgress();</div><div class=\"line\">          //&#x6570;&#x636E;&#x8FDB;&#x5EA6;&#x5904;&#x7406;</div><div class=\"line\">          onProgressUpdateInternal(id, dataSource, progress, isFinished);</div><div class=\"line\">        }</div><div class=\"line\">      };</div><div class=\"line\">  //&#x6570;&#x636E;&#x6E90;&#x8BA2;&#x9605;&#x56DE;&#x8C03;&#x6CE8;&#x518C;</div><div class=\"line\">  mDataSource.subscribe(dataSubscriber, mUiThreadImmediateExecutor);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x903B;&#x8F91;&#x65B9;&#x9762;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x5DF2;&#x7ECF;&#x8BE6;&#x7EC6;&#x6CE8;&#x91CA;&#x4E86;&#xFF0C;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x5148;&#x4ECE;&#x5185;&#x5B58;&#x4E2D;&#x83B7;&#x53D6;&#x5982;&#x679C;&#x5B58;&#x5728;&#x5C31;&#x76F4;&#x63A5;&#x62FF;&#x6765;&#x7528;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x901A;&#x8FC7;<strong>DataSource</strong>&#x4ECE;&#x7F51;&#x7EDC;&#x6216;&#x8005;&#x662F;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x4E2D;&#x83B7;&#x53D6;&#x3002;&#x4F7F;&#x7528;<strong>DataSource</strong>&#x65B9;&#x5F0F;&#x4F1A;&#x4F7F;&#x7528;&#x5230;<strong>DataSubscriber</strong>&#xFF0C;&#x5373;&#x8BA2;&#x9605;&#x65B9;&#x5F0F;&#x3002;&#x5F53;&#x6570;&#x636E;&#x6E90;&#x5DF2;&#x7ECF;&#x83B7;&#x53D6;&#x5230;&#x65F6;&#xFF0C;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x7ED9;&#x8BA2;&#x9605;&#x8005;&#xFF0C;&#x56E0;&#x6B64;&#x5206;&#x522B;&#x56DE;&#x8C03;&#x8BA2;&#x9605;&#x8005;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4E0A;&#x8FF0;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x53EA;&#x8981;&#x6210;&#x529F;&#x4E86;&#x90FD;&#x4F1A;&#x4EA4;&#x7531;<em>onNewResultInternal()</em>&#x5904;&#x7406;&#xFF0C;&#x800C;&#x5931;&#x8D25;&#x5219;&#x7531;<em>onFailureInternal()</em>&#x5904;&#x7406;&#xFF0C;&#x540C;&#x65F6;&#x8BF7;&#x6C42;&#x8FDB;&#x5EA6;&#x5904;&#x7406;&#x7531;<em>onProgressUpdateInternal()</em>&#x5904;&#x7406;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void onNewResultInternal(</div><div class=\"line\">    String id,</div><div class=\"line\">    DataSource&lt;T&gt; dataSource,</div><div class=\"line\">    @Nullable T image,</div><div class=\"line\">    float progress,</div><div class=\"line\">    boolean isFinished,</div><div class=\"line\">    boolean wasImmediate) {</div><div class=\"line\">  // ignore late callbacks (data source that returned the new result is not the one we expected)</div><div class=\"line\">  if (!isExpectedDataSource(id, dataSource)) {</div><div class=\"line\">    logMessageAndImage(&quot;ignore_old_datasource @ onNewResult&quot;, image);</div><div class=\"line\">    releaseImage(image);</div><div class=\"line\">    dataSource.close();</div><div class=\"line\">    return;</div><div class=\"line\">  }</div><div class=\"line\">  mEventTracker.recordEvent(</div><div class=\"line\">      isFinished ? Event.ON_DATASOURCE_RESULT : Event.ON_DATASOURCE_RESULT_INT);</div><div class=\"line\">  // create drawable</div><div class=\"line\">  Drawable drawable;</div><div class=\"line\">  try {</div><div class=\"line\">    drawable = createDrawable(image);</div><div class=\"line\">  } catch (Exception exception) {</div><div class=\"line\">    logMessageAndImage(&quot;drawable_failed @ onNewResult&quot;, image);</div><div class=\"line\">    releaseImage(image);</div><div class=\"line\">    onFailureInternal(id, dataSource, exception, isFinished);</div><div class=\"line\">    return;</div><div class=\"line\">  }</div><div class=\"line\">  T previousImage = mFetchedImage;</div><div class=\"line\">  Drawable previousDrawable = mDrawable;</div><div class=\"line\">  mFetchedImage = image;</div><div class=\"line\">  mDrawable = drawable;</div><div class=\"line\">  try {</div><div class=\"line\">    // set the new image</div><div class=\"line\">    if (isFinished) {</div><div class=\"line\">      logMessageAndImage(&quot;set_final_result @ onNewResult&quot;, image);</div><div class=\"line\">      mDataSource = null;</div><div class=\"line\">      //&#x901A;&#x8FC7;hierarchy&#xFF08;GenericDraweeHierarchy&#xFF09;&#x6765;&#x8BBE;&#x7F6E;image</div><div class=\"line\">      mSettableDraweeHierarchy.setImage(drawable, 1f, wasImmediate);</div><div class=\"line\">      getControllerListener().onFinalImageSet(id, getImageInfo(image), getAnimatable());</div><div class=\"line\">      // IMPORTANT: do not execute any instance-specific code after this point</div><div class=\"line\">    } else {</div><div class=\"line\">      logMessageAndImage(&quot;set_intermediate_result @ onNewResult&quot;, image);</div><div class=\"line\">      mSettableDraweeHierarchy.setImage(drawable, progress, wasImmediate);</div><div class=\"line\">       getControllerListener().onIntermediateImageSet(id, getImageInfo(image));</div><div class=\"line\">      // IMPORTANT: do not execute any instance-specific code after this point</div><div class=\"line\">    }</div><div class=\"line\">  } finally {</div><div class=\"line\">    if (previousDrawable != null &amp;&amp; previousDrawable != drawable) {</div><div class=\"line\">      releaseDrawable(previousDrawable);</div><div class=\"line\">    }</div><div class=\"line\">    if (previousImage != null &amp;&amp; previousImage != image) {</div><div class=\"line\">      logMessageAndImage(&quot;release_previous_result @ onNewResult&quot;, previousImage);</div><div class=\"line\">      releaseImage(previousImage);</div><div class=\"line\">    }</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5C31;&#x770B;&#x91CC;&#x9762;&#x7684;&#x4E24;&#x4E2A;<strong>try</strong>&#x3002;<br>&#x7B2C;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;<em>createDrawable(image)</em>&#x5C06;&#x62FF;&#x5230;&#x7684;&#x6570;&#x636E;&#x6E90;&#x8F6C;&#x53D8;&#x6210;<strong>Drawable</strong>&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x662F;&#x5728;&#x5B50;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;(&#x4E0A;&#x9762;&#x4E5F;&#x6709;&#x63D0;&#x53CA;)&#x3002;<br>&#x7B2C;&#x4E8C;&#x4E2A;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x5982;&#x679C;&#x6570;&#x636E;&#x6E90;&#x5DF2;&#x7ECF;&#x5168;&#x90E8;&#x83B7;&#x53D6;&#x5B8C;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<strong>SettableDraweeHierarchy</strong>&#x63A5;&#x53E3;&#x7684;<em>setImage()</em>&#x65B9;&#x6CD5;&#x5C06;&#x56FE;&#x7247;&#x8BBE;&#x7F6E;&#x5230;<strong>Hierarchy</strong>&#x56FE;&#x5C42;&#x4E0A;&#xFF0C;&#x540C;&#x65F6;&#x8C03;&#x7528;<strong>Listener</strong>&#x7684;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;<em>onFinalImageSet()</em>;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x5982;&#x679C;&#x6570;&#x636E;&#x6E90;&#x8FD8;&#x5728;&#x83B7;&#x53D6;&#x4E2D;&#xFF0C;&#x4E5F;&#x662F;&#x8C03;&#x7528;<strong>SettableDraweeHierarchy</strong>&#x63A5;&#x53E3;&#x7684;<em>setImage()</em>&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x53C2;&#x6570;<strong>progress</strong>&#x6839;&#x636E;&#x8FDB;&#x5EA6;&#x6765;&#x8BBE;&#x7F6E;&#x800C;&#x5DF2;&#xFF0C;&#x7531;&#x4E8E;&#x8FD8;&#x5904;&#x4E8E;&#x8D44;&#x6E90;&#x83B7;&#x53D6;&#x4E2D;&#x6240;&#x4EE5;&#x8C03;&#x7528;<em>onIntermediateImageSet()</em>&#x56DE;&#x8C03;&#x3002;<br>&#x8FD9;&#x6837;<strong>Controller</strong>&#x5C31;&#x4E0E;<strong>Hierarchy</strong>&#x8054;&#x7CFB;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5C06;&#x9700;&#x8981;&#x7684;&#x56FE;&#x7247;&#x8BBE;&#x7F6E;&#x5230;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x4E2D;&#x3002;</p>\n<blockquote>\n<p>&#x5BF9;&#x4E8E;<strong>SettableDraweeHierarchy</strong>&#x4E2D;&#x7684;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x5982;&#x679C;&#x4E0D;&#x7406;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x56DE;&#x8FC7;&#x5934;&#x53BB;&#x770B;&#x6211;&#x4E4B;&#x524D;&#x7684;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2017/12/07/Fresco%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BHierarchy/\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Hierarchy</a></p>\n</blockquote>\n<p>&#x7531;&#x4E8E;&#x6E90;&#x7801;&#x592A;&#x591A;&#xFF0C;&#x5BF9;&#x4E8E;<em>onFailureInternal()</em>&#x4E0E;<em>onProgressUpdateInternal()</em>&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D34;&#x51FA;&#x6E90;&#x7801;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x4E86;&#x3002;&#x539F;&#x7406;&#x4E0E;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x770B;&#x6E90;&#x7801;&#x7684;&#x53EF;&#x4EE5;&#x70B9;<a href=\"https://github.com/facebook/fresco/blob/master/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java\" target=\"_blank\" rel=\"external\">&#x8FD9;&#x91CC;</a></p>\n<h2 id=\"onDetach\"><a href=\"#onDetach\" class=\"headerlink\" title=\"onDetach\"></a>onDetach</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onDetach() {</div><div class=\"line\">  if (FLog.isLoggable(FLog.VERBOSE)) {</div><div class=\"line\">    FLog.v(TAG, &quot;controller %x %s: onDetach&quot;, System.identityHashCode(this), mId);</div><div class=\"line\">  }</div><div class=\"line\">  mEventTracker.recordEvent(Event.ON_DETACH_CONTROLLER);</div><div class=\"line\">  mIsAttached = false;</div><div class=\"line\">  mDeferredReleaser.scheduleDeferredRelease(this);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x76F8;&#x5BF9;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x5206;&#x6790;<em>onDetach()</em>&#x5C31;&#x7B80;&#x5355;&#x591A;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5B83;&#x53EA;&#x662F;&#x5BF9;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x91CA;&#x653E;&#xFF0C;&#x91CA;&#x653E;&#x7684;&#x7B56;&#x7565;&#x4E5F;&#x662F;&#x63A8;&#x8FDF;&#x91CA;&#x653E;&#x7B56;&#x7565;<a href=\"https://github.com/facebook/fresco/blob/master/drawee/src/main/java/com/facebook/drawee/components/DeferredReleaser.java\" target=\"_blank\" rel=\"external\">DeferredReleaser</a>&#x3002;</p>\n<h1 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h1><p>&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x5206;&#x6790;&#x4E86;<strong>Fresco</strong>&#x4E2D;&#x7684;<strong>Controller</strong>&#x76F8;&#x5173;&#x5904;&#x7406;&#x903B;&#x8F91;&#xFF0C;&#x5B83;&#x63A7;&#x5236;&#x7740;<strong>Hierarchy</strong>&#x663E;&#x793A;&#x903B;&#x8F91;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x662F;&#x6570;&#x636E;&#x6E90;&#x7684;&#x83B7;&#x53D6;&#x6865;&#x6881;&#x901A;&#x8FC7;<strong>DataSource</strong>&#x6765;&#x94FE;&#x63A5;&#x6570;&#x636E;&#x6E90;&#x7684;&#x83B7;&#x53D6;&#x3002;&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x53C8;&#x6765;&#x4E86;&#xFF0C;<strong>DataSource</strong>&#x53C8;&#x662F;&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x7684;&#x5462;&#xFF1F;&#x540C;&#x65F6;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x903B;&#x8F91;&#x53C8;&#x662F;&#x5982;&#x4F55;&#x7684;&#x5462;&#xFF1F;&#x8FD9;&#x5C31;&#x6D89;&#x53CA;&#x5230;<strong>Producer</strong>&#x4E86;&#xFF0C;&#x656C;&#x8BF7;&#x5173;&#x6CE8;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;<code>Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Producer</code></p>\n<p><a href=\"https://github.com/idisfkj/Fresco-Source-Analysis\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;Github&#x5730;&#x5740;</a></p>\n"},{"title":"Fresco源码分析之Hierarchy","url":"https://www.rousetime.com/2017/12/07/Fresco源码分析之Hierarchy/","content":"<p>&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E86;<strong>Fresco</strong>&#x4E2D;&#x7684;<strong>DraweeView</strong>&#xFF0C;&#x5BF9;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x539F;&#x7406;&#x4EE5;&#x53CA;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4E86;&#x89E3;&#x6790;&#x3002;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4EEC;&#x4E86;&#x89E3;&#x5230;&#xFF0C;<strong>DraweeView</strong>&#x4E2D;&#x662F;&#x901A;&#x8FC7;<strong>DraweeHolder</strong>&#x6765;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x7684;&#x3002;&#x800C;<strong>DraweeHolder</strong>&#x53C8;&#x662F;&#x7528;&#x6765;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x76F8;&#x5173;&#x7684;<strong>Hierarchy</strong>&#x4E0E;<strong>Controller</strong>&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4E86;&#x89E3;<strong>DraweeView</strong>&#x76F8;&#x5173;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x4E0B;&#x6211;&#x7684;&#x524D;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2017/11/28/Fresco%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8BDraweeView/\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;DraweeView</a>&#x3002;&#x4ECA;&#x5929;&#x8FD9;&#x91CC;&#x8FDB;&#x4E00;&#x6B65;&#x6765;&#x5206;&#x6790;<strong>Fresco</strong>&#x4E2D;&#x7684;<strong>Hierarchy</strong>&#x3002;</p>\n<h1 id=\"GenericDraweeHierarchyBuilder\"><a href=\"#GenericDraweeHierarchyBuilder\" class=\"headerlink\" title=\"GenericDraweeHierarchyBuilder\"></a>GenericDraweeHierarchyBuilder</h1><p>&#x5728;<strong>GenericDraweeView</strong>&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;<em>inflateHierarchy(context, atts)</em>&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<strong>GenericDraweeHierarchyBuilder</strong>&#x5BF9;&#x8C61;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;<strong>build</strong>&#x65B9;&#x6CD5;&#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A;<strong>Hierarchy</strong>&#x3002;</p>\n<blockquote>\n<p>&#x5982;&#x679C;&#x4F60;&#x770B;&#x4E86;&#x6211;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x76F8;&#x4FE1;&#x5BF9;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F60;&#x4F1A;&#x611F;&#x5230;&#x5F88;&#x4EB2;&#x5207;&#x3002;</p>\n</blockquote>\n<p>&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<strong>Hierarchy</strong>&#xFF0C;&#x901A;&#x8FC7;<strong>builder</strong>&#x6A21;&#x5F0F;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#x5305;&#x542B;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x7684;<strong>Hierarchy</strong>&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E00;&#x6B65;&#x6B65;&#x6DF1;&#x5165;&#x4E86;&#x89E3;<strong>Fresco</strong>&#x7684;&#x8BDD;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x5BF9;<strong>builder</strong>&#x6A21;&#x5F0F;&#x4E5F;&#x5C06;&#x4E60;&#x4EE5;&#x4E3A;&#x5E38;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x4F60;&#x5C06;&#x7ECF;&#x5E38;&#x4E0E;&#x5B83;&#x78B0;&#x9762;&#x3002;&#x8FD9;&#x4E5F;&#x662F;<strong>Fresco</strong>&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;&#x4E3B;&#x8981;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x8BE5;<strong>builder</strong>&#x7C7B;&#x4E2D;&#x4E3B;&#x8981;&#x6784;&#x5EFA;&#x7684;&#x4FE1;&#x606F;&#x6709;:</p>\n<ul>\n<li><strong>Drawable</strong>&#x76F8;&#x5173;&#xFF1A;<strong>placeholderImage</strong>&#x3001;<strong>retryImage</strong>&#x3001;<strong>failureImage</strong>&#x3001;<strong>progressBarImage</strong>&#x3001;<strong>background</strong>&#x3001;<strong>overlays</strong>&#x4E0E;<strong>pressedStateOverlay</strong></li>\n<li><strong>ScaleType</strong>&#x76F8;&#x5173;&#xFF1A;&#x4E0E;<strong>Drawable</strong>&#x76F8;&#x5BF9;&#x5E94;&#x7684;<strong>placeholderImageScaleType</strong>&#x3001;<strong>retryImageScaleType</strong>&#x7B49;&#x7B49;&#x3002;</li>\n<li>&#x5176;&#x5B83;&#xFF1A;<strong>fadeDuration</strong>&#x6E10;&#x53D8;&#x8FC7;&#x6E21;&#x65F6;&#x95F4;&#x4E0E;<strong>RoundingParams</strong>&#x5706;&#x89D2;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x7B49;&#x7B49;</li>\n</ul>\n<h1 id=\"GenericDraweeHierarchy\"><a href=\"#GenericDraweeHierarchy\" class=\"headerlink\" title=\"GenericDraweeHierarchy\"></a>GenericDraweeHierarchy</h1><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;<strong>GenericDraweeHierarchyBuilder</strong>&#x7684;<strong>build</strong>&#x65B9;&#x6CD5;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<strong>GenericDraweeHierarchy</strong>&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x9700;&#x8981;&#x4E3B;&#x8981;&#x5206;&#x6790;&#x7684;&#x7C7B;&#xFF0C;&#x4E5F;&#x662F;<strong>Fresco</strong>&#x7684;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;&#x7C7B;&#x3002;</p>\n<h2 id=\"SettableDraweeHierarchy\"><a href=\"#SettableDraweeHierarchy\" class=\"headerlink\" title=\"SettableDraweeHierarchy\"></a>SettableDraweeHierarchy</h2><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x5B83;&#x7684;&#x7C7B;&#x7ED3;&#x6784;&#xFF0C;&#x5B83;&#x4F1A;&#x5B9E;&#x73B0;<strong>SettableDraweeHierarchy</strong>&#x63A5;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x8FDB;&#x5165;&#x8BE5;&#x63A5;&#x53E3;&#x53D1;&#x73B0;&#x4E00;&#x5171;&#x6709;6&#x4E2A;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x4E3A;&#xFF1A;</p>\n<ol>\n<li><em>void reset();</em> &#x91CD;&#x65B0;&#x521D;&#x59CB;&#x5316;<strong>Hierarchy</strong></li>\n<li><em>void setImage(Drawable drawable, float progress, boolean immediate);</em> &#x8BBE;&#x7F6E;&#x5B9E;&#x9645;&#x9700;&#x8981;&#x5C55;&#x793A;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x5176;&#x4E2D;<strong>progress</strong>&#x8868;&#x793A;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#x8D28;&#x91CF;&#x8FDB;&#x5EA6;(&#x5728;&#x6E10;&#x8FDB;&#x5F0F;&#x4E2D;&#x4F1A;&#x4F7F;&#x7528;&#x5230;)</li>\n<li><em>void setProgress(float progress, boolean immediate);</em> &#x66F4;&#x65B0;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FDB;&#x5EA6;</li>\n<li><em>void setFailure(Throwable throwable);</em> &#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x65F6;&#x8C03;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;<strong>failureImage</strong></li>\n<li><em>void setRetry(Throwable throwable);</em> &#x5F53;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x65F6;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;<strong>retryImage</strong></li>\n<li><em>void setControllerOverlay(Drawable drawable);</em> &#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x56FE;&#x5C42;&#x8986;&#x76D6;</li>\n</ol>\n<p>&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x5728;<strong>GenericDraweeHierarchy</strong>&#x4E2D;&#x90FD;&#x4F1A;&#x505A;&#x51FA;&#x76F8;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x540C;&#x65F6;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x5728;&#x5BF9;&#x5E94;&#x7684;<strong>DraweeView</strong>&#x4E2D;&#x7684;<strong>Controller</strong>&#x6765;&#x8C03;&#x7528;&#x3002;</p>\n<blockquote>\n<p>&#x81F3;&#x4E8E;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x7531;&#x4E8E;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5217;&#x4E3E;&#x51FA;&#x6765;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x67E5;&#x770B;<strong>GenericDraweeHierarchy</strong>&#x7684;&#x6E90;&#x7801;&#x3002;</p>\n</blockquote>\n<h2 id=\"DraweeHierarchy\"><a href=\"#DraweeHierarchy\" class=\"headerlink\" title=\"DraweeHierarchy\"></a>DraweeHierarchy</h2><p>&#x4E0A;&#x9762;&#x7684;<strong>SettableDraweeHierarchy</strong>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x63A5;&#x53E3;&#x4E3A;<strong>DraweeHierarchy</strong>&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x4E3A;<em>Drawable getTopLevelDrawable();</em>&#x3002;&#x662F;&#x4E0D;&#x662F;&#x5BF9;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x6709;&#x70B9;&#x719F;&#x6089;&#x5462;&#xFF1F;&#xFF08;&#x8DEF;&#x4EBA;&#x7532;&#xFF1A;&#x55EF;&#xFF0C;&#x597D;&#x50CF;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x63D0;&#x53CA;&#x8FC7;&#xFF01;&#xFF09;&#x5B83;&#x662F;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x89C6;&#x56FE;&#x6811;&#x7684;&#x6700;&#x9876;&#x5C42;&#x89C6;&#x56FE;&#xFF0C;&#x5176;&#x5B9E;&#x8BF4;&#x767D;&#x4E86;&#x5C31;&#x662F;&#x663E;&#x793A;&#x51FA;&#x6765;&#x7684;<strong>Drawable</strong>&#x3002;&#x5B83;&#x4E3B;&#x8981;&#x5728;<strong>DraweeHolder</strong>&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x6700;&#x7EC8;&#x4E5F;&#x4F1A;&#x7531;<em>void setHierarchy(DH hierarchy)</em> &#x4E0E; <em>void setController(@Nullable DraweeController draweeController)</em> &#x6765;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">super.setImageDrawable(mDraweeHolder.getTopLevelDrawable());</div></pre></td></tr></table></figure>\n<p>&#x4ECE;&#x800C;&#x663E;&#x793A;&#x9700;&#x8981;&#x5C55;&#x793A;&#x7684;&#x56FE;&#x7247;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x4E4B;&#x524D;&#x7684;<strong>GenericDraweeHierarchy</strong>&#x7C7B;&#x3002;&#x5728;&#x5F00;&#x59CB;&#x5206;&#x6790;&#x5B83;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5B83;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x611F;&#x5FF5;-<code>&#x5C42;&#x7EA7;&#x6811;&#x6216;&#x8005;&#x8BF4;&#x56FE;&#x5C42;&#x6811;</code>&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x5C31;&#x628A;&#x5B83;&#x8BF4;&#x6210;&#x56FE;&#x5C42;&#x6811;&#x5427;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<strong>Fresco</strong>&#x7684;&#x56FE;&#x5C42;&#x6811;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">*  o RootDrawable (top level drawable)</div><div class=\"line\">*  |</div><div class=\"line\">*  +--o FadeDrawable</div><div class=\"line\">*     |</div><div class=\"line\">*     +--o ScaleTypeDrawable (placeholder branch, optional)</div><div class=\"line\">*     |  |</div><div class=\"line\">*     |  +--o Drawable (placeholder image)</div><div class=\"line\">*     |</div><div class=\"line\">*     +--o ScaleTypeDrawable (actual image branch)</div><div class=\"line\">*     |  |</div><div class=\"line\">*     |  +--o ForwardingDrawable (actual image wrapper)</div><div class=\"line\">*     |     |</div><div class=\"line\">*     |     +--o Drawable (actual image)</div><div class=\"line\">*     |</div><div class=\"line\">*     +--o null (progress bar branch, optional)</div><div class=\"line\">*     |</div><div class=\"line\">*     +--o Drawable (retry image branch, optional)</div><div class=\"line\">*     |</div><div class=\"line\">*     +--o ScaleTypeDrawable (failure image branch, optional)</div><div class=\"line\">*        |</div><div class=\"line\">*        +--o Drawable (failure image</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x6240;&#x5C55;&#x793A;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x6700;&#x5E95;&#x5C42;&#x662F;&#x7531;<strong>RootDrawable</strong>&#x6765;&#x6784;&#x6210;&#xFF0C;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x76F4;&#x63A5;&#x5B50;&#x5206;&#x652F;&#x4E3A;<strong>FadeDrawable</strong>&#x3002;&#x800C;&#x5728;<strong>FadeDrawable</strong>&#x4E2D;&#x53C8;&#x6709;5&#x4E2A;&#x76F4;&#x63A5;&#x5B50;&#x5206;&#x652F;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<strong>placeholder branch</strong>&#x3001;<strong>actual image branch</strong>&#x3001;<strong>progressBar image branch</strong>&#x3001;<strong>retry image branch</strong>&#x4E0E;<strong>failure image branch</strong>&#x3002;&#x81F3;&#x4E8E;&#x8FD9;&#x4E9B;<strong>image</strong>&#x7684;&#x4F5C;&#x7528;&#x76F8;&#x4FE1;&#x4E0D;&#x7528;&#x6211;&#x518D;&#x591A;&#x505A;&#x8BF4;&#x660E;&#x4E86;&#xFF0C;&#x8FD9;&#x4E9B;<strong>image</strong>&#x9664;&#x4E86;<strong>actual image</strong>&#x662F;&#x5FC5;&#x987B;&#x8981;&#x660E;&#x786E;&#x6307;&#x5B9A;&#x7684;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x662F;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x56E0;&#x6B64;<strong>RootDrawable</strong>&#x4E0E;<strong>FadeDrawable</strong>&#x662F;&#x4E00;&#x5B9A;&#x5B58;&#x5728;&#x7684;&#x3002;&#x867D;&#x7136;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x662F;&#x53EF;&#x9009;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F46;&#x65E0;&#x8BBA;&#x4F60;&#x662F;&#x5426;&#x9009;&#x62E9;&#x4E86;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#x5728;&#x56FE;&#x5C42;&#x6811;&#x4E2D;&#x3002;&#x8FD8;&#x6709;&#x6BCF;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x72EC;&#x7ACB;&#x7684;<strong>scale type</strong>&#xFF0C;&#x5F53;&#x7136;<strong>rounding</strong>(&#x5706;&#x89D2;)&#x4E5F;&#x662F;&#x652F;&#x6301;&#x7684;&#x3002;</p>\n<blockquote>\n<p>&#x5176;&#x5B9E;&#x9664;&#x4E86;&#x8FD9;5&#x4E2A;&#x5206;&#x652F;&#xFF0C;&#x4E0E;&#x5B83;&#x4EEC;&#x540C;&#x4E00;&#x5C42;&#x6B21;&#x7684;&#x8FD8;&#x6709;<strong>background image</strong>&#x4E0E;<strong>overlay image</strong>&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x4F4D;&#x4E8E;<strong>placeholder image</strong>&#x4E4B;&#x524D;&#x4E0E;<strong>failure image</strong>&#x4E4B;&#x540E;&#x3002;<strong>background</strong>&#x76F8;&#x4FE1;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x56E0;&#x4E3A;&#x56FE;&#x7247;&#x90FD;&#x652F;&#x6301;<strong>background</strong>&#x4E0E;<strong>src</strong>&#xFF0C;<strong>overlay</strong>&#x4E3A;&#x56FE;&#x5C42;&#x8986;&#x76D6;&#x3002;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x6784;&#x4E2D;&#x663E;&#x793A;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4E5F;&#x4E0D;&#x5F97;&#x800C;&#x77E5;&#xFF0C;&#x731C;&#x6D4B;&#x53EF;&#x80FD;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x5E76;&#x4E0D;&#x662F;<strong>Fresco</strong>&#x4E3B;&#x8981;&#x5E38;&#x7528;&#x7684;&#x7279;&#x6027;&#x3002;</p>\n</blockquote>\n<p>&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;&#x56FE;&#x5C42;&#x7ED3;&#x6784;&#x662F;&#x901A;&#x8FC7;<strong>layers</strong>&#x6570;&#x7EC4;&#x6765;&#x4F53;&#x73B0;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x6765;&#x770B;&#x4E0B;<strong>GenericDraweeHierarchy</strong>&#x7684;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div></pre></td><td class=\"code\"><pre><div class=\"line\">GenericDraweeHierarchy(GenericDraweeHierarchyBuilder builder) {</div><div class=\"line\">  mResources = builder.getResources();</div><div class=\"line\">  mRoundingParams = builder.getRoundingParams();</div><div class=\"line\"> </div><div class=\"line\">  mActualImageWrapper = new ForwardingDrawable(mEmptyActualImageDrawable);</div><div class=\"line\"> </div><div class=\"line\">  int numOverlays = (builder.getOverlays() != null) ? builder.getOverlays().size() : 1;</div><div class=\"line\">  numOverlays += (builder.getPressedStateOverlay() != null) ? 1 : 0;</div><div class=\"line\"> </div><div class=\"line\">  // layer indices and count</div><div class=\"line\">  int numLayers = OVERLAY_IMAGES_INDEX + numOverlays;</div><div class=\"line\"> </div><div class=\"line\">  // array of layers</div><div class=\"line\">  Drawable[] layers = new Drawable[numLayers];</div><div class=\"line\">  layers[BACKGROUND_IMAGE_INDEX] = buildBranch(builder.getBackground(), null);</div><div class=\"line\">  layers[PLACEHOLDER_IMAGE_INDEX] = buildBranch(</div><div class=\"line\">      builder.getPlaceholderImage(),</div><div class=\"line\">      builder.getPlaceholderImageScaleType());</div><div class=\"line\">  layers[ACTUAL_IMAGE_INDEX] = buildActualImageBranch(</div><div class=\"line\">      mActualImageWrapper,</div><div class=\"line\">      builder.getActualImageScaleType(),</div><div class=\"line\">      builder.getActualImageFocusPoint(),</div><div class=\"line\">      builder.getActualImageColorFilter());</div><div class=\"line\">  layers[PROGRESS_BAR_IMAGE_INDEX] = buildBranch(</div><div class=\"line\">      builder.getProgressBarImage(),</div><div class=\"line\">      builder.getProgressBarImageScaleType());</div><div class=\"line\">  layers[RETRY_IMAGE_INDEX] = buildBranch(</div><div class=\"line\">      builder.getRetryImage(),</div><div class=\"line\">      builder.getRetryImageScaleType());</div><div class=\"line\">  layers[FAILURE_IMAGE_INDEX] = buildBranch(</div><div class=\"line\">      builder.getFailureImage(),</div><div class=\"line\">      builder.getFailureImageScaleType());</div><div class=\"line\">  if (numOverlays &gt; 0) {</div><div class=\"line\">    int index = 0;</div><div class=\"line\">    if (builder.getOverlays() != null) {</div><div class=\"line\">      for (Drawable overlay : builder.getOverlays()) {</div><div class=\"line\">        layers[OVERLAY_IMAGES_INDEX + index++] = buildBranch(overlay, null);</div><div class=\"line\">      }</div><div class=\"line\">    } else {</div><div class=\"line\">      index = 1; // reserve space for one overlay</div><div class=\"line\">    }</div><div class=\"line\">    if (builder.getPressedStateOverlay() != null) {</div><div class=\"line\">      layers[OVERLAY_IMAGES_INDEX + index] = buildBranch(builder.getPressedStateOverlay(), null);</div><div class=\"line\">    }</div><div class=\"line\">  }</div><div class=\"line\"> </div><div class=\"line\">  // fade drawable composed of layers</div><div class=\"line\">  mFadeDrawable = new FadeDrawable(layers);</div><div class=\"line\">   mFadeDrawable.setTransitionDuration(builder.getFadeDuration());</div><div class=\"line\"> </div><div class=\"line\">  // rounded corners drawable (optional)</div><div class=\"line\">  Drawable maybeRoundedDrawable =</div><div class=\"line\">      WrappingUtils.maybeWrapWithRoundedOverlayColor(mFadeDrawable, mRoundingParams);</div><div class=\"line\"> </div><div class=\"line\">  // top-level drawable</div><div class=\"line\">  mTopLevelDrawable = new RootDrawable(maybeRoundedDrawable);</div><div class=\"line\">  mTopLevelDrawable.mutate();</div><div class=\"line\"> </div><div class=\"line\">  resetFade();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x7684;&#x770B;&#x51FA;&#x4E0D;&#x7BA1;<strong>overlay</strong>&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5B83;&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#x56FE;&#x5C42;&#x5C42;&#x6B21;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x5728;<strong>OVERLAY_IMAGES_INDEX</strong>&#x4E4B;&#x540E;&#x589E;&#x52A0;&#x56FE;&#x5C42;&#x5C42;&#x6B21;&#x3002;<strong>layers</strong>&#x662F;&#x4E00;&#x4E2A;<strong>Drawable</strong>&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;<em>Drawable buildBranch(@Nullable Drawable drawable, @Nullable ScaleType scaleType)</em> &#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;<strong>Drawable</strong>&#x3002;&#x5728;&#x6700;&#x540E;&#xFF0C;&#x521B;&#x5EFA;&#x4E86;<strong>FadeDrawable</strong>&#x5E76;&#x5C06;<strong>layers</strong>&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;<strong>FadeDrawable</strong>&#x7684;&#x7279;&#x6027;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x7709;&#x76EE;&#x4E86;&#x5427;&#xFF0C;&#x5176;&#x5B9E;&#x5B83;&#x5185;&#x90E8;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;<strong>Drawable</strong>&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x4E4B;&#x540E;<strong>RootDrawable</strong>&#x4E5F;&#x51FA;&#x73B0;&#x4E86;(&#x5173;&#x4E8E;<strong>Drawable</strong>&#x6587;&#x7AE0;&#x540E;&#x9762;&#x4F1A;&#x7EDF;&#x4E00;&#x5206;&#x6790;)&#xFF0C;&#x8FD9;&#x6837;&#x4E4B;&#x524D;&#x6240;&#x63D0;&#x5230;&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x3002;</p>\n<p>&#x65E2;&#x7136;<strong>actual image</strong>&#x662F;&#x4E00;&#x5B9A;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x5B83;&#x771F;&#x6B63;&#x5C55;&#x793A;&#x4E4B;&#x524D;<strong>image</strong>&#x4E2D;&#x7684;&#x663E;&#x793A;&#x7528;&#x4EC0;&#x4E48;&#x6765;&#x63A7;&#x5236;&#x7684;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x6240;&#x63D0;&#x5230;&#x7684;<strong>SettableDraweeHierarchy</strong>&#x6765;&#x63A7;&#x5236;&#x3002;&#x5728;&#x771F;&#x5B9E;&#x7684;&#x56FE;&#x7247;&#x5C55;&#x793A;&#x51FA;&#x6765;&#x4E4B;&#x524D;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5C55;&#x793A;<strong>placeholder image</strong>&#x7B49;&#x76F8;&#x5173;&#x56FE;&#x5C42;&#x3002;&#x5177;&#x4F53;&#x7684;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x5B83;&#x91CC;&#x9762;&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"setImage\"><a href=\"#setImage\" class=\"headerlink\" title=\"setImage\"></a>setImage</h2><p>&#x8FD9;&#x91CC;&#x5C31;&#x62FF;<em>void setImage(Drawable drawable, float progress, boolean immediate)</em> &#x6765;&#x8FDB;&#x884C;&#x6DF1;&#x5165;&#x5206;&#x6790;&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void setImage(Drawable drawable, float progress, boolean immediate) {</div><div class=\"line\">  drawable = WrappingUtils.maybeApplyLeafRounding(drawable, mRoundingParams, mResources);</div><div class=\"line\">  drawable.mutate();</div><div class=\"line\">  mActualImageWrapper.setDrawable(drawable);</div><div class=\"line\">  mFadeDrawable.beginBatchMode();</div><div class=\"line\">  fadeOutBranches();</div><div class=\"line\">  fadeInLayer(ACTUAL_IMAGE_INDEX);</div><div class=\"line\">  setProgress(progress);</div><div class=\"line\">  if (immediate) {</div><div class=\"line\">    mFadeDrawable.finishTransitionImmediately();</div><div class=\"line\">  }</div><div class=\"line\">  mFadeDrawable.endBatchMode();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9996;&#x5148;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x4F7F;&#x7528;<strong>WrappingUtils</strong>&#x5DE5;&#x5177;&#x7C7B;&#x5E76;&#x4E14;&#x7ED3;&#x5408;<strong>RoundingParams</strong>&#x53C2;&#x6570;&#x6765;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x9644;&#x5E26;&#x5706;&#x89D2;&#x7684;<strong>Drawable</strong>&#x3002;&#x7136;&#x540E;&#x5C06;&#x65B0;&#x7684;<strong>Drawable</strong>&#x4EA4;&#x7531;<strong>mActualImageWrapper</strong>&#xFF0C;&#x7ED3;&#x5408;&#x4E0A;&#x9762;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x679C;&#x5206;&#x6790;&#xFF0C;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#x77E5;&#x9053;&#x8FD9;&#x5C31;&#x662F;&#x9700;&#x8981;&#x771F;&#x5B9E;&#x663E;&#x793A;&#x7684;&#x56FE;&#x5C42;&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;<strong>ForwardingDrawable</strong>&#x7C7B;&#x578B;&#xFF0C;&#x8BE5;&#x7C7B;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x4F20;&#x5165;&#x7684;&#x76EE;&#x6807;<strong>Drawable</strong>&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x539F;&#x751F;&#x65B9;&#x6CD5;&#x64CD;&#x4F5C;&#x3002;&#x4E0B;&#x4E00;&#x6B65;&#x8C03;&#x7528;<strong>FadeDrawable</strong>&#x7684;<em>beginBatchMode()</em>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x4E3B;&#x8981;&#x4E3A;&#x4E86;&#x56FE;&#x5C42;&#x6279;&#x5904;&#x7406;&#x505A;&#x6807;&#x8BB0;&#xFF0C;&#x9632;&#x6B62;&#x5728;&#x6279;&#x5904;&#x7406;&#x65F6;&#x8FDB;&#x884C;<strong>invalidate</strong>&#x64CD;&#x4F5C;&#x3002;&#x76F4;&#x5230;&#x6700;&#x540E;&#x7684;<em>endBatchMode()</em>&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4E4B;&#x540E;&#x624D;&#x6807;&#x8BC6;&#x7740;&#x56FE;&#x5C42;&#x6279;&#x5904;&#x7406;&#x64CD;&#x4F5C;&#x7ED3;&#x675F;&#x3002;&#x8BE5;&#x6279;&#x5904;&#x7406;&#x64CD;&#x4F5C;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5C06;<strong>actual image</strong>&#x56FE;&#x5C42;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x6240;&#x4EE5;&#x9996;&#x5148;&#x8C03;&#x7528;<em>fadeOutBranches()</em>&#x65B9;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void fadeOutBranches() {</div><div class=\"line\">  fadeOutLayer(PLACEHOLDER_IMAGE_INDEX);</div><div class=\"line\">  fadeOutLayer(ACTUAL_IMAGE_INDEX);</div><div class=\"line\">  fadeOutLayer(PROGRESS_BAR_IMAGE_INDEX);</div><div class=\"line\">  fadeOutLayer(RETRY_IMAGE_INDEX);</div><div class=\"line\">  fadeOutLayer(FAILURE_IMAGE_INDEX);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x5BF9;&#x4E0A;&#x8FF0;&#x63D0;&#x5230;&#x7684;&#x6240;&#x6709;&#x56FE;&#x5C42;&#x8FDB;&#x884C;<em>fadeOutLayer()</em>&#x64CD;&#x4F5C;&#xFF0C;&#x7EE7;&#x7EED;&#x8FDB;&#x5165;<em>fadeOutLayer()</em>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void fadeOutLayer(int index) {</div><div class=\"line\">  if (index &gt;= 0) {</div><div class=\"line\">    mFadeDrawable.fadeOutLayer(index);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x4E86;<strong>FadeDrawable</strong>&#x7684;<em>fadeOutLayer()</em>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void fadeOutLayer(int index) {</div><div class=\"line\">  mTransitionState = TRANSITION_STARTING;</div><div class=\"line\">  mIsLayerOn[index] = false;</div><div class=\"line\">  invalidateSelf();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x8FC7;<strong>FadeDrawable</strong>&#x672C;&#x8D28;&#x4E0A;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x65F6;&#x4E00;&#x4E2A;<strong>Drawable</strong>&#x6570;&#x7EC4;&#xFF0C;&#x5185;&#x90E8;&#x90FD;&#x662F;&#x56F4;&#x7ED5;&#x7740;&#x6570;&#x7EC4;&#x6574;&#x4F53;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5BF9;&#x5E94;&#x7684;&#x8FD8;&#x6709;<em>fadeInLayer()</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void fadeInLayer(int index) {</div><div class=\"line\">  if (index &gt;= 0) {</div><div class=\"line\">    mFadeDrawable.fadeInLayer(index);</div><div class=\"line\">  }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5728;<strong>FadeDrawable</strong>&#x4E2D;&#x9664;&#x4E86;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x76F8;&#x5E94;&#x7684;<strong>Drawable</strong>&#x6570;&#x7EC4;<strong>mLayers</strong>&#xFF0C;&#x8FD8;&#x6709;&#x4E0E;&#x5176;&#x76F8;&#x5BF9;&#x5E94;&#x7684;<strong>mIsLayerOn</strong>&#x5E03;&#x5C14;&#x6570;&#x7EC4;&#xFF0C;&#x8BE5;&#x6570;&#x7EC4;&#x7528;&#x6765;&#x6807;&#x8BC6;&#x5404;&#x4E2A;<strong>Hierarchy</strong>&#x4E2D;&#x7684;&#x56FE;&#x5C42;&#x662F;&#x5426;&#x9700;&#x8981;&#x5C55;&#x793A;&#x3002;&#x6240;&#x4EE5;<em>fadeOutLayer()</em>&#x662F;&#x5BF9;<strong>index</strong>&#x5904;&#x7684;&#x56FE;&#x5C42;&#x8FDB;&#x884C;&#x9690;&#x85CF;&#x6807;&#x8BC6;&#x3002;&#x6700;&#x7EC8;&#x7684;&#x663E;&#x9690;&#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x8F6C;&#x5316;&#x4E3A;&#x5728;<em>void draw(Canvas canvas)</em>&#x65B9;&#x6CD5;&#x4E2D;&#x8FDB;&#x884C;<strong>alpha</strong>&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x90A3;&#x4E48;&#x518D;&#x56DE;&#x5230;&#x4E4B;&#x524D;&#x7684;<em>setImage()</em>&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;<em>fadeOutBranches()</em>&#x662F;&#x5BF9;&#x76F8;&#x5173;&#x7684;&#x56FE;&#x5C42;&#x8FDB;&#x884C;&#x9690;&#x85CF;&#x6807;&#x8BC6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x901A;&#x8FC7;<em>fadeInLayer(ACTUAL_IMAGE_INDEX)</em>&#x65B9;&#x6CD5;&#x6539;&#x53D8;<strong>actual image</strong>&#x56FE;&#x5C42;&#x7684;&#x6807;&#x8BC6;&#xFF0C;&#x5C06;&#x5B83;&#x6539;&#x53D8;&#x6210;&#x663E;&#x793A;&#x72B6;&#x6001;&#x3002;&#x6700;&#x540E;&#x5982;&#x679C;&#x6709;<strong>progressBar image</strong>&#x56FE;&#x5C42;&#x7684;&#x8BDD;&#xFF0C;&#x4E5F;&#x5C06;&#x4F1A;&#x7531;<em>setProgress(progress)</em>&#x65B9;&#x6CD5;&#x6765;&#x4F53;&#x73B0;&#x3002;<strong>immediate</strong>&#x662F;&#x7528;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E4B;&#x540E;&#x7684;&#x663E;&#x9690;&#x64CD;&#x4F5C;&#x7ACB;&#x9A6C;&#x5B9E;&#x73B0;&#x6216;&#x8005;&#x6E10;&#x53D8;&#x8FC7;&#x6E21;&#x5B9E;&#x73B0;(&#x5185;&#x90E8;&#x5C31;&#x662F;&#x5BF9;alpha&#x8FDB;&#x884C;&#x767E;&#x5206;&#x6BD4;&#x64CD;&#x4F5C;&#xFF0C;&#x5185;&#x90E8;&#x6709;&#x4E2A;mDurationMs&#xFF0C;&#x8BE5;&#x65F6;&#x95F4;&#x503C;&#x4E5F;&#x662F;&#x6587;&#x7AE0;&#x5F00;&#x5934;&#x63D0;&#x5230;&#x7684;builder&#x4E2D;&#x7684;fadeDuration)&#x3002;&#x8FD9;&#x6837;&#x6574;&#x4E2A;&#x7684;&#x5B9E;&#x9645;&#x56FE;&#x7247;&#x5C55;&#x793A;&#x6D41;&#x7A0B;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5206;&#x6790;&#x5B8C;&#x6BD5;&#xFF0C;&#x6240;&#x4EE5;<strong>Hierarchy</strong>&#x4E2D;&#x6700;&#x91CD;&#x8981;&#x7684;&#x8FD8;&#x662F;&#x5BF9;&#x56FE;&#x5C42;&#x6982;&#x5FF5;&#x7684;&#x7406;&#x89E3;&#x3002;&#x4E0B;&#x9762;&#x518D;&#x5BF9;<strong>GenericDraweeHierarchy</strong>&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x5176;&#x5B83;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7B80;&#x8981;&#x7684;&#x8BF4;&#x660E;&#xFF1A;</p>\n<ul>\n<li><em>Drawable buildActualImageBranch(Drawable drawable, @Nullable ScaleType scaleType, @Nullable PointF focusPoint, @Nullable ColorFilter colorFilter)</em> &#x6784;&#x5EFA;&#x5B9E;&#x9645;&#x5C55;&#x793A;&#x56FE;&#x7247;&#x7684;&#x56FE;&#x5C42;&#x5206;&#x652F;&#xFF0C;&#x5185;&#x90E8;&#x5BF9;&#x4E8E;<strong>Drawable</strong>&#x7684;&#x521B;&#x5EFA;&#x8FD8;&#x662F;&#x501F;&#x52A9;<strong>WrappingUtils</strong>&#x5DE5;&#x5177;&#x7C7B;</li>\n<li><em>Drawable buildBranch(@Nullable Drawable drawable, @Nullable ScaleType scaleType)</em> &#x6784;&#x5EFA;&#x9664;&#x5B9E;&#x9645;&#x5C55;&#x793A;&#x56FE;&#x7247;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x5B83;&#x56FE;&#x5C42;&#x5206;&#x652F;&#xFF0C;<strong>Drawable</strong>&#x7684;&#x521B;&#x5EFA;&#x4E5F;&#x662F;&#x501F;&#x52A9;<strong>WrappingUtils</strong>&#x5DE5;&#x5177;&#x7C7B;</li>\n<li><em>void resetFade()</em> &#x521D;&#x59CB;&#x5316;&#x56FE;&#x5C42;&#x7ED3;&#x6784;</li>\n</ul>\n<blockquote>\n<p>&#x4E3B;&#x8981;&#x7684;&#x5C31;&#x8FD9;&#x51E0;&#x4E2A;&#x5427;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x90FD;&#x5DF2;&#x7ECF;&#x5728;&#x4E0A;&#x9762;&#x5206;&#x6790;&#x6D41;&#x7A0B;&#x4E2D;&#x8BE6;&#x7EC6;&#x8BF4;&#x660E;&#x4E86;&#x3002;</p>\n</blockquote>\n<h1 id=\"Drawable\"><a href=\"#Drawable\" class=\"headerlink\" title=\"Drawable\"></a>Drawable</h1><p>&#x6700;&#x540E;&#x518D;&#x6574;&#x7406;&#x4E00;&#x4E0B;<strong>Fresco</strong>&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>Drawable</strong>&#x5B50;&#x7C7B;</p>\n<ol>\n<li><strong>ArrayDrawable</strong>&#xFF1A;<strong>Drawable</strong>&#x6570;&#x7EC4;&#x7684;&#x96C6;&#x5408;&#x4F53;&#xFF0C;&#x901A;&#x8FC7;<strong>layers</strong>&#x6570;&#x7EC4;&#x6765;&#x7BA1;&#x7406;<strong>Drawable</strong>&#xFF0C;&#x5185;&#x90E8;&#x7684;&#x90FD;&#x662F;&#x5BF9;&#x6570;&#x7EC4;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;<strong>Drawable</strong>&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E0E;<strong>Android</strong>&#x539F;&#x751F;&#x7684;<strong>LayerDrawable</strong>&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x5E76;&#x4E0D;&#x652F;&#x6301;<strong>add</strong>&#x4E0E;<strong>remove</strong>&#x64CD;&#x4F5C;</li>\n<li><strong>ForwardingDrawable</strong>&#xFF1A;&#x5BF9;&#x4F20;&#x5165;&#x7684;&#x76EE;&#x6807;<strong>Drawable</strong>&#x5373;&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#x5904;&#x7406;&#xFF0C;&#x8BE5;&#x65B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x540C;&#x65F6;&#x4FDD;&#x7559;&#x76EE;&#x6807;<strong>Drawable</strong>&#x7684;&#x5404;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x4F9D;&#x8D56;&#x4E0E;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x7EC6;&#x8282;&#x5B9E;&#x73B0;&#xFF0C;&#x63D0;&#x9AD8;&#x65B0;&#x7C7B;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x8BE5;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x79F0;&#x4E4B;&#x4E3A;&#x590D;&#x5408;&#x3002;<strong>Fresco</strong>&#x4E2D;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x81EA;&#x5B9A;&#x4E49;<strong>Drawable</strong>&#x90FD;&#x662F;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x3002;</li>\n<li><strong>AutoRotateDrawable</strong>&#xFF1A;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<strong>ForwardingDrawable</strong>&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5BF9;<strong>Drawable</strong>&#x7684;&#x65CB;&#x8F6C;&#x64CD;&#x4F5C;</li>\n<li><strong>FadeDrawable</strong>&#xFF1A;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<strong>ArrayDrawable</strong>&#xFF0C;&#x4E4B;&#x524D;&#x4E5F;&#x8BE6;&#x7EC6;&#x63D0;&#x5230;&#x8FC7;&#xFF0C;<strong>Hierarchy</strong>&#x4E2D;&#x7684;&#x4E3B;&#x8981;&#x56FE;&#x5C42;&#x96C6;&#x5408;&#x4F53;&#x3002;&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;<strong>mLayers</strong>&#x4E0E;<strong>mIsLayerOn</strong>&#x6570;&#x7EC4;&#x6765;&#x63A7;&#x5236;&#x6570;&#x7EC4;&#x4E2D;&#x5404;&#x4E2A;<strong>Drawable</strong>&#x7684;<strong>alpha</strong>&#x503C;&#xFF0C;&#x5373;&#x663E;&#x9690;</li>\n<li><strong>MatrixDrawable</strong>&#xFF1A;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<strong>ForwardingDrawable</strong>&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#x901A;&#x8FC7;&#x77E9;&#x9635;&#x6765;&#x6539;&#x53D8;<strong>Drawable</strong>&#x72B6;&#x6001;&#x3002;</li>\n<li><strong>OrientedDrawable</strong>&#xFF1A;&#x5B83;&#x4E5F;&#x7EE7;&#x627F;&#x4E8E;<strong>ForwardingDrawable</strong>&#xFF0C;&#x5B83;&#x4E0D;&#x540C;&#x4E8E;<strong>AutoRotateDrawable</strong>&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x53EA;&#x652F;&#x6301;90&#x5EA6;&#x7684;&#x500D;&#x6570;&#x89D2;&#x5EA6;&#x65CB;&#x8F6C;&#x3002;</li>\n<li><strong>ProgressBarDrawable</strong>&#xFF1A;&#x8FDB;&#x5EA6;&#x6761;<strong>Drawable</strong>&#xFF0C;&#x652F;&#x6301;&#x6A2A;&#x7AD6;&#x65B9;&#x5411;&#x3002;</li>\n<li><strong>RoundedBitmapDrawable</strong>&#xFF1A;&#x7EE7;&#x627F;&#x4E8E;<strong>BitmapDrawable</strong>&#xFF0C;&#x6839;&#x636E;<strong>Bitmap</strong>&#x6765;&#x521B;&#x5EFA;&#x6709;&#x5173;&#x5706;&#x89D2;&#x7684;<strong>Drawable</strong>&#xFF0C;&#x4E3B;&#x8981;&#x5728;<strong>WrappingUtils</strong>&#x7C7B;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x4F8B;&#x6784;&#x5EFA;&#x5168;&#x65B0;&#x7684;&#x5706;&#x89D2;<strong>Drawable</strong></li>\n<li><strong>RoundedColorDrawable</strong>&#xFF1A;&#x7EE7;&#x627F;&#x4E8E;<strong>Drawable</strong>&#xFF0C;&#x6839;&#x636E;<strong>Color</strong>&#x6765;&#x521B;&#x5EFA;&#x5706;&#x89D2;<strong>Drawable</strong>&#xFF0C;&#x4E3B;&#x8981;&#x5728;<strong>WrappingUtils</strong>&#x7C7B;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x4F8B;&#x6784;&#x5EFA;&#x5168;&#x65B0;&#x7684;&#x5706;&#x89D2;<strong>Drawable</strong></li>\n<li><strong>RoundedCornersDrawable</strong>&#xFF1A;&#x7EE7;&#x627F;&#x4E8E;<strong>ForwardingDrawable</strong>&#xFF0C;&#x7528;&#x4E8E;&#x8BBE;&#x8BA1;<strong>overLay</strong>&#x8986;&#x76D6;&#x56FE;&#x7247;&#x5706;&#x89D2;&#xFF0C;&#x4E3B;&#x8981;&#x5728;<strong>WrappingUtils</strong>&#x7C7B;&#x4E2D;&#x4F7F;&#x7528;</li>\n<li><strong>ScaleTypeDrawable</strong>&#xFF1A;&#x7EE7;&#x627F;&#x4E8E;<strong>ForwardingDrawable</strong>&#xFF0C;&#x7528;&#x4E8E;&#x7F29;&#x653E;&#x7C7B;&#x578B;&#x7684;<strong>Drawable</strong></li>\n</ol>\n<h1 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h1><p>&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x662F;&#x5206;&#x6790;<strong>Fresco</strong>&#x4E2D;&#x6709;&#x5173;<strong>Hierarchy</strong>&#x76F8;&#x5173;&#x7684;&#x5B9E;&#x73B0;&#x4E0E;&#x539F;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x6790;&#x53D1;&#x73B0;<strong>Hierarchy</strong>&#x4E2D;&#x90FD;&#x662F;&#x5BF9;<strong>Drawable</strong>&#x56FE;&#x5C42;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5176;&#x5B83;&#x7684;&#x7F13;&#x5B58;&#x3001;&#x8BF7;&#x6C42;&#x4E4B;&#x7C7B;&#x7684;&#x903B;&#x8F91;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;<strong>Fresco</strong>&#x7684;&#x65F6;&#x5019;&#x53EA;&#x4F7F;&#x7528;<strong>Hierarchy</strong>&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4E0E;&#x522B;&#x7684;<strong>ImageView</strong>&#x6CA1;&#x6709;&#x591A;&#x5927;&#x7684;&#x533A;&#x522B;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x56FE;&#x5C42;&#x64CD;&#x4F5C;&#x4E0E;&#x7F13;&#x5B58;&#x63A7;&#x5236;&#x90FD;&#x5728;<strong>Controller</strong>&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x8FDB;&#x5165;<strong>Controller</strong>&#x89E3;&#x6790;&#xFF0C;&#x6765;&#x8BE6;&#x7EC6;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x3002;</p>\n<p><a href=\"https://github.com/idisfkj/Fresco-Source-Analysis\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;Github&#x5730;&#x5740;</a></p>\n"},{"title":"Fresco源码分析之DraweeView","url":"https://www.rousetime.com/2017/11/28/Fresco源码分析之DraweeView/","content":"<p>&#x5728;<code>Android</code>&#x4E2D;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x6846;&#x67B6;&#x5F88;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<code>Fresco</code>&#x3001;<code>Picasso</code>&#x3001;<code>Glide</code>&#x4E0E;<code>Imageloader</code>&#x3002;&#x5B83;&#x4EEC;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x4F46;&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x65B9;&#x4FBF;&#x7B80;&#x5355;&#x3001;&#x53EF;&#x914D;&#x7F6E;&#x6027;&#x9AD8;&#x4E0E;&#x63D0;&#x4F9B;&#x826F;&#x597D;&#x7684;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x3002;&#x7531;&#x4E8E;&#x5E73;&#x5E38;&#x4E3B;&#x8981;&#x7528;&#x7684;&#x8FD8;&#x662F;<code>Fresco</code>&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6709;&#x5FC5;&#x8981;&#x5BF9;<code>Fresco</code>&#x7684;&#x539F;&#x7406;&#x8FDB;&#x884C;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x3002;&#x8FD9;&#x6837;&#x5BF9;&#x4E8E;&#x4EE5;&#x540E;&#x7684;&#x4F7F;&#x7528;&#x4E0E;&#x7406;&#x89E3;&#x5C06;&#x4F1A;&#x5F97;&#x5230;&#x5DE8;&#x5927;&#x7684;&#x5E2E;&#x52A9;&#x3002;</p>\n<p><code>Fresco</code>&#x662F;&#x4E13;&#x6CE8;&#x4E8E;&#x5BF9;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x4EE5;&#x56FE;&#x7247;&#x4E3A;&#x4E3B;&#x7684;<code>App</code>&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x3002;<code>Fresco</code>&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x7684;&#x5C55;&#x793A;&#x652F;&#x6301;&#x591A;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;<code>backgroud image</code>(&#x80CC;&#x666F;&#x56FE;)&#x3001;<code>placeholder image</code>(&#x5360;&#x4F4D;&#x56FE;)&#x3001;<code>actual image</code>(&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;)&#x3001;<code>progress bar image</code>(&#x8FDB;&#x5EA6;&#x6761;)&#x3001;<code>retry image</code>(&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;)&#x3001;<code>failure image</code>(&#x5931;&#x8D25;&#x56FE;&#x7247;)&#x4E0E;<code>overlay image</code>(&#x53E0;&#x52A0;&#x56FE;)&#x3002;<code>Fresco</code>&#x65E2;&#x7136;&#x652F;&#x6301;&#x8FD9;&#x4E48;&#x591A;&#x56FE;&#x7247;&#x5C55;&#x793A;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5BF9;&#x8FD9;&#x6B21;&#x56FE;&#x5C42;&#x7684;&#x7BA1;&#x7406;&#x6A21;&#x5F0F;&#x53C8;&#x662F;&#x600E;&#x4E48;&#x6837;&#x7684;&#x5462;&#xFF1F;<code>Fresco</code>&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;&#x56FE;&#x5C42;&#x7684;&#x7BA1;&#x7406;&#x90FD;&#x4EA4;&#x7ED9;&#x4E86;<code>Hierarchy</code>&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x56FE;&#x5C42;&#x7684;&#x6570;&#x636E;&#x90FD;&#x901A;&#x8FC7;<code>Controller</code>&#x6765;&#x8BBE;&#x7F6E;&#x3002;&#x5148;&#x4E0D;&#x5206;&#x6790;&#x8FD9;&#x4E9B;&#xFF0C;&#x8FD9;&#x4E9B;&#x540E;&#x7EED;&#x6587;&#x7AE0;&#x4F1A;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#xFF0C;&#x4ECA;&#x5929;&#x5148;&#x4ECE;<code>Fresco</code>&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x4EF6;&#x5F00;&#x59CB;&#x3002;</p>\n<h2 id=\"SimpleDraweeView\"><a href=\"#SimpleDraweeView\" class=\"headerlink\" title=\"SimpleDraweeView\"></a>SimpleDraweeView</h2><blockquote>\n<p>&#x9996;&#x5148;&#x8FD9;&#x662F;&#x5BF9;<code>Fresco</code>&#x7684;&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x770B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E4B;&#x524D;&#x4F60;&#x5E94;&#x8BE5;&#x8981;&#x6709;&#x4F7F;&#x7528;<code>Fresco</code>&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7684;&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x770B;&#x4E0B;<a href=\"https://www.fresco-cn.org/docs/getting-started.html\" target=\"_blank\" rel=\"external\">Fresco&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p>\n</blockquote>\n<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Fresco</code>&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x591A;&#x7684;&#x8FD8;&#x662F;&#x5DF2;&#x7ECF;&#x5C01;&#x88C5;&#x597D;&#x7684;<code>SimpleDraweeView</code>&#xFF0C;&#x800C;&#x5728;<code>SimpleDraweeView</code>&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;<code>init()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void init(Context context, @Nullable AttributeSet attrs) {</div><div class=\"line\">    if (isInEditMode()) {</div><div class=\"line\">      return;</div><div class=\"line\">    }</div><div class=\"line\">    Preconditions.checkNotNull(</div><div class=\"line\">        sDraweeControllerBuilderSupplier,</div><div class=\"line\">        &quot;SimpleDraweeView was not initialized!&quot;);</div><div class=\"line\">    mSimpleDraweeControllerBuilder = sDraweeControllerBuilderSupplier.get();</div><div class=\"line\"> </div><div class=\"line\">    if (attrs != null) {</div><div class=\"line\">      TypedArray gdhAttrs = context.obtainStyledAttributes(</div><div class=\"line\">          attrs,</div><div class=\"line\">          R.styleable.SimpleDraweeView);</div><div class=\"line\">      try {</div><div class=\"line\">        if (gdhAttrs.hasValue(R.styleable.SimpleDraweeView_actualImageUri)) {</div><div class=\"line\">          setImageURI(</div><div class=\"line\">              Uri.parse(gdhAttrs.getString(R.styleable.SimpleDraweeView_actualImageUri)),</div><div class=\"line\">              null);</div><div class=\"line\">        } else if (gdhAttrs.hasValue((R.styleable.SimpleDraweeView_actualImageResource))) {</div><div class=\"line\">          int resId = gdhAttrs.getResourceId(</div><div class=\"line\">              R.styleable.SimpleDraweeView_actualImageResource,</div><div class=\"line\">              NO_ID);</div><div class=\"line\">          if (resId != NO_ID) {</div><div class=\"line\">            setActualImageResource(resId);</div><div class=\"line\">          }</div><div class=\"line\">        }</div><div class=\"line\">      } finally {</div><div class=\"line\">        gdhAttrs.recycle();</div><div class=\"line\">      }</div><div class=\"line\">    }</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5B83;&#x4F1A;&#x5BF9;<code>sDraweeControllerBuilderSupplier</code>&#x8FDB;&#x884C;<code>null</code>&#x5224;&#x65AD;&#xFF0C;&#x5982;&#x679C;&#x4E3A;<code>null</code>&#x5C06;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;<code>sDraweeControllerBuilderSupplier</code>&#x662F;&#x4F9B;&#x5E94;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x7684;<code>get</code>&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;<code>DraweeControllerBuilder</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;<code>controller</code>&#x6784;&#x9020;&#x5668;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EE5;&#x540E;&#x7684;&#x7AE0;&#x8282;&#x4F1A;&#x8BE6;&#x7EC6;&#x8BF4;&#x660E;&#x3002;&#x7A7A;&#x5224;&#x65AD;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x5728;&#x4F7F;&#x7528;<code>SimpleDraweeView</code>&#x4E4B;&#x524D;&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;<code>sDraweeControllerBuilderSupplier</code>&#x3002;&#x5728;<code>SimpleDraweeView</code>&#x4E2D;&#x6211;&#x4EEC;&#x80FD;&#x627E;&#x5230;&#x5B83;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void initialize(</div><div class=\"line\">      Supplier&lt;? extends SimpleDraweeControllerBuilder&gt; draweeControllerBuilderSupplier) {</div><div class=\"line\">    sDraweeControllerBuilderSupplier = draweeControllerBuilderSupplier;</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x662F;&#x4E00;&#x4E2A;<code>static</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;<code>SimpleDraweeView</code>&#x521D;&#x59CB;&#x5316;&#x4E4B;&#x524D;&#x52A0;&#x8F7D;&#x4E00;&#x6B21;&#x5373;&#x53EF;&#x3002;&#x8FD9;&#x662F;<code>SimpleDraweeView</code>&#x7684;&#x5173;&#x952E;&#x3002;&#x5B83;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setImageURI(Uri uri, @Nullable Object callerContext) {</div><div class=\"line\">    //&#x901A;&#x8FC7;controller &#x6765;&#x4FDD;&#x5B58;Uri &#x7B49;&#x76F8;&#x5173;&#x4FE1;&#x606F;</div><div class=\"line\">    DraweeController controller = mSimpleDraweeControllerBuilder</div><div class=\"line\">        .setCallerContext(callerContext)</div><div class=\"line\">        .setUri(uri)</div><div class=\"line\">        .setOldController(getController())</div><div class=\"line\">        .build();</div><div class=\"line\">    setController(controller);</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<code>mSimpleDraweeControllerBuilder</code>&#x6765;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;<code>Controller</code>&#xFF0C;&#x800C;<code>Controller</code>&#x662F;&#x7531;<code>build</code>&#x6A21;&#x5F0F;&#x6240;&#x521B;&#x5EFA;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x80FD;&#x770B;&#x5230;<code>uri</code>&#x4E5F;&#x4EA4;&#x7531;<code>Controller</code>&#x7BA1;&#x7406;&#x3002;&#x5176;&#x5B9E;&#x6700;&#x7EC8;<code>uri</code>&#x4F1A;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;<code>ImageRequest</code>&#xFF0C;<code>Controller</code>&#x771F;&#x6B63;&#x6301;&#x6709;&#x7684;&#x662F;<code>uri</code>&#x7684;&#x5C01;&#x88C5;&#x4F53;<code>ImageRequest</code>&#x3002;&#x5728;<code>SimpleDraweeView</code>&#x4E2D;&#x5B83;&#x4F1A;&#x91CD;&#x5199;<code>setImageURI</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x7EC8;&#x4E5F;&#x5C31;&#x662F;&#x5C06;<code>ImageView</code>&#x4E2D;&#x7684;&#x539F;&#x751F;&#x65B9;&#x6CD5;&#x7ED9;&#x8986;&#x76D6;&#x6389;&#x3002;&#x8FD8;&#x6709;&#x5176;&#x5B83;&#x7684;&#x7C7B;&#x4F3C;&#x7684;<code>setImageResource</code>&#x4E0E;<code>setImageBitmap</code>&#x7B49;&#xFF0C;<code>Fresco</code>&#x90FD;&#x5728;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x4E86;<code>@Deprecated</code>&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x8BF4;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x5C31;&#x8DDF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>ImageView</code>&#x6CA1;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF0C;&#x8FD9;&#x5C31;&#x65E0;&#x6CD5;&#x4F53;&#x9A8C;&#x5230;<code>Fresco</code>&#x7684;&#x5F3A;&#x5927;&#x7684;&#x7279;&#x6027;&#x3002;&#x5728;<code>Fresco</code>&#x4E2D;&#x7EDF;&#x4E00;&#x7531;<code>setController</code>&#x6765;&#x66FF;&#x4EE3;&#x3002;</p>\n<blockquote>\n<p>&#x5173;&#x4E8E;<code>Controller</code>&#x540E;&#x7EED;&#x6587;&#x7AE0;&#x4F1A;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x3002;</p>\n</blockquote>\n<h2 id=\"Fresco\"><a href=\"#Fresco\" class=\"headerlink\" title=\"Fresco\"></a>Fresco</h2><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6839;&#x636E;<a href=\"https://www.fresco-cn.org/docs/getting-started.html\" target=\"_blank\" rel=\"external\">Fresco&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x7684;&#x6B63;&#x5E38;&#x6B65;&#x9AA4;&#x6765;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x5C31;&#x65E0;&#x9700;&#x62C5;&#x5FC3;&#x8FD9;&#x4E00;&#x6B65;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;<code>Fresco</code>&#x4E4B;&#x524D;&#x90FD;&#x8981;&#x5148;&#x8C03;&#x7528;<code>Fresco.initialize(context)</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void initialize(</div><div class=\"line\">      Context context,</div><div class=\"line\">      @Nullable ImagePipelineConfig imagePipelineConfig,</div><div class=\"line\">      @Nullable DraweeConfig draweeConfig) {</div><div class=\"line\">    if (sIsInitialized) {</div><div class=\"line\">      FLog.w(</div><div class=\"line\">          TAG,</div><div class=\"line\">          &quot;Fresco has already been initialized! `Fresco.initialize(...)` should only be called &quot; +</div><div class=\"line\">            &quot;1 single time to avoid memory leaks!&quot;);</div><div class=\"line\">    } else {</div><div class=\"line\">      sIsInitialized = true;</div><div class=\"line\">    }</div><div class=\"line\">    // we should always use the application context to avoid memory leaks</div><div class=\"line\">    context = context.getApplicationContext();</div><div class=\"line\">    if (imagePipelineConfig == null) {</div><div class=\"line\">      //&#x521D;&#x59CB;&#x5316;ImagePipeline&#x5DE5;&#x5382;&#xFF0C;&#x5305;&#x542B;ImagePipelineConfig &#x76F8;&#x5173;&#x521D;&#x59CB;&#x5316;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</div><div class=\"line\">      // (&#x4E09;&#x7EA7;&#x7F13;&#x5B58;&#x3001;&#x56FE;&#x7247;&#x89E3;&#x7801;/&#x7F16;&#x7801;&#x3001;&#x8F6C;&#x5316;&#x3001;&#x6E10;&#x53D8;&#x3001;bitmap&#x914D;&#x7F6E;&#x3001;&#x56DB;&#x79CD;executor &#x5206;&#x522B;&#x4E3A; io&#x3001;decode&#x3001;background&#x3001;lightweight background)&#x7B49;</div><div class=\"line\">      ImagePipelineFactory.initialize(context);</div><div class=\"line\">    } else {</div><div class=\"line\">       ImagePipelineFactory.initialize(imagePipelineConfig);</div><div class=\"line\">    }</div><div class=\"line\">    //&#x521D;&#x59CB;&#x5316;Drawee&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</div><div class=\"line\">    initializeDrawee(context, draweeConfig);</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x9664;&#x4E86;&#x521D;&#x59CB;&#x5316;<code>ImagePipeline</code>&#x4E4B;&#x5916;&#xFF0C;&#x6700;&#x540E;&#x8FD8;&#x4F1A;&#x8C03;&#x7528;<code>initializeDrawee (context, draweeConfig)</code>&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<code>initializeDrawee</code>&#x505A;&#x4E86;&#x4EC0;&#x4E48;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static void initializeDrawee(</div><div class=\"line\">      Context context,</div><div class=\"line\">      @Nullable DraweeConfig draweeConfig) {</div><div class=\"line\">    //&#x6784;&#x5EFA;PipelineDraweeControllerBuilderSupplier,</div><div class=\"line\">    //&#x5176;&#x4E2D;ImagePipeline&#x3001;PipelineDraweeControllerFactory&#x3001;ControllerListener set&#x96C6;&#x5408;</div><div class=\"line\">    sDraweeControllerBuilderSupplier =</div><div class=\"line\">        new PipelineDraweeControllerBuilderSupplier(context, draweeConfig);</div><div class=\"line\">    //&#x521D;&#x59CB;&#x5316;SimpleDrawee</div><div class=\"line\">    //&#x521D;&#x59CB;&#x5316;&#x65F6;&#x901A;&#x8FC7;&#x8C03;&#x7528;PipelineDraweeControllerBuilderSupplier&#x5B9E;&#x73B0;&#x7684;Supplier&#x7684;get()&#x65B9;&#x6CD5;</div><div class=\"line\">    // &#x8FD4;&#x56DE;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;&#x5C01;&#x88C5;&#x4F53;PipelineDraweeControllerBuilder implements SimpleDraweeControllerBuilder</div><div class=\"line\">     SimpleDraweeView.initialize(sDraweeControllerBuilderSupplier);</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x4E4B;&#x524D;&#x6240;&#x63D0;&#x5230;&#x7684;<code>sDraweeControllerBuilderSupplier</code>&#x4E0E;<code>SimpleDraweeView</code>&#x4E2D;&#x5FC5;&#x987B;&#x4F18;&#x5148;&#x8C03;&#x7528;&#x7684;<code>initialize</code>&#x65B9;&#x6CD5;&#x3002;&#x76F8;&#x4FE1;&#x73B0;&#x5728;&#x5E94;&#x8BE5;&#x660E;&#x767D;&#x7684;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x4F7F;&#x7528;<code>Fresco</code>&#x4E4B;&#x524D;&#x5FC5;&#x987B;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>initialize</code>&#x65B9;&#x6CD5;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x5B83;&#x5FC5;&#x987B;&#x8981;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x5C31;&#x5305;&#x62EC;&#x4F7F;&#x7528;&#x7684;&#x63A7;&#x4EF6;<code>SimpleDraweeView</code>&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;</p>\n<h2 id=\"GenericDraweeView\"><a href=\"#GenericDraweeView\" class=\"headerlink\" title=\"GenericDraweeView\"></a>GenericDraweeView</h2><p>&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>SimpleDraweeView</code>&#x7684;&#x7236;&#x7C7B;&#x662F;<code>GenericDraweeView</code>&#xFF0C;&#x5B83;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5904;&#x7406;<code>xml</code>&#x76F8;&#x5173;&#x7684;&#x5C5E;&#x6027;&#x3002;&#x5B83;&#x4F1A;&#x901A;&#x8FC7;<code>inflateHierarchy</code>&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void inflateHierarchy(Context context, @Nullable AttributeSet attrs) {</div><div class=\"line\">    GenericDraweeHierarchyBuilder builder =</div><div class=\"line\">        GenericDraweeHierarchyInflater.inflateBuilder(context, attrs);</div><div class=\"line\">    setAspectRatio(builder.getDesiredAspectRatio());</div><div class=\"line\">    setHierarchy(builder.build());</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x662F;&#x7531;<code>GenericDraweeHierarchyBuilder</code>&#x6765;&#x7EDF;&#x4E00;&#x5C01;&#x88C5;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x3002;&#x6700;&#x7EC8;&#x901A;&#x8FC7;<code>build</code>&#x65B9;&#x6CD5;&#x6765;&#x6784;&#x5EFA;<code>GenericDraweeHierarchy</code>&#xFF0C;&#x8FD9;&#x5C31;&#x662F;<code>Fresco</code>&#x7684;&#x56FE;&#x5C42;&#x3002;&#x7136;&#x540E;&#x901A;&#x8FC7;<code>setHierarchy</code>&#x5C06;&#x56FE;&#x5C42;&#x4F20;&#x9012;&#x7ED9;<code>DraweeHolder</code>&#x3002;<code>DraweeHolder</code>&#x662F;&#x7528;&#x6765;&#x7BA1;&#x7406;<code>Hierarchy</code>&#x4E0E;<code>Controller</code>&#x7684;&#x3002;&#x800C;<code>DraweeHolder</code>&#x662F;&#x5728;&#x6700;&#x5E95;&#x5C42;&#x7684;<code>DraweeView</code>&#x4E2D;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;<code>GenericDraweeView</code>&#x7684;&#x7236;&#x7C7B;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>DraweeView</code>&#xFF0C;&#x6765;&#x770B;&#x770B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x3002;</p>\n<h2 id=\"DraweeView\"><a href=\"#DraweeView\" class=\"headerlink\" title=\"DraweeView\"></a>DraweeView</h2><p><code>DraweeView</code>&#x662F;<code>Fresco</code>&#x6700;&#x5E95;&#x5C42;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5B83;&#x5C55;&#x793A;&#x56FE;&#x7247;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<code>ImageView</code>&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x80FD;&#x505A;&#x7684;&#x4E8B;&#x4E5F;&#x65E0;&#x975E;&#x4E8E;&#x5728;&#x539F;&#x751F;<code>ImageView</code>&#x4E0A;&#x505A;&#x6269;&#x5C55;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x91CD;&#x5199;&#xFF0C;&#x4ECE;&#x800C;&#x6765;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x5957;&#x903B;&#x8F91;&#x3002;&#x5148;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public DraweeView(Context context) {</div><div class=\"line\">    super(context);</div><div class=\"line\">    init(context);</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x6CA1;&#x4EC0;&#x4E48;&#x7279;&#x522B;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5C31;&#x4E00;&#x4E2A;<code>init</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8FDB;&#x5165;<code>init</code>&#x770B;&#x770B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">/** This method is idempotent so it only has effect the first time it&apos;s called */</div><div class=\"line\">  private void init(Context context) {</div><div class=\"line\">    if (mInitialised) {</div><div class=\"line\">      return;</div><div class=\"line\">    }</div><div class=\"line\">    mInitialised = true;</div><div class=\"line\">    mDraweeHolder = DraweeHolder.create(null, context);</div><div class=\"line\">    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {</div><div class=\"line\">      ColorStateList imageTintList = getImageTintList();</div><div class=\"line\">      if (imageTintList == null) {</div><div class=\"line\">        return;</div><div class=\"line\">      }</div><div class=\"line\">      setColorFilter(imageTintList.getDefaultColor());</div><div class=\"line\">    }</div><div class=\"line\">    // In Android N and above, visibility handling for Drawables has been changed, which breaks</div><div class=\"line\">    // activity transitions with DraweeViews.</div><div class=\"line\">    mLegacyVisibilityHandlingEnabled = sGlobalLegacyVisibilityHandlingEnabled &amp;&amp;</div><div class=\"line\">        context.getApplicationInfo().targetSdkVersion &gt;= 24; //Build.VERSION_CODES.N</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B83;&#x4F1A;&#x901A;&#x8FC7;<code>mInitialised</code>&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x6E90;&#x7801;&#x6CE8;&#x91CA;&#x4E5F;&#x8BF4;&#x660E;&#x7684;&#x8BE5;&#x65B9;&#x6CD5;&#x53EA;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x521B;&#x5EFA;<code>Hierarchy</code>&#x7684;&#x4EE3;&#x4EF7;&#x592A;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x6B21;&#xFF0C;&#x4EE5;&#x540E;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x4E2A;<code>mDraweeHolder</code>&#x4E2D;&#x7684;<code>Hierarchy</code>&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x5FC5;&#x987B;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;<code>mDraweeHolder</code>&#x3002;&#x5728;<code>DraweeView</code>&#x4E2D;&#x8FD8;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<ul>\n<li><code>void setHierarchy(DH hierarchy)</code>&#x8BBE;&#x7F6E;<code>Hierarchy</code>,&#x540C;&#x65F6;&#x4F1A;&#x5C06;<code>Hierarchy</code>&#x4EA4;&#x7531;<code>mDraweeHolder</code>&#x7BA1;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x8FD8;&#x4F1A;&#x8C03;&#x7528;<code>super.setImageDrawable(mDraweeHolder.getTopLevelDrawable());</code>&#x6765;&#x5C06;<code>Hierarchy</code>&#x4E2D;&#x7684;&#x56FE;&#x5C42;&#x6811;&#x663E;&#x793A;&#x51FA;&#x6765;&#x3002;</li>\n<li><code>Drawable getTopLevelDrawable()</code>&#x4F1A;&#x901A;&#x8FC7;<code>mDraweeHolder</code>&#x4E2D;&#x7684;<code>Hierarchy</code>&#x6765;&#x83B7;&#x53D6;&#x56FE;&#x5C42;&#x6811;&#x3002;</li>\n<li><code>void setController(@Nullable DraweeController draweeController)</code>&#x8BBE;&#x7F6E;<code>Controller</code>&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x5C06;<code>Hierarchy</code>&#x4E2D;&#x7684;&#x56FE;&#x5C42;&#x6811;&#x663E;&#x793A;&#x51FA;&#x6765;&#x3002;</li>\n<li><code>void onAttachedToWindow()</code>&#x3001;<code>void onDetachedFromWindow()</code>&#x3001;<code>void onStartTemporaryDetach()</code>&#x4E0E;<code>void onFinishTemporaryDetach()</code>&#x662F;&#x6765;&#x63A7;&#x5236;&#x56FE;&#x5C42;&#x7684;&#x663E;&#x793A;&#x4E0E;&#x9690;&#x85CF;&#x3001;&#x7ED1;&#x5B9A;&#x4E0E;&#x89E3;&#x7ED1;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x5206;&#x522B;&#x4F1A;&#x8C03;&#x7528;<code>mDraweeHolder</code>&#x7684;<code>onAttach()</code>&#x4E0E;<code>onDetach()</code>&#x3002;&#x5176;&#x5B9E;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x7684;&#x8FD8;&#x662F;<code>Controller</code>&#x4E2D;&#x7684;<code>onAttach()</code>&#x4E0E;<code>onDetach()</code>&#x3002;</li>\n<li><code>boolean onTouchEvent(MotionEvent event)</code>&#x63A7;&#x5236;&#x63A7;&#x4EF6;&#x7684;&#x89E6;&#x6478;&#xFF0C;&#x5982;&#x679C;<code>Controller</code>&#x6709;&#x6548;&#x7684;&#x8BDD;&#x4F1A;&#x8C03;&#x7528;<code>Controller</code>&#x4E2D;&#x7684;<code>onTouchEvent</code>&#x3002;</li>\n<li><code>void setAspectRatio(float aspectRatio)</code>&#x7528;&#x6765;&#x8BBE;&#x7F6E;<code>DraweeView</code>&#x663E;&#x793A;&#x7684;&#x5BBD;&#x9AD8;&#x6BD4;&#x4F8B;&#x3002;</li>\n<li><code>setImageDrawable</code>&#x3001;<code>setImageBitmap</code>&#x3001;<code>setImageResource</code>&#x4E0E;<code>setImageURI</code>&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x90FD;&#x662F;&#x539F;&#x751F;<code>ImageView</code>&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5728;<code>DraweeView</code>&#x4E2D;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x90FD;&#x88AB;&#x52A0;&#x4E0A;&#x4E86;<code>@Deprecated</code>&#x6807;&#x8BB0;&#x3002;&#x6807;&#x660E;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x5B9A;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;<code>DraweeView</code>&#x5C06;&#x4F1A;&#x9000;&#x5316;&#x6210;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;<code>ImageView</code>&#x3002;&#x56E0;&#x4E3A;&#x5728;<code>DraweeView</code>&#x4E2D;&#x90FD;&#x662F;&#x901A;&#x8FC7;<code>Controller</code>&#x6765;&#x4F53;&#x73B0;&#x5B83;&#x7684;&#x7F13;&#x5B58;&#x3001;&#x52A0;&#x8F7D;&#x673A;&#x5236;&#x7B49;&#x7279;&#x6027;&#x3002;</li>\n</ul>\n<p>&#x4E0A;&#x9762;&#x8FD9;&#x4E9B;&#x5C31;&#x662F;<code>DraweeView</code>&#x7684;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x4E0E;&#x7279;&#x6027;&#xFF0C;&#x4E0D;&#x8FC7;&#x5728;<code>DraweeView</code>&#x4E2D;&#x57FA;&#x672C;&#x4E0A;&#x6BCF;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x6D89;&#x53CA;&#x5230;&#x4E86;<code>DraweeHolder</code>&#xFF0C;&#x90A3;&#x5B83;&#x5230;&#x5E95;&#x662F;&#x5E72;&#x4EC0;&#x4E48;&#x7684;&#x5462;&#xFF1F;&#x522B;&#x6025;&#x4E0B;&#x9762;&#x5C31;&#x8F6E;&#x5230;&#x5B83;&#x4E86;&#x3002;</p>\n<h2 id=\"DraweeHolder\"><a href=\"#DraweeHolder\" class=\"headerlink\" title=\"DraweeHolder\"></a>DraweeHolder</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">A holder class for Drawee controller and hierarchy.</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x7684;&#x662F;&#x5B98;&#x65B9;&#x6CE8;&#x91CA;&#xFF0C;&#x8BF4;&#x660E;<code>DraweeHolder</code>&#x662F;&#x7528;&#x6765;&#x7BA1;&#x7406;<code>Hierarchy</code>&#x4E0E;<code>Controller</code>&#x7684;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#x7684;&#x6865;&#x6881;&#x3002;<code>DraweeView</code>&#x4EE5;&#x53CA;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x5B83;&#x6765;&#x95F4;&#x63A5;&#x64CD;&#x4F5C;<code>Controller</code>&#x4E0E;<code>Hierarchy</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static &lt;DH extends DraweeHierarchy&gt; DraweeHolder&lt;DH&gt; create(</div><div class=\"line\">      @Nullable DH hierarchy,</div><div class=\"line\">      Context context) {</div><div class=\"line\">    DraweeHolder&lt;DH&gt; holder = new DraweeHolder&lt;DH&gt;(hierarchy);</div><div class=\"line\">    holder.registerWithContext(context);</div><div class=\"line\">    return holder;</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x662F;&#x901A;&#x8FC7;&#x516C;&#x6709;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x81EA;&#x8EAB;&#x5B9E;&#x4F8B;&#x7684;&#x3002;&#x5728;&#x4E0A;&#x9762;&#x7684;<code>DraweeView</code>&#x7684;<code>init</code>&#x65B9;&#x6CD5;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;&#x3002;&#x5728;&#x5176;&#x5185;&#x90E8;&#x7684;<code>DraweeEventTracker</code>&#xFF0C;&#x662F;&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x4E8B;&#x4EF6;&#x7684;&#x4F20;&#x9012;&#xFF0C;&#x65B9;&#x4FBF;<code>dubug</code>&#x7684;&#x8C03;&#x8BD5;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;<code>Fresco.initialize()</code>&#x4E4B;&#x524D;&#x8C03;&#x7528;<code>DraweeEventTracker.disable()</code>&#x3002;&#x90A3;&#x4E48;&#x5269;&#x4E0B;&#x7684;&#x65B9;&#x6CD5;&#x5176;&#x5B9E;&#x57FA;&#x672C;&#x4E0A;&#x5728;<code>DraweeView</code>&#x4E2D;&#x90FD;&#x8BF4;&#x8FC7;&#x3002;</p>\n<ul>\n<li><code>onAttach()</code>&#x4E0E;<code>onDetach()</code>&#xFF0C;&#x90FD;&#x4F1A;&#x8C03;&#x7528;<code>attachOrDetachController()</code>&#xFF0C;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x5206;&#x522B;&#x8C03;&#x7528;<code>attachController()</code>&#x4E0E;<code>detachController()</code>,&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>Controller</code>&#x7684;<code>onAttach()</code>&#x4E0E;<code>onDetach()</code></li>\n<li><code>Drawable getTopLevelDrawable()</code>&#x8C03;&#x7528;<code>mHierarchy.getTopLevelDrawable()</code>&#x83B7;&#x53D6;&#x56FE;&#x5C42;&#x6811;&#x3002;</li>\n<li><code>void setController(@Nullable DraweeController draweeController)</code>&#x8BBE;&#x7F6E;<code>Controller</code>&#xFF0C;&#x5728;&#x8BBE;&#x7F6E;&#x4E4B;&#x524D;&#x4F1A;&#x5148;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x7ECF;<code>wasAttached</code>&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#x5C31;&#x5148;&#x8C03;&#x7528;<code>detachController()</code>&#xFF0C;&#x7136;&#x540E;&#x6E05;&#x9664;&#x8001;&#x7684;<code>Controller</code>&#xFF0C;&#x518D;&#x5C06;<code>Hierarchy</code>&#x8BBE;&#x7F6E;&#x5230;&#x65B0;&#x7684;<code>Controller</code>&#x4E2D;&#x3002;&#x6700;&#x540E;&#x518D;<code>attachController()</code>&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#x663E;&#x793A;&#x56FE;&#x5C42;&#x3002;</li>\n<li><code>void setHierarchy(DH hierarchy)</code>&#x8BBE;&#x7F6E;<code>Hierarchy</code>&#xFF0C;&#x5982;&#x679C;<code>Controller</code>&#x6709;&#x6548;&#x7684;&#x8BDD;&#x5C31;&#x4E0E;<code>Hierarchy</code>&#x5EFA;&#x7ACB;&#x94FE;&#x63A5;&#xFF0C;&#x5C06;<code>Hierarchy</code>&#x8BBE;&#x7F6E;&#x5230;<code>Controller</code>&#x4E2D;&#x3002;</li>\n</ul>\n<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;<code>DraweeHolder</code>&#x7684;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF0C;&#x90FD;&#x8DDF;<code>Controller</code>&#x4E0E;<code>Hierarchy</code>&#x76F8;&#x5173;&#x3002;&#x800C;<code>DraweeHolder</code>&#x53C8;&#x4E0E;<code>DraweeView</code>&#x76F8;&#x8FDE;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x8FD8;&#x662F;&#x8981;&#x56DE;&#x5230;<code>Controller</code>&#x4E0E;<code>Hierarchy</code>&#x4E2D;&#x3002;</p>\n<h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>&#x8FD9;&#x6B21;&#x4E3B;&#x8981;&#x662F;&#x5206;&#x6790;&#x4E86;<code>Fresco</code>&#x4E2D;&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x4EF6;<code>DraweeView</code>&#x4E0E;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x3002;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x60F3;&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;<code>Hierarchy</code>&#x4E0E;<code>Controller</code>&#x7684;&#x539F;&#x7406;&#xFF0C;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x4F1A;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x76F8;&#x5173;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x656C;&#x8BF7;&#x671F;&#x5F85;&#xFF01;</p>\n<p><a href=\"https://github.com/idisfkj/Fresco-Source-Analysis\" target=\"_blank\" rel=\"external\">Fresco&#x6E90;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;Github&#x5730;&#x5740;</a></p>\n"},{"title":"tensorflow-梯度下降,有这一篇就足够了","url":"https://www.rousetime.com/2017/11/06/tensorflow-梯度下降-有这一篇就足够了/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x6700;&#x8FD1;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x8D8A;&#x6765;&#x8D8A;&#x706B;&#x4E86;&#xFF0C;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x65AF;&#x4E39;&#x798F;&#x5927;&#x5B66;&#x526F;&#x6559;&#x6388;&#x5434;&#x6069;&#x8FBE;&#x90FD;&#x4EB2;&#x81EA;&#x5F55;&#x5236;&#x4E86;&#x5173;&#x4E8E;<code>Deep Learning Specialization</code>&#x7684;&#x6559;&#x7A0B;&#xFF0C;&#x5728;&#x56FD;&#x5185;&#x6380;&#x8D77;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x5B66;&#x4E60;&#x70ED;&#x6F6E;&#x3002;&#x672C;&#x7740;&#x4E0D;&#x88AB;&#x65F6;&#x4EE3;&#x629B;&#x5F03;&#x7684;&#x5FF5;&#x5934;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x5F00;&#x59CB;&#x7814;&#x7A76;&#x6709;&#x5173;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x77E5;&#x8BC6;&#x3002;&#x90FD;&#x8BF4;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7684;&#x5B66;&#x4E60;&#x96BE;&#x5EA6;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x4F46;&#x4E0D;&#x4EB2;&#x81EA;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x53C8;&#x600E;&#x4E48;&#x4F1A;&#x77E5;&#x9053;&#x5176;&#x4E2D;&#x7684;&#x5965;&#x5999;&#x4E0E;&#x4E50;&#x8DA3;&#x5462;&#xFF1F;&#x53EA;&#x6709;&#x4E0D;&#x65AD;&#x7684;&#x5C1D;&#x8BD5;&#x624D;&#x80FD;&#x627E;&#x5230;&#x6700;&#x9002;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#x9053;&#x8DEF;&#x3002;</p>\n<p>&#x8BF7;&#x5BB9;&#x5FCD;&#x6211;&#x4E0A;&#x8FF0;&#x7684;&#x81EA;&#x6211;&#x717D;&#x60C5;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#x3002;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x5BF9;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x4E2D;&#x6240;&#x9047;&#x5230;&#x7684;<code>GradientDescent</code>(&#x68AF;&#x5EA6;&#x4E0B;&#x964D;)&#x8FDB;&#x884C;&#x5168;&#x9762;&#x5206;&#x6790;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x770B;&#x4E86;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E4B;&#x540E;&#xFF0C;&#x5BF9;<code>GradientDescent</code>&#x5C06;&#x5F7B;&#x5E95;&#x5F04;&#x660E;&#x767D;&#x5176;&#x4E2D;&#x7684;&#x539F;&#x7406;&#x3002;</p>\n<h1 id=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x6982;&#x5FF5;\"><a href=\"#&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x6982;&#x5FF5;\" class=\"headerlink\" title=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x6982;&#x5FF5;\"></a>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x6982;&#x5FF5;</h1><p><code>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;</code>&#x662F;&#x4E00;&#x4E2A;&#x4E00;&#x9636;&#x6700;&#x4F18;&#x5316;&#x7B97;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x4E5F;&#x79F0;&#x4E3A;&#x6700;&#x901F;&#x4E0B;&#x964D;&#x6CD5;&#x3002;&#x8981;&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x5C40;&#x90E8;&#x6781;&#x5C0F;&#x503C;&#xFF0C;&#x5FC5;&#x987B;&#x5411;&#x51FD;&#x6570;&#x4E0A;&#x5F53;&#x524D;&#x70B9;&#x5BF9;&#x4E8E;&#x68AF;&#x5EA6;&#xFF08;&#x6216;&#x8005;&#x662F;&#x8FD1;&#x4F3C;&#x68AF;&#x5EA6;&#xFF09;&#x7684;&#x53CD;&#x65B9;&#x5411;&#x7684;&#x89C4;&#x5B9A;&#x6B65;&#x957F;&#x8DDD;&#x79BB;&#x70B9;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#x641C;&#x7D22;&#x3002;&#x6240;&#x4EE5;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x6C42;&#x89E3;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x6781;&#x5C0F;&#x503C;&#x6216;&#x8005;&#x6700;&#x5C0F;&#x503C;&#x3002;&#x5BF9;&#x4E8E;n&#x7EF4;&#x95EE;&#x9898;&#x5C31;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x4E00;&#x3002;&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;<code>&#x524D;&#x751F;&#x4ECA;&#x4E16;</code>&#x6765;&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x63A8;&#x5BFC;&#x8BF4;&#x660E;&#x3002;</p>\n<h1 id=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x524D;&#x4E16;\"><a href=\"#&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x524D;&#x4E16;\" class=\"headerlink\" title=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x524D;&#x4E16;\"></a>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x524D;&#x4E16;</h1><p>&#x9996;&#x5148;&#x4ECE;&#x7B80;&#x5355;&#x7684;&#x5F00;&#x59CB;&#xFF0C;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4E00;&#x7EF4;&#x51FD;&#x6570;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">f(x) = x^3 + 2 * x - 3</div></pre></td></tr></table></figure>\n<p><img src=\"/2017/11/06/tensorflow-&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-&#x6709;&#x8FD9;&#x4E00;&#x7BC7;&#x5C31;&#x8DB3;&#x591F;&#x4E86;/tensorflow_gradient_descent_1.png\" width=\"400\" height=\"200\" alt=\"&#x4E00;&#x7EF4;&#x51FD;&#x6570;&#x56FE;\" align=\"center\"></p>\n<p>&#x5728;&#x6570;&#x5B66;&#x4E2D;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8981;&#x6C42;<code>f(x) = 0</code>&#x5904;&#x7684;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x8BEF;&#x5DEE;&#x7B49;&#x5F0F;&#x6765;&#x6C42;&#x5F97;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">error = (f(x) - 0)^2</div></pre></td></tr></table></figure>\n<p>&#x5F53;<code>error</code>&#x8D8B;&#x8FD1;&#x4E8E;&#x6700;&#x5C0F;&#x503C;&#x65F6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;<code>f(x) = 0</code>&#x5904;<code>x</code>&#x7684;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x56FE;&#x6765;&#x89C2;&#x5BDF;&#xFF1A;</p>\n<p><img src=\"/2017/11/06/tensorflow-&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-&#x6709;&#x8FD9;&#x4E00;&#x7BC7;&#x5C31;&#x8DB3;&#x591F;&#x4E86;/tensorflow_gradient_descent_2.png\" width=\"400\" height=\"200\" alt=\"&#x4E00;&#x7EF4;&#x51FD;&#x6570;&#x56FE;\" align=\"center\"></p>\n<p>&#x901A;&#x8FC7;&#x8FD9;&#x51FD;&#x6570;&#x56FE;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x76F4;&#x89C2;&#x7684;&#x53D1;&#x73B0;&#xFF0C;&#x8981;&#x60F3;&#x6C42;&#x5F97;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x53EA;&#x8981;&#x5C06;<code>x</code>&#x6307;&#x5B9A;&#x4E3A;&#x51FD;&#x6570;&#x56FE;&#x7684;&#x6700;&#x4F4E;&#x8C37;&#x3002;&#x8FD9;&#x5728;&#x9AD8;&#x4E2D;&#x6211;&#x4EEC;&#x5C31;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x4E86;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x89E3;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x8BE5;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x6C42;&#x5BFC;&#xFF08;&#x5373;&#x659C;&#x7387;&#xFF09;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">derivative(x) = 6 * x^5 + 16 * x^3 - 18 * x^2 + 8 * x - 12</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x8981;&#x5F97;&#x5230;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x53EA;&#x9700;&#x4EE4;<code>derivative(x) = 0</code>&#xFF0C;&#x5373;<code>x = 1</code>&#x3002;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x56FE;&#x4E0E;&#x5BFC;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF1A;</p>\n<ul>\n<li>&#x5F53;<code>x &lt; 1</code>&#x65F6;&#xFF0C;<code>derivative &lt; 0</code>&#xFF0C;&#x659C;&#x7387;&#x4E3A;&#x8D1F;&#x7684;&#xFF1B;</li>\n<li>&#x5F53;<code>x &gt; 1</code>&#x65F6;&#xFF0C;<code>derivative &gt; 0</code>&#xFF0C;&#x659C;&#x7387;&#x4E3A;&#x6B63;&#x7684;&#xFF1B;</li>\n<li>&#x5F53;<code>x &#x65E0;&#x9650;&#x63A5;&#x8FD1; 1</code>&#x65F6;&#xFF0C;<code>derivative&#x4E5F;&#x5C31;&#x65E0;&#x9650;=0</code>&#xFF0C;&#x659C;&#x7387;&#x4E3A;&#x96F6;&#x3002;</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x8BBA;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x4EE3;&#x66FF;<code>x</code>&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x79FB;&#x52A8;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">x = x - reate * derivative</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5F53;&#x659C;&#x7387;&#x4E3A;&#x8D1F;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>x</code>&#x589E;&#x5927;&#xFF0C;&#x5F53;&#x659C;&#x7387;&#x4E3A;&#x6B63;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>x</code>&#x51CF;&#x5C0F;&#xFF1B;&#x56E0;&#x6B64;<code>x</code>&#x603B;&#x662F;&#x4F1A;&#x5411;&#x7740;&#x4F4E;&#x8C37;&#x79FB;&#x52A8;&#xFF0C;&#x4F7F;&#x5F97;<code>error</code>&#x6700;&#x5C0F;&#xFF0C;&#x4ECE;&#x800C;&#x6C42;&#x5F97;<code>f(x) = 0</code>&#x5904;&#x7684;&#x89E3;&#x3002;&#x5176;&#x4E2D;&#x7684;<code>rate</code>&#x4EE3;&#x8868;<code>x</code>&#x9006;&#x7740;&#x5BFC;&#x6570;&#x65B9;&#x5411;&#x79FB;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;<code>rate</code>&#x8D8A;&#x5927;&#xFF0C;<code>x</code>&#x6BCF;&#x6B21;&#x5C31;&#x79FB;&#x52A8;&#x7684;&#x8D8A;&#x591A;&#x3002;&#x53CD;&#x4E4B;&#x79FB;&#x52A8;&#x7684;&#x8D8A;&#x5C11;&#x3002;</em></p>\n</blockquote>\n<p>&#x8FD9;&#x662F;&#x9488;&#x5BF9;&#x7B80;&#x5355;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x76F4;&#x89C2;&#x7684;&#x6C42;&#x5F97;&#x5B83;&#x7684;&#x5BFC;&#x51FD;&#x6570;&#x3002;&#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x590D;&#x6742;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6C42;&#x5BFC;&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;&#x6765;&#x8868;&#x8FBE;&#x5BFC;&#x51FD;&#x6570;:&#x82E5;&#x51FD;&#x6570;<code>f(x)</code>&#x5728;&#x70B9;<code>x0</code>&#x5904;&#x53EF;&#x5BFC;&#xFF0C;&#x90A3;&#x4E48;&#x6709;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;&#xFF1A;</p>\n<p><img src=\"/2017/11/06/tensorflow-&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-&#x6709;&#x8FD9;&#x4E00;&#x7BC7;&#x5C31;&#x8DB3;&#x591F;&#x4E86;/tensorflow_gradient_descent_2.svg\" alt=\"\"></p>\n<p>&#x4E0A;&#x9762;&#x662F;&#x90FD;&#x662F;&#x516C;&#x5F0F;&#x63A8;&#x5BFC;&#xFF0C;&#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x4F7F;&#x7528;<code>python</code>&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; def f(x):</div><div class=\"line\">...     return x**3 + 2 * x - 3</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; def error(x):</div><div class=\"line\">...     return (f(x) - 0)**2</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; def gradient_descent(x):</div><div class=\"line\">...     delta = 0.00000001</div><div class=\"line\">...     derivative = (error(x + delta) - error(x)) / delta</div><div class=\"line\">...     rate = 0.01</div><div class=\"line\">...     return x - rate * derivative</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; x = 0.8</div><div class=\"line\">&gt;&gt;&gt; for i in range(50):</div><div class=\"line\">...     x = gradient_descent(x)</div><div class=\"line\">...     print(&apos;x = {:6f}, f(x) = {:6f}&apos;.format(x, f(x)))</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x4E0A;&#x9762;&#x7A0B;&#x5E8F;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5F97;&#x5230;&#x5982;&#x4E0B;&#x7ED3;&#x679C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">x = 0.869619, f(x) = -0.603123</div><div class=\"line\">x = 0.921110, f(x) = -0.376268</div><div class=\"line\">x = 0.955316, f(x) = -0.217521</div><div class=\"line\">x = 0.975927, f(x) = -0.118638</div><div class=\"line\">x = 0.987453, f(x) = -0.062266</div><div class=\"line\">x = 0.993586, f(x) = -0.031946</div><div class=\"line\">x = 0.996756, f(x) = -0.016187</div><div class=\"line\">x = 0.998369, f(x) = -0.008149</div><div class=\"line\">x = 0.999182, f(x) = -0.004088</div><div class=\"line\">x = 0.999590, f(x) = -0.002048</div><div class=\"line\">x = 0.999795, f(x) = -0.001025</div><div class=\"line\">x = 0.999897, f(x) = -0.000513</div><div class=\"line\">x = 0.999949, f(x) = -0.000256</div><div class=\"line\">x = 0.999974, f(x) = -0.000128</div><div class=\"line\">x = 0.999987, f(x) = -0.000064</div><div class=\"line\">x = 0.999994, f(x) = -0.000032</div><div class=\"line\">x = 0.999997, f(x) = -0.000016</div><div class=\"line\">x = 0.999998, f(x) = -0.000008</div><div class=\"line\">x = 0.999999, f(x) = -0.000004</div><div class=\"line\">x = 1.000000, f(x) = -0.000002</div><div class=\"line\">x = 1.000000, f(x) = -0.000001</div><div class=\"line\">x = 1.000000, f(x) = -0.000001</div><div class=\"line\">x = 1.000000, f(x) = -0.000000</div><div class=\"line\">x = 1.000000, f(x) = -0.000000</div><div class=\"line\">x = 1.000000, f(x) = -0.000000</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E5F;&#x9A8C;&#x8BC1;&#x4E86;&#x6211;&#x4EEC;&#x6700;&#x521D;&#x7684;&#x7ED3;&#x8BBA;&#x3002;<code>x = 1</code>&#x65F6;&#xFF0C;<code>f(x) = 0</code>&#x3002;<br>&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x8981;&#x6B65;&#x6570;&#x8DB3;&#x591F;&#x591A;&#xFF0C;&#x5C31;&#x80FD;&#x5F97;&#x5230;&#x975E;&#x5E38;&#x7CBE;&#x786E;&#x7684;&#x503C;&#x3002;</p>\n<h1 id=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x4ECA;&#x751F;\"><a href=\"#&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x4ECA;&#x751F;\" class=\"headerlink\" title=\"&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x4ECA;&#x751F;\"></a>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x4ECA;&#x751F;</h1><p>&#x4E0A;&#x9762;&#x662F;&#x5BF9;<code>&#x4E00;&#x7EF4;</code>&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x6C42;&#x89E3;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;<code>&#x591A;&#x7EF4;</code>&#x51FD;&#x6570;&#x53C8;&#x8981;&#x5982;&#x4F55;&#x6C42;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5BF9;&#x4E8E;<code>&#x591A;&#x7EF4;</code>&#x51FD;&#x6570;&#x4E5F;&#x662F;&#x90A3;&#x4E48;&#x7684;&#x7B80;&#x5355;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">f(x) = x[0] + 2 * x[1] + 4</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x6837;&#x7684;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8981;&#x6C42;<code>f(x) = 0</code>&#x5904;&#xFF0C;<code>x[0]</code>&#x4E0E;<code>x[1]</code>&#x7684;&#x503C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6C42;<code>error</code>&#x51FD;&#x6570;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x6765;&#x95F4;&#x63A5;&#x6C42;<code>f(x)</code>&#x7684;&#x89E3;&#x3002;&#x8DDF;<code>&#x4E00;&#x7EF4;</code>&#x51FD;&#x6570;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x8981;&#x5206;&#x522B;&#x5BF9;<code>x[0]</code>&#x4E0E;<code>x[1]</code>&#x8FDB;&#x884C;&#x6C42;&#x5BFC;&#x3002;&#x5728;&#x6570;&#x5B66;&#x4E0A;&#x53EB;&#x505A;<code>&#x504F;&#x5BFC;&#x6570;</code>&#xFF1A;</p>\n<ul>\n<li>&#x4FDD;&#x6301;x[1]&#x4E0D;&#x53D8;&#xFF0C;&#x5BF9;<code>x[0]</code>&#x8FDB;&#x884C;&#x6C42;&#x5BFC;&#xFF0C;&#x5373;<code>f(x)</code>&#x5BF9;<code>x[0]</code>&#x7684;&#x504F;&#x5BFC;&#x6570; </li>\n<li>&#x4FDD;&#x6301;x[0]&#x4E0D;&#x53D8;&#xFF0C;&#x5BF9;<code>x[1]</code>&#x8FDB;&#x884C;&#x6C42;&#x5BFC;&#xFF0C;&#x5373;<code>f(x)</code>&#x5BF9;<code>x[1]</code>&#x7684;&#x504F;&#x5BFC;&#x6570;</li>\n</ul>\n<p>&#x6709;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x7406;&#x89E3;&#x57FA;&#x7840;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;<code>gradient_descent</code>&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; def gradient_descent(x):</div><div class=\"line\">...     delta = 0.00000001</div><div class=\"line\">...     derivative_x0 = (error([x[0] + delta, x[1]]) - error([x[0], x[1]])) / delta</div><div class=\"line\">...     derivative_x1 = (error([x[0], x[1] + delta]) - error([x[0], x[1]])) / delta</div><div class=\"line\">...     rate = 0.01</div><div class=\"line\">...     x[0] = x[0] - rate * derivative_x0</div><div class=\"line\">...     x[1] = x[1] - rate * derivative_x1</div><div class=\"line\">...     return [x[0], x[1]]</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p><code>rate</code>&#x7684;&#x4F5C;&#x7528;&#x4E0D;&#x53D8;&#xFF0C;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x5C31;&#x662F;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x7684;<code>x[0]</code>&#x4E0E;<code>x[1]</code>&#x3002;&#x4E0B;&#x9762;&#x662F;&#x6574;&#x4E2A;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; def f(x):</div><div class=\"line\">...     return x[0] + 2 * x[1] + 4</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; def error(x):</div><div class=\"line\">...     return (f(x) - 0)**2</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; def gradient_descent(x):</div><div class=\"line\">...     delta = 0.00000001</div><div class=\"line\">...     derivative_x0 = (error([x[0] + delta, x[1]]) - error([x[0], x[1]])) / delta</div><div class=\"line\">...     derivative_x1 = (error([x[0], x[1] + delta]) - error([x[0], x[1]])) / delta</div><div class=\"line\">...     rate = 0.02</div><div class=\"line\">...     x[0] = x[0] - rate * derivative_x0</div><div class=\"line\">...     x[1] = x[1] - rate * derivative_x1</div><div class=\"line\">...     return [x[0], x[1]]</div><div class=\"line\">...</div><div class=\"line\">&gt;&gt;&gt; x = [-0.5, -1.0]</div><div class=\"line\">&gt;&gt;&gt; for i in range(100):</div><div class=\"line\">...     x = gradient_descent(x)</div><div class=\"line\">...     print(&apos;x = {:6f},{:6f}, f(x) = {:6f}&apos;.format(x[0],x[1],f(x)))</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">x = -0.560000,-1.120000, f(x) = 1.200000</div><div class=\"line\">x = -0.608000,-1.216000, f(x) = 0.960000</div><div class=\"line\">x = -0.646400,-1.292800, f(x) = 0.768000</div><div class=\"line\">x = -0.677120,-1.354240, f(x) = 0.614400</div><div class=\"line\">x = -0.701696,-1.403392, f(x) = 0.491520</div><div class=\"line\">x = -0.721357,-1.442714, f(x) = 0.393216</div><div class=\"line\">x = -0.737085,-1.474171, f(x) = 0.314573</div><div class=\"line\">x = -0.749668,-1.499337, f(x) = 0.251658</div><div class=\"line\">x = -0.759735,-1.519469, f(x) = 0.201327</div><div class=\"line\">x = -0.767788,-1.535575, f(x) = 0.161061</div><div class=\"line\">x = -0.774230,-1.548460, f(x) = 0.128849</div><div class=\"line\">x = -0.779384,-1.558768, f(x) = 0.103079</div><div class=\"line\">x = -0.783507,-1.567015, f(x) = 0.082463</div><div class=\"line\">x = -0.786806,-1.573612, f(x) = 0.065971</div><div class=\"line\">x = -0.789445,-1.578889, f(x) = 0.052777</div><div class=\"line\">x = -0.791556,-1.583112, f(x) = 0.042221</div><div class=\"line\">x = -0.793245,-1.586489, f(x) = 0.033777</div><div class=\"line\">x = -0.794596,-1.589191, f(x) = 0.027022</div><div class=\"line\">x = -0.795677,-1.591353, f(x) = 0.021617</div><div class=\"line\">x = -0.796541,-1.593082, f(x) = 0.017294</div><div class=\"line\">x = -0.797233,-1.594466, f(x) = 0.013835</div><div class=\"line\">x = -0.797786,-1.595573, f(x) = 0.011068</div><div class=\"line\">x = -0.798229,-1.596458, f(x) = 0.008854</div><div class=\"line\">x = -0.798583,-1.597167, f(x) = 0.007084</div><div class=\"line\">x = -0.798867,-1.597733, f(x) = 0.005667</div><div class=\"line\">x = -0.799093,-1.598187, f(x) = 0.004533</div><div class=\"line\">x = -0.799275,-1.598549, f(x) = 0.003627</div><div class=\"line\">x = -0.799420,-1.598839, f(x) = 0.002901</div><div class=\"line\">x = -0.799536,-1.599072, f(x) = 0.002321</div><div class=\"line\">x = -0.799629,-1.599257, f(x) = 0.001857</div><div class=\"line\">x = -0.799703,-1.599406, f(x) = 0.001486</div><div class=\"line\">x = -0.799762,-1.599525, f(x) = 0.001188</div><div class=\"line\">x = -0.799810,-1.599620, f(x) = 0.000951</div><div class=\"line\">x = -0.799848,-1.599696, f(x) = 0.000761</div><div class=\"line\">x = -0.799878,-1.599757, f(x) = 0.000608</div><div class=\"line\">x = -0.799903,-1.599805, f(x) = 0.000487</div><div class=\"line\">x = -0.799922,-1.599844, f(x) = 0.000389</div><div class=\"line\">x = -0.799938,-1.599875, f(x) = 0.000312</div><div class=\"line\">x = -0.799950,-1.599900, f(x) = 0.000249</div><div class=\"line\">x = -0.799960,-1.599920, f(x) = 0.000199</div><div class=\"line\">x = -0.799968,-1.599936, f(x) = 0.000159</div><div class=\"line\">x = -0.799974,-1.599949, f(x) = 0.000128</div><div class=\"line\">x = -0.799980,-1.599959, f(x) = 0.000102</div><div class=\"line\">x = -0.799984,-1.599967, f(x) = 0.000082</div><div class=\"line\">x = -0.799987,-1.599974, f(x) = 0.000065</div><div class=\"line\">x = -0.799990,-1.599979, f(x) = 0.000052</div><div class=\"line\">x = -0.799992,-1.599983, f(x) = 0.000042</div><div class=\"line\">x = -0.799993,-1.599987, f(x) = 0.000033</div><div class=\"line\">x = -0.799995,-1.599989, f(x) = 0.000027</div><div class=\"line\">x = -0.799996,-1.599991, f(x) = 0.000021</div><div class=\"line\">x = -0.799997,-1.599993, f(x) = 0.000017</div><div class=\"line\">x = -0.799997,-1.599995, f(x) = 0.000014</div><div class=\"line\">x = -0.799998,-1.599996, f(x) = 0.000011</div><div class=\"line\">x = -0.799998,-1.599997, f(x) = 0.000009</div><div class=\"line\">x = -0.799999,-1.599997, f(x) = 0.000007</div><div class=\"line\">x = -0.799999,-1.599998, f(x) = 0.000006</div><div class=\"line\">x = -0.799999,-1.599998, f(x) = 0.000004</div><div class=\"line\">x = -0.799999,-1.599999, f(x) = 0.000004</div><div class=\"line\">x = -0.799999,-1.599999, f(x) = 0.000003</div><div class=\"line\">x = -0.800000,-1.599999, f(x) = 0.000002</div><div class=\"line\">x = -0.800000,-1.599999, f(x) = 0.000002</div><div class=\"line\">x = -0.800000,-1.599999, f(x) = 0.000001</div><div class=\"line\">x = -0.800000,-1.600000, f(x) = 0.000001</div><div class=\"line\">x = -0.800000,-1.600000, f(x) = 0.000001</div><div class=\"line\">x = -0.800000,-1.600000, f(x) = 0.000001</div><div class=\"line\">x = -0.800000,-1.600000, f(x) = 0.000001</div><div class=\"line\">x = -0.800000,-1.600000, f(x) = 0.000000</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x7EC6;&#x5FC3;&#x7684;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;<code>f(x) = 0</code>&#x4E0D;&#x6B62;&#x8FD9;&#x4E00;&#x4E2A;&#x89E3;&#x8FD8;&#x53EF;&#x4EE5;&#x662F;<code>x = -2, -1</code>&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x53EA;&#x662F;&#x5BF9;<code>&#x5F53;&#x524D;&#x6240;&#x5904;&#x7684;&#x51F9;&#x8C37;</code>&#x8FDB;&#x884C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6C42;&#x89E3;&#xFF0C;&#x5BF9;&#x4E8E;<code>error</code>&#x51FD;&#x6570;&#x5E76;&#x4E0D;&#x4EE3;&#x8868;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>f(x) = 0</code>&#x7684;&#x51F9;&#x8C37;&#x3002;&#x6240;&#x4EE5;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x53EA;&#x80FD;&#x6C42;&#x5F97;&#x5C40;&#x90E8;&#x89E3;&#xFF0C;&#x4F46;&#x4E0D;&#x4E00;&#x5B9A;&#x80FD;&#x6C42;&#x5F97;&#x5168;&#x90E8;&#x7684;&#x89E3;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x5BF9;&#x4E8E;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x80FD;&#x591F;&#x6C42;&#x5F97;&#x5C40;&#x90E8;&#x89E3;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x3002;</p>\n</blockquote>\n<h1 id=\"tensorflow&#x4E2D;&#x7684;&#x8FD0;&#x7528;\"><a href=\"#tensorflow&#x4E2D;&#x7684;&#x8FD0;&#x7528;\" class=\"headerlink\" title=\"tensorflow&#x4E2D;&#x7684;&#x8FD0;&#x7528;\"></a>tensorflow&#x4E2D;&#x7684;&#x8FD0;&#x7528;</h1><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#xFF0C;&#x76F8;&#x4FE1;&#x5BF9;<code>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;</code>&#x4E5F;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x8BA4;&#x8BC6;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x5728;<code>tensorflow</code>&#x4E2D;&#x4F7F;&#x7528;<code>gradientDescent</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">import tensorflow as tf</div><div class=\"line\"> </div><div class=\"line\"># Model parameters</div><div class=\"line\">W = tf.Variable([.3], dtype=tf.float32)</div><div class=\"line\">b = tf.Variable([-.3], dtype=tf.float32)</div><div class=\"line\"># Model input and output</div><div class=\"line\">x = tf.placeholder(tf.float32)</div><div class=\"line\">linear_model = W*x + b</div><div class=\"line\">y = tf.placeholder(tf.float32)</div><div class=\"line\"> </div><div class=\"line\"># loss</div><div class=\"line\">loss = tf.reduce_sum(tf.square(linear_model - y)) # sum of the squares</div><div class=\"line\"># optimizer</div><div class=\"line\">optimizer = tf.train.GradientDescentOptimizer(0.01)</div><div class=\"line\">train = optimizer.minimize(loss)</div><div class=\"line\"> </div><div class=\"line\"># training data</div><div class=\"line\">x_train = [1, 2, 3, 4]</div><div class=\"line\">y_train = [0, -1, -2, -3]</div><div class=\"line\"># training loop</div><div class=\"line\">init = tf.global_variables_initializer()</div><div class=\"line\">sess = tf.Session()</div><div class=\"line\">sess.run(init) # reset values to wrong</div><div class=\"line\">for i in range(1000):</div><div class=\"line\">  sess.run(train, {x: x_train, y: y_train})</div><div class=\"line\"> </div><div class=\"line\"># evaluate training accuracy</div><div class=\"line\">curr_W, curr_b, curr_loss = sess.run([W, b, loss], {x: x_train, y: y_train})</div><div class=\"line\">print(&quot;W: %s b: %s loss: %s&quot;%(curr_W, curr_b, curr_loss))</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x7684;&#x662F;<a href=\"https://www.tensorflow.org/get_started/get_started\" target=\"_blank\" rel=\"external\">tensorflow</a>&#x7684;&#x5B98;&#x7F51;&#x793A;&#x4F8B;&#xFF0C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5B9A;&#x4E49;&#x4E86;&#x51FD;&#x6570;<code>linear_model = W * x + b</code>,&#x5176;&#x4E2D;&#x7684;<code>error</code>&#x51FD;&#x6570;&#x4E3A;<code>linear_model - y</code>&#x3002;&#x76EE;&#x7684;&#x662F;&#x5BF9;&#x4E00;&#x7EC4;<code>x_train</code>&#x4E0E;<code>y_train</code>&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x8BAD;&#x7EC3;&#x6C42;&#x89E3;<code>W</code>&#x4E0E;<code>b</code>&#x3002;&#x4E3A;&#x4E86;&#x6C42;&#x5F97;&#x8FD9;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x7684;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x5C06;&#x6BCF;&#x4E00;&#x7EC4;&#x7684;<code>error</code>&#x76F8;&#x52A0;&#x4ECE;&#x800C;&#x5F97;&#x5230;<code>loss</code>&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5BF9;<code>loss</code>&#x8FDB;&#x884C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6C42;&#x89E3;&#x6700;&#x4F18;&#x503C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">optimizer = tf.train.GradientDescentOptimizer(0.01)</div><div class=\"line\">train = optimizer.minimize(loss)</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;<code>rate</code>&#x4E3A;<code>0.01</code>,&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x4E5F;&#x662F;<code>&#x591A;&#x7EF4;</code>&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x8981;&#x7528;&#x5230;<code>&#x504F;&#x5BFC;&#x6570;</code>&#x6765;&#x8FDB;&#x884C;&#x9010;&#x6B65;&#x5411;&#x6700;&#x4F18;&#x89E3;&#x9760;&#x8FD1;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">for i in range(1000):</div><div class=\"line\">  sess.run(train, {x: x_train, y: y_train})</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x4F7F;&#x7528;<code>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;</code>&#x8FDB;&#x884C;&#x5FAA;&#x73AF;&#x63A8;&#x5BFC;&#xFF0C;&#x4E0B;&#x9762;&#x7ED9;&#x51FA;&#x4E00;&#x4E9B;&#x63A8;&#x5BFC;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x7ED3;&#x679C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">W: [-0.21999997] b: [-0.456] loss: 4.01814</div><div class=\"line\">W: [-0.39679998] b: [-0.49552] loss: 1.81987</div><div class=\"line\">W: [-0.45961601] b: [-0.4965184] loss: 1.54482</div><div class=\"line\">W: [-0.48454273] b: [-0.48487374] loss: 1.48251</div><div class=\"line\">W: [-0.49684232] b: [-0.46917531] loss: 1.4444</div><div class=\"line\">W: [-0.50490189] b: [-0.45227283] loss: 1.4097</div><div class=\"line\">W: [-0.5115062] b: [-0.43511063] loss: 1.3761</div><div class=\"line\">....</div><div class=\"line\">....</div><div class=\"line\">....</div><div class=\"line\">W: [-0.99999678] b: [ 0.99999058] loss: 5.84635e-11</div><div class=\"line\">W: [-0.99999684] b: [ 0.9999907] loss: 5.77707e-11</div><div class=\"line\">W: [-0.9999969] b: [ 0.99999082] loss: 5.69997e-11</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x63A8;&#x7406;&#x9A8C;&#x8BC1;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x770B;&#x4E86;&#x4E0A;&#x9762;&#x7684;<code>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;</code>&#x7684;&#x524D;&#x4E16;&#x4ECA;&#x751F;&#xFF0C;&#x76F8;&#x4FE1;&#x80FD;&#x591F;&#x81EA;&#x4E3B;&#x7684;&#x63A8;&#x5BFC;&#x51FA;&#x6765;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x770B;&#x6700;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F30;&#x7B97;&#x4E3A;<code>W = -1.0</code>&#x4E0E;<code>b  = 1.0</code>&#xFF0C;&#x5C06;&#x4ED6;&#x4EEC;&#x5E26;&#x5165;&#x4E0A;&#x9762;&#x7684;<code>loss</code>&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x4E3A;<code>0.0</code>&#xFF0C;&#x5373;&#x8BEF;&#x5DEE;&#x635F;&#x5931;&#x503C;&#x6700;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;<code>W = -1.0</code>&#x4E0E;<code>b = 1.0</code>&#x5C31;&#x662F;<code>x_train</code>&#x4E0E;<code>y_train</code>&#x8FD9;&#x7EC4;&#x6570;&#x636E;&#x7684;&#x6700;&#x4F18;&#x89E3;&#x3002;</p>\n<p>&#x597D;&#x4E86;&#xFF0C;&#x5173;&#x4E8E;<code>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;</code>&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x5230;&#x8FD9;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x5230;&#x4F60;&#xFF1B;&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6765;&#x8BA8;&#x8BBA;&#xFF0C;&#x5982;&#x679C;&#x611F;&#x89C9;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E0D;&#x9519;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x67E5;&#x770B;&#x6211;&#x7684;&#x5176;&#x5B83;&#x6587;&#x7AE0;&#x3002;</p>\n"},{"title":"Kotlin最佳实践","url":"https://www.rousetime.com/2017/08/21/Kotlin最佳实践/","content":"<p>&#x524D;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5F00;&#x53D1;&#x6BD4;&#x8F83;&#x8F7B;&#x677E;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;<code>google</code>&#x4E3B;&#x63A8;&#x7684;<code>kotlin</code>&#x8BED;&#x8A00;&#x3002;&#x6211;&#x4E00;&#x76F4;&#x575A;&#x4FE1;&#xFF0C;&#x5FEB;&#x901F;&#x5B66;&#x4E60;&#x4E0E;&#x638C;&#x63E1;&#x4E00;&#x95E8;&#x8BED;&#x8A00;&#x7684;&#x6700;&#x597D;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x5B9E;&#x8DF5;&#xFF0C;&#x8FB9;&#x5F00;&#x53D1;&#x9879;&#x76EE;&#x8FB9;&#x5B66;&#x4E60;&#x3002;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x5FEB;&#x901F;&#x7684;&#x5C06;&#x5B66;&#x4E60;&#x7684;&#x77E5;&#x8BC6;&#x8FD0;&#x7528;&#x5230;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x603B;&#x7ED3;&#x7ECF;&#x9A8C;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E5F;&#x60F3;&#x5B66;&#x4E60;<code>kotlin</code>&#x6216;&#x8005;&#x4E5F;&#x6B63;&#x5728;&#x5B66;&#x4E60;<code>kotlin</code>&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x4E0D;&#x59A8;&#x53EF;&#x4EE5;&#x643A;&#x624B;&#x5171;&#x6D4E;&#xFF0C;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x63D0;&#x5347;&#x81EA;&#x5DF1;&#xFF0C;&#x5FEB;&#x901F;&#x638C;&#x63E1;<code>kotlin</code>&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x6211;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x9879;&#x76EE;&#x662F;&#x5B8C;&#x5168;&#x4F7F;&#x7528;<code>kotlin</code>&#x7F16;&#x5199;&#x7684;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x65B0;&#x95FB;&#x7684;<code>App</code>&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x5B9E;&#x8DF5;&#x4ECB;&#x7ECD;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x9879;&#x76EE;&#x4E2D;&#x8FD0;&#x7528;&#x5230;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#xFF0C;&#x65B9;&#x4FBF;&#x540E;&#x7EED;&#x60F3;&#x8981;&#x4E00;&#x8D77;&#x5B66;&#x4E60;&#x7684;&#x540C;&#x5B66;&#x4EEC;&#x5FEB;&#x901F;&#x5165;&#x95E8;&#x4E0E;&#x8FD0;&#x7528;&#x3002;</p>\n<h1 id=\"&#x754C;&#x9762;\"><a href=\"#&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x754C;&#x9762;\"></a>&#x754C;&#x9762;</h1><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x65B0;&#x95FB;&#x7684;<code>App</code>&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4E09;&#x4E2A;&#x754C;&#x9762;&#xFF0C;&#x5206;&#x522B;&#x4E3A;&#x65B0;&#x95FB;&#x4E3B;&#x754C;&#x9762;&#x3001;&#x65B0;&#x95FB;&#x8BE6;&#x60C5;&#x754C;&#x9762;&#x4E0E;&#x65B0;&#x95FB;&#x8BA2;&#x9605;&#x754C;&#x9762;&#x3002;&#x4E0B;&#x9762;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x4E0B;&#x6BCF;&#x4E2A;&#x754C;&#x9762;&#x8FD0;&#x7528;&#x5230;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x3002;</p>\n<h2 id=\"&#x4E3B;&#x754C;&#x9762;\"><a href=\"#&#x4E3B;&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x4E3B;&#x754C;&#x9762;\"></a>&#x4E3B;&#x754C;&#x9762;</h2><p>&#x4E3B;&#x754C;&#x9762;&#x4E3A;&#x4E86;&#x5C55;&#x793A;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x7C7B;&#x65B0;&#x95FB;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E86;<code>TabLayout</code>+<code>ViewPager</code>+<code>Fragment</code>&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x56E0;&#x6B64;&#x4E3B;&#x8981;&#x662F;&#x903B;&#x8F91;&#x5C31;&#x662F;<code>NewsCategoryFrament</code>&#x4E2D;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x4E0E;&#x6570;&#x636E;&#x5904;&#x7406;&#x3002;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x4E3B;&#x8981;&#x8FD0;&#x7528;&#x7684;&#x662F;<code>Retrofit</code>+<code>RxJava</code>+<code>RxAndroid</code>&#x3002;&#x6765;&#x770B;&#x4E0B;&#x754C;&#x9762;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2017/08/21/Kotlin&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/1.png\" alt=\"&#x4E3B;&#x754C;&#x9762;\"></p>\n<blockquote>\n<p>&#x6211;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x9879;&#x76EE;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x4E86;&#x89E3;<code>kotlin</code>&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x540E;&#x9762;&#x7684;&#x6E90;&#x7801;&#x5730;&#x5740;</p>\n</blockquote>\n<h2 id=\"&#x8BE6;&#x60C5;&#x754C;&#x9762;\"><a href=\"#&#x8BE6;&#x60C5;&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x8BE6;&#x60C5;&#x754C;&#x9762;\"></a>&#x8BE6;&#x60C5;&#x754C;&#x9762;</h2><p>&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x56FD;&#x5916;&#x7684;<code>News Api</code>&#x6240;&#x4EE5;&#xFF0C;&#x5BF9;&#x4E8E;&#x8BE6;&#x60C5;&#x7684;&#x5C55;&#x793A;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E00;&#x4E2A;<code>WebView</code>&#xFF0C;&#x5168;&#x90E8;&#x901A;&#x8FC7;&#x539F;&#x751F;&#x7684;<code>WebView</code>&#x6765;&#x5C55;&#x793A;&#x3002;&#x540E;&#x7EED;&#x67E5;&#x770B;&#x6E90;&#x7801;&#x4F1A;&#x53D1;&#x73B0;&#x8BE5;&#x5904;&#x7684;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;</p>\n<p><img src=\"/2017/08/21/Kotlin&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/2.png\" alt=\"&#x8BE6;&#x60C5;&#x754C;&#x9762;\"></p>\n<h2 id=\"&#x8BA2;&#x9605;&#x754C;&#x9762;\"><a href=\"#&#x8BA2;&#x9605;&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x8BA2;&#x9605;&#x754C;&#x9762;\"></a>&#x8BA2;&#x9605;&#x754C;&#x9762;</h2><p>&#x8BA2;&#x9605;&#x754C;&#x9762;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x4E3B;&#x754C;&#x9762;&#x7684;&#x5206;&#x7C7B;<code>News</code>&#x8FDB;&#x884C;&#x6DFB;&#x52A0;&#x8BA2;&#x9605;&#x4E0E;&#x53D6;&#x6D88;&#x8BA2;&#x9605;&#x64CD;&#x4F5C;&#x3002;&#x754C;&#x9762;&#x7ED3;&#x6784;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E24;&#x4E2A;&#x6ED1;&#x52A8;&#x7684;<code>RecyclerView</code>&#x3002;&#x5B9E;&#x73B0;&#x5B83;&#x4EEC;&#x95F4;<code>item</code>&#x7684;&#x8054;&#x52A8;&#x3002;</p>\n<p><img src=\"/2017/08/21/Kotlin&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/3.png\" alt=\"&#x8BA2;&#x9605;&#x754C;&#x9762;\"></p>\n<h1 id=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;\"><a href=\"#&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;\" class=\"headerlink\" title=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;\"></a>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</h1><p>&#x4E0A;&#x9762;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;&#x754C;&#x9762;&#x76F8;&#x5173;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E0B;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6709;&#x5173;&#x7F51;&#x7EDC;&#x65B9;&#x9762;&#x7684;&#x77E5;&#x8BC6;&#x3002;&#x4E3B;&#x8981;&#x5305;&#x62EC;<code>&#x63A5;&#x53E3;&#x8BF7;&#x6C42;</code>&#x4E0E;<code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;</code></p>\n<h2 id=\"&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;\"><a href=\"#&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;\"></a>&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;</h2><p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#x8FC7;&#x4E86;&#xFF0C;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x7684;&#x662F;<code>Retrofit</code>+<code>RxJava</code>+<code>RxAndroid</code>&#x6765;&#x8FDB;&#x884C;&#x63A5;&#x53E3;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4E3A;&#x4E86;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x8FDB;&#x884C;&#x66F4;&#x597D;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x5BF9;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x3002;&#x4E3B;&#x8981;<code>code</code>&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">fun &lt;T&gt; doGet(params: MutableMap&lt;String, Any?&gt;, tClass: Class&lt;T&gt;): Observable&lt;T?&gt; {</div><div class=\"line\">        return initParams(params, tClass)!!.observeOn(Schedulers.io()).flatMap { tempString -&gt;</div><div class=\"line\">            if (tClass == NewsArticleListModel::class.java) {</div><div class=\"line\">                getNewsApi().getArticles(tempString).subscribeOn(Schedulers.io())</div><div class=\"line\">            } else {</div><div class=\"line\">                getNewsApi().getSources(tempString).subscribeOn(Schedulers.io())</div><div class=\"line\">            }</div><div class=\"line\">        }.flatMap { newsResponse -&gt;</div><div class=\"line\">            if (newsResponse is NewsArticleListModel &amp;&amp; newsResponse.status.equals(&quot;ok&quot;)</div><div class=\"line\">                    || (newsResponse is NewsSourcesListModel &amp;&amp; newsResponse.status.equals(&quot;ok&quot;))) {</div><div class=\"line\">                val json = getGson()?.toJson(newsResponse!!)</div><div class=\"line\">                if (json.isNullOrEmpty()) return@flatMap null!!</div><div class=\"line\">                val data = getGson()?.fromJson(json, tClass)</div><div class=\"line\">                Observable.just(data)</div><div class=\"line\">            } else {</div><div class=\"line\">                Observable.error&lt;T&gt; { Exception() }</div><div class=\"line\">            }</div><div class=\"line\">        }.observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">                .doOnError { t -&gt; Log.d(&quot;TAG&quot;, &quot;throwable: &quot; + t) }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x6765;&#x81EA;&#x4E0E;&#x7F51;&#x7EDC;&#x4E0E;&#x672C;&#x5730;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5C06;&#x6765;&#x6E90;&#x5C4F;&#x853D;&#xFF0C;&#x8BF7;&#x6C42;&#x62BD;&#x8C61;&#x6210;&#x63A5;&#x53E3;&#x3002;&#x65B9;&#x4FBF;&#x4EE5;&#x540E;&#x672C;&#x5730;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x52A0;&#x5165;<strong><em>&#xFF08;&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x5F15;&#x5165;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x540E;&#x7EED;&#x6709;&#x65F6;&#x95F4;&#x5C06;&#x5F15;&#x5165;&#xFF09;</em></strong>&#x3002;&#x5206;&#x522B;&#x4E3A;<code>RequestCommand</code>&#x4E0E;<code>Provider</code>&#x63A5;&#x53E3;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x5C31;&#x662F;<code>NewsReqeustCommand</code>&#x4E0E;<code>NewsProvider</code>&#x3002;&#x56E0;&#x6B64;&#x6700;&#x7EC8;&#x7684;&#x8C03;&#x7528;&#x5982;&#x4E0B;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">fun setupRequest(refresh: Boolean) {</div><div class=\"line\">        val params = mutableMapOf&lt;String, Any?&gt;(</div><div class=\"line\">                NewsConfig.REQUEST_SOURCE to id,</div><div class=\"line\">                NewsConfig.REQUEST_SORT_BY to NewsConfig.SortBy.TOP.sort</div><div class=\"line\">        )</div><div class=\"line\">        requestCommand = NewsRequestCommand(params, NewsArticleListModel::class.java,</div><div class=\"line\">                object : DefaultDisposableObserver&lt;NewsArticleListModel&gt;() {</div><div class=\"line\">                    override fun onNext(t: NewsArticleListModel) {</div><div class=\"line\">                        if (refresh) swipeRefreshLayout.isRefreshing = false</div><div class=\"line\">                        dataList.clear()</div><div class=\"line\">                        dataList.addAll(t.articles)</div><div class=\"line\">                        recyclerView.adapter.notifyDataSetChanged()</div><div class=\"line\">                    }</div><div class=\"line\"></div><div class=\"line\">                    override fun onError(e: Throwable) {</div><div class=\"line\">                        super.onError(e)</div><div class=\"line\">                        if (refresh) swipeRefreshLayout.isRefreshing = false</div><div class=\"line\">                    }</div><div class=\"line\">                })</div><div class=\"line\">        requestCommand?.execute()</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#xFF0C;&#x624B;&#x4E0A;&#x7684;&#x9879;&#x76EE;&#x5C06;&#x8981;&#x5927;&#x6539;&#x7248;&#x3002;&#x5982;&#x679C;&#x5BA2;&#x5B98;&#x4EEC;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x5728;<code>Github</code>&#x4E0A;<code>Start/Fork</code>&#x63D0;&#x4EA4;<code>PR</code></p>\n</blockquote>\n<h2 id=\"&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5C01;&#x88C5;\"><a href=\"#&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5C01;&#x88C5;\"></a>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5C01;&#x88C5;</h2><p>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x4F7F;&#x7528;&#x7684;&#x662F;<code>facebook</code>&#x7684;<code>fresco</code>&#xFF0C;&#x4E3A;&#x4E86;&#x5168;&#x5C40;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;<code>kotlin</code>&#x7684;<code>Extension Functions</code>&#x7279;&#x6027;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">fun SimpleDraweeView.displayImage(url: String?, width: Int = 200, listener: BaseControllerListener&lt;Any&gt;? = null) {</div><div class=\"line\">    if (url == null) return</div><div class=\"line\">    this.hierarchy.setPlaceholderImage(R.drawable.news_default_bg)</div><div class=\"line\">    val imageRequest = ImageRequestBuilder.newBuilderWithSource(Uri.parse(url))</div><div class=\"line\">            .setResizeOptions(ResizeOptions(width, width))</div><div class=\"line\">            .build()</div><div class=\"line\">    val controller = Fresco.newDraweeControllerBuilder()</div><div class=\"line\">            .setImageRequest(imageRequest)</div><div class=\"line\">            .setAutoPlayAnimations(true)</div><div class=\"line\">            .setControllerListener(listener)</div><div class=\"line\">            .setOldController(this.controller)</div><div class=\"line\">            .build()</div><div class=\"line\">    this.controller = controller</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x8C03;&#x7528;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">itemView.image.displayImage(url = urlToImage)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x5F53;&#x7136;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x9009;&#x62E9;</p>\n</blockquote>\n<h1 id=\"Interface\"><a href=\"#Interface\" class=\"headerlink\" title=\"Interface\"></a>Interface</h1><p>&#x5728;<code>kotlin</code>&#x4E2D;&#x7684;<code>interface</code>&#x4E0E;<code>java</code>&#x4E2D;&#x7684;<code>interface</code>&#x6709;&#x4E00;&#x4E2A;&#x5DE8;&#x5927;&#x7684;&#x533A;&#x522B;&#x3002;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;<code>java</code>&#x4E2D;<code>interface</code>&#x4E2D;&#x662F;&#x4E0D;&#x80FD;&#x591F;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x5728;<code>kotlin</code>&#x4E2D;&#x7684;<code>interface</code>&#x53EF;&#x4EE5;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;<code>ToolBarManager</code>&#xFF0C;&#x65B9;&#x4FBF;&#x754C;&#x9762;&#x7684;&#x5BFC;&#x822A;&#x8BBE;&#x7F6E;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">interface ToolBarManager {</div><div class=\"line\">    val toolBar: Toolbar</div><div class=\"line\">    var toolBarTitle: String</div><div class=\"line\">        set(value) {</div><div class=\"line\">            toolBar.title = value</div><div class=\"line\">        }</div><div class=\"line\">        get() = toolBar.title.toString()</div><div class=\"line\"> </div><div class=\"line\">    fun initToolBar() {</div><div class=\"line\">        toolBar.inflateMenu(R.menu.menu)</div><div class=\"line\">        toolBar.setOnMenuItemClickListener {</div><div class=\"line\">            when (it.itemId) {</div><div class=\"line\">                R.id.subscribe -&gt; toolBar.context.startActivity&lt;SubscribeActivity&gt;()</div><div class=\"line\">            }</div><div class=\"line\">            true</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    fun enableHomeAsUp(back: () -&gt; Unit) {</div><div class=\"line\">        toolBar.navigationIcon = DrawerArrowDrawable(toolBar.context)</div><div class=\"line\">        toolBar.setNavigationOnClickListener { back() }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x540E;&#x7EED;&#x754C;&#x9762;&#x5BFC;&#x822A;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B9E;&#x73B0;<code>ToolBarManager</code>&#x63A5;&#x53E3;&#x5373;&#x53EF;&#x3002;</p>\n<h1 id=\"Delegated-Properties\"><a href=\"#Delegated-Properties\" class=\"headerlink\" title=\"Delegated Properties\"></a>Delegated Properties</h1><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x7F16;&#x5199;&#xFF0C;&#x57FA;&#x672C;&#x7684;<code>kotlin</code>&#x7F16;&#x5199;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">class App : Application() {</div><div class=\"line\">\tcompanion object {</div><div class=\"line\">\t\tprivate var instance: Application? = null</div><div class=\"line\">\t\tfun instance() = instance!!</div><div class=\"line\">\t}</div><div class=\"line\"> </div><div class=\"line\">\toverride fun onCreate() {</div><div class=\"line\">\t\tsuper.onCreate()</div><div class=\"line\">\t\tinstance = this</div><div class=\"line\">\t}</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;<code>kotlin</code>&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;<code>standard Delegates</code>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>lazy</code>&#x6765;&#x8FDB;&#x884C;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x61D2;&#x52A0;&#x8F7D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">companion object {</div><div class=\"line\">    val instance by lazy { NewsApp() }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x662F;<code>lateinit</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">class App : Application() {</div><div class=\"line\">\tcompanion object {</div><div class=\"line\">\t\tlateinit var instance: App</div><div class=\"line\">\t\t\tprivate set</div><div class=\"line\">\t}</div><div class=\"line\"> </div><div class=\"line\">\toverride fun onCreate() {</div><div class=\"line\">\t\tsuper.onCreate()</div><div class=\"line\">\t\tinstance = this</div><div class=\"line\">\t}</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49;<a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" target=\"_blank\" rel=\"external\">Delegated</a>&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>ReadWriteProperty&lt;in R, T&gt;</code>&#x63A5;&#x53E3;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">object DelegatesExt {</div><div class=\"line\">    fun &lt;T&gt; notNullSingleValue(): ReadWriteProperty&lt;Any?, T&gt; = NotNullSingleValueVar()</div><div class=\"line\">}</div><div class=\"line\">class NotNullSingleValueVar&lt;T&gt; : ReadWriteProperty&lt;Any?, T&gt; {</div><div class=\"line\"></div><div class=\"line\">    private var value: T? = null</div><div class=\"line\"> </div><div class=\"line\">    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T {</div><div class=\"line\">        return value ?: throw IllegalStateException(&quot;${property.name} not initialized&quot;)</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {</div><div class=\"line\">        this.value = if (this.value == null) value else throw IllegalStateException(&quot;${property.name} not initialized&quot;)</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x503C;&#x4E0E;&#x83B7;&#x53D6;&#x503C;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;<code>getValue</code>&#x4E0E;<code>setValue</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">companion object {</div><div class=\"line\">    var instance: NewsApp by DelegatesExt.notNullSingleValue&lt;NewsApp&gt;()</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x9879;&#x76EE;&#x4E2D;&#x8FD8;&#x5BF9;<code>Preference</code>&#x8FDB;&#x884C;&#x4E86;&#x76F8;&#x4F3C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n</blockquote>\n<h1 id=\"Anko\"><a href=\"#Anko\" class=\"headerlink\" title=\"Anko\"></a>Anko</h1><p>&#x5176;&#x5B9E;&#x4F7F;&#x7528;<code>kotlin</code>&#x8FDB;&#x884C;<code>Android</code>&#x5F00;&#x53D1;&#x4E5F;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x5DE5;&#x5177;&#x5E93;&#x3002;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x63D0;&#x5347;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF0C;&#x5176;&#x4E2D;<a href=\"https://github.com/Kotlin/anko\" target=\"_blank\" rel=\"external\">Anko</a>&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>Anko DSL</code>&#x4EE3;&#x7801;&#x4E66;&#x5199;&#x4EE3;&#x66FF;<code>XML</code>&#x6765;&#x8FDB;&#x884C;<code>UI</code>&#x5E03;&#x5C40;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6709;&#x6548;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5F53;&#x7136;&#x5B83;&#x4E5F;&#x6709;&#x8BB8;&#x591A;&#x6709;&#x7528;&#x7684;<code>functions</code>&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x63D0;&#x5347;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>\n<p>1.<code>find()</code>&#x4EE3;&#x66FF;<code>findViewById()</code><br>2.<code>longToast()</code>&#x4EE3;&#x66FF;&#x539F;&#x751F;<code>Toast()</code><br>3.<code>startActivity(vararg params: Pair&lt;String, Any&gt;</code>&#x4EE3;&#x66FF;&#x539F;&#x751F;<code>startActivity()</code><br>4.<code>Anko SQLite</code>&#x7B80;&#x5316;&#x539F;&#x751F;&#x7684;<code>SQLite</code>&#x7684;&#x4F7F;&#x7528;<br>5.<code>Dialogs</code>&#x7684;&#x7B80;&#x5316;&#x4F7F;&#x7528;</p>\n<h1 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h1><p>&#x597D;&#x4E86;&#xFF0C;&#x5927;&#x6982;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#x4E86;&#x3002;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x60F3;&#x5B66;&#x4E0E;&#x6B63;&#x5728;&#x5B66;&#x4E60;<code>kotlin</code>&#x7684;&#x5BA2;&#x5B98;&#x4EEC;&#xFF0C;&#x5C11;&#x8D70;&#x5F2F;&#x8DEF;&#xFF0C;&#x5FEB;&#x901F;&#x6210;&#x957F;&#x3002;&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x4EA4;&#x6D41;&#xFF01;</p>\n<p><a href=\"https://github.com/idisfkj/NewsKotlin\" target=\"_blank\" rel=\"external\">&#x9879;&#x76EE;&#x5730;&#x5740;</a></p>\n"},{"title":"Android共享动画兼容实现","url":"https://www.rousetime.com/2017/07/16/Android共享动画兼容实现/","content":"<blockquote>\n<p><em>&#x751F;&#x547D;&#x4E0D;&#x606F;&#xFF0C;&#x594B;&#x6597;&#x4E0D;&#x6B62;</em></p>\n</blockquote>\n<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x8BB0;&#x5F55;&#xFF0C;&#x6700;&#x8FD1;&#x7684;&#x6587;&#x7AE0;&#x662F;&#x5728;3&#x6708;12&#x65E5;&#x5199;&#x7684;&#xFF0C;&#x4ECA;&#x5929;&#x7684;7&#x6708;16&#x65E5;&#x3002;&#x4E0D;&#x77E5;&#x4E0D;&#x89C9;&#x5DF2;&#x7ECF;4&#x4E2A;&#x6708;&#x6CA1;&#x6709;&#x5750;&#x5728;&#x7535;&#x8111;&#x524D;&#x8BA4;&#x771F;&#x7684;&#x601D;&#x8003;&#x4E0E;&#x9759;&#x4E0B;&#x5FC3;&#x6765;&#x505A;&#x4E9B;&#x603B;&#x7ED3;&#x3002;&#x8D81;&#x7740;&#x521A;&#x521A;&#x738B;&#x8005;&#x8363;&#x8000;&#x8D85;&#x795E;&#x7684;&#x5174;&#x594B;&#x70ED;&#x5EA6;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8BF4;&#x8BF4;&#x6211;&#x5BF9;<code>Android</code>&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x65B9;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x5FC3;&#x5F97;&#x3002;</p>\n<h1 id=\"&#x5B9E;&#x73B0;&#x65B9;&#x6848;\"><a href=\"#&#x5B9E;&#x73B0;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x65B9;&#x6848;\"></a>&#x5B9E;&#x73B0;&#x65B9;&#x6848;</h1><p>&#x8FD9;&#x91CC;&#x6211;&#x59D1;&#x4E14;&#x90FD;&#x8BA4;&#x4E3A;&#x5927;&#x5BB6;&#x90FD;&#x5BF9;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x6709;&#x6240;&#x4E86;&#x89E3;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5C31;&#x662F;&#x4ECE;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x5E73;&#x79FB;&#x7F29;&#x653E;&#x8FC7;&#x5EA6;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x3002;&#x5728;&#x5B9E;&#x73B0;&#x65B9;&#x9762;&#x4E0A;&#x9488;&#x5BF9;&#x4E0D;&#x540C;<code>Android</code>&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#xFF0C;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x5BF9;&#x4E8E;<code>Android 5.0&#xFF08;LOLLIPOP API 21&#xFF09;</code>&#x4EE5;&#x4E0A;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x65B9;&#x4FBF;&#x4E86;&#x8BB8;&#x591A;&#xFF0C;&#x53EA;&#x9700;&#x505A;&#x4E00;&#x4E9B;&#x5951;&#x7EA6;&#x4E0E;&#x8C03;&#x7528;&#x7CFB;&#x7EDF;&#x7684;<code>API</code>&#x5373;&#x53EF;&#x3002;&#x4F46;&#x662F;&#x5E02;&#x573A;&#x4E0A;&#x5BF9;&#x4E8E;<code>Android 5.0</code>&#x4EE5;&#x4E0B;&#x7684;&#x673A;&#x578B;&#x8FD8;&#x662F;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x80FD;&#x5FFD;&#x7565;&#x5B83;&#x4EEC;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x517C;&#x5BB9;&#x4E0A;&#x4E0B;&#x7248;&#x672C;&#x7684;&#x673A;&#x578B;&#xFF0C;&#x540C;&#x65F6;&#x4EE5;&#x4E3A;&#x4E86;&#x8BA9;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x4E00;&#x81F4;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x5B9E;&#x73B0;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x7684;&#x9700;&#x6C42;&#x3002;</p>\n<h2 id=\"Android-5-0-&#x53CA;&#x5176;&#x4EE5;&#x4E0A;&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#Android-5-0-&#x53CA;&#x5176;&#x4EE5;&#x4E0A;&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"Android 5.0 &#x53CA;&#x5176;&#x4EE5;&#x4E0A;&#x7684;&#x5B9E;&#x73B0;\"></a>Android 5.0 &#x53CA;&#x5176;&#x4EE5;&#x4E0A;&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x4E3A;&#x4E86;&#x6EE1;&#x8DB3;&#x90E8;&#x5206;&#x53EA;&#x8003;&#x8651;<code>Android 5.0</code>&#x4EE5;&#x4E0A;&#x5B9E;&#x73B0;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4E5F;&#x5BF9;&#x7CFB;&#x7EDF;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x793A;&#x4F8B;&#x8BF4;&#x660E;&#x3002;&#x6211;&#x8FD9;&#x8FB9;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E09;&#x6B65;&#x3002;</p>\n<h3 id=\"&#x5EFA;&#x7ACB;&#x5951;&#x7EA6;\"><a href=\"#&#x5EFA;&#x7ACB;&#x5951;&#x7EA6;\" class=\"headerlink\" title=\"&#x5EFA;&#x7ACB;&#x5951;&#x7EA6;\"></a>&#x5EFA;&#x7ACB;&#x5951;&#x7EA6;</h3><p>&#x8981;&#x60F3;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x70B9;&#x51FB;&#x63A7;&#x4EF6;&#x5171;&#x4EAB;&#x8DF3;&#x8F6C;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x5BF9;&#x4E8E;&#x63A7;&#x4EF6;&#x4E0A;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E24;&#x4E2A;&#x5171;&#x4EAB;&#x7684;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#xFF0C;&#x5373;&#x8981;&#x8BA9;&#x7CFB;&#x7EDF;&#x80FD;&#x591F;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x751F;&#x6548;&#x7684;&#x63A7;&#x4EF6;&#x3002;&#x800C;&#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x8FD9;&#x79CD;&#x6548;&#x679C;, &#x7CFB;&#x7EDF;&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">public final void setTransitionName(String transitionName)</div></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x662F;<code>View</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#x5951;&#x7EA6;&#x540D;&#x79F0;&#x3002;&#x5373;&#x5728;&#x4E24;&#x4E2A;&#x754C;&#x9762;&#x4E0A;&#x5BF9;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5171;&#x4EAB;&#x7684;&#x4E24;&#x4E2A;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x76F8;&#x540C;&#x540D;&#x79F0;&#x7684;&#x8BBE;&#x5B9A;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static final String TRANSITION_NAME_SHARE = &quot;share&quot;;</div><div class=\"line\">imageView.setTransitionName(TRANSITION_NAME_SHARE);</div></pre></td></tr></table></figure>\n<p>&#x4EE5;&#x4E0A;&#x662F;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#xFF0C;&#x5728;<code>xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x4E5F;&#x80FD;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:transitionName=&quot;share&quot;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x552F;&#x4E00;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5C31;&#x662F;&#x540D;&#x79F0;&#x5FC5;&#x987B;&#x76F8;&#x540C;</p>\n</blockquote>\n<h3 id=\"&#x8C03;&#x7528;ActivityOptionsCompat\"><a href=\"#&#x8C03;&#x7528;ActivityOptionsCompat\" class=\"headerlink\" title=\"&#x8C03;&#x7528;ActivityOptionsCompat\"></a>&#x8C03;&#x7528;ActivityOptionsCompat</h3><p>&#x4E0A;&#x9762;&#x5EFA;&#x7ACB;&#x7684;&#x5951;&#x7EA6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#x2013;&#x5F00;&#x542F;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x3002;&#x5728;&#x8FDB;&#x884C;&#x754C;&#x9762;&#x7684;&#x8DF3;&#x8F6C;&#xFF0C;&#x7ED9;&#x5E73;&#x5E38;&#x7684;&#x7528;&#x53D1;&#x4E00;&#x6837;&#xFF0C;&#x521B;&#x5EFA;<code>Intent</code>&#xFF0C;&#x8C03;&#x7528;<code>startActivity</code>&#x65B9;&#x6CD5;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x5728;&#x8C03;&#x7528;<code>startActivity</code>&#x65F6;&#x8981;&#x5728;&#x4F20;&#x4E2A;<code>Bundle</code>&#x53C2;&#x6570;&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x9700;&#x8981;&#x901A;&#x8FC7;<code>ActivityOptionsCompat</code>&#x83B7;&#x53D6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ActivityOptionsCompat compat = ActivityOptionsCompat.makeSceneTransitionAnimation(MainActivity.this, imageView, TRANSITION_NAME_SHARE);</div></pre></td></tr></table></figure>\n<p>&#x8BF4;&#x4E0B;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;<code>Activity</code>&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x7684;<code>View</code>&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x5C31;&#x662F;&#x5951;&#x7EA6;&#x540D;&#x79F0;&#x3002;&#x6700;&#x540E;&#x5F00;&#x542F;&#x8DF3;&#x8F6C;&#x65F6;&#x4F20;&#x5165;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">startActivity(intent, compat.toBundle());</div></pre></td></tr></table></figure>\n<h3 id=\"finishAfterTransition\"><a href=\"#finishAfterTransition\" class=\"headerlink\" title=\"finishAfterTransition\"></a>finishAfterTransition</h3><p>&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x8DF3;&#x8F6C;&#x7684;&#x5F00;&#x542F;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x4E86;&#xFF0C;&#x5F53;&#x7136;&#x524D;&#x63D0;&#x662F;&#x5728;<code>Andorid 5.0</code>&#x53CA;&#x5176;&#x4EE5;&#x4E0A;&#x7684;&#x624B;&#x673A;&#x4E0A;&#x3002;&#x4E0A;&#x9762;&#x53EA;&#x5B8C;&#x6210;&#x4E86;&#x5F00;&#x542F;&#xFF0C;&#x5BF9;&#x4E8E;&#x9000;&#x51FA;&#xFF0C;&#x5B9E;&#x73B0;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x5728;&#x9000;&#x51FA;&#x7684;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">finishAfterTransition();</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;<code>Activity</code>&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x9000;&#x51FA;&#x754C;&#x9762;&#x4E2D;&#x8C03;&#x7528;&#x3002;&#x5EFA;&#x8BAE;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>onBackPressed</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;</p>\n<p>&#x518D;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x5C31;10&#x884C;&#x4EE3;&#x7801;&#x4EE5;&#x5185;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x53EA;&#x652F;&#x6301;&#x9AD8;&#x7248;&#x672C;&#x7684;&#x7CFB;&#x7EDF;&#x7684;&#x670B;&#x53CB;&#x6765;&#x8BF4;&#xFF0C;&#x771F;&#x662F;&#x723D;&#x6B6A;&#x6B6A;&#x3002;&#x65E0;&#x56FE;&#x65E0;&#x771F;&#x76F8;&#xFF0C;&#x5BA2;&#x5B98;&#x8BF7;&#x770B;&#x56FE;&#x3002;</p>\n<p><img src=\"/2017/07/16/Android&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x517C;&#x5BB9;&#x5B9E;&#x73B0;/share1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<hr>\n<h2 id=\"&#x517C;&#x5BB9;&#x5168;&#x7248;&#x672C;&#x5B9E;&#x73B0;\"><a href=\"#&#x517C;&#x5BB9;&#x5168;&#x7248;&#x672C;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x517C;&#x5BB9;&#x5168;&#x7248;&#x672C;&#x5B9E;&#x73B0;\"></a>&#x517C;&#x5BB9;&#x5168;&#x7248;&#x672C;&#x5B9E;&#x73B0;</h2><p>&#x6211;&#x76F8;&#x4FE1;&#x4E00;&#x76F4;&#x8BFB;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x5BA2;&#x5B98;&#x5FC3;&#x7406;&#x90FD;&#x662F;&#x5F88;&#x6109;&#x60A6;&#x4E0E;&#x8F7B;&#x677E;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x9700;&#x8981;&#x63D0;&#x9192;&#x5BA2;&#x5B98;&#x4EEC;&#xFF0C;&#x5E94;&#x8BE5;&#x63D0;&#x8D77;&#x51E0;&#x5206;&#x6CE8;&#x610F;&#x4E86;&#x6765;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x7CBE;&#x5F69;&#x5185;&#x5BB9;&#x3002;</p>\n<h3 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h3><p>&#x57FA;&#x4E8E;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x6240;&#x8C13;&#x4E00;&#x56FE;&#x80DC;&#x5343;&#x8A00;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6765;&#x7ED3;&#x5408;&#x6548;&#x679C;&#x56FE;&#x6765;&#x5206;&#x6790;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x6548;&#x679C;&#x56FE;&#x80FD;&#x591F;&#x770B;&#x5230;&#x4E24;&#x4E2A;&#x660E;&#x663E;&#x7684;&#x6548;&#x679C;&#xFF1A;</p>\n<ul>\n<li>&#x754C;&#x9762;&#x80CC;&#x666F;&#x662F;&#x900F;&#x660E;&#x6E10;&#x53D8;&#x7684;&#x65B9;&#x5F0F;&#x8FC7;&#x5EA6;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x3002;</li>\n<li>&#x63A7;&#x4EF6;&#x662F;&#x4ECE;&#x7B2C;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x539F;&#x5730;&#x653E;&#x5927;&#x5E73;&#x79FB;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;</li>\n</ul>\n<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x8981;&#x70B9;&#x6765;&#x770B;&#xFF0C;&#x5BF9;&#x63A7;&#x4EF6;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#x662F;&#x91CD;&#x4E2D;&#x4E4B;&#x91CD;&#x3002;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x662F;:<code>&#x5C06;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x900F;&#x660E;&#x542F;&#x52A8;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x7F29;&#x653E;&#x5E73;&#x79FB;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x653E;&#x5927;&#x5E73;&#x79FB;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x539F;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;</code>&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x9AD8;&#x7248;&#x672C;&#x7684;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x3002;&#x8981;&#x60F3;&#x8FBE;&#x5230;&#x653E;&#x5927;&#x5E73;&#x79FB;&#x52A8;&#x753B;&#x7684;&#x51C6;&#x786E;&#x8FDB;&#x884C;&#xFF0C;&#x81EA;&#x7136;&#x8981;&#x5F97;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x63A7;&#x4EF6;&#x53C2;&#x6570;&#x4FE1;&#x606F;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x5B9E;&#x73B0;&#x63A7;&#x4EF6;&#x7684;&#x653E;&#x5927;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5FC5;&#x987B;&#x8981;&#x5F97;&#x5230;&#x4E24;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x4E0E;&#x63A7;&#x4EF6;&#x5185;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#x3002;&#x518D;&#x8BA1;&#x7B97;&#x51FA;&#x9700;&#x8981;&#x7F29;&#x653E;&#x7684;&#x6BD4;&#x4F8B;&#x3002;</p>\n<blockquote>\n<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x662F;&#x5BF9;&#x56FE;&#x7247;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x5171;&#x4EAB;&#x52A8;&#x753B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7B80;&#x5355;&#x7684;TextView&#x4E4B;&#x7C7B;&#x7684;&#x63A7;&#x4EF6;&#x5C31;&#x53EA;&#x9700;&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x76F8;&#x4FE1;&#x5BA2;&#x5B98;&#x4EEC;&#x770B;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x4E5F;&#x80FD;&#x8FC5;&#x901F;&#x5E94;&#x5BF9;&#x5176;&#x5B83;&#x63A7;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#x3002;</p>\n</blockquote>\n<p>&#x6709;&#x7684;&#x5BA2;&#x5B98;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x6240;&#x7591;&#x95EE;&#xFF0C;<code>&#x4E3A;&#x4F55;&#x8981;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#x5462;&#xFF0C;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#x4E0D;&#x5C31;&#x7B49;&#x4E8E;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x5417;&#xFF1F;</code>&#x662F;&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x6765;&#x8BF4;&#x786E;&#x5B9E;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x4F46;&#x6709;&#x7684;&#x65F6;&#x5019;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x7B49;&#x4E8E;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x4F8B;&#x5982;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x56FE;&#x7247;&#x3002;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x4F7F;&#x7528;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x6765;&#x8BA1;&#x7B97;&#x7F29;&#x653E;&#x6BD4;&#x4F8B;&#xFF0C;&#x81EA;&#x7136;&#x5F97;&#x4E0D;&#x5230;&#x9884;&#x60F3;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x56FE;&#x7247;&#x7F29;&#x653E;&#x7684;&#x6548;&#x679C;&#x5FC5;&#x7136;&#x4F1A;&#x4E0D;&#x51C6;&#x786E;&#x3002;&#x5176;&#x5B9E;&#x672C;&#x8D28;&#x662F;&#x6211;&#x4EEC;&#x8981;<code>&#x8131;&#x79BB;&#x63A7;&#x4EF6;&#xFF0C;&#x5173;&#x6CE8;&#x672C;&#x8D28;---&#x56FE;&#x7247;&#x6548;&#x679C;</code>&#x3002;</p>\n<p>&#x8BF4;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5BA2;&#x5B98;&#x4EEC;&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x4E0D;&#x8010;&#x70E6;&#x4E86;&#xFF0C;&#x5F00;&#x59CB;<code>show me the code</code>&#x3002;</p>\n<h3 id=\"&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;\"><a href=\"#&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;\" class=\"headerlink\" title=\"&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;\"></a>&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;</h3><p>&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x83B7;&#x53D6;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x6765;&#x601D;&#x8003;&#x56FE;&#x7247;&#x5728;&#x63A7;&#x4EF6;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x771F;&#x5B9E;&#x5BBD;&#x9AD8;&#x3002;&#x770B;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void convertOriginalInfo(ImageView oriView) {</div><div class=\"line\">        if (oriView == null || oriView.getDrawable() == null) {</div><div class=\"line\">            throw new NullPointerException(&quot;original ImageView or ImageView drawable must not null&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        //get original ImageView info        </div><div class=\"line\">        oriView.getImageMatrix().getValues(mOriginalValues);</div><div class=\"line\">        Rect oriRect = oriView.getDrawable().getBounds();</div><div class=\"line\">        mOriginalWidth = (int) (oriRect.width() * mOriginalValues[Matrix.MSCALE_X]);</div><div class=\"line\">        mOriginalHeight = (int) (oriRect.height() * mOriginalValues[Matrix.MSCALE_Y]);</div><div class=\"line\">        mOriginalViewWidth = oriView.getWidth();</div><div class=\"line\">        mOriginalViewHeight = oriView.getHeight();</div><div class=\"line\">        oriView.getLocationOnScreen(mOriginalLocation);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h4 id=\"Matrix\"><a href=\"#Matrix\" class=\"headerlink\" title=\"Matrix\"></a>Matrix</h4><p>&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;&#xFF0C;&#x6BCF;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x4E00;&#x4E2A;<code>Matrix</code>&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7684;&#x662F;&#x4E00;&#x4E2A;<code>3*3</code>&#x7684;&#x77E9;&#x9635;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x56FE;&#x7247;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x7F29;&#x653E;&#xFF0C;&#x5E73;&#x79FB;&#x3002;</p>\n<blockquote>\n<p>&#x8FD9;&#x91CC;&#x662F;ImageVIew&#x4E2D;&#x7684;ImageMatrix&#x800C;&#x4E0D;&#x662F;View&#x4E2D;&#x7684;Matrix&#xFF0C;&#x5177;&#x4F53;&#x7684;Matrix&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x81EA;&#x884C;google</p>\n</blockquote>\n<p>&#x901A;&#x8FC7;<code>Matrix</code>&#x7684;<code>getValues</code>&#x65B9;&#x6CD5;&#x5C06;<code>3*3</code>&#x7684;&#x77E9;&#x5F62;&#x503C;&#x8F6C;&#x5316;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A;9&#x7684;<code>float</code>&#x578B;&#x6570;&#x7EC4;<code>mOriginalValues</code>&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Matrix.MSCALE_X</code>&#x4E0E;<code>Matrix.MSCALE_Y</code>&#x5206;&#x522B;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x7684;<code>x</code>&#x4E0E;<code>y</code>&#x65B9;&#x5411;&#x7684;&#x7F29;&#x653E;&#x6BD4;&#x4F8B;&#x3002;&#x518D;&#x901A;&#x8FC7;<code>ImageView</code>&#x7684;<code>getDrawable.getBounds</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x539F;&#x59CB;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;&#x6700;&#x540E;&#x4E58;&#x4EE5;&#x6BD4;&#x4F8B;&#x7CFB;&#x6570;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">//calculator scale</div><div class=\"line\">mScaleX = (float) mOriginalWidth / mTargetWidth;</div><div class=\"line\">mScaleY = (float) mOriginalHeight / mTargetHeight;</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x8BF4;&#x5230;<code>Matrix</code>&#xFF0C;&#x5C31;&#x518D;&#x7B80;&#x5355;&#x8BF4;&#x4E0B;&#x5B83;&#x7684;&#x4E24;&#x4E2A;&#x503C;&#xFF0C;<code>Matrix.MTRANS_X</code>&#x4E0E;<code>Matrix.MTRANS_Y</code>&#x5206;&#x522B;&#x4EE3;&#x8868;&#x56FE;&#x7247;&#x5E73;&#x79FB;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x7C7B;&#x4F3C;&#x4E0E;&#x5FAE;&#x4FE1;&#x670B;&#x53CB;&#x5708;&#x4E2D;&#x7684;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x7684;&#x4E0B;&#x6ED1;&#x5E73;&#x79FB;&#x7F29;&#x653E;&#x9000;&#x51FA;&#x6548;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x503C;&#x6765;&#x83B7;&#x53D6;&#x56FE;&#x7247;&#x5728;&#x7F29;&#x653E;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E73;&#x79FB;&#x91CF;&#x3002;</p>\n<h4 id=\"getLocationOnScreen\"><a href=\"#getLocationOnScreen\" class=\"headerlink\" title=\"getLocationOnScreen\"></a>getLocationOnScreen</h4><p>&#x8BE5;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x5230;&#x63A7;&#x4EF6;&#x5DE6;&#x4E0A;&#x89D2;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#x3002;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A;2&#x7684;&#x6570;&#x7EC4;&#x3002;&#x6709;&#x4E2A;&#x8BE5;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x65B9;&#x4FBF;&#x7684;&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x4E2D;&#x5FC3;&#x5750;&#x6807;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">//calculator pivot position</div><div class=\"line\">mPivotX = mTargetLocation[0] + mTargetValues[Matrix.MTRANS_X] + mTargetWidth / 2;</div><div class=\"line\">mPivotY = mTargetLocation[1] + mTargetValues[Matrix.MTRANS_Y] + mTargetHeight / 2;</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>mTargetLocation[0]</code>&#x4EE3;&#x8868;&#x63A7;&#x4EF6;&#x7684;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;<code>x</code>&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;<code>mTargetLocation[1]</code>&#x4EE3;&#x8868;&#x63A7;&#x4EF6;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;<code>y</code>&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#x3002;</p>\n<blockquote>\n<p>&#x540E;&#x7EED;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x5E73;&#x79FB;&#x52A8;&#x753B;&#x9700;&#x8981;&#x786E;&#x5B9A;&#x4E2D;&#x5FC3;&#x4F4D;&#x7F6E;&#xFF0C;&#x7531;&#x4E8E;&#x8981;&#x8FBE;&#x5230;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x5E73;&#x79FB;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5F97;&#x5230;&#x56FE;&#x7247;&#x7684;&#x786E;&#x5207;&#x4E2D;&#x5FC3;&#x4F4D;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x63A7;&#x4EF6;&#x7684;&#x4E2D;&#x5FC3;</p>\n</blockquote>\n<h4 id=\"&#x5E73;&#x79FB;&#x504F;&#x79FB;&#x91CF;\"><a href=\"#&#x5E73;&#x79FB;&#x504F;&#x79FB;&#x91CF;\" class=\"headerlink\" title=\"&#x5E73;&#x79FB;&#x504F;&#x79FB;&#x91CF;\"></a>&#x5E73;&#x79FB;&#x504F;&#x79FB;&#x91CF;</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mCenterOffsetX = (int) (mOriginalLocation[0] + mOriginalValues[Matrix.MTRANS_X] + mOriginalViewWidth / 2</div><div class=\"line\">                - mTargetLocation[0] - mTargetValues[Matrix.MTRANS_X] - mTargetViewWidth / 2);</div><div class=\"line\">mCenterOffsetY = (int) (mOriginalLocation[1] + mOriginalValues[Matrix.MTRANS_Y] + mOriginalViewHeight / 2</div><div class=\"line\">                - CommonUtils.getStatusBarHeight(context) - mTargetLocation[1] - mTargetValues[Matrix.MTRANS_Y] - mTargetViewHeight / 2);</div></pre></td></tr></table></figure>\n<p>&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x89E3;&#x91CA;&#x8BF4;&#x660E;&#xFF0C;&#x5BA2;&#x5B98;&#x4EEC;&#x5BF9;&#x5E73;&#x79FB;&#x91CF;&#x7684;&#x8BA1;&#x7B97;&#x5E94;&#x8BE5;&#x4E0D;&#x96BE;&#x7406;&#x89E3;&#x3002;&#x6838;&#x5FC3;&#x662F;&#x5BF9;&#x4E2D;&#x5FC3;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x504F;&#x79FB;&#x91CF;&#x8BA1;&#x7B97;&#x3002;</p>\n<h3 id=\"&#x8FDB;&#x5165;&#x52A8;&#x753B;\"><a href=\"#&#x8FDB;&#x5165;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"&#x8FDB;&#x5165;&#x52A8;&#x753B;\"></a>&#x8FDB;&#x5165;&#x52A8;&#x753B;</h3><p>&#x9996;&#x5148;&#x8981;&#x786E;&#x8BA4;&#x63A7;&#x4EF6;&#x52A8;&#x753B;&#x7684;&#x8C03;&#x7528;&#x65F6;&#x673A;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5728;&#x63A7;&#x4EF6;&#x7ED8;&#x5236;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x6700;&#x65E9;&#x7684;&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x4E3A;&#x52A8;&#x753B;&#x8FDB;&#x884C;&#x51C6;&#x5907;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x6CE8;&#x518C;<code>addOnPreDrawListener</code>&#x8FDB;&#x884C;&#x76D1;&#x542C;&#x63A7;&#x4EF6;&#x7684;&#x7ED8;&#x5236;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">public FKJShareElement convert(final ImageView tarView) {</div><div class=\"line\">        if (mInfo == null) {</div><div class=\"line\">            throw new NullPointerException(&quot;ShareElementInfo must not null&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        tarView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public boolean onPreDraw() {</div><div class=\"line\">                tarView.getViewTreeObserver().removeOnPreDrawListener(this);</div><div class=\"line\">                mInfo.convertTargetInfo(tarView, mContext);</div><div class=\"line\">                //init</div><div class=\"line\">                if (mEnter) {</div><div class=\"line\">                    tarView.setPivotX(mInfo.getPivotX());</div><div class=\"line\">                    tarView.setPivotY(mInfo.getPivotY());</div><div class=\"line\">                    tarView.setTranslationX(mInfo.getCenterOffsetX());</div><div class=\"line\">                    tarView.setTranslationY(mInfo.getCenterOffsetY());</div><div class=\"line\">                    tarView.setScaleX(mInfo.getScaleX());</div><div class=\"line\">                    tarView.setScaleY(mInfo.getScaleY());</div><div class=\"line\">                    mAnimator = tarView.animate();</div><div class=\"line\">                    start();</div><div class=\"line\">                    startBackgroundAlphaAnimation(mBgView, new ColorDrawable(ContextCompat.getColor(mContext, R.color.fkj_white)));</div><div class=\"line\">                }</div><div class=\"line\">                return true;</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        return this;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x8FDB;&#x5165;&#x52A8;&#x753B;&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x539F;&#x7406;&#x5206;&#x6790;&#x4E2D;&#x5DF2;&#x7ECF;&#x6307;&#x51FA;&#xFF0C;&#x8981;&#x5148;&#x5C06;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x7F29;&#x653E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5148;&#x5BF9;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x5E73;&#x79FB;&#xFF0C;&#x4F7F;&#x7528;<code>View</code>&#x7684;<code>setTranslationX</code>&#x7B49;&#x65B9;&#x6CD5;&#x3002;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;<code>mInfo</code>&#x4FDD;&#x5B58;&#x4E86;&#x4E0A;&#x9762;&#x83B7;&#x53D6;&#x7684;&#x56FE;&#x7247;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;&#x771F;&#x6B63;&#x7684;&#x52A8;&#x753B;&#x6267;&#x884C;&#x662F;&#x5728;<code>start</code>&#x4E2D;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;&#x76EE;&#x7684;&#x662F;&#x6267;&#x884C;&#x63A7;&#x4EF6;&#x7684;&#x8FD8;&#x539F;&#x52A8;&#x753B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void start() {</div><div class=\"line\">    mAnimator.setDuration(mDuration)</div><div class=\"line\">            .scaleX(1.0f)</div><div class=\"line\">            .scaleY(1.0f)</div><div class=\"line\">            .translationX(0)</div><div class=\"line\">            .translationY(0);</div><div class=\"line\">    if (mListener != null) {</div><div class=\"line\">        mAnimator.setListener(mListener);</div><div class=\"line\">    }</div><div class=\"line\">    if (mInterpolator != null) {</div><div class=\"line\">        mAnimator.setInterpolator(mInterpolator);</div><div class=\"line\">    }</div><div class=\"line\">    mAnimator.start();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"&#x9000;&#x51FA;&#x52A8;&#x753B;\"><a href=\"#&#x9000;&#x51FA;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"&#x9000;&#x51FA;&#x52A8;&#x753B;\"></a>&#x9000;&#x51FA;&#x52A8;&#x753B;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void startExitAnimator() {</div><div class=\"line\">    mEnter = false;</div><div class=\"line\">    mAnimator.setDuration(mDuration)</div><div class=\"line\">            .scaleX(mInfo.getScaleX())</div><div class=\"line\">            .scaleY(mInfo.getScaleY())</div><div class=\"line\">            .translationX(mInfo.getCenterOffsetX())</div><div class=\"line\">            .translationY(mInfo.getCenterOffsetY());</div><div class=\"line\">    if (mListener != null) {</div><div class=\"line\">        mAnimator.setListener(mListener);</div><div class=\"line\">    }</div><div class=\"line\">    if (mInterpolator != null) {</div><div class=\"line\">        mAnimator.setInterpolator(mInterpolator);</div><div class=\"line\">    }</div><div class=\"line\">    mAnimator.start();</div><div class=\"line\">    startBackgroundAlphaAnimation(mBgView, new ColorDrawable(ContextCompat.getColor(mContext, R.color.fkj_white)), 255, 0);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x9000;&#x51FA;&#x52A8;&#x753B;&#x5C31;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#x4E00;&#x70B9;&#xFF0C;&#x53EA;&#x9700;&#x5C06;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x63A7;&#x4EF6;&#x7F29;&#x653E;&#x5E73;&#x79FB;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x63A7;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x5373;&#x53EF;&#x3002;</p>\n<h3 id=\"&#x754C;&#x9762;&#x8FC7;&#x5EA6;&#x52A8;&#x753B;\"><a href=\"#&#x754C;&#x9762;&#x8FC7;&#x5EA6;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"&#x754C;&#x9762;&#x8FC7;&#x5EA6;&#x52A8;&#x753B;\"></a>&#x754C;&#x9762;&#x8FC7;&#x5EA6;&#x52A8;&#x753B;</h3><p>&#x5728;&#x8FDB;&#x5165;&#x4E0E;&#x9000;&#x51FA;&#x52A8;&#x753B;&#x4E2D;&#x90FD;&#x8C03;&#x7528;&#x4E86;<code>startBackgroundAlphaAnimation</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5BF9;&#x754C;&#x9762;&#x8FDB;&#x884C;&#x900F;&#x660E;&#x6E10;&#x53D8;&#x3002;&#x539F;&#x7406;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5BF9;&#x7B2C;&#x4E8C;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x80CC;&#x666F;<code>View</code>&#x8FDB;&#x884C;&#x80CC;&#x666F;&#x6E10;&#x53D8;&#xFF0C;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void startBackgroundAlphaAnimation(final View bgView, final ColorDrawable colorDrawable, int... value) {</div><div class=\"line\">        if (bgView == null)</div><div class=\"line\">            return;</div><div class=\"line\">        if (value == null || value.length == 0) {</div><div class=\"line\">            value = new int[]{0, 255};</div><div class=\"line\">        }</div><div class=\"line\">        ObjectAnimator animator = ObjectAnimator.ofInt(colorDrawable, &quot;alpha&quot;, value);</div><div class=\"line\">        animator.setDuration(mDuration);</div><div class=\"line\">        animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationUpdate(ValueAnimator animation) {</div><div class=\"line\">                bgView.setBackground(colorDrawable);</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        animator.start();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x4EE5;&#x4E0A;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x900F;&#x660E;&#x52A8;&#x753B;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x4E0D;&#x8FC7;&#x76F4;&#x63A5;&#x8FD9;&#x6837;&#x8C03;&#x7528;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x6548;&#x679C;&#x4E0D;&#x5BF9;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x5C06;Activity&#x7684;theme&#x8BBE;&#x7F6E;&#x4E3A;&#x900F;&#x660E;&#x6548;&#x679C;&#x3002;&#x53EA;&#x9700;&#x5C06;android:windowBackgroun&#x8BBE;&#x7F6E;&#x4E3A;&#x900F;&#x660E;&#x5373;&#x53EF;</p>\n</blockquote>\n<h1 id=\"&#x6536;&#x5272;\"><a href=\"#&#x6536;&#x5272;\" class=\"headerlink\" title=\"&#x6536;&#x5272;\"></a>&#x6536;&#x5272;</h1><p>&#x4E0D;&#x77E5;&#x9053;&#x575A;&#x6301;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x5BA2;&#x5B98;&#x6709;&#x591A;&#x5C11;&#xFF0C;&#x5148;&#x5728;&#x8FD9;&#x91CC;&#x8C22;&#x8C22;&#x5BA2;&#x5B98;&#x4EEC;&#x7684;&#x652F;&#x6301;&#x3002;&#x6700;&#x540E;&#x5C06;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x7ED3;&#x5408;&#x4E00;&#x8D77;&#x7075;&#x6D3B;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x5728;<code>Android 5.0</code>&#x4EE5;&#x4E0A;&#x8C03;&#x7528;&#x7CFB;&#x7EDF;&#x65B9;&#x6CD5;&#xFF0C;<code>Android 5.0</code>&#x4EE5;&#x4E0B;&#x8C03;&#x7528;&#x5C01;&#x88C5;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5927;&#x6982;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<h2 id=\"&#x5F15;&#x5165;&#x4F9D;&#x8D56;\"><a href=\"#&#x5F15;&#x5165;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x5F15;&#x5165;&#x4F9D;&#x8D56;\"></a>&#x5F15;&#x5165;&#x4F9D;&#x8D56;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">   compile &apos;com.idisfkj.share:sharelibrary:1.0.0&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6267;&#x884C;&#x754C;&#x9762;\"><a href=\"#&#x6267;&#x884C;&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x6267;&#x884C;&#x754C;&#x9762;\"></a>&#x6267;&#x884C;&#x754C;&#x9762;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">imageView.setOnClickListener(new View.OnClickListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onClick(View v) {</div><div class=\"line\">                Intent intent = new Intent(MainActivity.this, ShareElementActivity.class);</div><div class=\"line\">                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {</div><div class=\"line\">                    imageView.setTransitionName(TRANSITION_NAME_SHARE);</div><div class=\"line\">                    ActivityOptionsCompat compat = ActivityOptionsCompat.makeSceneTransitionAnimation(MainActivity.this, imageView, TRANSITION_NAME_SHARE);</div><div class=\"line\">                    startActivity(intent, compat.toBundle());</div><div class=\"line\">                } else {</div><div class=\"line\">                    ShareElementInfo info = new ShareElementInfo();</div><div class=\"line\">                    info.convertOriginalInfo(imageView);</div><div class=\"line\">                    intent.putExtra(EXTRA_SHARE_ELEMENT_INFO, info);</div><div class=\"line\">                    startActivity(intent);</div><div class=\"line\">                    overridePendingTransition(0, 0);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h2 id=\"&#x54CD;&#x5E94;&#x754C;&#x9762;\"><a href=\"#&#x54CD;&#x5E94;&#x754C;&#x9762;\" class=\"headerlink\" title=\"&#x54CD;&#x5E94;&#x754C;&#x9762;\"></a>&#x54CD;&#x5E94;&#x754C;&#x9762;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {</div><div class=\"line\">    mImageView.setTransitionName(MainActivity.TRANSITION_NAME_SHARE);</div><div class=\"line\">} else {</div><div class=\"line\">   ShareElementInfo info = getIntent().getExtras().getParcelable(MainActivity.EXTRA_SHARE_ELEMENT_INFO);</div><div class=\"line\">   mShareElement = new FKJShareElement(info, this, mImageView.getRootView());</div><div class=\"line\">   mShareElement.convert(mImageView)</div><div class=\"line\">           .setDuration(ANIMATOR_DURATION)</div><div class=\"line\">           .setInterpolator(new LinearInterpolator())</div><div class=\"line\">           .startEnterAnimator();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onBackPressed() {</div><div class=\"line\">    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {</div><div class=\"line\">        finishAfterTransition();</div><div class=\"line\">    } else {</div><div class=\"line\">        mShareElement.convert(mImageView)</div><div class=\"line\">                .setDuration(ANIMATOR_DURATION)</div><div class=\"line\">                .setInterpolator(new LinearInterpolator())</div><div class=\"line\">                .setListener(new AnimatorListenerAdapter() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onAnimationEnd(Animator animation) {</div><div class=\"line\">                        finish();</div><div class=\"line\">                        overridePendingTransition(0, 0);</div><div class=\"line\">                    }</div><div class=\"line\">                })</div><div class=\"line\">                .startExitAnimator();</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h1 id=\"&#x9547;&#x6587;&#x4E4B;&#x5B9D;\"><a href=\"#&#x9547;&#x6587;&#x4E4B;&#x5B9D;\" class=\"headerlink\" title=\"&#x9547;&#x6587;&#x4E4B;&#x5B9D;\"></a>&#x9547;&#x6587;&#x4E4B;&#x5B9D;</h1><p><img src=\"/2017/07/16/Android&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x517C;&#x5BB9;&#x5B9E;&#x73B0;/share2.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"><br><img src=\"/2017/07/16/Android&#x5171;&#x4EAB;&#x52A8;&#x753B;&#x517C;&#x5BB9;&#x5B9E;&#x73B0;/share3.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><a href=\"https://github.com/idisfkj/AndroidShareElement\" target=\"_blank\" rel=\"external\">demo&#x5730;&#x5740;</a></p>\n<blockquote>\n<p>&#x540E;&#x7EED;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x6301;&#x7EED;&#x66F4;&#x65B0;&#xFF0C;&#x5982;&#x679C;&#x5BA2;&#x5B98;&#x4EEC;&#x5BF9;&#x6B64;&#x8FD8;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x6216;&#x8005;Github&#xFF0C;&#x8C22;&#x8C22;&#x652F;&#x6301;&#x3002;</p>\n</blockquote>\n"},{"title":"一个loading动画的全面解析","url":"https://www.rousetime.com/2017/03/12/一个loading动画的全面解析/","content":"<h2 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h2><p>&#x4ECA;&#x5929;&#x6765;&#x804A;&#x804A;&#x5173;&#x4E8E;&#x52A8;&#x753B;&#x7684;&#x4E00;&#x70B9;&#x81EA;&#x5DF1;&#x7684;&#x5FC3;&#x5F97;&#xFF0C;&#x5728;&#x6B64;&#x5BF9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#x505A;&#x4E0B;&#x603B;&#x7ED3;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x5C11;&#x8D70;&#x4E00;&#x70B9;&#x5F2F;&#x8DEF;&#x3002;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x4ECA;&#x5929;&#x7684;&#x52A8;&#x753B;&#x6548;&#x679C;&#x5427;&#x3002;</p>\n<p><img src=\"/2017/03/12/&#x4E00;&#x4E2A;loading&#x52A8;&#x753B;&#x7684;&#x5168;&#x9762;&#x89E3;&#x6790;/loading.gif\" alt=\"loading\"></p>\n<p>&#x770B;&#x8D77;&#x6765;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7279;&#x522B;&#x70AB;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E0D;&#x662F;&#x4ECA;&#x5929;&#x6B63;&#x5728;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x8981;&#x8BA4;&#x8BC6;&#x7684;&#x662F;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x8F83;&#x7B80;&#x6D01;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x6765;&#x4E3E;&#x4E00;&#x53CD;&#x4E09;&#xFF0C;&#x4EE5;&#x540E;&#x7C7B;&#x4F3C;&#x7684;&#x52A8;&#x753B;&#x4E5F;&#x4E0D;&#x6210;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x601D;&#x8DEF;&#x62C6;&#x5206;\"><a href=\"#&#x601D;&#x8DEF;&#x62C6;&#x5206;\" class=\"headerlink\" title=\"&#x601D;&#x8DEF;&#x62C6;&#x5206;\"></a>&#x601D;&#x8DEF;&#x62C6;&#x5206;</h2><p>&#x9996;&#x5148;&#x7B2C;&#x4E00;&#x773C;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#xFF0C;&#x4F60;&#x8111;&#x6D77;&#x91CC;&#x60F3;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x53EF;&#x80FD;&#x6709;&#x4E9B;<code>people</code>&#x4F1A;&#x8BF4;&#x4E00;&#x4E2A;<code>gif</code>&#x56FE;&#x5C31;&#x80FD;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x3002;&#x662F;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x505A;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x4E8E;&#x6280;&#x672F;&#x7684;&#x8FFD;&#x6C42;&#x8005;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x8BA4;&#x4E3A;&#x5E94;&#x8BE5;&#x81EA;&#x5DF1;&#x901A;&#x8FC7;&#x539F;&#x751F;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x81EA;&#x5DF1;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x5F88;&#x5927;&#x63D0;&#x5347;&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x5BF9;&#x8FD9;&#x52A8;&#x753B;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF0C;&#x5BF9;&#x95EE;&#x9898;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x6548;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x7684;&#x601D;&#x8DEF;&#x6E05;&#x6670;&#xFF0C;&#x4ECE;&#x800C;&#x6DF1;&#x523B;&#x7684;&#x8BA4;&#x8BC6;&#x5230;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;&#x3002;&#x901A;&#x8FC7;&#x4ED4;&#x7EC6;&#x7684;&#x89C2;&#x5BDF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x52A8;&#x753B;&#x62C6;&#x9664;&#x56DB;&#x90E8;&#x5206;</p>\n<ul>\n<li>&#x5148;&#x753B;&#x5706;&#x5F27;</li>\n<li>&#x5728;&#x753B;&#x5706;&#x5F27;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5BF9;&#x4E2D;&#x5FC3;&#x90E8;&#x5206;&#x7F29;&#x653E;&#x900F;&#x660E;</li>\n<li>&#x5706;&#x5F27;&#x753B;&#x5B8C;&#x4E4B;&#x540E;&#x6709;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x505C;&#x987F;&#x5F62;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x5706;</li>\n<li>&#x6700;&#x540E;&#x5728;&#x505C;&#x987F;&#x7684;&#x65F6;&#x523B;&#x518D;&#x5BF9;&#x4E2D;&#x5FC3;&#x90E8;&#x5206;&#x653E;&#x5927;&#x900F;&#x660E;</li>\n</ul>\n<p>&#x4EE5;&#x4E0A;&#x662F;&#x52A8;&#x753B;&#x7684;&#x62C6;&#x5206;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5BF9;&#x52A8;&#x753B;&#x6709;&#x4E86;&#x6E05;&#x6670;&#x7684;&#x4E86;&#x89E3;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x53EF;&#x4EE5;&#x5BF9;&#x5B9E;&#x73B0;&#x7684;&#x52A8;&#x753B;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;&#xFF0C;&#x5176;&#x5B9E;&#x6574;&#x4F53;&#x53EF;&#x4EE5;&#x770B;&#x6210;&#x4E24;&#x4E2A;&#x52A8;&#x753B;&#x7684;&#x5408;&#x6210;</p>\n<ul>\n<li>&#x5706;&#x5F27;&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x4E0E;&#x753B;&#x5B8C;&#x540E;&#x7684;&#x5706;&#x7684;&#x5B9A;&#x5F62;</li>\n<li>&#x4E2D;&#x5FC3;<code>Icon</code>&#x7684;&#x7F29;&#x653E;&#x3001;&#x653E;&#x5927;&#x4E0E;&#x900F;&#x660E;&#x53D8;&#x5316;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5BF9;&#x8FD9;&#x4E24;&#x5927;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5206;&#x5E03;&#x5B9E;&#x73B0;</p>\n<h2 id=\"&#x5706;&#x5F27;&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#&#x5706;&#x5F27;&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5706;&#x5F27;&#x7684;&#x5B9E;&#x73B0;\"></a>&#x5706;&#x5F27;&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x9996;&#x5148;&#x662F;&#x5BF9;&#x5706;&#x5F27;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5BF9;&#x5706;&#x5F27;&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x7ED8;&#x5236;&#xFF0C;&#x5B8C;&#x6210;&#x5706;&#x540E;&#x8FDB;&#x884C;&#x6709;&#x9650;&#x65F6;&#x95F4;&#x7684;&#x5B9A;&#x5F62;&#xFF0C;&#x6700;&#x540E;&#x5C31;&#x662F;&#x5FAA;&#x73AF;&#x4EE5;&#x4E0A;&#x6B65;&#x9AA4;&#x800C;&#x5DF2;&#x3002;&#x9996;&#x5148;&#x81EA;&#x5B9A;&#x4E49;<code>LoadingCirclerView</code>&#x7EE7;&#x627F;&#x4E0E;<code>ImageView</code>&#x3002;&#x65E2;&#x7136;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;<code>Paint</code>&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x9996;&#x5148;&#x521D;&#x59CB;&#x5316;&#x753B;&#x7B14;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void init() {</div><div class=\"line\">        mPaint = new Paint();</div><div class=\"line\">        mPaint.setColor(getResources().getColor(R.color.black));</div><div class=\"line\">        mPaint.setStyle(Paint.Style.STROKE);</div><div class=\"line\">        mPaint.setStrokeWidth(mCircleWidth);</div><div class=\"line\">        mPaint.setAntiAlias(true);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x8981;&#x5B9E;&#x73B0;<code>onMeasure</code>&#x4E0E;<code>onDraw</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x4E2D;<code>onMeasure</code>&#x65B9;&#x6CD5;&#x662F;&#x5BF9;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x6D4B;&#x91CF;&#xFF0C;&#x800C;<code>onDraw</code>&#x65B9;&#x6CD5;&#x81EA;&#x7136;&#x5C31;&#x662F;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x7684;&#x7ED8;&#x5236;&#x903B;&#x8F91;&#x3002;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5728;<code>onDraw</code>&#x4E2D;&#x4E0D;&#x8981;&#x6765;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x4E0E;&#x5B9E;&#x73B0;&#x7531;&#x5EF6;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;<code>onDraw</code>&#x662F;&#x975E;&#x5E38;&#x9891;&#x7E41;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x5176;&#x4E2D;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x4F1A;&#x52A0;&#x901F;&#x5E94;&#x7528;&#x7684;&#x5185;&#x5B58;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x5BFC;&#x81F4;<code>OOM</code>&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x4E0A;&#x9762;&#x7684;<code>Paint</code>&#x7684;&#x521D;&#x59CB;&#x5316;&#x90FD;&#x662F;&#x5355;&#x72EC;&#x62BD;&#x51FA;&#x6765;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;<code>onMeasure</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        int width = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        int height = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        int widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        int heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\">        if (widthMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            mWidth = width;</div><div class=\"line\">        } else {</div><div class=\"line\">            mWidth = DisplayUtils.dip2px(DEFAULT_SIZE);</div><div class=\"line\">        }</div><div class=\"line\">        if (heightMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            mHeight = height;</div><div class=\"line\">        } else {</div><div class=\"line\">            mHeight = DisplayUtils.dip2px(DEFAULT_SIZE);</div><div class=\"line\">        }</div><div class=\"line\">        //&#x767E;&#x5206;&#x6BD4;&#x5F27;&#x77E9;&#x5F62;</div><div class=\"line\">        mRectF = new RectF(mCircleWidth, mCircleWidth, mWidth - mCircleWidth, mHeight - mCircleWidth);</div><div class=\"line\">        setMeasuredDimension(mWidth, mHeight);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#x4E0D;&#x540C;&#x7684;<code>mode</code>&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;<code>mode</code>&#x4E3A;<code>EXACTLY</code>&#x5373;&#x4E3A;&#x7CBE;&#x786E;&#x7684;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4F7F;&#x7528;&#x63A7;&#x4EF6;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5728;&#x6B64;&#x540C;&#x65F6;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>RectF</code>&#x4E3A;&#x540E;&#x7EED;&#x7684;&#x753B;&#x5706;&#x5F27;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x6570;&#x636E;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x6700;&#x540E;&#x4E00;&#x5B9A;&#x8981;&#x8C03;&#x7528;<code>setMeasuredDimension</code>&#x65B9;&#x6CD5;&#x6765;&#x8BBE;&#x7F6E;&#x6211;&#x4EEC;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onDraw(Canvas canvas) {</div><div class=\"line\">        if (isStart) {</div><div class=\"line\">            if (mCirclePercent &lt;= 100) { //&#x5F00;&#x59CB;&#x753B;&#x5706;&#x5F27;</div><div class=\"line\">                isRestart = true;</div><div class=\"line\">                canvas.drawArc(mRectF, 270, -mCirclePercent / 100.f * 360, false, mPaint);</div><div class=\"line\">                mCirclePercent += mCirclerPercentIncremental;</div><div class=\"line\">            } else if (isRestart) { //&#x662F;&#x5426;&#x91CD;&#x65B0;&#x5F00;&#x59CB;&#x753B;&#x5706;&#x5F27;</div><div class=\"line\">                //&#x5468;&#x671F;&#x6027;&#x5B8C;&#x6210;&#x7684;&#x56DE;&#x8C03;</div><div class=\"line\">                if (listener != null) {</div><div class=\"line\">                    listener.onFinish();</div><div class=\"line\">                }</div><div class=\"line\">                isRestart = false;</div><div class=\"line\">                //&#x91CD;&#x7F6E;&#x6570;&#x636E;</div><div class=\"line\">                setReset();</div><div class=\"line\"> </div><div class=\"line\">                //&#x7ED8;&#x5236;&#x5B8C;&#x6574;&#x7684;&#x5706;</div><div class=\"line\">                canvas.drawCircle(mWidth / 2, mHeight / 2, mWidth / 2 - mCircleWidth, mPaint);</div><div class=\"line\">                //&#x663E;&#x793A;&#x5B8C;&#x6574;&#x5706;&#x7684;&#x65F6;&#x95F4;</div><div class=\"line\">                postInvalidateDelayed(CIRCLE_FIXED_TIME);</div><div class=\"line\">            }</div><div class=\"line\">            if (isStart &amp;&amp; isRestart) {</div><div class=\"line\">                //&#x5B9A;&#x65F6;&#x66F4;&#x65B0;ui</div><div class=\"line\">                postInvalidateDelayed(mIntervalTime);</div><div class=\"line\">                mIntervalTime -= mDrawIntervalTimeTDecrement;</div><div class=\"line\">            }</div><div class=\"line\">        } else {</div><div class=\"line\">            //&#x7ED8;&#x5236;&#x5B8C;&#x6574;&#x7684;&#x5706;</div><div class=\"line\">            canvas.drawCircle(mWidth / 2, mHeight / 2, mWidth / 2 - mCircleWidth, mPaint);</div><div class=\"line\">        }</div><div class=\"line\">        super.onDraw(canvas);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p><code>onDraw</code>&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x6574;&#x4E2A;&#x52A8;&#x753B;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x52A8;&#x753B;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x53D1;&#x73B0;&#x52A8;&#x753B;&#x7684;&#x5F00;&#x59CB;&#x662F;&#x4ECE;<code>270</code>&#x5EA6;&#x7684;&#x89D2;&#x5EA6;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x9006;&#x65F6;&#x9488;&#x7684;&#x5B8C;&#x6210;&#x5706;&#x7684;&#x7ED8;&#x5236;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x753B;&#x5706;&#x5F27;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x7684;&#x521D;&#x59CB;&#x89D2;&#x5EA6;&#x5C31;&#x662F;<code>270</code>,&#x7136;&#x540E;&#x5C31;&#x662F;&#x52A8;&#x6001;&#x7684;&#x589E;&#x52A0;&#x7ED8;&#x5236;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x8C03;&#x7528;<code>canvas.drawArc</code>&#x65B9;&#x6CD5;&#x6765;&#x7ED8;&#x5236;&#x5706;&#x5F27;&#xFF0C;&#x518D;&#x901A;&#x8FC7;<code>postInvalidateDelayed</code>&#x65B9;&#x6CD5;&#x6765;&#x8FBE;&#x5230;&#x5B9A;&#x65F6;&#x7684;&#x66F4;&#x65B0;<code>View</code>&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x5B9E;&#x73B0;&#x52A8;&#x753B;&#x7684;&#x6548;&#x679C;&#x3002;&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x753B;&#x5706;&#x5F27;&#x7684;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x534A;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x534A;&#x3002;</p>\n<h2 id=\"Icon&#x7684;&#x7F29;&#x653E;&#x3001;&#x653E;&#x5927;&#x4E0E;&#x900F;&#x660E;\"><a href=\"#Icon&#x7684;&#x7F29;&#x653E;&#x3001;&#x653E;&#x5927;&#x4E0E;&#x900F;&#x660E;\" class=\"headerlink\" title=\"Icon&#x7684;&#x7F29;&#x653E;&#x3001;&#x653E;&#x5927;&#x4E0E;&#x900F;&#x660E;\"></a>Icon&#x7684;&#x7F29;&#x653E;&#x3001;&#x653E;&#x5927;&#x4E0E;&#x900F;&#x660E;</h2><p><code>Icon</code>&#x7684;&#x52A8;&#x753B;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x6210;&#x4E24;&#x6B65;&#xFF0C;&#x7F29;&#x653E;&#x900F;&#x660E;&#x4E0E;&#x653E;&#x5927;&#x900F;&#x660E;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x6CA1;&#x4E00;&#x6B21;<code>Icon</code>&#x52A8;&#x753B;&#x7684;&#x5B9E;&#x73B0;&#x90FD;&#x4F34;&#x6709;&#x900F;&#x660E;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E24;&#x5C0F;&#x6B65;&#x90FD;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x52A8;&#x753B;&#x7684;&#x96C6;&#x5408;&#x6027;&#x8D28;&#x3002;&#x5BF9;&#x52A8;&#x753B;&#x8FDB;&#x884C;&#x53E0;&#x52A0;&#x3002;</p>\n<h3 id=\"&#x653E;&#x5927;&#x900F;&#x660E;\"><a href=\"#&#x653E;&#x5927;&#x900F;&#x660E;\" class=\"headerlink\" title=\"&#x653E;&#x5927;&#x900F;&#x660E;\"></a>&#x653E;&#x5927;&#x900F;&#x660E;</h3><p>&#x65E2;&#x7136;&#x8981;&#x7528;&#x5230;&#x96C6;&#x5408;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>AnimationSet</code>&#x6765;&#x7BA1;&#x7406;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x653E;&#x5927;&#x900F;&#x660E;</div><div class=\"line\">AlphaAnimation alphaAnimation1 = new AlphaAnimation(0.2f, 1.0f);</div><div class=\"line\">alphaAnimation1.setDuration(550);</div><div class=\"line\">mSetAnimation1.addAnimation(alphaAnimation1);</div><div class=\"line\"></div><div class=\"line\">ScaleAnimation scaleAnimation2 = new ScaleAnimation(1.05f, 1.0f, 1.05f, 1.0f, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);</div><div class=\"line\">scaleAnimation2.setDuration(550);</div><div class=\"line\">mSetAnimation1.addAnimation(scaleAnimation2);</div><div class=\"line\">mSetAnimation1.setFillAfter(true);</div></pre></td></tr></table></figure>\n<p><code>mSetAnimation1.setFillAfter(true);</code>&#x662F;&#x5173;&#x952E;&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x540E;&#x4FDD;&#x6301;&#x7ED3;&#x675F;&#x7684;&#x89C6;&#x56FE;&#x6548;&#x679C;&#x3002;&#x5176;&#x5B83;&#x5C31;&#x662F;<code>api</code>&#x7684;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x7F29;&#x653E;&#x900F;&#x660E;\"><a href=\"#&#x7F29;&#x653E;&#x900F;&#x660E;\" class=\"headerlink\" title=\"&#x7F29;&#x653E;&#x900F;&#x660E;\"></a>&#x7F29;&#x653E;&#x900F;&#x660E;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x7F29;&#x653E;&#x900F;&#x660E;</div><div class=\"line\">mSetAnimation2 = new AnimationSet(true);</div><div class=\"line\">AlphaAnimation alphaAnimation2 = new AlphaAnimation(1.0f, 0.2f);</div><div class=\"line\">alphaAnimation2.setDuration(100);</div><div class=\"line\">ScaleAnimation scaleAnimation3 = new ScaleAnimation(1.0f, 0.6f, 1.0f, 0.6f, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);</div><div class=\"line\">scaleAnimation3.setDuration(100);</div><div class=\"line\"></div><div class=\"line\">mSetAnimation2.addAnimation(alphaAnimation2);</div><div class=\"line\">mSetAnimation2.addAnimation(scaleAnimation3);</div><div class=\"line\">mSetAnimation2.setFillAfter(true);</div></pre></td></tr></table></figure>\n<p>&#x4EE5;&#x4E0A;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x4E0D;&#x662F;&#x968F;&#x4FBF;&#x8BBE;&#x7F6E;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x53C8;&#x8981;&#x7ED3;&#x5408;&#x4E0A;&#x9762;&#x7684;&#x753B;&#x5706;&#x5F27;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x6240;&#x4EE5;&#x65F6;&#x95F4;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8BA1;&#x7B97;&#x8BBE;&#x8BA1;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x6539;&#x65F6;&#x95F4;&#x8981;&#x4E24;&#x90E8;&#x5206;&#x76F8;&#x5BF9;&#x4E8E;&#x7684;&#x4FEE;&#x6539;&#x3002;</p>\n<p>&#x81F3;&#x6B64;&#x52A8;&#x753B;&#x90FD;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x601D;&#x8DEF;&#x662F;&#x5426;&#x5F88;&#x6E05;&#x6670;&#x5462;&#x3002;&#x4E0B;&#x9762;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x52A8;&#x753B;&#x7684;&#x8C03;&#x7528;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x52A8;&#x753B;&#x8C03;&#x7528;\"><a href=\"#&#x52A8;&#x753B;&#x8C03;&#x7528;\" class=\"headerlink\" title=\"&#x52A8;&#x753B;&#x8C03;&#x7528;\"></a>&#x52A8;&#x753B;&#x8C03;&#x7528;</h2><h3 id=\"&#x5F00;&#x542F;\"><a href=\"#&#x5F00;&#x542F;\" class=\"headerlink\" title=\"&#x5F00;&#x542F;\"></a>&#x5F00;&#x542F;</h3><p>&#x9996;&#x5148;&#x662F;&#x52A8;&#x753B;&#x7684;&#x5F00;&#x542F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void show() {</div><div class=\"line\">        //1.&#x91CD;&#x7F6E;&#xFF0C;&#x5F00;&#x542F;&#x52A8;&#x753B;</div><div class=\"line\">        mLoadingImage.setVisibility(VISIBLE);</div><div class=\"line\">        mLoadingCircleView.setVisibility(VISIBLE);</div><div class=\"line\">        mLoadingCircleView.setReset();</div><div class=\"line\">        mLoadingCircleView.startAnimation();</div><div class=\"line\">        mLoadingCircleView.invalidate();</div><div class=\"line\"> </div><div class=\"line\">        //2.&#x7F29;&#x653E;&#x52A8;&#x753B;&#x63A8;&#x8F9E;200&#x6BEB;&#x79D2;&#x6267;&#x884C;</div><div class=\"line\">        mLoadingImage.postDelayed(new Runnable() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void run() {</div><div class=\"line\">                mLoadingImage.startAnimation(mSetAnimation2);</div><div class=\"line\">            }</div><div class=\"line\">        }, 200);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;<code>mLoadingCircleVieW</code>&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5706;&#x5F27;&#x63A7;&#x4EF6;&#x3002;<code>mLoadingImage</code>&#x5C31;&#x662F;<code>Icon</code>&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>ImageView</code>&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5F00;&#x542F;&#x5BF9;&#x5706;&#x5F27;&#x7684;&#x7ED8;&#x5236;&#xFF0C;&#x540C;&#x65F6;&#x63A8;&#x8F9E;<code>200</code>&#x6BEB;&#x79D2;&#x518D;&#x5BF9;<code>Icon</code>&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x900F;&#x660E;&#x7684;&#x52A8;&#x753B;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;&#x5F53;&#x5706;&#x5F27;&#x753B;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x7ECF;&#x8FC7;&#x524D;&#x9762;&#x7684;<code>onDraw</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x6709;<code>1200</code>&#x6BEB;&#x79D2;&#x7684;&#x6574;&#x4E2A;&#x5706;&#x7684;&#x5C55;&#x793A;&#xFF0C;&#x540C;&#x65F6;&#x901A;&#x8FC7;<code>onFinish</code>&#x56DE;&#x8C03;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;<code>Icon</code>&#x7684;&#x653E;&#x5927;&#x900F;&#x660E;&#x52A8;&#x753B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void onFinish() {</div><div class=\"line\">        //3.&#x5706;&#x5F62;&#x753B;&#x5B8C;&#x540E;&#x7ACB;&#x523B;&#x6267;&#x884C;&#x653E;&#x5927;&#x900F;&#x660E;&#x52A8;&#x753B;</div><div class=\"line\">        mLoadingImage.setVisibility(VISIBLE);</div><div class=\"line\">        mLoadingImage.startAnimation(mSetAnimation1);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x52A8;&#x753B;&#x7684;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5468;&#x671F;&#x3002;&#x56E0;&#x4E3A;&#x8981;&#x5B9E;&#x73B0;&#x5FAA;&#x73AF;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x8FD8;&#x5DEE;&#x6700;&#x540E;&#x4E00;&#x6B65;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x52A8;&#x753B;&#x8FD8;&#x539F;&#x5230;&#x521D;&#x59CB;&#x7684;&#x72B6;&#x6001;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x7B2C;&#x4E09;&#x6B65;&#x653E;&#x5927;&#x900F;&#x660E;&#x7684;&#x52A8;&#x753B;&#x8FDB;&#x884C;&#x76D1;&#x542C;&#xFF0C;&#x5F53;&#x653E;&#x5927;&#x900F;&#x660E;&#x7684;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x7F29;&#x653E;&#x900F;&#x660E;&#x8FD8;&#x539F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">scaleAnimation2.setAnimationListener(new Animation.AnimationListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationStart(Animation animation) {</div><div class=\"line\"></div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationEnd(Animation animation) {</div><div class=\"line\">                //4:&#x4E00;&#x4E2A;&#x5468;&#x671F;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x7F29;&#x653E;&#x900F;&#x660E;&#xFF0C;&#x8FD4;&#x56DE;&#x5230;&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;&#xFF0C;</div><div class=\"line\">                // &#x8FD9;&#x91CC;&#x5EF6;&#x8FDF;650&#x6BEB;&#x79D2;&#xFF0C;&#x56E0;&#x4E3A;&#x56FA;&#x5B9A;&#x5706;&#x5F62;&#x663E;&#x793A;&#x65F6;&#x95F4;&#x4E3A;1200&#x6BEB;&#x79D2; &#x9700;&#x518D;&#x51CF;&#x53BB;&#x524D;&#x9762;&#x7684;&#x653E;&#x5927;&#x900F;&#x660E;&#x52A8;&#x753B;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;550&#x6BEB;&#x79D2;</div><div class=\"line\">                mSetAnimation2.setStartOffset(650);</div><div class=\"line\">                 mLoadingImage.startAnimation(mSetAnimation2);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationRepeat(Animation animation) {</div><div class=\"line\"> </div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h3 id=\"&#x5173;&#x95ED;\"><a href=\"#&#x5173;&#x95ED;\" class=\"headerlink\" title=\"&#x5173;&#x95ED;\"></a>&#x5173;&#x95ED;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void dismiss() {</div><div class=\"line\">        mLoadingCircleView.stopAnimation();</div><div class=\"line\">        mLoadingCircleView.setVisibility(GONE);</div><div class=\"line\">        mLoadingImage.setVisibility(GONE);</div><div class=\"line\">        //&#x6E05;&#x7406;&#x52A8;&#x753B;&#xFF0C;&#x9632;&#x6B62;View&#x65E0;&#x6CD5;&#x9690;&#x85CF;</div><div class=\"line\">        //&#x56E0;&#x4E3A;View&#x7684;&#x7C7B;&#x578B;&#x52A8;&#x753B;&#x662F;&#x5BF9;View&#x7684;&#x955C;&#x50CF;&#x8FDB;&#x884C;&#x52A8;&#x753B;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x6539;&#x53D8;View&#x7684;&#x72B6;&#x6001;</div><div class=\"line\">        if (mLoadingImage.getAnimation() != null) {</div><div class=\"line\">            mLoadingImage.clearAnimation();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x52A8;&#x753B;&#x7684;&#x5173;&#x95ED;&#x6211;&#x8981;&#x8BF4;&#x7684;&#x90FD;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x4E86;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x3002;&#x53EA;&#x8981;&#x6CE8;&#x610F;&#x8FD9;&#x4E00;&#x70B9;&#x5C31;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<blockquote>\n<p><em>OK,everything is over. &#x6700;&#x540E;&#x9644;&#x4E0A;&#x6E90;&#x7801;&#x5730;&#x5740;</em></p>\n</blockquote>\n<p>&#x6E90;&#x4EE3;&#x7801;&#xFF1A;<a href=\"https://github.com/idisfkj/LoadingCirclerView\" target=\"_blank\" rel=\"external\">loading</a></p>\n"},{"title":"基于Fresco的大图浏览","url":"https://www.rousetime.com/2017/03/05/基于Fresco的大图浏览/","content":"<p>&#x4E0A;&#x4E2A;&#x661F;&#x671F;&#x662F;&#x4E2A;&#x5FD9;&#x788C;&#x7684;&#x4E00;&#x5468;&#xFF0C;&#x5168;&#x5468;&#x90FD;&#x5728;&#x8D76;&#x8FDB;&#x5EA6;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x8FC7;&#x5E74;&#x8FC7;&#x7684;&#x592A;&#x8212;&#x7545;&#x4E86;&#x5427;&#x3002;&#x73B0;&#x5728;&#x7EC8;&#x4E8E;&#x6709;&#x7A7A;&#x6765;&#x5750;&#x4E0B;&#x6765;&#xFF0C;&#x5B89;&#x5B89;&#x9759;&#x9759;&#x7684;&#x601D;&#x8003;&#x4E0B;&#x8FD9;&#x5FD9;&#x788C;&#x540E;&#x7684;&#x6536;&#x83B7;&#x3002;&#x5728;&#x6B64;&#x4E5F;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#xFF0C;&#x505A;&#x4E2A;&#x5206;&#x4EAB;&#xFF01;</p>\n<p>&#x4ECA;&#x5929;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x5173;&#x4E8E;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x5404;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x90FD;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x57FA;&#x4E8E;<code>Fresco</code>&#x6765;&#x5B9E;&#x73B0;&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x662F;&#x9879;&#x76EE;&#x4E2D;&#x7528;&#x7684;&#x5C31;&#x662F;<code>Fresco</code>&#xFF09;</p>\n<h1 id=\"Fresco\"><a href=\"#Fresco\" class=\"headerlink\" title=\"Fresco\"></a>Fresco</h1><p>&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x4EBA;&#x4E0D;&#x4E86;&#x89E3;<code>Fresco</code>&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x6765;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x3002;</p>\n<p><code>Fresco</code>&#x662F;<code>facebook</code>&#x63A8;&#x51FA;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x8BE5;&#x9879;&#x76EE;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;<code>Android</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x53BB;&#x5173;&#x5FC3;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#x548C;&#x663E;&#x793A;&#x7684;&#x7E41;&#x7410;&#x4E8B;&#x4EF6;&#x3002;&#x5BF9;&#x4E8E;&#x4E13;&#x6CE8;&#x4E8E;&#x56FE;&#x7247;<code>App</code>&#x5F3A;&#x70C8;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>\n<h2 id=\"Feature\"><a href=\"#Feature\" class=\"headerlink\" title=\"Feature\"></a>Feature</h2><p>&#x4E0B;&#x9762;&#x662F;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x7A81;&#x51FA;&#x7279;&#x6027;</p>\n<ul>\n<li><code>Fresco</code>&#x4E2D;&#x7684;<code>Image Pipeline</code>&#x8D1F;&#x8D23;&#x4ECE;&#x7F51;&#x7EDC;&#x3001;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x8282;&#x7701;&#x7A7A;&#x95F4;&#x4E0E;<code>CPU</code>&#x65F6;&#x95F4;&#xFF0C;&#x540C;&#x65F6;&#x542B;&#x6709;3&#x7EA7;&#x7F13;&#x5B58;&#xFF08;2&#x7EA7;&#x5185;&#x5B58;&#xFF0C;1&#x7EA7;&#x78C1;&#x76D8;&#xFF09;&#xFF0C;&#x652F;&#x6301;&#x7F29;&#x7565;&#x56FE;&#x4E0E;&#x6E05;&#x6670;&#x5EA6;&#x7684;&#x8F6C;&#x6362;&#x7B49;</li>\n<li><code>Fresco</code>&#x7684;<code>Drawees</code>&#xFF0C;&#x8D1F;&#x8D23;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x524D;&#x7684;&#x5360;&#x4F4D;&#x56FE;&#x4E0E;&#x56FE;&#x7247;&#x4E0D;&#x53EF;&#x89C1;&#x65F6;&#x7684;&#x91CA;&#x653E;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x652F;&#x6301;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x7684;&#x5B9E;&#x73B0;</li>\n<li><code>Fresco</code>&#x652F;&#x6301;&#x6E10;&#x8FDB;&#x5F0F;&#x56FE;&#x7247;&#x5C55;&#x793A;&#xFF0C;<code>Android</code>&#x672C;&#x8EAB;&#x662F;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x3002;</li>\n<li><p><code>Fresco</code>&#x5B8C;&#x7F8E;&#x652F;&#x6301;<code>Gif</code>&#x4E0E;<code>WebP</code>&#x52A8;&#x56FE;&#xFF0C;&#x8F7B;&#x677E;&#x89E3;&#x51B3;&#x6BCF;&#x4E00;&#x5E27;&#x90FD;&#x662F;&#x5F88;&#x5927;&#x7684;<code>Bitmap</code>&#x70E6;&#x607C;&#x3002;</p>\n<p>&#x4F20;&#x9001;&#x95E8;: <a href=\"https://github.com/facebook/fresco\" target=\"_blank\" rel=\"external\">Fresco</a></p>\n</li>\n</ul>\n<h1 id=\"&#x5927;&#x56FE;&#x6D4F;&#x89C8;\"><a href=\"#&#x5927;&#x56FE;&#x6D4F;&#x89C8;\" class=\"headerlink\" title=\"&#x5927;&#x56FE;&#x6D4F;&#x89C8;\"></a>&#x5927;&#x56FE;&#x6D4F;&#x89C8;</h1><h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><p>&#x65E2;&#x7136;&#x662F;&#x57FA;&#x4E8E;<code>Fresco</code>,&#x5728;&#x5B9E;&#x73B0;&#x4E4B;&#x524D;&#x81EA;&#x7136;&#x8981;&#x5BFC;&#x5165;<code>Fresco</code>&#x7684;&#x76F8;&#x5173;&#x4F9D;&#x8D56;&#x5305;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.facebook.fresco:fresco:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:animated-gif:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:animated-webp:1.0.0&apos;</div><div class=\"line\">compile &apos;com.facebook.fresco:webpsupport:1.0.0&apos;</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x666E;&#x901A;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x8981;&#x5BFC;&#x5165;&#x7B2C;&#x4E00;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x597D;&#x4E86;&#x73B0;&#x5728;&#x4F60;&#x5C31;&#x53EF;&#x725B;&#x903C;&#x54C4;&#x54C4;&#x7684;&#x4F7F;&#x7528;&#x8FD9;&#x4E48;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x7EC4;&#x4EF6;&#x6765;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x81F3;&#x4E8E;&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#xFF0C;&#x968F;&#x4FBF;&#x770B;&#x4E0B;&#x76F8;&#x5173;&#x6559;&#x7A0B;&#x5C31;&#x80FD;&#x8F7B;&#x677E;&#x641E;&#x5B9A;&#xFF0C;&#x4F8B;&#x5982;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x3002;&#x60F3;&#x5F53;&#x521D;&#x6211;&#x8FD8;&#x662F;&#x82E6;&#x903C;&#x662F;&#x627E;&#x76F8;&#x5173;&#x7684;&#x5E93;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x2026;</p>\n<h2 id=\"SimpleDraweeView\"><a href=\"#SimpleDraweeView\" class=\"headerlink\" title=\"SimpleDraweeView\"></a>SimpleDraweeView</h2><p>&#x4E0A;&#x9762;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x56FE;&#x7247;&#x5C55;&#x793A;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x9898;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x6BB5;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void displayImage(SimpleDraweeView draweeView, String url) {</div><div class=\"line\">        GenericDraweeHierarchy hierarchy = draweeView.getHierarchy();</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x5360;&#x4F4D;&#x56FE;</div><div class=\"line\">        if (hierarchy == null) {</div><div class=\"line\">            hierarchy = GenericDraweeHierarchyBuilder.newInstance(getResources())</div><div class=\"line\">                    .setPlaceholderImage(getResources().getDrawable(R.mipmap.ic_launcher)</div><div class=\"line\">                            , ScalingUtils.ScaleType.CENTER).build();</div><div class=\"line\">            draweeView.setHierarchy(hierarchy);</div><div class=\"line\">        } else {</div><div class=\"line\">            hierarchy.setPlaceholderImage(getResources().getDrawable(R.mipmap.ic_launcher)</div><div class=\"line\">                    , ScalingUtils.ScaleType.CENTER);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x6784;&#x5EFA;ImageRequestBuilder&#xFF0C;&#x4F20;&#x5165;&#x8BF7;&#x6C42;Uri</div><div class=\"line\">        ImageRequestBuilder requestBuilder = ImageRequestBuilder.newBuilderWithSource(Uri.parse(url));</div><div class=\"line\">        //&#x6784;&#x5EFA;Controller</div><div class=\"line\">        DraweeController controller = Fresco.newDraweeControllerBuilder()</div><div class=\"line\">                .setOldController(draweeView.getController())</div><div class=\"line\">                .setImageRequest(requestBuilder.build())</div><div class=\"line\">                .build();</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#xFF0C;Fresco&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x56FE;&#x7247;&#x90FD;&#x662F;&#x901A;&#x8FC7;Controller&#x6765;&#x5B9E;&#x73B0;</div><div class=\"line\">        draweeView.setController(controller);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76F8;&#x4FE1;&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x660E;&#x663E;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"ZoomableView\"><a href=\"#ZoomableView\" class=\"headerlink\" title=\"ZoomableView\"></a>ZoomableView</h2><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x73B0;&#x5728;&#x53EA;&#x8981;&#x662F;&#x4E2A;<code>App</code>&#x4E14;&#x91CC;&#x9762;&#x6709;&#x56FE;&#x7247;&#x7684;&#x5C55;&#x793A;&#xFF0C;&#x90A3;&#x4E48;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x6709;&#x56FE;&#x7247;&#x6D4F;&#x89C8;&#x8FD9;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x9700;&#x8981;&#x652F;&#x6301;&#x7F29;&#x653E;&#x3001;&#x62D6;&#x62FD;&#x3001;&#x53CC;&#x51FB;&#x653E;&#x5927;&#x3002;<code>Fresco</code>&#x539F;&#x751F;&#x7684;<code>SimpleDraweeView</code>&#x662F;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8981;&#x4F7F;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x63A7;&#x4EF6;<code>ZoomableView</code>&#x3002;&#x5F53;&#x7136;&#x5B83;&#x4E5F;&#x662F;<code>Fresco</code>&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x63A5;&#x5165;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x3002;&#x524D;&#x9762;&#x7684;&#x4F20;&#x9001;&#x95E8;&#x4E2D;&#x53EF;&#x4EE5;&#x627E;&#x5230;<code>ZoomableView</code>&#x3002;&#x4F46;&#x6BD5;&#x7ADF;&#x662F;<code>Fresco</code>&#x9879;&#x76EE;&#x7684;&#x96C6;&#x5408;&#x4F53;&#xFF0C;&#x672C;&#x7247;&#x6587;&#x7AE0;&#x7684;&#x672B;&#x5C3E;&#x6211;&#x4F1A;&#x63D0;&#x4F9B;&#x6211;&#x5DF2;&#x7ECF;&#x63D0;&#x53D6;&#x597D;&#x7684;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h2><p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x754C;&#x9762;<code>ZoomableActivity</code>,&#x81F3;&#x4E8E;&#x5E03;&#x5C40;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;<code>ViewPager</code>,&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x4ECB;&#x7ECD;<code>ViewPager</code>&#x4E86;,&#x76F4;&#x63A5;&#x4E0A;<code>ZoomableActivity</code>&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ZoomableActivity extends AppCompatActivity implements ViewPager.OnPageChangeListener {</div><div class=\"line\">    private static final String EXTRA_ZOOMABLE_PATHS = &quot;extra_zoomable_paths&quot;;</div><div class=\"line\">    private static final String EXTRA_ZOOMABLE_INDEX = &quot;extra_zoomable_index&quot;;</div><div class=\"line\"> </div><div class=\"line\">    private ViewPager mViewPager;</div><div class=\"line\">    private TextView mZoomableIndex;</div><div class=\"line\">    private ArrayList&lt;String&gt; mPaths;</div><div class=\"line\">    private int mIndex;</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onCreate(@Nullable Bundle savedInstanceState) {</div><div class=\"line\">        super.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.zoommable_activity);</div><div class=\"line\">        getExtraData();</div><div class=\"line\">        initView();</div><div class=\"line\">        setupViewPager();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void getExtraData() {</div><div class=\"line\">        mPaths = getIntent().getStringArrayListExtra(EXTRA_ZOOMABLE_PATHS);</div><div class=\"line\">        mIndex = getIntent().getIntExtra(EXTRA_ZOOMABLE_INDEX, 0);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void initView() {</div><div class=\"line\">        mViewPager = (ViewPager) findViewById(R.id.view_pager);</div><div class=\"line\">        mZoomableIndex = (TextView) findViewById(R.id.zoomable_index);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private void setupViewPager() {</div><div class=\"line\">        mViewPager.setAdapter(new ZoomableViewPagerAdapter(this, mPaths));</div><div class=\"line\">        mViewPager.setCurrentItem(mIndex);</div><div class=\"line\">        mZoomableIndex.setText(mIndex + 1 + &quot;/&quot; + mPaths.size());</div><div class=\"line\">        mViewPager.addOnPageChangeListener(this);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageSelected(int position) {</div><div class=\"line\">        mZoomableIndex.setText(position + 1 + &quot;/&quot; + mPaths.size());</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void onPageScrollStateChanged(int state) {</div><div class=\"line\"> </div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    public static void goToPage(Context context, ArrayList&lt;String&gt; paths, int index) {</div><div class=\"line\">        Intent intent = new Intent(context, ZoomableActivity.class);</div><div class=\"line\">         intent.putStringArrayListExtra(EXTRA_ZOOMABLE_PATHS, paths);</div><div class=\"line\">        intent.putExtra(EXTRA_ZOOMABLE_INDEX, index);</div><div class=\"line\">        context.startActivity(intent);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x5C31;&#x662F;<code>Adapter</code>&#x4E86;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x56FE;&#x7247;&#x7684;&#x663E;&#x793A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x662F;<code>ViewPager</code>&#x6240;&#x4EE5;&#x4F7F;&#x7528;<code>PagerAdapter</code>,&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x5B83;&#x7684;<code>instantiateItem</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public Object instantiateItem(ViewGroup container, int position) {</div><div class=\"line\">        View view = LayoutInflater.from(mContext).inflate(R.layout.zoomable_view_pager_item, null);</div><div class=\"line\">        ZoomableDraweeView zoomableDraweeView = (ZoomableDraweeView) view.findViewById(R.id.zoomable_image);</div><div class=\"line\">        //&#x5141;&#x8BB8;&#x7F29;&#x653E;&#x65F6;&#x5207;&#x6362;</div><div class=\"line\">        zoomableDraweeView.setAllowTouchInterceptionWhileZoomed(true);</div><div class=\"line\">        //&#x957F;&#x6309;</div><div class=\"line\">        zoomableDraweeView.setIsLongpressEnabled(false);</div><div class=\"line\">        //&#x53CC;&#x51FB;&#x51FB;&#x653E;&#x5927;&#x6216;&#x7F29;&#x5C0F;</div><div class=\"line\">        zoomableDraweeView.setTapListener(new DoubleTapGestureListener(zoomableDraweeView));</div><div class=\"line\"></div><div class=\"line\">        DraweeController draweeController = Fresco.newDraweeControllerBuilder()</div><div class=\"line\">                .setUri(mPaths.get(position))</div><div class=\"line\">                .build();</div><div class=\"line\">        //&#x52A0;&#x8F7D;&#x56FE;&#x7247;</div><div class=\"line\">        zoomableDraweeView.setController(draweeController);</div><div class=\"line\">        container.addView(view);</div><div class=\"line\">        view.requestLayout();</div><div class=\"line\">        return view;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x5927;&#x56FE;&#x6D4F;&#x89C8;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x501F;&#x52A9;<code>ZoomableView</code>&#x540E;&#xFF0C;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;&#x7684;&#x5C55;&#x793A;&#x903B;&#x8F91;&#x5C31;Ok&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2017/03/05/&#x57FA;&#x4E8E;Fresco&#x7684;&#x5927;&#x56FE;&#x6D4F;&#x89C8;/zoomable.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x4F20;&#x9001;&#x95E8;&#xFF1A;<a href=\"https://github.com/idisfkj/Zoomable\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Zoomable</a></p>\n"},{"title":"git使用杂记","url":"https://www.rousetime.com/2017/01/26/git使用杂记/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x5982;&#x679C;&#x73B0;&#x5728;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;<code>git</code>&#x6216;&#x8005;&#x8FD8;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;<code>git</code>&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5E94;&#x8BE5;&#x597D;&#x597D;&#x7684;&#x53CD;&#x7701;&#x3002;&#x81EA;&#x5DF1;&#x53BB;&#x597D;&#x597D;&#x770B;&#x4E00;&#x904D;&#x7684;&#x5165;&#x95E8;&#x4ECB;&#x7ECD;&#x5427;&#x3002;&#x4ECA;&#x5929;&#x53EA;&#x662F;&#x5BF9;&#x81EA;&#x5DF1;&#x5728;&#x65E5;&#x5E38;&#x4E2D;&#x4F7F;&#x7528;<code>git</code>&#x7684;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x547D;&#x4EE4;&#x7684;&#x4ECB;&#x7ECD;&#x4E0E;&#x81EA;&#x5DF1;&#x8BA4;&#x4E3A;&#x4E0D;&#x9519;&#x4E14;&#x80FD;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x529E;&#x516C;&#x6548;&#x7387;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x70B9;&#x6742;&#x4E71;&#xFF0C;&#x4F46;&#x7EDD;&#x5BF9;&#x90FD;&#x662F;&#x7ECF;&#x5178;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5728;&#x6B64;&#x8BB0;&#x4E0B;&#x7B14;&#x8BB0;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x80FD;&#x5E2E;&#x52A9;&#x6765;&#x8D4F;&#x8138;&#x5173;&#x987E;&#x7684;&#x4F60;&#x4EEC;&#x3002;</p>\n<h2 id=\"&#x533A;&#x57DF;\"><a href=\"#&#x533A;&#x57DF;\" class=\"headerlink\" title=\"&#x533A;&#x57DF;\"></a>&#x533A;&#x57DF;</h2><p>&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#xFF0C;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;<code>git</code>&#x7684;&#x4E09;&#x4E2A;&#x533A;&#x57DF;</p>\n<ul>\n<li>&#x5DE5;&#x4F5C;&#x533A;&#xFF08;working directory&#xFF09;</li>\n<li>&#x6682;&#x5B58;&#x533A;&#xFF08;stage index&#xFF09;</li>\n<li>&#x672C;&#x5730;&#x5386;&#x53F2;&#x533A;&#xFF08;history&#xFF09;</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4E00;&#x5F20;&#x56FE;&#x5C31;&#x80FD;&#x7B80;&#x6D01;&#x6613;&#x61C2;&#x7684;&#x660E;&#x767D;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x5316;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/5.png\" alt=\"git\"></p>\n<h2 id=\"clone\"><a href=\"#clone\" class=\"headerlink\" title=\"clone\"></a>clone</h2><p>&#x5148;&#x4ECE;<code>clone</code>&#x547D;&#x4EE4;&#x6765;&#x4ECB;&#x7ECD;&#xFF0C;&#x4F7F;&#x7528;&#x8FC7;<code>git</code>&#x7684;&#x90FD;&#x77E5;&#x9053;&#x5B83;&#x3002;<code>git colne</code>&#x547D;&#x4EE4;&#x62C9;&#x53D6;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x5230;&#x672C;&#x5730;&#x3002;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x62C9;&#x53D6;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x76F4;&#x63A5;<code>mkdir</code>&#xFF0C;&#x5176;&#x5B9E;&#x65E0;&#x9700;&#x5982;&#x6B64;&#xFF0C;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x5C31;&#x80FD;&#x641E;&#x5B9A;<code>git clone &#x8FDC;&#x7A0B;&#x4ED3;&#x5E93; &#x6587;&#x4EF6;&#x540D;</code>&#xFF0C;&#x5C31;&#x662F;&#x5982;&#x6B64;&#x7B80;&#x5355;&#x3002;</p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><p>&#x6211;&#x4EEC;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x4E48;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x4F7F;&#x7528;<code>git add .</code>&#x76F4;&#x63A5;&#x5C06;&#x5DE5;&#x4F5C;&#x533A;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5230;&#x6682;&#x5B58;&#x533A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x9762;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5148;&#x4E0D;&#x8981;&#x52A0;&#x8FDB;&#x53BB;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x6587;&#x4EF6;&#x9000;&#x56DE;&#x5230;&#x5DE5;&#x4F5C;&#x533A;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rm --cached &lt;file&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"stash\"><a href=\"#stash\" class=\"headerlink\" title=\"stash\"></a>stash</h2><p>&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5F53;&#x4F60;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x65F6;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x4E0A;&#x7684;&#x7D27;&#x6025;<code>bug</code>&#x9700;&#x8981;&#x4FEE;&#x590D;&#xFF0C;&#x6B64;&#x65F6;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x529F;&#x80FD;&#x53C8;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#x4F60;&#x4E0D;&#x60F3;&#x63D0;&#x4EA4;&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>git stash</code>&#x5C06;&#x5DE5;&#x4F5C;&#x533A;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x5B58;&#x653E;&#x8D77;&#x6765;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x653E;&#x5FC3;&#x7684;&#x53BB;&#x5207;&#x5206;&#x652F;&#x4FEE;&#x590D;<code>bug</code>&#xFF0C;&#x4FEE;&#x590D;&#x5B8C;&#x4E4B;&#x540E;&#x6267;&#x884C;<code>git stash pop</code>&#x53EF;&#x4EE5;&#x5C06;&#x5148;&#x524D;&#x5B58;&#x653E;&#x7684;&#x53D6;&#x51FA;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x76F8;&#x5173;&#x547D;&#x4EE4;&#x4F8B;&#x5982;&#xFF1A;<code>git stash list</code>&#x67E5;&#x770B;&#x5B58;&#x653E;&#x7684;&#x8BB0;&#x5F55;,<code>git stash drop</code>&#x4E22;&#x5F03;&#x5B58;&#x653E;&#x7684;&#x8BB0;&#x5F55;&#x3002;</p>\n<h2 id=\"tag\"><a href=\"#tag\" class=\"headerlink\" title=\"tag\"></a>tag</h2><p>&#x53EF;&#x80FD;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x6253;&#x6807;&#x7B7E;<code>git tag tagName</code>&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x5C06;&#x76F8;&#x5E94;&#x7684;&#x6807;&#x7B7E;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x4E2D;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push --tags tagName</div></pre></td></tr></table></figure>\n<h2 id=\"amend\"><a href=\"#amend\" class=\"headerlink\" title=\"amend\"></a>amend</h2><p>&#x5F53;&#x4F60;<code>commit</code>&#x4EE5;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x52A0;&#x8FDB;&#x4E0A;&#x6B21;&#x7684;<code>commit</code>&#x4E2D;&#xFF0C;&#x6216;&#x8005;&#x53C8;&#x4FEE;&#x6539;&#x4E86;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x3002;&#x6B64;&#x65F6;&#x4F60;&#x5E76;&#x4E0D;&#x60F3;&#x589E;&#x52A0;&#x65B0;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#xFF0C;&#x53EA;&#x662F;&#x60F3;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x5230;&#x4E0A;&#x6B21;&#x7684;<code>commit</code>&#x4E2D;&#x3002;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend &lt;file&gt;</div></pre></td></tr></table></figure>\n<p>&#x5C06;&#x6682;&#x5B58;&#x533A;&#x7684;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5176;&#x4E2D;,&#x5E76;&#x4E14;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6B64;&#x65F6;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x3002;</p>\n<h2 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h2><p><code>reset</code>&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x524D;&#x9762;&#x7684;<code>rm</code>&#x7684;&#x6548;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x66FF;&#x4EE3;&#x524D;&#x9762;&#x7684;<code>git rm --cached &lt;file&gt;</code>&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset HEAD &lt;file&gt;</div></pre></td></tr></table></figure>\n<p>&#x4F46;<code>reset</code>&#x7528;&#x9014;&#x66F4;&#x5E7F;&#xFF0C;&#x7ED3;&#x5408;<code>soft</code>&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x56DE;&#x64A4;&#x5230;&#x4EFB;&#x610F;&#x7684;<code>commit</code>&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --soft index</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x56DE;&#x5230;<code>index</code>&#x5904;&#xFF0C;&#x5DE5;&#x4F5C;&#x533A;&#x4E0D;&#x53D8;&#x3001;&#x6682;&#x5B58;&#x533A;&#x56DE;&#x5230;&#x5F53;&#x65F6;&#x7684;<code>index</code>&#x5904;&#x3002;&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;<code>hard</code>&#x53C2;&#x6570;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --hard index</div></pre></td></tr></table></figure>\n<p>&#x4E0E;<code>soft</code>&#x53EF;&#x4EE5;&#x8BF4;&#x5BF9;&#x7ACB;&#xFF0C;&#x5B83;&#x7684;&#x6548;&#x679C;&#x5C31;&#x5728;&#x4E8E;&#x5DE5;&#x4F5C;&#x533A;&#x4E0E;&#x6682;&#x5B58;&#x533A;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x5B83;&#x4F1A;&#x6E05;&#x7A7A;&#x8FD9;&#x4E24;&#x4E2A;&#x533A;&#x3002;</p>\n<h2 id=\"rebase\"><a href=\"#rebase\" class=\"headerlink\" title=\"rebase\"></a>rebase</h2><p>&#x5BF9;&#x4E8E;<code>rebase</code>&#x662F;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5F53;&#x524D;&#x7684;&#x5206;&#x652F;&#x4E0E;&#x8FDC;&#x7A0B;&#x7684;&#x5206;&#x652F;<code>commit</code>&#x4FE1;&#x606F;&#x5B58;&#x5728;&#x5DEE;&#x5F02;&#x65F6;&#xFF0C;&#x4F1A;&#x63D0;&#x9192;&#x4F60;&#x6B64;&#x65F6;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;<code>push</code>&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x5C06;&#x8FDC;&#x7A0B;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x62C9;&#x53BB;&#x5230;&#x672C;&#x5730;&#x6765;&#xFF0C;&#x624D;&#x80FD;&#x8FDB;&#x884C;&#x63D0;&#x4EA4;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>rebase</code>&#x547D;&#x4EE4;&#x4E86;&#x3002;&#x5982;&#x4E0B;&#x5F53;&#x524D;&#x5904;&#x5728;<code>develop</code>&#x5206;&#x652F;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/1.png\" alt=\"rebase\"></p>\n<p>&#x6B64;&#x65F6;&#x5E94;&#x8BE5;&#x5148;&#x6267;&#x884C;<code>rebase</code>&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git fetch</div><div class=\"line\">git rebase origin/master</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x6700;&#x540E;&#x518D;<code>push</code>&#x5230;&#x8FDC;&#x7A0B;<code>master</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin master</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x7EC8;&#x5404;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x60C5;&#x51B5;&#x5C31;&#x662F;&#x4E0A;&#x56FE;&#x7684;&#x6548;&#x679C;&#x4E86;&#x3002;&#x5982;&#x679C;&#x89C9;&#x5F97;&#x547D;&#x4EE4;&#x591A;&#x96BE;&#x8BB0;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x53EF;&#x7528;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x6765;&#x5B8C;&#x6210;&#x4E0A;&#x9762;&#x7684;&#x6548;&#x679C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git pull --rebase origin master</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;<code>rebase</code>&#x7684;&#x7B80;&#x5355;&#x8FD0;&#x7528;&#xFF0C;&#x4E5F;&#x662F;&#x5E38;&#x89C1;&#x7684;&#x547D;&#x4EE4;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;<code>rebase</code>&#x7684;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x53C2;&#x6570;<code>--onto</code>&#x3002;</p>\n<h3 id=\"&#x2013;onto\"><a href=\"#&#x2013;onto\" class=\"headerlink\" title=\"&#x2013;onto\"></a>&#x2013;onto</h3><p>&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4EEC;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x652F;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x4E0D;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5F53;&#x4F60;&#x5728;&#x5206;&#x652F;<code>A</code>&#x4E0A;&#x521B;&#x5EFA;&#x4E86;&#x65B0;&#x5206;&#x652F;<code>B</code>&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x529F;&#x80FD;&#x5E76;&#x4E14;&#x4E5F;&#x63D0;&#x4EA4;&#x4E86;&#x4E00;&#x4E9B;<code>commit</code>&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x53D1;&#x73B0;&#x539F;&#x6765;<code>A</code>&#x5206;&#x652F;&#x4E0A;&#x6709;&#x9519;&#x8BEF;&#x7684;<code>commit</code>&#xFF0C;&#x5982;&#x679C;&#x8981;<code>rebase</code>&#x5230;<code>master</code>&#x4E0A;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x5C06;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x7684;<code>commit</code>&#x4E5F;&#x9644;&#x5E26;&#x4E0A;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8BE5;<code>--onto</code>&#x5927;&#x663E;&#x795E;&#x901A;&#x4E86;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/3.png\" alt=\"--onto\"></p>\n<p>&#x5F53;&#x524D;&#x5904;&#x5728;<code>B</code>&#x5206;&#x652F;&#xFF0C;&#x8981;&#x5F97;&#x5230;&#x4E0A;&#x9762;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x53EA;&#x9700;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase --onto master &lt;b&#x7684;commit hash code&gt; B</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x652F;&#xFF0C;&#x4E5F;&#x80FD;&#x4F5C;&#x7528;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x9488;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x53EA;&#x5BF9;&#x5206;&#x652F;<code>B</code>&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7B49;&#x4EF7;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase --onto &lt;a&#x7684;commit hash code&gt; &lt;b&#x7684;commit hash code&gt; B</div></pre></td></tr></table></figure>\n<h3 id=\"&#x2013;interactive\"><a href=\"#&#x2013;interactive\" class=\"headerlink\" title=\"&#x2013;interactive\"></a>&#x2013;interactive</h3><p>&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x4FEE;&#x6539;<code>commit</code>&#x4FE1;&#x606F;&#x7684;&#x540D;&#x79F0;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x4FEE;&#x6539;&#x7684;<code>commit</code>&#x5904;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x4E0D;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x5230;<code>rebase</code>&#x7684;<code>--interactive</code>&#x53EF;&#x9009;&#x53C2;&#x6570;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5199;&#x4E3A;<code>-i</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase -i &lt;commit hash code&gt;</div></pre></td></tr></table></figure>\n<p>&#x53C2;&#x6570;&#x540E;&#x9762;&#x7684;<code>commit hash code</code>&#x4E3A;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x7684;<code>commit</code>&#x7684;&#x524D;&#x4E00;&#x4E2A;&#x3002;&#x6267;&#x884C;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x7C7B;&#x4F3C;&#x7684;&#x4FE1;&#x606F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">pick 137cf0a First coommit</div><div class=\"line\">pick 163dc38 Second commit</div><div class=\"line\"></div><div class=\"line\"># Rebase f9aee6e..163dc38 onto f9aee6e (2 command(s))</div><div class=\"line\">#</div><div class=\"line\"># Commands:</div><div class=\"line\"># p, pick = use commit</div><div class=\"line\"># r, reword = use commit, but edit the commit message</div><div class=\"line\"># e, edit = use commit, but stop for amending</div><div class=\"line\"># s, squash = use commit, but meld into previous commit</div><div class=\"line\"># f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message</div><div class=\"line\"># x, exec = run command (the rest of the line) using shell</div><div class=\"line\">#</div><div class=\"line\"># These lines can be re-ordered; they are executed from top to bottom.</div><div class=\"line\">#</div><div class=\"line\"># If you remove a line here THAT COMMIT WILL BE LOST.</div><div class=\"line\">#</div><div class=\"line\"># However, if you remove everything, the rebase will be aborted.</div><div class=\"line\">#</div><div class=\"line\"># Note that empty commits are commented out</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x63D0;&#x793A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6709;<code>6</code>&#x4E2A;&#x53EF;&#x9009;&#x62E9;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x76F8;&#x4FE1;&#x63D0;&#x793A;&#x5DF2;&#x7ECF;&#x8BF4;&#x7684;&#x5F88;&#x660E;&#x663E;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x79CD;&#x8981;&#x4FEE;&#x6539;<code>First coommit</code>&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;<code>r</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">r 137cf0a First commit</div><div class=\"line\">pick 163dc38 Second commit</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x4E4B;&#x540E;&#x4F1A;&#x8DF3;&#x5230;&#x4FEE;&#x8BE5;<code>First coomit</code>&#x7684;&#x754C;&#x9762;&#xFF0C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x5373;&#x53EF;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">First commit</div><div class=\"line\"></div><div class=\"line\"># Please enter the commit message for your changes. Lines starting</div><div class=\"line\"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</div><div class=\"line\">#</div><div class=\"line\"># Date:      Thu Jan 26 23:07:10 2017 +0800</div><div class=\"line\">#</div><div class=\"line\"># rebase in progress; onto f9aee6e</div><div class=\"line\"># You are currently editing a commit while rebasing branch &apos;master&apos; on &apos;f9aee6e&apos;.</div><div class=\"line\">#</div><div class=\"line\"># Changes to be committed:</div><div class=\"line\">#       new file:   file1</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x64CD;&#x4F5C;&#x9879;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#x3002;&#x4F8B;&#x5982;<code>s</code>&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5408;&#x5E76;<code>commit</code>&#x3002;</p>\n<h2 id=\"branch\"><a href=\"#branch\" class=\"headerlink\" title=\"branch\"></a>branch</h2><p>&#x76F8;&#x4FE1;<code>branch</code>&#x90FD;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x4ED6;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x4F1A;&#x7528;&#x5230;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x573A;&#x666F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x5982;&#x679C;&#x5728;&#x4F60;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5206;&#x652F;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x60F3;&#x4ECE;&#x5F53;&#x524D;&#x7684;<code>commit</code>&#x4FE1;&#x606F;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5206;&#x652F;&#x3002;</p>\n<p><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/2.png\" alt=\"branch\"></p>\n<p>&#x8981;&#x5B9E;&#x73B0;&#x5982;&#x4E0A;&#x6548;&#x679C;&#x53EA;&#x9700;&#x5728;&#x521B;&#x5EFA;&#x5206;&#x652F;&#x65F6;&#x5728;&#x540E;&#x9762;&#x518D;&#x6DFB;&#x52A0;&#x989D;&#x5916;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x4F60;&#x6240;&#x9700;&#x8C03;&#x5230;&#x7684;<code>commit</code>&#x8282;&#x70B9;&#x7684;<code>hash code</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch new_branch &lt;commit hash code&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"push\"><a href=\"#push\" class=\"headerlink\" title=\"push\"></a>push</h2><p>&#x8FD9;&#x91CC;&#x63D0;&#x4E00;&#x4E0B;<code>push</code>&#x7684;<code>--set-upstream</code>,&#x5B83;&#x7684;&#x6548;&#x679C;&#x662F;&#x8BBE;&#x7F6E;&#x4E0A;&#x6E38;&#x5206;&#x652F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5C06;&#x8FDC;&#x7A0B;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x672C;&#x5730;&#x5206;&#x652F;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5728;&#x63A8;&#x9001;&#x7684;&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4F1A;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout push_branch</div><div class=\"line\">git push origin push_branch</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x662F;&#x7B80;&#x6D01;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#x65E0;&#x9700;&#x5207;&#x6362;&#x5206;&#x652F;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push --set-upstream origin push_branch</div></pre></td></tr></table></figure>\n<h2 id=\"cherry-pick\"><a href=\"#cherry-pick\" class=\"headerlink\" title=\"cherry-pick\"></a>cherry-pick</h2><p>&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x573A;&#x666F;&#x662F;&#xFF1A;&#x5F53;&#x4F60;&#x6240;&#x5728;&#x7684;&#x5206;&#x652F;&#x6CA1;&#x7528;&#xFF0C;&#x4F60;&#x8981;&#x5220;&#x9664;&#x5B83;&#xFF0C;&#x4F46;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;<code>commit</code>&#x4F60;&#x8FD8;&#x662F;&#x60F3;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7A0B;<code>master</code>&#x4E0A;&#x3002;<br><img src=\"/2017/01/26/git&#x4F7F;&#x7528;&#x6742;&#x8BB0;/4.png\" alt=\"cherry-pick\"></p>\n<p>&#x5C06;&#x5206;&#x652F;&#x5207;&#x6362;&#x5230;<code>master</code>&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git cherry-pick &lt;b&#x7684; commit hash code&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"merge\"><a href=\"#merge\" class=\"headerlink\" title=\"merge\"></a>merge</h2><p>&#x6211;&#x4EEC;&#x6240;&#x719F;&#x77E5;&#x7684;&#x662F;&#x4F7F;&#x7528;<code>merge</code>&#x6765;&#x8FDB;&#x884C;&#x5206;&#x652F;&#x7684;&#x5408;&#x5E76;&#xFF0C;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;<code>merge</code>&#x65F6;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x526F;&#x5206;&#x652F;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;<code>commit</code>&#x8FDB;&#x884C;&#x63A8;&#x9001;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6211;&#x4E0D;&#x60F3;&#x5B83;&#x81EA;&#x52A8;&#x63A8;&#x9001;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#x65F6;&#xFF08;&#x53EF;&#x80FD;&#x6211;&#x8FD8;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF09;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>--squash</code>&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git merge --squash dev_branch</div></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;&#x5B8C;&#x4EE5;&#x4E0A;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6682;&#x5B58;&#x533A;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x8FD8;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x6587;&#x4EF6;&#x72B6;&#x6001;&#x3002;</p>\n<h2 id=\"reflog\"><a href=\"#reflog\" class=\"headerlink\" title=\"reflog\"></a>reflog</h2><p>&#x5F53;&#x6211;&#x4EEC;&#x5207;&#x5206;&#x652F;&#x592A;&#x9891;&#x7E41;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5FD8;&#x4E86;&#x4E00;&#x4E9B;&#x5206;&#x652F;&#x662F;&#x4ECE;&#x54EA;&#x4E2A;&#x5206;&#x652F;&#x5207;&#x8FC7;&#x6765;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reflog</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">894a16d HEAD@{0}: commit: commit another todo</div><div class=\"line\">6876e5b HEAD@{1}: checkout: moving from solve_world_hunger to kill_the_batman</div><div class=\"line\">324336a HEAD@{2}: commit: commit todo</div><div class=\"line\">6876e5b HEAD@{3}: checkout: moving from blowup_sun_for_ransom to solve_world_hunger</div><div class=\"line\">6876e5b HEAD@{4}: checkout: moving from kill_the_batman to blowup_sun_for_ransom</div><div class=\"line\">6876e5b HEAD@{5}: checkout: moving from cure_common_cold to kill_the_batman</div><div class=\"line\">6876e5b HEAD@{6}: commit (initial): initial commit</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6240;&#x7528;&#x7684;&#x64CD;&#x4F5C;&#x5386;&#x53F2;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>git reset</code>&#x547D;&#x4EE4;&#x4E0D;&#x5C0F;&#x5FC3;&#x5220;&#x9664;&#x4E86;&#x9700;&#x8981;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6B64;&#x6765;&#x67E5;&#x627E;&#x5230;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x7684;<code>hash code</code>&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x6062;&#x590D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout &lt;hash code&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76EE;&#x524D;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x6709;&#x6240;&#x5E2E;&#x52A9;</em></p>\n</blockquote>\n"},{"title":"Andorid多渠道打包","url":"https://www.rousetime.com/2017/01/02/Andorid多渠道打包/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>2016</code>&#x521A;&#x521A;&#x8FC7;&#x53BB;&#xFF0C;&#x81EA;&#x5DF1;&#x5199;&#x535A;&#x5BA2;&#x662F;&#x5728;<code>2016.03.04</code>&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x65E5;&#x5B50;&#x5F88;&#x7279;&#x522B;&#xFF0C;&#x4E5F;&#x5F88;&#x6709;&#x620F;&#x5267;&#x8272;&#x5F69;(&#x5185;&#x5E55;&#x6211;&#x73B0;&#x5728;&#x662F;&#x4E0D;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x4EEC;&#x6EF4;&#xFF0C;&#x731C;&#x53BB;&#x5427;&#xFF01;)&#x3002;&#x6D4F;&#x89C8;&#x4E86;&#x4E0B;&#x81EA;&#x5DF1;&#x53BB;&#x5E74;&#x7684;&#x6210;&#x679C;&#xFF0C;&#x6587;&#x7AE0;&#x6570;&#x91CF;&#x8FD8;&#x662F;&#x5F88;&#x53EF;&#x89C2;&#x7684;&#xFF0C;&#x8D77;&#x521D;&#x7684;&#x4E00;&#x4E2A;&#x6708;<code>4</code>&#x7BC7;&#x5230;&#x540E;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x6708;<code>1</code>&#x7BC7;&#x3002;&#x73B0;&#x5728;&#x81EA;&#x5DF1;&#x4E5F;&#x8981;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E0D;&#x518D;&#x50CF;&#x539F;&#x6765;&#x5728;&#x5B66;&#x6821;&#x90A3;&#x4E48;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x4ECE;&#x6700;&#x8FD1;&#x7684;&#x535A;&#x5BA2;&#x66F4;&#x65B0;&#x6765;&#x770B;&#xFF0C;&#x53D1;&#x73B0;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x5077;&#x61D2;&#x4E86;&#x54E6;(&#x5077;&#x61D2;&#x786E;&#x5B9E;&#x5F88;&#x723D;)&#xFF01;&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x7ED9;&#x6211;&#x4E00;&#x51FB;&#x8B66;&#x949F;&#xFF0C;&#x6211;&#x4E0D;&#x80FD;&#x8352;&#x5E9F;&#x6211;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x8981;&#x91CD;&#x62FE;&#x6211;&#x7684;&#x521D;&#x8877;&#x3002;<code>&#x5728;&#x6B64;&#x501F;&#x52A9;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7ACB;&#x4E0B;&#x8BC1;&#x636E;</code>&#x3002;</p>\n<p>&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x65B0;&#x7684;&#x5F00;&#x59CB;&#xFF0C;&#x4E00;&#x6B65;&#x4E00;&#x4E2A;&#x811A;&#x5370;&#x8FCE;&#x63A5;<code>2017</code></p>\n<hr>\n<h1 id=\"&#x6B63;&#x6587;\"><a href=\"#&#x6B63;&#x6587;\" class=\"headerlink\" title=\"&#x6B63;&#x6587;\"></a>&#x6B63;&#x6587;</h1><p>&#x611F;&#x8C22;&#x503E;&#x542C;&#x6211;&#x7684;&#x611F;&#x6168;&#xFF0C;&#x4E0B;&#x9762;&#x6B63;&#x5F0F;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#x3002;&#x5173;&#x4E8E;&#x8FD9;&#x6B21;&#x7684;&#x591A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x4E5F;&#x662F;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x624D;&#x8BA4;&#x8BC6;&#x6709;&#x8FD9;&#x4E00;&#x56DE;&#x4E8B;&#xFF0C;&#x539F;&#x6765;&#x5728;&#x5B66;&#x6821;&#x66F4;&#x672C;&#x4E0D;&#x4F1A;&#x63A5;&#x89E6;&#x5230;&#x8FD9;&#x4E9B;&#xFF0C;<code>&#x793E;&#x4F1A;&#x662F;&#x6700;&#x597D;&#x7684;&#x8001;&#x5E08;</code>&#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;<code>App</code>&#x90FD;&#x8981;&#x53D1;&#x5E03;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x56E0;&#x6B64;&#x5C31;&#x6709;&#x4E86;&#x8BB8;&#x591A;&#x7684;&#x6E20;&#x9053;(360&#x3001;baidu&#x3001;xiaomi&#x3001;91&#x3001;oppo&#x7B49;)&#xFF0C;&#x800C;&#x516C;&#x53F8;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x8FFD;&#x8E2A;&#x7528;&#x6237;&#x5BF9;&#x4EA7;&#x54C1;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x8981;&#x5BF9;&#x4E0D;&#x540C;&#x6E20;&#x9053;&#x4E0B;&#x8F7D;&#x7684;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#x3002;&#x81F3;&#x4E8E;&#x7EDF;&#x8BA1;&#x73B0;&#x5728;&#x5927;&#x591A;&#x6570;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x53CB;&#x76DF;&#x3002;&#x5982;&#x4F55;&#x7EDF;&#x8BA1;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x6E20;&#x9053;&#x6211;&#x4EEC;&#x8981;&#x5206;&#x522B;&#x6253;&#x5305;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x4E5F;&#x662F;<code>Android</code>&#x591A;&#x5E73;&#x53F0;&#x7684;&#x7F18;&#x6545;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;<code>IOS</code>&#x5374;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x56DE;&#x4E8B;&#x3002;&#x73B0;&#x5728;&#x6E20;&#x9053;&#x6709;<code>900</code>&#x591A;&#x4E2A;&#xFF0C;&#x4E00;&#x822C;&#x6253;&#x4E00;&#x6B21;&#x5305;&#x5C31;&#x8981;<code>3~4</code>&#x5206;&#x949F;&#xFF0C;&#x50CF;&#x6211;&#x516C;&#x53F8;&#x8981;&#x9488;&#x5BF9;<code>66</code>&#x4E2A;&#x6E20;&#x9053;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;&#x5982;&#x679C;&#x6309;&#x90E8;&#x5C31;&#x73ED;&#x6765;&#x90A3;&#x5C31;&#x8981;<code>3~4</code>&#x4E2A;&#x5C0F;&#x65F6;&#x4E86;&#xFF08;&#x54C7;&#x597D;&#x723D;&#x554A;&#xFF0C;&#x534A;&#x5929;&#x5DE5;&#x4F5C;&#x65F6;&#x95F4;&#x5C31;&#x8FC7;&#x53BB;&#x4E86;&#xFF0C;&#x5077;&#x61D2;&#x6210;&#x529F;&#xFF09;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x5B8C;&#x5168;&#x88AB;&#x8FD9;&#x79CD;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x4E1C;&#x897F;&#x6D6A;&#x8D39;&#x4E86;&#x3002;&#x5982;&#x679C;&#x628A;&#x8FD9;&#x4E9B;&#x65F6;&#x95F4;&#x7528;&#x6765;&#x64A9;&#x59B9;&#x7EC8;&#x8EAB;&#x5927;&#x4E8B;&#x5C31;&#x4E0D;&#x6101;&#x4E86;&#xFF08;&#x563B;&#x563B;&#xFF09;&#x3002;</p>\n<h2 id=\"&#x89E3;&#x51B3;\"><a href=\"#&#x89E3;&#x51B3;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;\"></a>&#x89E3;&#x51B3;</h2><h3 id=\"&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\"><a href=\"#&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;\"></a>&#x6700;&#x57FA;&#x672C;&#x65B9;&#x5F0F;</h3><p>&#x6700;&#x57FA;&#x672C;&#x7684;&#x8BBE;&#x7F6E;&#x6E20;&#x9053;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x5728;<code>AndroidManifest.xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;<code>&lt;meta-data&gt;</code>&#x5143;&#x7D20;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;meta-data</div><div class=\"line\">    android:name=&quot;UMENG_CHANNEL&quot;</div><div class=\"line\">    android:value=&quot;Channel_ID&quot; /&gt;</div><div class=\"line\">&lt;meta-data</div><div class=\"line\">\tandroid:name=&quot;UMENG_CHANNEL&quot;</div><div class=\"line\">   \tandroid:value=&quot;web&quot; /&gt;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x53CB;&#x76DF;&#x7EDF;&#x8BA1;&#xFF0C; &#x4E0A;&#x9762;&#x7684;<code>web</code>&#x5C31;&#x662F;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x4E0D;&#x540C;&#x6E20;&#x9053;&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x503C;&#x3002;&#x5BF9;&#x4E8E;&#x6E20;&#x9053;&#x5C11;&#x7684;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;<code>build.gradle</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;<code>productFlavors</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">productFlavors {</div><div class=\"line\">        xiaomi {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;xiaomi&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        _360 {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;_360&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        baidu {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;baidu&quot;]</div><div class=\"line\">        }</div><div class=\"line\">        wandoujia {</div><div class=\"line\">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wandoujia&quot;]</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x7EDF;&#x4E00;&#x4FEE;&#x6539;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">productFlavors {</div><div class=\"line\">        xiaomi {}</div><div class=\"line\">        _360 {}</div><div class=\"line\">        baidu {}</div><div class=\"line\">        wandoujia {}</div><div class=\"line\">    }  </div><div class=\"line\">    productFlavors.all { </div><div class=\"line\">        flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] </div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x9488;&#x5BF9;&#x6E20;&#x9053;&#x5C11;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x6E20;&#x9053;&#x8FC7;&#x591A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x73B0;&#x5728;&#x9047;&#x5230;&#x7684;<code>60</code>&#x591A;&#x4E2A;&#xFF0C;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;</p>\n<h3 id=\"&#x4F18;&#x5316;&#x65B9;&#x5F0F;\"><a href=\"#&#x4F18;&#x5316;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x4F18;&#x5316;&#x65B9;&#x5F0F;\"></a>&#x4F18;&#x5316;&#x65B9;&#x5F0F;</h3><p>&#x8FD9;&#x91CC;&#x501F;&#x52A9;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;<code>packer-ng</code>&#xFF0C;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6253;&#x5305;&#xFF0C;&#x5B83;&#x53EA;&#x9700;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x6B63;&#x5E38;&#x7684;&#x6253;&#x5305;&#x64CD;&#x4F5C;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x6E20;&#x9053;&#x6BCF;&#x4E2A;&#x4EE5;<code>1</code>&#x79D2;&#x4EE5;&#x5185;&#x7684;&#x901F;&#x5EA6;&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;&#x901F;&#x5EA6;&#x662F;&#x4E0D;&#x662F;&#x975E;&#x5E38;&#x53EF;&#x89C2;&#x5462;(&#x9EBB;&#x9EBB;&#x518D;&#x4E5F;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x6211;&#x7684;&#x6548;&#x7387;&#x4E86;)&#x3002;</p>\n<p>&#x9996;&#x5148;&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>bulid.gradle</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">        classpath &apos;com.mcxiaoke.gradle:packer-ng:1.0.8&apos;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x5207;&#x6362;&#x5230;<code>app</code>&#x4E0B;&#x7684;<code>build.gradle</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply plugin: &apos;packer&apos;</div><div class=\"line\"> </div><div class=\"line\">signingConfigs {</div><div class=\"line\">        release {</div><div class=\"line\">            //&#x7701;&#x7565;&#x76F8;&#x5173;&#x914D;&#x7F6E;</div><div class=\"line\">            ....</div><div class=\"line\">            //&#x5982;&#x679C;&#x4F60;&#x7684;gradle&#x7248;&#x672C;&#x8D85;&#x8FC7;2.14.1</div><div class=\"line\">            //gradle plugin&#x7248;&#x672C;&#x8D85;&#x8FC7;2.2.0 &#x5C31;&#x8981;&#x8BBE;&#x7F6E;&#x8BE5;&#x9879;</div><div class=\"line\">            //&#x4E3A;&#x4E86;&#x7981;&#x7528;&#x9ED8;&#x8BA4;&#x7684;v2&#x7248;&#x7B7E;&#x540D;&#x6A21;&#x5F0F;</div><div class=\"line\">            v2SigningEnabled false</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.mcxiaoke.gradle:packer-helper:1.0.8&apos;</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">packer {</div><div class=\"line\">        // &#x6307;&#x5B9A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x76EE;&#x5F55;</div><div class=\"line\">         archiveOutput = file(new File(project.rootProject.buildDir.path, &quot;cyzs_apks&quot;))</div><div class=\"line\">        // &#x6307;&#x5B9A;&#x6E20;&#x9053;&#x6253;&#x5305;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x540D;&#x683C;&#x5F0F;</div><div class=\"line\">        // &#x9ED8;&#x8BA4;&#x662F; `${appPkg}-${flavorName}-${buildType}-v${versionName}-${versionCode}`</div><div class=\"line\">         archiveNameFormat = &apos;cyzs.${versionName}.${flavorName}&apos;</div><div class=\"line\">        // &#x662F;&#x5426;&#x68C0;&#x67E5;Gradle&#x914D;&#x7F6E;&#x4E2D;&#x7684;signingConfig&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x68C0;&#x67E5;</div><div class=\"line\">        // checkSigningConfig = false</div><div class=\"line\">        // &#x662F;&#x5426;&#x68C0;&#x67E5;Gradle&#x914D;&#x7F6E;&#x4E2D;&#x7684;zipAlignEnabled&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x68C0;&#x67E5;</div><div class=\"line\">        // checkZipAlign = false</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x5173;&#x4E8E;<code>gradle</code>&#x65B9;&#x9762;&#x7684;&#xFF0C;&#x65E2;&#x7136;&#x73B0;&#x5728;&#x4E0D;&#x5728;<code>AndroidManifes.xml</code>&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x6E20;&#x9053;&#xFF0C;&#x5C31;&#x8981;&#x53E6;&#x5BFB;&#x5B83;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x521B;&#x5EFA;<code>marktes.txt</code>&#x6587;&#x672C;&#xFF0C;&#x6587;&#x672C;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x6240;&#x9700;&#x7684;&#x6E20;&#x9053;&#xFF0C;&#x683C;&#x5F0F;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">web</div><div class=\"line\">360</div><div class=\"line\">Tencent</div><div class=\"line\">baidu</div><div class=\"line\">91</div><div class=\"line\">Anzhuo</div><div class=\"line\">anzhi</div><div class=\"line\">Wandou</div><div class=\"line\">ppzhushou</div><div class=\"line\">Xiaomi</div><div class=\"line\">zhihuiyun</div><div class=\"line\">oppo</div><div class=\"line\">vivo</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x73B0;&#x5728;&#x89E3;&#x51B3;&#x4E86;&#x6E20;&#x9053;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x90A3;&#x4E48;&#x4E0B;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x8BBE;&#x7F6E;&#x7684;&#x6E20;&#x9053;&#x4E86;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x7EE7;&#x627F;&#x4E86;&#x76F8;&#x5173;&#x7684;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#x8BFB;&#x53D6;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">channel = PackerNg.getMarket(context);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x62FF;&#x5230;&#x4E86;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x4E86;&#x3002;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x6765;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5C06;&#x6E20;&#x9053;&#x4E0A;&#x4F20;&#x5230;&#x53CB;&#x76DF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x6267;&#x884C;&#x6253;&#x5305;&#x4E86;&#xFF0C;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew -Pmarket=markets.txt clean apkRelease</div></pre></td></tr></table></figure>\n<p><code>-Pmarket</code>&#x662F;&#x4E3A;&#x4E86;&#x6307;&#x5B9A;&#x6E20;&#x9053;&#x5B58;&#x653E;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x6839;&#x76EE;&#x5F55;&#x4E2D;&#x76F4;&#x63A5;&#x4E3A;<code>markets.txt</code>&#xFF0C;<code>clean</code>&#x662F;&#x4E3A;&#x4E86;&#x6E05;&#x9664;&#x539F;&#x6765;&#x8F93;&#x51FA;&#x76EE;&#x5F55;&#x4E2D;&#x7684;<code>apk</code>&#xFF0C;<code>apk[buildType]</code>&#x662F;&#x6807;&#x660E;&#x6253;&#x4EC0;&#x4E48;&#x5305;&#x3002;&#x8FD9;&#x91CC;&#x662F;<code>release</code>&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x6D01;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x7701;&#x7565;<code>-Pmarket=markets.txt</code>&#x3002;&#x5982;&#x6B64;&#x9700;&#x8981;&#x5728;<code>gradle.properites</code>&#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">market=markets.txt</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6267;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew clean apkRelease</div></pre></td></tr></table></figure>\n<p>&#x597D;&#x4E86;&#xFF0C;&#x5927;&#x529F;&#x544A;&#x6210;&#xFF0C;&#x518D;&#x7B49;<code>3~4</code>&#x5206;&#x949F;&#x5C31;&#x5B8C;&#x7F8E;&#x6536;&#x5DE5;&#x4E86;&#x3002;&#x6700;&#x540E;&#x6253;&#x597D;&#x7684;<code>apk</code>&#x4F1A;&#x5728;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x5F84;&#x4E2D;,&#x4F8B;&#x5982;&#x5BF9;&#x4E8E;&#x4E0A;&#x9762;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x5F84;&#xFF1A;<code>&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;/build/cyzs_apks</code>&#x3002;</p>\n<p><img src=\"/2017/01/02/Andorid&#x591A;&#x6E20;&#x9053;&#x6253;&#x5305;/1.png\" alt=\"apks\"></p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p><code>Android</code>&#x5E94;&#x7528;&#x7684;<code>APK</code>&#x90FD;&#x662F;&#x4E00;&#x4E2A;<code>zip</code>&#x6587;&#x4EF6;&#xFF0C;&#x800C;<a href=\"https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\" target=\"_blank\" rel=\"external\">zip&#x6587;&#x4EF6;&#x89C4;&#x5B9A;</a>&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x672B;&#x5C3E;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x53EB;<a href=\"https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip.html\" target=\"_blank\" rel=\"external\">Central Directory Record</a>&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x7684;&#x672B;&#x5C3E;&#x662F;<code>apk</code>&#x7684;&#x6CE8;&#x91CA;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x4E00;&#x70B9;&#x4FEE;&#x6539;&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5411;&#x5176;&#x4E2D;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x7684;&#x6E20;&#x9053;&#x540D;&#xFF0C;&#x4F46;&#x8FD9;&#x5374;&#x4E0D;&#x7834;&#x574F;<code>apk</code>&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6839;&#x672C;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5C31;&#x662F;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8BFB;&#x4E0E;&#x5199;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x89E3;&#x51B3;&#x601D;&#x8DEF;&#x3002;    </p>\n<p>&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x4E0D;&#x501F;&#x52A9;<code>gradle</code>&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x6253;&#x5305;&#xFF0C;&#x5206;&#x522B;&#x6709;<code>java</code>&#x4E0E;<code>python</code>&#x811A;&#x672C;&#x3002;&#x4ECA;&#x5929;&#x65F6;&#x95F4;&#x6709;&#x70B9;&#x665A;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x5982;&#x9700;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x540E;&#x7EED;&#x518D;&#x5355;&#x72EC;&#x8BA8;&#x8BBA;&#x3002;</p>\n<blockquote>\n<p><em><code>2017</code>&#x7B2C;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5B8C;&#x7F8E;&#x6536;&#x5DE5;</em></p>\n</blockquote>\n"},{"title":"使用Retrofit原生的最佳实践","url":"https://www.rousetime.com/2016/11/18/使用Retrofit原生的最佳实践/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x524D;&#x9762;&#x8BF4;&#x5230;&#x4E86;<code>Retrofit</code>&#x7684;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x5165;&#x95E8;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x5165;&#x95E8;&#x7684;&#x63A8;&#x8350;&#x5148;&#x9605;&#x8BFB;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/11/15/%E5%B8%A6%E4%BD%A0%E8%B5%B0%E8%BF%9BRetrofit%E7%9A%84%E6%96%B0%E4%B8%96%E7%95%8C/#Headers-And-Header\" target=\"_blank\" rel=\"external\">&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;</a>&#xFF0C;&#x4ECA;&#x5929;&#x5C06;&#x76F4;&#x63A5;&#x4EE5;&#x5B9E;&#x8DF5;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4ECB;&#x7ECD;<code>Retrofit</code><strong>&#x539F;&#x751F;</strong>&#x7684;&#x5404;&#x65B9;&#x9762;&#x7684;&#x5177;&#x4F53;&#x4F7F;&#x7528;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#x3002;&#x4E0B;&#x9762;&#x5C06;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x5185;&#x5BB9;&#x4E3B;&#x8981;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li><code>Retrofit</code>&#x7684;&#x5C01;&#x88C5;</li>\n<li><code>Converter</code>&#x7684;&#x4F7F;&#x7528;</li>\n<li><code>OkHttp</code>&#x7684;<code>Interceptor</code>&#x7684;&#x4F7F;&#x7528;</li>\n<li><code>url</code>&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;<code>url</code>&#x7684;&#x8BBE;&#x7F6E;</li>\n<li><code>request</code>&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;</li>\n<li><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</li>\n<li><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;</li>\n</ul>\n<h2 id=\"Retrofit&#x7684;&#x5C01;&#x88C5;\"><a href=\"#Retrofit&#x7684;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x5C01;&#x88C5;\"></a>Retrofit&#x7684;&#x5C01;&#x88C5;</h2><p>&#x9996;&#x5148;&#x7ED9;&#x4E00;&#x4E2A;&#x5E38;&#x89C4;&#x7684;&#x5199;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors(</div><div class=\"line\">            @Path(&quot;owner&quot;) String owner,</div><div class=\"line\">            @Path(&quot;repo&quot;) String repo);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;https://api.github.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\"> </div><div class=\"line\">        GithubService service = retrofit.create(GithubService.class);</div><div class=\"line\">        Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x7684;&#x8BF7;&#x6C42;&#x4E00;&#x822C;&#x90FD;&#x5F88;&#x591A;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x90FD;&#x6362;&#x63A5;&#x53E3;&#x90FD;&#x8981;&#x91CD;&#x590D;&#x5199;<code>Retrofit</code>&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x4E86;&#x7D2F;&#x8D58;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;<code>ServiceGenerator</code>,&#x5411;&#x5176;&#x4E2D;&#x4F20;&#x5165;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x7C7B;&#xFF0C;&#x8BA9;&#x5176;&#x8FD4;&#x56DE;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;&#x5B9E;&#x4F8B;&#x5373;&#x53EF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ServiceGenerator {</div><div class=\"line\">    public static String API_BASE_URL = &quot;https://api.github.com&quot;;</div><div class=\"line\">  </div><div class=\"line\">    private ServiceGenerator() {</div><div class=\"line\"> </div><div class=\"line\">    }</div><div class=\"line\">  </div><div class=\"line\">    private static OkHttpClient.Builder okHttpClient = new OkHttpClient.Builder();</div><div class=\"line\"> </div><div class=\"line\">    private static Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_BASE_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">   </div><div class=\"line\">    public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {</div><div class=\"line\">        Retrofit retrofit = builder.client(okHttpClient.build()).build();</div><div class=\"line\">        return retrofit.create(serivceClass)</div><div class=\"line\">        }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5C01;&#x88C5;&#x7684;<code>ServiceGenerator</code>&#x8FDB;&#x884C;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\"> </div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x662F;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x4E86;&#x5462;&#xFF0C;&#x4E24;&#x884C;&#x4EE3;&#x7801;&#x5C31;&#x641E;&#x5B9A;</em></p>\n</blockquote>\n<h2 id=\"Converter&#x7684;&#x4F7F;&#x7528;\"><a href=\"#Converter&#x7684;&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"Converter&#x7684;&#x4F7F;&#x7528;\"></a>Converter&#x7684;&#x4F7F;&#x7528;</h2><p><code>converter</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#xFF0C;&#x9ED8;&#x8BA4;<code>Retrofit</code>&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x662F;<code>OkHttp</code>&#x7684;<code>RequestBody</code>&#x4E0E;<code>ResponseBody</code>,&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x4F1A;&#x9047;&#x5230;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F8B;&#x5982;<code>JSON</code>&#x3001;<code>XML</code>&#x8FD9;&#x65F6;&#x4EEC;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x5230;<code>converter</code>&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#x6210;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x503C;&#x5F97;&#x5E86;&#x5E78;&#x7684;&#x662F;&#x5B98;&#x65B9;&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x5927;&#x90E8;&#x5206;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x5316;&#x3002;</p>\n<ul>\n<li>Gson: com.squareup.retrofit2:converter-gson</li>\n<li>Jackson: com.squareup.retrofit2:converter-jackson</li>\n<li>Moshi: com.squareup.retrofit2:converter-moshi</li>\n<li>Protobuf: com.squareup.retrofit2:converter-protobuf</li>\n<li>Wire: com.squareup.retrofit2:converter-wire</li>\n<li>Simple XML: com.squareup.retrofit2:converter-simplexml</li>\n<li>Scalars (primitives, boxed, and String): com.squareup.retrofit2:converter-scalars</li>\n</ul>\n<p>&#x53EA;&#x9700;&#x4E24;&#x6B65;&#x5C31;&#x80FD;&#x5FEB;&#x901F;&#x914D;&#x7F6E;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982;<code>Gson</code></p>\n<p>1.&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E0E;<code>Retrofit</code>&#x5BF9;&#x4E8E;&#x7684;&#x7248;&#x672C;&#x53F7;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:converter-gson:2.1.0&apos;</div></pre></td></tr></table></figure>\n<p>2.&#x5728;<code>Retrofit.Builder</code>&#x4E2D;&#x901A;&#x8FC7;<code>.addConverterFactory()</code>&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x7528;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x6570;&#x636E;&#x5462;&#xFF1F;&#x4F8B;&#x5982;<code>Gson</code>&#x3001;<code>String</code>&#xFF0C;&#x653E;&#x5FC3;&#x4E5F;&#x662F;&#x901A;&#x8FC7;<code>.addConverterFactory()</code>&#x8FDB;&#x884C;&#x6DFB;&#x52A0;.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;<code>Retrofit</code>&#x4F1A;&#x6309;&#x7167;&#x6DFB;&#x52A0;&#x7684;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x5148;&#x540E;&#x7684;&#x5339;&#x914D;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x76F8;&#x9002;&#x5408;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x4E00;&#x822C;&#x63A8;&#x8350;&#x5C06;<code>Gson</code>&#x653E;&#x5230;&#x6700;&#x540E;&#x9762;&#x3002;</p>\n<h2 id=\"OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\"><a href=\"#OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;\"></a>OkHttp&#x7684;Interceptor&#x7684;&#x4F7F;&#x7528;</h2><p>&#x5047;&#x8BBE;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x60C5;&#x5F62;&#xFF1A;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x8981;&#x6DFB;&#x52A0;<code>Connection</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#xFF0C;&#x6839;&#x636E;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers(&quot;Connection: keep-alive&quot;)</div><div class=\"line\">@POST(&quot;/login&quot;)</div><div class=\"line\">Call&lt;String&gt; loginService();</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x8981;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x6DFB;&#x52A0;<code>@Headers</code>&#x5B57;&#x6BB5;&#x6216;&#x8005;&#x5728;&#x53C2;&#x6570;&#x4E2D;&#x6DFB;&#x52A0;<code>@Header</code>&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x6709;&#x70B9;&#x591A;&#x4F59;&#x4E0E;&#x9EBB;&#x70E6;&#x5462;&#x3002;&#x56E0;&#x4E3A;<code>Retrofit</code>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x662F;&#x4EA4;&#x7ED9;<code>OkHttp</code>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E48;&#x53EF;&#x4EE5;&#x5BF9;<code>OkHttp</code>&#x5C42;&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Interceptor</code>&#x5C31;&#x80FD;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;,&#x8C03;&#x7528;<code>OkHttp</code>&#x7684;<code>.addInterceptor()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD8;&#x662F;&#x5728;<code>ServiceGenerator</code>&#x4E2D;&#x4FEE;&#x6539;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass) {</div><div class=\"line\">okHttpClient.addInterceptor(new Interceptor() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public Response intercept(Chain chain) throws IOException {</div><div class=\"line\">                    Request original = chain.request();</div><div class=\"line\"></div><div class=\"line\">                    Request.Builder builder = original.newBuilder()</div><div class=\"line\">                            .addHeader(&quot;Connection&quot;, &quot;keep-alive&quot;)</div><div class=\"line\">                            .method(original.method(), original.body());</div><div class=\"line\"> </div><div class=\"line\">                    Request request = builder.build();</div><div class=\"line\"> </div><div class=\"line\">                    return chain.proceed(request);</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">Retrofit retrofit = builder.client(okHttpClient.build()).build();</div><div class=\"line\">return retrofit.create(serivceClass);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>chain.request()</code>&#x83B7;&#x53D6;&#x539F;&#x6765;&#x7684;<code>request</code>&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x4F7F;&#x7528;<code>request.newBuilder()</code>&#x65B9;&#x6CD5;&#x6784;&#x9020;&#x65B0;&#x7684;<code>Request.Builder</code>&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>.addHeader</code>&#x6216;&#x8005;<code>.Header</code>&#x65B9;&#x6CD5;&#x6765;&#x6DFB;&#x52A0;<code>Header</code>&#x3002;&#x6700;&#x540E;&#x518D;&#x6784;&#x9020;&#x65B0;&#x7684;<code>request</code>&#x8C03;&#x7528;<code>chain.proceed(request)</code>&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>.addHeader</code>&#x4E0E;<code>.Header</code>&#x7684;&#x533A;&#x522B;&#x3002;</p>\n<ul>\n<li><code>.addHeader</code>&#x5BF9;&#x76F8;&#x540C;&#x7684;<code>name</code>&#xFF0C;&#x4E0D;&#x540C;<code>value</code>&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#xFF0C;&#x8BF4;&#x660E;&#x5B83;&#x53EF;&#x4EE5;&#x5B58;&#x5728;&#x591A;&#x6761;&#x76F8;&#x540C;<code>name</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;</li>\n<li><code>.Header</code>&#x5BF9;&#x76F8;&#x540C;<code>name</code>&#x4F1A;&#x8FDB;&#x884C;&#x8986;&#x76D6;&#xFF0C;&#x8BF4;&#x660E;&#x5BF9;&#x4E8E;&#x76F8;&#x540C;<code>name</code>&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x53EA;&#x80FD;&#x5B58;&#x5728;&#x4E00;&#x4E2A;</li>\n</ul>\n<p>&#x65E2;&#x7136;<code>Interceptor</code>&#x53EF;&#x4EE5;&#x5BF9;<code>header</code>&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5927;&#x80C6;&#x731C;&#x60F3;&#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x5B57;&#x6BB5;&#x662F;&#x5426;&#x4E5F;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#x5462;&#xFF0C;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;<code>apikey</code>&#x5B57;&#x6BB5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">okHttpClient.addInterceptor(new Interceptor() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public Response intercept(Chain chain) throws IOException {</div><div class=\"line\">                    Request original = chain.request();</div><div class=\"line\">                    //&#x83B7;&#x53D6;url</div><div class=\"line\">                    HttpUrl originalUrl = original.url();</div><div class=\"line\"> </div><div class=\"line\">                    Request.Builder builder = original.newBuilder()</div><div class=\"line\">                            .addHeader(&quot;Authorization&quot;, authToken)</div><div class=\"line\">                            .method(original.method(), original.body());                            </div><div class=\"line\">                    //&#x4E3A;url&#x6DFB;&#x52A0;apikey&#x5B57;&#x6BB5;</div><div class=\"line\">                    HttpUrl url = originalUrl.newBuilder()</div><div class=\"line\">                            .addQueryParameter(&quot;apikey&quot;, &quot;isdhh324bdsa&quot;)</div><div class=\"line\">                            .build();</div><div class=\"line\">                    //&#x5C06;&#x4FEE;&#x6539;&#x7684;url&#x6DFB;&#x52A0;&#x5230;&#x65B0;&#x7684;Request&#x4E2D;</div><div class=\"line\">                    Request request = builder</div><div class=\"line\">                            .url(url)</div><div class=\"line\">                            .build();</div><div class=\"line\">                    //&#x6267;&#x884C;</div><div class=\"line\">                    return chain.proceed(request);</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"></a>url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;</h2><h3 id=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\"><a href=\"#url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;\"></a>url&#x7684;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;</h3><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x7684;<code>baseUrl</code>&#x4E3A;<code>https://github.com/api/v2</code>&#x800C;&#x8BBE;&#x7F6E;&#x7684;&#x63A5;&#x53E3;&#x7684;&#x8BBE;&#x7F6E;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;repos&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://github.com/api/v2/repos</code>,&#x5982;&#x679C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8981;&#x8BF7;&#x6C42;<code>v3</code>&#x7248;&#x672C;&#x7684;<code>repos</code>&#x5462;&#xFF1F;&#x4F60;&#x4F1A;&#x8BF4;&#x5F88;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#x4FEE;&#x6539;<code>baseUrl</code>&#x4E3A;<code>https://github.com/api/v3</code>,&#x4F46;&#x5728;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;<code>ServiceGenerator</code>&#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;<code>baseUrl</code>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E0D;&#x5E94;&#x8BE5;&#x53BB;&#x4FEE;&#x6539;&#x5B83;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8981;&#x7528;&#x5230;<code>/</code>&#xFF0C;&#x5B83;&#x80FD;&#x5C06;<code>host</code>&#x540E;&#x9762;&#x7684;&#x5168;&#x90E8;&#x5FFD;&#x7565;&#xFF0C;&#x5373;<code>baseUrl</code>&#x76F4;&#x63A5;&#x6210;&#x4E3A;<code>https://github.com</code>&#xFF0C;&#x518D;&#x5728;&#x540E;&#x9762;&#x6DFB;&#x52A0;&#x8BBE;&#x7F6E;&#x7684;<code>endpoint url</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/api/v3/repos&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x65F6;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://github.com/api/v3/repos</code> ,&#x6240;&#x4EE5;<strong>&#x8981;&#x614E;&#x91CD;&#x4F7F;&#x7528;<code>/</code></strong>&#x3002;</p>\n<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x662F;&#x4F7F;&#x7528;<code>//</code>,&#x5B83;&#x7684;&#x6548;&#x679C;&#x662F;&#x5BF9;<code>scheme</code>&#x8FDB;&#x884C;&#x4FDD;&#x6301;&#xFF0C;&#x4F8B;&#x5982;<code>baseUrl</code>&#x4E3A;<code>https://api.github.com</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">\t//url&#x4E3A;https://api.github.com/api/v3/repos</div><div class=\"line\">\t@GET(&quot;/api/v3/repos&quot;)</div><div class=\"line\">\tCall&lt;List&lt;Contributors&gt;&gt; contributors();</div><div class=\"line\">    </div><div class=\"line\">    //url&#x4E3A;https://api.github.com</div><div class=\"line\">    @GET(&quot;//api.github.com&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors();      </div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"><a href=\"#&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;\"></a>&#x8FD0;&#x884C;&#x65F6;url&#x7684;&#x8BBE;&#x7F6E;</h3><p>&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x5F62;&#xFF1A;&#x524D;&#x9762;&#x8BF7;&#x6C42;&#x662F;<code>url</code>&#x4E3A;<code>https://github.com/api/repos</code>&#x4F46;&#x540E;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;<code>host</code>&#x4E0D;&#x540C;&#x4F8B;&#x5982;&#x4E3A;<code>https://duoshuo.com/api/repos</code>,&#x4F46;&#x4ED6;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x7684;<code>endpoint</code>&#x76F8;&#x540C;<code>/api/repos</code>&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x6539;&#x53D8;&#x8BF7;&#x6C42;&#x7684;<code>baseUrl</code>&#x3002;&#x5BF9;<code>ServiceGenerator</code>&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static OkHttpClient.Builder okHttpClient = new OkHttpClient.Builder();</div><div class=\"line\"></div><div class=\"line\">    private static Retrofit.Builder builder = new Retrofit.Builder()</div><div class=\"line\">            .baseUrl(API_DUOSHUO_URL)</div><div class=\"line\">            .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">            .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">\t//&#x6784;&#x9020;&#x65B0;&#x7684;builder </div><div class=\"line\">    public static void changeApiBaseUrl(String newApiBaseUrl) {</div><div class=\"line\">        apiBaseUrl = newApiBaseUrl;</div><div class=\"line\">        builder = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(apiBaseUrl)</div><div class=\"line\">                .addConverterFactory(ScalarsConverterFactory.create())</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create());</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x65F6;&#x8C03;&#x7528;<code>changeApiBaseUrl</code>&#x65B9;&#x6CD5;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6539;&#x53D8;baseUrl</div><div class=\"line\">ServiceGenerator.changeApiBaseUrl(&quot;https://duoshuo.com&quot;);</div></pre></td></tr></table></figure>\n<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x5F62;&#xFF1A;&#x5C31;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x76F8;&#x540C;&#x7684;<code>url</code>&#x4F8B;&#x5982;<code>https://example.com/ioe/we</code>,&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x6CE8;&#x91CA;<code>@Url</code>,&#x8BE5;&#x6CE8;&#x91CA;&#x4F5C;&#x7528;&#x4E8E;&#x53C2;&#x6570;&#x5B57;&#x6BB5;&#xFF0C;&#x5BF9;&#x8BF7;&#x6C42;&#x65F6;&#x7684;<code>url</code>&#x52A8;&#x6001;&#x8BBE;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET</div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; contributors(@Url String  url);</div></pre></td></tr></table></figure>\n<p>&#x8C03;&#x7528;&#x65F6;&#x76F4;&#x63A5;&#x4F20;&#x9012;<code>url</code>&#x53C2;&#x6570;&#x5373;&#x53EF;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;https://example.com/ioe/we&quot;);</div></pre></td></tr></table></figure>\n<h2 id=\"request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\"><a href=\"#request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\" class=\"headerlink\" title=\"request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;\"></a>request&#x7684;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x4E0E;&#x5206;&#x6790;</h2><p>&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BF7;&#x6C42;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x518D;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>Call</code>&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>clone</code>&#x65B9;&#x6CD5;&#xFF0C;&#x590D;&#x5236;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>Call</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">GithubService service = ServiceGenerator.createService(GithubService.class);</div><div class=\"line\">  </div><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div><div class=\"line\">  </div><div class=\"line\">Callback&lt;ResponseBody&gt; callBack = new Callback&lt;ResponseBody&gt;() {...};</div><div class=\"line\"> </div><div class=\"line\">call.enqueue(callBack);</div><div class=\"line\">//&#x518D;&#x4E00;&#x6B21;&#x8BF7;&#x6C42; </div><div class=\"line\">Call&lt;ResponseBody&gt; newCall = originalCall.clone();</div><div class=\"line\">newCall.enqueue(callBack);</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>Call.request</code>&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x7684;<code>request</code>&#xFF0C;&#x4E0D;&#x7BA1;&#x5B83;&#x662F;&#x5426;&#x6267;&#x884C;&#x5B8C;&#x4E86;&#x8FD8;&#x662F;&#x672A;&#x6267;&#x884C;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x4E86;<code>request.cacel()</code>&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x7684;<code>request</code>&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x7684;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void checkRequestContent(Request request) {  </div><div class=\"line\">    Headers requestHeaders = request.headers();</div><div class=\"line\">    RequestBody requestBody = request.body();</div><div class=\"line\">    HttpUrl requestUrl = request.url();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\"><a href=\"#Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;\"></a>Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</h2><p>&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x4E0A;&#x4F20;<code>Retrofit</code>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>@Multipart</code>&#x8FDB;&#x884C;&#x6807;&#x6CE8;&#x6765;&#x5B9A;&#x4E49;&#x76F8;&#x5173;&#x7684;&#x4E0A;&#x4F20;&#x63A5;&#x53E3;&#xFF0C;&#x4E0B;&#x9762;&#x4EE5;&#x591A;&#x8BF4;&#x7684;&#x5934;&#x50CF;&#x4E0A;&#x4F20;&#x4E3A;&#x4F8B;&#xFF0C;&#x9996;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x4E0A;&#x4F20;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;&#x6293;&#x5305;&#x5206;&#x6790;</p>\n<p><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/1.png\" alt=\"general\"><br><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/2.png\" alt=\"request headers\"><br><img src=\"/2016/11/18/&#x4F7F;&#x7528;Retrofit&#x539F;&#x751F;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;/3.png\" alt=\"request payload\"></p>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x8BF7;&#x6C42;&#x7684;&#x65B9;&#x5F0F;&#x4E3A;<code>post</code>&#xFF0C;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>http://duoshuo.com/api/avatars/upload.json</code>,<code>Content-Type</code>&#x7C7B;&#x578B;&#x4E3A;<code>multipart/form-data</code>&#x8FD9;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x540E;&#x7EED;&#x8981;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x7C7B;&#x578B;,&#x8BF7;&#x6C42;&#x7684;<code>Disposition</code>&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>RequestBody</code>&#x7C7B;&#x578B;&#x7684;<code>nonce</code>&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x4E3A;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x7247;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x90E8;&#x5206;&#x4EE5;<code>MultipartBody.Part</code>&#x5B9A;&#x4E49;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DuoShuoUploadService {</div><div class=\"line\">@Headers(&quot;Cookie: duoshuo_unique=your duoshuo cookie&quot;)</div><div class=\"line\">    @Multipart</div><div class=\"line\">    @POST(&quot;/api/avatars/upload.json&quot;)</div><div class=\"line\">    Call&lt;ResponseBody&gt; uploadService(@Part(&quot;nonce&quot;) RequestBody nonce,</div><div class=\"line\">                                     @Part MultipartBody.Part body);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x6784;&#x9020;&#x6570;&#x636E;&#xFF0C;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x8BF7;&#x6C42;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void getUpdateFile(File file, String nonceString) {</div><div class=\"line\">        // &#x521B;&#x5EFA;&#x4E0A;&#x4F20;&#x7684;Service&#x670D;&#x52A1;&#x7AEF;</div><div class=\"line\">        DuoShuoUploadService uploadService = ServiceGenerator.createService(DuoShuoUploadService.class);</div><div class=\"line\">        // &#x521B;&#x5EFA;nonce&#x6570;&#x636E;&#x7684;RequestBody</div><div class=\"line\">        RequestBody nonce = RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), nonceString);</div><div class=\"line\">        // &#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7684;RequestBody</div><div class=\"line\">        RequestBody requestFile = RequestBody.create(MediaType.parse(&quot;multipart/form-data&quot;), file);</div><div class=\"line\">        // &#x521B;&#x5EFA;MultipartBody.Part</div><div class=\"line\">        MultipartBody.Part body = MultipartBody.Part.createFormData(&quot;image&quot;, file.getName(), requestFile);</div><div class=\"line\">        // &#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;,&#x5E76;&#x6267;&#x884C;&#x8BF7;&#x6C42;</div><div class=\"line\">        Call&lt;ResponseBody&gt; call = uploadService.uploadService(nonce, body);</div><div class=\"line\">        call.enqueue(new Callback&lt;ResponseBody&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {</div><div class=\"line\">                if (response.isSuccessful()) {</div><div class=\"line\">                    Log.v(&quot;TAG&quot;, &quot;success&quot; + &quot;-&gt;&quot; + response.body());</div><div class=\"line\">                } else {</div><div class=\"line\">//                    APIError apiError = ErrorUtils.parseError(response);</div><div class=\"line\">//                    Log.e(&quot;TAG&quot;, apiError.message());</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {</div><div class=\"line\">                Log.e(&quot;TAG&quot;, &quot;error:&quot; + t.getMessage());</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x6709;&#x4E24;&#x70B9;</p>\n<ul>\n<li>&#x5728;&#x521B;&#x5EFA;<code>RequestBody.create</code>&#x65F6;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>Content-Type</code>&#x5373;<code>MediaType</code>&#x7C7B;&#x578B;&#x8981;&#x8BBE;&#x7F6E;&#x4E3A;<code>multipart/form-data</code>&#x8FD9;&#x662F;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#x3002;</li>\n<li><code>MultipartBody.Part.createFormData()</code>&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x524D;&#x9762;&#x56FE;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;<code>Disposition</code>&#x7684;<code>name</code>&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5FC5;&#x987B;&#x76F8;&#x540C;&#x56E0;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x901A;&#x8FC7;&#x8BE5;&#x5B57;&#x6BB5;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5373;&#x4E3A;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x7247;&#x6570;&#x636E;<code>RequestBody</code>&#x7C7B;&#x578B;&#x3002;</li>\n</ul>\n<p>&#x5BF9;&#x4E8E;&#x591A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x6216;&#x8005;&#x591A;&#x4E2A;<code>RequestBody</code>&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x591A;&#x4E2A;<code>MultipartBody.Part</code>&#x7C7B;&#x578B;&#x7684;<code>body</code>&#x4E0E;<code>@PartMap</code>&#x6765;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers(&quot;Cookie: duoshuo_unique=your duoshuo cookie&quot;)</div><div class=\"line\">   @Multipart</div><div class=\"line\">   @POST(&quot;/api/avatars/upload.json&quot;)</div><div class=\"line\">   Call&lt;ResponseBody&gt; uploadMultipleService(@PartMap() Map&lt;String, RequestBody&gt; partMap,</div><div class=\"line\">                                            @Part MultipartBody.Part body1,</div><div class=\"line\">                                            @Part MultipartBody.Part body2);</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x9700;&#x6C42;&#x589E;&#x52A0;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x4E0A;&#x4F20;&#x7684;&#x8FDB;&#x5EA6;&#x6761;&#xFF0C;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;<code>RequestBody</code>&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6709;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x4E0A;&#x4F20;&#xFF0C;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x8D34;&#x4E0B;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ProgressRequestBody extends RequestBody {    </div><div class=\"line\">    public interface OkHttpProgressListener {       </div><div class=\"line\">        void onProgress(long currentBytesCount, long totalBytesCount);    </div><div class=\"line\">    }    </div><div class=\"line\">    //&#x5B9E;&#x9645;&#x7684;&#x5F85;&#x5305;&#x88C5;&#x8BF7;&#x6C42;&#x4F53;    </div><div class=\"line\">    private final RequestBody requestBody;    </div><div class=\"line\">    //&#x8FDB;&#x5EA6;&#x56DE;&#x8C03;&#x63A5;&#x53E3;    </div><div class=\"line\">    private final OkHttpProgressListener progressListener;    </div><div class=\"line\">    //&#x5305;&#x88C5;&#x5B8C;&#x6210;&#x7684;BufferedSink    </div><div class=\"line\">    private BufferedSink bufferedSink;    </div><div class=\"line\">    public ProgressRequestBody(RequestBody requestBody, OkHttpProgressListener progressListener) {        </div><div class=\"line\">        this.requestBody = requestBody;        </div><div class=\"line\">        this.progressListener = progressListener;    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8C03;&#x7528;&#x5B9E;&#x9645;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x7684;contentType     </div><div class=\"line\">      * @return MediaType     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public MediaType contentType() {        </div><div class=\"line\">        return requestBody.contentType();    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8C03;&#x7528;&#x5B9E;&#x9645;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x7684;contentLength     </div><div class=\"line\">      * @return contentLength     </div><div class=\"line\">      * @throws IOException &#x5F02;&#x5E38;     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public long contentLength() throws IOException {        </div><div class=\"line\">        return requestBody.contentLength();    </div><div class=\"line\">    }    </div><div class=\"line\">    /**     </div><div class=\"line\">      * &#x91CD;&#x5199;&#x8FDB;&#x884C;&#x5199;&#x5165;     </div><div class=\"line\">      * @param sink BufferedSink     </div><div class=\"line\">      * @throws IOException &#x5F02;&#x5E38;     </div><div class=\"line\">      */    </div><div class=\"line\">    @Override    </div><div class=\"line\">    public void writeTo(BufferedSink sink) throws IOException {        </div><div class=\"line\">        if (null == bufferedSink) {            </div><div class=\"line\">            bufferedSink = Okio.buffer(sink(sink));        </div><div class=\"line\">        }        </div><div class=\"line\">        requestBody.writeTo(bufferedSink);        </div><div class=\"line\">        //&#x5FC5;&#x987B;&#x8C03;&#x7528;flush&#xFF0C;&#x5426;&#x5219;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x5199;&#x5165;        </div><div class=\"line\">        bufferedSink.flush();    </div><div class=\"line\">     }    </div><div class=\"line\">      /**     </div><div class=\"line\">        * &#x5199;&#x5165;&#xFF0C;&#x56DE;&#x8C03;&#x8FDB;&#x5EA6;&#x63A5;&#x53E3;     </div><div class=\"line\">        * @param sink Sink     </div><div class=\"line\">        * @return Sink     </div><div class=\"line\">        */    </div><div class=\"line\">      private Sink sink(Sink sink) {        </div><div class=\"line\">          return new ForwardingSink(sink) {            </div><div class=\"line\">              //&#x5F53;&#x524D;&#x5199;&#x5165;&#x5B57;&#x8282;&#x6570;            </div><div class=\"line\">              long writtenBytesCount = 0L;            </div><div class=\"line\">              //&#x603B;&#x5B57;&#x8282;&#x957F;&#x5EA6;&#xFF0C;&#x907F;&#x514D;&#x591A;&#x6B21;&#x8C03;&#x7528;contentLength()&#x65B9;&#x6CD5;            </div><div class=\"line\">              long totalBytesCount = 0L;            </div><div class=\"line\">              @Override            </div><div class=\"line\">              public void write(Buffer source, long byteCount) throws IOException {    </div><div class=\"line\">                  super.write(source, byteCount);                </div><div class=\"line\">                  //&#x589E;&#x52A0;&#x5F53;&#x524D;&#x5199;&#x5165;&#x7684;&#x5B57;&#x8282;&#x6570;                </div><div class=\"line\">                  writtenBytesCount += byteCount;                </div><div class=\"line\">                  //&#x83B7;&#x5F97;contentLength&#x7684;&#x503C;&#xFF0C;&#x540E;&#x7EED;&#x4E0D;&#x518D;&#x8C03;&#x7528;                </div><div class=\"line\">                  if (totalBytesCount == 0) {                    </div><div class=\"line\">                      totalBytesCount = contentLength();                </div><div class=\"line\">                  }                </div><div class=\"line\">                   progressListener.onProgress(writtenBytesCount, totalBytesCount);            </div><div class=\"line\">              }        </div><div class=\"line\">          };    </div><div class=\"line\">      }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\"><a href=\"#Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\" class=\"headerlink\" title=\"Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;\"></a>Retrofit&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;</h2><p><code>Retrofit</code>&#x7684;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x4E5F;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x77E5;&#x9053;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;<code>url</code>&#xFF0C;&#x5B9A;&#x5236;&#x76F8;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DownloadFileService {</div><div class=\"line\">    @Streaming</div><div class=\"line\">    @GET</div><div class=\"line\">    Call&lt;ResponseBody&gt; downloadFileWithDynamicUrlSync(@Url String url);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>@Streaming</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x662F;&#x6574;&#x4E2A;&#x4E00;&#x6B21;&#x6027;&#x4FDD;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x8FC7;&#x5927;&#x5F88;&#x5BB9;&#x6613;&#x4EA7;&#x751F;<code>OOM</code>&#x73B0;&#x8C61;&#xFF1B;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5C06;&#x4F1A;&#x6309;&#x6D41;&#x7684;&#x5F62;&#x5F0F;&#x5206;&#x6563;&#x4F20;&#x9012;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x6587;&#x4EF6;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;<code>@Streaming</code></em></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void getDownloadFile(final String filePath) {</div><div class=\"line\">        final DownloadFileService downloadFileService = ServiceGenerator.createService(DownloadFileService.class);</div><div class=\"line\"> </div><div class=\"line\">        Call&lt;ResponseBody&gt; call = downloadFileService.downloadFileWithDynamicUrlSync(filePath);</div><div class=\"line\"></div><div class=\"line\">        call.enqueue(new Callback&lt;ResponseBody&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {</div><div class=\"line\">                if (response.isSuccessful()) {</div><div class=\"line\">                    boolean writeToDisk = WriteToDiskUtils.writeResponseBodyToDiskUtils(MainActivity.this, response.body());</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x4E0B;&#x8F7D;&#x6210;&#x529F;?&quot; + writeToDisk);</div><div class=\"line\">                } else {</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;!&quot;);</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {</div><div class=\"line\">                if (call.isCanceled()) {</div><div class=\"line\">                    Log.d(&quot;TAG&quot;, &quot;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x53D6;&#x6D88;!&quot;);</div><div class=\"line\">                } else {</div><div class=\"line\">                    Log.e(&quot;TAG&quot;, t.getMessage());</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot; service contacted at:&quot; + call.request().url());</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x4F7F;&#x7528;&#x4E86;<code>WriteToDiskUtils.writeResponseBodyToDiskUtils()</code>&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x4E0E;&#x5199;&#x5165;&#xFF0C;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x76F4;&#x63A5;&#x770B;&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WriteToDiskUtils {</div><div class=\"line\"> </div><div class=\"line\">    public static boolean writeResponseBodyToDiskUtils(Context context, ResponseBody body) {</div><div class=\"line\">        File file = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;retrofit/&quot;);</div><div class=\"line\">        InputStream in = null;</div><div class=\"line\">        OutputStream out = null;</div><div class=\"line\">        long fileSize = body.contentLength();</div><div class=\"line\">        int line;</div><div class=\"line\">        long downloadSize = 0;</div><div class=\"line\"> </div><div class=\"line\">        if (!file.exists()){</div><div class=\"line\">            file.mkdirs();</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        File realFile = new File(file,&quot;vso.mp4&quot;);</div><div class=\"line\"> </div><div class=\"line\">        try {</div><div class=\"line\">            in = body.byteStream();</div><div class=\"line\">            out = new FileOutputStream(realFile);</div><div class=\"line\">            byte[] buffer = new byte[4096];</div><div class=\"line\">            while ((line = in.read(buffer)) != -1) {</div><div class=\"line\">                out.write(buffer, 0, line);</div><div class=\"line\">                downloadSize += line;</div><div class=\"line\">                Log.d(&quot;TAG&quot;, &quot;&#x6587;&#x4EF6;&#x603B;&#x7684;&#x5927;&#x5C0F;:&quot; + fileSize + &quot;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;:&quot; + downloadSize);</div><div class=\"line\">            }</div><div class=\"line\">            out.flush();</div><div class=\"line\">            return true;</div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">            return false;</div><div class=\"line\">        } finally {</div><div class=\"line\">            try {</div><div class=\"line\">                if (in != null)</div><div class=\"line\">                    in.close();</div><div class=\"line\">                if (out != null)</div><div class=\"line\">                    out.close();</div><div class=\"line\">            } catch (IOException e) {</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">                return false;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x6B21;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x5427;&#xFF0C;&#x53BB;&#x4F11;&#x606F;&#x4E86;&#x3002;&#x3002;&#x3002;&#x4E0B;&#x6B21;&#x5C06;&#x5BF9;<code>Retrofit</code>&#x4E0E;<code>RXJava</code>&#x7684;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x4ECB;&#x7ECD;</em></p>\n</blockquote>\n"},{"title":"带你走进Retrofit的新世界","url":"https://www.rousetime.com/2016/11/15/带你走进Retrofit的新世界/","content":"<p>&#x5BF9;&#x4E8E;<code>Android</code>&#x6765;&#x8BF4;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x5B9E;&#x73B0;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6CA1;&#x6709;&#x5C01;&#x88C5;&#x7684;<code>HttpUrlConnection</code>&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x7684;&#x4F8B;&#x5982;<code>Volley</code>&#x3001;<code>OkHttp</code>&#xFF0C;&#x8FD9;&#x4E9B;&#x5C01;&#x88C5;&#x597D;&#x7684;&#x5F00;&#x6E90;&#x5E93;&#x4E5F;&#x662F;&#x4E0D;&#x9519;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x8BB2;&#x7684;&#x8BDD;&#x4E5F;&#x53EF;&#x4EE5;&#x5355;&#x72EC;&#x5199;&#x597D;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4E86;&#x89E3;<code>Volley</code>&#x539F;&#x7406;&#x7684;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x8FD9;&#x4E24;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/10/17/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%BA%8C/\" target=\"_blank\" rel=\"external\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E8C;)</a>&#x3002;&#x4F46;&#x662F;&#x4ECA;&#x5929;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x73B0;&#x5728;<code>Android</code>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8FDB;&#x9636;&#x5FC5;&#x5907;&#x7684;&#x7F51;&#x7EDC;&#x5E93;<code>Retrofit</code>&#xFF0C;&#x4E5F;&#x662F;&#x73B0;&#x5728;&#x6700;&#x6D41;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x8FC7;<code>OkHttp</code>&#x90A3;&#x4E48;&#x606D;&#x559C;&#x4F60;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x56E0;&#x4E3A;<code>Retrofit</code>&#x5185;&#x90E8;&#x5C31;&#x662F;&#x4F7F;&#x7528;<code>OkHttp</code>&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x7684;&#x3002;<code>Retrofit</code>&#x505A;&#x7684;&#x53EA;&#x662F;&#x5C01;&#x88C5;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x3001;<code>Header</code>&#x3001;<code>Url</code>&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x4F20;&#x7ED9;<code>OkHttp</code>&#x5B8C;&#x6210;&#x8BF7;&#x6C42;&#xFF0C;&#x8BF7;&#x6C42;&#x5B8C;&#x4E4B;&#x540E;<code>OkHttp</code>&#x5728;&#x4F20;&#x56DE;&#x7ED9;<code>Retrofit</code>&#x3002;&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E0B;<code>Retrofit</code>&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;&#x3002;</p>\n<blockquote>\n<p>&#x672C;&#x7AE0;&#x4ECB;&#x7ECD;&#x7684;&#x90FD;&#x662F;&#x5165;&#x95E8;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x53EA;&#x505A;&#x4E00;&#x4E2A;&#x5F15;&#x5BFC;&#x4F5C;&#x7528;&#xFF0C;&#x5927;&#x795E;&#x8BF7;&#x81EA;&#x52A8;&#x8DF3;&#x8FC7;</p>\n</blockquote>\n<h1 id=\"Retrofit\"><a href=\"#Retrofit\" class=\"headerlink\" title=\"Retrofit\"></a>Retrofit</h1><p>&#x5BF9;&#x4E8E;<code>Retrofit</code>&#x7684;&#x4ECB;&#x7ECD;&#x6211;&#x5F15;&#x7528;&#x5B98;&#x65B9;&#x7684;&#x4E00;&#x53E5;&#x8BDD;<code>Type-safe HTTP client for Android and Java by Square, Inc.</code>&#x7B80;&#x5355;&#x7684;&#x7FFB;&#x8BD1;&#x4E00;&#x4E0B;&#x5C31;&#x662F;&#xFF1A;&#x5BF9;&#x4E8E;<code>Android</code>&#x4E0E;<code>Java</code>&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x7684;<code>Http</code>&#x8BF7;&#x6C42;&#x5E93;&#x3002;&#x5B83;&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x6765;&#x63CF;&#x8FF0;<code>Http</code>&#x8BF7;&#x6C42;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x7279;&#x70B9;&#xFF1A;</p>\n<ul>\n<li>&#x652F;&#x6301;<code>URL</code>&#x53C2;&#x6570;&#x66FF;&#x4EE3;&#x4E0E;<code>query</code>&#x53C2;&#x6570;&#x7684;&#x67E5;&#x8BE2;</li>\n<li>&#x5BF9;&#x4E8E;&#x8BF7;&#x6C42;<code>body</code>&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x6362;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;<code>Json</code>&#x3001;<code>protocol buffers</code>&#xFF09;</li>\n<li>&#x652F;&#x6301;<code>Multipart</code>&#x8BF7;&#x6C42;&#x4E0E;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;</li>\n</ul>\n<h2 id=\"&#x914D;&#x7F6E;\"><a href=\"#&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;\"></a>&#x914D;&#x7F6E;</h2><p>&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x66F4;&#x65B0;&#x5230;<code>Retrofit2</code>&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;<code>Android</code>&#x6765;&#x8BF4;&#x76F4;&#x63A5;&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:retrofit:2.1.0&apos;</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x67E5;&#x770B;<a href=\"https://github.com/square/retrofit\" target=\"_blank\" rel=\"external\">&#x5B98;&#x7F51;</a>&#x914D;&#x7F6E;&#x6700;&#x65B0;&#x7248;&#x672C;,<code>Retrofit</code>&#x9700;&#x8981;&#x7684;<code>Android</code>&#x6700;&#x4F4E;&#x7248;&#x672C;&#x4E3A;<code>2.3</code><br>&#x5BF9;&#x4E8E;<code>Retrofit2</code>&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x914D;&#x7F6E;<code>OkHttp</code>&#x4F9D;&#x8D56;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9ED8;&#x8BA4;&#x4F1A;&#x4E00;&#x8D77;&#x914D;&#x7F6E;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>Retrofit</code>&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;<code>6</code>&#x4E2D;&#x6D41;&#x884C;&#x7684;&#x7C7B;&#x578B;&#x4F9B;&#x9009;&#x62E9;</p>\n<ul>\n<li>Gson: com.squareup.retrofit2:converter-gson</li>\n<li>Jackson: com.squareup.retrofit2:converter-jackson</li>\n<li>Moshi: com.squareup.retrofit2:converter-moshi</li>\n<li>Protobuf: com.squareup.retrofit2:converter-protobuf</li>\n<li>Wire: com.squareup.retrofit2:converter-wire</li>\n<li>Simple XML: com.squareup.retrofit2:converter-simplexml</li>\n<li><p>Scalars (primitives, boxed, and String): com.squareup.retrofit2:converter-scalars</p>\n<p>&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E0E;<code>Retrofit</code>&#x5BF9;&#x4E8E;&#x7684;&#x7248;&#x672C;&#x53F7;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.squareup.retrofit2:converter-gson:2.1.0&apos;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h1><p>&#x524D;&#x9762;&#x8BF4;&#x4E86;<code>Retrofit</code>&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x6765;&#x5B9A;&#x4E49;&#x8BF7;&#x6C42;&#xFF0C;&#x4E14;&#x5B83;&#x5B9A;&#x4E49;&#x7684;&#x6CE8;&#x91CA;&#x662F;&#x5728;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x76F8;&#x5E94;&#x7684;<code>Http</code>&#x6CE8;&#x91CA;&#x4E0E;&#x8BF7;&#x6C42;&#x7684;<code>URL</code>&#x3002;<code>Retrofit</code>&#x652F;&#x6301;<code>5</code>&#x4E2D;&#x5185;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x7684;<code>Http</code>&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#xFF1A;<code>GET</code>&#x3001;<code>POST</code>&#x3001;<code>PUT</code>&#x3001;<code>DELETE</code>&#x4E0E;<code>HEAD</code>&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>\n<p>&#x5B9A;&#x4E49;&#x7684;<code>URL</code>&#x5305;&#x62EC;&#x4E24;&#x90E8;&#x5206;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>host</code>&#x4E5F;&#x79F0;&#x4E3A;<code>baseUrl</code>&#x4F8B;&#x5982;&#xFF1A;<code>https://api.github.com</code>&#xFF0C;&#x522B;&#x4E00;&#x90E8;&#x5206;&#x4E3A;<code>path</code>&#x4F8B;&#x5982;:<code>users/list</code>&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x6CE8;&#x91CA;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;<code>url</code>&#x4E00;&#x822C;&#x4E3A;<code>path</code>&#x90E8;&#x5206;&#x3002;</p>\n<blockquote>\n<p>&#x4EE5;&#x4E0B;&#x7684;&#x4ECB;&#x7ECD;&#x90FD;&#x662F;&#x9488;&#x5BF9;<code>Retrofit2</code>&#x6765;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x4E0E;<code>Retrofit1.9</code>&#x6709;&#x7684;&#x5730;&#x65B9;&#x8FD8;&#x662F;&#x6709;&#x533A;&#x522B;&#x3002;</p>\n</blockquote>\n<h2 id=\"GET\"><a href=\"#GET\" class=\"headerlink\" title=\"GET\"></a>GET</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;users/list&quot;)</div></pre></td></tr></table></figure>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5E26;&#x53C2;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;users/list?sort=desc&quot;)</div></pre></td></tr></table></figure>\n<h2 id=\"Path\"><a href=\"#Path\" class=\"headerlink\" title=\"Path\"></a>Path</h2><p>&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;<code>path</code>&#xFF0C;&#x518D;<code>path</code>&#x4E2D;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>{}</code>&#x6765;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x52A8;&#x6001;&#x66FF;&#x4EE3;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x518D;&#x5230;&#x65B9;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;<code>@Path()</code>&#x6765;&#x5B9A;&#x4E49;&#x66FF;&#x4EE3;&#x7684;&#x53D8;&#x91CF;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{address}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;address&quot;) String address);</div></pre></td></tr></table></figure>\n<p><code>@Path</code>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x5B57;&#x6BB5;<code>encoded</code>&#x9ED8;&#x8BA4;&#x4E3A;<code>false</code>&#xFF0C;&#x5982;&#x679C;&#x4E3A;<code>true</code>&#x5C06;&#x4F1A;&#x5BF9;&#x7279;&#x6B8A;&#x7684;&#x5B57;&#x7B26;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#xFF0C;&#x4F8B;&#x5982;<code>key</code>&#x4E3A;<code>address</code>&#x7684;<code>value</code>&#x4E3A;<code>maer-se</code>,&#x9ED8;&#x8BA4;&#x7F16;&#x7801;&#x7684;<code>url</code>&#x4E3A;<code>group/maer-se/users</code>&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5BF9;<code>encoded</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>true</code>&#x5C06;&#x4F1A;&#x5BF9;<code>-</code>&#x5B57;&#x7B26;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x6700;&#x7EC8;&#x53D8;&#x6210;&#x4E86;<code>group/maer%2Dse/users</code>,&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{address}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(value = &quot;address&quot;, encoded = true) String address);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x540E;&#x7EED;&#x7684;<code>Query</code>&#x3001;<code>QueryMap</code>&#x3001;<code>Part</code>&#x3001;<code>PartMap</code>&#x3001;<code>Field</code>&#x4E0E;<code>FieldMap</code>&#x90FD;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x6027;</p>\n</blockquote>\n<h2 id=\"Query\"><a href=\"#Query\" class=\"headerlink\" title=\"Query\"></a>Query</h2><p>&#x53C2;&#x6570;&#x67E5;&#x8BE2;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>@Query()</code>&#x6765;&#x5B9A;&#x4E49;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">GET(&quot;group/{id}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;id&quot;) int groupId, @Query(&quot;user&quot;) String user,</div><div class=\"line\">@Query(&quot;address&quot;) String address);</div></pre></td></tr></table></figure>\n<h2 id=\"QueryMap\"><a href=\"#QueryMap\" class=\"headerlink\" title=\"QueryMap\"></a>QueryMap</h2><p>&#x5982;&#x679C;&#x53C2;&#x6570;&#x8FC7;&#x591A;&#x53EF;&#x4EE5;&#x501F;&#x52A9;<code>@QueryMap</code> &#x6765;&#x6784;&#x9020;<code>Map</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@GET(&quot;group/{id}/users&quot;)</div><div class=\"line\">Call&lt;List&lt;User&gt;&gt; groupList(@Path(&quot;id&quot;) int groupId, @QueryMap Map&lt;String, String&gt; options);</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x5982;&#x679C;&#x5728;&#x8C03;&#x7528;<code>.groupList</code>&#x65F6;,&#x53EA;&#x8981;&#x53C2;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x4E0D;&#x4E3A;&#x57FA;&#x672C;&#x7C7B;&#x578B;(<code>int</code>&#x3001;<code>double</code>&#x7B49;)&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x57FA;&#x672C;&#x578B;&#x8F6C;&#x6362;&#x4E3A;<code>Integer,Double</code>&#x7B49;&#x65F6;&#x53EF;&#x4EE5;&#x4E3A;<code>null</code>&#xFF0C;&#x5982;&#x679C;&#x4E3A;<code>null</code>&#x90A3;&#x4E48;<code>Retrofit</code>&#x5C06;&#x4F1A;&#x5FFD;&#x7565;&#x4E0D;&#x4F1A;&#x5339;&#x914D;&#x8BE5;&#x53C2;&#x6570;&#x3002;&#x53E6;&#x5916;&#x5728;&#x4F7F;&#x7528;<code>QueryMap</code>&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5339;&#x914D;&#x4F60;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x5FFD;&#x7565;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Map&lt;String, String&gt; data = new HashMap&lt;&gt;();</div><div class=\"line\">    data.put(&quot;user&quot;, &quot;Marcus&quot;);</div><div class=\"line\">    Call&lt;List&lt;User&gt;&gt; call = newsService.groupList(2,data);</div><div class=\"line\">    call.enqueue(&#x2026;)</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x4E3A;<code>https://api.github.com/group/2/users?user=Marcus</code>&#x5BF9;&#x4E8E;<code>address</code>&#x5C06;&#x81EA;&#x52A8;&#x5FFD;&#x7565;&#x3002;</p>\n<blockquote>\n<p>&#x8BF4;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#x8FD8;&#x662F;&#x4EE5;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#x6765;&#x5C55;&#x793A;&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x662F;<code>Github</code>&#x4E0A;&#x7684;</p>\n</blockquote>\n<h2 id=\"&#x793A;&#x4F8B;\"><a href=\"#&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;\"></a>&#x793A;&#x4F8B;</h2><p>&#x5B9A;&#x4E49;&#x63A5;&#x53E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface GithubService {</div><div class=\"line\">    @GET(&quot;/repos/{owner}/{repo}/contributors&quot;)</div><div class=\"line\">    Call&lt;List&lt;Contributors&gt;&gt; contributors(</div><div class=\"line\">            @Path(&quot;owner&quot;) String owner,</div><div class=\"line\">            @Path(&quot;repo&quot;) String repo);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><code>Contributors</code>&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;&#xFF0C;&#x5BF9;&#x5E94;&#x4E8E;&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class Contributors {</div><div class=\"line\">    public String login;</div><div class=\"line\">    public String contributions;</div><div class=\"line\"> </div><div class=\"line\">    public Contributors(String contributions, String login) {</div><div class=\"line\">        this.contributions = contributions;</div><div class=\"line\">        this.login = login;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>Retrofit</code>&#x751F;&#x6210;&#x4F60;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#x662F;<code>Json</code>&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5BF9;<code>body</code>&#x505A;&#x76F8;&#x5E94;&#x7684;&#x8F6C;&#x5316;&#xFF0C;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;<code>Converter</code>&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;<code>Converter</code>&#x5B83;&#x9ED8;&#x8BA4;&#x662F;&#x4F7F;&#x7528;<code>OkHttp</code>&#x7684;<code>ResponseBody</code>&#x4E0E;<code>ResponseBody</code>&#x5BF9;&#x4E8E;&#x540E;&#x7EED;<code>POST</code>&#x8BBE;&#x7F6E;&#x7684;<code>@Body</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;https://api.github.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\"> </div><div class=\"line\">GithubService service = retrofit.create(GithubService.class)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x4F7F;&#x7528;<code>GsonConverterFactory.create()</code>&#x5FC5;&#x987B;&#x5728;<code>Gradle</code>&#x4E2D;&#x914D;&#x7F6E;&#x4E86;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>6</code>&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#x7684;<code>Gson</code></p>\n</blockquote>\n<p>&#x6BCF;&#x4E00;&#x4E2A;<code>Call</code>&#x90FD;&#x662F;&#x6765;&#x81EA;&#x4E8E;&#x521B;&#x5EFA;&#x7684;&#x63A5;&#x53E3;&#x901A;&#x8FC7;&#x540C;&#x6B65;&#x6216;&#x8005;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x800C;&#x83B7;&#x5F97;&#x3002;&#x5728;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#x53EF;&#x4EE5;&#x4F20;&#x5165;&#x5BF9;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Call&lt;List&lt;Contributors&gt;&gt; call = service.contributors(&quot;square&quot;, &quot;retrofit&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x540C;&#x8C03;&#x7528;<code>Call</code>&#x7684;<code>execute</code>&#x6267;&#x884C;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x6216;&#x8005;&#x8C03;&#x7528;<code>Call</code>&#x7684;<code>enqueue</code>&#x6765;&#x6267;&#x884C;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x7684;&#x7ED3;&#x679C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">try {</div><div class=\"line\">            List&lt;Contributors&gt; contributorses = call.execute().body();</div><div class=\"line\">            for (Contributors contributors : contributorses) {</div><div class=\"line\">                Log.v(&quot;TAG&quot;, contributors.login + &quot;(&quot; + contributors.contributions + &quot;)&quot;);</div><div class=\"line\">            }</div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<h2 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h2><p>&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x4F1A;&#x4F5C;&#x4E3A;<code>Http</code>&#x8BF7;&#x6C42;&#x7684;<code>body</code>&#x3002;&#x8FD9;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Body</code>&#x6CE8;&#x91CA;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">@POST(&quot;users/new&quot;)</div><div class=\"line\">Call&lt;User&gt; createUser(@Body User user);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Retrofit</code>&#x7684;<code>converter</code>&#x6765;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x7684;&#x8F6C;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;<code>converter</code>&#x5B83;&#x5C06;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code>RequestBody</code></p>\n<h2 id=\"FormUrlEncoded-And-Multipart\"><a href=\"#FormUrlEncoded-And-Multipart\" class=\"headerlink\" title=\"FormUrlEncoded And Multipart\"></a>FormUrlEncoded And Multipart</h2><p>&#x5BF9;&#x4E8E;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x4E5F;&#x53EF;&#x4EE5;&#x53D1;&#x9001;<code>form-encoded</code>&#x4E0E;<code>multipart</code>&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</p>\n<h3 id=\"Field-And-FiledMap\"><a href=\"#Field-And-FiledMap\" class=\"headerlink\" title=\"Field And FiledMap\"></a>Field And FiledMap</h3><p>&#x5BF9;&#x4E8E;<code>form-encoded</code>&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x822C;<code>Content-type</code>&#x4E3A;<code>x-www-form-urlencoded</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@FormUrlEncoded</code>&#x6765;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x6CE8;&#x91CA;&#x8BF4;&#x660E;&#xFF0C;&#x6BCF;&#x4E00;&#x5BF9;&#x7684;<code>key-value</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Field</code>&#x6765;&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#xFF0C;&#x5206;&#x522B;&#x63D0;&#x4F9B;<code>key</code>&#x4E0E;<code>value</code>&#x3002;&#x5BF9;&#x4E8E;&#x591A;&#x5BF9;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@FieldMap</code>&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;,&#x4F7F;&#x7528;&#x4E0E;<code>@QueryMap</code>&#x7C7B;&#x4F3C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@FormUrlEncoded</div><div class=\"line\">@POST(&quot;user/edit&quot;)</div><div class=\"line\">Call&lt;User&gt; updateUser(@Field(&quot;first_name&quot;) String first, @Field(&quot;last_name&quot;) String last);</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6570;&#x7EC4;&#x6765;&#x5B9A;&#x4E49;&#x5B57;&#x6BB5;&#x7684;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@FormUrlEncoded</div><div class=\"line\">@POST(&quot;tasks&quot;)</div><div class=\"line\">Call&lt;List&lt;Task&gt;&gt; createTasks(@Field(&quot;title&quot;) List&lt;String&gt; titles);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><code>FromUrlEncoded</code>&#x4E0E;<code>Query Parameter</code>&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x662F;&#xFF0C;&#x524D;&#x8005;&#x662F;<code>POST</code>&#x540E;&#x8005;&#x662F;<code>GET</code>&#xFF0C;&#x540C;&#x65F6;&#x524D;&#x8005;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x662F;&#x653E;&#x5728;<code>request body</code>&#x4E2D;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x662F;&#x653E;&#x5728;<code>url</code>&#x4E2D;&#x3002;</p>\n</blockquote>\n<h3 id=\"Part-And-PartMap\"><a href=\"#Part-And-PartMap\" class=\"headerlink\" title=\"Part And PartMap\"></a>Part And PartMap</h3><p>&#x9700;&#x8981;<code>Multipart</code>&#x8BF7;&#x6C42;&#x65F6;&#x5373;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4E00;&#x822C;<code>Content-type</code>&#x4E3A;<code>multipart/form-data</code>,&#x53EA;&#x8981;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x9762;&#x4F7F;&#x7528;<code>@Multipart</code>&#x6CE8;&#x91CA;&#xFF0C;&#x540C;&#x65F6;&#x5BF9;&#x4E8E;<code>Parts</code>&#x90E8;&#x5206;&#x7684;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>@Part</code>&#x6CE8;&#x91CA;&#xFF0C;&#x76F8;&#x5E94;&#x7684;<code>@PartMap</code>&#x4E5F;&#x5B58;&#x5728;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Multipart</div><div class=\"line\">@PUT(&quot;user/photo&quot;)</div><div class=\"line\">Call&lt;User&gt; updateUser(@Part(&quot;photo&quot;) RequestBody photo, </div><div class=\"line\">\t\t\t\t @Part(&quot;description&quot;) RequestBody description);</div></pre></td></tr></table></figure>\n<p><code>Multipart</code>&#x9ED8;&#x8BA4;&#x4E5F;&#x662F;&#x4F7F;&#x7528;<code>RequestBody</code>&#x64CD;&#x4F5C;&#x5B83;&#x7684;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x6216;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>converter</code>&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"Headers-And-Header\"><a href=\"#Headers-And-Header\" class=\"headerlink\" title=\"Headers And Header\"></a>Headers And Header</h2><p><code>@Headers</code>&#x6CE8;&#x91CA;&#x662F;&#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x9759;&#x6001;&#x7684;<code>headers</code>&#xFF0C;&#x4E14;&#x76F8;&#x540C;&#x7684;<code>name</code>&#x4E0D;&#x4F1A;&#x88AB;&#x8986;&#x76D6;&#xFF0C;&#x90FD;&#x4F1A;&#x5305;&#x542B;&#x5230;&#x8BF7;&#x6C42;&#x4E2D;;&#x800C;<code>@Header</code>&#x6CE8;&#x91CA;&#x662F;&#x4E3A;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x52A8;&#x6001;&#x7684;<code>header</code>,&#x5B83;&#x5C06;&#x4F1A;&#x76F8;&#x5F53;&#x4E0E;&#x53C2;&#x6570;&#x6765;&#x5BF9;<code>@Header</code>&#x8FDB;&#x884C;&#x63D0;&#x4F9B;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x503C;&#x4E3A;<code>null</code>&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Headers({&quot;Connection: keep-alive&quot;,</div><div class=\"line\">            &quot;Accept-Language:zh-CN,zh;q=0.8,en;q=0.6&quot;})</div><div class=\"line\">    @GET(&quot;/settings&quot;)</div><div class=\"line\">    Call&lt;String&gt; settingService(@Header(&quot;Cookie&quot;) String cookie);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5982;&#x679C;&#x662F;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;<code>Retrofit2.1</code>,&#x4E5F;&#x652F;&#x6301;<code>@HeaderMap</code></p>\n</blockquote>\n<h2 id=\"&#x793A;&#x4F8B;-1\"><a href=\"#&#x793A;&#x4F8B;-1\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;\"></a>&#x793A;&#x4F8B;</h2><p>&#x518D;&#x6765;&#x8D34;&#x4E00;&#x4E2A;&#x591A;&#x8BF4;&#x6587;&#x7AE0;&#x8BF7;&#x6C42;&#x7684;&#x5B8C;&#x6574;&#x793A;&#x4F8B;&#xFF0C;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x9700;&#x8981;&#x8BF7;&#x6C42;&#x793A;&#x4F8B;&#x8D44;&#x6E90;</p>\n<p><img src=\"/2016/11/15/&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;/1.png\" alt=\"General\"></p>\n<p><img src=\"/2016/11/15/&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;/2.png\" alt=\"Query String Parameters\"></p>\n<p>&#x76F8;&#x4FE1;&#x5E94;&#x8BE5;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x4E3A;<code>GET</code>&#xFF0C;&#x8BF7;&#x6C42;&#x7684;<code>Url</code>&#x4E3A;<code>http://idisfkj.duoshuo.com/api/threads/list.json?short_name=idisfkj&amp;order=desc&amp;limit=30&amp;nonce=57f1b19209428</code>,&#x8BF7;&#x6C42;&#x67E5;&#x8BE2;&#x7684;&#x53C2;&#x6570;&#x4E3A;<code>short_name</code>&#x3001;<code>order</code>&#x3001;<code>limit</code>&#x4E0E;<code>nonce</code>&#xFF0C;<code>Ok</code>&#x9700;&#x8981;&#x77E5;&#x9053;&#x7684;&#x90FD;&#x6709;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6765;<code>code</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface DuoShuoArticleService {</div><div class=\"line\">    @GET(&quot;/api/threads/list.json&quot;)</div><div class=\"line\">    Call&lt;DuoShuoArticle&gt; articleService(@Query(&quot;short_name&quot;) String shortName,</div><div class=\"line\">                                        @Query(&quot;order&quot;) String order,</div><div class=\"line\">                                        @Query(&quot;limit&quot;) int limit,</div><div class=\"line\">                                        @Query(&quot;nonce&quot;) String onnce);</div><div class=\"line\"> </div><div class=\"line\">    @GET(&quot;/api/threads/list.json&quot;)</div><div class=\"line\">    Call&lt;DuoShuoArticle&gt; articleServiceMap(@Query(&quot;limit&quot;) int limit,</div><div class=\"line\">                                           @QueryMap Map&lt;String, String&gt; options);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">   /**</div><div class=\"line\">     * get &#x5BF9;url&#x7684;&#x4F20;&#x53C2;&#x67E5;&#x8BE2;&#x53D1;&#x8D77;&#x8BF7;&#x6C42; &#x8FD4;&#x56DE;json&#x7C7B;&#x578B;&#x7684;response</div><div class=\"line\">     */</div><div class=\"line\">    public void getDuoShuoArticle() {</div><div class=\"line\">        Retrofit retrofit = new Retrofit.Builder()</div><div class=\"line\">                .baseUrl(&quot;http://idisfkj.duoshuo.com&quot;)</div><div class=\"line\">                .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">                .build();</div><div class=\"line\">        DuoShuoArticleService articleService = retrofit.create(DuoShuoArticleService.class);</div><div class=\"line\">        Call&lt;DuoShuoArticle&gt; call = articleService.articleService(&quot;idisfkj&quot;, &quot;desc&quot;, 5, &quot;57f1b19209428&quot;);</div><div class=\"line\"> </div><div class=\"line\">        //&#x4F7F;&#x7528;QueryMap</div><div class=\"line\">//                Map&lt;String,String&gt; map = new HashMap&lt;String, String&gt;();</div><div class=\"line\">//                map.put(&quot;short_name&quot;,&quot;idisfkj&quot;);</div><div class=\"line\">//                map.put(&quot;order&quot;,&quot;desc&quot;);</div><div class=\"line\">//                map.put(&quot;nonce&quot;,&quot;57f1b19209428&quot;);</div><div class=\"line\">//                Call&lt;DuoShuoArticle&gt; call = articleService.articleServiceMap(5,map);</div><div class=\"line\">        try {</div><div class=\"line\">            Response&lt;DuoShuoArticle&gt; response = call.execute();</div><div class=\"line\">            List&lt;DuoShuoArticle.ResponseBean&gt; list = response.body().getResponse();</div><div class=\"line\"> </div><div class=\"line\">            for (DuoShuoArticle.ResponseBean responseBean : list) {</div><div class=\"line\">                Log.v(&quot;TAG&quot;, responseBean.getThread_key() + &quot;-&gt;&quot; + responseBean.getTitle());</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">        } catch (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;&#x5E26;&#x4F60;&#x8D70;&#x8FDB;Retrofit&#x7684;&#x65B0;&#x4E16;&#x754C;</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android &#x81EA;&#x5B9A;&#x4E49;View</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Handler&#x3001;Looper&#x4E0E;MessageQueue&#x6E90;&#x7801;&#x5206;&#x6790;</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E8C;)</div><div class=\"line\">11-16 02:09:43.989 2061-2079/? V/TAG: duoshuo-&gt;Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5982;&#x679C;&#x4F60;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x90A3;&#x4E48;&#x606D;&#x559C;&#x4F60;&#x5BF9;<code>Retrofit</code>&#x4E5F;&#x5165;&#x95E8;&#x4E86;&#xFF0C;&#x540E;&#x7EED;&#x6211;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x63A2;&#x7A76;&#x4E0E;&#x5927;&#x5BB6;&#x8FDB;&#x884C;&#x5206;&#x4EAB;&#x3002;</p>\n</blockquote>\n"},{"title":"Android 自定义View","url":"https://www.rousetime.com/2016/11/13/Android-自定义View/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>Android</code>&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;&#x662F;&#x6211;&#x4EEC;&#x6BCF;&#x4E00;&#x4E2A;<code>Android</code>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x90FD;&#x5FC5;&#x987B;&#x638C;&#x63E1;&#x7684;&#x6280;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x603B;&#x4F1A;&#x9047;&#x5230;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x9700;&#x6C42;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x81EA;&#x5DF1;&#x7684;&#x6280;&#x672F;&#x6C34;&#x5E73;&#xFF0C;&#x81EA;&#x5DF1;&#x5C31;&#x7CFB;&#x7EDF;&#x7684;&#x53BB;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x5199;&#x4E0B;&#x4E00;&#x70B9;&#x5FC3;&#x5F97;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x53CA;&#x65F6;&#x6307;&#x51FA;&#x3002;</p>\n<h1 id=\"&#x6D41;&#x7A0B;\"><a href=\"#&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x6D41;&#x7A0B;\"></a>&#x6D41;&#x7A0B;</h1><p>&#x5728;<code>Android</code>&#x4E2D;&#x5BF9;&#x4E8E;&#x5E03;&#x5C40;&#x7684;&#x8BF7;&#x6C42;&#x7ED8;&#x5236;&#x662F;&#x5728;<code>Android framework</code>&#x5C42;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x7684;&#x3002;&#x7ED8;&#x5236;&#x662F;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x5BF9;&#x5E03;&#x5C40;&#x6811;&#x8FDB;&#x884C;<code>measure</code>&#x4E0E;<code>draw</code>&#x3002;&#x5728;<code>RootViewImpl</code>&#x4E2D;&#x7684;<code>performTraversals</code>&#x5C55;&#x5F00;&#x3002;&#x5B83;&#x6240;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x9700;&#x8981;&#x7684;&#x89C6;&#x56FE;&#x8FDB;&#x884C;<code>measure</code>&#xFF08;&#x6D4B;&#x91CF;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#xFF09;&#x3001;<code>layout</code>&#xFF08;&#x786E;&#x5B9A;&#x89C6;&#x56FE;&#x7684;&#x4F4D;&#x7F6E;&#xFF09;&#x4E0E;<code>draw</code>&#xFF08;&#x7ED8;&#x5236;&#x89C6;&#x56FE;&#xFF09;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5C55;&#x73B0;&#x89C6;&#x56FE;&#x7684;&#x7ED8;&#x5236;&#x6D41;&#x7A0B;&#xFF1A;</p>\n<p><img src=\"https://raw.githubusercontent.com/android-cn/android-open-project-analysis/master/tech/viewdrawflow/image/view_draw_method_chain.png\" alt=\"View&#x7684;&#x7ED8;&#x5236;&#x6D41;&#x7A0B;&#x56FE;\"></p>\n<blockquote>\n<p>&#x5F53;&#x7528;&#x6237;&#x8C03;&#x7528;<code>requestLayout</code>&#x65F6;&#xFF0C;&#x53EA;&#x4F1A;&#x89E6;&#x53D1;<code>measure</code>&#x4E0E;<code>layout</code>&#xFF0C;&#x4F46;&#x7CFB;&#x7EDF;&#x5F00;&#x59CB;&#x8C03;&#x7528;&#x65F6;&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;<code>draw</code></p>\n</blockquote>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x8FD9;&#x51E0;&#x4E2A;&#x6D41;&#x7A0B;&#x3002;</p>\n<h2 id=\"measure\"><a href=\"#measure\" class=\"headerlink\" title=\"measure\"></a>measure</h2><p><code>measure</code>&#x662F;<code>View</code>&#x4E2D;&#x7684;<code>final</code>&#x578B;&#x65B9;&#x6CD5;&#x4E0D;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;&#x5B83;&#x662F;&#x5BF9;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x8BA1;&#x7B97;&#xFF0C;&#x4F46;&#x5B83;&#x4F1A;&#x56DE;&#x8C03;<code>onMeasure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>onMeasure</code>&#x65B9;&#x6CD5;&#x6765;&#x5BF9;<code>View</code>&#x8FDB;&#x884C;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x6D4B;&#x91CF;&#x3002;&#x5B83;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;<code>widthMeasureSpec</code>&#x4E0E;<code>heightMeasureSpec</code>&#x3002;&#x5176;&#x5B9E;&#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x5305;&#x542B;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<code>size</code>&#x4E0E;<code>mode</code>&#x3002;<code>size</code>&#x4E3A;&#x6D4B;&#x91CF;&#x7684;&#x5927;&#x5C0F;&#x800C;<code>mode</code>&#x4E3A;&#x89C6;&#x56FE;&#x5E03;&#x5C40;&#x7684;&#x6A21;&#x5F0F;<br>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x5206;&#x522B;&#x83B7;&#x53D6;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">int widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">int heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">int widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">int heightMode = MeasureSpec.getMode(heightMeasureSpec);</div></pre></td></tr></table></figure>\n<p>&#x83B7;&#x53D6;&#x5230;&#x7684;<code>mode</code>&#x79CD;&#x7C7B;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;</p>\n<table>\n<thead>\n<tr>\n<th>MODE</th>\n<th>EXPLAIN</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>UNSPECIFiED</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x4E0D;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF0C;&#x5B50;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x610F;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x5BF9;<code>ListView</code>&#x3001;<code>ScrollView</code>&#x7B49;&#x8FDB;&#x884C;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x4E00;&#x822C;&#x7528;&#x4E0D;&#x5230;</td>\n</tr>\n<tr>\n<td>EXACTLY</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8BBE;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x7CBE;&#x786E;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x5B50;&#x89C6;&#x56FE;&#x4E0D;&#x8D85;&#x8FC7;&#x8BE5;&#x5C3A;&#x5BF8;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;&#x7CBE;&#x786E;&#x7684;&#x503C;&#x4F8B;&#x5982;<code>200dp</code>&#x6216;&#x8005;&#x4F7F;&#x7528;&#x4E86;<code>match_parent</code></td>\n</tr>\n<tr>\n<td>AT_MOST</td>\n<td>&#x7236;&#x89C6;&#x56FE;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x6307;&#x5B9A;&#x4E86;&#x4E00;&#x6700;&#x5927;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x786E;&#x4FDD;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x6240;&#x4EE5;&#x5185;&#x5BB9;&#x90FD;&#x521A;&#x597D;&#x80FD;&#x5728;&#x8BE5;&#x5C3A;&#x5BF8;&#x4E2D;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;<code>wrap_content</code>,&#x8FD9;&#x79CD;&#x7236;&#x89C6;&#x56FE;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53EA;&#x80FD;&#x7531;&#x5B50;&#x89C6;&#x56FE;&#x81EA;&#x5DF1;&#x53BB;&#x8BA1;&#x7B97;&#x5C3A;&#x5BF8;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x6D4B;&#x91CF;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x903B;&#x8F91;&#x60C5;&#x51B5;</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"setMeasuredDimension\"><a href=\"#setMeasuredDimension\" class=\"headerlink\" title=\"setMeasuredDimension\"></a>setMeasuredDimension</h3><p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x903B;&#x8F91;&#x83B7;&#x53D6;&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x6700;&#x540E;&#x8981;&#x8C03;&#x7528;<code>setMeasuredDimension</code>&#x65B9;&#x6CD5;&#x5C06;&#x6D4B;&#x91CF;&#x597D;&#x7684;&#x5BBD;&#x9AD8;&#x8FDB;&#x884C;&#x4F20;&#x9012;&#x51FA;&#x53BB;&#x3002;&#x5176;&#x5B9E;&#x6700;&#x7EC8;&#x662F;&#x8C03;&#x7528;<code>setMeasuredDimensionRaw</code>&#x65B9;&#x6CD5;&#x5BF9;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x503C;&#x8FDB;&#x884C;&#x5C5E;&#x6027;&#x8D4B;&#x503C;&#x3002;&#x8C03;&#x7528;<code>super.onMeasure()</code>&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;<br>&#x4E0B;&#x9762;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<code>&#x9A8C;&#x8BC1;&#x7801;&#x7684;View</code>&#x4E3A;&#x4F8B;&#xFF0C;&#x5B83;&#x7684;<code>onMeasure</code>&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        int widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        int heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        int widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        int heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\">        if (widthMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            //&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x7CBE;&#x786E;&#x7684;&#x5BBD;&#x5EA6;</div><div class=\"line\">            width = widthSize;</div><div class=\"line\">        } else if (widthMode == MeasureSpec.AT_MOST) {</div><div class=\"line\">            //&#x8BA1;&#x7B97;&#x51FA;&#x5BBD;&#x5EA6;(&#x6587;&#x672C;&#x7684;&#x5BBD;&#x5EA6;+padding&#x7684;&#x5927;&#x5C0F;)</div><div class=\"line\">            width = bounds.width() + getPaddingLeft() + getPaddingRight();</div><div class=\"line\">        }</div><div class=\"line\">        if (heightMode == MeasureSpec.EXACTLY) {</div><div class=\"line\">            //&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x7CBE;&#x786E;&#x7684;&#x9AD8;&#x5EA6;</div><div class=\"line\">            height = heightSize;</div><div class=\"line\">        } else if (heightMode == MeasureSpec.AT_MOST) {</div><div class=\"line\">            //&#x8BA1;&#x7B97;&#x51FA;&#x9AD8;&#x5EA6;(&#x6587;&#x672C;&#x7684;&#x9AD8;&#x5EA6;+padding&#x7684;&#x5927;&#x5C0F;)</div><div class=\"line\">            height = bounds.height() + getPaddingBottom() + getPaddingTop();</div><div class=\"line\">        }</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x83B7;&#x53D6;&#x7684;&#x5BBD;&#x9AD8;</div><div class=\"line\">        setMeasuredDimension(width, height);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x53EF;&#x4EE5;&#x5BF9;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x7684;<code>layout_width</code>&#x4E0E;<code>layout_height</code>&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8FBE;&#x5230;&#x4E0D;&#x540C;&#x7684;<code>mode</code>&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x6548;&#x679C;</p>\n</blockquote>\n<h3 id=\"measureChildren\"><a href=\"#measureChildren\" class=\"headerlink\" title=\"measureChildren\"></a>measureChildren</h3><p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x5BF9;&#x7EE7;&#x627F;<code>ViewGroup</code>&#x7684;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x90A3;&#x4E48;&#x5728;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x81EA;&#x8EAB;&#x7684;&#x5927;&#x5C0F;&#x65F6;&#x8FD8;&#x8981;&#x6D4B;&#x91CF;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4E00;&#x822C;&#x901A;&#x8FC7;<code>measureChildren(int widthMeasureSpec, int heightMeasureSpec)</code>&#x65B9;&#x6CD5;&#x6765;&#x6D4B;&#x91CF;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void measureChildren(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        final int size = mChildrenCount;</div><div class=\"line\">        final View[] children = mChildren;</div><div class=\"line\">        for (int i = 0; i &lt; size; ++i) {</div><div class=\"line\">            final View child = children[i];</div><div class=\"line\">            if ((child.mViewFlags &amp; VISIBILITY_MASK) != GONE) {</div><div class=\"line\">                measureChild(child, widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5B83;&#x5176;&#x5B9E;&#x662F;&#x904D;&#x5386;&#x6BCF;&#x4E00;&#x4E2A;&#x5B50;&#x89C6;&#x56FE;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x5B50;&#x89C6;&#x56FE;&#x4E0D;&#x662F;&#x9690;&#x85CF;&#x7684;&#x5C31;&#x8C03;&#x7528;<code>measureChild</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x6765;&#x770B;&#x4E0B;<code>measureChild</code>&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void measureChild(View child, int parentWidthMeasureSpec,</div><div class=\"line\">            int parentHeightMeasureSpec) {</div><div class=\"line\">        final LayoutParams lp = child.getLayoutParams();</div><div class=\"line\">        final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,</div><div class=\"line\">                mPaddingLeft + mPaddingRight, lp.width);</div><div class=\"line\">        final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,</div><div class=\"line\">                mPaddingTop + mPaddingBottom, lp.height);</div><div class=\"line\">        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x9996;&#x5148;&#x8C03;&#x7528;&#x4E86;<code>getChildMeasureSpec</code>&#x65B9;&#x6CD5;&#x6765;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x5BBD;&#x9AD8;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>View</code>&#x7684;<code>measure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x7684;&#x5206;&#x6790;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5B83;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x89C6;&#x56FE;&#x5927;&#x5C0F;&#x7684;&#x8BA1;&#x7B97;&#x3002;&#x800C;&#x5BF9;&#x4E8E;<code>measure</code>&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x662F;&#x901A;&#x8FC7;<code>getChildMeasureSpec</code>&#x83B7;&#x53D6;&#xFF0C;&#x518D;&#x6765;&#x770B;&#x4E0B;&#x5176;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static int getChildMeasureSpec(int spec, int padding, int childDimension) {</div><div class=\"line\">        int specMode = MeasureSpec.getMode(spec);</div><div class=\"line\">        int specSize = MeasureSpec.getSize(spec);</div><div class=\"line\"> </div><div class=\"line\">        int size = Math.max(0, specSize - padding);</div><div class=\"line\"> </div><div class=\"line\">        int resultSize = 0;</div><div class=\"line\">        int resultMode = 0;</div><div class=\"line\"> </div><div class=\"line\">        switch (specMode) {</div><div class=\"line\">        // Parent has imposed an exact size on us</div><div class=\"line\">        case MeasureSpec.EXACTLY:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size. So be it.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size. It can&apos;t be</div><div class=\"line\">                // bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\"> </div><div class=\"line\">        // Parent has imposed a maximum size on us</div><div class=\"line\">        case MeasureSpec.AT_MOST:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                // Child wants a specific size... so be it</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size, but our size is not fixed.</div><div class=\"line\">                // Constrain child to not be bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size. It can&apos;t be</div><div class=\"line\">                // bigger than us.</div><div class=\"line\">                resultSize = size;</div><div class=\"line\">                resultMode = MeasureSpec.AT_MOST;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\"> </div><div class=\"line\">        // Parent asked to see how big we want to be</div><div class=\"line\">        case MeasureSpec.UNSPECIFIED:</div><div class=\"line\">            if (childDimension &gt;= 0) {</div><div class=\"line\">                // Child wants a specific size... let him have it</div><div class=\"line\">                resultSize = childDimension;</div><div class=\"line\">                resultMode = MeasureSpec.EXACTLY;</div><div class=\"line\">            } else if (childDimension == LayoutParams.MATCH_PARENT) {</div><div class=\"line\">                // Child wants to be our size... find out how big it should</div><div class=\"line\">                // be</div><div class=\"line\">                resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;</div><div class=\"line\">                resultMode = MeasureSpec.UNSPECIFIED;</div><div class=\"line\">            } else if (childDimension == LayoutParams.WRAP_CONTENT) {</div><div class=\"line\">                // Child wants to determine its own size.... find out how</div><div class=\"line\">                // big it should be</div><div class=\"line\">                resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size;</div><div class=\"line\">                resultMode = MeasureSpec.UNSPECIFIED;</div><div class=\"line\">            }</div><div class=\"line\">            break;</div><div class=\"line\">        }</div><div class=\"line\">        //noinspection ResourceType</div><div class=\"line\">        return MeasureSpec.makeMeasureSpec(resultSize, resultMode);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x662F;&#x4E0D;&#x662F;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x4E86;&#x70B9;&#x5462;&#x3002;&#x5B83;&#x505A;&#x7684;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x6839;&#x636E;<code>mode</code>&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x83B7;&#x53D6;&#x76F8;&#x5E94;&#x7684;<code>size</code>&#x3002;&#x6839;&#x636E;&#x7236;&#x89C6;&#x56FE;&#x7684;<code>mode</code>&#x7C7B;&#x578B;&#x4E0E;&#x5B50;&#x89C6;&#x56FE;&#x7684;<code>LayoutParams</code>&#x7C7B;&#x578B;&#x6765;&#x51B3;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x6240;&#x5C5E;&#x7684;<code>mode</code>,&#x6700;&#x540E;&#x518D;&#x5C06;&#x83B7;&#x53D6;&#x7684;<code>size</code>&#x4E0E;<code>mode</code>&#x901A;&#x8FC7;<code>MeasureSpec.makeMeasureSpec</code>&#x65B9;&#x6CD5;&#x6574;&#x5408;&#x8FD4;&#x56DE;&#x3002;&#x6700;&#x540E;&#x4F20;&#x9012;&#x5230;<code>measure</code>&#x4E2D;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>widthMeasureSpec</code>&#x4E0E;<code>heightMeasureSpec</code>&#x4E2D;&#x5305;&#x542B;&#x7684;&#x4E24;&#x90E8;&#x5206;&#x7684;&#x503C;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E3A;<code>measureChildren</code>-&gt;<code>measureChild</code>-&gt;<code>getChildMeasureSpec</code>-&gt;<code>measure</code>-&gt;<code>onMeasure</code>-&gt;<code>setMeasuredDimension</code>,&#x6240;&#x4EE5;&#x901A;&#x8FC7;<code>measureChildren</code>&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x8BA1;&#x7B97;&#x3002;</p>\n<h2 id=\"layout\"><a href=\"#layout\" class=\"headerlink\" title=\"layout\"></a>layout</h2><p><code>layout</code>&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x5185;&#x90E8;&#x4F1A;&#x56DE;&#x8C03;<code>onLayout</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x662F;&#x7528;&#x6765;&#x786E;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x7684;&#x7ED8;&#x5236;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F46;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;<code>ViewGroup</code>&#x4E2D;&#x662F;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>View</code>&#x662F;&#x7EE7;&#x627F;<code>ViewGroup</code>&#x7684;&#x8BDD;&#x5C31;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x4F46;&#x5982;&#x679C;&#x662F;&#x7EE7;&#x627F;<code>View</code>&#x7684;&#x8BDD;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#xFF0C;<code>View</code>&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x5B9E;&#x73B0;&#x3002;&#x800C;&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x4F4D;&#x7F6E;&#x7684;&#x8BBE;&#x7F6E;&#x662F;&#x901A;&#x8FC7;<code>View</code>&#x7684;<code>layout</code>&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x4F20;&#x9012;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;<code>left</code>&#x3001;<code>top</code>&#x3001;<code>right</code>&#x4E0E;<code>bottom</code>&#x503C;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x503C;&#x4E00;&#x822C;&#x90FD;&#x8981;&#x501F;&#x52A9;<code>View</code>&#x7684;&#x5BBD;&#x9AD8;&#x6765;&#x8BA1;&#x7B97;,&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>getMeasureWidth</code>&#x4E0E;<code>getMeasureHeight</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x7684;&#x503C;&#x5C31;&#x662F;&#x4E0A;&#x9762;<code>onMeasure</code>&#x4E2D;<code>setMeasuredDimension</code>&#x4F20;&#x9012;&#x7684;&#x503C;&#xFF0C;&#x5373;&#x5B50;&#x89C6;&#x56FE;&#x6D4B;&#x91CF;&#x7684;&#x5BBD;&#x9AD8;&#x3002;</p>\n<blockquote>\n<p><code>getWidth</code>&#x3001;<code>getHeight</code>&#x4E0E;<code>getMeasureWidth</code>&#x3001;<code>getMeasureHeight</code>&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x5728;<code>onLayout</code>&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x503C;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<code>left</code>-<code>right</code>&#x4E0E;<code>top</code>-<code>bottom</code>&#xFF1B;&#x800C;&#x540E;&#x8005;&#x662F;&#x5728;<code>onMeasure</code>&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x503C;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E24;&#x79CD;&#x83B7;&#x53D6;&#x7684;&#x503C;<code>&#x4E00;&#x822C;</code>&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x6CE8;&#x610F;&#x8C03;&#x7528;&#x7684;<code>&#x65F6;&#x673A;</code>&#x3002;</p>\n</blockquote>\n<p>&#x4E0B;&#x9762;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x628A;&#x5B50;&#x89C6;&#x56FE;&#x653E;&#x7F6E;&#x4E8E;&#x7236;&#x89C6;&#x56FE;&#x7684;&#x56DB;&#x4E2A;&#x89D2;&#x7684;<code>View</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onLayout(boolean changed, int l, int t, int r, int b) {</div><div class=\"line\">        int count = getChildCount();</div><div class=\"line\">        MarginLayoutParams params;</div><div class=\"line\">        </div><div class=\"line\">        int cl;</div><div class=\"line\">        int ct;</div><div class=\"line\">        int cr;</div><div class=\"line\">        int cb;</div><div class=\"line\">            </div><div class=\"line\">        for (int i = 0; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">                </div><div class=\"line\">            if (i == 0) {</div><div class=\"line\">                //&#x5DE6;&#x4E0A;&#x89D2;</div><div class=\"line\">                cl = params.leftMargin;</div><div class=\"line\">                ct = params.topMargin;</div><div class=\"line\">            } else if (i == 1) {</div><div class=\"line\">                //&#x53F3;&#x4E0A;&#x89D2;</div><div class=\"line\">                cl = getMeasuredWidth() - params.rightMargin - child.getMeasuredWidth();</div><div class=\"line\">                ct = params.topMargin;</div><div class=\"line\">            } else if (i == 2) {</div><div class=\"line\">                //&#x5DE6;&#x4E0B;&#x89D2;</div><div class=\"line\">                cl = params.leftMargin;</div><div class=\"line\">                ct = getMeasuredHeight() - params.bottomMargin - child.getMeasuredHeight()</div><div class=\"line\">                 - params.topMargin;</div><div class=\"line\">            } else {</div><div class=\"line\">                //&#x53F3;&#x4E0B;&#x89D2;</div><div class=\"line\">                cl = getMeasuredWidth() - params.rightMargin - child.getMeasuredWidth();</div><div class=\"line\">                ct = getMeasuredHeight() - params.bottomMargin - child.getMeasuredHeight()</div><div class=\"line\">                 - params.topMargin;</div><div class=\"line\">            }</div><div class=\"line\">            cr = cl + child.getMeasuredWidth();</div><div class=\"line\">            cb = ct + child.getMeasuredHeight();</div><div class=\"line\">            //&#x786E;&#x5B9A;&#x5B50;&#x89C6;&#x56FE;&#x5728;&#x7236;&#x89C6;&#x56FE;&#x4E2D;&#x653E;&#x7F6E;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">            child.layout(cl, ct, cr, cb);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x81F3;&#x4E8E;<code>onMeasure</code>&#x7684;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#x6211;&#x540E;&#x9762;&#x4F1A;&#x7ED9;&#x94FE;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x770B;&#x6548;&#x679C;&#x56FE;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x540E;&#x9762;&#x4E5F;&#x4F1A;&#x8D34;&#x51FA;&#x6765;&#xFF0C;&#x524D;&#x9762;&#x7684;&#x90A3;&#x4E2A;&#x9A8C;&#x8BC1;&#x7801;&#x7684;&#x4E5F;&#x662F;&#x4E00;&#x6837;</p>\n</blockquote>\n<h2 id=\"draw\"><a href=\"#draw\" class=\"headerlink\" title=\"draw\"></a>draw</h2><p><code>draw</code>&#x662F;&#x7531;<code>dispatchDraw</code>&#x53D1;&#x52A8;&#x7684;&#xFF0C;<code>dispatchDraw</code>&#x662F;<code>ViewGroup</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;<code>View</code>&#x662F;&#x7A7A;&#x5B9E;&#x73B0;&#x3002;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x7BA1;&#x7406;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x800C;<code>draw</code>&#x65B9;&#x6CD5;&#x53EA;&#x5728;<code>View</code>&#x4E2D;&#x5B58;&#x5728;&#xFF0C;<code>ViewGoup</code>&#x505A;&#x7684;&#x53EA;&#x662F;&#x5728;<code>dispatchDraw</code>&#x4E2D;&#x8C03;&#x7528;<code>drawChild</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;<code>drawChild</code>&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>View</code>&#x7684;<code>draw</code>&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<code>draw</code>&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void draw(Canvas canvas) {</div><div class=\"line\">        final int privateFlags = mPrivateFlags;</div><div class=\"line\">        final boolean dirtyOpaque = (privateFlags &amp; PFLAG_DIRTY_MASK) == PFLAG_DIRTY_OPAQUE &amp;&amp;</div><div class=\"line\">                (mAttachInfo == null || !mAttachInfo.mIgnoreDirtyState);</div><div class=\"line\">        mPrivateFlags = (privateFlags &amp; ~PFLAG_DIRTY_MASK) | PFLAG_DRAWN;</div><div class=\"line\">         </div><div class=\"line\">        /*</div><div class=\"line\">         * Draw traversal performs several drawing steps which must be executed</div><div class=\"line\">         * in the appropriate order:</div><div class=\"line\">         *</div><div class=\"line\">         *      1. Draw the background</div><div class=\"line\">         *      2. If necessary, save the canvas&apos; layers to prepare for fading</div><div class=\"line\">         *      3. Draw view&apos;s content</div><div class=\"line\">         *      4. Draw children</div><div class=\"line\">         *      5. If necessary, draw the fading edges and restore layers</div><div class=\"line\">         *      6. Draw decorations (scrollbars for instance)</div><div class=\"line\">         */</div><div class=\"line\">          </div><div class=\"line\">        // Step 1, draw the background, if needed</div><div class=\"line\">        int saveCount;</div><div class=\"line\"> </div><div class=\"line\">        if (!dirtyOpaque) {</div><div class=\"line\">            drawBackground(canvas);</div><div class=\"line\">        }</div><div class=\"line\">         </div><div class=\"line\">        // skip step 2 &amp; 5 if possible (common case)</div><div class=\"line\">        final int viewFlags = mViewFlags;</div><div class=\"line\">        boolean horizontalEdges = (viewFlags &amp; FADING_EDGE_HORIZONTAL) != 0;</div><div class=\"line\">        boolean verticalEdges = (viewFlags &amp; FADING_EDGE_VERTICAL) != 0;</div><div class=\"line\">        if (!verticalEdges &amp;&amp; !horizontalEdges) {</div><div class=\"line\">            // Step 3, draw the content</div><div class=\"line\">            if (!dirtyOpaque) onDraw(canvas);</div><div class=\"line\">             </div><div class=\"line\">            // Step 4, draw the children</div><div class=\"line\">            dispatchDraw(canvas);</div><div class=\"line\">             </div><div class=\"line\">            // Overlay is part of the content and draws beneath Foreground</div><div class=\"line\">            if (mOverlay != null &amp;&amp; !mOverlay.isEmpty()) {</div><div class=\"line\">                            mOverlay.getOverlayView().dispatchDraw(canvas);</div><div class=\"line\">            }</div><div class=\"line\">                         </div><div class=\"line\">            // Step 6, draw decorations (foreground, scrollbars)</div><div class=\"line\">            onDrawForeground(canvas);</div><div class=\"line\">                       </div><div class=\"line\">            // we&apos;re done...</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">        //&#x7701;&#x7565;2&amp;5&#x7684;&#x60C5;&#x51B5;</div><div class=\"line\">        ....</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6E90;&#x7801;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x6E05;&#x6670;&#x4E86;<code>draw</code>&#x603B;&#x5171;&#x5206;&#x4E3A;6&#x6B65;&#xFF1B;</p>\n<ul>\n<li>&#x7ED8;&#x5236;&#x80CC;&#x666F;</li>\n<li>&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x4FDD;&#x5B58;<code>layers</code></li>\n<li>&#x7ED8;&#x5236;&#x81EA;&#x8EAB;&#x6587;&#x672C;</li>\n<li>&#x7ED8;&#x5236;&#x5B50;&#x89C6;&#x56FE;</li>\n<li>&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x7ED8;&#x5236;<code>fading edges</code></li>\n<li>&#x7ED8;&#x5236;<code>scrollbars</code></li>\n</ul>\n<p>&#x5176;&#x4E2D;    &#x7B2C;<code>2</code>&#x6B65;&#x4E0E;&#x7B2C;<code>5</code>&#x6B65;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x5728;&#x7B2C;<code>3</code>&#x6B65;&#x8C03;&#x7528;&#x4E86;<code>onDraw</code>&#x65B9;&#x6CD5;&#x6765;&#x7ED8;&#x5236;&#x81EA;&#x8EAB;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5728;<code>View</code>&#x4E2D;&#x662F;&#x7A7A;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x5FC5;&#x987B;&#x8981;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x7B2C;<code>4</code>&#x6B65;&#x8C03;&#x7528;&#x4E86;<code>dispatchDraw</code>&#x5BF9;&#x5B50;&#x89C6;&#x56FE;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#x3002;&#x8FD8;&#x662F;&#x4EE5;<code>&#x9A8C;&#x8BC1;&#x7801;</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onDraw(Canvas canvas) {</div><div class=\"line\">        //&#x7ED8;&#x5236;&#x80CC;&#x666F;</div><div class=\"line\">        mPaint.setColor(getResources().getColor(R.color.autoCodeBg));</div><div class=\"line\">        canvas.drawRect(0, 0, getMeasuredWidth(), getMeasuredHeight(), mPaint);</div><div class=\"line\"></div><div class=\"line\">        mPaint.getTextBounds(autoText, 0, autoText.length(), bounds);</div><div class=\"line\">        //&#x7ED8;&#x5236;&#x6587;&#x672C;</div><div class=\"line\">        for (int i = 0; i &lt; autoText.length(); i++) {</div><div class=\"line\">             mPaint.setColor(getResources().getColor(colorRes[random.nextInt(6)]));</div><div class=\"line\">            canvas.drawText(autoText, i, i + 1, getWidth() / 2 - bounds.width() / 2 + i * bounds.width() / autoNum</div><div class=\"line\">                    , bounds.height() + random.nextInt(getHeight() - bounds.height())</div><div class=\"line\">                    , mPaint);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x7ED8;&#x5236;&#x5E72;&#x6270;&#x70B9;</div><div class=\"line\">        for (int j = 0; j &lt; 250; j++) {</div><div class=\"line\">             canvas.drawPoint(random.nextInt(getWidth()), random.nextInt(getHeight()), pointPaint);</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        //&#x7ED8;&#x5236;&#x5E72;&#x6270;&#x7EBF;</div><div class=\"line\">        for (int k = 0; k &lt; 20; k++) {</div><div class=\"line\">            int startX = random.nextInt(getWidth());</div><div class=\"line\">            int startY = random.nextInt(getHeight());</div><div class=\"line\">            int stopX = startX + random.nextInt(getWidth() - startX);</div><div class=\"line\">            int stopY = startY + random.nextInt(getHeight() - startY);</div><div class=\"line\">             linePaint.setColor(getResources().getColor(colorRes[random.nextInt(6)]));</div><div class=\"line\">            canvas.drawLine(startX, startY, stopX, stopY, linePaint);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p>&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E9B;&#x7ED8;&#x5236;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x597D;&#x4E86;&#x57FA;&#x672C;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x4E0A;&#x4F20;&#x4E00;&#x5F20;&#x793A;&#x4F8B;&#x7684;&#x6548;&#x679C;&#x56FE;&#xFF0C;&#x4E0E;&#x6E90;&#x7801;&#x94FE;&#x63A5;</p>\n</blockquote>\n<h1 id=\"&#x793A;&#x4F8B;&#x56FE;\"><a href=\"#&#x793A;&#x4F8B;&#x56FE;\" class=\"headerlink\" title=\"&#x793A;&#x4F8B;&#x56FE;\"></a>&#x793A;&#x4F8B;&#x56FE;</h1><p><img src=\"/2016/11/13/Android-&#x81EA;&#x5B9A;&#x4E49;View/custom.gif\" alt=\"&#x793A;&#x4F8B;&#x56FE;\"></p>\n<blockquote>\n<p>&#x5BF9;&#x4E86;&#x8FD8;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;&#x3002;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x65F6;&#x4E00;&#x822C;&#x90FD;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x4F1A;&#x5728;<code>res/values/attr.xml</code>&#x4E2D;&#x5B9A;&#x4E49;<code>attr</code>&#x4E0E;<code>declare-styleable</code>,&#x6700;&#x540E;&#x5728;&#x81EA;&#x5B9A;&#x4E49;<code>View</code>&#x4E2D;&#x901A;&#x8FC7;<code>TypedArray</code>&#x83B7;&#x53D6;&#x3002;</p>\n</blockquote>\n<p>&#x793A;&#x4F8B;&#x6E90;&#x7801;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/CustomViewOrViewGroup\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/CustomViewOrViewGroup</a></p>\n"},{"title":"Handler、Looper与MessageQueue源码分析","url":"https://www.rousetime.com/2016/10/19/Android-Handler、Looper与MessageQueue源码分析/","content":"<p>&#x5728;<code>Android</code>&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>Handler</code>&#x6765;&#x66F4;&#x65B0;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;<code>UI</code>&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x66F4;&#x65B0;<code>UI</code>&#x53EA;&#x80FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF0C;&#x800C;&#x4E3A;&#x4E86;&#x8BA9;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E5F;&#x80FD;&#x63A7;&#x5236;<code>UI</code>&#x7684;&#x53D8;&#x5316;&#xFF0C;<code>Android</code>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x673A;&#x5236;<code>Handler</code>&#x3001;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x4E00;&#x540C;&#x534F;&#x4F5C;&#x6765;&#x8FBE;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0;<code>UI</code>&#x7684;&#x76EE;&#x7684;&#x3002;</p>\n<p>&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<code>Handler</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Handler mHandler = new Handler() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void handleMessage(Message msg) {</div><div class=\"line\">            tv.setText(&quot;mHandler change UI&quot;);</div><div class=\"line\">            super.handleMessage(msg);</div><div class=\"line\">        }</div><div class=\"line\">    };</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x822C;&#x90FD;&#x89C1;&#x4E0D;&#x5230;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8C03;&#x7528;&#x4E0E;&#x5982;&#x4F55;&#x534F;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x663E;&#x5F0F;&#x7684;&#x8C03;&#x7528;<code>Looper</code>&#x800C;&#x662F;&#x4F1A;&#x5728;<code>ActivityThread.main</code>&#x65B9;&#x6CD5;&#x4E2D;&#x9ED8;&#x8BA4;&#x8C03;&#x7528;&#x3002;</p>\n<h1 id=\"ActivityThread-main\"><a href=\"#ActivityThread-main\" class=\"headerlink\" title=\"ActivityThread.main\"></a>ActivityThread.main</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void main(String[] args) {</div><div class=\"line\">         Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;ActivityThreadMain&quot;);</div><div class=\"line\">        SamplingProfilerIntegration.start();</div><div class=\"line\"> </div><div class=\"line\">        // CloseGuard defaults to true and can be quite spammy.  We</div><div class=\"line\">        // disable it here, but selectively enable it later (via</div><div class=\"line\">        // StrictMode) on debug builds, but using DropBox, not logs.</div><div class=\"line\">        CloseGuard.setEnabled(false);</div><div class=\"line\"> </div><div class=\"line\">        Environment.initForCurrentUser();</div><div class=\"line\"> </div><div class=\"line\">        // Set the reporter for event logging in libcore</div><div class=\"line\">        EventLogger.setReporter(new EventLoggingReporter());</div><div class=\"line\"> </div><div class=\"line\">        // Make sure TrustedCertificateStore looks in the right place for CA certificates</div><div class=\"line\">        final File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId());</div><div class=\"line\">         TrustedCertificateStore.setDefaultUserDirectory(configDir);</div><div class=\"line\"> </div><div class=\"line\">        Process.setArgV0(&quot;&lt;pre-initialized&gt;&quot;);</div><div class=\"line\"> </div><div class=\"line\">        Looper.prepareMainLooper();//&#x521B;&#x5EFA;Looper</div><div class=\"line\"> </div><div class=\"line\">        ActivityThread thread = new ActivityThread();</div><div class=\"line\">        thread.attach(false);</div><div class=\"line\"> </div><div class=\"line\">        if (sMainThreadHandler == null) {</div><div class=\"line\">            sMainThreadHandler = thread.getHandler();</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        if (false) {</div><div class=\"line\">            Looper.myLooper().setMessageLogging(new</div><div class=\"line\">                    LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;));</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        // End of event ActivityThreadMain.</div><div class=\"line\">         Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class=\"line\">        Looper.loop();//&#x5F00;&#x542F;Looper&#x5FAA;&#x73AF;</div><div class=\"line\"> </div><div class=\"line\">        throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x8C03;&#x7528;&#x4E86;<code>Looper.prepareMainLooper()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x4E0D;&#x4FE1;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x518D;&#x67E5;&#x770B;&#x8BE5;&#x65B9;&#x6CD5;&#x505A;&#x4E86;&#x4EC0;&#x4E48;</p>\n<h1 id=\"Looper\"><a href=\"#Looper\" class=\"headerlink\" title=\"Looper\"></a>Looper</h1><h2 id=\"prepare\"><a href=\"#prepare\" class=\"headerlink\" title=\"prepare\"></a>prepare</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void prepare() {</div><div class=\"line\">        prepare(true);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    private static void prepare(boolean quitAllowed) {</div><div class=\"line\">        if (sThreadLocal.get() != null) {</div><div class=\"line\">            throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        sThreadLocal.set(new Looper(quitAllowed));//&#x521B;&#x5EFA;Looper&#x5E76;&#x8D4B;&#x7ED9;sThreadLocal</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    /**</div><div class=\"line\">     * Initialize the current thread as a looper, marking it as an</div><div class=\"line\">     * application&apos;s main looper. The main looper for your application</div><div class=\"line\">     * is created by the Android environment, so you should never need</div><div class=\"line\">     * to call this function yourself.  See also: {@link #prepare()}</div><div class=\"line\">     */</div><div class=\"line\">    public static void prepareMainLooper() {</div><div class=\"line\">        prepare(false);</div><div class=\"line\">        synchronized (Looper.class) {</div><div class=\"line\">            if (sMainLooper != null) {</div><div class=\"line\">                throw new IllegalStateException(&quot;The main Looper has already been prepared.&quot;);</div><div class=\"line\">            }</div><div class=\"line\">            sMainLooper = myLooper();</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">     </div><div class=\"line\">    public static @Nullable Looper myLooper() {</div><div class=\"line\">        return sThreadLocal.get();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>prepareMainLooper</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x4E86;<code>prepare</code>&#x800C;&#x901A;&#x8FC7;<code>prepare</code>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x5E76;&#x628A;&#x5B83;&#x8D4B;&#x7ED9;&#x4E86;<code>sThreadLocal</code>&#x3002;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>myLooper</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;<code>Looper</code>&#x3002;&#x518D;&#x6765;&#x770B;&#x4E0B;<code>new Looper(quitAllowed)</code>&#x521D;&#x59CB;&#x5316;&#x4E86;&#x4EC0;&#x4E48;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">private Looper(boolean quitAllowed) {</div><div class=\"line\">        mQueue = new MessageQueue(quitAllowed);</div><div class=\"line\">        mThread = Thread.currentThread();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7EC8;&#x4E8E;&#x770B;&#x5230;&#x4E86;<code>MessageQueue</code>&#x4E86;&#xFF0C;&#x5B83;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>MessageQueue</code>&#x3002;&#x8BE5;&#x6D88;&#x606F;&#x961F;&#x5217;&#x5C31;&#x662F;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x540E;&#x7EED;&#x7684;<code>Message</code>&#x3002;&#x518D;&#x56DE;&#x5230;<code>ActivityThread.main</code>&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x8C03;&#x7528;&#x4E86;<code>Looper.loop()</code>&#x662F;&#x7528;&#x6765;&#x5F00;&#x542F;<code>Looper</code>&#x5FAA;&#x73AF;&#x7684;&#xFF0C;&#x76D1;&#x542C;&#x6D88;&#x606F;&#x961F;&#x5217;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x3002;</p>\n<h2 id=\"loop\"><a href=\"#loop\" class=\"headerlink\" title=\"loop\"></a>loop</h2><p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;<code>Looper.loop()</code>&#x7684;&#x6E90;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void loop() {</div><div class=\"line\">        final Looper me = myLooper();//&#x83B7;&#x53D6;Looper</div><div class=\"line\">        if (me == null) {</div><div class=\"line\">            throw new RuntimeException(&quot;No Looper; Looper.prepare() wasn&apos;t called on this thread.&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        final MessageQueue queue = me.mQueue;//&#x83B7;&#x53D6;&#x6D88;&#x606F;&#x961F;&#x5217;</div><div class=\"line\"> </div><div class=\"line\">        // Make sure the identity of this thread is that of the local process,</div><div class=\"line\">        // and keep track of what that identity token actually is.</div><div class=\"line\">        Binder.clearCallingIdentity();</div><div class=\"line\">        final long ident = Binder.clearCallingIdentity();</div><div class=\"line\"> </div><div class=\"line\">        for (;;) {        </div><div class=\"line\">            Message msg = queue.next(); // might block</div><div class=\"line\">            if (msg == null) {</div><div class=\"line\">                // No message indicates that the message queue is quitting.</div><div class=\"line\">                return;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // This must be in a local variable, in case a UI event sets the logger</div><div class=\"line\">            final Printer logging = me.mLogging;</div><div class=\"line\">            if (logging != null) {</div><div class=\"line\">                logging.println(&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot; + msg.target + &quot; &quot; +</div><div class=\"line\">                        msg.callback + &quot;: &quot; + msg.what);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            final long traceTag = me.mTraceTag;</div><div class=\"line\">            if (traceTag != 0) {</div><div class=\"line\">                Trace.traceBegin(traceTag, msg.target.getTraceName(msg));</div><div class=\"line\">            }</div><div class=\"line\">            try {</div><div class=\"line\">                msg.target.dispatchMessage(msg);//&#x901A;&#x8FC7;Handler&#x5206;&#x53D1;&#x6D88;&#x606F;</div><div class=\"line\">            } finally {</div><div class=\"line\">                if (traceTag != 0) {</div><div class=\"line\">                    Trace.traceEnd(traceTag);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            if (logging != null) {</div><div class=\"line\">                logging.println(&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot; + msg.target + &quot; &quot; + msg.callback);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // Make sure that during the course of dispatching the</div><div class=\"line\">            // identity of the thread wasn&apos;t corrupted.</div><div class=\"line\">            final long newIdent = Binder.clearCallingIdentity();</div><div class=\"line\">            if (ident != newIdent) {</div><div class=\"line\">                Log.wtf(TAG, &quot;Thread identity changed from 0x&quot;</div><div class=\"line\">                        + Long.toHexString(ident) + &quot; to 0x&quot;</div><div class=\"line\">                        + Long.toHexString(newIdent) + &quot; while dispatching to &quot;</div><div class=\"line\">                        + msg.target.getClass().getName() + &quot; &quot;</div><div class=\"line\">                        + msg.callback + &quot; what=&quot; + msg.what);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            msg.recycleUnchecked();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>loop</code>&#x4E2D;&#x9996;&#x5148;&#x83B7;&#x53D6;&#x4E86;&#x5F53;&#x524D;&#x6240;&#x5728;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x83B7;&#x53D6;&#x5230;&#x4E86;<code>Looper</code>&#x4E2D;&#x7684;<code>MessageQueue</code>&#xFF0C;&#x8BF4;&#x660E;<code>Looper</code>&#x5DF2;&#x7ECF;&#x4E0E;&#x5F53;&#x524D;&#x7684;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4E86;&#x7ED1;&#x5B9A;&#x3002;&#x5728;&#x540E;&#x9762;&#x5F00;&#x542F;&#x4E86;&#x4E00;&#x4E2A;<code>for</code>&#x7684;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x53D1;&#x73B0;&#x5B83;&#x505A;&#x7684;&#x4E8B;&#x4EF6;&#x662F;&#x4E0D;&#x65AD;&#x7684;&#x4ECE;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x90FD;&#x4EA4;&#x7ED9;<code>msg.target</code>&#x8C03;&#x7528;&#x5B83;&#x7684;<code>dispatchMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;<code>target</code>&#x53C8;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>Message</code></p>\n<h1 id=\"Message\"><a href=\"#Message\" class=\"headerlink\" title=\"Message\"></a>Message</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">/*package*/ int flags;</div><div class=\"line\"></div><div class=\"line\">    /*package*/ long when;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Bundle data;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Handler target;</div><div class=\"line\">    </div><div class=\"line\">    /*package*/ Runnable callback;</div><div class=\"line\">    </div><div class=\"line\">    // sometimes we store linked lists of these things</div><div class=\"line\">    /*package*/ Message next;</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x73B0;&#x5B83;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684;<code>Handler</code>&#xFF0C;&#x8BF4;&#x660E;&#x6700;&#x540E;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>Handler</code>&#x4E2D;&#x7684;<code>dispatchMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x5206;&#x53D1;&#x5904;&#x7406;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;<code>Handler</code>&#x5C31;&#x901A;&#x8FC7;<code>Looper</code>&#x8054;&#x7CFB;&#x4E0A;&#x4E86;<code>Looper</code>&#x6240;&#x7ED1;&#x5B9A;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5373;&#x4E3A;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h1 id=\"Handler\"><a href=\"#Handler\" class=\"headerlink\" title=\"Handler\"></a>Handler</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public Handler(Callback callback, boolean async) {</div><div class=\"line\">        if (FIND_POTENTIAL_LEAKS) {</div><div class=\"line\">            final Class&lt;? extends Handler&gt; klass = getClass();</div><div class=\"line\">            if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp;</div><div class=\"line\">                    (klass.getModifiers() &amp; Modifier.STATIC) == 0) {</div><div class=\"line\">                Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; +</div><div class=\"line\">                    klass.getCanonicalName());</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        mLooper = Looper.myLooper();</div><div class=\"line\">        if (mLooper == null) {</div><div class=\"line\">            throw new RuntimeException(</div><div class=\"line\">                &quot;Can&apos;t create handler inside thread that has not called Looper.prepare()&quot;);</div><div class=\"line\">        }</div><div class=\"line\">        mQueue = mLooper.mQueue;</div><div class=\"line\">        mCallback = callback;</div><div class=\"line\">        mAsynchronous = async;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>Handler</code>&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5B83;&#x83B7;&#x53D6;&#x4E86;&#x5B83;&#x6240;&#x5904;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x83B7;&#x53D6;&#x4E86;<code>Looper</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x6240;&#x5904;&#x7EBF;&#x7A0B;&#x7684;<code>Looper</code>&#x4E3A;&#x7A7A;&#x7684;&#x8BDD;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x8FD9;&#x5C31;&#x89E3;&#x91CA;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x975E;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;<code>Handler</code>&#x8981;&#x5206;&#x522B;&#x8C03;&#x7528;<code>Looper.prepare</code>&#x4E0E;<code>Looper.loop</code>&#x800C;&#x4E3B;&#x7EBF;&#x7A0B;&#x5219;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x9ED8;&#x8BA4;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;&#x3002;</p>\n<h2 id=\"dispatchMessage\"><a href=\"#dispatchMessage\" class=\"headerlink\" title=\"dispatchMessage\"></a>dispatchMessage</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void dispatchMessage(Message msg) {</div><div class=\"line\">        if (msg.callback != null) {</div><div class=\"line\">            handleCallback(msg);</div><div class=\"line\">        } else {</div><div class=\"line\">            if (mCallback != null) {</div><div class=\"line\">                if (mCallback.handleMessage(msg)) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">            handleMessage(msg);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">private static void handleCallback(Message message) {</div><div class=\"line\">        message.callback.run();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x56DE;&#x5230;&#x524D;&#x9762;&#xFF0C;&#x5BF9;&#x4E8E;<code>dispatchMessage</code>&#x7684;&#x5904;&#x7406;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;<code>msg.callback</code>&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x8FD9;&#x91CC;<code>callback</code>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;<code>Message</code>&#x5E94;&#x8BE5;&#x80FD;&#x77E5;&#x9053;&#x4ED6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>Runnable</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4E3A;&#x7A7A;&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>Runnable</code>&#x7684;<code>run</code>&#x65B9;&#x6CD5;&#x3002;&#x5426;&#x5219;&#x8C03;&#x7528;<code>Handler</code>&#x7684;<code>handleMessage</code>&#x65B9;&#x6CD5;.&#x800C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5DF2;&#x7ECF;&#x5F88;&#x719F;&#x6089;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x90FD;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x4E86;<code>Handler</code>&#x5DF2;&#x7ECF;&#x8054;&#x7CFB;&#x4E0A;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;<code>handleMessage</code>&#x4E2D;&#x7684;&#x5904;&#x7406;&#x81EA;&#x7136;&#x76F8;&#x5BF9;&#x4E8E;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8FDB;&#x884C;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x80FD;&#x66F4;&#x65B0;<code>UI</code>&#x4E86;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x80FD;&#x628A;<code>Looper</code>&#x6BD4;&#x4F5C;&#x662F;&#x4E00;&#x4E2A;&#x6865;&#x6881;&#xFF0C;&#x6765;&#x8FDE;&#x63A5;<code>Looper</code>&#x6240;&#x5728;&#x7684;&#x7EBF;&#x7A0B;&#x4E0E;<code>Handler</code>&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x540C;&#x65F6;&#x7BA1;&#x7406;&#x6D88;&#x606F;&#x961F;&#x5217;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x3002;&#x90A3;&#x4E48;&#x524D;&#x9762;&#x7684;<code>Runnable</code>&#x53C8;&#x662F;&#x5982;&#x4F55;&#x4E0D;&#x4E3A;&#x7A7A;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>Handler</code>&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>Handler</code>&#x5E76;&#x4E14;&#x91CD;&#x5199;&#x5B83;&#x7684;<code>handleMessage</code>&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x53E6;&#x4E00;&#x79CD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>Handler.post(Runnable)</code>&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x81EA;&#x7136;&#x5C31;&#x5728;<code>run</code>&#x65B9;&#x6CD5;&#x4E2D;&#x5B9E;&#x73B0;&#x3002;</p>\n<p>&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;<code>Handler</code>&#x662F;&#x5982;&#x4F55;&#x8054;&#x7CFB;&#x4E0A;&#x4E86;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7684;&#x7EBF;&#x7A0B;&#x4E0E;&#x5BF9;&#x6D88;&#x606F;&#x662F;&#x5982;&#x4F55;&#x53D6;&#x51FA;&#x4E0E;&#x5904;&#x7406;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x8C08;&#x8C08;&#x6D88;&#x606F;&#x662F;&#x5982;&#x4F55;&#x653E;&#x5165;&#x5230;<code>Looper</code>&#x4E2D;&#x7684;<code>MessageQueue</code>&#x4E2D;&#x7684;&#x3002;</p>\n<h2 id=\"sendMessageAtTime\"><a href=\"#sendMessageAtTime\" class=\"headerlink\" title=\"sendMessageAtTime\"></a>sendMessageAtTime</h2><p>&#x901A;&#x8FC7;<code>Handler</code>&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x65B9;&#x5F0F;&#x5F88;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<code>sendMessage</code>&#x3001;<code>sendEmptyMessage</code>&#x4E0E;<code>sendMessageDelayed</code>&#x7B49;&#xFF0C;&#x5176;&#x5B9E;&#x5230;&#x6700;&#x540E;&#x4ED6;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x90FD;&#x662F;<code>sendMessageAtTime</code>&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;<code>sendMessageAtTime</code>&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public boolean sendMessageAtTime(Message msg, long uptimeMillis) {</div><div class=\"line\">        MessageQueue queue = mQueue;</div><div class=\"line\">        if (queue == null) {</div><div class=\"line\">            RuntimeException e = new RuntimeException(</div><div class=\"line\">                    this + &quot; sendMessageAtTime() called with no mQueue&quot;);</div><div class=\"line\">            Log.w(&quot;Looper&quot;, e.getMessage(), e);</div><div class=\"line\">            return false;</div><div class=\"line\">        }</div><div class=\"line\">        return enqueueMessage(queue, msg, uptimeMillis);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x800C;<code>sendMessageAtTime</code>&#x5219;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x4E86;<code>enqueueMessage</code>&#x64CD;&#x4F5C;&#xFF0C;&#x770B;&#x8FD9;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#x662F;&#x5165;&#x961F;&#x5217;&#x64CD;&#x4F5C;&#x4E86;&#x3002;</p>\n<h2 id=\"enqueueMessage\"><a href=\"#enqueueMessage\" class=\"headerlink\" title=\"enqueueMessage\"></a>enqueueMessage</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) {</div><div class=\"line\">        msg.target = this;</div><div class=\"line\">        if (mAsynchronous) {</div><div class=\"line\">            msg.setAsynchronous(true);</div><div class=\"line\">        }</div><div class=\"line\">        return queue.enqueueMessage(msg, uptimeMillis);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x679C;&#x4E0D;&#x5176;&#x7136;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x4E86;<code>MessageQueue</code>&#x4E2D;&#x7684;<code>queue.enqueueMessage(msg, uptimeMillis)</code>&#x5C06;&#x6D88;&#x606F;&#x52A0;&#x5165;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x540C;&#x65F6;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;<code>msg.target = this</code> &#x5C06;&#x5F53;&#x524D;&#x7684;<code>Handler</code>&#x8D4B;&#x7ED9;&#x4E86;<code>msg.target</code>,&#x8FD9;&#x5C31;&#x662F;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>Looper.loop</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x7684;<code>Handler</code>&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x628A;&#x6D88;&#x606F;&#x653E;&#x5230;&#x4E86;<code>MessageQueue</code>&#x4E2D;&#xFF0C;&#x8FDB;&#x800C;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x6240;&#x8BB2;&#x7684;<code>loop</code>&#x6765;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x6784;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4F7F;&#x7528;<code>Handler</code>&#x5185;&#x90E8;&#x6240;&#x53D1;&#x751F;&#x7684;&#x539F;&#x7406;&#x3002;&#x597D;&#x4E86;<code>Handler</code>&#x3001;<code>Looper</code>&#x4E0E;<code>MessageQueue</code>&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#x57FA;&#x672C;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#x3002;&#x6211;&#x4E5F;&#x7B80;&#x5355;&#x753B;&#x4E86;&#x5F20;&#x56FE;&#x5E0C;&#x671B;&#x6709;&#x6240;&#x5E2E;&#x52A9;</p>\n<p><img src=\"/2016/10/19/Android-Handler&#x3001;Looper&#x4E0E;MessageQueue&#x6E90;&#x7801;&#x5206;&#x6790;/Handler&#x3001;Looper&#x4E0E;MessageQueue.png\" alt=\"&#x8349;&#x56FE;\"></p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6765;&#x603B;&#x7ED3;&#x4E0B;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x7A0B;&#x3002;&#x9996;&#x5148;&#x521B;&#x5EFA;<code>Handler</code>&#x800C;&#x5728;<code>Handler</code>&#x6240;&#x5904;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x4E00;&#x4E2A;<code>Looper</code>&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x8C03;&#x7528;<code>Looper.prepare</code>&#x6765;&#x521B;&#x5EFA;<code>Looper</code>&#x540C;&#x65F6;&#x8C03;&#x7528;<code>Looper.loop</code>&#x5F00;&#x542F;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x5904;&#x7406;&#x3002;&#x6BCF;&#x4E2A;<code>Looper</code>&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;<code>MessageQueue</code>&#x5B83;&#x662F;&#x7528;&#x6765;&#x5B58;&#x50A8;<code>Message</code>&#x7684;&#xFF0C;<code>Handler</code>&#x901A;&#x8FC7;<code>post</code>&#x6216;&#x8005;<code>send..</code>&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x901A;&#x8FC7;<code>Looper</code>&#x5C06;&#x6D88;&#x606F;&#x653E;&#x5165;&#x5230;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x800C;<code>Looper</code>&#x901A;&#x8FC7;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x7684;&#x5FAA;&#x73AF;&#x6765;&#x4E00;&#x76F4;&#x76D1;&#x542C;&#x7740;&#x6D88;&#x606F;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4E0D;&#x65AD;&#x4ECE;<code>MessageQueue</code>&#x4E2D;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x4EA4;&#x7ED9;&#x4E0E;&#x5F53;&#x524D;<code>Looper</code>&#x6240;&#x7ED1;&#x5B9A;&#x7684;<code>handler</code>&#x7684;<code>dispatchMessage</code>&#x8FDB;&#x884C;&#x5206;&#x53D1;&#xFF0C;&#x6700;&#x540E;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8C03;&#x7528;<code>Runnable</code>&#x7684;<code>run</code>&#x6216;&#x8005;<code>Handler</code>&#x7684;<code>HandlerMessage</code>&#x65B9;&#x6CD5;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x6700;&#x540E;&#x7684;&#x5904;&#x7406;&#x3002;</p>\n"},{"title":"Android Volley源码分析(二)","url":"https://www.rousetime.com/2016/10/17/Android-Volley源码分析-二/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x4E00;&#x6B21;&#x5206;&#x6790;&#x4E86;&#x5173;&#x4E8E;<code>Volley</code>&#x6700;&#x6838;&#x5FC3;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5BF9;<code>Volley</code>&#x5982;&#x4F55;&#x5904;&#x7406;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x9762;&#x7684;&#x5256;&#x6790;&#x3002;&#x8FD8;&#x6CA1;&#x6709;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>,&#x8FD9;&#x6B21;&#x6211;&#x518D;&#x6765;&#x5BF9;&#x5B83;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x539F;&#x7406;&#x8FDB;&#x884C;&#x81EA;&#x6211;&#x8BB2;&#x89E3;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x5E2E;&#x52A9;&#x5230;&#x4E00;&#x90E8;&#x5206;&#x4EBA;&#xFF0C;&#x4E5F;&#x80FD;&#x5DE9;&#x56FA;&#x81EA;&#x5DF1;&#x6240;&#x5B66;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#xFF01;</p>\n<h1 id=\"ImageLoader\"><a href=\"#ImageLoader\" class=\"headerlink\" title=\"ImageLoader\"></a>ImageLoader</h1><p>&#x5BF9;&#x4E8E;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#xFF0C;&#x662F;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;<code>ImageLoader</code>&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x88C5;&#x8F7D;&#x5668;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#x7684;&#x7BA1;&#x7406;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final ImageLoader imageLoader = new ImageLoader(VolleyUtil.volleyQueue, new ImageCache(CACHE_SIZE));</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x4E3A;<code>RequestQueue</code>&#x4E0E;<code>ImageCache</code>&#xFF0C;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6211;&#x4EEC;&#x518D;&#x719F;&#x6089;&#x4E0D;&#x8FC7;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E3A;&#x4E86;&#x6784;&#x5EFA;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#x7684;&#xFF0C;&#x5982;&#x4E0D;&#x6784;&#x5EFA;&#x5219;&#x7F13;&#x5B58;&#x81EA;&#x7136;&#x5C31;&#x5931;&#x6548;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>ImageLoader</code>&#x67E5;&#x770B;&#x5B83;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x770B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ImageLoader(RequestQueue queue, ImageCache imageCache) {</div><div class=\"line\">        mRequestQueue = queue;</div><div class=\"line\">        mCache = imageCache;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FDB;&#x53BB;&#x53D1;&#x73B0;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;<code>get</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x56FE;&#x7247;&#x7684;&#x5904;&#x7406;&#x5C31;&#x662F;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x8FC7;<code>Volley</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x90FD;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x90FD;&#x8981;&#x8C03;&#x7528;&#x5B83;&#x7684;<code>get</code>&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5230;&#x5E95;&#x53C8;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h2 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ImageContainer get(String requestUrl, ImageListener imageListener,</div><div class=\"line\">            int maxWidth, int maxHeight, ScaleType scaleType) {</div><div class=\"line\"> </div><div class=\"line\">        // only fulfill requests that were initiated from the main thread.</div><div class=\"line\">        throwIfNotOnMainThread();</div><div class=\"line\"> </div><div class=\"line\">        final String cacheKey = getCacheKey(requestUrl, maxWidth, maxHeight, scaleType);</div><div class=\"line\"> </div><div class=\"line\">        // Try to look up the request in the cache of remote images.</div><div class=\"line\">        Bitmap cachedBitmap = mCache.getBitmap(cacheKey);</div><div class=\"line\">        if (cachedBitmap != null) {</div><div class=\"line\">            // Return the cached bitmap.</div><div class=\"line\">            ImageContainer container = new ImageContainer(cachedBitmap, requestUrl, null, null);</div><div class=\"line\">            imageListener.onResponse(container, true);</div><div class=\"line\">            return container;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // The bitmap did not exist in the cache, fetch it!</div><div class=\"line\">        ImageContainer imageContainer =</div><div class=\"line\">                new ImageContainer(null, requestUrl, cacheKey, imageListener);</div><div class=\"line\"> </div><div class=\"line\">        // Update the caller to let them know that they should use the default bitmap.</div><div class=\"line\">        imageListener.onResponse(imageContainer, true);</div><div class=\"line\"> </div><div class=\"line\">        // Check to see if a request is already in-flight.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.get(cacheKey);</div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // If it is, add this request to the list of listeners.</div><div class=\"line\">            request.addContainer(imageContainer);</div><div class=\"line\">            return imageContainer;</div><div class=\"line\">        }</div><div class=\"line\"> </div><div class=\"line\">        // The request is not already in flight. Send the new request to the network and</div><div class=\"line\">        // track it.</div><div class=\"line\">        Request&lt;Bitmap&gt; newRequest = makeImageRequest(requestUrl, maxWidth, maxHeight, scaleType,</div><div class=\"line\">                cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        mRequestQueue.add(newRequest);</div><div class=\"line\">        mInFlightRequests.put(cacheKey,</div><div class=\"line\">                new BatchedImageRequest(newRequest, imageContainer));</div><div class=\"line\">        return imageContainer;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5B83;&#x4F20;&#x9012;&#x4E86;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x3001;&#x76D1;&#x542C;&#x5668;<code>ImageListener</code>&#x3001;&#x8FD4;&#x56DE;&#x7684;&#x56FE;&#x7247;&#x5BBD;&#x9AD8;&#x4E0E;&#x7F29;&#x653E;&#x7C7B;&#x578B;&#xFF0C;<code>ImageListener</code>&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x5BF9;&#x54CD;&#x5E94;&#x4E0D;&#x540C;&#x5904;&#x7406;&#x7684;&#x56DE;&#x8C03;,&#x5305;&#x62EC;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x3002;&#x4E0B;&#x9762;&#x770B;&#x4E3B;&#x8981;&#x4EE3;&#x7801;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;&#x8BE5;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x662F;&#x5426;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E0D;&#x662F;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x5BF9;&#x4E8E;&#x5BF9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5224;&#x65AD;&#x5E94;&#x8BE5;&#x5F88;&#x5BB9;&#x6613;&#x60F3;&#x5230;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x5BF9;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x505A;&#x5904;&#x7406;&#x66F4;&#x65B0;&#x56FE;&#x7247;&#x7B49;&#xFF0C;&#x5BF9;<code>UI</code>&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x8981;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x7136;&#x8981;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;&#x4E0B;&#x4E00;&#x6B65;&#x90FD;&#x662F;&#x4E00;&#x8D2F;&#x7684;&#x4F5C;&#x98CE;&#xFF0C;&#xFF08;<code>10</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5148;&#x5224;&#x65AD;&#x7F13;&#x5B58;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x8BE5;&#x8BF7;&#x6C42;&#x7684;<code>Bitmap</code>&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x5219;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>ImageContainer</code>&#xFF0C;&#x5C06;&#x5FC5;&#x8981;&#x4FE1;&#x606F;&#x4F20;&#x5165;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x56FE;&#x7247;&#x7684;&#x4FE1;&#x606F;,&#x5305;&#x62EC;</p>\n<ul>\n<li><code>Bitmap</code>&#x8BF7;&#x6C42;&#x7684;&#x56FE;&#x7247;</li>\n<li><code>ImageListener</code> &#x76D1;&#x542C;&#x5668;,&#x5305;&#x62EC;&#x540E;&#x7EED;&#x56DE;&#x8C03;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;</li>\n<li><code>mCacheKey</code> &#x7F13;&#x5B58;&#x7684;<code>key</code></li>\n<li><code>mRequestUrl</code> &#x8BF7;&#x6C42;&#x7684;<code>url</code></li>\n</ul>\n<p>&#x7136;&#x540E;&#x8C03;&#x7528;<code>imageListener</code>&#x7684;<code>onResponse</code>&#x65B9;&#x6CD5;&#x3002;&#x4E0D;&#x5B58;&#x5728;&#x4E0E;&#x4F1A;&#x4E3A;&#x5176;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>ImageContainer</code>&#x4E3A;&#x4E86;&#x4FDD;&#x5B58;&#x540E;&#x7EED;&#x7684;<code>Bitmpa</code>&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x4E5F;&#x4F1A;&#x5148;&#x8C03;&#x7528;<code>onResponse</code>&#x8FD9;&#x4E00;&#x6B65;&#x5E76;&#x4E0D;&#x662F;&#x8BBE;&#x7F6E;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x800C;&#x662F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x7684;&#x56FE;&#x7247;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x7F6E;&#x4E86;&#x7684;&#x8BDD;&#xFF09;&#x3002;&#xFF08;<code>25</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5982;&#x679C;&#x8BE5;&#x8BF7;&#x6C42;&#x6B63;&#x5728;&#x88AB;&#x6267;&#x884C;,&#x5C06;&#x5F53;&#x524D;&#x7684;<code>ImageContainer</code>&#x52A0;&#x5165;&#x5230;&#x4E00;&#x4E2A;<code>LinkedList</code>&#x4E2D;&#x4E3A;le&#x540E;&#x7EED;&#x54CD;&#x5E94;&#x7684;&#x9012;&#x9001;&#xFF1B;&#x4E0B;&#x9762;&#x624D;&#x662F;&#x771F;&#x5728;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x83B7;&#x53D6;&#xFF08;<code>34</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;<code>Request</code>&#x5E76;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x5230;&#x4E86;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;<code>makeImageRequest</code>&#x5B9E;&#x73B0;&#x4E86;&#x4EC0;&#x4E48;</p>\n<h2 id=\"makeImageRequest\"><a href=\"#makeImageRequest\" class=\"headerlink\" title=\"makeImageRequest\"></a>makeImageRequest</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected Request&lt;Bitmap&gt; makeImageRequest(String requestUrl, int maxWidth, int maxHeight,</div><div class=\"line\">            ScaleType scaleType, final String cacheKey) {</div><div class=\"line\">        return new ImageRequest(requestUrl, new Listener&lt;Bitmap&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(Bitmap response) {</div><div class=\"line\">                onGetImageSuccess(cacheKey, response);</div><div class=\"line\">            }</div><div class=\"line\">        }, maxWidth, maxHeight, scaleType, Config.RGB_565, new ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                onGetImageError(cacheKey, error);</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x660E;&#x767D;&#x4E86;&#x5427;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;<code>ImageRequest</code>&#xFF0C;&#x4E0E;<code>StringRequest</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x5DF2;&#x7ECF;&#x8BB2;&#x4E86;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x8FD8;&#x662F;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x90FD;&#x4F1A;&#x5C06;&#x7ED3;&#x679C;&#x4EA4;&#x7531;<code>DeliveryResponse</code>&#x8FDB;&#x884C;&#x9012;&#x9001;,&#x6839;&#x636E;&#x54CD;&#x5E94;&#x60C5;&#x51B5;&#x5206;&#x522B;&#x8C03;&#x7528;&#x76D1;&#x542C;&#x5668;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x5176;&#x4E2D;&#x7684;<code>onGetImageSuccess</code>&#x4E0E;<code>onGetImageError</code>&#x65B9;&#x6CD5;&#x53C8;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h2 id=\"onGetImageSuccess-amp-amp-onGetImageError\"><a href=\"#onGetImageSuccess-amp-amp-onGetImageError\" class=\"headerlink\" title=\"onGetImageSuccess &amp;&amp; onGetImageError\"></a>onGetImageSuccess &amp;&amp; onGetImageError</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void onGetImageSuccess(String cacheKey, Bitmap response) {</div><div class=\"line\">        // cache the image that was fetched.</div><div class=\"line\">        mCache.putBitmap(cacheKey, response);</div><div class=\"line\"> </div><div class=\"line\">        // remove the request from the list of in-flight requests.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.remove(cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // Update the response bitmap.</div><div class=\"line\">            request.mResponseBitmap = response;</div><div class=\"line\"></div><div class=\"line\">            // Send the batched response</div><div class=\"line\">            batchResponse(cacheKey, request);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x505A;&#x7684;&#x4E8B;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x5C06;<code>Bitmap</code>&#x52A0;&#x5165;&#x7F13;&#x5B58;&#x4E2D;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;<code>Bitmap</code>&#x4EE5;&#x4FBF;&#x540E;&#x7EED;<code>batchResponse</code>&#x7684;&#x6279;&#x5904;&#x7406;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void onGetImageError(String cacheKey, VolleyError error) {</div><div class=\"line\">        // Notify the requesters that something failed via a null result.</div><div class=\"line\">        // Remove this request from the list of in-flight requests.</div><div class=\"line\">        BatchedImageRequest request = mInFlightRequests.remove(cacheKey);</div><div class=\"line\"> </div><div class=\"line\">        if (request != null) {</div><div class=\"line\">            // Set the error for this request</div><div class=\"line\">            request.setError(error);</div><div class=\"line\"> </div><div class=\"line\">            // Send the batched response</div><div class=\"line\">            batchResponse(cacheKey, request);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p><code>onGetImageError</code>&#x4E5F;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x54CD;&#x5E94;&#x65E0;&#x9700;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x8981;&#x8FDB;&#x884C;<code>batchResponse</code>&#xFF0C;&#x65E2;&#x7136;&#x5982;&#x6B64;&#x90A3;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x8FDB;&#x5165;<code>batchResponse</code>&#x6E90;&#x7801;&#x3002;</p>\n<h2 id=\"batchResponse\"><a href=\"#batchResponse\" class=\"headerlink\" title=\"batchResponse\"></a>batchResponse</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void batchResponse(String cacheKey, BatchedImageRequest request) {</div><div class=\"line\">        mBatchedResponses.put(cacheKey, request);</div><div class=\"line\">        // If we don&apos;t already have a batch delivery runnable in flight, make a new one.</div><div class=\"line\">        // Note that this will be used to deliver responses to all callers in mBatchedResponses.</div><div class=\"line\">        if (mRunnable == null) {</div><div class=\"line\">            mRunnable = new Runnable() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public void run() {</div><div class=\"line\">                    for (BatchedImageRequest bir : mBatchedResponses.values()) {</div><div class=\"line\">                        for (ImageContainer container : bir.mContainers) {</div><div class=\"line\">                            // If one of the callers in the batched request canceled the request</div><div class=\"line\">                            // after the response was received but before it was delivered,</div><div class=\"line\">                            // skip them.</div><div class=\"line\">                            if (container.mListener == null) {</div><div class=\"line\">                                continue;</div><div class=\"line\">                            }</div><div class=\"line\">                            if (bir.getError() == null) {</div><div class=\"line\">                                container.mBitmap = bir.mResponseBitmap;</div><div class=\"line\">                                 container.mListener.onResponse(container, false);</div><div class=\"line\">                            } else {</div><div class=\"line\">                                 container.mListener.onErrorResponse(bir.getError());</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                    mBatchedResponses.clear();</div><div class=\"line\">                    mRunnable = null;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">            };</div><div class=\"line\">            // Post the runnable.</div><div class=\"line\">            mHandler.postDelayed(mRunnable, mBatchResponseDelayMs);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;<code>run</code>&#x65B9;&#x6CD5;&#xFF0C;&#x91CC;&#x9762;&#x6839;&#x636E;&#x56FE;&#x7247;&#x5BB9;&#x5668;<code>ImageContainer</code>&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x5206;&#x522B;&#x8C03;&#x7528;&#x76D1;&#x542C;&#x5668;&#x4E2D;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;<code>get</code>&#x4E2D;&#x6240;&#x4F20;&#x9012;&#x7684;<code>ImageListener</code>&#x63A5;&#x53E3;&#x3002;&#x5176;&#x4E2D;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x7531;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x6700;&#x540E;&#x901A;&#x8FC7;<code>mHandler</code>&#xFF08;&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF09;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;<br>&#x5BF9;&#x4E8E;<code>ImageListener</code>&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x6709;&#x9ED8;&#x8BA4;&#x7684;&#x5B9E;&#x73B0;<code>getImageListener</code></p>\n<h2 id=\"&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\"><a href=\"#&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;\"></a>&#x9ED8;&#x8BA4;&#x7684;getImageListener&#x5B9E;&#x73B0;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static ImageListener getImageListener(final ImageView view,</div><div class=\"line\">            final int defaultImageResId, final int errorImageResId) {</div><div class=\"line\">        return new ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                if (errorImageResId != 0) {</div><div class=\"line\">                    view.setImageResource(errorImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                if (response.getBitmap() != null) {</div><div class=\"line\">                    view.setImageBitmap(response.getBitmap());</div><div class=\"line\">                } else if (defaultImageResId != 0) {</div><div class=\"line\">                    view.setImageResource(defaultImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x80FD;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x6700;&#x559C;&#x6B22;&#x770B;&#x5230;&#x7684;&#x4EE3;&#x7801;&#xFF1A;&#x5BF9;<code>ImageView</code>&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x586B;&#x5145;&#x3002;&#x4F46;&#x6211;&#x4EEC;&#x53EA;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x8BB8;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x591A;&#x6761;&#x76EE;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x4F1A;&#x590D;&#x7528;<code>item</code>&#x5982;&#x679C;&#x4E0D;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#x4EA7;&#x751F;<code>&#x591A;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x65F6;&#x7684;&#x95EA;&#x70C1;&#x4E0E;&#x5F02;&#x4F4D;&#x95EE;&#x9898;</code>&#x3002;&#x90A3;&#x8981;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x4E0D;&#x8BA9;&#x4ED6;&#x76F4;&#x63A5;&#x5C31;&#x5904;&#x7406;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x662F;&#x8981;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x7684;&#x5224;&#x65AD;&#xFF0C;&#x65E2;&#x7136;&#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x6709;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x81EA;&#x5DF1;&#x6765;&#x5B9E;&#x73B0;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\"><a href=\"#&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;\"></a>&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;ImageListener&#x63A5;&#x53E3;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static ImageLoader.ImageListener getImageListener(final ImageView view, final String url, final int defaultImageResId</div><div class=\"line\">            , final int errorImageResId) {</div><div class=\"line\">        return new ImageLoader.ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageLoader.ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                if (response.getBitmap() != null) {</div><div class=\"line\">                    //&#x9632;&#x6B62;&#x672A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;&#x524D;&#x7684;&#x663E;&#x793A;&#x56FE;&#x7247;&#x800C;&#x5BFC;&#x81F4;&#x7684;&#x56FE;&#x7247;&#x9519;&#x4E71;&#x95EE;&#x9898;</div><div class=\"line\">                    String preUrl = (String) view.getTag();</div><div class=\"line\">                    if (preUrl != null &amp;&amp; preUrl.trim().equals(url)) {</div><div class=\"line\">                        if (!isImmediate &amp;&amp; defaultImageResId != 0) {</div><div class=\"line\">                            //&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x4E0B;&#x8F7D;&#x7684;&#x56FE;&#x7247;</div><div class=\"line\">                            TransitionDrawable transitionDrawable = new TransitionDrawable(</div><div class=\"line\">                                    new Drawable[]{</div><div class=\"line\">                                            App.mContext.getResources().getDrawable(defaultImageResId),</div><div class=\"line\">                                            new BitmapDrawable(App.mContext.getResources(),</div><div class=\"line\">                                                    response.getBitmap())</div><div class=\"line\">                                    }</div><div class=\"line\">                            );</div><div class=\"line\">                            transitionDrawable.setCrossFadeEnabled(true);</div><div class=\"line\">                            view.setImageDrawable(transitionDrawable);</div><div class=\"line\">                            transitionDrawable.startTransition(100);</div><div class=\"line\">                        } else {</div><div class=\"line\">                            //&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x56FE;&#x7247;</div><div class=\"line\">                            view.setImageBitmap(response.getBitmap());</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                } else {</div><div class=\"line\">                    if (defaultImageResId != 0)</div><div class=\"line\">                        view.setImageResource(defaultImageResId);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                if (errorImageResId != 0)</div><div class=\"line\">                    view.setImageResource(errorImageResId);</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5982;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x6240;&#x793A;&#xFF0C;&#x5BF9;<code>View</code>&#x5176;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;<code>Tag</code>&#x53EF;&#x4EE5;&#x662F;<code>url</code>&#x3002;&#x53EA;&#x6709;&#x7B26;&#x5408;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x7684;<code>url</code>&#x94FE;&#x63A5;&#x7684;<code>Bitmap</code>&#x624D;&#x80FD;&#x586B;&#x5145;&#x5F53;&#x524D;&#x7684;<code>View</code>&#xFF0C;&#x5176;&#x5B9E;&#x8981;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x524D;&#x63D0;&#x7684;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;&#x663E;&#x793A;&#x56FE;&#x7247;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#x7684;&#x663E;&#x793A;&#xFF0C;&#x867D;&#x7136;&#x5F02;&#x4F4D;&#x7684;&#x60C5;&#x51B5;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4F46;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4F1A;&#x5BFC;&#x81F4;&#x56FE;&#x7247;&#x7684;&#x95EA;&#x70C1;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x73B0;&#x5728;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x90FD;&#x4F1A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x56FE;&#x7247;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x5C31;&#x4E0D;&#x5B58;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<h2 id=\"ImageCache\"><a href=\"#ImageCache\" class=\"headerlink\" title=\"ImageCache\"></a>ImageCache</h2><p>&#x5173;&#x4E8E;&#x7F13;&#x5B58;&#x5728;<code>ImageLoader</code>&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;<code>ImageLoader.ImageCache</code>&#x63A5;&#x53E3;&#xFF0C;&#x5C31;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;<code>getBitmap</code>&#x4E0E;<code>putBitmap</code>,&#x5982;&#x679C;&#x7EC6;&#x5FC3;&#x7684;&#x8BDD;&#x524D;&#x9762;&#x5BF9;&#x7F13;&#x5B58;&#x7684;&#x5904;&#x7406;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x4E0E;&#x4FDD;&#x5B58;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x7684;&#x8BDD;&#x5C31;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4E0D;&#x8FC7;&#x5BF9;&#x7F13;&#x5B58;&#x7684;&#x7BA1;&#x7406;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;<code>LruCache</code>&#x7B97;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ImageCache extends LruCache&lt;String, Bitmap&gt; implements ImageLoader.ImageCache {</div><div class=\"line\">    /**</div><div class=\"line\">     * @param maxSize for caches that do not override {@link #sizeOf}, this is</div><div class=\"line\">     *                the maximum number of entries in the cache. For all other caches,</div><div class=\"line\">     *                this is the maximum sum of the sizes of the entries in this cache.</div><div class=\"line\">     */</div><div class=\"line\"> </div><div class=\"line\">    public ImageCache(int maxSize) {</div><div class=\"line\">        super(maxSize);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    protected int sizeOf(String key, Bitmap value) {</div><div class=\"line\">        return value.getRowBytes() * value.getHeight();</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public Bitmap getBitmap(String url) {</div><div class=\"line\">        return get(url);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void putBitmap(String url, Bitmap bitmap) {</div><div class=\"line\">        put(url, bitmap);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5BF9;&#x4E8E;&#x7F13;&#x5B58;<code>maxSize</code>&#x7684;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x53D6;&#x5185;&#x5B58;&#x9600;&#x503C;&#x7684;1/8</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final int CACHE_SIZE = 1024 * 1024 * ((ActivityManager) App.mContext.</div><div class=\"line\">            getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass() / 8;</div></pre></td></tr></table></figure>\n<h1 id=\"NetWorkImageView\"><a href=\"#NetWorkImageView\" class=\"headerlink\" title=\"NetWorkImageView\"></a>NetWorkImageView</h1><p><code>Volley</code>&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7684;&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;<code>xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>ImageView</code>&#x66FF;&#x6362;&#x6210;<code>NetWorkImageView</code>&#xFF0C;&#x8BE5;&#x63A7;&#x4EF6;&#x4E5F;&#x662F;&#x7EE7;&#x627F;&#x4E86;<code>ImageView</code>&#x53EA;&#x4E0D;&#x8FC7;&#x5B83;&#x5BF9;&#x4E13;&#x95E8;&#x5BF9;&#x4F7F;&#x7528;<code>Volley</code>&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x901A;&#x8FC7;<code>setDefaultImageResId</code>&#x4E0E;<code>setErrorImageResId</code>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x4E0E;&#x9519;&#x8BEF;&#x663E;&#x793A;&#x56FE;&#x7247;&#xFF0C;&#x8C03;&#x7528;&#x5219;&#x662F;&#x76F4;&#x63A5;<code>setImageUrl</code>&#xFF0C;&#x8FD8;&#x662F;&#x6765;&#x770B;&#x4E0B;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setImageUrl(String url, ImageLoader imageLoader) {</div><div class=\"line\">        mUrl = url;</div><div class=\"line\">        mImageLoader = imageLoader;</div><div class=\"line\">        // The URL has potentially changed. See if we need to load it.</div><div class=\"line\">        loadImageIfNecessary(false);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x53C2;&#x6570;<code>url</code>&#x4E0E;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;<code>ImageLoader</code>,&#x8BF4;&#x660E;&#x4E0D;&#x7BA1;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x65B9;&#x5F0F;<code>ImageLoader</code>&#x90FD;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x518D;&#x770B;&#x4E0B;<code>loadImageIfNecessary</code>&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div></pre></td><td class=\"code\"><pre><div class=\"line\">void loadImageIfNecessary(final boolean isInLayoutPass) {</div><div class=\"line\">        int width = getWidth();</div><div class=\"line\">        int height = getHeight();</div><div class=\"line\">        ScaleType scaleType = getScaleType();</div><div class=\"line\">   </div><div class=\"line\">        boolean wrapWidth = false, wrapHeight = false;</div><div class=\"line\">        if (getLayoutParams() != null) {</div><div class=\"line\">            wrapWidth = getLayoutParams().width == LayoutParams.WRAP_CONTENT;</div><div class=\"line\">            wrapHeight = getLayoutParams().height == LayoutParams.WRAP_CONTENT;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if the view&apos;s bounds aren&apos;t known yet, and this is not a wrap-content/wrap-content</div><div class=\"line\">        // view, hold off on loading the image.</div><div class=\"line\">        boolean isFullyWrapContent = wrapWidth &amp;&amp; wrapHeight;</div><div class=\"line\">        if (width == 0 &amp;&amp; height == 0 &amp;&amp; !isFullyWrapContent) {</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if the URL to be loaded in this view is empty, cancel any old requests and clear the</div><div class=\"line\">        // currently loaded image.</div><div class=\"line\">        if (TextUtils.isEmpty(mUrl)) {</div><div class=\"line\">            if (mImageContainer != null) {</div><div class=\"line\">                mImageContainer.cancelRequest();</div><div class=\"line\">                mImageContainer = null;</div><div class=\"line\">            }</div><div class=\"line\">            setDefaultImageOrNull();</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // if there was an old request in this view, check if it needs to be canceled.</div><div class=\"line\">        if (mImageContainer != null &amp;&amp; mImageContainer.getRequestUrl() != null) {</div><div class=\"line\">            if (mImageContainer.getRequestUrl().equals(mUrl)) {</div><div class=\"line\">                // if the request is from the same URL, return.</div><div class=\"line\">                return;</div><div class=\"line\">            } else {</div><div class=\"line\">                // if there is a pre-existing request, cancel it if it&apos;s fetching a different URL.</div><div class=\"line\">                mImageContainer.cancelRequest();</div><div class=\"line\">                setDefaultImageOrNull();</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">   </div><div class=\"line\">        // Calculate the max image width / height to use while ignoring WRAP_CONTENT dimens.</div><div class=\"line\">        int maxWidth = wrapWidth ? 0 : width;</div><div class=\"line\">        int maxHeight = wrapHeight ? 0 : height;</div><div class=\"line\">     </div><div class=\"line\">        // The pre-existing content of this view didn&apos;t match the current URL. Load the new image</div><div class=\"line\">        // from the network.</div><div class=\"line\">        ImageContainer newContainer = mImageLoader.get(mUrl,</div><div class=\"line\">                new ImageListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onErrorResponse(VolleyError error) {</div><div class=\"line\">                        if (mErrorImageId != 0) {</div><div class=\"line\">                                 setImageResource(mErrorImageId);</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">      </div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onResponse(final ImageContainer response, boolean isImmediate) {</div><div class=\"line\">                        // If this was an immediate response that was delivered inside of a layout</div><div class=\"line\">                        // pass do not set the image immediately as it will trigger a requestLayout</div><div class=\"line\">                        // inside of a layout. Instead, defer setting the image by posting back to</div><div class=\"line\">                        // the main thread.</div><div class=\"line\">                        if (isImmediate &amp;&amp; isInLayoutPass) {</div><div class=\"line\">                            post(new Runnable() {</div><div class=\"line\">                                @Override</div><div class=\"line\">                                public void run() {</div><div class=\"line\">                                      onResponse(response, false);</div><div class=\"line\">                                }</div><div class=\"line\">                            });</div><div class=\"line\">                            return;</div><div class=\"line\">                        }</div><div class=\"line\"></div><div class=\"line\">                        if (response.getBitmap() != null) {</div><div class=\"line\">                                 setImageBitmap(response.getBitmap());</div><div class=\"line\">                        } else if (mDefaultImageId != 0) {</div><div class=\"line\">                                   setImageResource(mDefaultImageId);</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }, maxWidth, maxHeight, scaleType);</div><div class=\"line\"> </div><div class=\"line\">        // update the ImageContainer to be the new bitmap container.</div><div class=\"line\">        mImageContainer = newContainer;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x4F46;&#x90FD;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#xFF0C;&#x524D;&#x9762;&#x4E00;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x5BF9;&#x5BBD;&#x5EA6;&#x4E0E;&#x9AD8;&#x5EA6;&#x7684;&#x8BA1;&#x7B97;&#xFF0C;&#x4F7F;&#x56FE;&#x7247;&#x80FD;&#x9002;&#x5E94;&#x63A7;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x627E;&#x5230;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x6089;&#x7684;&#xFF08;<code>48</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#xFF0C;&#x5B83;&#x5C31;&#x662F;&#x524D;&#x9762;&#x7684;<code>get</code>&#x65B9;&#x6CD5;&#x4EE5;&#x53CA;<code>ImageListener</code>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x4FE1;&#x73B0;&#x5728;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x5B83;&#x8C03;&#x7528;&#x7684;&#x6E90;&#x7801;&#x90FD;&#x5728;&#x524D;&#x9762;&#x8BB2;&#x4E86;&#x3002;&#x518D;&#x5411;&#x4E0A;&#x8D70;(<code>32</code>&#x884C;&#x4EE3;&#x7801;)&#x53D1;&#x73B0;&#x6CA1;&#xFF0C;&#x5B83;&#x5C06;&#x5F53;&#x524D;<code>NetWorkImageView</code>&#x4E2D;&#x7684;<code>ImageContainer</code>&#x4E2D;&#x4FDD;&#x5B58;&#x7684;<code>url</code>&#x4E0E;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x76F8;&#x6BD4;&#x8F83;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4E0E;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;<code>&#x9632;&#x95EA;&#x70C1;&#x4E0E;&#x5F02;&#x4F4D;</code>&#x7684;&#x5904;&#x7406;&#x76F8;&#x4F3C;&#x5462;&#xFF1F;&#x4F60;&#x770B;&#xFF0C;&#x5982;&#x679C;<code>url</code>&#x76F8;&#x540C;&#x7684;&#x8BDD;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x63A7;&#x4EF6;&#x4E0A;&#x6240;&#x663E;&#x793A;&#x7684;&#x56FE;&#x7247;&#x4E0E;&#x7ED3;&#x679C;&#x543B;&#x5408;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF1B;&#x5426;&#x5219;<code>mImageContainer.cancelRequest()</code>&#x53D6;&#x6D88;&#x539F;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;<code>setDefaultImageOrNull()</code>&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x77E5;&#x9053;&#xFF1A;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#x5C31;&#x663E;&#x793A;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x8BBE;&#x7F6E;&#x7A7A;&#x56FE;&#x7247;&#x4E0D;&#x663E;&#x793A;&#x3002;&#x540E;&#x9762;&#x7684;&#x5904;&#x7406;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x7684;<code>get</code>&#x5904;&#x7406;&#x4E86;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x6240;&#x4EE5;<code>NetWorkImageView</code>&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x76F8;&#x5BF9;&#x4E8E;&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x66F4;&#x5BB9;&#x6613;&#x4E0A;&#x624B;&#x3002;</p>\n<h1 id=\"&#x5410;&#x69FD;\"><a href=\"#&#x5410;&#x69FD;\" class=\"headerlink\" title=\"&#x5410;&#x69FD;\"></a>&#x5410;&#x69FD;</h1><p>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x6700;&#x7EC8;&#x90FD;&#x662F;&#x8C03;&#x7528;&#x7684;<code>ImageRequest</code>&#xFF0C;&#x800C;<code>ImageRequest</code>&#x662F;&#x7EE7;&#x627F;&#x4E0E;<code>Request</code>&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x8D70;&#x5230;&#x4E86;&#x524D;&#x9762;&#x90A3;&#x7BC7;&#x6587;&#x7AE0;&#x6240;&#x8BB2;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x540C;&#x7406;&#x518D;&#x53BB;&#x770B;<code>StringRequest</code>&#x3001;<code>JsonObjectRequest</code>&#x4E0E;<code>JsonArrayRequest</code>&#x90FD;&#x662F;&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x91CD;&#x5199;<code>deliverResponse</code>&#x4E0E;<code>parseNetworkResponse</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x540C;&#x6837;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x53C8;&#x56DE;&#x5230;&#x4E86;<a href=\"https://idisfkj.github.io/2016/10/14/Android-Volley%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android Volley&#x6E90;&#x7801;&#x5206;&#x6790;(&#x4E00;)</a>&#x4E2D;&#x6240;&#x5206;&#x6790;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x91CC;&#x5BF9;<code>Volley</code>&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x7684;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x6982;&#x62EC;</p>\n<ul>\n<li>&#x521B;&#x5EFA;<code>RequestQueue</code></li>\n<li>&#x521B;&#x5EFA;<code>ImageLoader</code></li>\n<li>&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x3002;&#x7EE7;&#x627F;<code>LruCache</code>&#x5B9E;&#x73B0;<code>ImageLoader</code>&#x7684;<code>ImageLoader.ImageCache</code>&#x63A5;&#x53E3;</li>\n<li>&#x5982;&#x679C;&#x4F7F;&#x7528;<code>ImageView</code>&#x5219;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;<code>ImageLoader.ImageListener</code>,&#x8C03;&#x7528;<code>get</code>&#x65B9;&#x6CD5;</li>\n<li>&#x5982;&#x679C;&#x4F7F;&#x7528;<code>NetWorkImageView</code>&#x5219;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>setImageUrl</code>&#x65B9;&#x6CD5;</li>\n</ul>\n"},{"title":"Android Volley源码分析(一)","url":"https://www.rousetime.com/2016/10/14/Android-Volley源码分析-一/","content":"<p><code>volley</code>&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;<code>Android</code>&#x5F00;&#x6E90;&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x5DF1;&#x5E73;&#x65F6;&#x4E5F;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x4F46;&#x81EA;&#x5DF1;&#x5BF9;&#x4E8E;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x5E76;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x592A;&#x591A;&#x7684;&#x6DF1;&#x7A76;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x4EE5;&#x540E;&#x80FD;&#x66F4;&#x901A;&#x900F;&#x7684;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x81EA;&#x5DF1;&#x6709;&#x4E86;&#x4E00;&#x70B9;&#x7814;&#x7A76;&#xFF0C;&#x505A;&#x4E2A;&#x7B14;&#x8BB0;&#x540C;&#x65F6;&#x4E0E;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x5206;&#x4EAB;&#x3002;&#x671F;&#x95F4;&#x81EA;&#x5DF1;&#x4E5F;&#x753B;&#x4E86;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x7406;&#x89E3;&#x5176;&#x4E2D;&#x7684;&#x6B65;&#x9AA4;&#x4E0E;&#x539F;&#x7406;&#x3002;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"/2016/10/14/Android-Volley&#x6E90;&#x7801;&#x5206;&#x6790;-&#x4E00;/Volley&#x6846;&#x67B6;&#x56FE;.png\" alt=\"Volley&#x6846;&#x67B6;&#x56FE;\"><br>&#x5F00;&#x59CB;&#x770B;&#x53EF;&#x80FD;&#x4F1A;&#x4E00;&#x8138;&#x61F5;&#x903C;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7ED3;&#x5408;&#x6E90;&#x7801;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x6765;&#xFF0C;&#x73B0;&#x5728;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x8FDB;&#x5165;<code>Volley</code>&#x7684;&#x6E90;&#x7801;&#x4E16;&#x754C;&#xFF0C;&#x6765;&#x89E3;&#x8BFB;&#x5927;&#x795E;&#x4EEC;&#x7684;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x3002;</p>\n<h1 id=\"newRequestQueue\"><a href=\"#newRequestQueue\" class=\"headerlink\" title=\"newRequestQueue\"></a>newRequestQueue</h1><p>&#x5982;&#x679C;&#x4F7F;&#x7528;&#x8FC7;<code>Volley</code>&#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8FD8;&#x662F;&#x4EC0;&#x4E48;&#x522B;&#x7684;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#xFF0C;&#x9996;&#x5148;&#x90FD;&#x8981;&#x521B;&#x5EFA;&#x597D;&#x4E00;&#x4E2A;<code>RequestQueue</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static final RequestQueue volleyQueue = Volley.newRequestQueue(App.mContext);</div></pre></td></tr></table></figure>\n<p>&#x800C;<code>RequestQueue</code>&#x7684;&#x521B;&#x5EFA;&#x81EA;&#x7136;&#x79BB;&#x4E0D;&#x5F00;<code>Volley</code>&#x4E2D;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;<code>newRequestQueue</code>&#xFF0C;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x7247;&#x4E5F;&#x80FD;&#x77E5;&#x9053;&#x9996;&#x5148;&#x8FDB;&#x5165;&#x70B9;&#x662F;<code>newRequestQueue</code>,&#x597D;&#x4E86;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static RequestQueue newRequestQueue(Context context, HttpStack stack) {</div><div class=\"line\">        File cacheDir = new File(context.getCacheDir(), DEFAULT_CACHE_DIR);</div><div class=\"line\">        String userAgent = &quot;volley/0&quot;;</div><div class=\"line\">        try {</div><div class=\"line\">            String packageName = context.getPackageName();</div><div class=\"line\">            PackageInfo info = context.getPackageManager().getPackageInfo(packageName, 0);</div><div class=\"line\">            userAgent = packageName + &quot;/&quot; + info.versionCode;</div><div class=\"line\">        } catch (NameNotFoundException e) {</div><div class=\"line\">        }</div><div class=\"line\">        if (stack == null) {</div><div class=\"line\">            if (Build.VERSION.SDK_INT &gt;= 9) {</div><div class=\"line\">                stack = new HurlStack();</div><div class=\"line\">            } else {</div><div class=\"line\">                // Prior to Gingerbread, HttpUrlConnection was unreliable.</div><div class=\"line\">                // See: http://android-developers.blogspot.com/2011/09/androids-http-clients.html</div><div class=\"line\">                stack = new HttpClientStack(AndroidHttpClient.newInstance(userAgent));</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        Network network = new BasicNetwork(stack);</div><div class=\"line\">        RequestQueue queue = new RequestQueue(new DiskBasedCache(cacheDir), network);</div><div class=\"line\">        queue.start();</div><div class=\"line\">        return queue;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x6E90;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x80FD;&#x53D1;&#x73B0;&#x6709;&#x4E00;&#x4E2A;<code>stack</code>&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7740;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x901A;&#x4FE1;<code>HttpClient</code>&#x4E0E;<code>HttpUrlConnection</code>&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E3A;<code>null</code>&#x3002;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x8FDB;&#x5224;&#x65AD;&#x9009;&#x62E9;&#x66F4;&#x9002;&#x5408;&#x7684;&#x3002;&#x5F53;&#x624B;&#x673A;&#x7248;&#x672C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;<code>9</code>&#x65F6;&#x4F1A;&#x4F7F;&#x7528;<code>HurlStack</code>&#x5B83;&#x91CC;&#x9762;&#x4F7F;&#x7528;<code>HttpUrlConnection</code>&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x800C;&#x5C0F;&#x4E8E;<code>9</code>&#x65F6;&#x5219;&#x521B;&#x5EFA;<code>HttpClientStack</code>&#xFF0C;&#x5B83;&#x91CC;&#x9762;&#x81EA;&#x7136;&#x662F;<code>HttpClient</code>&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x901A;&#x8FC7;<code>BasicNetwork</code>&#x6784;&#x9020;&#x6210;<code>Network</code>&#x6765;&#x8FDB;&#x884C;&#x4F20;&#x9012;&#x4F7F;&#x7528;&#xFF1B;&#x5728;&#x8FD9;&#x4E4B;&#x540E;&#x6784;&#x5EFA;&#x4E86;<code>RequestQueue</code>&#xFF0C;&#x5176;&#x4E2D;&#x5E2E;&#x6211;&#x4EEC;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;<code>new DiskBasedCache(cacheDir)</code>&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>5MB</code>,&#x7F13;&#x5B58;&#x76EE;&#x5F55;&#x4E3A;<code>volley</code>&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x80FD;&#x5728;<code>data/data/&#x5E94;&#x7528;&#x5305;&#x540D;/volley</code>&#x4E0B;&#x627E;&#x5230;&#x7F13;&#x5B58;&#x3002;&#x6700;&#x540E;&#x8C03;&#x7528;&#x5176;<code>start</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;<code>RequestQueue</code>&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x7B2C;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>RequestQueue</code>&#x4E2D;&#x7684;<code>start</code>&#x65B9;&#x6CD5;&#x770B;&#x4E0B;&#x5B83;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>\n<h1 id=\"RequestQueue\"><a href=\"#RequestQueue\" class=\"headerlink\" title=\"RequestQueue\"></a>RequestQueue</h1><p>&#x5728;<code>RequestQueue</code>&#x4E2D;&#x901A;&#x8FC7;<code>this</code>&#x8C03;&#x7528;&#x81EA;&#x8EAB;&#x6765;&#x9ED8;&#x8BA4;&#x5E2E;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public RequestQueue(Cache cache, Network network, int threadPoolSize,</div><div class=\"line\">            ResponseDelivery delivery) {</div><div class=\"line\">        mCache = cache;</div><div class=\"line\">        mNetwork = network;</div><div class=\"line\">        mDispatchers = new NetworkDispatcher[threadPoolSize];</div><div class=\"line\">        mDelivery = delivery;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p><code>cache</code>&#x540E;&#x7EED;&#x5728;<code>NetworkDispatcher</code>&#x4E2D;&#x4F1A;&#x5E2E;&#x6211;&#x4EEC;&#x8FDB;&#x884C;<code>response.cacheEntry</code>&#x7684;&#x7F13;&#x5B58;&#xFF0C;<code>netWork</code>&#x662F;&#x524D;&#x9762;&#x7684;&#x6839;&#x636E;&#x7248;&#x672C;&#x6240;&#x5C01;&#x88C5;&#x7684;&#x901A;&#x4FE1;&#xFF0C;<code>threadPoolSize</code>&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#x9ED8;&#x8BA4;&#x4E3A;<code>4</code>&#xFF0C;<code>delivery</code>,&#x662F;<code>ExecutorDelivery</code>&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;,&#x5728;&#x6700;&#x540E;&#x5BF9;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x5206;&#x53D1;&#x3002;</p>\n<h2 id=\"start\"><a href=\"#start\" class=\"headerlink\" title=\"start\"></a>start</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void start() {</div><div class=\"line\">        stop();  // Make sure any currently running dispatchers are stopped.</div><div class=\"line\">        // Create the cache dispatcher and start it.</div><div class=\"line\">        mCacheDispatcher = new CacheDispatcher(mCacheQueue, mNetworkQueue, mCache, mDelivery);</div><div class=\"line\">        mCacheDispatcher.start();</div><div class=\"line\">        // Create network dispatchers (and corresponding threads) up to the pool size.</div><div class=\"line\">        for (int i = 0; i &lt; mDispatchers.length; i++) {</div><div class=\"line\">            NetworkDispatcher networkDispatcher = new NetworkDispatcher(mNetworkQueue, mNetwork,</div><div class=\"line\">                    mCache, mDelivery);</div><div class=\"line\">            mDispatchers[i] = networkDispatcher;</div><div class=\"line\">            networkDispatcher.start();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>start</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x4E24;&#x4E2A;<code>dispatch</code>,&#x4E00;&#x4E2A;&#x662F;<code>CacheDispatcher</code>&#x7F13;&#x5B58;&#x6D3E;&#x9063;,&#x53E6;&#x4E00;&#x4E2A;&#x662F;<code>networkDispatcher</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x6D3E;&#x9063;&#xFF0C;&#x5176;&#x5B9E;&#x4ED6;&#x4EEC;&#x90FD;&#x662F;<code>Thread</code>&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x8C03;&#x7528;&#x4E86;&#x4ED6;&#x4EEC;&#x7684;<code>start</code>&#x65B9;&#x6CD5;&#x3002;&#x5176;&#x4E2D;<code>networkDispatcher</code>&#x9ED8;&#x8BA4;&#x6784;&#x5EFA;&#x4E86;<code>4</code>&#x4E2A;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5305;&#x542B;<code>4</code>&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5148;&#x4E0D;&#x53BB;&#x770B;&#x4ED6;&#x4EEC;&#x5185;&#x90E8;&#x7684;<code>run</code>&#x65B9;&#x6CD5;&#x5230;&#x5E95;&#x5B9E;&#x73B0;&#x4E86;&#x4EC0;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x63A5;&#x7740;&#x770B;<code>RequestQueue</code>&#x4E2D;&#x6211;&#x4EEC;&#x9891;&#x7E41;&#x4F7F;&#x7528;&#x7684;<code>add</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"add\"><a href=\"#add\" class=\"headerlink\" title=\"add\"></a>add</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">public &lt;T&gt; Request&lt;T&gt; add(Request&lt;T&gt; request) {</div><div class=\"line\">        // Tag the request as belonging to this queue and add it to the set of current requests.</div><div class=\"line\">        request.setRequestQueue(this);</div><div class=\"line\">        synchronized (mCurrentRequests) {</div><div class=\"line\">            mCurrentRequests.add(request);</div><div class=\"line\">        }</div><div class=\"line\">        // Process requests in the order they are added.</div><div class=\"line\">        request.setSequence(getSequenceNumber());</div><div class=\"line\">        request.addMarker(&quot;add-to-queue&quot;);</div><div class=\"line\">        // If the request is uncacheable, skip the cache queue and go straight to the network.</div><div class=\"line\">        if (!request.shouldCache()) {</div><div class=\"line\">            mNetworkQueue.add(request);</div><div class=\"line\">            return request;</div><div class=\"line\">        }</div><div class=\"line\">        // Insert request into stage if there&apos;s already a request with the same cache key in flight.</div><div class=\"line\">        synchronized (mWaitingRequests) {</div><div class=\"line\">            String cacheKey = request.getCacheKey();</div><div class=\"line\">            if (mWaitingRequests.containsKey(cacheKey)) {</div><div class=\"line\">                // There is already a request in flight. Queue up.</div><div class=\"line\">                Queue&lt;Request&lt;?&gt;&gt; stagedRequests = mWaitingRequests.get(cacheKey);</div><div class=\"line\">                if (stagedRequests == null) {</div><div class=\"line\">                    stagedRequests = new LinkedList&lt;Request&lt;?&gt;&gt;();</div><div class=\"line\">                }</div><div class=\"line\">                stagedRequests.add(request);</div><div class=\"line\">                mWaitingRequests.put(cacheKey, stagedRequests);</div><div class=\"line\">                if (VolleyLog.DEBUG) {</div><div class=\"line\">                    VolleyLog.v(&quot;Request for cacheKey=%s is in flight, putting on hold.&quot;, cacheKey);</div><div class=\"line\">                }</div><div class=\"line\">            } else {</div><div class=\"line\">                // Insert &apos;null&apos; queue for this cacheKey, indicating there is now a request in</div><div class=\"line\">                // flight.</div><div class=\"line\">                mWaitingRequests.put(cacheKey, null);</div><div class=\"line\">                mCacheQueue.add(request);</div><div class=\"line\">            }</div><div class=\"line\">            return request;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x56FE;&#xFF0C;&#x9996;&#x5148;&#x4F1A;&#x4E3A;&#x5F53;&#x524D;&#x7684;<code>request</code>&#x8BBE;&#x7F6E;<code>RequestQueue</code>,&#x5E76;&#x4E14;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x540C;&#x6B65;&#x662F;&#x5426;&#x662F;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>mCurrentRequests</code>&#x4E2D;&#xFF0C;&#x770B;<code>11</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x4E4B;&#x540E;&#x5BF9;&#x5F53;&#x524D;<code>request</code>&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF08;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;<code>true</code>&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x53EF;&#x8C03;&#x7528;<code>request.setShouldCache()</code>&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF09;,&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x5219;&#x76F4;&#x63A5;&#x52A0;&#x5165;&#x5230;&#x524D;&#x9762;&#x7684;<code>mNetworkQueue</code>&#x4E2D;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;<code>CacheDispatcher</code>&#x4E0E;<code>NetworkDispatcher</code>&#x4E2D;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;<code>request</code>&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF0C;&#x770B;16&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5219;&#x5BF9;<code>mWaitingRequests</code>&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;<code>cacheKey</code>&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#x3002;&#x5176;&#x4E2D;<code>cacheKey</code>&#x4E3A;&#x8BF7;&#x6C42;&#x7684;<code>url</code>&#x3002;&#x6700;&#x540E;&#x518D;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x961F;&#x5217;<code>mCacheQueue</code>&#x4E2D;&#x3002;</p>\n<h2 id=\"finish\"><a href=\"#finish\" class=\"headerlink\" title=\"finish\"></a>finish</h2><p>&#x7EC6;&#x5FC3;&#x7684;&#x4EBA;&#x4F1A;&#x53D1;&#x73B0;&#x5F53;&#x5BF9;&#x5E94;<code>cacheKey</code>&#x7684;<code>value</code>&#x4E0D;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x521B;&#x5EFA;&#x4E86;<code>LinkedList</code>&#x5373;<code>Queue</code>,&#x53EA;&#x662F;&#x5C06;<code>request</code>&#x52A0;&#x5165;&#x5230;&#x4E86;<code>Queue</code>&#x4E2D;&#xFF0C;&#x53EA;&#x662F;&#x66F4;&#x65B0;&#x4E86;<code>mWaitingRequests</code>&#x4E2D;&#x76F8;&#x5E94;&#x7684;<code>value</code>&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x52A0;&#x5165;&#x5230;<code>mCacheQueue</code>&#x4E2D;&#x3002;&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x7EED;&#x4F1A;&#x8C03;&#x7528;<code>finish</code>&#x65B9;&#x6CD5;,&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6E90;&#x7801;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;T&gt; void finish(Request&lt;T&gt; request) {</div><div class=\"line\">        // Remove from the set of requests currently being processed.</div><div class=\"line\">        synchronized (mCurrentRequests) {</div><div class=\"line\">            mCurrentRequests.remove(request);</div><div class=\"line\">        }</div><div class=\"line\">        synchronized (mFinishedListeners) {</div><div class=\"line\">          for (RequestFinishedListener&lt;T&gt; listener : mFinishedListeners) {</div><div class=\"line\">            listener.onRequestFinished(request);</div><div class=\"line\">          }</div><div class=\"line\">        }</div><div class=\"line\">        if (request.shouldCache()) {</div><div class=\"line\">            synchronized (mWaitingRequests) {</div><div class=\"line\">                String cacheKey = request.getCacheKey();</div><div class=\"line\">                Queue&lt;Request&lt;?&gt;&gt; waitingRequests = mWaitingRequests.remove(cacheKey);</div><div class=\"line\">                if (waitingRequests != null) {</div><div class=\"line\">                    if (VolleyLog.DEBUG) {</div><div class=\"line\">                        VolleyLog.v(&quot;Releasing %d waiting requests for cacheKey=%s.&quot;,</div><div class=\"line\">                                waitingRequests.size(), cacheKey);</div><div class=\"line\">                    }</div><div class=\"line\">                    // Process all queued up requests. They won&apos;t be considered as in flight, but</div><div class=\"line\">                    // that&apos;s not a problem as the cache has been primed by &apos;request&apos;.</div><div class=\"line\">                    mCacheQueue.addAll(waitingRequests);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x770B;<code>14</code>&#x3001;<code>22</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x6B63;&#x5982;&#x4E0A;&#x9762;&#x6211;&#x6240;&#x8BF4;&#xFF0C;&#x4F1A;&#x5C06;<code>Queue</code>&#x4E2D;&#x7684;<code>request</code>&#x5168;&#x90E8;&#x52A0;&#x5165;&#x5230;<code>mCacheQueue</code>&#x4E2D;&#x3002;<br>&#x597D;&#x4E86;<code>RequestQueue</code>&#x7684;&#x4E3B;&#x8981;&#x6E90;&#x7801;&#x5DEE;&#x4E0D;&#x591A;&#x5C31;&#x8FD9;&#x4E9B;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8FDB;&#x5165;<code>CacheDispatcher</code>&#x7684;&#x6E90;&#x7801;&#x5206;&#x6790;,&#x770B;&#x5B83;&#x7A76;&#x7ADF;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;</p>\n<h1 id=\"CacheDispatcher\"><a href=\"#CacheDispatcher\" class=\"headerlink\" title=\"CacheDispatcher\"></a>CacheDispatcher</h1><p>&#x524D;&#x9762;&#x63D0;&#x5230;&#x4E86;&#x5B83;&#x4E0E;<code>NetworkDispatcher</code>&#x672C;&#x8D28;&#x90FD;&#x662F;<code>Thread</code>&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x81EA;&#x7136;&#x662F;&#x770B;<code>run</code>&#x65B9;&#x6CD5;</p>\n<h2 id=\"run\"><a href=\"#run\" class=\"headerlink\" title=\"run\"></a>run</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">        if (DEBUG) VolleyLog.v(&quot;start new dispatcher&quot;);</div><div class=\"line\">                Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);</div><div class=\"line\">        </div><div class=\"line\">        // Make a blocking call to initialize the cache.</div><div class=\"line\">        mCache.initialize();</div><div class=\"line\">                </div><div class=\"line\">        while (true) {</div><div class=\"line\">            try {</div><div class=\"line\">                // Get a request from the cache triage queue, blocking until</div><div class=\"line\">                // at least one is available.</div><div class=\"line\">                final Request&lt;?&gt; request = mCacheQueue.take();</div><div class=\"line\">                request.addMarker(&quot;cache-queue-take&quot;);</div><div class=\"line\">                </div><div class=\"line\">                // If the request has been canceled, don&apos;t bother dispatching it.</div><div class=\"line\">                if (request.isCanceled()) {</div><div class=\"line\">                    request.finish(&quot;cache-discard-canceled&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // Attempt to retrieve this item from cache.</div><div class=\"line\">                Cache.Entry entry = mCache.get(request.getCacheKey());</div><div class=\"line\">                if (entry == null) {</div><div class=\"line\">                    request.addMarker(&quot;cache-miss&quot;);</div><div class=\"line\">                    // Cache miss; send off to the network dispatcher.</div><div class=\"line\">                    mNetworkQueue.put(request);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // If it is completely expired, just send it to the network.</div><div class=\"line\">                if (entry.isExpired()) {</div><div class=\"line\">                    request.addMarker(&quot;cache-hit-expired&quot;);</div><div class=\"line\">                    request.setCacheEntry(entry);</div><div class=\"line\">                    mNetworkQueue.put(request);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\">                </div><div class=\"line\">                // We have a cache hit; parse its data for delivery back to the request.</div><div class=\"line\">                request.addMarker(&quot;cache-hit&quot;);</div><div class=\"line\">                Response&lt;?&gt; response = request.parseNetworkResponse(</div><div class=\"line\">                        new NetworkResponse(entry.data, entry.responseHeaders));</div><div class=\"line\">                request.addMarker(&quot;cache-hit-parsed&quot;);</div><div class=\"line\">                    </div><div class=\"line\">                if (!entry.refreshNeeded()) {</div><div class=\"line\">                    // Completely unexpired cache hit. Just deliver the response.</div><div class=\"line\">                    mDelivery.postResponse(request, response);</div><div class=\"line\">                } else {</div><div class=\"line\">                    // Soft-expired cache hit. We can deliver the cached response,</div><div class=\"line\">                    // but we need to also send the request to the network for</div><div class=\"line\">                    // refreshing.</div><div class=\"line\">                    request.addMarker(&quot;cache-hit-refresh-needed&quot;);</div><div class=\"line\">                    request.setCacheEntry(entry);</div><div class=\"line\">                    </div><div class=\"line\">                    // Mark the response as intermediate.</div><div class=\"line\">                    response.intermediate = true;</div><div class=\"line\">             </div><div class=\"line\">                    // Post the intermediate response back to the user and have</div><div class=\"line\">                    // the delivery then forward the request along to the network.</div><div class=\"line\">                    mDelivery.postResponse(request, response, new Runnable() {</div><div class=\"line\">                        @Override</div><div class=\"line\">                        public void run() {</div><div class=\"line\">                            try {</div><div class=\"line\">                                                                            mNetworkQueue.put(request);</div><div class=\"line\">                            } catch (InterruptedException e) {</div><div class=\"line\">                                // Not much we can do about this.</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    });</div><div class=\"line\">                }</div><div class=\"line\">                                                                                          </div><div class=\"line\">            } catch (InterruptedException e) {</div><div class=\"line\">                // We may have been interrupted because it was time to quit.</div><div class=\"line\">                if (mQuit) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">                continue;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x770B;&#x8D77;&#x6765;&#x5F88;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x7ED3;&#x5408;&#x56FE;&#x6765;&#x6311;&#x4E3B;&#x8981;&#x7684;&#x770B;&#x3002;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x4E00;&#x76F4;&#x5728;&#x76D1;&#x89C6;&#x7740;<code>request</code>&#x7684;&#x53D8;&#x5316;&#x3002;&#x4ECE;&#x7F13;&#x5B58;&#x961F;&#x5217;<code>mCacheQueue</code>&#x4E2D;&#x83B7;&#x53D6;<code>request</code>,&#x5982;&#x679C;&#x8BE5;&#x8BF7;&#x6C42;&#x662F;<code>cancle</code>&#x4E86;&#xFF0C;&#x8C03;&#x7528;<code>request.finish()</code>&#x6E05;&#x9664;&#x76F8;&#x5E94;&#x6570;&#x636E;&#x5E76;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#x4ECE;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;<code>mCache</code>&#x4E2D;&#x83B7;&#x53D6;<code>Cache.Entry</code>&#x3002;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x6216;&#x8005;&#x5DF2;&#x7ECF;&#x8FC7;&#x671F;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x52A0;&#x5165;&#x5230;&#x7F51;&#x7EDC;&#x961F;&#x5217;&#x4E2D;<code>mNetWorkQueue</code>&#xFF0C;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF08;<code>41</code>&#x884C;&#x4EE3;&#x7801;&#xFF09;&#x5219;&#x8FDB;&#x884C;<code>request.parseNetworkResponse()</code>&#x89E3;&#x6790;&#x51FA;<code>response</code>,&#x4E0D;&#x540C;&#x7684;<code>request</code>&#x5BF9;&#x5E94;&#x4E0D;&#x540C;&#x7684;&#x89E3;&#x6790;&#x65B9;&#x6CD5;&#x3002;&#x4F8B;&#x5982;<code>StringRequest</code>&#x4E0E;<code>JsonObjectRequest</code>&#x6709;&#x5404;&#x81EA;&#x7684;&#x89E3;&#x6790;&#x5B9E;&#x73B0;&#x3002;&#x518D;&#x770B;<code>45</code>&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x4E0D;&#x7BA1;<code>entry</code>&#x662F;&#x5426;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7684;&#xFF0C;&#x90FD;&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x5BF9;<code>response</code>&#x8FDB;&#x884C;<code>mDelivery.postResponse(request, response)</code>&#x9012;&#x9001;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7684;&#x8BDD;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;<code>request</code>&#x7684;<code>entry</code>&#x4E0E;&#x52A0;&#x5165;&#x5230;<code>mNetworkQueue</code>&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x76F8;&#x5F53;&#x4E0E;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E00;&#x904D;&#x3002;&#x90A3;&#x4E48;&#x518D;&#x56DE;&#x5230;&#x9012;&#x9001;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x5728;&#x521B;&#x5EFA;<code>RequestQueue</code>&#x662F;&#x5B9E;&#x73B0;&#x4E86;<code>ExecutorDelivery</code>,<code>mDelivery.postResponse</code>&#x5C31;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;</p>\n<h2 id=\"ExecutorDelivery\"><a href=\"#ExecutorDelivery\" class=\"headerlink\" title=\"ExecutorDelivery\"></a>ExecutorDelivery</h2><p>&#x5728;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>Executor</code>&#xFF0C;&#x5BF9;&#x540E;&#x9762;&#x8FDB;&#x884C;&#x9012;&#x9001;,&#x4F5C;&#x7528;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ExecutorDelivery(final Handler handler) {</div><div class=\"line\">        // Make an Executor that just wraps the handler.</div><div class=\"line\">        mResponsePoster = new Executor() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void execute(Runnable command) {</div><div class=\"line\">                handler.post(command);</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div></pre></td></tr></table></figure></p>\n<h3 id=\"postResponse\"><a href=\"#postResponse\" class=\"headerlink\" title=\"postResponse\"></a>postResponse</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void postResponse(Request&lt;?&gt; request, Response&lt;?&gt; response) {</div><div class=\"line\">        postResponse(request, response, null);</div><div class=\"line\">    }</div><div class=\"line\"> </div><div class=\"line\">    @Override</div><div class=\"line\">    public void postResponse(Request&lt;?&gt; request, Response&lt;?&gt; response, Runnable runnable) {</div><div class=\"line\">        request.markDelivered();</div><div class=\"line\">        request.addMarker(&quot;post-response&quot;);</div><div class=\"line\">        mResponsePoster.execute(new ResponseDeliveryRunnable(request, response, runnable));</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#x5C31;&#x662F;&#x8C03;&#x7528;<code>execute</code>&#x8FDB;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5728;&#x8FDB;&#x5165;<code>ResponseDeliveryRunnable</code>&#x7684;<code>run</code>&#x770B;&#x5B83;&#x5982;&#x4F55;&#x6267;&#x884C;</p>\n<h3 id=\"ResponseDeliveryRunnable\"><a href=\"#ResponseDeliveryRunnable\" class=\"headerlink\" title=\"ResponseDeliveryRunnable\"></a>ResponseDeliveryRunnable</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void run() {</div><div class=\"line\">            // If this request has canceled, finish it and don&apos;t deliver.</div><div class=\"line\">            if (mRequest.isCanceled()) {</div><div class=\"line\">                mRequest.finish(&quot;canceled-at-delivery&quot;);</div><div class=\"line\">                return;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // Deliver a normal response or error, depending.</div><div class=\"line\">            if (mResponse.isSuccess()) {</div><div class=\"line\">                 mRequest.deliverResponse(mResponse.result);</div><div class=\"line\">            } else {</div><div class=\"line\">                mRequest.deliverError(mResponse.error);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // If this is an intermediate response, add a marker, otherwise we&apos;re done</div><div class=\"line\">            // and the request can be finished.</div><div class=\"line\">            if (mResponse.intermediate) {</div><div class=\"line\">                mRequest.addMarker(&quot;intermediate-response&quot;);</div><div class=\"line\">            } else {</div><div class=\"line\">                mRequest.finish(&quot;done&quot;);</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            // If we have been provided a post-delivery runnable, run it.</div><div class=\"line\">            if (mRunnable != null) {</div><div class=\"line\">                mRunnable.run();</div><div class=\"line\">            }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x4E3B;&#x8981;&#x662F;&#x7B2C;<code>9</code>&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x54CD;&#x5E94;&#x505A;&#x4E0D;&#x540C;&#x7684;&#x9012;&#x9001;&#xFF0C;<code>deliverResponse</code>&#x4E0E;<code>deliverError</code>&#x5185;&#x90E8;&#x5206;&#x522B;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x975E;&#x5E38;&#x719F;&#x6089;&#x7684;<code>Listener</code>&#x4E2D;&#x7684;<code>onResponse</code>&#x4E0E;<code>onErrorResponse</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x800C;&#x8FD4;&#x56DE;&#x5230;&#x6211;&#x4EEC;&#x5BF9;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;&#x3002;</p>\n<p>&#x8FD9;&#x5C31;&#x662F;&#x6574;&#x4E2A;&#x7684;&#x7F13;&#x5B58;&#x6D3E;&#x9063;&#xFF0C;&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5B58;&#x5728;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x5C31;&#x4E0D;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5206;&#x53D1;&#x9012;&#x9001;&#x3002;&#x53CD;&#x4E4B;&#x6267;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;<br>&#x4E0B;&#x9762;&#x6211;&#x6765;&#x770B;&#x4E0B;<code>NetworkDispatcher</code>&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7684;</p>\n<h1 id=\"NetworkDispatcher\"><a href=\"#NetworkDispatcher\" class=\"headerlink\" title=\"NetworkDispatcher\"></a>NetworkDispatcher</h1><h2 id=\"run-1\"><a href=\"#run-1\" class=\"headerlink\" title=\"run\"></a>run</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">         Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);</div><div class=\"line\">        while (true) {</div><div class=\"line\">            long startTimeMs = SystemClock.elapsedRealtime();</div><div class=\"line\">            Request&lt;?&gt; request;</div><div class=\"line\">            try {</div><div class=\"line\">                // Take a request from the queue.</div><div class=\"line\">                request = mQueue.take();</div><div class=\"line\">            } catch (InterruptedException e) {</div><div class=\"line\">                // We may have been interrupted because it was time to quit.</div><div class=\"line\">                if (mQuit) {</div><div class=\"line\">                    return;</div><div class=\"line\">                }</div><div class=\"line\">                continue;</div><div class=\"line\">            }</div><div class=\"line\"> </div><div class=\"line\">            try {</div><div class=\"line\">                request.addMarker(&quot;network-queue-take&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // If the request was cancelled already, do not perform the</div><div class=\"line\">                // network request.</div><div class=\"line\">                if (request.isCanceled()) {</div><div class=\"line\">                    request.finish(&quot;network-discard-cancelled&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                addTrafficStatsTag(request);</div><div class=\"line\"> </div><div class=\"line\">                // Perform the network request.</div><div class=\"line\">                NetworkResponse networkResponse = mNetwork.performRequest(request);</div><div class=\"line\">                request.addMarker(&quot;network-http-complete&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // If the server returned 304 AND we delivered a response already,</div><div class=\"line\">                // we&apos;re done -- don&apos;t deliver a second identical response.</div><div class=\"line\">                if (networkResponse.notModified &amp;&amp; request.hasHadResponseDelivered()) {</div><div class=\"line\">                    request.finish(&quot;not-modified&quot;);</div><div class=\"line\">                    continue;</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                // Parse the response here on the worker thread.</div><div class=\"line\">                Response&lt;?&gt; response = request.parseNetworkResponse(networkResponse);</div><div class=\"line\">                request.addMarker(&quot;network-parse-complete&quot;);</div><div class=\"line\"> </div><div class=\"line\">                // Write to cache if applicable.</div><div class=\"line\">                // TODO: Only update cache metadata instead of entire record for 304s.</div><div class=\"line\">                if (request.shouldCache() &amp;&amp; response.cacheEntry != null) {</div><div class=\"line\">                     mCache.put(request.getCacheKey(), response.cacheEntry);</div><div class=\"line\">                    request.addMarker(&quot;network-cache-written&quot;);</div><div class=\"line\">                }</div><div class=\"line\"> </div><div class=\"line\">                // Post the response back.</div><div class=\"line\">                request.markDelivered();</div><div class=\"line\">                mDelivery.postResponse(request, response);</div><div class=\"line\">            } catch (VolleyError volleyError) {</div><div class=\"line\">                 volleyError.setNetworkTimeMs(SystemClock.elapsedRealtime() - startTimeMs);</div><div class=\"line\">                parseAndDeliverNetworkError(request, volleyError);</div><div class=\"line\">            } catch (Exception e) {</div><div class=\"line\">                VolleyLog.e(e, &quot;Unhandled exception %s&quot;, e.toString());</div><div class=\"line\">                VolleyError volleyError = new VolleyError(e);</div><div class=\"line\">                 volleyError.setNetworkTimeMs(SystemClock.elapsedRealtime() - startTimeMs);</div><div class=\"line\">                mDelivery.postError(request, volleyError);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD9;&#x91CC;&#x4E5F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x7684;<code>while</code>,&#x540C;&#x6837;&#x4E5F;&#x662F;&#x5148;&#x83B7;&#x53D6;<code>request</code>&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x4ECE;<code>mQueue</code>&#x4E2D;&#xFF0C;&#x5373;&#x524D;&#x9762;&#x591A;&#x6B21;&#x51FA;&#x73B0;&#x7684;<code>mNetWorkQueue</code>,&#x901A;&#x8FC7;&#x770B;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#x4E00;&#x4E9B;&#x5B9E;&#x73B0;&#x8DDF;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x7C7B;&#x4F3C;&#x3002;&#x4E5F;&#x6B63;&#x5982;&#x56FE;&#x7247;&#x4E2D;&#x6240;&#x5C55;&#x793A;&#x7684;&#x4E00;&#x6837;&#xFF0C;&#xFF08;<code>23</code>&#x884C;&#xFF09;&#x5982;&#x4F55;&#x8BF7;&#x6C42;&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;<code>finish</code>&#xFF1B;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x8C03;&#x7528;(<code>31</code>&#x884C;)<code>mNetwork.performRequest(request)</code>&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>mNetWork</code>&#x5373;&#x4E3A;&#x524D;&#x9762;<code>RequestQueue</code>&#x4E2D;&#x5BF9;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x7684;<code>stack</code>&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5206;&#x522B;&#x8C03;&#x7528;<code>HurlStack</code>&#x4E0E;<code>HttpClientStack</code>&#x5404;&#x81EA;&#x7684;<code>performRequest</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x6784;&#x9020;&#x8BF7;&#x6C42;&#x5934;&#x4E0E;&#x53C2;&#x6570;&#x5206;&#x522B;&#x4F7F;&#x7528;<code>HttpClient</code>&#x6216;&#x8005;<code>HttpUrlConnection</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>42</code>&#x884C;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x4E0E;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x4E00;&#x6837;&#x8FDB;&#x884C;<code>response</code>&#x8FDB;&#x884C;&#x89E3;&#x6790;&#xFF0C;&#x7136;&#x540E;&#x5982;&#x679C;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x5C31;&#x52A0;&#x5165;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#xFF08;<code>54</code>&#x884C;&#xFF09;&#x518D;&#x8C03;&#x7528;<code>mDelivery.postResponse(request, response)</code>&#x8FDB;&#x884C;&#x9012;&#x9001;&#x3002;&#x81F3;&#x4E8E;&#x540E;&#x9762;&#x7684;&#x5269;&#x4F59;&#x7684;&#x6B65;&#x9AA4;&#x4E0E;<code>CacheDispatcher</code>&#x4E2D;&#x7684;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x7D2F;&#x8D58;&#x4E86;&#x3002;</p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#xFF0C;<code>Volley</code>&#x7684;&#x6E90;&#x7801;&#x89E3;&#x6790;&#x5148;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x56DE;&#x8FC7;&#x53BB;&#x770B;&#x90A3;&#x5F20;&#x56FE;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x6E05;&#x6670;&#x4E86;&#x5462;?</em></p>\n</blockquote>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6211;&#x4EEC;&#x6765;&#x5BF9;&#x4F7F;&#x7528;<code>Volley</code>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x505A;&#x4E2A;&#x603B;&#x7ED3;</p>\n<ul>\n<li>&#x901A;&#x8FC7;<code>newRequestQueue</code>&#x521D;&#x59CB;&#x5316;&#x4E0E;&#x6784;&#x9020;<code>RequestQueue</code></li>\n<li>&#x8C03;&#x7528;<code>RequestQueue</code>&#x4E2D;&#x7684;<code>add</code>&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;<code>request</code>&#x5230;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;</li>\n<li>&#x7F13;&#x5B58;&#x6D3E;&#x9063;&#xFF0C;&#x5148;&#x8FDB;&#x884C;<code>CacheDispatcher</code>,&#x5224;&#x65AD;&#x7F13;&#x5B58;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x6709;&#x5219;&#x89E3;&#x6790;<code>response</code>&#xFF0C;&#x518D;&#x76F4;&#x63A5;<code>postResponse</code>&#x9012;&#x9001;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</li>\n<li>&#x7F51;&#x7EDC;&#x6D3E;&#x9063;&#xFF0C;<code>NetworkDispatcher</code>&#x4E2D;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;<code>request</code>&#x8BF7;&#x6C42;&#xFF0C;&#x89E3;&#x6790;<code>response</code>&#x5982;&#x8BBE;&#x7F6E;&#x4E86;&#x7F13;&#x5B58;&#x5C31;&#x5C06;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5230;<code>cache</code>&#x4E2D;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x6700;&#x540E;&#x7684;<code>postResponse</code>&#x9012;&#x9001;&#x3002;</li>\n</ul>\n"},{"title":"AIDL入门","url":"https://www.rousetime.com/2016/09/25/AIDL入门/","content":"<p>&#x4E00;&#x76F4;&#x542C;&#x8BF4;<code>AIDL</code>&#x4F46;&#x662F;&#x81EA;&#x5DF1;&#x8FD8;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x4F7F;&#x7528;&#x8FC7;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x78B0;&#x5230;&#x8FC7;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x80FD;&#x6210;&#x4E3A;&#x6211;&#x4E0D;&#x53BB;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x501F;&#x53E3;&#x3002;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x6709;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x548C;&#x6211;&#x4E00;&#x8D77;&#x8FDB;&#x884C;&#x4E86;&#x89E3;&#xFF08;&#x4EC5;&#x9650;&#x4E8E;&#x5165;&#x95E8;&#xFF0C;&#x5927;&#x795E;&#x53EF;&#x4EE5;&#x79FB;&#x6B65;&#x4E86;&#xFF09;</p>\n<h2 id=\"&#x4EC0;&#x4E48;&#x662F;AIDL\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;AIDL\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;AIDL\"></a>&#x4EC0;&#x4E48;&#x662F;AIDL</h2><p>&#x4EC0;&#x4E48;&#x662F;AIDL&#x5462;&#xFF1F;&#x5B83;&#x7684;&#x5168;&#x79F0;&#x662F;<code>Android Interface Definition Language</code>,&#x4E2D;&#x6587;&#x540D;&#x5B57;&#x5C31;&#x662F;<code>Android</code>&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x8BED;&#x8A00;&#x3002;<code>Android</code>&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x5171;&#x4EAB;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;<code>Android</code>&#x91C7;&#x7528;&#x8FDC;&#x7A0B;&#x8FC7;&#x7A0B;&#x8C03;&#x5EA6;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x4E0E;&#x516C;&#x5F00;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x8DE8;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x6210;&#x4E3A;AIDL&#x3002;</p>\n<h2 id=\"&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\"><a href=\"#&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;\"></a>&#x5B9E;&#x73B0;AIDL&#x7684;&#x6B65;&#x9AA4;</h2><p>&#x603B;&#x4F53;&#x6765;&#x8BF4;&#x6211;&#x628A;&#x5176;&#x5206;&#x4E3A;3&#x4E2A;&#x6B65;&#x9AA4;</p>\n<ul>\n<li>&#x521B;&#x5EFA;&#x76F8;&#x5E94;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#xFF0C;&#x4E0E;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;</li>\n<li>&#x5B9E;&#x73B0;&#x521B;&#x5EFA;&#x7684;&#x63A5;&#x53E3;</li>\n<li>&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x66B4;&#x9732;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x8C03;&#x7528;</li>\n</ul>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x8BF4;&#x5404;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;&#x5B9E;&#x73B0;</p>\n<h2 id=\"&#x521B;&#x5EFA;-aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\"><a href=\"#&#x521B;&#x5EFA;-aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;.aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;\"></a>&#x521B;&#x5EFA;.aidl&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;</h2><p>&#x5728;<code>Android Studio</code>&#x4E2D;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7684;<code>src</code>&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>.aidl</code>&#x6587;&#x4EF6;</p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x8FD9;&#x4E2A;&#x65B0;&#x5EFA;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#x662F;&#x5B9A;&#x4E49;&#x8FDC;&#x7A0B;&#x8FDB;&#x7A0B;&#x6240;&#x4EE5;&#x66B4;&#x9732;&#x7684;&#x63A5;&#x53E3;,&#x6211;&#x8FD9;&#x91CC;&#x547D;&#x540D;&#x4E3A;<code>IRemoteService</code>&#x3002;&#x521B;&#x5EFA;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x5728;<code>src/main/aidl</code>&#x4E2D;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x4EEC;&#x66B4;&#x9732;&#x4E00;&#x4E2A;<code>sayHello</code>&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x662F;<code>HelloMessage</code>&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">// IRemoteService.aidl</div><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">// Declare any non-default types here with import statements</div><div class=\"line\">import com.idisfkj.aidldemo.HelloMessage;</div><div class=\"line\">interface IRemoteService {</div><div class=\"line\">    /**</div><div class=\"line\">     * Demonstrates some basic types that you can use as parameters</div><div class=\"line\">     * and return values in AIDL.</div><div class=\"line\">     */</div><div class=\"line\">    void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat,</div><div class=\"line\">            double aDouble, String aString);</div><div class=\"line\"></div><div class=\"line\">    HelloMessage sayHello();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6765;&#x521B;&#x5EFA;<code>HelloMessage</code>&#x7C7B;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7684;<code>main/java</code>&#x4E2D;&#x521B;&#x5EFA;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">import android.os.Parcel;</div><div class=\"line\">import android.os.Parcelable;</div><div class=\"line\"></div><div class=\"line\">public class HelloMessage implements Parcelable{</div><div class=\"line\">    private String message;</div><div class=\"line\">    private int pId;</div><div class=\"line\"></div><div class=\"line\">    public HelloMessage(String message, int pId) {</div><div class=\"line\">        this.message = message;</div><div class=\"line\">        this.pId = pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    protected HelloMessage(Parcel in) {</div><div class=\"line\">        message = in.readString();</div><div class=\"line\">        pId = in.readInt();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static final Creator&lt;HelloMessage&gt; CREATOR = new Creator&lt;HelloMessage&gt;() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage createFromParcel(Parcel in) {</div><div class=\"line\">            return new HelloMessage(in);</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage[] newArray(int size) {</div><div class=\"line\">            return new HelloMessage[size];</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    public String getMessage() {</div><div class=\"line\">        return message;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setMessage(String message) {</div><div class=\"line\">        this.message = message;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public int getpId() {</div><div class=\"line\">        return pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setpId(int pId) {</div><div class=\"line\">        this.pId = pId;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public int describeContents() {</div><div class=\"line\">        return 0;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void writeToParcel(Parcel parcel, int i) {</div><div class=\"line\">        parcel.writeString(message);</div><div class=\"line\">        parcel.writeInt(pId);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B83;&#x5305;&#x62EC;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x5B57;&#x6BB5;<code>message</code>&#x4E0E;<code>pId</code>,&#x4EE3;&#x8868;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x4F20;&#x9012;&#x7684;&#x4FE1;&#x606F;&#x4E0E;&#x65B9;&#x4FBF;&#x67E5;&#x770B;&#x7684;&#x8FDB;&#x7A0B;<code>ID</code>&#x3002;&#x8FD9;&#x91CC;&#x5B9E;&#x73B0;&#x4E86;<code>Parcelable</code>&#x63A5;&#x53E3;&#xFF0C;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x3002;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>Parcelable</code>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x56DE;&#x5230;<code>aidl</code>&#x76EE;&#x5F55;&#xFF0C;&#x518D;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0E;<code>HelloMessage</code>&#x76F8;&#x540C;&#x540D;&#x5B57;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x4E3A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">// HelloMessage.aidl</div><div class=\"line\">package com.idisfkj.aidldemo;</div><div class=\"line\"></div><div class=\"line\">// Declare any non-default types here with import statements</div><div class=\"line\"></div><div class=\"line\">parcelable HelloMessage;</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;&#x524D;&#x9762;&#x65B0;&#x5EFA;&#x7684;<code>IRemoteService.aidl</code>&#x6587;&#x4EF6;&#x4E2D;&#x5BFC;&#x5165;&#x8BE5;&#x7C7B;&#x578B;&#x7684;&#x5305;&#x3002;&#xFF08;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x524D;&#x9762;&#x8D34;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x6240;&#x9700;&#x7684;<code>.aidl</code>&#x6587;&#x4EF6;&#x4E0E;&#x63A5;&#x53E3;&#x90FD;&#x5DF2;&#x7ECF;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x518D;<code>Build -&gt; Make Project</code>(&#x5982;&#x679C;&#x4F60;&#x662F;&#x5728;<code>Module</code>&#x4E2D;&#x5219;<code>Build -&gt; Make Module App</code>)&#x3002;&#x5B8C;&#x4E86;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5728;<code>build/generated/source/aidl</code>&#x4E2D;&#x67E5;&#x770B;&#x751F;&#x6210;&#x7684;<code>IRemoteService</code>&#x3002;&#x6253;&#x5F00;&#x4E4B;&#x540E;&#x80FD;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x4FE1;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface IRemoteService extends android.os.IInterface</div><div class=\"line\">{</div><div class=\"line\">/** Local-side IPC implementation stub class. */</div><div class=\"line\">public static abstract class Stub extends android.os.Binder implements com.idisfkj.aidldemo.IRemoteService</div><div class=\"line\">{</div><div class=\"line\">private static final java.lang.String DESCRIPTOR = &quot;com.idisfkj.aidldemo.IRemoteService&quot;;</div><div class=\"line\">/** Construct the stub at attach it to the interface. */</div><div class=\"line\">public Stub()</div><div class=\"line\">{</div><div class=\"line\">this.attachInterface(this, DESCRIPTOR);</div><div class=\"line\">}</div><div class=\"line\">/**</div><div class=\"line\"> * Cast an IBinder object into an com.idisfkj.aidldemo.IRemoteService interface,</div><div class=\"line\"> * generating a proxy if needed.</div><div class=\"line\"> */</div><div class=\"line\">public static com.idisfkj.aidldemo.IRemoteService asInterface(android.os.IBinder obj)</div><div class=\"line\">{</div><div class=\"line\"> //&#x7701;&#x7565;</div></pre></td></tr></table></figure>\n<p>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x62BD;&#x8C61;&#x7C7B;<code>Stub</code>&#xFF0C;&#x5B83;&#x7EE7;&#x627F;&#x4E8E;<code>Binder</code>&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;<code>IRemoteService</code>&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>New IRemoteService.Stub()</code>&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;,&#x540C;&#x65F6;&#x901A;&#x8FC7;<code>asInterface</code>&#x6765;&#x83B7;&#x53D6;&#x5176;&#x4EE3;&#x7406;&#xFF0C;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;\"></a>&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x9996;&#x5148;&#x5EFA;&#x4E00;&#x4E2A;<code>Service</code>&#xFF0C;&#x901A;&#x8FC7;<code>Service</code>&#x7684;<code>onBind</code>&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4F20;&#x9012;&#x7ED1;&#x5B9A;&#x7684;<code>IBinder</code>&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x4E86;<code>Stub</code>&#x7EE7;&#x627F;&#x4E0E;<code>Binder</code>&#x800C;<code>Binder</code>&#x5B9E;&#x73B0;&#x4E86;<code>IBinder</code>&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Stub</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class RemoteService extends Service {</div><div class=\"line\">    public RemoteService() {</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    IRemoteService.Stub mBinder = new IRemoteService.Stub() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat, double aDouble, String aString) throws RemoteException {</div><div class=\"line\"></div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public HelloMessage sayHello() throws RemoteException {</div><div class=\"line\">            return new HelloMessage(&quot;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;:&quot; + Thread.currentThread().toString() + &quot;\\n&quot;</div><div class=\"line\">                    + &quot;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;id:&quot; + Thread.currentThread().getId() + &quot;\\n&quot;</div><div class=\"line\">                    + &quot;&#x4E3B;&#x7EBF;&#x7A0B;id:&quot; + getMainLooper().getThread().getId(), Process.myPid());</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public IBinder onBind(Intent intent) {</div><div class=\"line\">        // TODO: Return the communication channel to the service.</div><div class=\"line\">        return mBinder;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x8C03;&#x7528;\"><a href=\"#&#x8C03;&#x7528;\" class=\"headerlink\" title=\"&#x8C03;&#x7528;\"></a>&#x8C03;&#x7528;</h2><p>&#x5728;<code>MainActivity</code>&#x4E2D;&#x7ED1;&#x5B9A;&#x5F00;&#x542F;<code>Service</code>&#xFF0C;&#x5B9E;&#x73B0;<code>ServiceConnection</code>,&#x5728;<code>onServiceConnected</code>&#x4E2D;&#x901A;&#x8FC7;<code>iRemoteService = IRemoteService.Stub.asInterface(iBinder);</code>&#x6765;&#x83B7;&#x53D6;&#x8C03;&#x7528;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;<code>iRemoteService.sayHello()</code>&#x83B7;&#x53D6;&#x901A;&#x4FE1;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class MainActivity extends AppCompatActivity {</div><div class=\"line\"></div><div class=\"line\">    private TextView mPidText;</div><div class=\"line\">    private IRemoteService iRemoteService;</div><div class=\"line\">    private boolean mBind = false;</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onCreate(Bundle savedInstanceState) {</div><div class=\"line\">        super.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        mPidText = (TextView) findViewById(R.id.pid_text);</div><div class=\"line\">        mPidText.setText(&quot;&#x672C;&#x5730;id:&quot; + Process.myPid());</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onStart() {</div><div class=\"line\">        super.onStart();</div><div class=\"line\">        Intent intent = new Intent(MainActivity.this, RemoteService.class);</div><div class=\"line\">        bindService(intent, conn, BIND_AUTO_CREATE);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void onStop() {</div><div class=\"line\">        super.onStop();</div><div class=\"line\">        unbindService(conn);</div><div class=\"line\">        mBind = false;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private ServiceConnection conn = new ServiceConnection() {</div><div class=\"line\">        @Override</div><div class=\"line\">        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {</div><div class=\"line\">            iRemoteService = IRemoteService.Stub.asInterface(iBinder);</div><div class=\"line\">            mBind = true;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public void onServiceDisconnected(ComponentName componentName) {</div><div class=\"line\">            iRemoteService = null;</div><div class=\"line\">            mBind = false;</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    public void myClick(View view) {</div><div class=\"line\">        switch (view.getId()) {</div><div class=\"line\">            case R.id.show_pid_bt:</div><div class=\"line\">                if (mBind) {</div><div class=\"line\">                    try {</div><div class=\"line\">                        Log.v(&quot;TAG&quot;, &quot;&#x8FDC;&#x7A0B;id:&quot; + iRemoteService.sayHello().getpId());</div><div class=\"line\">                    } catch (RemoteException e) {</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                break;</div><div class=\"line\">            case R.id.show_message_bt:</div><div class=\"line\">                if (mBind) {</div><div class=\"line\">                    try {</div><div class=\"line\">                        Log.v(&quot;TAG&quot;, &quot;Message:&quot; + iRemoteService.sayHello().getMessage());</div><div class=\"line\">                    } catch (RemoteException e) {</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                break;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x5728;<code>AndroidManifest.xml</code>&#x4E2D;&#x8981;&#x5BF9;<code>Service</code>&#x8FDB;&#x884C;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;service</div><div class=\"line\">            android:name=&quot;.RemoteService&quot;</div><div class=\"line\">            android:enabled=&quot;true&quot;</div><div class=\"line\">            android:exported=&quot;true&quot;</div><div class=\"line\">            android:process=&quot;:remote&quot;&gt;&lt;/service&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6CE8;&#x610F;&#x56E0;&#x4E3A;&#x8981;&#x6A21;&#x4EFF;&#x8FDC;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5C06;process&#x8BBE;&#x7F6E;&#x6210;remote&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8BBE;&#x7F6E;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;&#x4F46;&#x8FD9;&#x5C31;&#x4E0D;&#x662F;&#x4E0D;&#x540C;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x901A;&#x4FE1;&#x4E86;&#xFF0C;aidl&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x610F;&#x4E49;&#x4E86;</em></p>\n</blockquote>\n<p>&#x6765;&#x770B;&#x4E0B;&#x6548;&#x679C;&#x5427;</p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/2.png\" alt=\"&#x6548;&#x679C;\"></p>\n<p><img src=\"/2016/09/25/AIDL&#x5165;&#x95E8;/3.png\" alt=\"&#x6548;&#x679C;\"></p>\n<p>&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x7A0B;&#x662F;<code>26951</code>&#x800C;&#x670D;&#x52A1;&#x7AEF;&#x8FDB;&#x7A0B;&#x4E3A;<code>26974</code>&#xFF0C;&#x8BF4;&#x660E;&#x4ED6;&#x4EEC;&#x5904;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD9;&#x6837;<code>AIDL</code>&#x4E5F;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#x5C06;<code>process</code>&#x53BB;&#x6389;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x662F;&#x4E00;&#x6837;&#x7684;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x5C31;&#x7559;&#x4E2A;&#x8BFB;&#x8005;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;&#x4E86;&#x3002;</p>\n<p>&#x6E90;&#x4EE3;&#x7801;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/AIDLDemo\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/AIDLDemo</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"React Native For Android","url":"https://www.rousetime.com/2016/08/29/React-Native-For-Android/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><code>React Native</code>&#x6709;&#x70B9;&#x5927;&#x52BF;&#x6240;&#x8D8B;&#xFF0C;&#x6240;&#x4EE5;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x7814;&#x7A76;&#x4E86;&#x4E0B;&#x5B83;&#xFF0C;&#x770B;&#x4E86;&#x5B83;&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x540C;&#x65F6;&#x4E5F;&#x5728;<code>Github</code>&#x6D4F;&#x89C8;&#x4E86;&#x524D;&#x8F88;&#x4EEC;&#x7684;&#x6770;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x5DF1;&#x4E5F;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>Demo</code>&#x4E5F;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5165;&#x95E8;&#x3002;&#x914D;&#x5408;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E0E;&#x4EE3;&#x7801;&#x5B9E;&#x4F8B;&#x76F8;&#x4FE1;&#x90FD;&#x80FD;&#x5F88;&#x5FEB;&#x7684;&#x8FDB;&#x5165;<code>React Native</code>&#x7684;&#x4E16;&#x754C;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4ECB;&#x7ECD;&#x7684;&#x4E0D;&#x4F1A;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x662F;&#x9488;&#x5BF9;<code>React Native</code>&#x8BED;&#x6CD5;&#x6709;&#x4E00;&#x5B9A;&#x4F1A;&#x57FA;&#x7840;&#x7684;&#x540C;&#x5B66;&#x3002;</p>\n<h1 id=\"React-Native&#x4ECB;&#x7ECD;\"><a href=\"#React-Native&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"React Native&#x4ECB;&#x7ECD;\"></a>React Native&#x4ECB;&#x7ECD;</h1><p>&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;<code>React Native</code></p>\n<ul>\n<li>&#x5B83;&#x662F;&#x501F;&#x52A9;&#x4E8E;<code>FaceBook</code>&#x73B0;&#x6709;&#x7684;&#x8F6E;&#x5B50;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;<code>ISO</code>&#x548C;<code>Android</code>&#x4E24;&#x5927;&#x5E73;&#x53F0;&#x7684;&#x652F;&#x6301;</li>\n<li>&#x4F7F;&#x7528;<code>React.js</code>&#x6765;&#x64CD;&#x4F5C;&#x539F;&#x751F;&#x7684;<code>UI</code>&#x7EC4;&#x4EF6;&#xFF0C;&#x66FF;&#x4EE3;&#x4E86;<code>DOM</code>&#x5143;&#x7D20;</li>\n<li>&#x5728;<code>UI</code>&#x65B9;&#x9762;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;<code>Flexbox</code>&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x652F;&#x6301;<code>css-layout</code>&#x6837;&#x5F0F;</li>\n<li>&#x4F7F;&#x7528;<code>JSX</code>&#x6765;&#x8F6C;&#x6362;&#x6210;<code>JS</code>&#x6765;&#x6267;&#x884C;&#xFF0C;<code>JSX</code>&#x662F;&#x4E00;&#x79CD;&#x7C7B;&#x4F3C;&#x4E8E;<code>XML</code>&#x8BED;&#x6CD5;&#x7684;&#x811A;&#x6B65;&#x6269;&#x5C55;&#x8BED;&#x8A00;&#x3002;</li>\n</ul>\n<p>&#x5BF9;&#x4E8E;<code>React Native</code>&#x7684;&#x73AF;&#x5883;&#x642D;&#x5EFA;,&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;<a href=\"https://facebook.github.io/react-native/docs/getting-started.html\" target=\"_blank\" rel=\"external\">Getting Started</a>,&#x5982;&#x679C;&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;&#x522B;&#x6025;&#xFF0C;&#x8FD9;&#x91CC;&#x8FD8;&#x6709;&#x4E2D;&#x6587;&#x7248;&#x7684;<a href=\"http://reactnative.cn/docs/0.31/getting-started.html\" target=\"_blank\" rel=\"external\">Getting Started</a></p>\n<blockquote>\n<p><em>&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x82F1;&#x6587;&#x7248;&#x7684;&#xFF0C;&#x4E2D;&#x6587;&#x7248;&#x7684;&#x8FD8;&#x662F;&#x5B58;&#x5728;&#x5751;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;Demo&#x4E2D;&#x7528;&#x5230;&#x7684;&#x7EC4;&#x4EF6;</em></p>\n</blockquote>\n<h1 id=\"Navigator\"><a href=\"#Navigator\" class=\"headerlink\" title=\"Navigator\"></a>Navigator</h1><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BFC;&#x822A;&#x5668;,&#x76F4;&#x767D;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x754C;&#x9762;&#x4E4B;&#x95F4;&#x7684;&#x8DF3;&#x8F6C;&#xFF0C;&#x5728;<code>React Native</code>&#x4E2D;&#x501F;&#x52A9;&#x5B83;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x754C;&#x9762;&#x7684;&#x5207;&#x6362;&#x3002;&#x5B9E;&#x73B0;&#x5B83;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x51E0;&#x4E2A;&#x5FC5;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;Navigator initialRoute={{title: &apos;&#x4E3B;&#x9875;&apos;, component: Welcome}}</div><div class=\"line\">          configureScene={(route,routeStack) =&gt; Navigator.SceneConfigs.FloatFromLeft}</div><div class=\"line\">          renderScene={this.renderScene}/&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"initialRoute\"><a href=\"#initialRoute\" class=\"headerlink\" title=\"initialRoute\"></a>initialRoute</h2><p><code>Navigator</code>&#x90FD;&#x662F;&#x7531;<code>route</code>&#x6765;&#x63A7;&#x5236;&#x8DF3;&#x8F6C;&#x8DEF;&#x7EBF;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x65F6;&#x8981;&#x521D;&#x59CB;&#x5316;<code>route</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">initialRoute={{title: &apos;&#x4E3B;&#x9875;&apos;, component: Welcome}}</div></pre></td></tr></table></figure>\n<p>&#x91CC;&#x9762;&#x7684;&#x53C2;&#x6570;&#x540D;&#x4E0D;&#x53D7;&#x9650;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x6307;&#x660E;&#x8DF3;&#x8F6C;&#x7684;<code>Componnet</code>&#x7EC4;&#x4EF6;&#x540D;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;&#x540E;&#x7EED;&#x6267;&#x884C;&#x4E2D;&#x53D6;&#x51FA;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>route.component</code>&#x53D6;&#x51FA;&#x3002;</p>\n<h2 id=\"renderScene\"><a href=\"#renderScene\" class=\"headerlink\" title=\"renderScene\"></a>renderScene</h2><p>&#x8BE5;&#x914D;&#x7F6E;&#x5C31;&#x662F;&#x6267;&#x884C;&#x6CA1;&#x4E00;&#x4E2A;<code>route</code>&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x4ECE;&#x800C;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E24;&#x4E2A;&#x5185;&#x7F6E;&#x53C2;&#x6570;<code>route</code>&#x4E0E;<code>navigator</code>&#xFF0C;&#x6765;&#x65B9;&#x4FBF;&#x6E32;&#x67D3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">renderScene={this.renderScene}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">renderScene(route, navigator){</div><div class=\"line\">    _navigator = navigator;</div><div class=\"line\">    let DefaultComponet = route.component;</div><div class=\"line\">    return &lt;DefaultComponet</div><div class=\"line\">      route = {route} navigator = {navigator}/&gt;</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p>&#x5728;<code>renderScene</code>&#x4E2D;&#x6211;&#x4EEC;&#x53D6;&#x51FA;&#x6BCF;&#x6B21;&#x8981;&#x5BFC;&#x822A;&#x7684;<code>Component</code>&#xFF0C;&#x540C;&#x65F6;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x4E14;&#x628A;<code>route</code>&#x4E0E;<code>navigator</code>&#x4F20;&#x5230;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;&#x4E2D;&#x3002;&#x5728;&#x6E32;&#x67D3;&#x754C;&#x9762;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>this.props.rout</code>&#x4E0E;<code>this.props.navigator</code>&#x6765;&#x83B7;&#x53D6;&#x3002;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x5C31;&#x662F;&#x8981;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">this.renderScene = this.renderScene.bind(this);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4E0D;&#x61C2;props&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x67E5;&#x9605;&#x5B98;&#x65B9;&#x6587;&#x6863;</em></p>\n</blockquote>\n<h2 id=\"push&#x4E0E;pop\"><a href=\"#push&#x4E0E;pop\" class=\"headerlink\" title=\"push&#x4E0E;pop\"></a>push&#x4E0E;pop</h2><p><code>Navigator</code>&#x63D0;&#x4F9B;&#x4E86;<code>push</code>&#x4E0E;<code>pop</code>&#x65B9;&#x6CD5;&#x6765;&#x63A7;&#x5236;<code>route</code>&#x7684;&#x8DEF;&#x7EBF;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6211;&#x4EEC;&#x719F;&#x77E5;&#x7684;&#x6808;&#x3002;&#x901A;&#x8FC7;<code>push</code>&#x6765;&#x8BBE;&#x7F6E;&#x4E0B;&#x4E00;&#x4E2A;&#x5BFC;&#x822A;&#x7684;<code>route</code>&#xFF0C;&#x901A;&#x8FC7;<code>pop</code>&#x6765;&#x9000;&#x51FA;&#x8BE5;&#x754C;&#x9762;&#x8FD4;&#x56DE;&#x539F;&#x6765;&#x7684;&#x754C;&#x9762;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TouchableOpacity onPress={() =&gt; this.props.navigator.push({</div><div class=\"line\">        title: &apos;&#x8BE6;&#x60C5;&apos;,</div><div class=\"line\">        component: Detail,</div><div class=\"line\">        number: rowID,</div><div class=\"line\">      })}&gt;</div><div class=\"line\">      &lt;View style={styles.item}&gt;</div><div class=\"line\">        &lt;View style={styles.content}&gt;</div><div class=\"line\">          &lt;Text style={styles.des}&gt;</div><div class=\"line\">            {rowData.title}</div><div class=\"line\">          &lt;/Text&gt;</div><div class=\"line\">          ....</div><div class=\"line\">      &lt;/View&gt;</div><div class=\"line\">&lt;/TouchableOpacity&gt;</div></pre></td></tr></table></figure>\n<p><code>TouchableOpacity</code>&#x662F;&#x4E00;&#x4E2A;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TouchableOpacity onPress={() =&gt; this.props.navigator.pop()}&gt;</div><div class=\"line\">            &lt;Image source={require(&apos;../imgs/back.png&apos;)} style={styles.back}/&gt;</div><div class=\"line\">          &lt;/TouchableOpacity&gt;</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x70B9;&#x51FB;&#x4EE5;&#x540E;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#x7684;&#x754C;&#x9762;&#x4E2D;&#x8C03;&#x7528;<code>pop</code>&#x65B9;&#x6CD5;&#x9000;&#x51FA;&#x8BE5;&#x6E32;&#x67D3;.</p>\n<h1 id=\"ListView\"><a href=\"#ListView\" class=\"headerlink\" title=\"ListView\"></a>ListView</h1><p>&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x4EB2;&#x5207;&#xFF0C;&#x5B83;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x8DDF;<code>Android</code>&#x4E2D;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x5C31;&#x4E0D;&#x540C;&#x4E86;&#x54E6;&#x3002;&#x4E0D;&#x8FC7;&#x6574;&#x4F53;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x539F;&#x7406;&#x8FD8;&#x662F;&#x7C7B;&#x4F3C;&#x3002;&#x65E0;&#x975E;&#x4E5F;&#x8981;&#x6574;&#x4E2A;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x4E0E;&#x7ED1;&#x5B9A;&#x6CA1;&#x4E2A;<code>Item</code>&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<h2 id=\"rowHasChanged\"><a href=\"#rowHasChanged\" class=\"headerlink\" title=\"rowHasChanged\"></a>rowHasChanged</h2><p>&#x5728;&#x6E32;&#x67D3;&#x4E4B;&#x524D;&#x8981;&#x8BBE;&#x7F6E;&#x5224;&#x65AD;&#x8BE5;&#x6570;&#x636E;&#x662F;&#x5426;&#x9700;&#x8981;&#x4ECE;&#x65B0;&#x6E32;&#x67D3;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x51CF;&#x5C11;&#x8BB8;&#x591A;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x6E32;&#x67D3;&#x6B65;&#x9AA4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x80FD;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">const listView = new ListView.DataSource({</div><div class=\"line\">      rowHasChanged: (r1,r2) =&gt; r1!==r2});</div></pre></td></tr></table></figure>\n<h2 id=\"cloneWithRows\"><a href=\"#cloneWithRows\" class=\"headerlink\" title=\"cloneWithRows\"></a>cloneWithRows</h2><p>&#x4E3A;<code>listView</code>&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x6E90;,&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>state</code>&#x72B6;&#x6001;&#x6765;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">this.state={</div><div class=\"line\">      dataSource: listView.cloneWithRows(this._rowData())};</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x7ED1;&#x5B9A;\"><a href=\"#&#x7ED1;&#x5B9A;\" class=\"headerlink\" title=\"&#x7ED1;&#x5B9A;\"></a>&#x7ED1;&#x5B9A;</h2><p>&#x6700;&#x540E;&#x5728;&#x6E32;&#x67D3;<code>render()</code>&#x751F;&#x547D;&#x5468;&#x671F;&#x65B9;&#x6CD5;&#x4E2D;&#x8FDB;&#x884C;&#x7EC4;&#x4EF6;&#x8D44;&#x6E90;&#x7ED1;&#x5B9A;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ListView</div><div class=\"line\">            style={styles.container}</div><div class=\"line\">            dataSource={this.state.dataSource}</div><div class=\"line\">            renderRow={this._renderRow.bind(this)}/&gt;</div><div class=\"line\">          &lt;/View&gt;</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>dataSource</code>&#x4E0E;<code>renderRow</code>&#x662F;&#x4E24;&#x4E2A;&#x5FC5;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x662F;&#x7ED1;&#x5B9A;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x540E;&#x4E00;&#x4E2A;&#x662F;&#x7ED1;&#x5B9A;&#x6E32;&#x67D3;&#x7684;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;&#x3002;&#x5176;&#x4E2D;<code>_renderRow</code>&#x662F;<code>Item</code>&#x7684;&#x5E03;&#x5C40;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">_renderRow(rowData,sectionID,rowID,highlightRow){</div><div class=\"line\">    return(</div><div class=\"line\">    &lt;TouchableOpacity onPress={() =&gt; this.props.navigator.push({</div><div class=\"line\">        title: &apos;&#x8BE6;&#x60C5;&apos;,</div><div class=\"line\">        component: Detail,</div><div class=\"line\">        number: rowID,</div><div class=\"line\">      })}&gt;</div><div class=\"line\">      &lt;View style={styles.item}&gt;</div><div class=\"line\">        &lt;View style={styles.content}&gt;</div><div class=\"line\">          &lt;Text style={styles.des}&gt;</div><div class=\"line\">            {rowData.title}</div><div class=\"line\">          &lt;/Text&gt;</div><div class=\"line\">          &lt;View style={styles.bottom}&gt;</div><div class=\"line\">            &lt;Text style={styles.fb}&gt;</div><div class=\"line\">              {&quot;&#x53D1;&#x5E03;: &quot;+rowData.fb}</div><div class=\"line\">            &lt;/Text&gt;</div><div class=\"line\">            &lt;Text style={styles.data}&gt;</div><div class=\"line\">              {&quot;&#x65E5;&#x671F;: &quot;+rowData.data}</div><div class=\"line\">            &lt;/Text&gt;</div><div class=\"line\">          &lt;/View&gt;</div><div class=\"line\">        &lt;/View&gt;</div><div class=\"line\">        &lt;Image style={styles.image}</div><div class=\"line\">        source={{uri: rowData.image}}/&gt;</div><div class=\"line\">      &lt;/View&gt;</div><div class=\"line\">      &lt;/TouchableOpacity&gt;</div><div class=\"line\">    );</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n<p><code>renderRow</code>&#x63D0;&#x4F9B;&#x4E86;&#x56DB;&#x4E2A;&#x53C2;&#x6570;<code>rowData,sectionID,rowID,highlightRow</code>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x5229;&#x7528;<code>rowData</code>&#x6765;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x6E90;&#x3002;&#x5E03;&#x5C40;&#x6837;&#x5F0F;&#x662F;&#x4F7F;&#x7528;<code>css-layout</code>&#x6765;&#x5B9E;&#x73B0;,&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x7EC4;&#x4EF6;&#x662F;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">style={{flex: 1}}</div></pre></td></tr></table></figure>\n<p>&#x6216;&#x8005;&#x901A;&#x8FC7;<code>StyleSheet</code>&#x6765;&#x7EDF;&#x4E00;&#x521B;&#x5EFA;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">const styles = StyleSheet.create({</div><div class=\"line\">  container: {</div><div class=\"line\">    flex: 1,</div><div class=\"line\">    backgroundColor: &apos;#F5FCFF&apos;,</div><div class=\"line\">  },</div><div class=\"line\">  title: {</div><div class=\"line\">    backgroundColor: &apos;royalblue&apos;,</div><div class=\"line\">    justifyContent: &apos;center&apos;,</div><div class=\"line\">    alignItems: &apos;center&apos;,</div><div class=\"line\">    borderColor: &apos;gray&apos;,</div><div class=\"line\">    borderBottomWidth: 1,</div><div class=\"line\">  },</div><div class=\"line\">  ...</div><div class=\"line\">});</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>css&#x8FD9;&#x91CC;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x6587;&#x6863;</em></p>\n</blockquote>\n<h1 id=\"TabNavigator\"><a href=\"#TabNavigator\" class=\"headerlink\" title=\"TabNavigator\"></a>TabNavigator</h1><p>&#x8FD9;&#x91CC;&#x518D;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E0B;<code>TabNavigator</code>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;<code>Android</code>&#x4E2D;&#x7684;<code>FragmentTabHost</code>&#x3002;&#x76F8;&#x4FE1;&#x90FD;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x662F;&#x4EC0;&#x4E48;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;TabNavigator&gt;</div><div class=\"line\">        &lt;TabNavigator.Item</div><div class=\"line\">          title=&quot;&#x65B0;&#x95FB;&quot;</div><div class=\"line\">          selected={this.state.selectedTab===&apos;news&apos;}</div><div class=\"line\">          selectedTitleStyle={styles.selectedText}</div><div class=\"line\">          titleStyle={styles.text}</div><div class=\"line\">          renderIcon={() =&gt; &lt;Image source={require(&apos;../imgs/ic_news.png&apos;)} style={styles.image}/&gt;}</div><div class=\"line\">          renderSelectedIcon={() =&gt; &lt;Image source={require(&apos;../imgs/ic_news_pressed.png&apos;)} style={styles.image}/&gt;}</div><div class=\"line\">          onPress={() =&gt; this.setState({selectedTab: &apos;news&apos;})}&gt;</div><div class=\"line\">          &lt;News {...this.props}/&gt;</div><div class=\"line\">        &lt;/TabNavigator.Item&gt;</div><div class=\"line\">        ...</div><div class=\"line\">&lt;/TabNavigator&gt;</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<code>&lt;TabNavigator.Item&gt;</code>&#x5B50;&#x6807;&#x7B7E;&#x6765;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E00;&#x4E2A;&#x5E95;&#x90E8;<code>Item</code>&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x5728;&#x8BBE;&#x7F6E;&#x8BE5;<code>Item</code>&#x8981;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x4E0A;&#x9762;&#x7684;<code>News</code>&#x5C31;&#x662F;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x754C;&#x9762;,&#x8BE5;&#x754C;&#x9762;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>export default News</code>&#x5BFC;&#x51FA;&#xFF0C;<code>import News from &apos;./News&apos;</code>&#x5BFC;&#x5165;&#x3002;</p>\n<blockquote>\n<p><em>&#x5148;&#x5C31;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x9700;&#x8981;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x6E90;&#x7801;,&#x540E;&#x7EED;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x518D;&#x505A;&#x6269;&#x5C55;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/08/29/React-Native-For-Android/rn.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/RNDemo\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RNDemo</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"hexo使用新node版本问题","url":"https://www.rousetime.com/2016/08/29/hexo使用新node版本问题/","content":"<p>&#x4ECA;&#x5929;&#x5728;&#x4F7F;&#x7528;<code>hexo</code>&#x5199;&#x535A;&#x5BA2;&#x7684;&#x65F6;&#x5019;&#x53D1;&#x73B0;&#x4F7F;&#x7528;<code>hexo</code>&#x547D;&#x4EE4;&#x5C45;&#x7136;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error: Module version mismatch. Expected 48, got 47.</div><div class=\"line\">    at Error (native)</div><div class=\"line\">    at Object.Module._extensions..node (module.js:568:18)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">{ Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;</div><div class=\"line\">    at Function.Module._resolveFilename (module.js:440:15)</div><div class=\"line\">    at Function.Module._load (module.js:388:25)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32) code: &apos;MODULE_NOT_FOUND&apos; }</div><div class=\"line\">{ Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;</div><div class=\"line\">    at Function.Module._resolveFilename (module.js:440:15)</div><div class=\"line\">    at Function.Module._load (module.js:388:25)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/dtrace-provider/dtrace-provider.js:17:23)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32)</div><div class=\"line\">    at tryModuleLoad (module.js:417:12)</div><div class=\"line\">    at Function.Module._load (module.js:409:3)</div><div class=\"line\">    at Module.require (module.js:468:17)</div><div class=\"line\">    at require (internal/module.js:20:19)</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo/node_modules/bunyan/lib/bunyan.js:79:18)</div><div class=\"line\">    at Module._compile (module.js:541:32)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:550:10)</div><div class=\"line\">    at Module.load (module.js:458:32) code: &apos;MODULE_NOT_FOUND&apos; }</div></pre></td></tr></table></figure>\n<p>&#x867D;&#x7136;&#x4E5F;&#x80FD;&#x8FD0;&#x884C;<code>hexo</code>&#xFF0C;&#x4F46;&#x662F;&#x60F3;&#x5230;&#x6BCF;&#x6B21;&#x770B;&#x5230;&#x8FD9;&#x79CD;&#x4E1C;&#x897F;&#x5FC3;&#x91CC;&#x90FD;&#x4E0D;&#x723D;&#xFF0C;&#x6240;&#x4EE5;&#x575A;&#x51B3;&#x8981;&#x89E3;&#x51B3;&#x5B83;&#x3002;&#x6700;&#x540E;&#x7ECF;&#x8FC7;&#x5404;&#x79CD;&#x67E5;&#x8D44;&#x6599;&#x53D1;&#x73B0;&#x662F;<code>node</code>&#x7684;&#x7248;&#x672C;&#x95EE;&#x9898;&#xFF0C;&#x7531;&#x4E8E;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x641E;&#x4E86;&#x4E0B;<code>React-Native</code>&#x5347;&#x7EA7;&#x4E86;<code>node</code>&#x7248;&#x672C;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x73B0;&#x5728;&#x7684;<code>node</code>&#x7248;&#x672C;&#x662F;&#x6700;&#x65B0;&#x7684;<code>6.3.1</code>&#x3002;&#x7531;&#x4E8E;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#x6709;&#x7684;&#x6A21;&#x5757;&#x4E0D;&#x652F;&#x6301;&#xFF0C;&#x6240;&#x6709;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6309;&#x7167;&#x6D41;&#x884C;&#x7248;&#x5427;<code>(node4-lts)</code></p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#x4E0B;&#x9762;&#x8BF4;&#x4E0B;&#x5177;&#x4F53;&#x89E3;&#x51B3;&#x6B65;&#x9AA4;</em></p>\n</blockquote>\n<h2 id=\"&#x89E3;&#x51B3;&#x65B9;&#x6848;\"><a href=\"#&#x89E3;&#x51B3;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;&#x65B9;&#x6848;\"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p>&#x65E2;&#x7136;&#x77E5;&#x9053;&#x539F;&#x56E0;&#x90A3;&#x5C31;&#x597D;&#x529E;&#x4E86;&#xFF0C;&#x53EA;&#x8981;&#x66F4;&#x6539;<code>node</code>&#x7684;&#x7248;&#x672C;&#x3002;</p>\n<h3 id=\"&#x67E5;&#x770B;&#x7248;&#x672C;\"><a href=\"#&#x67E5;&#x770B;&#x7248;&#x672C;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;&#x7248;&#x672C;\"></a>&#x67E5;&#x770B;&#x7248;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew install homebrew/versions/node</div></pre></td></tr></table></figure>\n<h3 id=\"&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\"><a href=\"#&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;\"></a>&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">brew install homebrew/versions/node4-lts</div></pre></td></tr></table></figure>\n<h3 id=\"&#x5B89;&#x88C5;&#x6A21;&#x677F;\"><a href=\"#&#x5B89;&#x88C5;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x6A21;&#x677F;\"></a>&#x5B89;&#x88C5;&#x6A21;&#x677F;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo npm install hexo-cli -g</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x8FD0;&#x884C;&#x4E0B;<code>hexo server</code>&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>\n<p><em>&#x679C;&#x7136;&#x65B0;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x4E0D;&#x8981;&#x8F7B;&#x6613;&#x4F7F;&#x7528;&#xFF0C;&#x8001;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x76F8;&#x5BF9;&#x7A33;&#x5B9A;</em></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"LoopView-循环轮播控件","url":"https://www.rousetime.com/2016/08/09/LoopView-循环轮播控件/","content":"<p>&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x6765;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x5E7F;&#x544A;&#x8F6E;&#x64AD;&#x5668;&#xFF0C;&#x51E0;&#x4E4E;&#x6BCF;&#x4E2A;<code>App</code>&#x4E2D;&#x90FD;&#x62E5;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x63A7;&#x4EF6;&#x3002;&#x8FD9;&#x79CD;&#x4F7F;&#x7528;&#x9891;&#x7E41;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x61C2;&#x5F97;&#x5B83;&#x4EEC;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x5DE5;&#x7A0B;&#x4E2D;&#x5C31;&#x80FD;&#x66F4;&#x52A0;&#x719F;&#x7EC3;&#x4E0E;&#x8F7B;&#x677E;&#x3002;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x6548;&#x679C;&#x5427;&#x3002;</p>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/08/09/LoopView-&#x5FAA;&#x73AF;&#x8F6E;&#x64AD;&#x63A7;&#x4EF6;/loopView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x63A7;&#x4EF6;&#x7684;&#x5B9E;&#x73B0;&#x672C;&#x8D28;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>ViewPager</code>&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5BF9;<code>ViewPager</code>&#x4E0D;&#x4F1A;&#x5F88;&#x964C;&#x751F;&#xFF0C;&#x4F8B;&#x5982;<code>ViewPager</code>+<code>Fragment</code>&#x5B9E;&#x73B0;&#x65B0;&#x95FB;&#x7684;&#x754C;&#x9762;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x8981;&#x660E;&#x786E;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;<code>ViewPager</code>&#x6ED1;&#x52A8;&#x5207;&#x6362;&#x753B;&#x9762;&#xFF0C;&#x540C;&#x65F6;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#x5B83;&#x81EA;&#x5DF1;&#x80FD;&#x5FAA;&#x73AF;&#x5207;&#x6362;&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x6765;&#x7B80;&#x8981;&#x7684;&#x89E3;&#x91CA;&#x4E0B;&#x6838;&#x5FC3;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"&#x521D;&#x59CB;&#x5316;\"><a href=\"#&#x521D;&#x59CB;&#x5316;\" class=\"headerlink\" title=\"&#x521D;&#x59CB;&#x5316;\"></a>&#x521D;&#x59CB;&#x5316;</h2><p>&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x8F6E;&#x64AD;&#x63A7;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8981;&#x81EA;&#x5B9A;&#x4E49;<code>LoopView</code>&#x63A7;&#x4EF6;&#xFF0C;&#x8BBE;&#x7F6E;&#x76F8;&#x5173;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x4E0E;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#x7ED1;&#x5B9A;&#x63A7;&#x4EF6;&#x3001;&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x4E0E;&#x83B7;&#x53D6;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x503C;&#x3002;&#x8FD9;&#x91CC;&#x5E03;&#x5C40;&#x6211;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x67E5;&#x770B;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void init(Context context) {</div><div class=\"line\">        LayoutInflater.from(context).inflate(R.layout.loopview_layout, this, true);</div><div class=\"line\">        viewPager = (ViewPager) findViewById(R.id.loopView);</div><div class=\"line\">        linearCircler = (LinearLayout) findViewById(R.id.linear_circler);</div><div class=\"line\">        linearCirclerNo = (LinearLayout) findViewById(R.id.linear_circler_no);</div><div class=\"line\">        descript = (TextView) findViewById(R.id.descript);</div><div class=\"line\">        viewPager.addOnPageChangeListener(this);</div><div class=\"line\">        viewPager.setOnTouchListener(this);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x4E00;&#x4E9B;&#x5FC5;&#x8981;&#x7684;&#x5E03;&#x5C40;&#x586B;&#x5145;&#x4E0E;&#x76D1;&#x542C;&#x7ED1;&#x5B9A;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x8FD9;&#x91CC;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x8981;&#x83B7;&#x53D6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public LoopView(Context context, AttributeSet attrs, int defStyleAttr) {</div><div class=\"line\">        super(context, attrs, defStyleAttr);</div><div class=\"line\">        TypedArray typedArray = getContext().obtainStyledAttributes(attrs, R.styleable.LoopView);</div><div class=\"line\">        rate = typedArray.getInteger(R.styleable.LoopView_rate, DEF_RATE);</div><div class=\"line\">        bottomStyle = typedArray.getInteger(R.styleable.LoopView_bottom_style, DEF_BOTTOM_STYLE);</div><div class=\"line\">        typedArray.recycle();</div><div class=\"line\">        init(context);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>rate</code>&#x4EE3;&#x8868;&#x4E0B;&#x9762;&#x4F1A;&#x63D0;&#x5230;&#x7684;&#x8F6E;&#x64AD;&#x7684;&#x901F;&#x5EA6;&#xFF0C;<code>bottomStyle</code>&#x4EE3;&#x8868;&#x7684;&#x662F;<code>LoopView</code>&#x7684;&#x6837;&#x5F0F;&#x3002;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x90FD;&#x662F;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x8BBE;&#x7F6E;&#x3002;</p>\n<h2 id=\"addOnPageChangeListener\"><a href=\"#addOnPageChangeListener\" class=\"headerlink\" title=\"addOnPageChangeListener\"></a>addOnPageChangeListener</h2><p>&#x8FD9;&#x4E2A;&#x662F;&#x76D1;&#x542C;<code>LoopView</code>&#x4E2D;<code>ViewPager</code>&#x63A7;&#x4EF6;&#x7684;<code>pager</code>&#x5207;&#x6362;&#x3002;&#x8981;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;<code>onPageScrolled</code>&#x3001;<code>onPageSelected</code>&#x4E0E;<code>onPageScrollStateChanged</code>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8981;&#x7528;&#x7684;&#x662F;&#x4E2D;&#x95F4;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"onPageSelected\"><a href=\"#onPageSelected\" class=\"headerlink\" title=\"onPageSelected\"></a>onPageSelected</h3><p>&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x5BF9;&#x754C;&#x9762;&#x4E2D;&#x5706;&#x70B9;&#x9009;&#x4E2D;&#x5207;&#x6362;&#x4E0E;&#x63CF;&#x8FF0;&#x6587;&#x672C;&#x7684;&#x5185;&#x5BB9;&#x7684;&#x53D8;&#x66F4;,&#x4EE3;&#x7801;&#x4E0D;&#x662F;&#x5F88;&#x591A;,&#x76F4;&#x63A5;&#x770B;&#x6E90;&#x7801;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public void onPageSelected(int position) {</div><div class=\"line\">       mCurrentPos = position;</div><div class=\"line\">       if (bottomStyle == getResources().getInteger(R.integer.loop_have_descript))</div><div class=\"line\">           descript.setText(list.get(position % list.size()).getDescript());</div><div class=\"line\">       for (int i = 0; i &lt; linearLayout.getChildCount(); i++) {</div><div class=\"line\">           if (i == position % list.size())</div><div class=\"line\">               linearLayout.getChildAt(i).setSelected(true);</div><div class=\"line\">           else</div><div class=\"line\">               linearLayout.getChildAt(i).setSelected(false);</div><div class=\"line\">       }</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h2 id=\"setOnTouchListener\"><a href=\"#setOnTouchListener\" class=\"headerlink\" title=\"setOnTouchListener\"></a>setOnTouchListener</h2><p>&#x5B9E;&#x73B0;&#x89E6;&#x6478;&#x76D1;&#x542C;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5728;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x5207;&#x6362;&#x65F6;&#xFF0C;<code>LoopView</code>&#x8FD8;&#x5728;&#x81EA;&#x5DF1;&#x5FAA;&#x73AF;&#x5207;&#x6362;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x5207;&#x6362;&#x65F6;&#x4E0D;&#x534F;&#x8C03;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x624B;&#x6307;&#x89E6;&#x6478;&#x5230;<code>LoopView</code>&#x65F6;&#x505C;&#x6B62;&#x81EA;&#x52A8;&#x5FAA;&#x73AF;&#xFF0C;&#x5373;<code>ACTION_DOWN</code>&#x4E0E;<code>ACTION_MOVE</code>&#x3002;&#x5728;&#x624B;&#x6307;&#x79BB;&#x5F00;&#x65F6;&#x5F00;&#x542F;&#x5FAA;&#x73AF;&#xFF0C;&#x5373;<code>ACTION_UP</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public boolean onTouch(View view, MotionEvent motionEvent) {</div><div class=\"line\">       switch (motionEvent.getAction()) {</div><div class=\"line\">           case MotionEvent.ACTION_DOWN:</div><div class=\"line\">           case MotionEvent.ACTION_MOVE:</div><div class=\"line\">               pauseLoop();</div><div class=\"line\">               break;</div><div class=\"line\">           case MotionEvent.ACTION_UP:</div><div class=\"line\">               if (mSes.isShutdown())</div><div class=\"line\">                   startLoop();</div><div class=\"line\">               break;</div><div class=\"line\">       }</div><div class=\"line\">       return false;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5FAA;&#x73AF;&#x64AD;&#x653E;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x662F;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5468;&#x671F;&#x6027;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x8BA9;&#x5B83;&#x5FAA;&#x73AF;&#x81EA;&#x52A8;&#x64CD;&#x4F5C;&#xFF0C;&#x501F;&#x52A9;&#x7684;&#x662F;<code>ScheduledExecutorService</code>&#x3002;&#x4E0B;&#x9762;&#x662F;<code>pauseLoop();</code>&#x4E0E;<code>startLoop()</code>&#x4EE3;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">protected void startLoop() {</div><div class=\"line\">        mSes = Executors.newSingleThreadScheduledExecutor();</div><div class=\"line\">        mSes.scheduleAtFixedRate(new AutoRunnable(), rate, rate, TimeUnit.SECONDS);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    protected void pauseLoop() {</div><div class=\"line\">        mSes.shutdown();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x63A7;&#x5236;&#x4E0E;&#x5B9E;&#x73B0;&#x5FAA;&#x73AF;&#x8F6E;&#x64AD;&#xFF0C;&#x539F;&#x7406;&#x5C31;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x8BF4;&#x4E0B;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5982;&#x4F55;&#x4F7F;&#x7528;</em></p>\n</blockquote>\n<h1 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h1><h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">  &lt;groupId&gt;com.idisfkj.loopview&lt;/groupId&gt;</div><div class=\"line\">  &lt;artifactId&gt;loopview&lt;/artifactId&gt;</div><div class=\"line\">  &lt;version&gt;2.0.0&lt;/version&gt;</div><div class=\"line\">  &lt;type&gt;pom&lt;/type&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.idisfkj.loopview:loopview:2.0.0&apos;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</em></p>\n</blockquote>\n<h2 id=\"&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\"><a href=\"#&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\" class=\"headerlink\" title=\"&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;\"></a>&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;</h2><p>&#x9996;&#x5148;&#x5728;&#x6839;&#x5E03;&#x5C40;&#x4E2D;&#x52A0;&#x4E0A;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x7684;&#x5F15;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xmlns:loop=&quot;http://schemas.android.com/apk/res-auto&quot;</div></pre></td></tr></table></figure>\n<p>&#x5F15;&#x7528;<code>LoopView</code>&#x63A7;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.idisfkj.loopview.LoopView</div><div class=\"line\">            android:id=&quot;@+id/loop_view&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;200dp&quot;</div><div class=\"line\">            loop:bottom_style=&quot;@integer/loop_have_descript&quot;</div><div class=\"line\">            loop:rate=&quot;3&quot;&gt;</div><div class=\"line\">&lt;/com.idisfkj.loopview.LoopView&gt;</div></pre></td></tr></table></figure>\n<p><code>bottom_style</code>&#x4EE3;&#x8868;<code>LoopView</code>&#x5E95;&#x90E8;&#x6837;&#x5F0F;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x53EF;&#x9009;&#x503C;,&#x9ED8;&#x8BA4;&#x4E3A;<code>loop_have_descript</code></p>\n<ul>\n<li>loop_have_descript &#x4EE3;&#x8868;&#x6709;&#x63CF;&#x8FF0;&#x7684;&#x5E03;&#x5C40;</li>\n<li>loop_no_descript_right &#x4EE3;&#x8868;&#x6CA1;&#x6709;&#x63CF;&#x8FF0;&#x4E14;&#x5706;&#x70B9;&#x5C45;&#x53F3;&#x7684;&#x5E03;&#x5C40;</li>\n<li>loop_no_descript_center &#x4EE3;&#x8868;&#x6CA1;&#x6709;&#x63CF;&#x8FF0;&#x4E14;&#x5706;&#x70B9;&#x5C45;&#x4E2D;&#x7684;&#x5E03;&#x5C40;</li>\n</ul>\n<p><code>rate</code>&#x4EE3;&#x8868;&#x8F6E;&#x64AD;&#x7684;&#x901F;&#x5EA6;&#xFF0C;<code>&#x5355;&#x4F4D;&#x4E3A;s</code>,&#x9ED8;&#x8BA4;&#x4E3A;3s</p>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\"><a href=\"#&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;\"></a>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x56FE;&#x7247;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">loopView.setDefaultImageView(xxx);</div><div class=\"line\">loopView.setErrorImageView(xxx);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x586B;&#x5145;&#x6570;&#x636E;\"><a href=\"#&#x586B;&#x5145;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x586B;&#x5145;&#x6570;&#x636E;\"></a>&#x586B;&#x5145;&#x6570;&#x636E;</h2><p>&#x586B;&#x5145;&#x6570;&#x636E;&#x9700;&#x8981;&#x501F;&#x52A9;<code>LoopViewEntity</code>&#x5B9E;&#x4F53;&#x7C7B;&#x6765;&#x5B58;&#x50A8;,&#x4F8B;&#x5982;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">for (int i = 0; i &lt; urls.length; i++) {</div><div class=\"line\">            LoopViewEntity entity = new LoopViewEntity();</div><div class=\"line\">            entity.setImageUrl(urls[i]);</div><div class=\"line\">            entity.setDescript(descripts[i]);</div><div class=\"line\">            list.add(entity);</div><div class=\"line\">        }</div><div class=\"line\">loopView.setLoopData(list);</div></pre></td></tr></table></figure>\n<h2 id=\"item&#x70B9;&#x51FB;&#x76D1;&#x542C;\"><a href=\"#item&#x70B9;&#x51FB;&#x76D1;&#x542C;\" class=\"headerlink\" title=\"item&#x70B9;&#x51FB;&#x76D1;&#x542C;\"></a>item&#x70B9;&#x51FB;&#x76D1;&#x542C;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">loopView.setOnItemClickListener(new LoopView.OnItemClickListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onItemClick(int position) {</div><div class=\"line\">                //to do ...</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6B22;&#x8FCE;Star&#x4E0E;Fork&#xFF0C;&#x5982;&#x6709;&#x9700;&#x8981;&#x540E;&#x7EED;&#x6211;&#x4F1A;&#x7EE7;&#x7EED;&#x4F18;&#x5316;&#xFF0C;&#x6216;&#x8005;&#x52A0;&#x5165;&#x4E0E;&#x6211;&#x4E00;&#x8D77;&#x6765;&#x4F18;&#x5316;</em></p>\n</blockquote>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/AndroidLoopView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/AndroidLoopView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView下拉刷新与上拉更多","url":"https://www.rousetime.com/2016/08/03/RecyclerView下拉刷新与上拉更多/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5728;&#x539F;&#x6765;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#x6211;&#x63D0;&#x53CA;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#xFF0C;&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x6765;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x6269;&#x5C55;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x5B9E;&#x73B0;&#x5E38;&#x7528;&#x7684;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/07/05/RecyclerView%E6%B7%BB%E5%8A%A0header%E4%B8%8Efooter/\" target=\"_blank\" rel=\"external\">RecyclerView&#x6DFB;&#x52A0;header&#x4E0E;footer</a>&#x4E3A;&#x57FA;&#x7840;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4E0D;&#x662F;&#x5F88;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x770B;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#x53EF;&#x80FD;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5E2E;&#x52A9;&#x7406;&#x89E3;&#x3002;</p>\n<h2 id=\"&#x4F9D;&#x8D56;\"><a href=\"#&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x4F9D;&#x8D56;\"></a>&#x4F9D;&#x8D56;</h2><p>&#x4E3A;&#x4E86;&#x65B9;&#x6CD5;&#x5927;&#x5BB6;&#x7684;&#x4F7F;&#x7528;&#x6211;&#x5DF2;&#x7ECF;&#x628A;&#x4ED6;&#x4E0A;&#x4F20;&#x5230;<code>Jcenter</code>&#x4E2D;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E86;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x4F7F;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.idisfkj.enchancerecyclerview:mylibrary:1.1.1&apos;</div></pre></td></tr></table></figure>\n<h2 id=\"EnhanceRecyclerView\"><a href=\"#EnhanceRecyclerView\" class=\"headerlink\" title=\"EnhanceRecyclerView\"></a>EnhanceRecyclerView</h2><p>&#x6211;&#x5C06;&#x8FD9;&#x4E2A;&#x6269;&#x5C55;&#x7684;<code>RecyclerView</code>&#x547D;&#x540D;&#x4E3A;<code>EnhanceRecyclerView</code>&#xFF0C;&#x7EE7;&#x627F;<code>RecyclerView</code>&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x65E2;&#x7136;&#x8981;&#x5B9E;&#x73B0;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x66F4;&#x591A;&#x81EA;&#x7136;&#x5148;&#x8981;&#x5B9E;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x5229;&#x7528;&#x524D;&#x9762;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x4E3A;<code>EnhanceRecycleView</code>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void initView() {</div><div class=\"line\">        View headerView = LayoutInflater.from(getContext()).inflate(R.layout.head_layout, null);</div><div class=\"line\">        View footerView = LayoutInflater.from(getContext()).inflate(R.layout.footer_layout, null);</div><div class=\"line\">        addHeaderView(headerView);</div><div class=\"line\">        addFooterView(footerView);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5176;&#x4E2D;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;addHeaderView&#x4E0E;addFooterView&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6211;&#x524D;&#x9762;&#x7684;&#x90A3;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x6709;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;</em></p>\n</blockquote>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\"><a href=\"#&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;\"></a>&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x5668;</h2><p>&#x65E2;&#x7136;&#x8981;&#x5B9E;&#x73B0;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#xFF0C;&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;&#x5BF9;&#x76D1;&#x542C;&#x5668;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x6765;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E0B;&#x5BF9;&#x76D1;&#x542C;&#x5668;<code>OnScrollListener</code>&#x4E0E;<code>OnTouchListener</code>&#x7684;&#x5904;&#x7406;&#x3002;</p>\n<h2 id=\"OnScrollListener\"><a href=\"#OnScrollListener\" class=\"headerlink\" title=\"OnScrollListener\"></a>OnScrollListener</h2><p>&#x4E3A;<code>EnhanceRecyclerView</code>&#x6DFB;&#x52A0;<code>addOnScrollListener</code>&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;<code>onScrollStateChanged</code>&#x4E0E;<code>onScrolled</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<h3 id=\"onScrolled\"><a href=\"#onScrolled\" class=\"headerlink\" title=\"onScrolled\"></a>onScrolled</h3><p>&#x5728;<code>onScrolled</code>&#x4E2D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x505A;&#x7684;&#x662F;&#x83B7;&#x53D6;<code>EnhanceRcyclerView</code>&#x4E2D;<code>item</code>&#x7684;&#x603B;&#x6570;&#x91CF;&#x3001;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>item</code>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#x4E0E;&#x89C6;&#x56FE;&#x663E;&#x793A;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>item</code>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;<code>item</code>&#x7684;&#x603B;&#x6570;&#x91CF;&#x5F88;&#x597D;&#x83B7;&#x53D6;&#x76F4;&#x63A5;&#x8C03;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">totalCount = getLayoutManager().getItemCount();</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;<code>RecyclerView</code>&#x80FD;&#x5B9E;&#x73B0;<code>LinearLayoutManager</code>&#x3001;<code>GridLayoutManager</code>&#x4E0E;<code>StaggeredGridLayoutManager</code>&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x6240;&#x4EE5;&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x8981;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;<code>manager</code>&#x6765;&#x83B7;&#x53D6;,&#x8FD8;&#x662F;&#x770B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5427;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (getLayoutManager() instanceof LinearLayoutManager) {</div><div class=\"line\">                    lastItem = ((LinearLayoutManager) getLayoutManager()).findLastVisibleItemPosition();</div><div class=\"line\">                    firstVisible = ((LinearLayoutManager) getLayoutManager()).findFirstVisibleItemPosition();</div><div class=\"line\">                } else {</div><div class=\"line\">                    into = ((StaggeredGridLayoutManager) getLayoutManager()).findLastVisibleItemPositions(into);</div><div class=\"line\">                    firstInto = ((StaggeredGridLayoutManager) getLayoutManager()).findFirstVisibleItemPositions(firstInto);</div><div class=\"line\">                    lastItem = into[0];</div><div class=\"line\">                    firstVisible = firstInto[0];</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<h3 id=\"onScrollStateChanged\"><a href=\"#onScrollStateChanged\" class=\"headerlink\" title=\"onScrollStateChanged\"></a>onScrollStateChanged</h3><p>&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x90A3;&#x4E09;&#x4E2A;&#x5173;&#x952E;&#x6570;&#x636E;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;<code>onScrollStateChanged</code>&#x4E2D;&#x5B9E;&#x73B0;&#x5177;&#x4F53;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5BF9;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x5904;&#x7406;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (lastItem == adapter.getItemCount() + 1 &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE &amp;&amp; !isLoad) {</div><div class=\"line\">                    ViewGroup.LayoutParams params = getFooterView(0).getLayoutParams();</div><div class=\"line\">                    params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">                    params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">                    getFooterView(0).setLayoutParams(params);</div><div class=\"line\">                    getFooterView(0).setVisibility(View.VISIBLE);</div><div class=\"line\">                    smoothScrollToPosition(totalCount);</div><div class=\"line\">                    isLoad = true;</div><div class=\"line\">                    loadMoreListener.onLoadMore();</div><div class=\"line\">                }</div><div class=\"line\">                if (firstVisible == 0) {</div><div class=\"line\">                    isTop = true;</div><div class=\"line\">                } else {</div><div class=\"line\">                    isTop = false;</div><div class=\"line\">                    RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">                    params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">                    params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">                    params.setMargins(0, -getHeaderView(0).getHeight(), 0, 0);</div><div class=\"line\">                    getHeaderView(0).setLayoutParams(params);</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<p>&#x7B80;&#x5355;&#x8BF4;&#x660E;&#x4E0B;&#xFF0C;&#x6838;&#x5FC3;&#x5C31;&#x662F;&#x5224;&#x65AD;<code>lastItem</code>&#x662F;&#x5426;&#x5904;&#x5728;&#x6700;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#x5C31;&#x7EE7;&#x7EED;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x91CC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5BF9;&#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x63A5;&#x53E3;&#x6240;&#x4EE5;&#x53EA;&#x8981;&#x5B9E;&#x73B0;<code>loadMoreListener.onLoadMore();</code>&#x5373;&#x53EF;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x6838;&#x5FC3;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6E90;&#x7801;</em></p>\n</blockquote>\n<h2 id=\"OnTouchListener\"><a href=\"#OnTouchListener\" class=\"headerlink\" title=\"OnTouchListener\"></a>OnTouchListener</h2><p>&#x8FD9;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x5206;&#x522B;&#x5BF9;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x6240;&#x719F;&#x6089;&#x7684;<code>MotionEvent.ACTION_DOWN</code>&#x3001;<code>MotionEvent.ACTION_MOVE</code>&#x4E0E;<code>MotionEvent.ACTION_UP</code>&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;<code>ACTION_DOWN</code>&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x83B7;&#x53D6;&#x6309;&#x4E0B;&#x7684;&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x7684;&#x9488;&#x5BF9;&#x53E6;&#x5916;&#x7684;&#x4E24;&#x4E2A;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x8BF4;&#x660E;&#x3002;</p>\n<h3 id=\"ACTION-MOVE\"><a href=\"#ACTION-MOVE\" class=\"headerlink\" title=\"ACTION_MOVE\"></a>ACTION_MOVE</h3><p>&#x8FD9;&#x505A;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x5BF9;&#x89E6;&#x6478;&#x540E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6839;&#x636E;&#x6ED1;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#x6765;&#x52A8;&#x6001;&#x7684;&#x6539;&#x53D8;<code>header</code>&#x7684;&#x6587;&#x672C;&#x4E0E;&#x5E03;&#x5C40;&#x89C6;&#x56FE;&#x7684;&#x663E;&#x793A;&#x3002;    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void touchMove(MotionEvent event) {</div><div class=\"line\">        endY = event.getY();</div><div class=\"line\">        moveY = endY - startY;</div><div class=\"line\">        //&#x9632;&#x6B62;item&#x5411;&#x4E0A;&#x6ED1;&#x51FA;</div><div class=\"line\">        if (moveY &gt; 0 &amp;&amp; !isRefreshing) {</div><div class=\"line\">            //&#x9632;&#x6B62;&#x56DE;&#x9000;&#x6587;&#x672C;&#x663E;&#x793A;&#x5F02;&#x5E38;</div><div class=\"line\">            scrollToPosition(0);</div><div class=\"line\"></div><div class=\"line\">            if (getHeaderView(0).getVisibility() == GONE)</div><div class=\"line\">                getHeaderView(0).setVisibility(VISIBLE);</div><div class=\"line\"></div><div class=\"line\">            RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">            params.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">            params.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">            //&#x4F7F;header&#x968F;moveY&#x7684;&#x503C;&#x4ECE;&#x9876;&#x90E8;&#x6E10;&#x6E10;&#x51FA;&#x73B0;</div><div class=\"line\">            if (moveY &gt;= 400) {</div><div class=\"line\">                moveY = 100 + moveY / 4;</div><div class=\"line\">            } else {</div><div class=\"line\">                moveY = moveY / 2;</div><div class=\"line\">            }</div><div class=\"line\">            viewHeight = getHeaderView(0).getHeight();</div><div class=\"line\">            if (viewHeight &lt;= 0)</div><div class=\"line\">                viewHeight = 130;</div><div class=\"line\">            moveY = moveY - viewHeight;</div><div class=\"line\">            params.setMargins(0, (int) moveY, 0, 0);</div><div class=\"line\">            getHeaderView(0).setLayoutParams(params);</div><div class=\"line\">            if (moveY &gt; 80) {</div><div class=\"line\">                text.setText(getResources().getString(R.string.release_to_refresh));</div><div class=\"line\">            } else {</div><div class=\"line\">                text.setText(getResources().getString(R.string.pull_to_refresh));</div><div class=\"line\">            }</div><div class=\"line\">        } else {</div><div class=\"line\">            if (getHeaderView(0).getVisibility() != GONE &amp;&amp; !isRefreshing) {</div><div class=\"line\">                getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x4E0B;&#x62C9;&#x65F6;&#x4E0E;&#x9876;&#x90E8;&#x7684;&#x8DDD;&#x79BB;&#x53D8;&#x5316;&#x662F;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<code>margin</code>&#x6765;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x7684;&#x3002;</p>\n<h3 id=\"ACTION-UP\"><a href=\"#ACTION-UP\" class=\"headerlink\" title=\"ACTION_UP\"></a>ACTION_UP</h3><p>&#x6700;&#x540E;&#x7684;&#x89E6;&#x6478;&#x5904;&#x7406;&#x5C31;&#x662F;&#x5728;&#x79BB;&#x5F00;&#x5C4F;&#x5E55;&#x65F6;&#x6839;&#x636E;&#x6ED1;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x662F;&#x5426;&#x8C03;&#x7528;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6216;&#x8005;&#x9690;&#x85CF;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x5934;&#x90E8;&#xFF0C;&#x5177;&#x4F53;&#x8FD8;&#x662F;&#x770B;&#x4EE3;&#x7801;&#x5427;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void touchUp() {</div><div class=\"line\">        if (!isRefreshing &amp;&amp; (endY -startY) != 0 ) {</div><div class=\"line\"></div><div class=\"line\">            RecyclerView.LayoutParams params1 = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">            params1.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">            params1.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\"></div><div class=\"line\">            if (moveY &gt;= 80) {</div><div class=\"line\">                text.setText(getResources().getString(R.string.refreshing));</div><div class=\"line\">                params1.setMargins(0, 0, 0, 0);</div><div class=\"line\">                isRefreshing = true;</div><div class=\"line\">                //&#x5237;&#x65B0;&#x6570;&#x636E;</div><div class=\"line\">                pullToRefresh.onRefreshing();</div><div class=\"line\">            } else {</div><div class=\"line\">                if (viewHeight &lt;= 0)</div><div class=\"line\">                    viewHeight = 130;</div><div class=\"line\">                params1.setMargins(0, -viewHeight, 0, 0);</div><div class=\"line\">                getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">            }</div><div class=\"line\">            getHeaderView(0).setLayoutParams(params1);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4EE3;&#x7801;&#x4E2D;&#x91CD;&#x8981;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x6709;&#x6307;&#x51FA;&#x76F8;&#x4FE1;&#x90FD;&#x80FD;&#x770B;&#x61C2;&#xFF0C;&#x8FD9;&#x6837;&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x57FA;&#x672C;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x63A5;&#x53E3;&#x7684;&#x8BBE;&#x8BA1;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\"><a href=\"#&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\" class=\"headerlink\" title=\"&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;\"></a>&#x4E0B;&#x62C9;&#x4E0E;&#x4E0A;&#x62C9;&#x63A5;&#x53E3;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface PullToRefreshListener {</div><div class=\"line\">        void onRefreshing();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setPullToRefreshListener(PullToRefreshListener pullToRefresh) {</div><div class=\"line\">        if (loadMoreListener == null) {</div><div class=\"line\">            initListener();</div><div class=\"line\">        }</div><div class=\"line\">        this.pullToRefresh = pullToRefresh;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public interface LoadMoreListener {</div><div class=\"line\">        void onLoadMore();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setLoadMoreListener(LoadMoreListener loadMoreListener) {</div><div class=\"line\">        if (pullToRefresh == null) {</div><div class=\"line\">            initListener();</div><div class=\"line\">        }</div><div class=\"line\">        this.loadMoreListener = loadMoreListener;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x8FD0;&#x7528;&#x662F;&#x6DFB;&#x52A0;&#x63A5;&#x53E3;&#x76D1;&#x542C;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x524D;&#x9762;&#x4E3A;<code>EnhanceRecyclerView</code>&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x76D1;&#x542C;&#x3002;</p>\n<h2 id=\"&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\"><a href=\"#&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;\"></a>&#x72B6;&#x6001;&#x91CD;&#x7F6E;&#x8BBE;&#x7F6E;</h2><p>&#x5728;&#x8C03;&#x7528;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x6216;&#x8005;&#x4E0A;&#x62C9;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x5176;&#x6784;&#x9020;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#xFF0C;&#x72B6;&#x6001;&#x7684;&#x91CD;&#x7F6E;&#x4E0E;&#x6570;&#x636E;&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x65B9;&#x4FBF;&#x7EDF;&#x4E00;&#x8C03;&#x7528;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setLoadMoreComplete() {</div><div class=\"line\">       RecyclerView.LayoutParams params = (LayoutParams) getFooterView(0).getLayoutParams();</div><div class=\"line\">       params.width = 0;</div><div class=\"line\">       params.height = 0;</div><div class=\"line\">       getFooterView(0).setLayoutParams(params);</div><div class=\"line\">       getFooterView(0).setVisibility(View.GONE);</div><div class=\"line\">       this.getAdapter().notifyDataSetChanged();</div><div class=\"line\">       isLoad = false;</div><div class=\"line\">   }</div><div class=\"line\"></div><div class=\"line\">   public void setRefreshComplete() {</div><div class=\"line\">       RecyclerView.LayoutParams params1 = (RecyclerView.LayoutParams) getHeaderView(0).getLayoutParams();</div><div class=\"line\">       params1.width = RecyclerView.LayoutParams.MATCH_PARENT;</div><div class=\"line\">       params1.height = RecyclerView.LayoutParams.WRAP_CONTENT;</div><div class=\"line\">       params1.setMargins(0, -getHeaderView(0).getHeight(), 0, 0);</div><div class=\"line\">       getHeaderView(0).setLayoutParams(params1);</div><div class=\"line\">       getHeaderView(0).setVisibility(GONE);</div><div class=\"line\">       this.getAdapter().notifyDataSetChanged();</div><div class=\"line\">       isRefreshing = false;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6240;&#x7528;&#x5DE5;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E2A;&#x8C03;&#x7528;&#x793A;&#x8303;</em></p>\n</blockquote>\n<h2 id=\"&#x4F7F;&#x7528;\"><a href=\"#&#x4F7F;&#x7528;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;\"></a>&#x4F7F;&#x7528;</h2><h3 id=\"xml&#x4E2D;&#x5F15;&#x7528;\"><a href=\"#xml&#x4E2D;&#x5F15;&#x7528;\" class=\"headerlink\" title=\"xml&#x4E2D;&#x5F15;&#x7528;\"></a>xml&#x4E2D;&#x5F15;&#x7528;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.idisfkj.mylibrary.EnhanceRecyclerView</div><div class=\"line\">        android:id=&quot;@+id/recyclerView&quot;</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;match_parent&quot;&gt;</div><div class=\"line\">&lt;/com.idisfkj.mylibrary.EnhanceRecyclerView&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\"><a href=\"#&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x76D1;&#x542C;\"></a>&#x8BBE;&#x7F6E;&#x76D1;&#x542C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mRecyclerView.setPullToRefreshListener(new com.idisfkj.mylibrary.EnhanceRecyclerView.PullToRefreshListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onRefreshing() {</div><div class=\"line\">               refreshData();</div><div class=\"line\">           }</div><div class=\"line\">       });</div><div class=\"line\">       mRecyclerView.setLoadMoreListener(new EnhanceRecyclerView.LoadMoreListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onLoadMore() {</div><div class=\"line\">               loadMoreData();</div><div class=\"line\">           }</div><div class=\"line\">       });</div></pre></td></tr></table></figure>\n<p><code>refreshData()</code>&#x4E0E;<code>loadMoreData()</code>&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x4E0D;&#x5C55;&#x793A;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x8BB0;&#x4F4F;&#x5728;&#x8BF7;&#x6C42;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5B8C;&#x4E4B;&#x540E;&#x8981;&#x5728;&#x4ED6;&#x4EEC;&#x4E2D;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;<code>mRecyclerView.setRefreshComplete()</code>&#x4E0E;<code>mRecyclerView.setLoadMoreComplete()</code>&#x6765;&#x91CD;&#x7F6E;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x81F3;&#x4E8E;&#x5176;&#x4ED6;&#x7684;<code>Adapter</code>&#x3001;<code>LayoutManager</code>&#x7B49;&#x7684;&#x8BBE;&#x7F6E;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x4E0E;&#x539F;&#x751F;&#x7684;<code>RecyclerView</code>&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/08/03/RecyclerView&#x4E0B;&#x62C9;&#x5237;&#x65B0;&#x4E0E;&#x4E0A;&#x62C9;&#x66F4;&#x591A;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5176;&#x5B9E;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x96BE;&#x70B9;&#x6709;&#x4E24;&#x4E2A;</p>\n<ul>\n<li>&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x3002;&#x8FD9;&#x4E2A;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x653B;&#x514B;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x539F;&#x7406;&#x4E5F;&#x76F8;&#x5BF9;&#x7B80;&#x5355;</li>\n<li>&#x5B9E;&#x73B0;&#x89E6;&#x6478;&#x4E0E;&#x6ED1;&#x52A8;&#x76D1;&#x542C;&#x903B;&#x8F91;&#x3002;&#x8FD9;&#x4E2A;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x903B;&#x8F91;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x5BF9;&#x6574;&#x4E2A;&#x5237;&#x65B0;&#x7684;&#x8FC7;&#x7A0B;&#x505A;&#x4E2A;&#x6574;&#x4F53;&#x5206;&#x6790;&#xFF0C;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x7406;&#x89E3;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5BF9;&#x5176;&#x4E2D;&#x89C6;&#x56FE;&#x7684;&#x52A8;&#x6001;&#x663E;&#x793A;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x53D8;&#x5316;&#x4E0E;&#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5DE5;&#x7A0B;&#x3002;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x7455;&#x75B5;&#xFF0C;&#x5E0C;&#x671B;&#x6307;&#x51FA;&#xFF0C;&#x6211;&#x4F1A;&#x76F8;&#x5E94;&#x7684;&#x505A;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x4F60;&#x4EEC;&#x4FEE;&#x6539;&#x540E;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x7ED9;&#x6211;&#xFF0C;&#x6211;&#x7EDF;&#x4E00;&#x505A;&#x4FEE;&#x6539;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;:<a href=\"https://github.com/idisfkj/EnhanceRecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/EnhanceRecyclerView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView添加header与footer","url":"https://www.rousetime.com/2016/07/05/RecyclerView添加header与footer/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x8FD9;&#x6B21;&#x4E3B;&#x8981;&#x5173;&#x4E8E;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>header</code>&#x548C;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>ListView</code>&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x80FD;&#x81EA;&#x7531;&#x7684;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;<code>ListView</code>&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x3002;&#x4F7F;&#x7528;<code>addHeaderView()</code>&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;&#x53EA;&#x8981;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#xFF0C;&#x6DFB;&#x52A0;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#x3002;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x4FBF;&#x7684;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x65F6;&#x8981;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;&#x4E0D;&#x6025;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x719F;&#x6089;&#x4E0B;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;</p>\n<h1 id=\"ListView&#x6E90;&#x7801;\"><a href=\"#ListView&#x6E90;&#x7801;\" class=\"headerlink\" title=\"ListView&#x6E90;&#x7801;\"></a>ListView&#x6E90;&#x7801;</h1><p>&#x65E2;&#x7136;<code>ListView</code>&#x5B9E;&#x73B0;&#x4E86;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x8FDB;&#x5165;<code>ListView</code>&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x67E5;&#x770B;&#x5176;&#x4E2D;&#x7684;<code>addHeaderView()</code>&#x65B9;&#x6CD5;&#x4E0E;<code>addFooterView()</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addHeaderView(View v, Object data, boolean isSelectable) {</div><div class=\"line\">        final FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">        info.view = v;</div><div class=\"line\">        info.data = data;</div><div class=\"line\">        info.isSelectable = isSelectable;</div><div class=\"line\">        mHeaderViewInfos.add(info);</div><div class=\"line\">        mAreAllItemsSelectable &amp;= isSelectable;</div><div class=\"line\"></div><div class=\"line\">        // Wrap the adapter if it wasn&apos;t already wrapped.</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            if (!(mAdapter instanceof HeaderViewListAdapter)) {</div><div class=\"line\">                mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            // In the case of re-adding a header view, or adding one later on,</div><div class=\"line\">            // we need to notify the observer.</div><div class=\"line\">            if (mDataSetObserver != null) {</div><div class=\"line\">                mDataSetObserver.onChanged();</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x7701;&#x7565;addFooterView()&#x6E90;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x8DDF;addHeaderView()&#x57FA;&#x672C;&#x4E00;&#x81F4;</em></p>\n</blockquote>\n<p>&#x901A;&#x8FC7;<code>addHeaderView()</code>&#x7684;&#x6E90;&#x7801;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5B83;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;<code>FixedViewInfo</code>&#x7C7B;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class FixedViewInfo {</div><div class=\"line\">        /** The view to add to the list */</div><div class=\"line\">        public View view;</div><div class=\"line\">        /** The data backing the view. This is returned from {@link ListAdapter#getItem(int)}. */</div><div class=\"line\">        public Object data;</div><div class=\"line\">        /** &lt;code&gt;true&lt;/code&gt; if the fixed view should be selectable in the list */</div><div class=\"line\">        public boolean isSelectable;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x662F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (!(mAdapter instanceof HeaderViewListAdapter)) {</div><div class=\"line\">               mAdapter = new HeaderViewListAdapter(mHeaderViewInfos, mFooterViewInfos, mAdapter);</div><div class=\"line\">           }</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;<code>new</code>&#x4E86;&#x4E00;&#x4E2A;<code>HeaderViewListAdapter</code>&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x518D;&#x8FDB;&#x5165;<code>HeaderViewListAdapter</code>&#x6E90;&#x7801;&#x4E2D;&#xFF0C;&#x53D1;&#x73B0;&#x4ED6;&#x5C31;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>Adapter</code>&#x5BF9;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x5C01;&#x88C5;&#x3002;</p>\n<p>&#x4EE3;&#x7801;&#x90FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x601D;&#x60F3;&#xFF0C;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x6709;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">public int getCount() {</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            return getFootersCount() + getHeadersCount() + mAdapter.getCount();</div><div class=\"line\">        } else {</div><div class=\"line\">            return getFootersCount() + getHeadersCount();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;<code>position</code>&#x6765;&#x8BBE;&#x7F6E;<code>ViewType</code>&#x7684;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">public int getItemViewType(int position) {</div><div class=\"line\">       int numHeaders = getHeadersCount();</div><div class=\"line\">       if (mAdapter != null &amp;&amp; position &gt;= numHeaders) {</div><div class=\"line\">           int adjPosition = position - numHeaders;</div><div class=\"line\">           int adapterCount = mAdapter.getCount();</div><div class=\"line\">           if (adjPosition &lt; adapterCount) {</div><div class=\"line\">               return mAdapter.getItemViewType(adjPosition);</div><div class=\"line\">           }</div><div class=\"line\">       }</div><div class=\"line\"></div><div class=\"line\">       return AdapterView.ITEM_VIEW_TYPE_HEADER_OR_FOOTER;</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x770B;<code>getView()</code>&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">public View getView(int position, View convertView, ViewGroup parent) {</div><div class=\"line\">        // Header (negative positions will throw an IndexOutOfBoundsException)</div><div class=\"line\">        int numHeaders = getHeadersCount();</div><div class=\"line\">        if (position &lt; numHeaders) {</div><div class=\"line\">            return mHeaderViewInfos.get(position).view;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // Adapter</div><div class=\"line\">        final int adjPosition = position - numHeaders;</div><div class=\"line\">        int adapterCount = 0;</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            adapterCount = mAdapter.getCount();</div><div class=\"line\">            if (adjPosition &lt; adapterCount) {</div><div class=\"line\">                return mAdapter.getView(adjPosition, convertView, parent);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        // Footer (off-limits positions will throw an IndexOutOfBoundsException)</div><div class=\"line\">        return mFooterViewInfos.get(adjPosition - adapterCount).view;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0E;<code>getItemViewType</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x5F53;<code>position</code>&#x5C0F;&#x4E8E;<code>header</code>&#x7684;<code>count</code>&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x5934;&#x90E8;<code>View</code>,&#x5F53;<code>position</code>&#x51CF;&#x53BB;<code>headeer</code>&#x7684;<code>count</code>&#x65F6;&#x4F9D;&#x7136;&#x5C0F;&#x4E8E;&#x6B63;&#x5E38;&#x7684;<code>adapter</code>&#x7684;<code>count</code>,&#x6B64;&#x65F6;&#x8FD4;&#x56DE;&#x6B63;&#x5E38;&#x7684;<code>View</code>&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#xFF0C;&#x81EA;&#x7136;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;<code>footer</code>&#x4E86;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;<code>RecyclerView</code>&#x7684;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h1 id=\"EnhanceRecyclerView\"><a href=\"#EnhanceRecyclerView\" class=\"headerlink\" title=\"EnhanceRecyclerView\"></a>EnhanceRecyclerView</h1><p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6839;&#x636E;<code>ListView</code>&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;<code>RecyclerView</code>&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>EnhanceRecyclerView</code></p>\n<h2 id=\"FixedViewInfo\"><a href=\"#FixedViewInfo\" class=\"headerlink\" title=\"FixedViewInfo\"></a>FixedViewInfo</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>ListView</code>&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>FixedViewInfo</code>&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#xFF0C;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF0C;<code>View</code>&#x8FD8;&#x662F;&#x4E0D;&#x53D8;&#xFF0C;&#x4F9D;&#x7136;&#x662F;&#x6DFB;&#x52A0;&#x7684;&#x89C6;&#x56FE;&#xFF0C;&#x5C06;&#x5176;&#x4F59;&#x7684;&#x5220;&#x6389;&#xFF0C;&#x6362;&#x6210;<code>viewType</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class FixedViewInfo {</div><div class=\"line\">        public View view;</div><div class=\"line\">        public int viewType;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"addHeaderView&#x4E0E;addFooterView\"><a href=\"#addHeaderView&#x4E0E;addFooterView\" class=\"headerlink\" title=\"addHeaderView&#x4E0E;addFooterView\"></a>addHeaderView&#x4E0E;addFooterView</h2><p>&#x505A;&#x76F8;&#x5E94;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5176;&#x4E2D;<code>BASE_HEADER_VIEW_TYPE</code>&#x4E0E;<code>BASE_FOOTER_VIEW_TYPE</code>&#x662F;&#x4E00;&#x4E2A;<code>final</code>&#x7684;<code>int</code>&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addHeaderView(View view) {</div><div class=\"line\">        FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">        info.view = view;</div><div class=\"line\">        info.viewType = BASE_HEADER_VIEW_TYPE + mHeaderViewInfos.size();</div><div class=\"line\">        mHeaderViewInfos.add(info);</div><div class=\"line\"></div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            mAdapter.notifyDataSetChanged();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void addFooterView(View view) {</div><div class=\"line\">    FixedViewInfo info = new FixedViewInfo();</div><div class=\"line\">    info.view = view;</div><div class=\"line\">    info.viewType = BASE_FOOTER_VIEW_TYPE + mFooterViewInfos.size();</div><div class=\"line\">    mFooterViewInfos.add(info);</div><div class=\"line\"></div><div class=\"line\">    if (mAdapter != null) {</div><div class=\"line\">        mAdapter.notifyDataSetChanged();</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"setAdapter\"><a href=\"#setAdapter\" class=\"headerlink\" title=\"setAdapter\"></a>setAdapter</h2><p>&#x4E0B;&#x9762;&#x662F;<code>setAdapter()</code>&#xFF0C;&#x4F7F;&#x7528;&#x540E;&#x9762;&#x5C01;&#x88C5;&#x7684;<code>WrapperRecyclerViewAdapter</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">    @Override</div><div class=\"line\">    public void setAdapter(Adapter adapter) {</div><div class=\"line\">        if (!(adapter instanceof WrapperRecyclerViewAdapter))</div><div class=\"line\">            mAdapter = new WrapperRecyclerViewAdapter(mHeaderViewInfos, mFooterViewInfos, adapter);</div><div class=\"line\">        super.setAdapter(mAdapter);</div><div class=\"line\"></div><div class=\"line\">//        if (isShouldSpan) {</div><div class=\"line\">//            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</div><div class=\"line\">//        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"WrapperRecyclerViewAdapter\"><a href=\"#WrapperRecyclerViewAdapter\" class=\"headerlink\" title=\"WrapperRecyclerViewAdapter\"></a>WrapperRecyclerViewAdapter</h1><p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;<code>ListView</code>&#x7684;<code>HeaderViewListAdapter</code>&#x6765;&#x6A21;&#x4EFF;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;<code>adapter</code>&#x3002;&#x6211;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E3A;<code>WrapperRecyclerViewAdapter</code>&#x7EE7;&#x627F;<code>RecyclerView.Adapter</code>&#x6839;&#x636E;&#x60C5;&#x51B5;&#x9002;&#x5F53;&#x4FEE;&#x6539;&#x3002;</p>\n<h2 id=\"getItemCount\"><a href=\"#getItemCount\" class=\"headerlink\" title=\"getItemCount\"></a>getItemCount</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemCount() {</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            return getHeadersCount() + getFootersCount() + mAdapter.getItemCount();</div><div class=\"line\">        } else {</div><div class=\"line\">            return getHeadersCount() + getFootersCount();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"getItemViewType\"><a href=\"#getItemViewType\" class=\"headerlink\" title=\"getItemViewType\"></a>getItemViewType</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemViewType(int position) {</div><div class=\"line\">        int numHeaders = getHeadersCount();</div><div class=\"line\">        if (position &lt; numHeaders) {</div><div class=\"line\">            return mHeaderViewInfos.get(position).viewType;</div><div class=\"line\">        }</div><div class=\"line\">        int adjPosition = position - numHeaders;</div><div class=\"line\">        int adapterPosition = 0;</div><div class=\"line\">        if (mAdapter != null) {</div><div class=\"line\">            adapterPosition = mAdapter.getItemCount();</div><div class=\"line\">            if (adjPosition &lt; adapterPosition) {</div><div class=\"line\">                return mAdapter.getItemViewType(adjPosition);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        return mFooterViewInfos.get(position - adapterPosition - getHeadersCount()).viewType;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x903B;&#x8F91;&#x4E0E;<code>ListView</code>&#x7684;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#x3002;</p>\n<h2 id=\"onCreateViewHolder\"><a href=\"#onCreateViewHolder\" class=\"headerlink\" title=\"onCreateViewHolder\"></a>onCreateViewHolder</h2><p>&#x8FD9;&#x91CC;&#x9700;&#x5C06;<code>HeaderViewListAdapter</code>&#x4E2D;&#x7684;<code>getView()</code>&#x65B9;&#x6CD5;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">    if (viewType &gt;= EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE + getHeadersCount()) {</div><div class=\"line\">        View view = mHeaderViewInfos.get(viewType - EnhanceRecyclerView.BASE_HEADER_VIEW_TYPE).view;</div><div class=\"line\">        return viewHolder(view);</div><div class=\"line\">    } else if (viewType &gt;= EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE &amp;&amp; viewType &lt; EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE + getFootersCount()) {</div><div class=\"line\">        View view = mFooterViewInfos.get(viewType - EnhanceRecyclerView.BASE_FOOTER_VIEW_TYPE).view;</div><div class=\"line\">        return viewHolder(view);</div><div class=\"line\">    }</div><div class=\"line\">    return mAdapter.onCreateViewHolder(parent, viewType);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;<code>viewType</code>&#x6765;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;&#x6587;&#x4EF6;.&#x4E0D;&#x662F;<code>header</code>&#x4E0E;<code>footer</code>&#x5E03;&#x5C40;&#x65F6;&#x5219;&#x76F4;&#x63A5;&#x56DE;&#x8C03;&#x539F;&#x59CB;<code>adapter</code>&#x7684;<code>onCreateViewHolder()</code>&#x65B9;&#x6CD5;&#x3002;&#x5B9E;&#x73B0;&#x6B63;&#x5E38;&#x7684;&#x5E03;&#x5C40;&#x3002;</p>\n<h2 id=\"onBindViewHolder\"><a href=\"#onBindViewHolder\" class=\"headerlink\" title=\"onBindViewHolder\"></a>onBindViewHolder</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {</div><div class=\"line\">    int numHeaders = getHeadersCount();</div><div class=\"line\">    if (position &lt; numHeaders) {</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    int adjPosition = position - numHeaders;</div><div class=\"line\">    int adapterCount = 0;</div><div class=\"line\">    if (mAdapter != null) {</div><div class=\"line\">        adapterCount = mAdapter.getItemCount();</div><div class=\"line\">        if (adjPosition &lt; adapterCount) {</div><div class=\"line\">            mAdapter.onBindViewHolder(holder, adjPosition);</div><div class=\"line\">            return;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6839;&#x636E;<code>position</code>&#x7684;&#x4F4D;&#x7F6E;&#x6765;&#x9009;&#x62E9;&#xFF0C;&#x5F53;<code>position</code>&#x5C5E;&#x4E8E;&#x6B63;&#x5E38;&#x7684;&#x4F4D;&#x7F6E;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x65F6;&#xFF0C;&#x5219;&#x56DE;&#x8C03;&#x539F;&#x59CB;&#x7684;<code>adapter</code>&#x7684;<code>onBindViewHolder()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x7ED1;&#x5B9A;&#xFF1B;&#x5BF9;&#x4E8E;&#x5176;&#x5B83;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x65E0;&#x9700;&#x505A;&#x5904;&#x7406;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E3B;&#x8981;&#x7684;&#x6A21;&#x4EFF;&#x53D8;&#x52A8;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x5728;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8FDB;&#x884C;&#x9002;&#x5F53;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>EnhanceRecyclerView</code>&#x66FF;&#x4EE3;<code>RecyclerView</code></em></p>\n</blockquote>\n<h1 id=\"&#x8C03;&#x6574;\"><a href=\"#&#x8C03;&#x6574;\" class=\"headerlink\" title=\"&#x8C03;&#x6574;\"></a>&#x8C03;&#x6574;</h1><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x5728;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#x8981;&#x8BBE;&#x7F6E;<code>LayoutManager</code>&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>LinearLayout</code>&#x65F6;&#xFF0C;&#x81EA;&#x7136;&#x6CA1;&#x4E0A;&#x9762;&#x95EE;&#x9898;&#xFF0C;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x80FD;&#x6B63;&#x5E38;&#x6DFB;&#x52A0;&#xFF1B;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x7684;<code>LayoutManager</code>&#x8BBE;&#x7F6E;&#x4E3A;<code>GridLayoutManager</code>&#x4E0E;<code>StaggeredGridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x5C31;&#x662F;&#x4ED6;&#x4EEC;&#x4E0D;&#x80FD;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4F7F;&#x4ED6;&#x4EEC;&#x5728;&#x6DFB;&#x52A0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x65F6;&#x5019;&#x72EC;&#x81EA;&#x5360;&#x4E00;&#x884C;&#x3002;</p>\n<h2 id=\"adjustSpanSize\"><a href=\"#adjustSpanSize\" class=\"headerlink\" title=\"adjustSpanSize\"></a>adjustSpanSize</h2><p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>WrapperRecyclerViewAdapter</code>&#x4E2D;&#x6DFB;&#x52A0;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x8C03;&#x6574;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void adjustSpanSize(RecyclerView recyclerView) {</div><div class=\"line\">        if (recyclerView.getLayoutManager() instanceof GridLayoutManager) {</div><div class=\"line\">            final GridLayoutManager manager = (GridLayoutManager) recyclerView.getLayoutManager();</div><div class=\"line\">            manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {</div><div class=\"line\">                @Override</div><div class=\"line\">                public int getSpanSize(int position) {</div><div class=\"line\">                    int numHeaders = getHeadersCount();</div><div class=\"line\">                    int adjPosition = position - numHeaders;</div><div class=\"line\">                    if (position &lt; numHeaders || adjPosition &gt;= mAdapter.getItemCount())</div><div class=\"line\">                        return manager.getSpanCount();</div><div class=\"line\">                    return 1;</div><div class=\"line\">                }</div><div class=\"line\">            });</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        if (recyclerView.getLayoutManager() instanceof StaggeredGridLayoutManager) {</div><div class=\"line\">            isStaggered = true;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5F53;<code>LayoutManager</code>&#x4E3A;<code>GridLayoutManager</code>&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;<code>manager</code>&#x6765;&#x8BBE;&#x7F6E;<code>setSpanSizeLookup()</code>&#x5728;<code>getSpanSize()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x5177;&#x4F53;&#x5224;&#x65AD;&#x6765;&#x8C03;&#x7528;<code>manager.getSpanCount()</code>&#x6765;&#x5B9E;&#x73B0;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x5360;&#x4E00;&#x884C;&#x7684;&#x6548;&#x679C;&#xFF1B;&#x5BF9;&#x4E8E;<code>StaggeredGridLayoutManager</code>&#x56E0;&#x4E3A;&#x5176;&#x6CA1;&#x6709;<code>setSpanSizeLookup()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x505A;&#x6807;&#x8BB0;&#xFF0C;&#x5728;<code>ViewHolder</code>&#x4E2D;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x7684;<code>ItemView</code>&#x6765;&#x8BBE;&#x7F6E;<code>params</code>&#xFF0C;<code>setFullSpa(true)</code>&#x65B9;&#x6CD5;&#x6765;&#x586B;&#x5145;&#x4E00;&#x884C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">private RecyclerView.ViewHolder viewHolder(View itemView) {</div><div class=\"line\"></div><div class=\"line\">    if (isStaggered) {</div><div class=\"line\">        StaggeredGridLayoutManager.LayoutParams params = new StaggeredGridLayoutManager.LayoutParams(StaggeredGridLayoutManager.LayoutParams.MATCH_PARENT,</div><div class=\"line\">                StaggeredGridLayoutManager.LayoutParams.WRAP_CONTENT);</div><div class=\"line\">        params.setFullSpan(true);</div><div class=\"line\">        itemView.setLayoutParams(params);</div><div class=\"line\">    }</div><div class=\"line\">    return new RecyclerView.ViewHolder(itemView) {</div><div class=\"line\">    };</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"setLayoutManager\"><a href=\"#setLayoutManager\" class=\"headerlink\" title=\"setLayoutManager\"></a>setLayoutManager</h2><p>&#x5728;<code>EnhanceRecyclerView</code>&#x4E2D;&#x91CD;&#x5199;<code>setLayoutManager()</code>&#x65B9;&#x6CD5;,&#x6DFB;&#x52A0;&#x6807;&#x8BB0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void setLayoutManager(LayoutManager layout) {</div><div class=\"line\">        if (layout instanceof GridLayoutManager || layout instanceof StaggeredGridLayoutManager)</div><div class=\"line\">            isShouldSpan = true;</div><div class=\"line\">        super.setLayoutManager(layout);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x518D; &#x5728;<code>EnhanceRecyclerView</code>&#x7684;<code>setAdapter()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6839;&#x636E;&#x6807;&#x8BB0;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8C03;&#x7528;<code>adjustSpanSize()</code>&#x65B9;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x8C03;&#x6574;<code>header</code>&#x4E0E;<code>footer</code>.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (isShouldSpan) {</div><div class=\"line\">            ((WrapperRecyclerViewAdapter) mAdapter).adjustSpanSize(this);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x524D;&#x9762;<code>setAdapter()</code>&#x4E2D;&#x6240;&#x6CE8;&#x91CA;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x6574;&#x4E2A;&#x8C03;&#x6574;&#x90E8;&#x5206;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x3002;<code>header</code>&#x4E0E;<code>footer</code>&#x7684;&#x6DFB;&#x52A0;&#x4E5F;&#x5C31;&#x57FA;&#x672C;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;<code>RecyclerView</code>&#x7684;&#x5934;&#x90E8;&#x4E0E;&#x5C3E;&#x90E8;&#x7684;&#x6DFB;&#x52A0;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x80FD;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x539F;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#x3002;&#x867D;&#x7136;&#x65B9;&#x6CD5;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x4E0D;&#x80FD;&#x5728;&#x521D;&#x59CB;&#x5316;&#xFF08;onCreate&#xFF09;&#x4E2D;&#x540C;&#x65F6;&#x6DFB;&#x52A0;<code>header</code>&#x4E0E;<code>footer</code>&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x5E03;&#x5C40;&#x6DF7;&#x4E71;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4F55;&#x6709;&#x8FD9;&#x79CD;&#x7279;&#x4F8B;&#xFF0C;&#x5E0C;&#x671B;&#x77E5;&#x9053;&#x7684;&#x53EF;&#x4EE5;&#x544A;&#x77E5;&#x89E3;&#x51B3;&#x4E0B;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x6A21;&#x4EFF;&#x7684;&#x601D;&#x60F3;&#x8FD8;&#x662F;&#x5F88;&#x503C;&#x5F97;&#x63A8;&#x8350;&#x7684;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"多线程下载","url":"https://www.rousetime.com/2016/06/26/多线程下载/","content":"<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x7684;&#x539F;&#x7406;&#x5C31;&#x662F;&#x5C06;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x4EFD;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4EFD;&#x90FD;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x4E8E;&#x6587;&#x4EF6;&#x7684;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#x81EA;&#x7136;&#x5C31;&#x63D0;&#x9AD8;&#x4E86;&#x8BB8;&#x591A;&#x3002;</p>\n<p>&#x65E2;&#x7136;&#x8981;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x90E8;&#x5206;&#x5206;&#x5DE5;&#x4E0B;&#x8F7D;&#xFF0C;&#x81EA;&#x7136;&#x8981;&#x77E5;&#x9053;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x81EA;&#x5DF1;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0E;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x7684;&#x5206;&#x914D;&#x4E0E;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B9A;&#x4F4D;&#x5230;&#x4E0B;&#x8F7D;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<h1 id=\"&#x5C01;&#x88C5;\"><a href=\"#&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"&#x5C01;&#x88C5;\"></a>&#x5C01;&#x88C5;</h1><p>&#x5BF9;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5C01;&#x88C5;&#x5230;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x7C7B;&#x4E2D;<code>DownUtil</code>&#xFF0C;&#x5411;&#x5176;&#x4E2D;&#x4F20;&#x5165;&#x4E0B;&#x8F7D;&#x7684;&#x94FE;&#x63A5;&#x3001;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#x3001;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x7EBF;&#x7A0B;&#x6570;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">public DownUtil(String path, String targetFile, int threadNum) {</div><div class=\"line\">        this.path = path;</div><div class=\"line\">        this.targetFile = targetFile;</div><div class=\"line\">        this.threadNum = threadNum;</div><div class=\"line\">        downThreads = new DownThread[threadNum];</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<code>DownThread</code>&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;</p>\n<h1 id=\"&#x5206;&#x914D;&#x7EBF;&#x7A0B;\"><a href=\"#&#x5206;&#x914D;&#x7EBF;&#x7A0B;\" class=\"headerlink\" title=\"&#x5206;&#x914D;&#x7EBF;&#x7A0B;\"></a>&#x5206;&#x914D;&#x7EBF;&#x7A0B;</h1><p>&#x8FD9;&#x91CC;&#x901A;&#x8FC7;<code>HttpURLConnection</code>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0B;&#x8F7D;&#xFF0C;&#x901A;&#x8FC7;<code>getContentLength()</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;&#x603B;&#x5927;&#x5C0F;&#xFF0C;&#x518D;&#x5BF9;&#x5176;&#x5E73;&#x5747;&#x5206;&#x914D;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x786E;&#x5B9A;&#x4E86;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x5B9A;&#x4F4D;&#x5230;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>RandomAccessFile</code>&#x6765;&#x8FFD;&#x8E2A;&#x5B9A;&#x4F4D;&#x5230;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5B83;&#x7684;<code>seek()</code>&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5B9A;&#x4F4D;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x8BE6;&#x7EC6;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void download() throws Exception {</div><div class=\"line\">    URL url = new URL(path);</div><div class=\"line\">    HttpURLConnection conn = (HttpURLConnection) url.openConnection();</div><div class=\"line\">    conn.setRequestMethod(&quot;GET&quot;);</div><div class=\"line\">    conn.setConnectTimeout(5000);</div><div class=\"line\">    conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;zh-CN&quot;);</div><div class=\"line\">    conn.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);</div><div class=\"line\">    conn.setRequestProperty(&quot;Connection&quot;, &quot;Keep-Alive&quot;);</div><div class=\"line\"></div><div class=\"line\">    fileSize = conn.getContentLength();</div><div class=\"line\">    conn.disconnect();</div><div class=\"line\">    //&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x5C0F;</div><div class=\"line\">    int currentPartSize = fileSize / threadNum + 1;</div><div class=\"line\">    RandomAccessFile file = new RandomAccessFile(targetFile, &quot;rw&quot;);</div><div class=\"line\"></div><div class=\"line\">    //&#x8BBE;&#x7F6E;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x5927;&#x5C0F;</div><div class=\"line\">    file.setLength(fileSize);</div><div class=\"line\">    file.close();</div><div class=\"line\">    for (int i = 0; i &lt; threadNum; i++) {</div><div class=\"line\">        //&#x4E0B;&#x8F7D;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;</div><div class=\"line\">        int startPos = i * currentPartSize;</div><div class=\"line\">        RandomAccessFile currentPart = new RandomAccessFile(targetFile, &quot;rw&quot;);</div><div class=\"line\">        //&#x5B9A;&#x4F4D;&#x5230;&#x4E0B;&#x8F7D;&#x4F4D;&#x7F6E;</div><div class=\"line\">        currentPart.seek(startPos);</div><div class=\"line\">        //&#x4E0B;&#x8F7D;&#x7EBF;&#x7A0B;</div><div class=\"line\">        downThreads[i] = new DownThread(startPos, currentPartSize, currentPart);</div><div class=\"line\">        downThreads[i].start();</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h1 id=\"&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\"><a href=\"#&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\" class=\"headerlink\" title=\"&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;\"></a>&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;</h1><p>&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;<code>DownThread</code>&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5F97;&#x5230;&#x4E86;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x521D;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7684;&#x8F93;&#x5165;&#x6D41;<code>InputStream</code>&#xFF0C;&#x901A;&#x8FC7;<code>skip()</code>&#x65B9;&#x6CD5;&#x8DF3;&#x8DC3;&#x5230;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x5199;&#x5165;&#x5230;<code>RandomAccessFile</code>&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">    public DownThread(int startPos, int currentPartSize, RandomAccessFile currentPart) {</div><div class=\"line\">        this.startPos = startPos;</div><div class=\"line\">        this.currentPartSize = currentPartSize;</div><div class=\"line\">        this.currentPart = currentPart;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void run() {</div><div class=\"line\">        try {</div><div class=\"line\">            URL url = new URL(path);</div><div class=\"line\">            HttpURLConnection conn = (HttpURLConnection) url.openConnection();</div><div class=\"line\">            conn.setRequestMethod(&quot;GET&quot;);</div><div class=\"line\">            conn.setConnectTimeout(5000);</div><div class=\"line\">            conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;zh-CN&quot;);</div><div class=\"line\">            conn.setRequestProperty(&quot;Charset&quot;, &quot;UTF-8&quot;);</div><div class=\"line\">            InputStream in = conn.getInputStream();</div><div class=\"line\">            </div><div class=\"line\">            skipFully(in, startPos);</div><div class=\"line\">            byte[] buffer = new byte[1024];</div><div class=\"line\">            int hasRead = 0;</div><div class=\"line\">            while ((hasRead = in.read(buffer)) &gt; 0 &amp;&amp; length &lt; currentPartSize) {</div><div class=\"line\">                currentPart.write(buffer, 0, hasRead);</div><div class=\"line\">                length += hasRead;</div><div class=\"line\">            }</div><div class=\"line\">            currentPart.close();</div><div class=\"line\">            in.close();</div><div class=\"line\">        } catch (Exception e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4E0B;&#x8F7D;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;&#x5C01;&#x88C5;&#x7C7B;<code>DownUtil</code>&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5173;&#x952E;&#x5C31;&#x662F;&#x5206;&#x914D;&#x597D;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B9A;&#x4F4D;&#x8FDB;&#x7A0B;&#x4E0B;&#x8F7D;&#x7684;&#x51C6;&#x786E;&#x4F4D;&#x7F6E;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x5199;&#x5165;&#x5230;&#x6587;&#x4EF6;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;&#x53EF;&#x4EE5;&#x501F;&#x52A9;<code>RandomAccessFile</code>&#x6765;&#x8FDB;&#x884C;&#x5B9A;&#x4F4D;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#x4E5F;&#x5E76;&#x975E;&#x5F00;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x8D8A;&#x591A;&#x4E0B;&#x8F7D;&#x7684;&#x901F;&#x5EA6;&#x4E5F;&#x5C31;&#x8D8A;&#x5FEB;&#xFF0C;&#x56E0;&#x4E3A;&#x7EBF;&#x7A0B;&#x8D8A;&#x591A;&#x5BF9;&#x4E8E;&#x7A0B;&#x5E8F;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x8D1F;&#x62C5;&#xFF0C;&#x8FC7;&#x591A;&#x7684;&#x8BDD;&#x53CD;&#x800C;&#x4F1A;&#x964D;&#x4F4E;&#x4E0B;&#x8F7D;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5408;&#x7406;&#x8FD0;&#x7528;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"七大排序算法总结","url":"https://www.rousetime.com/2016/06/19/七大排序算法总结/","content":"<p>&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;&#x4E03;&#x5927;&#x7B97;&#x6CD5;&#x7684;&#x601D;&#x60F3;&#x4E0E;&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x505A;&#x4E00;&#x4E2A;&#x5F52;&#x603B;&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">&#x6392;&#x5E8F;&#x65B9;&#x6CD5;</th>\n<th style=\"text-align:center\">&#x5E73;&#x5747;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x6700;&#x574F;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x6700;&#x597D;&#x590D;&#x6742;&#x5EA6;</th>\n<th style=\"text-align:center\">&#x8F85;&#x52A9;&#x7A7A;&#x95F4;</th>\n<th style=\"text-align:center\">&#x7A33;&#x5B9A;&#x6027;</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5F52;&#x5E76;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(n)</td>\n<td style=\"text-align:center\">&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)~O(n^2)</td>\n<td style=\"text-align:center\">O(n^1.3)</td>\n<td style=\"text-align:center\">O(n^2)</td>\n<td style=\"text-align:center\">O(logn)~O(n)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&#x5806;&#x6392;&#x5E8F;</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(nlogn)</td>\n<td style=\"text-align:center\">O(1)</td>\n<td style=\"text-align:center\">&#x4E0D;&#x7A33;&#x5B9A;</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"><a href=\"#&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"></a>&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;\"><a href=\"#&#x601D;&#x60F3;\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%80-%E7%9B%B4%E6%8E%A5%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</a>&#xFF0C;&#x6574;&#x4F53;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6570;&#x636E;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E0E;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x3002;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6BCF;&#x6B21;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x63D2;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6700;&#x672B;&#x5C3E;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x66F4;&#x5927;&#x7684;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x3002;&#x76F4;&#x5230;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x7ED3;&#x675F;&#x6392;&#x5E8F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;\"><a href=\"#&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x5047;&#x8BBE;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;a[0&#x2026;n-1];</p>\n<ol>\n<li>&#x9996;&#x5148;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;0&#xFF0C;&#x4EE4;<code>i = 0</code>&#x3002;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;a[i]</code>&#x4E2D;&#x3002;&#x4F7F;&#x5F97;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[0..i]</code>,<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[i...n-1]</code></li>\n<li>&#x5B8C;&#x6210;&#x540E; <code>i++</code> ,&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>i = n-1</code> &#x4E3A;&#x6B62;&#x3002;&#x4F7F;&#x5F97;&#x5168;&#x90E8;&#x6570;&#x90FD;&#x5728;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"><a href=\"#&#x5192;&#x6CE1;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"></a>&#x5192;&#x6CE1;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-1\"><a href=\"#&#x601D;&#x60F3;-1\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x4E3B;&#x8981;&#x662F;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4E24;&#x4E24;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x62FF;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x8BF4;&#x660E;&#xFF0C;&#x8FDB;&#x884C;&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x540E;&#x4F1A;&#x5C06;&#x5927;&#x7684;&#x6570;<code>&#x6C89;</code>&#x5230;&#x5E95;&#x90E8;&#xFF0C;&#x5C06;&#x5C0F;&#x5F97;&#x6570;<code>&#x6D6E;</code>&#x5230;&#x9876;&#x90E8;&#x3002;&#x6240;&#x4EE5;&#x5192;&#x6CE1;&#x8BF4;&#x6CD5;&#x7531;&#x6B64;&#x5F97;&#x540D;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-1\"><a href=\"#&#x6B65;&#x9AA4;-1\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x4EE5;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x4E3A;&#x4F8B;&#xFF0C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A;<code>n</code>&#x3002;</p>\n<ol>\n<li>&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x5F00;&#x59CB;&#x90FD;&#x4ECE;<code>a[0]</code>&#x5F00;&#x59CB;&#x4E0E;&#x5176;&#x4E0B;&#x9762;&#x7684;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x5219;&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x7EE7;&#x7EED;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x5C31;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;<code>n-1</code>&#x6B21;&#x540E;&#xFF0C;&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x6570;&#x5C31;&#x5728;&#x6570;&#x7EC4;&#x7684;<code>a[n-1]</code>&#x5904;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>N = n-1</code>,&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"><a href=\"#&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"></a>&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-2\"><a href=\"#&#x601D;&#x60F3;-2\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;:<code>&#x5C06;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x5173;&#x952E;&#x6570;&#x4E0E;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x4F7F;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-2\"><a href=\"#&#x6B65;&#x9AA4;-2\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n]</code></p>\n<ol>\n<li>&#x5C06;<code>a[0]</code>&#x4F5C;&#x4E3A;&#x8D77;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4ECE;<code>a[1]</code>&#x5F00;&#x59CB;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x524D;&#x9762;&#x6240;&#x9047;&#x5230;&#x7684;&#x6BD4;&#x8F83;&#x6570;&#xFF0C;&#x5219;&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6BD4;&#x8F83;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x5C06;<code>a[n]</code>&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x6BD4;&#x8F83;&#x5B8C;&#x4EE5;&#x540E;&#x5219;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"><a href=\"#&#x5F52;&#x5E76;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"></a>&#x5F52;&#x5E76;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-3\"><a href=\"#&#x601D;&#x60F3;-3\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E5%9B%9B-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5F52;&#x5E76;&#x6392;&#x5E8F;</a>&#x662F;&#x4E00;&#x4E2A;&#x6548;&#x7387;&#x76F8;&#x5BF9;&#x8F83;&#x9AD8;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4FDD;&#x8BC1;&#x6BCF;&#x7EC4;&#x90FD;&#x6709;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x7EC8;&#x4F7F;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-3\"><a href=\"#&#x6B65;&#x9AA4;-3\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><ol>\n<li>&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;&#x601D;&#x60F3;</code>&#x5C06;&#x5176;&#x5212;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#xFF0C;&#x5176;&#x4E2D;&#x53EF;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x8FDB;&#x884C;&#x5212;&#x5206;&#x3002;</li>\n<li>&#x5C06;&#x6709;&#x5E8F;&#x7684;&#x7EC4;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4E2D;&#x501F;&#x52A9;&#x4E00;&#x4E2A;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x7684;&#x6709;&#x5E8F;&#x7EC4;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5C06;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x4E14;&#x8F83;&#x5C0F;&#x7684;&#x6240;&#x5728;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x5411;&#x540E;&#x81EA;&#x589E;&#xFF0C;&#x518D;&#x4E0E;&#x539F;&#x6765;&#x6BD4;&#x8F83;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;<code>2</code>&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5B8C;&#x6BD5;&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x8FD8;&#x6709;&#x5269;&#x4F59;&#x6570;&#x672A;&#x6BD4;&#x8F83;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x6309;&#x539F;&#x6709;&#x7684;&#x987A;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;,&#x6700;&#x540E;&#x5C06;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x52A0;&#x5165;&#x5230;&#x539F;&#x6709;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x7684;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x5F52;&#x5E76;&#x5B8C;&#x6BD5;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"><a href=\"#&#x5FEB;&#x901F;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"></a>&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-4\"><a href=\"#&#x601D;&#x60F3;-4\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%94-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</a>&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#xFF1A;<code>&#x5C06;&#x4E00;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x5206;&#x754C;&#x7EBF;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x5C0F;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x518D;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x4EE5;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6709;&#x5E8F;&#x7684;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-4\"><a href=\"#&#x6B65;&#x9AA4;-4\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x5047;&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x90FD;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;<code>a[i]</code> (<code>i = 0</code>) &#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x5373;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x754C;&#x6570;&#x3002;&#x5148;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x540E;&#x9762;&#x5F00;&#x59CB;&#x5373;&#x521D;&#x503C;<code>j = n-1</code>&#xFF0C;&#x9010;&#x4E2A;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x4E0E;&#x9009;&#x7684;&#x7684;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>j--</code>)&#xFF0C;&#x82E5;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>i++</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x505C;&#x6B62;&#x524D;&#x9762;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x518D;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<code>i</code>&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5411;&#x540E;&#x8FDB;&#x884C;&#x904D;&#x5386;&#xFF0C;&#x9010;&#x4E2A;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>i++</code>)&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>j--</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>i==j</code>&#x5C31;&#x7ED3;&#x675F;&#x672C;&#x6B21;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x5C06;&#x5176;&#x6309;&#x5173;&#x952E;&#x6570;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x518D;&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5BF9;&#x5212;&#x5206;&#x7684;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x5373;&#x6B64;&#x65F6;&#x6240;&#x6709;&#x6570;&#x636E;&#x6709;&#x5E8F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\"><a href=\"#&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5E0C;&#x5C14;&#x6392;&#x5E8F;\"></a>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-5\"><a href=\"#&#x601D;&#x60F3;-5\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/19/%E7%AE%97%E6%B3%95-%E5%85%AD-%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5E0C;&#x5C14;&#x6392;&#x5E8F;</a>&#x662F;&#x8BB0;&#x5F55;&#x589E;&#x91CF;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x518D;&#x5BF9;&#x5206;&#x7EC4;&#x5185;&#x90E8;&#x8FDB;&#x884C;<a href=\"http://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x968F;&#x7740;&#x589E;&#x91CF;&#x7684;&#x4E0D;&#x65AD;&#x51CF;&#x5C0F;&#xFF0C;&#x76F4;&#x5230;&#x589E;&#x91CF;&#x51CF;&#x5C0F;&#x5230;<code>1</code>&#x65F6;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x5206;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E3A;<code>1</code>&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-5\"><a href=\"#&#x6B65;&#x9AA4;-5\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><p>&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x5F00;&#x59CB;&#x53D6;&#x589E;&#x91CF;&#x6570;<code>d=n/2</code>&#x3002;&#x4ECE;<code>a[0]~a[d-1]</code>&#x5C06;&#x6570;&#x7EC4;&#x4E2D;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x4E3A;&#x589E;&#x91CF;&#x6570;<code>d</code>&#x7684;&#x500D;&#x6570;&#x5F52;&#x4E3A;&#x76F8;&#x540C;&#x7EC4;&#x3002;</li>\n<li>&#x4F9D;&#x6B21;&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;<a href=\"http://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#x3002;</li>\n<li>&#x518D;&#x589E;&#x91CF;&#x6570;<code>d=d/2</code>&#xFF0C;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>d=1</code>&#x4E3A;&#x6B62;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5806;&#x6392;&#x5E8F;\"><a href=\"#&#x5806;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x5806;&#x6392;&#x5E8F;\"></a>&#x5806;&#x6392;&#x5E8F;</h1><h2 id=\"&#x601D;&#x60F3;-6\"><a href=\"#&#x601D;&#x60F3;-6\" class=\"headerlink\" title=\"&#x601D;&#x60F3;\"></a>&#x601D;&#x60F3;</h2><p><a href=\"https://idisfkj.github.io/2016/06/19/%E7%AE%97%E6%B3%95-%E4%B8%83-%E5%A0%86%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5806;&#x6392;&#x5E8F;</a>&#x662F;&#x91C7;&#x7528;&#x6811;&#x7684;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5806;&#x90FD;&#x662F;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x3002;&#x5806;&#x6392;&#x5E8F;&#x5206;&#x4E3A;&#x5927;&#x6839;&#x5806;&#x4E0E;&#x5C0F;&#x6839;&#x5806;&#xFF0C;<code>&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x8868;&#x793A;&#x5728;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#xFF0C;&#x6240;&#x7528;&#x7684;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#xFF08;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#xFF09;&#x4ED6;&#x4EEC;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF08;&#x5B58;&#x5728;&#xFF09;</code>&#x3002;&#x6240;&#x4EE5;&#x5806;&#x7684;&#x9876;&#x70B9;&#x4E0D;&#x662F;&#x6700;&#x5927;&#x6570;&#x5C31;&#x662F;&#x6700;&#x5C0F;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x79CD;&#x6027;&#x8D28;&#xFF0C;<code>&#x6BCF;&#x6B21;&#x90FD;&#x53D6;&#x51FA;&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x7684;&#x9876;&#x70B9;&#x6570;&#xFF0C;&#x5F62;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;</code>&#x3002;</p>\n<h2 id=\"&#x6B65;&#x9AA4;-6\"><a href=\"#&#x6B65;&#x9AA4;-6\" class=\"headerlink\" title=\"&#x6B65;&#x9AA4;\"></a>&#x6B65;&#x9AA4;</h2><ol>\n<li>&#x9996;&#x5148;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x6216;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x5C0F;&#x6839;&#x5806;&#x4E3A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x770B;&#x505A;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x7684;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x5C06;&#x4ED6;&#x4EEC;&#x90FD;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#xFF0C;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x628A;&#x5176;&#x5F53;&#x505A;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9010;&#x6B65;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x3002;&#x4F8B;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x4EE5;<code>30</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6839;&#x636E;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x9700;&#x8981;&#x4E0E;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;;&#x518D;&#x4EE5;<code>60</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x4E0E;<code>15</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF1B;&#x6700;&#x540E;&#x4E0E;<code>70</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E0E;&#x539F;&#x6765;<code>30</code>&#x7684;&#x4F4D;&#x7F6E;&#x5373;&#x73B0;&#x5728;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x7684;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x6700;&#x7EC8;&#x5F62;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x3002;</li>\n<li>&#x7136;&#x540E;&#x5C31;&#x662F;&#x53D6;&#x51FA;&#x5F62;&#x6210;&#x7684;&#x5C0F;&#x6839;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x4E0E;&#x5806;&#x4E2D;&#x7B2C;<code>N</code>(N=n)&#x4E2A;&#x8282;&#x70B9;&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;<code>a[N-1]</code>&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5C0F;&#x6839;&#x5806;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x751F;&#x4EA7;&#x5C0F;&#x6839;&#x5806;<code>N--</code>&#xFF0C;&#x4F46;&#x6B64;&#x65F6;&#x8981;&#x751F;&#x6210;&#x7684;&#x6570;&#x7684;&#x8303;&#x56F4;&#x4E3A;<code>a[0...N-1]</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>2</code>&#x3001;<code>3</code>&#xFF0C;&#x76F4;&#x5230;<code>N=1</code>&#xFF0C;&#x5373;<code>a[0]</code>&#xFF0C;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<p>&#x5982;&#x6709;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#xFF0C;&#x5168;&#x90E8;&#x4EE3;&#x7801;&#x5DF2;&#x7ECF;&#x653E;&#x5230;github&#x4E0A;&#xFF0C;&#x6709;&#x9700;&#x8981;&#x7684;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x3002;</p>\n<p>github&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/Arithmetic\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Arithmetic</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(七)堆排序","url":"https://www.rousetime.com/2016/06/19/算法-七-堆排序/","content":"<p>&#x5806;&#x6392;&#x5E8F;&#x662F;&#x91C7;&#x7528;&#x6811;&#x7684;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5806;&#x90FD;&#x662F;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x3002;&#x5806;&#x6392;&#x5E8F;&#x5206;&#x4E3A;&#x5927;&#x6839;&#x5806;&#x4E0E;&#x5C0F;&#x6839;&#x5806;&#xFF0C;<code>&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x8868;&#x793A;&#x5728;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#xFF0C;&#x6240;&#x7528;&#x7684;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#xFF08;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#xFF09;&#x4ED6;&#x4EEC;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#xFF08;&#x5B58;&#x5728;&#xFF09;</code>&#x3002;&#x6240;&#x4EE5;&#x5806;&#x7684;&#x9876;&#x70B9;&#x4E0D;&#x662F;&#x6700;&#x5927;&#x6570;&#x5C31;&#x662F;&#x6700;&#x5C0F;&#x6570;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8FD9;&#x79CD;&#x6027;&#x8D28;&#xFF0C;<code>&#x6BCF;&#x6B21;&#x90FD;&#x53D6;&#x51FA;&#x5927;&#x6839;&#x5806;&#xFF08;&#x5C0F;&#x6839;&#x5806;&#xFF09;&#x7684;&#x9876;&#x70B9;&#x6570;&#xFF0C;&#x5F62;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x9996;&#x5148;&#x8981;&#x660E;&#x767D;&#x5806;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x8868;&#x793A;&#x65B9;&#x5F0F;&#x3002;<code>&#x662F;&#x6309;&#x7167;&#x4ECE;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x5F00;&#x59CB;&#x4ECE;&#x4E0A;&#x5F80;&#x4E0B;&#xFF0C;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#x5B58;&#x653E;&#x5230;&#x6570;&#x7EC4;&#x4E2D;</code>&#x3002;</p>\n<p><img src=\"/2016/06/19/&#x7B97;&#x6CD5;-&#x4E03;-&#x5806;&#x6392;&#x5E8F;/1.jpg\" alt=\"&#x5806;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x5E94;&#x8BE5;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x5806;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;</em></p>\n</blockquote>\n<p>&#x8BBE;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<p>&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;<code>i</code>&#x7684;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;(&#x5B58;&#x5728;)&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x5206;&#x522B;&#x4E3A;<code>i*2+1</code>&#x3001;<code>i*2+2</code>&#x3002;&#x800C;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x4E3A;<code>n/2-1</code>(n&#x4E3A;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;)&#x3002;&#x501F;&#x52A9;&#x8FD9;&#x4E9B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5C0F;&#x6839;&#x5806;&#x4E0E;&#x5927;&#x6839;&#x5806;&#x7684;&#x5F62;&#x6210;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x5806;&#x6392;&#x5E8F;&#x3002;</p>\n<ol>\n<li>&#x9996;&#x5148;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x6216;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x5C0F;&#x6839;&#x5806;&#x4E3A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x770B;&#x505A;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x7684;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x5C06;&#x4ED6;&#x4EEC;&#x90FD;&#x751F;&#x6210;&#x5C0F;&#x6839;&#x5806;&#xFF0C;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x628A;&#x5176;&#x5F53;&#x505A;&#x662F;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9010;&#x6B65;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x3002;&#x4F8B;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x5927;&#x6839;&#x5806;&#xFF0C;&#x5C06;&#x5176;&#x53D8;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x4EE5;<code>30</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6839;&#x636E;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x9700;&#x8981;&#x4E0E;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;;&#x518D;&#x4EE5;<code>60</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x4E0E;<code>15</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF1B;&#x6700;&#x540E;&#x4E0E;<code>70</code>&#x4E3A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E0E;&#x539F;&#x6765;<code>30</code>&#x7684;&#x4F4D;&#x7F6E;&#x5373;&#x73B0;&#x5728;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x7684;<code>10</code>&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x6700;&#x7EC8;&#x5F62;&#x6210;&#x5C0F;&#x6839;&#x5806;&#x3002;</li>\n<li>&#x7136;&#x540E;&#x5C31;&#x662F;&#x53D6;&#x51FA;&#x5F62;&#x6210;&#x7684;&#x5C0F;&#x6839;&#x5806;&#x5F97;&#x9876;&#x70B9;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x4E0E;&#x5806;&#x4E2D;&#x7B2C;<code>N</code>(N=n)&#x4E2A;&#x8282;&#x70B9;&#x4E92;&#x6362;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;<code>a[N-1]</code>&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5C0F;&#x6839;&#x5806;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x751F;&#x4EA7;&#x5C0F;&#x6839;&#x5806;<code>N--</code>&#xFF0C;&#x4F46;&#x6B64;&#x65F6;&#x8981;&#x751F;&#x6210;&#x7684;&#x6570;&#x7684;&#x8303;&#x56F4;&#x4E3A;<code>a[0...N-1]</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>2</code>&#x3001;<code>3</code>&#xFF0C;&#x76F4;&#x5230;<code>N=1</code>&#xFF0C;&#x5373;<code>a[0]</code>&#xFF0C;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><p>&#x4E0D;&#x7BA1;&#x662F;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x521B;&#x5EFA;&#x5C0F;&#x6839;&#x5806;&#x8FD8;&#x662F;&#x6BCF;&#x6B21;&#x53D6;&#x4E86;&#x9876;&#x70B9;&#x6570;&#x4E4B;&#x540E;&#x518D;&#x8C03;&#x6574;&#x6210;&#x5C0F;&#x8DDF;&#x5806;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x903B;&#x8F91;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;<code>&#x5373;&#x90FD;&#x662F;&#x4E0E;&#x5176;&#x5173;&#x952E;&#x5B57;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x9009;&#x51FA;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x5C06;&#x5176;&#x653E;&#x5230;&#x7236;&#x8282;&#x70B9;&#x5904;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;&#x6240;&#x4EE5;&#x8C03;&#x6574;&#x5C0F;&#x6839;&#x5806;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\">     * &#x8C03;&#x6574;&#x6210;&#x6700;&#x5C0F;&#x5806;</div><div class=\"line\">     * @param arr &#x6570;&#x7EC4;</div><div class=\"line\">     * @param top &#x5806;&#x9876;&#x4F4D;&#x7F6E;</div><div class=\"line\">     * @param tail &#x5806;&#x672A;&#x4F4D;&#x7F6E;</div><div class=\"line\">     */</div><div class=\"line\">    public static void fitToMinHeap(int[] arr, int top, int tail) {</div><div class=\"line\">        int i = top;</div><div class=\"line\">        int temp = arr[i];</div><div class=\"line\">        int j = 2 * i + 1;//&#x627E;&#x5230;&#x5B50;&#x8282;&#x70B9;</div><div class=\"line\">        while (j &lt; tail) {</div><div class=\"line\">            if (j + 1 &lt; tail &amp;&amp; arr[j + 1] &lt; arr[j])//&#x627E;&#x51FA;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x4E2D;&#x7684;&#x6700;&#x5C0F;</div><div class=\"line\">                j++;</div><div class=\"line\"></div><div class=\"line\">            if (arr[j] &gt;= temp)//&#x5B50;&#x8282;&#x70B9;&#x90FD;&#x5927;&#x4E8E;&#x7236;&#x8282;&#x70B9;&#x5219;&#x8DF3;&#x51FA;</div><div class=\"line\">                break;</div><div class=\"line\"></div><div class=\"line\">            arr[i] = arr[j];//&#x5C06;&#x5B50;&#x8282;&#x70B9;&#x5411;&#x4E0A;&#x79FB;,&#x5373;&#x79FB;&#x5230;&#x7236;&#x8282;&#x70B9;</div><div class=\"line\">            i = j;</div><div class=\"line\">            j = 2 * i + 1;</div><div class=\"line\">        }</div><div class=\"line\">        arr[i] = temp;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x7684;&#x4F4D;&#x7F6E;&#x4EA4;&#x6362;&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x800C;&#x662F;&#x4E0E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%94-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5FEB;&#x901F;&#x6392;&#x5E8F;</a>&#x4E00;&#x6837;&#xFF0C;&#x6700;&#x540E;&#x624D;&#x5C06;&#x5173;&#x952E;&#x5B57;&#x653E;&#x5230;&#x4ED6;&#x6240;&#x8981;&#x5B58;&#x653E;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x4E3B;&#x8981;&#x7684;&#x751F;&#x6210;&#x6700;&#x5C0F;&#x5806;&#x7684;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x53D6;&#x6570;&#xFF0C;&#x518D;&#x8C03;&#x6574;&#xFF0C;&#x518D;&#x53D6;&#x6570;&#x7684;&#x5FAA;&#x73AF;&#x5B9E;&#x73B0;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void heapSort(int[] arr) {</div><div class=\"line\">        int n = arr.length;</div><div class=\"line\">        for (int j = n / 2 - 1; j &gt;= 0; j--)//&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x975E;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x5F00;&#x59CB;,&#x521D;&#x59CB;&#x5316;&#x751F;&#x6210;&#x6570;&#x7EC4;&#x8868;&#x793A;&#x7684;&#x6700;&#x5C0F;&#x5806;</div><div class=\"line\">            fitToMinHeap(arr, j, n);</div><div class=\"line\"></div><div class=\"line\">        for (int i = n - 1; i &gt; 0; i--) {//&#x6BCF;&#x6B21;&#x62FF;&#x51FA;&#x5806;&#x7684;&#x9876;&#x70B9;&#x503C;</div><div class=\"line\">            //&#x628A;&#x5806;&#x4E2D;&#x7684;&#x9876;&#x70B9;&#x4E0E;a[i]&#x70B9;&#x4E92;&#x6362;</div><div class=\"line\">            int temp = arr[0];</div><div class=\"line\">            arr[0] = arr[i];</div><div class=\"line\">            arr[i] = temp;</div><div class=\"line\">            fitToMinHeap(arr, 0, i);//&#x4EA4;&#x6362;&#x540E;&#x518D;&#x5BF9;&#x524D;i&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x6700;&#x5C0F;&#x5806;&#x5316;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5F53;&#x7136;&#x4F7F;&#x7528;&#x5C0F;&#x6839;&#x5806;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x9006;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x5373;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x7684;&#x6392;&#x5E8F;</em></p>\n</blockquote>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#xFF0C;&#x5806;&#x6392;&#x5E8F;&#x8981;&#x7406;&#x89E3;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;</p>\n<ul>\n<li>&#x4F55;&#x4E3A;&#x5C0F;&#x6839;&#x5806;&#x3001;&#x5927;&#x6839;&#x5806;</li>\n<li>&#x5806;&#x7684;&#x521B;&#x5EFA;&#x539F;&#x7406;</li>\n<li>&#x5806;&#x6392;&#x5E8F;&#x7684;&#x53D6;&#x6570;&#x539F;&#x7406;</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x51E0;&#x70B9;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x638C;&#x63E1;&#x5806;&#x6392;&#x5E8F;&#x3002;&#x6700;&#x540E;&#x5806;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x4E14;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(nlogn)</code>&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(六)希尔排序","url":"https://www.rousetime.com/2016/06/19/算法-六-希尔排序/","content":"<p>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x662F;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x7684;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x6539;&#x8FDB;&#x7248;&#x3002;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x8BB0;&#x5F55;&#x589E;&#x91CF;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x518D;&#x5BF9;&#x5206;&#x7EC4;&#x5185;&#x90E8;&#x8FDB;&#x884C;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x968F;&#x7740;&#x589E;&#x91CF;&#x7684;&#x4E0D;&#x65AD;&#x51CF;&#x5C0F;&#xFF0C;&#x76F4;&#x5230;&#x589E;&#x91CF;&#x51CF;&#x5C0F;&#x5230;<code>1</code>&#x65F6;&#xFF0C;&#x5373;&#x6BCF;&#x4E2A;&#x5206;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E3A;<code>1</code>&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x5F00;&#x59CB;&#x53D6;&#x589E;&#x91CF;&#x6570;<code>d=n/2</code>&#x3002;&#x4ECE;<code>a[0]~a[d-1]</code>&#x5C06;&#x6570;&#x7EC4;&#x4E2D;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x4E3A;&#x589E;&#x91CF;&#x6570;<code>d</code>&#x7684;&#x500D;&#x6570;&#x5F52;&#x4E3A;&#x76F8;&#x540C;&#x7EC4;&#x3002;</li>\n<li>&#x4F9D;&#x6B21;&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#x3002;</li>\n<li>&#x518D;&#x589E;&#x91CF;&#x6570;<code>d=d/2</code>&#xFF0C;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>d=1</code>&#x4E3A;&#x6B62;&#x3002;</li>\n</ol>\n<p>&#x4F8B;&#x5982;&#x53D6;<code>d=10</code>&#x4E3A;&#x4F8B;&#xFF1A;</p>\n<p><code>23, 4, 6, 34, 35, 47, 546, 32, 6,10</code></p>\n<p>&#x53D6;<code>d=5</code>,&#x4EE5;&#x540E;&#x4F9D;&#x6B21;&#x533A;<code>d</code>&#x7684;&#x4E00;&#x534A;</p>\n<p><code>23, 4, 6, 34, 35, 47, 546, 32, 6,10</code><br><code>23</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>47</code><br>&#x2014;&#x2013;<code>4</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;<code>546</code><br>&#x2014;&#x2014;&#x2014;<code>6</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>32</code><br>&#x2014;&#x2014;&#x2014;&#x2014;<code>34</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>6</code><br>&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014; <code>35</code> &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013; <code>10</code><br>&#x7B2C;&#x4E00;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>23, 4, 6, 6, 10, 47, 546, 32, 34, 35</code></p>\n<p><code>d=2</code></p>\n<p><code>23</code>&#x2014;<code>6</code>&#x2014;<code>10</code>&#x2014; <code>546</code>&#x2014;&#x2013;<code>34</code><br>&#x2014;&#x2013;<code>4</code>&#x2013;<code>6</code>&#x2014; <code>47</code>&#x2014;&#x2014; <code>32</code>&#x2014; <code>35</code><br>&#x7B2C;&#x4E8C;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>6, 4, 10, 6, 23, 32, 34, 35, 546, 47</code></p>\n<p><code>d=1</code></p>\n<p><code>6, 4, 10, 6, 23, 32, 34, 35, 546, 47</code><br>&#x7B2C;&#x4E09;&#x8D9F;&#x7ED3;&#x679C;&#xFF1A;<br><code>4, 6, 6, 10, 23, 32, 34, 35, 47, 546</code></p>\n<p>&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#xFF0C;&#x6B64;&#x65F6;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</p>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#x6B65;&#x9AA4;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x4E3B;&#x8981;&#x662F;&#x5BF9;<code>d</code>&#x7684;&#x503C;&#x8FDB;&#x884C;&#x63A7;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void shellSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        //&#x589E;&#x91CF;&#x503C;</div><div class=\"line\">        int d = arr.length / 2;</div><div class=\"line\">        while (true) {</div><div class=\"line\">            for (int i = 0; i &lt; d; i++) {//&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</div><div class=\"line\">                for (int j = i; j + d &lt; arr.length; j += d) {</div><div class=\"line\">                    for (int k = j + d; k - d &gt;= 0; k -= d) {//&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</div><div class=\"line\">                        if (arr[k] &lt; arr[k - d]) {</div><div class=\"line\">                            temp = arr[k];</div><div class=\"line\">                            arr[k] = arr[k - d];</div><div class=\"line\">                            arr[k - d] = temp;</div><div class=\"line\">                        } else {</div><div class=\"line\">                            break;</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">            if (d == 1) break;</div><div class=\"line\">            d = d / 2;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x662F;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x867D;&#x7136;&#x5BF9;&#x6BCF;&#x7EC4;&#x7684;&#x6392;&#x5E8F;&#x662F;&#x4F7F;&#x7528;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#xFF0C;&#x5728;&#x5206;&#x7EC4;&#x4E2D;&#x662F;&#x7A33;&#x5B9A;&#x7684;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x4F1A;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x6240;&#x5728;&#x7EC4;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5B83;&#x6574;&#x4F53;&#x662F;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;&#x81F3;&#x4E8E;<code>d</code>&#x7684;&#x53D6;&#x503C;&#x4E5F;&#x6CA1;&#x6709;&#x7EDD;&#x5BF9;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x53D6;&#x503C;&#x4E0E;&#x53D8;&#x5316;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(五)快速排序","url":"https://www.rousetime.com/2016/06/18/算法-五-快速排序/","content":"<p>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x662F;&#x5BF9;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x7684;&#x4E00;&#x79CD;&#x6539;&#x8FDB;&#x3002;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7531;<code>C. A. R. Hoare</code>&#x5728;<code>1962</code>&#x5E74;&#x63D0;&#x51FA;&#x3002;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#xFF1A;<code>&#x5C06;&#x4E00;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x5206;&#x754C;&#x7EBF;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x5C0F;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x518D;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x4EE5;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6709;&#x5E8F;&#x7684;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x5047;&#x8BBE;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n-1]</code></p>\n<ol>\n<li>&#x4E00;&#x822C;&#x90FD;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;<code>a[i]</code> (<code>i = 0</code>) &#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x5373;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x754C;&#x6570;&#x3002;&#x5148;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x540E;&#x9762;&#x5F00;&#x59CB;&#x5373;&#x521D;&#x503C;<code>j = n-1</code>&#xFF0C;&#x9010;&#x4E2A;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x4E0E;&#x9009;&#x7684;&#x7684;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>j--</code>)&#xFF0C;&#x82E5;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>i++</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x505C;&#x6B62;&#x524D;&#x9762;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x518D;&#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x7B2C;<code>i</code>&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5411;&#x540E;&#x8FDB;&#x884C;&#x904D;&#x5386;&#xFF0C;&#x9010;&#x4E2A;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;(<code>i++</code>)&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5176;&#x4E0E;&#x5173;&#x952E;&#x6570;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x5E76;&#x505C;&#x6B62;&#x904D;&#x5386;&#x4E14;<code>j--</code>&#x8BB0;&#x5F55;&#x6B64;&#x65F6;&#x7684;<code>i</code>&#x3001;<code>j</code>&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;<code>i==j</code>&#x5C31;&#x7ED3;&#x675F;&#x672C;&#x6B21;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;</li>\n<li>&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x5C06;&#x5176;&#x6309;&#x5173;&#x952E;&#x6570;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x518D;&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5BF9;&#x5212;&#x5206;&#x7684;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x5373;&#x6B64;&#x65F6;&#x6240;&#x6709;&#x6570;&#x636E;&#x6709;&#x5E8F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5148;&#x8FDB;&#x884C;&#x5173;&#x952E;&#x5B57;&#x5212;&#x5206;&#x7684;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><h2 id=\"&#x6392;&#x5E8F;\"><a href=\"#&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"&#x6392;&#x5E8F;\"></a>&#x6392;&#x5E8F;</h2><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;<code>1</code>&#x3001;<code>2</code>&#x3001;<code>3</code>&#x5B9E;&#x73B0;&#x5173;&#x952E;&#x5B57;&#x7684;&#x5212;&#x5206;&#x5373;&#x4E00;&#x8D9F;&#x5B8C;&#x6574;&#x7684;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3002;<br>&#x6211;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7684;&#x9891;&#x7E41;&#x4EA4;&#x6362;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x4E0E;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x4EA4;&#x6362;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6700;&#x540E;&#x8FD9;&#x8D9F;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x5B8C;&#x4E86;&#x4EE5;&#x540E;&#x518D;&#x5C06;&#x5176;&#x653E;&#x5230;&#x4ED6;&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x3002;&#x76F8;&#x5F53;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x4F20;&#x9012;<code>a=b,b=c,c=d,d=e</code>&#x6700;&#x7EC8;&#x5C31;&#x662F;<code>a=e</code>&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static int sort(int[] arr, int low, int height) {</div><div class=\"line\">        int i = low;</div><div class=\"line\">        int j = height;</div><div class=\"line\">        int k = arr[low];//&#x8BB0;&#x5F55;&#x5F00;&#x59CB;&#x7684;&#x5173;&#x952E;&#x6570;</div><div class=\"line\">        while (i &lt; j) {</div><div class=\"line\">            while (i &lt; j &amp;&amp; arr[j] &gt;= k) //&#x5148;&#x4ECE;&#x53F3;&#x5411;&#x5DE6;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5C0F;&#x4E8E;k&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">                j--;</div><div class=\"line\">            if (i &lt; j) {</div><div class=\"line\">                arr[i] = arr[j];//&#x5C06;&#x627E;&#x5230;&#x7684;&#x6570;&#x66FF;&#x6362;&#x5230;i&#x4F4D;&#x7F6E;</div><div class=\"line\">                i++;</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            while (i &lt; j &amp;&amp; arr[i] &lt;= k) //&#x518D;&#x4ECE;&#x5DE6;&#x5411;&#x53F3;&#x627E;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x5927;&#x4E8E;k&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">                i++;</div><div class=\"line\">            if (i &lt; j) {</div><div class=\"line\">                arr[j] = arr[i];//&#x5C06;&#x627E;&#x5230;&#x7684;&#x6570;&#x66FF;&#x6362;&#x5230;j&#x4F4D;&#x7F6E;</div><div class=\"line\">                j--;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">        arr[i] = k;//&#x5F53;i == j &#x65F6;,&#x6700;&#x540E;&#x5C06;&#x6700;&#x521D;&#x7684;&#x5173;&#x952E;&#x6570;&#x66FF;&#x4EE3;&#x5230;i&#x4F4D;&#x7F6E;</div><div class=\"line\">        return i;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x5206;&#x6CBB;&#x9012;&#x5F52;\"><a href=\"#&#x5206;&#x6CBB;&#x9012;&#x5F52;\" class=\"headerlink\" title=\"&#x5206;&#x6CBB;&#x9012;&#x5F52;\"></a>&#x5206;&#x6CBB;&#x9012;&#x5F52;</h2><p>&#x7136;&#x540E;&#x5C31;&#x662F;&#x5BF9;&#x6574;&#x4E2A;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x8FDB;&#x884C;<code>&#x5206;&#x6CBB;&#x9012;&#x5F52;</code>&#x9010;&#x4E2A;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;,&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;<code>1</code>&#x4E3A;&#x6B62;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">ublic static void quickSort(int[] arr, int low, int height) {</div><div class=\"line\">        if (low &lt; height) {</div><div class=\"line\">            int mid = sort(arr, low, height);</div><div class=\"line\">            quickSort(arr, low, mid - 1);</div><div class=\"line\">            quickSort(arr, mid + 1, height);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5F53;&#x7136;&#x5BF9;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x7684;&#x9009;&#x53D6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#xFF0C;&#x4F8B;&#x5982;&#x9009;&#x53D6;&#x4E2D;&#x95F4;&#x7684;&#x503C;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x6570;&#xFF0C;&#x81F3;&#x4E8E;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x6700;&#x597D;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(logn)</code>&#xFF0C;&#x6700;&#x574F;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code>&#x4E14;&#x5176;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(四)归并排序","url":"https://www.rousetime.com/2016/06/18/算法-四-归并排序/","content":"<p>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x6548;&#x7387;&#x76F8;&#x5BF9;&#x8F83;&#x9AD8;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4FDD;&#x8BC1;&#x6BCF;&#x7EC4;&#x90FD;&#x6709;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x7EC8;&#x4F7F;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x6709;&#x5E8F;&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><ol>\n<li>&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x5E8F;&#x5217;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;&#x601D;&#x60F3;</code>&#x5C06;&#x5176;&#x5212;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x4F7F;&#x5176;&#x6709;&#x5E8F;&#xFF0C;&#x5176;&#x4E2D;&#x53EF;&#x91C7;&#x7528;&#x9012;&#x5F52;&#x8FDB;&#x884C;&#x5212;&#x5206;&#x3002;</li>\n<li>&#x5C06;&#x6709;&#x5E8F;&#x7684;&#x7EC4;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4E2D;&#x501F;&#x52A9;&#x4E00;&#x4E2A;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x7684;&#x6709;&#x5E8F;&#x7EC4;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5C06;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x4E14;&#x8F83;&#x5C0F;&#x7684;&#x6240;&#x5728;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#x5411;&#x540E;&#x81EA;&#x589E;&#xFF0C;&#x518D;&#x4E0E;&#x539F;&#x6765;&#x6BD4;&#x8F83;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;<code>2</code>&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x5B8C;&#x6BD5;&#xFF0C;&#x6216;&#x8005;&#x5C06;&#x8FD8;&#x6709;&#x5269;&#x4F59;&#x6570;&#x672A;&#x6BD4;&#x8F83;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x6309;&#x539F;&#x6709;&#x7684;&#x987A;&#x5E8F;&#x52A0;&#x5165;&#x5230;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x4E2D;,&#x6700;&#x540E;&#x5C06;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x52A0;&#x5165;&#x5230;&#x539F;&#x6709;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x7684;&#x5DE6;&#x53F3;&#x5212;&#x5206;&#x5F52;&#x5E76;&#x5B8C;&#x6BD5;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x6B65;&#x9AA4;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x5BF9;&#x4E24;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x5F52;&#x5E76;&#x7684;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><h2 id=\"&#x5408;&#x5E76;\"><a href=\"#&#x5408;&#x5E76;\" class=\"headerlink\" title=\"&#x5408;&#x5E76;\"></a>&#x5408;&#x5E76;</h2><p>&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;<code>2</code>&#x3001;<code>3</code>&#x6B65;&#x9AA4;&#xFF0C;&#x5B9E;&#x73B0;&#x5408;&#x5E76;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void merge(int[] arr, int low, int mid, int height) {</div><div class=\"line\">        int i = low;</div><div class=\"line\">        int j = mid + 1;</div><div class=\"line\">        int k = 0;</div><div class=\"line\">        int[] temp = new int[height - low + 1];</div><div class=\"line\">        while (i &lt;= mid &amp;&amp; j &lt;= height) {</div><div class=\"line\">            if (arr[i] &lt;= arr[j]) {//&#x5DE6;&#x8FB9;&#x52A0;&#x5165;</div><div class=\"line\">                temp[k++] = arr[i++];</div><div class=\"line\">            } else {//&#x53F3;&#x8FB9;&#x52A0;&#x5165;</div><div class=\"line\">                temp[k++] = arr[j++];</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        while (i &lt;= mid) {//&#x5DE6;&#x8FB9;&#x5269;&#x4F59;&#x5168;&#x90E8;&#x52A0;&#x5165;</div><div class=\"line\">            temp[k++] = arr[i++];</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        while (j &lt;= height) {//&#x53F3;&#x8FB9;&#x5269;&#x4F59;&#x5168;&#x90E8;&#x52A0;&#x5165;</div><div class=\"line\">            temp[k++] = arr[j++];</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        for (int m = 0; m &lt; temp.length; m++) {//&#x8F85;&#x52A9;&#x6570;&#x7EC4;&#x8FD8;&#x539F;&#x5230;&#x539F;&#x6570;&#x7EC4;</div><div class=\"line\">            arr[low + m] = temp[m];</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x5C31;&#x662F;&#x91C7;&#x7528;<code>&#x5206;&#x6CBB;</code>&#x8FDB;&#x884C;&#x5212;&#x5206;</p>\n<h2 id=\"&#x5206;&#x6CBB;\"><a href=\"#&#x5206;&#x6CBB;\" class=\"headerlink\" title=\"&#x5206;&#x6CBB;\"></a>&#x5206;&#x6CBB;</h2><p>&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x7591;&#x95EE;&#xFF0C;&#x5982;&#x4F55;&#x5C06;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x751F;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x7684;&#x662F;<code>&#x5206;&#x6CBB;&#x7684;&#x601D;&#x60F3;</code>&#x4E0E;<code>&#x9012;&#x5F52;&#x601D;&#x60F3;</code>&#xFF0C;&#x53EA;&#x8981;&#x5E8F;&#x5217;&#x80FD;&#x8FDB;&#x884C;&#x5212;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E00;&#x76F4;&#x5212;&#x5206;&#x4E0B;&#x53BB;&#xFF0C;&#x76F4;&#x5230;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x8BE5;&#x5212;&#x5206;&#x7684;&#x5E8F;&#x5217;&#x81EA;&#x7136;&#x5C31;&#x6709;&#x5E8F;&#x4E86;&#xFF0C;&#x540C;&#x65F6;&#x518D;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x81EA;&#x7136;&#x5408;&#x5E76;&#x7684;&#x5E8F;&#x5217;&#x4E5F;&#x5C31;&#x4E00;&#x76F4;&#x6709;&#x5E8F;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void mergeSort(int[] arr, int low, int height) {</div><div class=\"line\">        if (low &lt; height) {</div><div class=\"line\">            int mid = (low + height) / 2;</div><div class=\"line\">            mergeSort(arr, low, mid);//&#x5DE6;&#x5212;&#x5206;</div><div class=\"line\">            mergeSort(arr, mid + 1, height);//&#x53F3;&#x5212;&#x5206;</div><div class=\"line\">            merge(arr, low, mid, height);//&#x5DE6;&#x53F3;&#x5F52;&#x5E76;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x6392;&#x5E8F;&#x540E;&#x76F8;&#x540C;&#x6570;&#x7684;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x3002;&#x7531;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x53EF;&#x77E5;&#xFF0C;&#x5C06;&#x5E8F;&#x5217;&#x5212;&#x5206;&#x6210;&#x7EC4;&#x9700;&#x8981;<code>logn</code>&#x6B21;&#xFF0C;&#x5C06;&#x5212;&#x5206;&#x7684;&#x7EC4;&#x5408;&#x5E76;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n)</code>&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(nlogn)</code>&#x3002;&#x6240;&#x4EE5;&#x901A;&#x8FC7;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7684;&#x6548;&#x7387;&#x8981;&#x6BD4;&#x5176;&#x4ED6;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%89-%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</a>&#x3001;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%B8%80-%E7%9B%B4%E6%8E%A5%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;</a>&#x7B49;&#x8981;&#x9AD8;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(三)直接插入排序","url":"https://www.rousetime.com/2016/06/18/算法-三-直接插入排序/","content":"<p>&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;:<code>&#x5C06;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x5173;&#x952E;&#x6570;&#x4E0E;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x4F7F;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;</code>&#x3002;</p>\n<h1 id=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"><a href=\"#&#x57FA;&#x672C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x57FA;&#x672C;&#x6B65;&#x9AA4;\"></a>&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h1><p>&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[0...n]</code></p>\n<ol>\n<li>&#x5C06;<code>a[0]</code>&#x4F5C;&#x4E3A;&#x8D77;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4ECE;<code>a[1]</code>&#x5F00;&#x59CB;&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x5411;&#x524D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x82E5;&#x5C0F;&#x4E8E;&#x524D;&#x9762;&#x6240;&#x9047;&#x5230;&#x7684;&#x6BD4;&#x8F83;&#x6570;&#xFF0C;&#x5219;&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x6BD4;&#x8F83;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6BD4;&#x8F83;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x5C06;<code>a[n]</code>&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x6BD4;&#x8F83;&#x5B8C;&#x4EE5;&#x540E;&#x5219;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x8BE5;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6B65;&#x9AA4;&#x8FC5;&#x901F;&#x5199;&#x51FA;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void insertSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        for (int i = 1; i &lt; arr.length; i++) {</div><div class=\"line\">            for (int j = i; j &gt; 0; j--) {</div><div class=\"line\">                if (arr[j] &lt; arr[j - 1]) {//&#x4EA4;&#x6362;</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j - 1];</div><div class=\"line\">                    arr[j - 1] = temp;</div><div class=\"line\">                } else {//&#x53EA;&#x8981;&#x6BD4;&#x8F83;&#x4E0D;&#x5C0F;&#x4E8E;&#x7684;&#x8BDD;&#x5C31;&#x76F4;&#x63A5;&#x8DF3;&#x51FA;</div><div class=\"line\">                    break;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x4E14;&#x6700;&#x597D;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3001;&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x4E0E;&#x524D;&#x9762;&#x7684;<a href=\"https://idisfkj.github.io/2016/06/18/%E7%AE%97%E6%B3%95-%E4%BA%8C-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/\" target=\"_blank\" rel=\"external\">&#x5192;&#x6CE1;&#x6392;&#x5E8F;</a>&#x4E00;&#x6837;&#x662F;<code>O(n)</code>&#x4E0E;<code>O(n^2)</code>&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(二)冒泡排序","url":"https://www.rousetime.com/2016/06/18/算法-二-冒泡排序/","content":"<p>&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x4E3B;&#x8981;&#x662F;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4E24;&#x4E24;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x62FF;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x8BF4;&#x660E;&#xFF0C;&#x8FDB;&#x884C;&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x540E;&#x4F1A;&#x5C06;&#x5927;&#x7684;&#x6570;<code>&#x6C89;</code>&#x5230;&#x5E95;&#x90E8;&#xFF0C;&#x5C06;&#x5C0F;&#x5F97;&#x6570;<code>&#x6D6E;</code>&#x5230;&#x9876;&#x90E8;&#x3002;&#x6240;&#x4EE5;&#x5192;&#x6CE1;&#x8BF4;&#x6CD5;&#x7531;&#x6B64;&#x5F97;&#x540D;&#x3002;</p>\n<h1 id=\"&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\"><a href=\"#&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;\"></a>&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;</h1><p>&#x4EE5;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x4E3A;&#x4F8B;&#xFF0C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A;<code>n</code>&#x3002;</p>\n<ol>\n<li>&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x5F00;&#x59CB;&#x90FD;&#x4ECE;<code>a[0]</code>&#x5F00;&#x59CB;&#x4E0E;&#x5176;&#x4E0B;&#x9762;&#x7684;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x5219;&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>\n<li>&#x7EE7;&#x7EED;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5927;&#x4E8E;&#x76F8;&#x90BB;&#x7684;&#x5C31;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;<code>n-1</code>&#x6B21;&#x540E;&#xFF0C;&#x7B2C;<code>N = 0</code>&#x8D9F;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x6570;&#x5C31;&#x5728;&#x6570;&#x7EC4;&#x7684;<code>a[n-1]</code>&#x5904;&#x3002;</li>\n<li>&#x91CD;&#x590D;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>N = n-1</code>,&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#x5C31;&#x4E0D;&#x96BE;&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void bubbleSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        for (int n = 0; n &lt; arr.length - 1; n++)//&#x9700;&#x8981;n-1&#x6B21;</div><div class=\"line\">            for (int j = 0; j &lt; arr.length - n - 1; j++) {</div><div class=\"line\">                if (arr[j] &gt; arr[j + 1]) {//&#x4EA4;&#x6362;</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j + 1];</div><div class=\"line\">                    arr[j + 1] = temp;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x73B0;&#x5B8C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x662F;&#x5426;&#x5FC3;&#x4E2D;&#x6709;&#x70B9;&#x7591;&#x95EE;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x8981;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x540E;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x5462;&#xFF0C;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x6392;&#x5E8F;&#x7684;&#x6B21;&#x6570;&#x5462;&#xFF1F;&#x7ED3;&#x679C;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x6570;&#x7EC4;&#x540E;&#x9762;&#x7684;<code>30</code>&#x4E2A;&#x6570;&#x662F;&#x5DF2;&#x7ECF;&#x6392;&#x597D;&#x5E8F;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5728;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5FFD;&#x7565;&#x540E;&#x9762;&#x7684;&#x6570;&#xFF0C;&#x53EA;&#x8003;&#x8651;&#x4ED6;&#x4EEC;&#x524D;&#x9762;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5728;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E2A;&#x6807;&#x8BC6;<code>flag</code>,&#x5F53;&#x4ECE;&#x7B2C;<code>j</code>&#x5F00;&#x59CB;&#x90FD;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x4EA4;&#x6362;&#xFF0C;&#x5373;&#x6709;&#x5E8F;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;&#x5207;&#x6BB5;&#x53EA;&#x5BF9;<code>j</code>&#x524D;&#x9762;&#x7684;&#x6570;&#x7EE7;&#x7EED;&#x6BD4;&#x8F83;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;&#x5F62;&#x6210;&#x65B0;&#x7684;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5BF9;&#x539F;&#x6765;&#x7684;&#x6392;&#x5E8F;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x3002;</p>\n<h1 id=\"&#x4F18;&#x5316;\"><a href=\"#&#x4F18;&#x5316;\" class=\"headerlink\" title=\"&#x4F18;&#x5316;\"></a>&#x4F18;&#x5316;</h1><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void bubbleSort2(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        int flag = arr.length - 1;</div><div class=\"line\">        while (flag &gt; 0) {</div><div class=\"line\">            int n = flag;</div><div class=\"line\">            flag = 0;</div><div class=\"line\">            for (int j = 0; j &lt; n; j++) {</div><div class=\"line\">                if (arr[j] &gt; arr[j + 1]) {</div><div class=\"line\">                    temp = arr[j];</div><div class=\"line\">                    arr[j] = arr[j + 1];</div><div class=\"line\">                    arr[j + 1] = temp;</div><div class=\"line\">                    flag = j;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6839;&#x636E;&#x524D;&#x9762;&#x7684;&#x601D;&#x60F3;&#x6211;&#x4EEC;&#x4F1A;&#x77E5;&#x9053;&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n)</code>&#x5373;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x4E14;&#x4E0E;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x987A;&#x5E8F;&#x76F8;&#x540C;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x8981;&#x8FDB;&#x884C;&#x4E00;&#x8D9F;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#xFF0C;&#x904D;&#x5386;&#x4E00;&#x6B21;&#x6570;&#x7EC4;&#x3002;&#x6700;&#x574F;&#x7684;&#x60C5;&#x51B5;&#x81EA;&#x7136;&#x662F;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x65F6;&#x4E0E;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x987A;&#x5E8F;&#x76F8;&#x53CD;&#xFF0C;&#x6240;&#x4EE5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"算法(一)直接选择排序","url":"https://www.rousetime.com/2016/06/18/算法-一-直接选择排序/","content":"<p>&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#xFF0C;&#x6574;&#x4F53;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6570;&#x636E;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E0E;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x3002;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6BCF;&#x6B21;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x63D2;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6700;&#x672B;&#x5C3E;&#xFF0C;&#x4ECE;&#x800C;&#x5F62;&#x6210;&#x66F4;&#x5927;&#x7684;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x3002;&#x76F4;&#x5230;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x7ED3;&#x675F;&#x6392;&#x5E8F;&#x3002;</p>\n<h1 id=\"&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\"><a href=\"#&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;\"></a>&#x8BE6;&#x7EC6;&#x6B65;&#x9AA4;</h1><p>&#x5047;&#x8BBE;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;a[0&#x2026;n-1];</p>\n<ol>\n<li>&#x9996;&#x5148;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x7684;&#x4E2A;&#x6570;&#x4E3A;0&#xFF0C;&#x4EE4;<code>i = 0</code>&#x3002;&#x4ECE;<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E2D;&#x9009;&#x62E9;&#x6700;&#x5C0F;&#x7684;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x5230;<code>&#x6709;&#x5E8F;&#x533A;a[i]</code>&#x4E2D;&#x3002;&#x4F7F;&#x5F97;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[0..i]</code>,<code>&#x65E0;&#x5E8F;&#x533A;</code>&#x4E3A;<code>a[i...n-1]</code></li>\n<li>&#x5B8C;&#x6210;&#x540E; <code>i++</code> ,&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x524D;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230; <code>i = n-1</code> &#x4E3A;&#x6B62;&#x3002;&#x4F7F;&#x5F97;&#x5168;&#x90E8;&#x6570;&#x90FD;&#x5728;<code>&#x6709;&#x5E8F;&#x533A;</code>&#x4E2D;&#x3002;</li>\n</ol>\n<blockquote>\n<p><em>&#x6240;&#x4EE5;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x601D;&#x60F3;&#x6B65;&#x9AA4;&#x5C31;&#x80FD;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#x5199;&#x51FA;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x4E86;</em></p>\n</blockquote>\n<h1 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static void selectSort(int[] arr) {</div><div class=\"line\">        int temp;</div><div class=\"line\">        int mid;</div><div class=\"line\">        for (int i = 0; i &lt; arr.length - 1; i++) {</div><div class=\"line\">            mid = i;//&#x5173;&#x952E;&#x6570;</div><div class=\"line\">            for (int j = mid + 1; j &lt; arr.length; j++) {</div><div class=\"line\">                if (arr[mid] &gt; arr[j])//&#x627E;&#x5230;&#x6700;&#x5C0F;&#x503C;</div><div class=\"line\">                    mid = j;</div><div class=\"line\">            }</div><div class=\"line\">            if (mid != i) {//&#x4E0D;&#x7B49;&#x4E8E;&#x5173;&#x952E;&#x6570;&#x5219;&#x4EA4;&#x6362;</div><div class=\"line\">                temp = arr[mid];</div><div class=\"line\">                arr[mid] = arr[i];</div><div class=\"line\">                arr[i] = temp;</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8BE5;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF0C;&#x9996;&#x5148;&#x8BF4;&#x660E;&#x4F55;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#xFF1A;<code>&#x5728;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x540E;&#x5982;&#x679C;&#x6392;&#x5E8F;&#x4E2D;&#x76F8;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x4E0E;&#x6392;&#x5E8F;&#x524D;&#x7684;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#x76F8;&#x540C;(&#x5373;&#x524D;&#x540E;&#x4F4D;&#x7F6E;&#x4E0D;&#x53D8;)&#xFF0C;&#x5219;&#x79F0;&#x4E3A;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;</code> &#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x73B0;&#xFF0C;&#x5982;&#x679C;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E3A;<code>a[11,11,2]</code>&#x5728;&#x8FDB;&#x884C;&#x7B2C;&#x4E00;&#x8D9F;&#x6392;&#x5E8F;&#x4E4B;&#x540E;&#x7B2C;&#x4E00;&#x4E2A;<code>11</code>&#x4E0E;<code>2</code>&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x4F7F;&#x5F97;&#x539F;&#x6765;&#x524D;&#x9762;&#x7684;<code>11</code>&#x6392;&#x5E8F;&#x5230;&#x540E;&#x9762;&#x7684;<code>11</code>&#x4E4B;&#x540E;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x3002;&#x540C;&#x65F6;&#x5B83;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;<code>O(n^2)</code></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"如何使Android Studio项目发布到Jcenter中","url":"https://www.rousetime.com/2016/06/13/如何使Android-Studio项目发布到Jcenter中/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5199;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5176;&#x5B9E;&#x6211;&#x662F;&#x75DB;&#x82E6;&#x7684;&#xFF0C;&#x54CE;&#xFF01;&#x8BF4;&#x51FA;&#x6765;&#x90FD;&#x662F;&#x6CEA;&#x554A;&#x3002;&#x3002;&#x3002;&#x4ECA;&#x5929;&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x4E0D;&#x5C0F;&#x5FC3;&#x628A;&#x6211;<code>Repositories</code>&#x4E2D;&#x539F;&#x6765;&#x7684;<code>maven</code>&#x4E2D;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7ED9;&#x5220;&#x9664;&#x4E86;&#x3002;&#x5BFC;&#x81F4;&#x539F;&#x6765;&#x7684;&#x4F9D;&#x8D56;&#x5168;&#x90E8;&#x6CA1;&#x4E86;&#xFF0C;&#x627E;&#x4E86;&#x534A;&#x5929;&#x4E5F;&#x6CA1;&#x627E;&#x5230;&#x8981;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x6062;&#x590D;&#x3002;&#x73B0;&#x5728;&#x60F3;&#x5230;&#x7684;&#x4E5F;&#x53EA;&#x80FD;&#x91CD;&#x65B0;&#x53D1;&#x5E03;&#x4E00;&#x4E0B;&#x3002;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x4E0D;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x50CF;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x6DFB;&#x52A0;&#x522B;&#x4EBA;&#x7684;&#x4F9D;&#x8D56;&#x4E00;&#x6837;&#x8FD9;&#x6837;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x6240;&#x4EE5;&#x987A;&#x4FBF;&#x5728;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x9879;&#x76EE;&#x5982;&#x679C;&#x8981;&#x522B;&#x4EBA;&#x4E5F;&#x80FD;&#x968F;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"Android&#x4ED3;&#x5E93;\"><a href=\"#Android&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"Android&#x4ED3;&#x5E93;\"></a>Android&#x4ED3;&#x5E93;</h2><p>&#x7B80;&#x5355;&#x7684;&#x666E;&#x53CA;&#x4E0B;&#x5173;&#x4E8E;<code>android</code>&#x7684;&#x4F9D;&#x8D56;&#x4ED3;&#x5E93;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x5206;&#x522B;&#x662F;<code>Jcenter</code>&#x4E0E;<code>Maven Central</code>&#x5176;&#x5B9E;&#x4E0D;&#x7BA1;&#x662F;<code>Jcenter</code>&#x8FD8;&#x662F;<code>Maven Central</code>&#x90FD;&#x662F;<code>Maven</code>&#x5E93;&#x3002;</p>\n<h3 id=\"Jcenter\"><a href=\"#Jcenter\" class=\"headerlink\" title=\"Jcenter\"></a>Jcenter</h3><p><code>Jcenter</code>&#x662F;&#x7531;<code>bintray.com</code>&#x7EF4;&#x62A4;&#xFF0C;&#x5728;<code>Android Studio</code>&#x7684;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>build.gradle</code>&#x4E2D;&#x6211;&#x4EEC;&#x4F1A;&#x770B;&#x5230;&#x81EA;&#x52A8;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x7684;<code>Jcenter</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        jcenter()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"Maven-Central\"><a href=\"#Maven-Central\" class=\"headerlink\" title=\"Maven Central\"></a>Maven Central</h3><p>&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;<code>build.gradle</code>&#x4E2D;&#x5B9A;&#x4E49;<code>Maven Central</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">buildscript {</div><div class=\"line\">    repositories {</div><div class=\"line\">        mavenCentral()</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x5728;<code>Android Studio</code>&#x4E2D;&#x4E3A;&#x4EC0;&#x4E48;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code>Jcenter</code>&#x539F;&#x56E0;&#x8FD8;&#x662F;&#x6709;&#x7684;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x67E5;&#xFF0C;&#x6211;&#x8981;&#x8BF4;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#xFF0C;&#x8FD9;&#x91CC;&#x4F60;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;<code>Jcenter</code>&#x662F;<code>Maven Central</code>&#x7684;&#x8D85;&#x96C6;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;<code>Jcenter</code>&#x4E86;&#x3002;</p>\n<h2 id=\"gradle&#x83B7;&#x53D6;library\"><a href=\"#gradle&#x83B7;&#x53D6;library\" class=\"headerlink\" title=\"gradle&#x83B7;&#x53D6;library\"></a>gradle&#x83B7;&#x53D6;library</h2><p>&#x8FD9;&#x91CC;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x4F9D;&#x8D56;&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x6709;&#x683C;&#x5F0F;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x968F;&#x4FBF;&#x4E71;&#x5199;&#x7684;&#x3002;&#x5176;&#x5B9E;&#x4F60;&#x53EA;&#x8981;&#x5E73;&#x5E38;&#x591F;&#x4ED4;&#x7EC6;&#x5C31;&#x80FD;&#x53D1;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;<br>&#x7531;<code>GroupId</code>&#x3001;<code>ArtifactId</code>&#x4E0E;<code>VersionId</code>&#x7EC4;&#x6210;&#x3002;&#x4F8B;&#x5982;<code>com.jakewharton:butterknife:6.1.0&apos;</code>&#x5B83;&#x7684;<code>GroupId</code>&#x662F;<code>com.jakewharton</code>&#xFF0C;<code>ArtifactId</code>&#x662F;<code>butterknife</code>&#xFF0C;<code>VersionId</code>&#x662F;<code>6.1.0</code>&#x3002;&#x73B0;&#x5728;&#x770B;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x662F;&#x4E0D;&#x662F;&#x66F4;&#x6E05;&#x6670;&#x4E86;&#x5462;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4F9D;&#x8D56;&#x4E4B;&#x540E;<code>gradle</code>&#x4F1A;&#x5148;&#x53BB;<code>Maven</code>&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;&#x8BE5;<code>library</code>&#x5982;&#x679C;&#x6709;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x5F62;&#x5F0F;&#x4E0B;&#x8F7D;<code>http://jcenter.bintray.com/GroupId/ArtifactId/VersionId</code></p>\n<p><code>http://jcenter.bintray.com/com/jakewharton/butterknife/6.1.0</code><br>&#x901A;&#x8FC7;&#x8BE5;&#x94FE;&#x63A5;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x518D;&#x4E0E;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x7ED3;&#x5408;&#x3002;</p>\n<blockquote>\n<p><em>&#x4E0B;&#x9762;&#x6B63;&#x5F0F;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;&#x7684;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"&#x6CE8;&#x518C;\"><a href=\"#&#x6CE8;&#x518C;\" class=\"headerlink\" title=\"&#x6CE8;&#x518C;\"></a>&#x6CE8;&#x518C;</h2><p>&#x9996;&#x5148;&#x8981;&#x5728;<a href=\"https://bintray.com\" target=\"_blank\" rel=\"external\">https://bintray.com</a> &#x4E2D;&#x6CE8;&#x518C;&#x8D26;&#x53F7;&#xFF0C;&#x6CE8;&#x518C;&#x90FD;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5C31;&#x4E0D;&#x6240;&#x8BF4;&#x4E86;&#x3002;<br>&#x7136;&#x540E;&#x56DE;&#x5230;&#x4E3B;&#x9875;&#x5728;&#x4F60;&#x7684;<code>Owned Repositories</code>&#x4E2D;&#x770B;&#x4E0B;&#x4F60;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;<code>maven</code>&#x3002;<br><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/1.png\" alt=\"&#x56FE;\"><br>&#x7B2C;&#x4E00;&#x6B21;&#x6CE8;&#x518C;&#x7684;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x5148;<code>New Repository</code>&#x521B;&#x5EFA;<code>maven</code><br><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/2.png\" alt=\"&#x56FE;\"><br>&#x521B;&#x5EFA;&#x4E4B;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;<code>maven</code>&#x4E2D;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x6CA1;&#x6709;<code>package</code>,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;<code>Add New Package</code>&#x8FD9;&#x79CD;&#x76F8;&#x4FE1;&#x90FD;&#x4F1A;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8981;&#x8BF4;&#x7684;&#x662F;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;<code>Android Studio</code>&#x4E2D;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x7136;&#x540E;&#x4E0A;&#x4F20;&#x5230;<code>Bintray</code>&#x3002;</p>\n<h2 id=\"&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\"><a href=\"#&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;\"></a>&#x4EE3;&#x7801;&#x4E2D;&#x914D;&#x7F6E;</h2><h3 id=\"&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\"><a href=\"#&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\" class=\"headerlink\" title=\"&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module\"></a>&#x5206;&#x79BB;&#x6210;&#x591A;&#x4E2A;Module</h3><p>&#x4E3A;&#x4E86;&#x4F7F;&#x522B;&#x4EBA;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5728;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x4F9D;&#x8D56;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x628A;&#x5B9E;&#x73B0;&#x7684;&#x8BE5;&#x4F9D;&#x8D56;&#x7684;&#x6E90;&#x7801;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;<code>Module</code>,&#x518D;&#x628A;&#x5B9E;&#x4F8B;&#x4EE3;&#x7801;&#x4F5C;&#x4E3A;<code>Application Module</code>&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x4E8B;&#x5148;&#x5904;&#x7406;&#x597D;<code>Module</code>&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x5F04;&#x597D;&#x7684;&#x793A;&#x4F8B;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/3.png\" alt=\"&#x56FE;\"></p>\n<h3 id=\"&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\"><a href=\"#&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;\"></a>&#x6DFB;&#x52A0;bintray&#x63D2;&#x4EF6;</h3><p>&#x5728;&#x5206;&#x4E86;<code>Module</code>&#x4E4B;&#x540E;&#xFF0C;&#x9996;&#x5148;&#x5728;&#x9879;&#x76EE;&#x7684;<code>&#x6839;&#x76EE;&#x5F55;</code>&#x7684;<code>build.gradle</code>&#x7684;<br><code>dependencies</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x63D2;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">classpath &apos;com.jfrog.bintray.gradle:gradle-bintray-plugin:1.2&apos;</div><div class=\"line\">classpath &apos;com.github.dcendents:android-maven-gradle-plugin:1.3</div></pre></td></tr></table></figure>\n<h3 id=\"&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\"><a href=\"#&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;\"></a>&#x6DFB;&#x52A0;bintray&#x8BA4;&#x8BC1;</h3><p>&#x627E;&#x5230;<code>local.properties</code>&#x6587;&#x4EF6;&#x5728;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">bintray.user=xxxx</div><div class=\"line\">bintray.apikey=xxx</div></pre></td></tr></table></figure>\n<p><code>bintray.user</code>&#x662F;&#x6CE8;&#x518C;&#x7684;user&#xFF0C;&#x81F3;&#x4E8E;<code>bintray.apikey</code>&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x7684;<code>Your Profile</code>&#x7684;<code>Edit</code>&#x9875;&#x9762;&#x7684;<code>API Key</code>&#x4E2D;&#x80FD;&#x627E;&#x5230;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/4.png\" alt=\"&#x56FE;\"></p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/6.png\" alt=\"&#x56FE;\"></p>\n<h3 id=\"&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build-gradle\"><a href=\"#&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build-gradle\" class=\"headerlink\" title=\"&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build.gradle\"></a>&#x4FEE;&#x6539;Module&#x4E2D;&#x7684;build.gradle</h3><p>&#x5728;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply plugin: &apos;com.android.library&apos;</div><div class=\"line\"></div><div class=\"line\">ext {</div><div class=\"line\">    bintrayRepo = &apos;maven&apos;</div><div class=\"line\">    bintrayName = &apos;mypicker&apos;</div><div class=\"line\"></div><div class=\"line\">    publishedGroupId = &apos;com.idisfkj.picker&apos;</div><div class=\"line\">    libraryName = &apos;MyPicker&apos;</div><div class=\"line\">    artifact = &apos;mypicker&apos;</div><div class=\"line\"></div><div class=\"line\">    libraryDescription = &apos;A pickerView on Android&apos;</div><div class=\"line\"></div><div class=\"line\">    siteUrl = &apos;https://github.com/idisfkj/idisfkj.picker&apos;</div><div class=\"line\">    gitUrl = &apos;https://github.com/idisfkj/idisfkj.picker.git&apos;</div><div class=\"line\"></div><div class=\"line\">    libraryVersion = &apos;1.2.1&apos;</div><div class=\"line\"></div><div class=\"line\">    developerId = &apos;idisfkj&apos;</div><div class=\"line\">    developerName = &apos;idisfkj&apos;</div><div class=\"line\">    developerEmail = &apos;idisfkj@qq.com&apos;</div><div class=\"line\"></div><div class=\"line\">    licenseName = &apos;The Apache Software License, Version 2.0&apos;</div><div class=\"line\">    licenseUrl = &apos;http://www.apache.org/licenses/LICENSE-2.0.txt&apos;</div><div class=\"line\">    allLicenses = [&quot;Apache-2.0&quot;]</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x540C;&#x65F6;&#x5728;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x4E24;&#x4E2A;&#x811A;&#x672C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apply from: &apos;https://raw.githubusercontent.com/nuuneoi/JCenter/master/installv1.gradle&apos;</div><div class=\"line\">apply from: &apos;https://raw.githubusercontent.com/nuuneoi/JCenter/master/bintrayv1.gradle&apos;</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x662F;&#x6211;&#x8FD9;&#x4E2A;&#x4F9D;&#x8D56;&#x7684;&#x793A;&#x4F8B;&#x3002;&#x5176;&#x4E2D;<code>bintrayRepo</code>&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x4F7F;&#x7528;<code>maven</code>&#xFF0C;<code>mypicker</code>&#x662F;&#x5EFA;&#x7ACB;&#x7684;<code>package name</code>&#xFF0C;<code>siteUrl</code>&#x662F;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF0C;&#x6211;&#x7684;&#x9879;&#x76EE;&#x5728;github&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x662F;github&#x9879;&#x76EE;&#x7684;&#x5730;&#x5740;&#x5F62;&#x5F0F;&#x3002;<code>gitUrl</code>&#x662F;<code>VCS</code>&#x3002;&#x5176;&#x4ED6;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#x6539;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x6784;&#x5EFA;&#x597D;&#x4E86;&#x4F9D;&#x8D56;<code>com.idisfkj.picker:mypicker:1.2.1</code></p>\n<h2 id=\"&#x4E0A;&#x4F20;&#x5230;bintray\"><a href=\"#&#x4E0A;&#x4F20;&#x5230;bintray\" class=\"headerlink\" title=\"&#x4E0A;&#x4F20;&#x5230;bintray\"></a>&#x4E0A;&#x4F20;&#x5230;bintray</h2><p>&#x6253;&#x5F00;<code>Android Studio</code>&#x7684;&#x7EC8;&#x7AEF;</p>\n<h3 id=\"&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\"><a href=\"#&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;\"></a>&#x7F16;&#x8BD1;library&#x6587;&#x4EF6;</h3><p>&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew install</div></pre></td></tr></table></figure>\n<p>&#x51FA;&#x73B0;<code>BUILD SUCCESSFUL</code>&#x5C31;&#x6CA1;&#x95EE;&#x9898;</p>\n<h3 id=\"&#x4E0A;&#x4F20;\"><a href=\"#&#x4E0A;&#x4F20;\" class=\"headerlink\" title=\"&#x4E0A;&#x4F20;\"></a>&#x4E0A;&#x4F20;</h3><p>&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./gradlew bintrayUpload</div></pre></td></tr></table></figure>\n<p>&#x4E00;&#x6837;&#x7684;&#x51FA;&#x73B0;<code>BUILD SUCCESSFUL</code>&#x5C31;&#x6CA1;&#x95EE;&#x9898;<br>&#x7136;&#x540E;&#x4F60;&#x8FDB;&#x5165;<code>JFrog Bintray</code>&#x8FDB;&#x5165;<code>maven</code>&#x4F60;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x5176;&#x4E2D;&#x591A;&#x4E86;&#x4E00;&#x4E2A;<code>package</code>&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#x90A3;&#x5C31;&#x8868;&#x793A;&#x5B8C;&#x7F8E;&#x6210;&#x529F;&#x3002;</p>\n<h2 id=\"&#x540C;&#x6B65;&#x5230;Jcenter\"><a href=\"#&#x540C;&#x6B65;&#x5230;Jcenter\" class=\"headerlink\" title=\"&#x540C;&#x6B65;&#x5230;Jcenter\"></a>&#x540C;&#x6B65;&#x5230;Jcenter</h2><p>&#x5B8C;&#x6210;&#x4E86;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#x5E76;&#x4E0D;&#x4EE3;&#x8868;&#x522B;&#x4EBA;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD8;&#x8981;&#x6DFB;&#x52A0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">repositories {</div><div class=\"line\">    maven {</div><div class=\"line\">        url &apos;https://dl.bintray.com/idisfkj/maven/&apos;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x540C;&#x6B65;&#x5230;<code>Jcenter</code>&#x4E2D;&#xFF0C;&#x600E;&#x4E48;&#x540C;&#x6B65;&#x5462;&#xFF1F;&#x522B;&#x6025;&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x4F60;&#x521A;&#x521A;&#x751F;&#x6210;&#x7684;<code>package</code>&#x4E2D;&#x70B9;&#x51FB;<code>Add to Jcenter</code>&#x5373;&#x53EF;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/5.png\" alt=\"&#x56FE;\"></p>\n<p>&#x8FDB;&#x53BB;&#x4E4B;&#x540E;&#x76F4;&#x63A5;&#x53D1;&#x9001;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x586B;&#x5199;&#x4EC0;&#x4E48;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/7.png\" alt=\"&#x56FE;\"></p>\n<p>&#x6700;&#x540E;&#x5C31;&#x662F;&#x7B49;&#x5F85;&#x4E86;&#x3002;&#x51E0;&#x4E2A;&#x5C0F;&#x65F6;&#x4E4B;&#x540E;&#x4F60;&#x4F1A;&#x6536;&#x5230;&#x8003;&#x6838;&#x901A;&#x8FC7;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x518D;&#x8FD4;&#x56DE;<code>package</code>&#x5C31;&#x4F1A;&#x53D1;&#x73B0;<code>Linked to</code>&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x3002;</p>\n<p>&#x73B0;&#x5728;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<a href=\"http://jcenter.bintray.com/com/idisfkj/picker/mypicker/1.2.1\" target=\"_blank\" rel=\"external\">http://jcenter.bintray.com/com/idisfkj/picker/mypicker/1.2.1</a> &#x67E5;&#x770B;&#x3002;</p>\n<p><img src=\"/2016/06/13/&#x5982;&#x4F55;&#x4F7F;Android-Studio&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x5230;Jcenter&#x4E2D;/8.png\" alt=\"&#x56FE;\"></p>\n<p>&#x540C;&#x65F6;&#x522B;&#x4EBA;&#x4E5F;&#x80FD;&#x4F7F;&#x7528;&#x4F60;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x7248;&#x672C;&#x66F4;&#x65B0;\"><a href=\"#&#x7248;&#x672C;&#x66F4;&#x65B0;\" class=\"headerlink\" title=\"&#x7248;&#x672C;&#x66F4;&#x65B0;\"></a>&#x7248;&#x672C;&#x66F4;&#x65B0;</h2><p>&#x5BF9;&#x4E8E;&#x7248;&#x672C;&#x66F4;&#x65B0;&#xFF0C;&#x53EA;&#x8981;&#x66F4;&#x6539;&#x4E0A;&#x9762;&#x914D;&#x7F6E;&#x7684;&#x7248;&#x672C;&#x53F7;<code>libraryVersion = &apos;1.2.1&apos;</code>&#x6539;&#x6210;&#x4F60;&#x8981;&#x66F4;&#x65B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5176;&#x5B83;&#x4E0D;&#x53D8;&#x3002;&#x518D;&#x91CD;&#x65B0;&#x4E0A;&#x4F20;&#x5230;<code>bintray</code>&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x6211;&#x8FD9;&#x91CC;&#x518D;&#x6765;&#x6574;&#x7406;&#x4E0B;&#x4E0A;&#x4F20;&#x7684;&#x601D;&#x8DEF;&#x3002;</p>\n<ul>\n<li>&#x65E2;&#x7136;&#x8981;&#x4E0A;&#x4F20;&#x5230;<code>Jcenter</code>&#x4E0A;&#xFF0C;&#x81EA;&#x7136;&#x8981;&#x53BB;<a href=\"https://bintray.com\" target=\"_blank\" rel=\"external\">https://bintray.com</a> &#x4E2D;&#x6CE8;&#x518C;&#x8D26;&#x53F7;</li>\n<li>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x521B;&#x5EFA;<code>maven</code>&#x7684;<code>Repository</code></li>\n<li>&#x628A;&#x9879;&#x76EE;&#x5206;&#x79BB;&#x6210;<code>Module</code></li>\n<li>&#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>build.gradle</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x63D2;&#x4EF6;</li>\n<li>&#x5728;<code>local.properties</code>&#x4E2D;&#x6DFB;&#x52A0;<code>bintray</code>&#x8BA4;&#x8BC1;</li>\n<li>&#x4FEE;&#x6539;<code>Module</code>&#x4E2D;&#x7684;<code>build.gradle</code>&#x4E2D;&#x7684;&#x914D;&#x7F6E;</li>\n<li>&#x5728;<code>Android Studio</code>&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;<code>./gradlew xxx</code>&#x4E0A;&#x4F20;</li>\n<li>&#x6700;&#x540E;&#x5728;<code>JFrog Bintray</code>&#x4E2D;&#x540C;&#x6B65;&#x5230;<code>Jcenter</code>&#x4E2D;</li>\n</ul>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView的拖动、滑动删除","url":"https://www.rousetime.com/2016/06/04/RecyclerView的拖动、滑动删除/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x524D;&#x4E9B;&#x65F6;&#x5019;&#x63D0;&#x5230;&#x4E86;&#x4E0B;<code>RecyclerView</code>&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4ECA;&#x5929;&#x518D;&#x6765;&#x8BF4;&#x8BF4;<code>RecyclerView</code>&#x7684;&#x62D6;&#x52A8;&#x3001;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x3002;&#x770B;&#x5B8C;&#x4E86;&#x4EE5;&#x540E;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;<code>RecyclerView</code>&#x662F;&#x591A;&#x4E48;&#x7684;&#x7280;&#x5229;&#x3002;&#x6BD4;<code>ListView</code>&#x7B80;&#x5355;&#x7684;&#x591A;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;<code>ItemTouchHelper.Callback</code>&#x7C7B;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x8981;&#x7528;&#x5230;&#x7684;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x6709;</p>\n<ul>\n<li>getMovementFlags()</li>\n<li>onMove()</li>\n<li>onSwiped()</li>\n<li>isLongPressDragEnabled()</li>\n<li>onSelectedChanged()</li>\n<li>clearView()</li>\n</ul>\n<p>&#x501F;&#x52A9;&#x8BE5;<code>ItemTouchHelper.Callback</code>&#x4E0E;&#x5176;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5904;&#x7406;&#x5B9E;&#x73B0;&#x62D6;&#x52A8;&#x3001;&#x5220;&#x9664;&#x3002;<br>&#x4E0B;&#x9762;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x7684;&#x7528;&#x5904;&#x4E0E;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x3002;</p>\n<h3 id=\"&#x62D6;&#x52A8;\"><a href=\"#&#x62D6;&#x52A8;\" class=\"headerlink\" title=\"&#x62D6;&#x52A8;\"></a>&#x62D6;&#x52A8;</h3><h4 id=\"getMovementFlags\"><a href=\"#getMovementFlags\" class=\"headerlink\" title=\"getMovementFlags\"></a>getMovementFlags</h4><p>&#x65E2;&#x7136;&#x8981;&#x4F7F;&#x7528;<code>ItemTouchHelper.Callback</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x81EA;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684;&#x7C7B;&#x6765;&#x7EE7;&#x627F;&#x5B83;&#xFF0C;&#x91CD;&#x5199;&#x5176;&#x4E2D;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#x3002;&#x9996;&#x5148;&#x662F;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x5B9A;&#x4E49;&#x79FB;&#x52A8;&#x6807;&#x8BC6;&#xFF0C;&#x6240;&#x4EE5;&#x9488;&#x5BF9;&#x62D6;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x62D6;&#x52A8;&#x6807;&#x8BC6;,&#x901A;&#x8FC7;<code>ItemTouchHelper</code>&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x6765;&#x5B9A;&#x4E49;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {</div><div class=\"line\">            dragFlags = 0;</div><div class=\"line\">            swipeFlags = 0;</div><div class=\"line\">            if (recyclerView.getLayoutManager() instanceof GridLayoutManager</div><div class=\"line\">                    || recyclerView.getLayoutManager() instanceof StaggeredGridLayoutManager) {</div><div class=\"line\">                dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN</div><div class=\"line\">                        | ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT;</div><div class=\"line\">            } else {</div><div class=\"line\">                dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN;</div><div class=\"line\">                //if (viewHolder.getAdapterPosition() != 0)</div><div class=\"line\">                  //  swipeFlags = ItemTouchHelper.START | ItemTouchHelper.END;</div><div class=\"line\">            }</div><div class=\"line\">            return makeMovementFlags(dragFlags, swipeFlags);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x7684;<code>RecyclerView</code>&#x7684;<code>LayoutManager</code>&#x60C5;&#x51B5;&#x6765;&#x5B9A;&#x4E49;&#x62D6;&#x52A8;&#x65B9;&#x5411;&#x3002;<code>LinearLayoutManager</code>&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E0A;&#x4E0B;&#x62D6;&#x52A8;<code>dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN;</code>&#x81F3;&#x4E8E;&#x6CE8;&#x91CA;&#x4EE3;&#x7801;<code>swipeFlags</code>&#x8FD9;&#x91CC;&#x5148;&#x4E0D;&#x8981;&#x7BA1;&#xFF0C;&#x8FD9;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x5220;&#x9664;&#x6807;&#x8BC6;&#x3002;&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;<code>makeMovementFlags</code>&#x8FD4;&#x56DE;&#x3002;</p>\n<h4 id=\"onMove\"><a href=\"#onMove\" class=\"headerlink\" title=\"onMove\"></a>onMove</h4><p>&#x5728;&#x5B9A;&#x4E49;&#x5B8C;<code>MovementFlags</code>&#x4EE5;&#x540E;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x62D6;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x8C03;&#x7528;<code>onMove</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x8FDB;&#x884C;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x6539;&#x53D8;&#x64CD;&#x4F5C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) {</div><div class=\"line\">            int fromPosition = viewHolder.getAdapterPosition();</div><div class=\"line\">            int toPosition = target.getAdapterPosition();</div><div class=\"line\">            if (toPosition != 0) {</div><div class=\"line\">                if (fromPosition &lt; toPosition)</div><div class=\"line\">                    //&#x5411;&#x4E0B;&#x62D6;&#x52A8;</div><div class=\"line\">                    for (int i = fromPosition; i &lt; toPosition; i++) {</div><div class=\"line\">                        Collections.swap(mListData, i, i + 1);</div><div class=\"line\">                    }</div><div class=\"line\">                else {</div><div class=\"line\">                    //&#x5411;&#x4E0A;&#x62D6;&#x52A8;</div><div class=\"line\">                    for (int i = fromPosition; i &gt; toPosition; i--) {</div><div class=\"line\">                        Collections.swap(mListData, i, i - 1);</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                recyclerView.getAdapter().notifyItemMoved(fromPosition, toPosition);</div><div class=\"line\">            }</div><div class=\"line\">            return true;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;&#x63D0;&#x4F9B;&#x7684;&#x53C2;&#x6570;&#x83B7;&#x53D6;<code>fromPosition</code>&#x521D;&#x59CB;&#x4F4D;&#x7F6E;<code>toPosition</code>&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x6539;&#x53D8;&#xFF0C;&#x6700;&#x540E;&#x8C03;&#x7528;<code>recyclerView.getAdapter().notifyItemMoved(fromPosition, toPosition);</code>&#x6765;&#x66F4;&#x65B0;<code>adapter</code>&#x72B6;&#x6001;&#x3002;</p>\n<h4 id=\"&#x7ED1;&#x5B9A;\"><a href=\"#&#x7ED1;&#x5B9A;\" class=\"headerlink\" title=\"&#x7ED1;&#x5B9A;\"></a>&#x7ED1;&#x5B9A;</h4><p>&#x6700;&#x540E;&#x7528;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x6765;&#x7ED1;&#x5B9A;&#x76EE;&#x6807;<code>RecyclerView</code>&#x5BF9;&#x8C61;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">final ItemTouchHelper helper = new ItemTouchHelper(new MyCallBack());</div><div class=\"line\">        helper.attachToRecyclerView(recyclerView);</div></pre></td></tr></table></figure>\n<p><code>(new MyCallBack()</code>&#x5C31;&#x662F;&#x524D;&#x9762;&#x6211;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x3002;&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x7684;&#x62D6;&#x52A8;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5C31;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x4F60;&#x5728;&#x62D6;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x56DE;&#x6CA1;&#x6709;&#x80CC;&#x666F;&#x6548;&#x679C;&#x7684;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x4E00;&#x4E0B;</p>\n<h4 id=\"onSelectedChanged\"><a href=\"#onSelectedChanged\" class=\"headerlink\" title=\"onSelectedChanged\"></a>onSelectedChanged</h4><p>&#x901A;&#x8FC7;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684;&#x62D6;&#x52A8;&#x80CC;&#x666F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onSelectedChanged(RecyclerView.ViewHolder viewHolder, int actionState) {</div><div class=\"line\">            if (actionState != ItemTouchHelper.ACTION_STATE_IDLE) {</div><div class=\"line\">                viewHolder.itemView.setPressed(true);</div><div class=\"line\">            }</div><div class=\"line\">            super.onSelectedChanged(viewHolder, actionState);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x524D;&#x63D0;&#x662F;&#x4F60;&#x7684;<code>RecyclerView</code>&#x7684;<code>Item</code>&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;<code>android:background=&quot;@drawable/item_bg</code>&#x5C5E;&#x6027;&#x3002;&#x4F8B;&#x5982;<code>item_bg</code>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;item android:state_pressed=&quot;true&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;rectangle&quot;&gt;</div><div class=\"line\">            &lt;solid android:color=&quot;@android:color/darker_gray&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">    &lt;item android:state_pressed=&quot;false&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;rectangle&quot;&gt;</div><div class=\"line\">            &lt;solid android:color=&quot;@android:color/white&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/selector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"clearView\"><a href=\"#clearView\" class=\"headerlink\" title=\"clearView\"></a>clearView</h4><p>&#x6700;&#x540E;&#x518D;&#x91CD;&#x5199;<code>clearViwe()</code>&#x62D6;&#x52A8;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x4F1A;&#x8C03;&#x7528;&#xFF0C;&#x7528;&#x6765;&#x6E05;&#x9664;&#x80CC;&#x666F;&#x72B6;&#x6001;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void clearView(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) {</div><div class=\"line\">            super.clearView(recyclerView, viewHolder);</div><div class=\"line\">            viewHolder.itemView.setPressed(false);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x65E5;&#x5E38;&#x6211;&#x4EEC;&#x6240;&#x8981;&#x7684;&#x62D6;&#x52A8;&#x6548;&#x679C;&#x3002;&#x81F3;&#x4E8E;&#x5BF9;&#x4E2A;&#x522B;&#x7684;<code>Item</code>&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>isLongPressDragEnabled()</code>&#x65B9;&#x6CD5;</p>\n<h3 id=\"isLongPressDragEnabled\"><a href=\"#isLongPressDragEnabled\" class=\"headerlink\" title=\"isLongPressDragEnabled\"></a>isLongPressDragEnabled</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;<code>true</code>&#x5C31;&#x662F;&#x4E0D;&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x6240;&#x6709;&#x7684;<code>Item</code>&#x90FD;&#x80FD;&#x88AB;&#x62D6;&#x52A8;&#x3002;&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x5C4F;&#x853D;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x8FD4;&#x56DE;<code>false</code>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public boolean isLongPressDragEnabled() {</div><div class=\"line\">            return false;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x5728;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x6587;&#x7AE0;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;<code>Item</code>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x4E2D;&#x7684;<code>onItemLongPressClick()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;<code>helper.startDrag(vh)</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x8981;&#x62D6;&#x52A8;&#x7684;<code>Item</code>,&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x8981;&#x62D6;&#x52A8;&#x7684;<code>ViewHolder</code>&#x6765;&#x6807;&#x8BC6;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">            public void onItemLongPressClick(RecyclerView.ViewHolder vh) {</div><div class=\"line\">                if (vh.getAdapterPosition() != 0) {</div><div class=\"line\">                    helper.startDrag(vh);</div><div class=\"line\">                }</div><div class=\"line\">            }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x56FA;&#x5B9A;&#x4E86;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x662F;&#x4E0D;&#x80FD;&#x88AB;&#x62D6;&#x52A8;&#x7684;&#x3002;</p>\n<blockquote>\n<p><em>&#x5982;&#x679C;&#x5BF9;&#x4E8E;RecyclerView&#x7684;Item&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x8FD8;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x9605;&#x8BFB;&#x6211;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/05/22/RecyclerView-item%E7%82%B9%E5%87%BB%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E4%B9%88/\" target=\"_blank\" rel=\"external\">RecyclerView item&#x70B9;&#x51FB;&#x4F60;&#x771F;&#x7684;&#x4F1A;&#x4E48;</a></em></p>\n</blockquote>\n<h3 id=\"&#x6ED1;&#x52A8;&#x5220;&#x9664;\"><a href=\"#&#x6ED1;&#x52A8;&#x5220;&#x9664;\" class=\"headerlink\" title=\"&#x6ED1;&#x52A8;&#x5220;&#x9664;\"></a>&#x6ED1;&#x52A8;&#x5220;&#x9664;</h3><p>&#x5230;&#x8FD9;&#x91CC;&#x76F8;&#x4FE1;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x7709;&#x76EE;&#x4E86;&#x5427;&#x3002;&#x5BF9;&#xFF0C;&#x5C31;&#x662F;&#x524D;&#x9762;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#x4E2D;&#x6240;&#x5B9A;&#x4E49;&#x7684;<code>swipeFlags</code>&#x6807;&#x8BC6;&#xFF0C;<code>ItemTouchHelper</code>&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x5DE6;&#x53F3;&#x5220;&#x9664;&#x6807;&#x8BC6;<code>ItemTouchHelper.START</code>&#x4E0E;<code>ItemTouchHelper.END</code>,&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5148;&#x6253;&#x5F00;&#x524D;&#x9762;&#x6CE8;&#x91CA;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>\n<h4 id=\"onSwiped\"><a href=\"#onSwiped\" class=\"headerlink\" title=\"onSwiped\"></a>onSwiped</h4><p>&#x6700;&#x540E;&#x53EF;&#x4EE5;&#x5728;<code>onSwiped()</code>&#x4E2D;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5220;&#x9664;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) {</div><div class=\"line\">            int positon = viewHolder.getAdapterPosition();</div><div class=\"line\">            recyclerView.getAdapter().notifyItemRemoved(positon);</div><div class=\"line\">            mListData.remove(positon);</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#x57FA;&#x672C;&#x7684;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4E86;&#x3002;&#x81F3;&#x4E8E;&#x5BF9;&#x4E2A;&#x522B;&#x7684;<code>Item</code>&#x5C4F;&#x853D;&#x5220;&#x9664;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x91CD;&#x5199;<code>isItemViewSwipeEnabled()</code>&#x65B9;&#x6CD5;</p>\n<h3 id=\"isItemViewSwipeEnabled\"><a href=\"#isItemViewSwipeEnabled\" class=\"headerlink\" title=\"isItemViewSwipeEnabled\"></a>isItemViewSwipeEnabled</h3><p>&#x8BE5;&#x65B9;&#x6CD5;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x62D6;&#x52A8;&#x7684;&#x5C4F;&#x853D;<code>isItemViewSwipeEnabled()</code>&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x5B83;&#x4E5F;&#x662F;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;<code>true</code>&#xFF0C;&#x4E0D;&#x5BF9;<code>Item</code>&#x8FDB;&#x884C;&#x5C4F;&#x853D;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x3002;&#x5982;&#x679C;&#x8981;&#x5C4F;&#x853D;&#x7684;&#x8BDD;&#x4E5F;&#x662F;&#x91CD;&#x5199;&#x65B9;&#x6CD5;&#x518D;&#x8FD4;&#x56DE;<code>false</code>&#xFF0C;&#x6700;&#x540E;&#x5728;&#x901A;&#x8FC7;&#x5BF9;&#x5E94;&#x7684;<code>startSwipe(ViewHolder)</code>&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x524D;&#x9762;&#x7684;&#x5C4F;&#x853D;&#x62D6;&#x52A8;&#x3002;</p>\n<h1 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x8981;&#x5F04;&#x660E;&#x767D;&#x4E0A;&#x9762;&#x6240;&#x63D0;&#x5230;&#x7684;6&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x4E0E;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x3002;&#x4E3B;&#x8981;&#x5C31;&#x662F;<code>getMovementFlags()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5B9A;&#x4E49;&#x597D;&#x62D6;&#x52A8;&#x4E0E;&#x6ED1;&#x52A8;&#x6807;&#x8BC6;&#x3002;&#x62D6;&#x52A8;&#x65F6;&#x4F1A;&#x56DE;&#x8C03;<code>onMove()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6ED1;&#x52A8;&#x5220;&#x9664;&#x65F6;&#x8981;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x5220;&#x9664;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x56DE;&#x8C03;<code>onSwiped()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x81F3;&#x4E8E;&#x5176;&#x5B83;&#x7684;&#x72B6;&#x6001;&#x6548;&#x679C;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x89C6;&#x9700;&#x6C42;&#x6765;&#x7075;&#x6D3B;&#x53D8;&#x5316;&#x3002;</p>\n<p>Demo&#x5730;&#x5740;:<a href=\"https://github.com/idisfkj/RecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RecyclerView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Socket的简单通信","url":"https://www.rousetime.com/2016/05/28/Socket的简单通信/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;<code>Socket</code>&#x901A;&#x4FE1;&#xFF0C;&#x662F;&#x4E00;&#x7BC7;&#x5165;&#x95E8;&#x6587;&#x7AE0;&#x3002;&#x6240;&#x6709;&#x8FD8;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#xFF0C;&#x4F46;&#x53C8;&#x60F3;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;&#x3002;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x4EEC;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</p>\n<h2 id=\"Socket\"><a href=\"#Socket\" class=\"headerlink\" title=\"Socket\"></a>Socket</h2><p>&#x9996;&#x5148;&#x4E00;&#x53E5;&#x8BDD;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;<code>Socket</code>:&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4E24;&#x4E2A;&#x7A0B;&#x5E8F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x7684;&#x901A;&#x4FE1;&#x8FDE;&#x63A5;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x4EA4;&#x6362;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x4E00;&#x7AEF;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;<code>socket</code>&#x3002;<br>&#x6240;&#x6709;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x8981;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7AEF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#x3002;</p>\n<blockquote>\n<p><em>&#x563F;&#x563F;&#xFF0C;&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x53E5;&#x8BDD;&#x662F;&#x767E;&#x5EA6;&#x767E;&#x79D1;&#x7684;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x4F60;&#x4EEC;&#x53D1;&#x73B0;&#x4E86;&#x6CA1;&#x6709;</em></p>\n</blockquote>\n<h2 id=\"&#x670D;&#x52A1;&#x7AEF;\"><a href=\"#&#x670D;&#x52A1;&#x7AEF;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x7AEF;\"></a>&#x670D;&#x52A1;&#x7AEF;</h2><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x65B0;&#x5EFA;&#x4E86;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>Java</code>&#x7C7B;&#xFF0C;&#x53EA;&#x662F;&#x5B9E;&#x73B0;&#x5F00;&#x542F;&#x540E;&#x7B49;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x3002;</p>\n<h3 id=\"&#x5B9E;&#x4F8B;&#x5316;ServerSocket\"><a href=\"#&#x5B9E;&#x4F8B;&#x5316;ServerSocket\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;&#x5316;ServerSocket\"></a>&#x5B9E;&#x4F8B;&#x5316;ServerSocket</h3><p>&#x7ED1;&#x5B9A;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&#xFF0C;&#x6700;&#x597D;&#x7AEF;&#x53E3;&#x8BBE;&#x5927;&#x70B9;&#xFF0C;&#x9632;&#x6B62;&#x7AEF;&#x53E3;&#x88AB;&#x5360;&#x7528;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">java.net.ServerSocket serverSocket = new java.net.ServerSocket(30000);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\"><a href=\"#&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x7B49;&#x5F85;&#x8FDE;&#x63A5;\"></a>&#x7B49;&#x5F85;&#x8FDE;&#x63A5;</h3><p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8BBE;&#x8BA1;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x53EA;&#x8981;&#x5F00;&#x542F;&#x4E86;&#x5C31;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">while (true) {</div><div class=\"line\">                        //&#x63A5;&#x6536;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;</div><div class=\"line\">                        Socket s = serverSocket.accept();</div><div class=\"line\">                        list.add(s);</div><div class=\"line\">                        //&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x7684;&#x7EBF;&#x7A0B;</div><div class=\"line\">                        new Thread(new ServiceRunnable(s)).start();</div><div class=\"line\">                    }</div></pre></td></tr></table></figure>\n<p>&#x56E0;&#x4E3A;&#x6211;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x5F97;&#x901A;&#x4FE1;&#xFF0C;&#x6240;&#x6709;&#x5C06;&#x6BCF;&#x4E2A;<code>Socket</code>&#x52A0;&#x5165;&#x5230;<code>List</code>&#x4E2D;&#x5E76;&#x4E14;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code>Socket</code>&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h3 id=\"&#x901A;&#x4FE1;\"><a href=\"#&#x901A;&#x4FE1;\" class=\"headerlink\" title=\"&#x901A;&#x4FE1;\"></a>&#x901A;&#x4FE1;</h3><p>&#x5982;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5411;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;<code>Socket</code>&#x53D1;&#x9001;&#x8BE5;&#x6D88;&#x606F;&#xFF0C;&#x6240;&#x6709;&#x9996;&#x5148;&#x8981;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">br = new BufferedReader(new InputStreamReader(s.getInputStream(), &quot;utf-8&quot;));</div></pre></td></tr></table></figure>\n<p>&#x8BFB;&#x53D6;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public String readContent() {</div><div class=\"line\">    try {</div><div class=\"line\">        return br.readLine();</div><div class=\"line\">    } catch (IOException e) {</div><div class=\"line\">        list.remove(s);</div><div class=\"line\">        e.printStackTrace();</div><div class=\"line\">    }</div><div class=\"line\">    return null;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#x53D1;&#x9001;&#x6D88;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">while ((content = readContent()) != null) {</div><div class=\"line\">                //&#x904D;&#x5386;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x4E86;&#x7684;Socket&#xFF0C;&#x5411;&#x6240;&#x6709;&#x5BA2;&#x6237;&#x7AEF;Socket&#x53D1;&#x9001;&#x6D88;&#x606F;</div><div class=\"line\">                for (Iterator&lt;Socket&gt; it = list.iterator(); it.hasNext(); ) {</div><div class=\"line\">                    Socket socket = it.next();</div><div class=\"line\">                    try {</div><div class=\"line\">                        pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);</div><div class=\"line\">                        pw.println(content);</div><div class=\"line\">                    } catch (IOException e) {</div><div class=\"line\">                        it.remove();</div><div class=\"line\">                        e.printStackTrace();</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">            }</div></pre></td></tr></table></figure>\n<p>&#x670D;&#x52A1;&#x7AEF;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x5BA2;&#x6237;&#x7AEF;</p>\n<h2 id=\"&#x5BA2;&#x6237;&#x7AEF;\"><a href=\"#&#x5BA2;&#x6237;&#x7AEF;\" class=\"headerlink\" title=\"&#x5BA2;&#x6237;&#x7AEF;\"></a>&#x5BA2;&#x6237;&#x7AEF;</h2><p>&#x5BA2;&#x6237;&#x7AEF;&#x5E03;&#x5C40;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x53D1;&#x9001;&#x754C;&#x9762;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x3002;&#x76F4;&#x63A5;&#x8BF4;<code>Socket</code>&#x3002;</p>\n<h3 id=\"&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\"><a href=\"#&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;\"></a>&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</h3><p>&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x4E3B;&#x673A;&#x540D;&#x6216;<code>IP</code>&#x5730;&#x5740;&#x4E0E;&#x8FDE;&#x63A5;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x5E94;&#x4E3A;&#x662F;&#x672C;&#x5730;&#x670D;&#x52A1;&#x5668;&#x6240;&#x6709;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x672C;&#x5730;<code>IP</code>&#x5730;&#x5740;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">socket = new Socket(&quot;192.168.56.1&quot;, 30000);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x901A;&#x4FE1;-1\"><a href=\"#&#x901A;&#x4FE1;-1\" class=\"headerlink\" title=\"&#x901A;&#x4FE1;\"></a>&#x901A;&#x4FE1;</h3><p>&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x7C7B;&#x4F3C;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#xFF0C;&#x8BFB;&#x53D6;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x663E;&#x793A;&#x5230;&#x754C;&#x9762;&#x4E2D;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">br = new BufferedReader(new InputStreamReader(socket.getInputStream()));</div><div class=\"line\"></div><div class=\"line\">                new Thread(new Runnable() {</div><div class=\"line\">                    String line;</div><div class=\"line\"></div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void run() {</div><div class=\"line\">                        try {</div><div class=\"line\">                            //&#x8BFB;&#x53D6;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x6765;&#x7684;&#x6D88;&#x606F;</div><div class=\"line\">                            while ((line = br.readLine()) != null) {</div><div class=\"line\">                                Message message = new Message();</div><div class=\"line\">                                message.what = 1;</div><div class=\"line\">                                message.obj = line;</div><div class=\"line\">                                handler.sendMessage(message);</div><div class=\"line\">                            }</div><div class=\"line\">                        } catch (IOException e) {</div><div class=\"line\">                            e.printStackTrace();</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                }).start();</div></pre></td></tr></table></figure>\n<p>&#x70B9;&#x51FB;&#x53D1;&#x9001;&#xFF0C;&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x6D88;&#x606F;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onClick(View v) {</div><div class=\"line\">    Message message = new Message();</div><div class=\"line\">    message.what = 2;</div><div class=\"line\">    message.obj = et.getText().toString();</div><div class=\"line\">    clientThread.clientHandler.sendMessage(message);</div><div class=\"line\">    et.setText(&quot;&quot;);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">clientHandler = new Handler(Looper.getMainLooper()) {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void handleMessage(Message msg) {</div><div class=\"line\">                        if (msg.what == 2) {</div><div class=\"line\">                            try {</div><div class=\"line\">                                //&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x6D88;&#x606F;</div><div class=\"line\">                                pw = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);</div><div class=\"line\">                                pw.println(msg.obj);</div><div class=\"line\">                            } catch (IOException e) {</div><div class=\"line\">                                e.printStackTrace();</div><div class=\"line\">                            }</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                };</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x6B64;&#x6574;&#x4E2A;&#x7684;<code>Socket</code>&#x901A;&#x4FE1;&#x5C31;&#x57FA;&#x672C;&#x4E0A;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h2><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4F7F;&#x7528;<code>Socket</code>&#x5B9E;&#x73B0;&#x901A;&#x4FE1;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4E09;&#x6B65;</p>\n<ul>\n<li>&#x5B9E;&#x4F8B;&#x5316;<code>Socket</code>,&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</li>\n<li>&#x83B7;&#x53D6;&#x8F93;&#x5165;&#x6D41;&#xFF0C;&#x8BFB;&#x53D6;&#x6570;&#x636E;</li>\n<li>&#x83B7;&#x53D6;&#x8F93;&#x51FA;&#x6D41;&#xFF0C;&#x53D1;&#x9001;&#x6570;&#x636E;</li>\n</ul>\n<p>&#x5F53;&#x7136;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5E26;&#x9886;&#x6211;&#x4EEC;&#x5165;&#x95E8;&#x800C;&#x5DF2;&#x3002;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x4E0B;&#x9762;&#x7684;Demo&#x5B66;&#x4E60;&#x3002;</p>\n<p>Demo&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/Socket\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/Socket</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"android 软键盘显隐","url":"https://www.rousetime.com/2016/05/24/android-软键盘显隐/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x6700;&#x8FD1;&#x9047;&#x5230;&#x8F6F;&#x952E;&#x76D8;&#x7684;&#x663E;&#x9690;&#x5224;&#x65AD;&#x95EE;&#x9898;&#xFF0C;&#x539F;&#x6765;&#x4E5F;&#x9047;&#x8FC7;&#x4E00;&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6B21;&#x9488;&#x5BF9;&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x505A;&#x4E0B;&#x8BB0;&#x5F55;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5E2E;&#x52A9;&#x540E;&#x9762;&#x78B0;&#x5230;&#x76F8;&#x540C;&#x95EE;&#x9898;&#x7684;&#x4F60;&#x4EEC;&#x3002;</p>\n<p>&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E09;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x5B9E;&#x539F;&#x7406;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x8F6F;&#x4EF6;&#x76D8;&#x7684;&#x5F39;&#x51FA;&#xFF0C;&#x89C6;&#x56FE;&#x7684;&#x5E03;&#x5C40;&#x4F1A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5E03;&#x5C40;&#x7684;&#x6539;&#x53D8;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x663E;&#x793A;&#x4E86;&#x8F6F;&#x4EF6;&#x76D8;&#x3002;</p>\n<h2 id=\"&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;\"></a>&#x81EA;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;</h2><p>&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x5B83;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x76F8;&#x5BF9;&#x4E8E;&#x522B;&#x7684;&#x66F4;&#x9AD8;&#x3002;&#x56E0;&#x4E3A;&#x8FD9;&#x53EA;&#x662F;&#x5728;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8F6F;&#x952E;&#x76D8;&#x89E6;&#x53D1;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x4F60;&#x53EF;&#x4EE5;&#x8FD0;&#x7528;&#x5230;&#x4EFB;&#x4F55;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x4E2D;&#x6765;&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x76D8;&#x7684;&#x72B6;&#x6001;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p>&#x5224;&#x65AD;&#x72B6;&#x6001;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">private boolean isKeyboardShown(View rootView) {</div><div class=\"line\">        final int softKeyboardHeight = 100;</div><div class=\"line\">        Rect r = new Rect();</div><div class=\"line\">        //&#xA0;&#x83B7;&#x53D6;&#x6839;&#x5E03;&#x5C40;&#x7684;&#x53EF;&#x89C6;&#x533A;&#x57DF;r</div><div class=\"line\">        rootView.getWindowVisibleDisplayFrame(r);</div><div class=\"line\">        DisplayMetrics dm = rootView.getResources().getDisplayMetrics();</div><div class=\"line\">        // &#x672C;&#x6765;&#x7684;&#x5B9E;&#x9645;&#x5E95;&#x90E8;&#x8DDD;&#x79BB; - &#x53EF;&#x89C6;&#x7684;&#x5E95;&#x90E8;&#x8DDD;&#x79BB;</div><div class=\"line\">        int heightDiff = rootView.getBottom() - r.bottom;</div><div class=\"line\">        return heightDiff &gt; softKeyboardHeight * dm.density;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4F8B;&#x5982;&#x5728;<code>onTouch</code>&#x4E2D;&#x5224;&#x65AD;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public boolean onTouch(View v, MotionEvent event) {</div><div class=\"line\">        if (event.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; isKeyboardShown(chatContent.getRootView()))</div><div class=\"line\">            manager.toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);</div><div class=\"line\">        return false;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x8C03;&#x7528;Android-API\"><a href=\"#&#x8C03;&#x7528;Android-API\" class=\"headerlink\" title=\"&#x8C03;&#x7528;Android API\"></a>&#x8C03;&#x7528;Android API</h2><p>&#x5176;&#x5B9E;&#x67E5;&#x9605;<code>API</code>&#x53D1;&#x73B0;<code>Android</code>&#x5DF2;&#x7ECF;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x5E03;&#x5C40;&#x6539;&#x53D8;&#x7684;&#x76D1;&#x542C;&#x7684;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>addOnGlobalLayoutListener</code>&#x6765;&#x76D1;&#x542C;&#x6574;&#x4E2A;&#x5E03;&#x5C40;&#x7684;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5E03;&#x5C40;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#x4F1A;&#x8C03;&#x7528;<code>onGlobalLayout</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4E2D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5F53;&#x7136;&#x5728;&#x4F7F;&#x7528;&#x8BE5;&#x76D1;&#x542C;&#x65F6;&#x8981;&#x5148;&#x83B7;&#x53D6;&#x6574;&#x4E2A;&#x89C6;&#x56FE;&#x6811;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">final View root = findViewById(R.id.main);</div><div class=\"line\">        ViewTreeObserver observer = root.getViewTreeObserver();</div></pre></td></tr></table></figure>\n<p>&#x518D;&#x6DFB;&#x52A0;&#x76D1;&#x542C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">observer.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onGlobalLayout() {</div><div class=\"line\">                int heightDiff = root.getRootView().getHeight() - root.getHeight();</div><div class=\"line\">                if (heightDiff &gt; 100){ //&#x4E00;&#x822C;&#x8D85;&#x8FC7;100&#x89C6;&#x4E3A;&#x5F39;&#x51FA;</div><div class=\"line\">                \t//&#x663E;&#x793A;&#x64CD;&#x4F5C;</div><div class=\"line\">                }else{</div><div class=\"line\">                \t//&#x9690;&#x85CF;&#x64CD;&#x4F5C;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h2 id=\"&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;\"></a>&#x81EA;&#x5B9A;&#x4E49;&#x5916;&#x90E8;&#x7C7B;</h2><p>&#x5176;&#x5B9E;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E03;&#x5C40;&#x7EE7;&#x627F;<code>Android</code>&#x57FA;&#x672C;&#x5E03;&#x5C40;&#x63A7;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x91CD;&#x5199;<code>onMeasure</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x57FA;&#x672C;&#x7C7B;&#x4F3C;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {</div><div class=\"line\">        int height = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        Activity activity = (Activity) getContext();</div><div class=\"line\">        Rect rect = new Rect();</div><div class=\"line\">        activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);</div><div class=\"line\">        int statusBarHeight = rect.top;</div><div class=\"line\">        int screenHeight = activity.getWindowManager().getDefaultDisplay().getHeight();</div><div class=\"line\">        int diff = (screenHeight - statusBarHeight) - height;</div><div class=\"line\">        if (listener != null) {</div><div class=\"line\">            listener.onSoftKeyboardShown(diff &gt; 100);</div><div class=\"line\">        }</div><div class=\"line\">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x81EA;&#x5B9A;&#x4E49;&#x4E0E;&#x5B9E;&#x73B0;&#x4E86;&#x76D1;&#x542C;&#x63A5;&#x53E3;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface Listener {</div><div class=\"line\">        void onSoftKeyboardShown(boolean isShowing);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private Listener listener;</div><div class=\"line\"></div><div class=\"line\">    public void setListener(Listener listener) {</div><div class=\"line\">        this.listener = listener;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;xml&#x4E2D;&#x4F7F;&#x7528;&#x8BE5;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#xFF0C;&#x76EE;&#x6807;&#x7C7B;&#x4E2D;&#x7ED1;&#x5B9A;&#x8C03;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">RelativeLayoutThatDetectsSoftKeyboard chatLayout = (RelativeLayoutThatDetectsSoftKeyboard) findViewById(R.id.chat_bottm);</div><div class=\"line\">        chatLayout.setListener(this);</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void onSoftKeyboardShown(boolean isShowing) {</div><div class=\"line\">        if (isShowing)</div><div class=\"line\">            //&#x663E;&#x793A;&#x64CD;&#x4F5C;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x903B;&#x8F91;&#x5BF9;&#x5916;&#x5C01;&#x88C5;&#x3001;&#x89E3;&#x8026;&#x4E86;&#xFF0C;&#x53EA;&#x8981;&#x6839;&#x636E;<code>isShowing</code>&#x7684;&#x503C;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x5927;&#x81EA;&#x7136;&#x7684;&#x642C;&#x8FD0;&#x5DE5;&#xFF0C;&#x5230;&#x5E95;&#x8981;&#x7528;&#x54EA;&#x79CD;&#x5C31;&#x81EA;&#x5DF1;&#x89C6;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x5427;</em></p>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView item点击你真的会么","url":"https://www.rousetime.com/2016/05/22/RecyclerView-item点击你真的会么/","content":"<p>&#x73B0;&#x5728;<code>RecyclerView</code>&#x90FD;&#x4F7F;&#x7528;&#x7684;&#x76F8;&#x5BF9;&#x9891;&#x7E41;&#x4E86;&#xFF0C;&#x5728;&#x5F00;&#x59CB;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x5E94;&#x8BE5;&#x90FD;&#x9047;&#x5230;&#x8FC7;<code>RecyclerView</code>&#x5C45;&#x7136;&#x6CA1;&#x6709;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;<code>Item</code>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x987F;&#x65F6;&#x611F;&#x89C9;&#x4E0D;&#x77E5;&#x6240;&#x63AA;&#x4E86;&#x3002;&#x67E5;&#x9605;<code>API</code>&#x53D1;&#x73B0;&#x786E;&#x5B9E;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x8BE5;&#x4E8B;&#x4EF6;&#xFF0C;&#x6700;&#x540E;&#x7ECF;&#x8FC7;&#x82E6;&#x601D;&#x51A5;&#x60F3;&#xFF0C;&#x8FD8;&#x662F;&#x6A21;&#x4EFF;<code>ListView</code>&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x5728;<code>onCreateViewHolder</code>&#x4E2D;&#x4E3A;&#x6BCF;&#x4E2A;<code>Item</code>&#x6DFB;&#x52A0;<code>View</code>&#x7684;<code>setOnClickListener</code>&#x4E8B;&#x4EF6;&#xFF0C;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5728;&#x4E3B;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x3002;&#x77AC;&#x95F4;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4E00;&#x4E0B;&#x611F;&#x89C9;<code>so easy</code>&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x771F;&#x7684;&#x597D;&#x5417;&#xFF1F;&#x6211;&#x4EEC;&#x60F3;&#x60F3;&#x4E00;&#x65E6;<code>Item</code>&#x7684;&#x6570;&#x91CF;&#x66B4;&#x589E;&#x8FD9;&#x53EF;&#x4F1A;&#x5F71;&#x54CD;&#x6027;&#x80FD;&#x554A;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x60F3;&#x51FA;&#x522B;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4EE3;&#x66FF;&#x5B83;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x5C31;&#x4ECB;&#x7ECD;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x6559;&#x4F60;&#x5982;&#x4F55;&#x771F;&#x6B63;&#x7684;&#x4E3A;<code>RecyclerView</code>&#x7684;<code>Item</code>&#x6DFB;&#x52A0;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x867D;&#x7136;<code>RecyclerView</code>&#x6CA1;&#x6709;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x76F8;&#x5E94;&#x7684;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x67E5;&#x8BE2;&#x5B83;&#x7684;<code>API</code>&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x5C31;&#x662F;<code>addOnItemTouchListener</code>&#x89E6;&#x6478;&#x5B9E;&#x4E8B;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8BE5;&#x76D1;&#x542C;&#x6765;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x89E6;&#x6478;&#x53CD;&#x5E94;&#x5E2E;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x6548;&#x679C;&#x3002;&#x5F53;&#x7136;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x8FD8;&#x8981;&#x501F;&#x52A9;<code>GestureDetectorCompat</code>&#x6839;&#x636E;&#x89E6;&#x6478;&#x624B;&#x52BF;&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x4E3A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;</p>\n<h2 id=\"addOnItemTouchListener\"><a href=\"#addOnItemTouchListener\" class=\"headerlink\" title=\"addOnItemTouchListener\"></a>addOnItemTouchListener</h2><p>&#x4E3A;<code>RecyclerView</code>&#x6DFB;&#x52A0;<code>addOnItemTouchListener</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.addOnItemTouchListener(new OnItemTouchListener(recyclerView) {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onItemClick(RecyclerView.ViewHolder vh) {</div><div class=\"line\">            //item &#x64CD;&#x4F5C;</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x53BB;&#x5B9E;&#x73B0;<code>RecyclerView.OnItemTouchListener</code>&#x63A5;&#x53E3;</p>\n<h3 id=\"&#x5B9E;&#x73B0;OnItemTouchListener\"><a href=\"#&#x5B9E;&#x73B0;OnItemTouchListener\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;OnItemTouchListener\"></a>&#x5B9E;&#x73B0;OnItemTouchListener</h3><p>&#x5728;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#x65F6;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x6709;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;</p>\n<ul>\n<li>onTouchEvent</li>\n<li>onInterceptTouchEvent</li>\n<li>onRequestDisallowInterceptTouchEvent</li>\n</ul>\n<p>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x5904;&#x7406;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x7684;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x62E6;&#x622A;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x7684;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#x5904;&#x7406;&#x89E6;&#x6478;&#x51B2;&#x7A81;&#x7684;&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x4E0D;&#x7528;&#x7BA1;&#xFF0C;&#x81F3;&#x4E8E;&#x524D;&#x4E24;&#x4E2A;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5411;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x7528;&#x5230;&#x7684;<code>GestureDetectorCompat</code>&#x4F20;&#x9012;<code>MotionEvent</code>&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x89E6;&#x6478;&#x7684;&#x5750;&#x6807;,&#x6700;&#x540E;&#x518D;&#x5B9A;&#x4E49;&#x4E2A;<code>abstract</code>&#x56DE;&#x8C03;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">public abstract class OnItemTouchListener implements RecyclerView.OnItemTouchListener {</div><div class=\"line\"></div><div class=\"line\">    private GestureDetectorCompat mGestureDetectorCompat;</div><div class=\"line\">    private RecyclerView mRecyclerView;</div><div class=\"line\"></div><div class=\"line\">    public OnItemTouchListener(RecyclerView recyclerView) {</div><div class=\"line\">        mRecyclerView = recyclerView;</div><div class=\"line\">        mGestureDetectorCompat = new GestureDetectorCompat(mRecyclerView.getContext(),</div><div class=\"line\">                new MyGestureListener());</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onTouchEvent(RecyclerView rv, MotionEvent e) {</div><div class=\"line\">        mGestureDetectorCompat.onTouchEvent(e);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public boolean onInterceptTouchEvent(RecyclerView rv, MotionEvent e) {</div><div class=\"line\">        mGestureDetectorCompat.onTouchEvent(e);</div><div class=\"line\">        return false;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onRequestDisallowInterceptTouchEvent(boolean disallowIntercept) {</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public abstract void onItemClick(RecyclerView.ViewHolder vh);</div></pre></td></tr></table></figure>\n<h2 id=\"GestureDetectorCompat\"><a href=\"#GestureDetectorCompat\" class=\"headerlink\" title=\"GestureDetectorCompat\"></a>GestureDetectorCompat</h2><p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5B9E;&#x4F8B;&#x5316;&#x4E86;<code>GestureDetectorCompat</code>&#x7C7B;&#x5176;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x624B;&#x52BF;&#x76D1;&#x542C;<code>OnGestureListener</code>&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;&#x7C7B;<code>SimpleOnGestureListener</code>&#x5B83;&#x91CC;&#x9762;&#x5B9E;&#x73B0;&#x7684;&#x90FD;&#x7684;&#x7A7A;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x6267;&#x884C;&#x6211;&#x4EEC;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"SimpleOnGestureListener\"><a href=\"#SimpleOnGestureListener\" class=\"headerlink\" title=\"SimpleOnGestureListener\"></a>SimpleOnGestureListener</h3><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;</p>\n<ul>\n<li>onSingleTapUp</li>\n<li>onLongPress</li>\n</ul>\n<p>&#x5176;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x7B80;&#x5355;&#x7684;&#x70B9;&#x51FB;&#x5C4F;&#x5E55;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F;&#x957F;&#x6309;&#x5C4F;&#x5E55;&#x65F6;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4ECE;&#x524D;&#x9762;<code>OnItemTouchListener</code>&#x4F20;&#x8FC7;&#x6765;&#x7684;<code>MotionEvent</code>&#x83B7;&#x53D6;&#x70B9;&#x51FB;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x4F4D;&#x7F6E;&#x4F7F;&#x7528;<code>RecyclerView</code>&#x7684;<code>findChildViewUnder</code>&#x83B7;&#x53D6;&#x5230;&#x70B9;&#x51FB;&#x7684;<code>ItemView</code>,&#x518D;&#x901A;&#x8FC7;<code>RecyclerView</code>&#x7684;<code>getChildViewHolder</code>&#x83B7;&#x53D6;<code>ItemView</code>&#x7684;<code>ViewHolder</code>&#x6700;&#x540E;&#x518D;&#x8C03;&#x7528;<code>OnItemClick</code>&#x65B9;&#x6CD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">private class MyGestureListener extends GestureDetector.SimpleOnGestureListener {</div><div class=\"line\">        @Override</div><div class=\"line\">        public boolean onSingleTapUp(MotionEvent e) {</div><div class=\"line\">            View childe = mRecyclerView.findChildViewUnder(e.getX(), e.getY());</div><div class=\"line\">            if (childe != null) {</div><div class=\"line\">                RecyclerView.ViewHolder VH = mRecyclerView.getChildViewHolder(childe);</div><div class=\"line\">                onItemClick(VH);</div><div class=\"line\">            }</div><div class=\"line\">            return true;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        @Override</div><div class=\"line\">        public void onLongPress(MotionEvent e) {</div><div class=\"line\">            View childe = mRecyclerView.findChildViewUnder(e.getX(), e.getY());</div><div class=\"line\">            if (childe != null) {</div><div class=\"line\">                RecyclerView.ViewHolder VH = mRecyclerView.getChildViewHolder(childe);</div><div class=\"line\">                onItemClick(VH);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x597D;&#x4E86;&#x6574;&#x4E2A;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x770B;&#x4E86;&#x4EE5;&#x540E;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x66F4;&#x9AD8;&#x5927;&#x4E0A;&#x4E86;&#x5462;&#x3002;&#x5982;&#x679C;&#x5BF9;<code>RecyclerView</code>&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x6211;&#x524D;&#x9762;&#x7684;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<a href=\"http://idisfkj.github.io/2016/04/02/RecyclerView%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/\" target=\"_blank\" rel=\"external\">RecyclerView&#x6DF1;&#x5165;&#x6D45;&#x51FA;</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(四)","url":"https://www.rousetime.com/2016/05/15/Android高仿微信之mvp实现-四/","content":"<p>&#x524D;&#x9762;&#x628A;&#x804A;&#x5929;&#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x90FD;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x6700;&#x8FD1;&#x6709;&#x70B9;&#x5FD9;&#xFF0C;&#x56E0;&#x4E3A;&#x5FEB;&#x5230;&#x5B66;&#x671F;&#x672B;&#x4E86;&#xFF0C;&#x8003;&#x8BD5;&#x5C31;&#x6765;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x9762;&#x53EF;&#x80FD;&#x4F1A;&#x6162;&#x70B9;&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x53CD;&#x6620;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#x63D0;&#x9192;&#xFF0C;&#x6240;&#x4EE5;&#x62BD;&#x4E86;&#x70B9;&#x65F6;&#x95F4;&#x628A;&#x804A;&#x5929;&#x7684;&#x63D0;&#x9192;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x4E86;&#x4E0B;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x3002;</p>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x6211;&#x8FD9;&#x91CC;&#x7528;&#x5230;&#x5F97;&#x539F;&#x7406;&#x4E3B;&#x8981;&#x5C31;&#x4E24;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;</p>\n<ul>\n<li>Notification</li>\n<li>BadgeView</li>\n</ul>\n<p>&#x53EA;&#x8981;&#x4F60;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E24;&#x9879;&#x4EE5;&#x540E;&#x7684;&#x6D88;&#x606F;&#x63D0;&#x9192;&#x795E;&#x9A6C;&#x7684;&#x90FD;&#x80FD;&#x8F7B;&#x677E;&#x641E;&#x5B9A;&#x3002;&#x9996;&#x5148;&#x6765;&#x89E3;&#x91CA;&#x4E0B;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x5BF9;&#x4E8E;<strong>Notification</strong>&#x6211;&#x60F3;&#x5E94;&#x8BE5;&#x5F88;&#x591A;&#x90FD;&#x63A5;&#x89E6;&#x4E86;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E0B;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5B83;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x6D88;&#x606F;&#x901A;&#x77E5;&#x6846;&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x4E0D;&#x8FC7;&#x5176;&#x4E2D;&#x7684;&#x4F7F;&#x7528;&#x8981;&#x6CE8;&#x610F;&#x51E0;&#x70B9;&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x8BE6;&#x7EC6;&#x6307;&#x51FA;&#x3002;&#x81F3;&#x4E8E;<strong>BadgeView</strong>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x770B;&#x5230;&#x7684;&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x672A;&#x8BFB;&#x6D88;&#x606F;&#x6570;&#x3002;</p>\n<blockquote>\n<p><em>&#x539F;&#x7406;&#x4ECB;&#x7ECD;&#x5B8C;&#x4E86;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x770B;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\"><a href=\"#&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;\"></a>&#x901A;&#x77E5;&#x680F;&#x7684;&#x663E;&#x793A;</h2><p>&#x8FD9;&#x91CC;&#x9664;&#x4E86;<strong>Notification</strong>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x662F;<strong>PendingIntent</strong>&#xFF08;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;&#xFF09;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x540E;&#x7684;&#x64CD;&#x4F5C;</p>\n<h3 id=\"&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\"><a href=\"#&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\" class=\"headerlink\" title=\"&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent\"></a>&#x5EF6;&#x8FDF;&#x610F;&#x56FE;PendingIntent</h3><p>&#x65E2;&#x7136;&#x662F;&#x610F;&#x56FE;&#x81EA;&#x7136;&#x8981;&#x4F7F;&#x7528;Intent&#x6307;&#x5B9A;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x540E;&#x7684;&#x5E94;&#x7528;&#x64CD;&#x4F5C;</p>\n<h4 id=\"&#x914D;&#x7F6E;Intent\"><a href=\"#&#x914D;&#x7F6E;Intent\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;Intent\"></a>&#x914D;&#x7F6E;Intent</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Intent intent = new Intent(App.getAppContext(), MainActivity.class);</div><div class=\"line\">                //&#x9632;&#x6B62;&#x5F00;&#x542F;&#x91CD;&#x590D;&#x7684;Activity</div><div class=\"line\">                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</div><div class=\"line\">                Bundle bundle = new Bundle();</div><div class=\"line\">                //&#x9632;&#x6B62;pendingIntent&#x76F8;&#x540C;</div><div class=\"line\">                intent.setData(Uri.parse(&quot;message://&quot; + regId));</div><div class=\"line\">                bundle.putInt(&quot;_id&quot;, _id);</div><div class=\"line\">                intent.putExtras(bundle);</div></pre></td></tr></table></figure>\n<p>&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x70B9;&#x51FB;&#x90FD;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x4E3B;&#x754C;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4E3B;&#x754C;&#x9762;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x4E0B;&#x6211;&#x524D;&#x9762;&#x8BF4;&#x7684;&#x6CE8;&#x610F;&#x70B9;&#x3002;</p>\n<h5 id=\"&#x6CE8;&#x610F;&#x70B9;\"><a href=\"#&#x6CE8;&#x610F;&#x70B9;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x70B9;\"></a>&#x6CE8;&#x610F;&#x70B9;</h5><h6 id=\"&#x7B2C;&#x4E00;&#x70B9;\"><a href=\"#&#x7B2C;&#x4E00;&#x70B9;\" class=\"headerlink\" title=\"&#x7B2C;&#x4E00;&#x70B9;\"></a>&#x7B2C;&#x4E00;&#x70B9;</h6><p><code>intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</code></p>\n<p>&#x8FD9;&#x53E5;&#x4EE3;&#x7801;&#x662F;&#x9632;&#x6B62;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x540E;&#x5F00;&#x542F;&#x6307;&#x5B9A;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x540E;&#x9000;&#x6808;&#x65F6;&#x754C;&#x9762;&#x91CD;&#x590D;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x6E05;&#x7A7A;&#x6808;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x91CD;&#x590D;&#x521B;&#x5EFA;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x53EF;&#x80FD;&#x8FD9;&#x91CC;&#x6709;&#x4EBA;&#x4F1A;&#x8BF4;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>launchMode</strong>&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x6CA1;&#x9519;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;signalTop&#x6216;&#x8005;&#x5176;&#x5B83;&#x7684;&#x5982;<strong>singleTask</strong>&#x80FD;&#x89E3;&#x51B3;&#x91CD;&#x590D;&#x754C;&#x9762;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#x5982;<strong>signalTop</strong>&#x5F53;&#x5728;&#x6808;&#x9876;&#x662F;&#x5E76;&#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x8BE5;<strong>Activity</strong>&#x800C;&#x662F;&#x4F1A;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x539F;&#x6765;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x9875;&#x9762;&#x4E0D;&#x4F1A;&#x66F4;&#x65B0;&#x672A;&#x8BFB;&#x6D88;&#x606F;&#x6570;&#x3002;</p>\n<h6 id=\"&#x7B2C;&#x4E8C;&#x70B9;\"><a href=\"#&#x7B2C;&#x4E8C;&#x70B9;\" class=\"headerlink\" title=\"&#x7B2C;&#x4E8C;&#x70B9;\"></a>&#x7B2C;&#x4E8C;&#x70B9;</h6><p><code>intent.setData(Uri.parse(&quot;message://&quot; + regId));</code><br>&#x4E3A;<strong>intent</strong>&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x867D;&#x7136;<strong>PendingIntent</strong>&#x63D0;&#x4F9B;&#x4E86;&#x56DB;&#x4E2A;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x90FD;&#x662F;&#x9488;&#x5BF9;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x7684;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;</p>\n<ul>\n<li>FLAG_ONE_SHOT <code>&#x610F;&#x601D;&#x5C31;&#x662F;&#x4F60;&#x8BBE;&#x7F6E;&#x7684;&#x5EF6;&#x8FDF;&#x610F;&#x56FE;&#x53EA;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x8BF4;&#x660E;&#x4EE5;&#x540E;&#x901A;&#x8FC7;&#x5B83;&#x7684;&#x90FD;&#x4E0D;&#x4F1A;&#x5B9E;&#x73B0;</code></li>\n<li>FLAG_NO_CREATE <code>&#x8FD9;&#x4E2A;&#x66F4;&#x7B80;&#x5355;&#x4E86;&#x5C31;&#x662F;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x4E86;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;null</code> </li>\n<li>FLAG_CANCEL_CURRENT <code>&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x5B58;&#x5728;&#x5C31;&#x53D6;&#x6D88;&#x539F;&#x6765;&#x7684;&#xFF0C;&#x4F7F;&#x7528;&#x65B0;&#x7684;&#xFF0C;&#x65B0;&#x7684;&#x53EA;&#x6539;&#x53D8;&#x8981;&#x4F20;&#x9012;&#x7684;&#x6570;&#x636E;</code></li>\n<li>FLAG_UPDATE_CURRENT <code>&#x8DDF;&#x4E0A;&#x9762;&#x7684;&#x76F8;&#x5DEE;&#x4E0D;&#x5927;&#xFF0C;&#x5B83;&#x4F1A;&#x66F4;&#x65B0;&#x539F;&#x6765;&#x7684;&#x6570;&#x636E;</code></li>\n</ul>\n<p>&#x4E0A;&#x9762;&#x7684;&#x5BF9;&#x8981;&#x5F00;&#x542F;&#x4E0D;&#x540C;&#x7684;&#x754C;&#x9762;&#x90FD;&#x6CA1;&#x6709;&#x4F5C;&#x7528;&#xFF0C;&#x90FD;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6765;&#x7684;&#x610F;&#x56FE;&#xFF0C;&#x5BFC;&#x81F4;&#x4E0D;&#x540C;&#x7684;&#x4EBA;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x65F6;&#xFF0C;&#x70B9;&#x51FB;&#x901A;&#x77E5;&#x680F;&#x7684;&#x4E0D;&#x540C;&#x901A;&#x77E5;&#x663E;&#x793A;&#x540C;&#x4E00;&#x4E2A;&#x804A;&#x5929;&#x754C;&#x9762;&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;<strong>regId</strong>&#x505A;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x5C31;&#x80FD;&#x6D88;&#x9664;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h4 id=\"&#x521B;&#x5EFA;PendingIntent\"><a href=\"#&#x521B;&#x5EFA;PendingIntent\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;PendingIntent\"></a>&#x521B;&#x5EFA;PendingIntent</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">PendingIntent pi = PendingIntent.getActivity(App.getAppContext(), 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\"><a href=\"#&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\" class=\"headerlink\" title=\"&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;\"></a>&#x901A;&#x77E5;Notification&#x6784;&#x5EFA;</h3><p>&#x8FD9;&#x91CC;&#x6211;&#x5C31;&#x76F4;&#x63A5;&#x8D34;&#x4EE3;&#x7801;&#x4E86;&#x90FD;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Notification notification = new Notification.Builder(App.getAppContext())</div><div class=\"line\">                        .setSmallIcon(R.drawable.icon)</div><div class=\"line\">                        .setAutoCancel(true)</div><div class=\"line\">                        .setTicker(&quot;&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x6709;&#x65B0;&#x6D88;&#x606F;&quot;)</div><div class=\"line\">                        .setContentTitle(userName)</div><div class=\"line\">                        .setContentText(&quot;[&quot; + unReadNum + &quot;&#x6761;] &quot; + rMessage)</div><div class=\"line\">                        .setDefaults(Notification.DEFAULT_SOUND | Notification.DEFAULT_LIGHTS)</div><div class=\"line\">                        .setContentIntent(pi)</div><div class=\"line\">                        .setWhen(System.currentTimeMillis())</div><div class=\"line\">                        .build();</div></pre></td></tr></table></figure>\n<h3 id=\"&#x53D1;&#x9001;&#x901A;&#x77E5;\"><a href=\"#&#x53D1;&#x9001;&#x901A;&#x77E5;\" class=\"headerlink\" title=\"&#x53D1;&#x9001;&#x901A;&#x77E5;\"></a>&#x53D1;&#x9001;&#x901A;&#x77E5;</h3><p>&#x83B7;&#x53D6;&#x7CFB;&#x7EDF;&#x901A;&#x77E5;&#x7BA1;&#x7406;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">manager = (NotificationManager) App.getAppContext().getSystemService(Context.NOTIFICATION_SERVICE);</div></pre></td></tr></table></figure>\n<p>&#x53D1;&#x9001;&#x901A;&#x77E5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">manager.notify(_id, notification);</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x901A;&#x77E5;&#x680F;&#x7684;&#x6784;&#x5EFA;&#x5C31;&#x5B8C;&#x7F8E;&#x7ED3;&#x675F;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\"><a href=\"#&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;\"></a>&#x6D88;&#x606F;&#x6570;&#x7684;&#x663E;&#x793A;</h2><p>&#x65E2;&#x7136;&#x524D;&#x9762;&#x90FD;&#x8BF4;&#x4E86;&#x501F;&#x52A9;&#x4E86;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x73B0;&#x5C31;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x628A;&#x5B83;&#x603B;&#x7ED3;&#x6210;&#x4E09;&#x6B65;</p>\n<h3 id=\"&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\"><a href=\"#&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;BadgeView&#x5B9E;&#x4F8B;\"></a>&#x521B;&#x5EFA;<strong>BadgeView</strong>&#x5B9E;&#x4F8B;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">BadgeView badgeView = new BadgeView(context, view);</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<strong>view</strong>&#x4EE3;&#x8868;&#x4F60;&#x8981;&#x4F9D;&#x9644;&#x7684;&#x89C6;&#x56FE;</p>\n<h3 id=\"&#x6784;&#x5EFA;&#x6587;&#x672C;\"><a href=\"#&#x6784;&#x5EFA;&#x6587;&#x672C;\" class=\"headerlink\" title=\"&#x6784;&#x5EFA;&#x6587;&#x672C;\"></a>&#x6784;&#x5EFA;&#x6587;&#x672C;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">badgeView.setTextColor(Color.WHITE);</div><div class=\"line\">        badgeView.setText(textValue);</div><div class=\"line\">        badgeView.setBackground(context.getResources().getDrawable(R.drawable.dot_bg));</div><div class=\"line\">        badgeView.setTextSize(12);</div><div class=\"line\">        badgeView.setBadgePosition(BadgeView.POSITION_TOP_RIGHT);</div><div class=\"line\">        badgeView.setBadgeMargin(0, 0);</div></pre></td></tr></table></figure>\n<p>&#x4E0A;&#x9762;&#x7684;&#x80AF;&#x5B9A;&#x6CA1;&#x95EE;&#x9898;&#x5427;&#xFF0C;&#x7B80;&#x5355;&#x660E;&#x4E86;&#xFF0C;&#x663E;&#x793A;&#x4F4D;&#x7F6E;<code>badgeView.setBadgePosition</code>&#x9ED8;&#x8BA4;&#x662F;&#x53F3;&#x4E0A;&#x89D2;&#xFF0C;&#x4F46;&#x6211;&#x611F;&#x89C9;&#x6548;&#x679C;&#x4E0D;&#x660E;&#x663E;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x5F97;&#x6548;&#x679C;&#xFF0C;&#x6CA1;&#x6709;&#x50CF;&#x5FAE;&#x4FE1;&#x90A3;&#x6837;&#x89C6;&#x56FE;&#x51FA;&#x53BB;&#x4E86;&#x90E8;&#x5206;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x90FD;&#x540E;&#x9762;&#x770B;&#x4E86;&#x4E0B;&#x6E90;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;<code>badgeView.setBadgeMargin(0, 0);</code>&#x80FD;&#x4F7F;&#x8BE5;&#x6548;&#x679C;&#x660E;&#x663E;&#x4E9B;&#x3002;</p>\n<h3 id=\"&#x663E;&#x793A;\"><a href=\"#&#x663E;&#x793A;\" class=\"headerlink\" title=\"&#x663E;&#x793A;\"></a>&#x663E;&#x793A;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">badgeView.show();</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5230;&#x8FD9;&#x91CC;&#x6240;&#x6709;&#x7684;&#x6D88;&#x606F;&#x63D0;&#x9192;&#x529F;&#x80FD;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x770B;&#x4E0B;&#x6548;&#x679C;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/05/15/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x56DB;/1.gif\" alt=\"&#x6548;&#x679C;\"></p>\n<h1 id=\"&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\"><a href=\"#&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;\"></a>&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x7AE0;</h1><p><a href=\"https://idisfkj.github.io/2016/04/23/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E00;)</a><br><a href=\"https://idisfkj.github.io/2016/05/01/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%BA%8C/\" target=\"_blank\" rel=\"external\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E8C;)</a><br><a href=\"https://idisfkj.github.io/2016/05/08/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%89/\" target=\"_blank\" rel=\"external\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E09;)</a></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(三)","url":"https://www.rousetime.com/2016/05/08/Android高仿微信之mvp实现-三/","content":"<p>&#x524D;&#x9762;&#x8BF4;&#x5230;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5C0F;&#x7C73;&#x7684;&#x63A8;&#x9001;&#x6765;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x804A;&#x5929;&#x7CFB;&#x7EDF;&#xFF0C;&#x867D;&#x7136;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4F60;&#x4EEC;&#x6765;&#x8BF4;&#x60F3;&#x8981;&#x771F;&#x6B63;&#x7684;&#x4F53;&#x9A8C;&#x6548;&#x679C;&#x5C31;&#x53EA;&#x80FD;&#x8DDF;&#x6211;&#x4E92;&#x52A8;&#xFF0C;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x7F3A;&#x70B9;&#xFF0C;&#x6211;&#x6700;&#x8FD1;&#x5B8C;&#x5584;&#x4E86;&#x4E0B;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x6DFB;&#x52A0;&#x670B;&#x53CB;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x62FF;&#x4E24;&#x4E2A;&#x6D4B;&#x8BD5;&#x673A;&#x4E92;&#x76F8;&#x6D4B;&#x8BD5;&#x3002;&#x5C31;&#x80FD;&#x4F53;&#x9A8C;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0B;&#x9762;&#x8FD8;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x4E0B;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x7684;&#x5C31;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x6211;&#x8FD9;&#x91CC;&#x4E0D;&#x8BB2;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x65B9;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x6709;&#x70B9;&#x591A;&#xFF0C;&#x5C31;&#x4E0D;&#x5230;&#x8FD9;&#x91CC;&#x5C55;&#x5F00;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x5C55;&#x5F00;&#x3002;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;<a href=\"https://idisfkj.github.io/2016/05/01/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%BA%8C/\" target=\"_blank\" rel=\"external\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E8C;)</a>&#x5DF2;&#x7ECF;&#x8BB2;&#x5230;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8BE5;&#x8F6F;&#x4EF6;&#x662F;&#x5FC5;&#x987B;&#x5148;&#x6CE8;&#x518C;&#xFF0C;&#x5728;&#x6CE8;&#x518C;&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5411;&#x6240;&#x6709;&#x5B89;&#x88C5;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x8BBE;&#x5907;&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x6761;&#x5305;&#x88C5;&#x4E86;&#x6211;&#x4EEC;&#x8BBE;&#x5907;&#x6807;&#x8BC6;<strong>&#xFF08;regId&#xFF09;</strong>&#x3001;&#x7528;&#x6237;&#x540D;<strong>&#xFF08;userName&#xFF09;</strong>&#x3001;&#x8D26;&#x53F7;<strong>&#xFF08;userPhone&#xFF09;</strong>&#x3002;&#x53EA;&#x8981;&#x662F;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x628A;&#x5B83;&#x5B58;&#x50A8;&#x5230;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;<strong>register</strong>&#x8868;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C31;&#x662F;&#x4ECE;<strong>register</strong>&#x4E2D;&#x901A;&#x8FC7;<strong>userPhone</strong>&#x6807;&#x8BC6;&#x67E5;&#x8BE2;&#x4F60;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x670B;&#x53CB;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5B58;&#x5728;&#x5C31;&#x663E;&#x793A;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E5F;&#x8981;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x8BE5;&#x597D;&#x53CB;&#xFF0C;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x5C31;&#x6267;&#x884C;&#x6700;&#x540E;&#x7684;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x5411;&#x8BE5;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x7684;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x628A;&#x8BE5;&#x7528;&#x6237;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x6DFB;&#x52A0;&#x5230;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x754C;&#x9762;&#x7684;&#x6570;&#x636E;&#x8868;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x53D6;&#x4E86;&#x4E00;&#x70B9;&#x5DE7;&#xFF0C;&#x53EA;&#x8981;&#x5BF9;&#x65B9;&#x63A5;&#x53D7;&#x5230;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x65B9;&#x5C31;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E86;&#x81EA;&#x5DF1;&#x4E3A;&#x597D;&#x53CB;&#xFF0C;&#x65E0;&#x9700;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x7684;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0B;&#x9762;&#x5C55;&#x793A;&#x4E00;&#x70B9;&#x4EE3;&#x7801;&#x3002;</p>\n<h2 id=\"&#x6DFB;&#x52A0;\"><a href=\"#&#x6DFB;&#x52A0;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;\"></a>&#x6DFB;&#x52A0;</h2><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x8F93;&#x5165;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x8D26;&#x6237;&#x53F7;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>MVP</strong>&#x6A21;&#x5F0F;&#xFF0C;&#x4EE3;&#x7801;&#x8FC7;&#x591A;&#x6240;&#x4EE5;&#x6211;&#x8FD9;&#x91CC;&#x628A;&#x4E00;&#x4E9B;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x8D34;&#x51FA;&#x4E86;,&#x5177;&#x4F53;&#x7684;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6E90;&#x7801;&#x3002;</p>\n<p><strong>View</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface AddFriendsView {</div><div class=\"line\">    void showSearch();</div><div class=\"line\"></div><div class=\"line\">    void goneSearch();</div><div class=\"line\"></div><div class=\"line\">    void jumpSearchResult(String text);</div><div class=\"line\"></div><div class=\"line\">    void changeText(CharSequence text);</div><div class=\"line\"></div><div class=\"line\">    void showToast(String text);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Presenter</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface AddFriendsPresenter {</div><div class=\"line\">    void switchView(CharSequence text);</div><div class=\"line\"></div><div class=\"line\">    void switchActicity(TextView searchContent, RegisterDataHelper helper);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x56E0;&#x4E3A;&#x8BE5;&#x754C;&#x9762;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x754C;&#x9762;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;Model</em></p>\n</blockquote>\n<h2 id=\"&#x641C;&#x5BFB;\"><a href=\"#&#x641C;&#x5BFB;\" class=\"headerlink\" title=\"&#x641C;&#x5BFB;\"></a>&#x641C;&#x5BFB;</h2><p>&#x8FD9;&#x91CC;&#x4E5F;&#x662F;&#x63A5;&#x53E3;</p>\n<p><strong>View</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultView {</div><div class=\"line\">    void succeedToFinish();</div><div class=\"line\"></div><div class=\"line\">    void hideProgressDialog(ProgressDialog pd);</div><div class=\"line\"></div><div class=\"line\">    void showSucceedToast();</div><div class=\"line\"></div><div class=\"line\">    void showErrorToast();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Presenter</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultPresenter {</div><div class=\"line\">    void checkSelection(Context context, String number, View view, SearchResultAdapter mAdapter);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p><strong>Model</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface SearchResultModel {</div><div class=\"line\">    void buildDialog(Context context, String number, View view, SearchResultAdapter adapter,SearchResultModelImp.requestListener listener);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h2 id=\"&#x903B;&#x8F91;\"><a href=\"#&#x903B;&#x8F91;\" class=\"headerlink\" title=\"&#x903B;&#x8F91;\"></a>&#x903B;&#x8F91;</h2><p>&#x4E0B;&#x9762;&#x662F;&#x6267;&#x884C;&#x6DFB;&#x52A0;&#x7684;&#x4E3B;&#x8981;&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void buildDialog(final Context context, String number, final View view,</div><div class=\"line\">                            final SearchResultAdapter adapter, final requestListener listener) {</div><div class=\"line\">        new AlertDialog.Builder(context)</div><div class=\"line\">                .setIcon(R.drawable.icon)</div><div class=\"line\">                .setTitle(R.string.dialog_tip)</div><div class=\"line\">                .setMessage(String.format(context.getResources().getString(R.string.dialog_message), number))</div><div class=\"line\">                .setPositiveButton(R.string.dialog_positive, new DialogInterface.OnClickListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onClick(DialogInterface dialog, int which) {</div><div class=\"line\">                        Cursor cursor = adapter.getCursor();</div><div class=\"line\">                        if (cursor.moveToPosition(view.getId())) {</div><div class=\"line\">                            String number = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.NUMBER);</div><div class=\"line\">                            String regId = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.REGID);</div><div class=\"line\">                            String userName = CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.USER_NAME);</div><div class=\"line\"></div><div class=\"line\">                            WXDataHelper wxHelper = new WXDataHelper(context);</div><div class=\"line\">                            Cursor wxCursor = wxHelper.query(number, regId, userName);</div><div class=\"line\">                            if (wxCursor.getCount() &gt; 0 || (number.equals(SPUtils.getString(&quot;userPhone&quot;))</div><div class=\"line\">                                    &amp;&amp; regId.equals(SPUtils.getString(&quot;regId&quot;)))) {</div><div class=\"line\">                                ToastUtils.showShort(&quot;&#x4F60;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;&#x8BE5;&#x597D;&#x53CB;&#xFF01;&quot;);</div><div class=\"line\">                            } else {</div><div class=\"line\">                                //&#x53D1;&#x9001;&#x6DFB;&#x52A0;&#x597D;&#x53CB;&#x8BF7;&#x6C42;</div><div class=\"line\">                                pd = ProgressDialog.show(context, &quot;&#x6DFB;&#x52A0;&#x8BF7;&#x6C42;&#x4E2D;...&quot;, &quot;&#x8BF7;&#x7A0D;&#x540E;...&quot;, true);</div><div class=\"line\">                                request(userName, number, regId, listener, cursor);</div><div class=\"line\">                            }</div><div class=\"line\">                            wxCursor.close();</div><div class=\"line\">                        }</div><div class=\"line\">                    }</div><div class=\"line\">                })</div><div class=\"line\">                .setNegativeButton(R.string.dialog_negative, new DialogInterface.OnClickListener() {</div><div class=\"line\">                    @Override</div><div class=\"line\">                    public void onClick(DialogInterface dialog, int which) {</div><div class=\"line\"></div><div class=\"line\">                    }</div><div class=\"line\">                }).show();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6700;&#x540E;&#x770B;&#x4E0B;&#x64CD;&#x4F5C;&#x6548;&#x679C;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/05/08/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E09;/1.gif\" alt=\"picture\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(二)","url":"https://www.rousetime.com/2016/05/01/Android高仿微信之mvp实现-二/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x6B21;&#x8BF4;&#x4E86;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x6846;&#x67B6;&#x6784;&#x67B6;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x89E3;&#x91CA;&#x4E86;&#x4E0B;<strong>MVP</strong>&#x7684;&#x539F;&#x7406;&#x5B9E;&#x73B0;&#x3002;&#x867D;&#x7136;&#x4E0A;&#x6B21;&#x7684;&#x529F;&#x80FD;&#x6CA1;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x4E3B;&#x8981;&#x662F;&#x628A;&#x6846;&#x67B6;&#x642D;&#x597D;&#xFF0C;&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x8FDB;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x4E0B;&#x6211;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#xFF1A;<a href=\"https://idisfkj.github.io/2016/04/23/Android%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E4%B9%8Bmvp%E5%AE%9E%E7%8E%B0-%E4%B8%80/\" target=\"_blank\" rel=\"external\">Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;(&#x4E00;)</a><br>&#x597D;&#x4E86;&#xFF0C;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x8981;&#x4ECB;&#x7ECD;&#x7684;&#x662F;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x529F;&#x80FD;&#x7684;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x3002;</p>\n<h2 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h2><p>&#x5176;&#x5B9E;&#x77E5;&#x9053;&#x4E86;&#x539F;&#x7406;&#x4F60;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x5B83;&#x662F;&#x591A;&#x4E48;&#x7684;&#x7B80;&#x5355;&#x3002;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#x5668;&#x6240;&#x4EE5;&#x662F;&#x57FA;&#x4E8E;&#x63A8;&#x9001;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x7F51;&#x4E0A;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8D44;&#x6599;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x57FA;&#x4E8E;&#x767E;&#x5EA6;&#x4E91;&#x7684;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x57FA;&#x4E8E;&#x5C0F;&#x7C73;&#x63A8;&#x9001;&#x6765;&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x7684;&#x4F20;&#x9012;&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;&#x73B0;&#x5728;&#x63A8;&#x9001;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#x63A8;&#x9001;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x662F;&#x5148;&#x53BB;&#x7B80;&#x5355;&#x7684;&#x8865;&#x4E0B;&#x529F;&#x8BFE;&#x5728;&#x6765;&#x770B;&#x5C31;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x4E86;&#x89E3;&#x4E0B;&#x9762;&#x8BF4;&#x7684;&#x3002;</p>\n<p>&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x6D88;&#x606F;&#x7684;&#x4F20;&#x9012;&#xFF0C;&#x5C31;&#x8981;&#x6709;&#x53D1;&#x9001;&#x4E0E;&#x63A5;&#x6536;&#x529F;&#x80FD;&#xFF0C;&#x9996;&#x5148;&#x5BF9;&#x4E8E;&#x63A5;&#x6536;so easy &#x4E86;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5DF1;&#x7684;<strong>Android</strong>&#x5E94;&#x7528;&#x4E2D;&#x96C6;&#x6210;&#x5C0F;&#x7C73;&#x7684;I<strong>SDK</strong>(&#x6211;&#x8FD9;&#x91CC;&#x662F;&#x4EE5;&#x5C0F;&#x7C73;&#x63A8;&#x9001;&#x4E3A;&#x4F8B;&#x7684;)&#x3002;&#x5C31;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x6536;&#x529F;&#x80FD;&#xFF0C;&#x5BF9;&#x4E8E;&#x63A5;&#x6536;&#x6211;&#x5206;&#x4E86;&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x79CD;&#x7684;&#x6B63;&#x5E38;&#x804A;&#x5929;&#x5F97;&#x4FE1;&#x606F;&#xFF0C;&#x800C;&#x53E6;&#x4E00;&#x79CD;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x6CE8;&#x518C;&#x65F6;&#x53D1;&#x9001;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x79CD;&#x6D88;&#x606F;&#x6211;&#x4EEC;&#x8981;&#x6839;&#x636E;&#x7528;&#x6237;&#x8BBE;&#x5907;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x4E0E;&#x7528;&#x6237;&#x8D26;&#x53F7;&#x6765;&#x5B58;&#x50A8;&#x4E0B;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x4E3A;&#x4EE5;&#x540E;&#x663E;&#x793A;&#x4E0D;&#x540C;&#x7528;&#x6237;&#x804A;&#x5929;&#x8BB0;&#x5F55;&#x3002;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2D;&#xFF0C;&#x662F;&#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x65F6;&#x5FC5;&#x987B;&#x5148;&#x6CE8;&#x518C;&#xFF0C;&#x4E00;&#x65E6;&#x6CE8;&#x518C;&#x6210;&#x529F;&#x5C31;&#x4F1A;&#x5411;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x53D1;&#x9001;&#x4E00;&#x6761;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#xFF0C;&#x8BE5;&#x6D88;&#x606F;&#x5305;&#x62EC;&#x7528;&#x6237;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#x4E0E;&#x8BBE;&#x5907;&#x6807;&#x8BC6;&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x4FE1;&#x606F;&#x65F6;&#x95F4;&#x7684;&#x6709;&#x6548;&#x65F6;&#x95F4;&#x4E4B;&#x5185;&#xFF0C;&#x6CE8;&#x518C;&#x4E86;&#x5F97;&#x7528;&#x6237;&#x5C31;&#x80FD;&#x63A5;&#x6536;&#x8BE5;&#x6CE8;&#x518C;&#x6D88;&#x606F;&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x8EAB;&#x4EFD;&#x8BC6;&#x522B;&#xFF0C;&#x5BF9;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x6DFB;&#x52A0;&#x90FD;&#x662F;&#x91CD;&#x8981;&#x7684;&#x6807;&#x8BC6;&#x3002;&#x8BF4;&#x4E86;&#x63A5;&#x6536;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x53D1;&#x9001;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x5206;&#x4E24;&#x79CD;&#xFF0C;&#x53EA;&#x662F;&#x65CB;&#x8F6C;&#x4E00;&#x4E0B;&#x4F4D;&#x7F6E;&#x800C;&#x5DF2;&#x3002;</p>\n<h2 id=\"&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\"><a href=\"#&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK\"></a>&#x914D;&#x7F6E;&#x5C0F;&#x7C73;SDK</h2><p>&#x9996;&#x5148;&#x8FDB;&#x5165;&#x5C0F;&#x7C73;&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#xFF0C;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x5E94;&#x7528;&#x5F00;&#x542F;&#x63A8;&#x9001;&#x529F;&#x80FD;&#xFF0C;&#x7136;&#x540E;&#x4E0B;&#x8F7D;<a href=\"http://dev.xiaomi.com/mipush/downpage/\" target=\"_blank\" rel=\"external\">SDK</a>&#x6839;&#x636E;<a href=\"http://dev.xiaomi.com/doc/?p=3080\" target=\"_blank\" rel=\"external\">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x505A;&#x597D;&#x76F8;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x524D;&#x671F;&#x5C31;&#x5927;&#x529F;&#x544A;&#x6210;&#x4E86;&#x3002;</p>\n<blockquote>\n<p><em>&#x5982;&#x679C;&#x6CA1;&#x63A5;&#x89E6;&#x8FC7;&#x7684;&#x53EA;&#x8981;&#x8010;&#x5FC3;&#x770B;&#x6587;&#x6863;&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x6587;&#x6863;&#x5F88;&#x8BE6;&#x7EC6;</em></p>\n</blockquote>\n<h2 id=\"&#x63A5;&#x6536;\"><a href=\"#&#x63A5;&#x6536;\" class=\"headerlink\" title=\"&#x63A5;&#x6536;\"></a>&#x63A5;&#x6536;</h2><p>&#x524D;&#x9762;&#x6211;&#x5DF2;&#x7ECF;&#x8BF4;&#x4E86;&#x63A5;&#x6536;&#x662F;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x524D;&#x9762;&#x914D;&#x7F6E;&#x597D;&#x4E86;&#x5C0F;&#x7C73;&#x7684;<strong>SDK</strong>&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>extends</strong> <strong>PushMessageReceiver</strong>&#x7684;&#x7C7B;&#xFF0C;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x7528;&#x5404;&#x79CD;&#x76F8;&#x5E94;&#x7684;&#x63A5;&#x6536;&#x4FE1;&#x606F;&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;&#x4E86;&#x5FD8;&#x4E86;&#x8BF4;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x91CC;&#x5206;&#x4E3A;&#x4E24;&#x79CD;</p>\n<ul>\n<li>&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#x7684;&#x6D88;&#x606F;</li>\n<li>&#x900F;&#x4F20;&#x6D88;&#x606F;</li>\n</ul>\n<p>&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#x7684;&#x6D88;&#x606F;&#x4E0D;&#x7528;&#x6211;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x81F3;&#x4E8E;&#x900F;&#x4F20;&#x6D88;&#x606F;&#x7B80;&#x5355;&#x70B9;&#x5C31;&#x662F;&#x4E0D;&#x7528;&#x901A;&#x77E5;&#x680F;&#x663E;&#x793A;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x5185;&#x90E8;&#x63A5;&#x6536;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#x3002;</p>\n<p>&#x6211;&#x4EEC;&#x804A;&#x5929;&#x4F7F;&#x7528;&#x7684;&#x5F53;&#x7136;&#x7684;&#x900F;&#x4F20;&#x6D88;&#x606F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;&#x63A5;&#x6536;&#x5230;&#x900F;&#x4F20;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#x5BF9;&#x4E8E;&#x4E24;&#x79CD;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div></pre></td><td class=\"code\"><pre><div class=\"line\">/**</div><div class=\"line\">     * &#x63A5;&#x6536;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x7684;&#x900F;&#x4F20;&#x6D88;&#x606F;</div><div class=\"line\">     *</div><div class=\"line\">     * @param context</div><div class=\"line\">     * @param message</div><div class=\"line\">     */</div><div class=\"line\">    @Override</div><div class=\"line\">    public void onReceivePassThroughMessage(Context context, MiPushMessage message) {</div><div class=\"line\">        mMessage = message.getContent();</div><div class=\"line\">        if (!TextUtils.isEmpty(message.getTopic())) {</div><div class=\"line\">            mTopic = message.getTopic();</div><div class=\"line\">        } else if (!TextUtils.isEmpty(message.getAlias())) {</div><div class=\"line\">            mAlias = message.getAlias();</div><div class=\"line\">        }</div><div class=\"line\">        Intent intent = new Intent();</div><div class=\"line\">        //user information</div><div class=\"line\">        if (mMessage.indexOf(&quot;^&quot;) != -1 &amp;&amp; mMessage.indexOf(&quot;@&quot;) != -1) {</div><div class=\"line\">            int index1 = mMessage.lastIndexOf(&quot;^&quot;);</div><div class=\"line\">            int index2 = mMessage.lastIndexOf(&quot;@&quot;);</div><div class=\"line\">            String userName = mMessage.substring(0, index1);</div><div class=\"line\">            String regId = mMessage.substring(index1 + 1, index2);</div><div class=\"line\">            String number = mMessage.substring(index2 + 1);</div><div class=\"line\"></div><div class=\"line\">            RegisterInfo info = new RegisterInfo();</div><div class=\"line\">            info.setUserName(userName);</div><div class=\"line\">            info.setNumber(number);</div><div class=\"line\">            info.setRegId(regId);</div><div class=\"line\">            RegisterDataHelper helper = new RegisterDataHelper(App.getAppContext());</div><div class=\"line\">            Cursor cursor = helper.query(number, regId);</div><div class=\"line\">            if (cursor != null &amp;&amp; cursor.getCount() &gt; 0) {</div><div class=\"line\">                for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {</div><div class=\"line\">                    if (CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.REGID).equals(regId)</div><div class=\"line\">                            &amp;&amp; CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.NUMBER).equals(number)) {</div><div class=\"line\">                        if (!CursorUtils.formatString(cursor, RegisterDataHelper.RegisterDataInfo.USER_NAME).equals(userName))</div><div class=\"line\">                            // update user information</div><div class=\"line\">                            helper.update(info, number, regId);</div><div class=\"line\">                        cursor.close();</div><div class=\"line\">                        return;</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\">                cursor.close();</div><div class=\"line\">            }</div><div class=\"line\">            // insert user information</div><div class=\"line\">            helper.insert(info);</div><div class=\"line\">            if (SPUtils.getString(&quot;regId&quot;).equals(App.DEVELOPER_ID)){</div><div class=\"line\">                WXDataHelper wxHelper = new WXDataHelper(App.getAppContext());</div><div class=\"line\">                WXItemInfo itemInfo = new WXItemInfo();</div><div class=\"line\">                itemInfo.setRegId(regId);</div><div class=\"line\">                itemInfo.setTitle(userName);</div><div class=\"line\">                itemInfo.setNumber(number);</div><div class=\"line\">                itemInfo.setContent(String.format(App.HELLO_MESSAGE, userName));</div><div class=\"line\">                itemInfo.setCurrentAccount(SPUtils.getString(&quot;userPhone&quot;));</div><div class=\"line\">                itemInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">                wxHelper.insert(itemInfo);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">        } else {</div><div class=\"line\">            // chat information</div><div class=\"line\">            int index1 = mMessage.lastIndexOf(&quot;(&quot;);</div><div class=\"line\">            String rMessage = mMessage.substring(0, index1);</div><div class=\"line\">            String extraMessage = mMessage.substring(index1 + 1);</div><div class=\"line\"></div><div class=\"line\">            int index2 = extraMessage.indexOf(&quot;@&quot;);</div><div class=\"line\">            int index3 = extraMessage.indexOf(&quot;@&quot;, index2 + 1);</div><div class=\"line\">            String receiverNumber = extraMessage.substring(0, index2);</div><div class=\"line\">            String regId = extraMessage.substring(index2 + 1, index3);</div><div class=\"line\">            String sendNumber = extraMessage.substring(index3 + 1);</div><div class=\"line\"></div><div class=\"line\">            ChatMessageInfo chatMessageInfo = new ChatMessageInfo();</div><div class=\"line\">            chatMessageInfo.setMessage(rMessage);</div><div class=\"line\">            chatMessageInfo.setFlag(0);</div><div class=\"line\">            chatMessageInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">            chatMessageInfo.setReceiverNumber(receiverNumber);</div><div class=\"line\">            chatMessageInfo.setRegId(regId);</div><div class=\"line\">            chatMessageInfo.setSendNumber(sendNumber);</div><div class=\"line\"></div><div class=\"line\">            if (App.mNumber.equals(sendNumber) &amp;&amp; App.mRegId.equals(regId)) {</div><div class=\"line\">                //&#x5728;&#x5F53;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;</div><div class=\"line\">                intent.setAction(&quot;com.idisfkj.hightcopywx.chat&quot;);</div><div class=\"line\">                Bundle bundle = new Bundle();</div><div class=\"line\">                bundle.putSerializable(&quot;chatMessageInfo&quot;, chatMessageInfo);</div><div class=\"line\">                intent.putExtras(bundle);</div><div class=\"line\">                App.getAppContext().sendBroadcast(intent);</div><div class=\"line\">            } else {</div><div class=\"line\">                //&#x4E0D;&#x5728;&#x5F53;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;</div><div class=\"line\">                ChatMessageDataHelper helper = new ChatMessageDataHelper(App.getAppContext());</div><div class=\"line\">                helper.insert(chatMessageInfo);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1;&#x7814;&#x7A76;&#x7814;&#x7A76;</em></p>\n</blockquote>\n<h2 id=\"&#x53D1;&#x9001;\"><a href=\"#&#x53D1;&#x9001;\" class=\"headerlink\" title=\"&#x53D1;&#x9001;\"></a>&#x53D1;&#x9001;</h2><p>&#x5982;&#x679C;&#x4F60;&#x770B;&#x4E86;&#x6587;&#x6863;&#x7684;&#x8BDD;&#x5C31;&#x5E94;&#x8BE5;&#x6709;&#x70B9;&#x5934;&#x7EEA;&#x4E86;&#xFF0C;&#x53D1;&#x9001;&#x5C31;&#x662F;&#x4F7F;&#x7528;HTTP&#x8BF7;&#x6C42;&#x5411;&#x5C0F;&#x7C73;&#x6240;&#x63D0;&#x4F9B;&#x7684;API&#x6839;&#x636E;&#x4F60;&#x63D0;&#x4F9B;&#x7684;<strong>regId</strong>&#x3001;<strong>userAccount</strong>&#x3001;<strong>alias</strong>&#x3001;<strong>topic</strong>&#x7B49;&#x53D1;&#x9001;&#x4F60;&#x8981;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x7528;&#x7684;&#x662F;<strong>regId</strong> API&#xFF1A;<a href=\"https://api.xmpush.xiaomi.com/v2/message/regid\" target=\"_blank\" rel=\"external\">https://api.xmpush.xiaomi.com/v2/message/regid</a></p>\n<p><a href=\"http://dev.xiaomi.com/doc/?p=533\" target=\"_blank\" rel=\"external\">&#x53C2;&#x8003;&#x6587;&#x6863;</a></p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x53D1;&#x9001;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public void requestData(final requestListener listener, final String chatContent, final String number, final String regId, final ChatMessageDataHelper helper) {</div><div class=\"line\">        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, UrlUtils.ChatUrl(chatContent, number, regId)</div><div class=\"line\">                , null, new Response.Listener&lt;JSONObject&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(JSONObject jsonObject) {</div><div class=\"line\">                mChatMessageInfo = new ChatMessageInfo();</div><div class=\"line\">                mChatMessageInfo.setMessage(chatContent);</div><div class=\"line\">                mChatMessageInfo.setFlag(1);</div><div class=\"line\">                mChatMessageInfo.setTime(CalendarUtils.getCurrentDate());</div><div class=\"line\">                mChatMessageInfo.setReceiverNumber(number);</div><div class=\"line\">                mChatMessageInfo.setRegId(regId);</div><div class=\"line\">                mChatMessageInfo.setSendNumber(SPUtils.getString(&quot;userPhone&quot;, &quot;&quot;));</div><div class=\"line\">                listener.onSucceed(mChatMessageInfo, helper);</div><div class=\"line\">            }</div><div class=\"line\">        }, new Response.ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                Log.d(&quot;TAG&quot;, volleyError.getMessage());</div><div class=\"line\">                listener.onError(volleyError.getMessage());</div><div class=\"line\">            }</div><div class=\"line\">        }) {</div><div class=\"line\">            @Override</div><div class=\"line\">            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {</div><div class=\"line\">                HashMap&lt;String, String&gt; header = new HashMap&lt;&gt;();</div><div class=\"line\">                header.put(&quot;Authorization&quot;, &quot;key=&quot; + App.APP_SECRET_KEY);</div><div class=\"line\">                return header;</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">        VolleyUtils.addQueue(jsonObjectRequest, &quot;chatRequest&quot;);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;&#x6D89;&#x53CA;&#x7684;&#x4EE3;&#x7801;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x591A;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5C55;&#x5F00;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x6839;&#x636E;&#x540E;&#x9762;&#x7684;&#x5730;&#x5740;<strong>Star</strong>&#x3001;<strong>Fork</strong>&#x4E0B;&#x8F7D;&#x4EE3;&#x7801;&#x67E5;&#x770B;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x5B89;&#x88C5;&#x6CE8;&#x518C;&#x4E86;&#xFF0C;&#x7531;&#x4E8E;&#x65F6;&#x95F4;&#x539F;&#x56E0;&#xFF0C;&#x76EE;&#x524D;&#x804A;&#x5929;&#x754C;&#x9762;&#x53EA;&#x4F1A;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x6211;&#x4E3A;&#x597D;&#x53CB;&#xFF0C;&#x4F60;&#x4EEC;&#x5982;&#x679C;&#x7528;&#x4E0D;&#x61C2;&#x5F97;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x53D1;&#x6D88;&#x606F;&#x7ED9;&#x6211;&#xFF0C;&#x4F46;&#x4E0D;&#x4E00;&#x5B9A;&#x90FD;&#x4F1A;&#x56DE;&#x3002;&#x597D;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x770B;&#x770B;&#x6548;&#x679C;&#x5427;</p>\n<h2 id=\"&#x6548;&#x679C;\"><a href=\"#&#x6548;&#x679C;\" class=\"headerlink\" title=\"&#x6548;&#x679C;\"></a>&#x6548;&#x679C;</h2><p><img src=\"/2016/05/01/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E8C;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android高仿微信之mvp实现(一)","url":"https://www.rousetime.com/2016/04/23/Android高仿微信之mvp实现-一/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E3A;&#x4E86;&#x5DE9;&#x56FA;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x5BF9;<strong>mvp</strong>&#x67B6;&#x6784;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x4E8E;&#x662F;&#x7A81;&#x751F;&#x4E00;&#x4E2A;&#x60F3;&#x6CD5;&#xFF0C;&#x7528;<strong>mvp</strong>&#x67B6;&#x6784;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x5FAE;&#x4FE1;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x6709;&#x4E86;&#x73B0;&#x5728;&#x7684;&#x6807;&#x9898;&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;&#x3002;&#x5E0C;&#x671B;&#x81EA;&#x5DF1;&#x5728;&#x5B9E;&#x73B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x80FD;&#x719F;&#x7EC3;&#x638C;&#x63E1;<strong>mvp</strong>&#x67B6;&#x6784;&#x7684;&#x7CBE;&#x9AD3;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4E5F;&#x5728;&#x8FD9;&#x5199;&#x4E0B;&#x81EA;&#x5DF1;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x6210;&#x957F;&#x4E0E;&#x6240;&#x601D;&#x3002;&#x8BE5;&#x7247;&#x6587;&#x7AE0;&#x4E3A;&#x7B2C;&#x4E00;&#x7CFB;&#x5217;&#xFF0C;&#x4EE5;&#x540E;&#x4F1A;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x8FDB;&#x5EA6;&#x6765;&#x5199;&#x4E0B;&#x5269;&#x4F59;&#x7684;&#x7CFB;&#x5217;&#x3002;&#x8FD8;&#x6CA1;&#x63A5;&#x89E6;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x6765;&#x5B66;&#x4E60;&#x4E0B;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x6709;&#x4E0D;&#x5BF9;&#x7684;&#x6B22;&#x8FCE;&#x6765;&#x6307;&#x6559;&#x3002;</p>\n<h2 id=\"MVP\"><a href=\"#MVP\" class=\"headerlink\" title=\"MVP\"></a>MVP</h2><p>&#x9996;&#x5148;&#x6211;&#x6765;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x91CA;&#x4E0B;&#x4F55;&#x4E3A;<strong>mvp</strong></p>\n<ul>\n<li><strong>M</strong>&#x5C31;&#x662F;<strong>Model</strong> &#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8D1F;&#x8D23;&#x7684;&#x5C31;&#x662F;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x83B7;&#x53D6;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#xFF0C;<strong>http</strong>&#x7684;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x7684;&#x5904;&#x7406;&#x3002;</li>\n<li><strong>V</strong>&#x5C31;&#x662F;<strong>View</strong> &#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#x89C6;&#x56FE;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x5904;&#x7406;&#x5404;&#x4E2A;&#x754C;&#x9762;<strong>ui</strong>&#x63A7;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x3002;</li>\n<li><strong>P</strong>&#x5C31;&#x662F;<strong>Presenter</strong> &#xFF0C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x8D1F;&#x8D23;&#x7684;&#x662F;<strong>Model</strong>&#x4E0E;<strong>View</strong>&#x4E4B;&#x95F4;&#x7684;&#x8054;&#x7CFB;&#x64CD;&#x4F5C;&#x3002;</li>\n</ul>\n<p>&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x8054;&#x7CFB;&#x5728;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5F53;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#x88AB;&#x521B;&#x5EFA;&#x65F6;&#x9996;&#x5148;&#x8C03;&#x7528;<strong>View</strong>&#xFF0C;<strong>View</strong>&#x8C03;&#x7528;<strong>Presenter</strong>&#x4E2D;&#x7684;&#x76F8;&#x5E94;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;<strong>Presenter</strong>&#x4E2D;&#x5219;&#x8C03;&#x7528;&#x4E86;<strong>Model</strong>&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x65B9;&#x6CD5;&#xFF0C;<strong>Presenter</strong>&#x4E2D;&#x83B7;&#x5F97;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5219;&#x53CD;&#x8FC7;&#x6765;&#x8C03;&#x7528;<strong>View</strong>&#x4E2D;&#x63A5;&#x53E3;&#x4F20;&#x56DE;&#x7ED9;<strong>View</strong>&#x5C42;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x4E86;<strong>MVP</strong>&#x4E2D;&#x7684;&#x5408;&#x4F5C;&#x6D41;&#x7A0B;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x660E;&#x663E;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x628A;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x4E0E;&#x4E3B;&#x754C;&#x9762;&#x5206;&#x79BB;&#xFF0C;&#x5B8C;&#x5168;&#x9694;&#x79BB;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x5F97;&#x5404;&#x4E2A;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x6A21;&#x5757;&#x5316;&#xFF0C;&#x964D;&#x4F4E;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x6027;&#xFF0C;&#x53EA;&#x8981;&#x547D;&#x540D;&#x5408;&#x7406;&#x5C31;&#x80FD;&#x8FC5;&#x901F;&#x660E;&#x767D;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x4EE5;&#x8BE5;&#x9879;&#x76EE;&#x4E3A;&#x4F8B;&#x3002;</p>\n<blockquote>\n<p><em>&#x672C;&#x6765;&#x60F3;&#x4EE5;&#x4E3B;&#x6846;&#x67B6;&#x4E3A;&#x4F8B;&#x7684;&#xFF0C;&#x4F46;&#x4E3B;&#x6846;&#x67B6;&#x76EE;&#x524D;&#x6CA1;&#x6709;Model&#x5C42;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x4EE5;&#x5FAE;&#x4FE1;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x804A;&#x5929;&#x5FAE;&#x4FE1;&#x7A97;&#x53E3;&#x4E3A;&#x4F8B;&#xFF0C;&#x7528;MVP&#x6765;&#x5B9E;&#x73B0;</em></p>\n</blockquote>\n<h2 id=\"View&#x5C42;\"><a href=\"#View&#x5C42;\" class=\"headerlink\" title=\"View&#x5C42;\"></a>View&#x5C42;</h2><p>&#x5F53;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x65F6;&#xFF0C;&#x8981;&#x5148;&#x8C03;&#x7528;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x5B9E;&#x73B0;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXView {</div><div class=\"line\">    void setData(List&lt;WXItemInfo&gt; list);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x4E00;&#x770B;&#x65B9;&#x6CD5;&#x540D;&#x5C31;&#x80FD;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x8BE5;&#x65B9;&#x6CD5;&#x8981;&#x505A;&#x7684;&#x64CD;&#x4F5C;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"Model&#x5C42;\"><a href=\"#Model&#x5C42;\" class=\"headerlink\" title=\"Model&#x5C42;\"></a>Model&#x5C42;</h2><p>&#x65E2;&#x7136;&#x8BE5;&#x5C42;&#x662F;&#x5B9E;&#x73B0;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x81EA;&#x7136;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXModel {</div><div class=\"line\">    List&lt;WXItemInfo&gt; initData();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9A;&#x4E49;&#x5B8C;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;&#xFF0C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x52A0;&#x8F7D;&#xFF1B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXModleImp implements WXModel{</div><div class=\"line\">    private List&lt;WXItemInfo&gt; mList;</div><div class=\"line\">    private WXItemInfo wxItemInfo;</div><div class=\"line\">    @Override</div><div class=\"line\">    public List&lt;WXItemInfo&gt; initData() {</div><div class=\"line\">        mList = new ArrayList&lt;&gt;();</div><div class=\"line\">        for (int i = 0; i &lt; 10; i++) {</div><div class=\"line\">            wxItemInfo = new WXItemInfo();</div><div class=\"line\">            wxItemInfo.setTitle(&quot;&#x6D4B;&#x8BD5;&#x6807;&#x9898;&quot; + i);</div><div class=\"line\">            wxItemInfo.setContent(&quot;&#x6D4B;&#x8BD5;&#x5185;&#x5BB9;&quot; + i);</div><div class=\"line\">            wxItemInfo.setTime(i + &quot;:11&quot;);</div><div class=\"line\">            mList.add(wxItemInfo);</div><div class=\"line\">        }</div><div class=\"line\">        return mList;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x73B0;&#x5728;&#x4E3A;&#x4E86;&#x6D4B;&#x8BD5;&#xFF0C;&#x6240;&#x4EE5;&#x505A;&#x4E86;&#x5047;&#x6570;&#x636E;&#x3002;&#x73B0;&#x5728;&#x662F;&#x4E0D;&#x662F;&#x660E;&#x767D;&#x4E86;&#x4E00;&#x70B9;&#x5462;&#xFF1F;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x63A5;&#x53E3;&#x4E2D;&#x5728;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x8BE5;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;<strong>WXModelImp</strong>&#x4E2D;&#x5B9E;&#x73B0;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h2 id=\"Presenter&#x5C42;\"><a href=\"#Presenter&#x5C42;\" class=\"headerlink\" title=\"Presenter&#x5C42;\"></a>Presenter&#x5C42;</h2><p>&#x5230;&#x8FD9;&#x91CC;&#x662F;&#x4E0D;&#x662F;&#x60F3;&#x5230;&#x4E5F;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x76F8;&#x5173;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x4FBF;&#x5B9E;&#x73B0;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF0C;&#x6CA1;&#x9519;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x628A;<strong>View</strong>&#x4E0E;<strong>Model</strong>&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">public interface WXPresent {</div><div class=\"line\">    void loadData();</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x8BE5;&#x63A5;&#x53E3;,&#x5728;&#x5176;&#x4E2D;&#x5F15;&#x7528;<strong>View</strong>&#x4E0E;<strong>Model</strong>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXPresentImp implements WXPresent{</div><div class=\"line\"></div><div class=\"line\">    private WXModel mWXModle;</div><div class=\"line\">    private WXView mWXView;</div><div class=\"line\">    private List&lt;WXItemInfo&gt; mList;</div><div class=\"line\"></div><div class=\"line\">    public WXPresentImp(WXView wxView) {</div><div class=\"line\">        mWXView = wxView;</div><div class=\"line\">        mWXModle = new WXModleImp();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void loadData() {</div><div class=\"line\">        mList = mWXModle.initData();</div><div class=\"line\">        mWXView.setData(mList);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x57FA;&#x672C;&#x7684;<strong>MVP</strong>&#x5C31;&#x8981;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x53EA;&#x8981;&#x5728;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x754C;&#x9762;&#x5B9E;&#x73B0;<strong>View</strong>&#x5C42;&#x7684;<strong>WXView</strong>&#x63A5;&#x53E3;&#x5728;&#x5176;&#x4E2D;&#x586B;&#x5145;&#x6570;&#x636E;&#xFF0C;&#x5B9E;&#x4F8B;&#x5316;<strong>Presenter</strong>&#x5C42;&#x7684;<strong>WXPresentImp</strong>&#x7C7B;&#xFF0C;&#x8C03;&#x7528;&#x5176;&#x65B9;&#x6CD5;<strong>loadData()</strong>&#xFF1B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class WXFragment extends Fragment implements WXView{</div><div class=\"line\">    @InjectView(R.id.wx_recyclerView)</div><div class=\"line\">    RecyclerView wxRecyclerView;</div><div class=\"line\">    private WXAdapter wxAdapter;</div><div class=\"line\">    private WXPresentImp mWXPresentImp;</div><div class=\"line\"></div><div class=\"line\">    @Nullable</div><div class=\"line\">    @Override</div><div class=\"line\">    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {</div><div class=\"line\">        View view = LayoutInflater.from(getContext()).inflate(R.layout.wx_layout, null);</div><div class=\"line\">        ButterKnife.inject(this, view);</div><div class=\"line\">        wxAdapter = new WXAdapter(getContext());</div><div class=\"line\">        mWXPresentImp = new WXPresentImp(this);</div><div class=\"line\">        mWXPresentImp.loadData();</div><div class=\"line\">        wxRecyclerView.setLayoutManager(new LinearLayoutManager(getContext()));</div><div class=\"line\">        wxRecyclerView.addItemDecoration(new WXItemDecoration(getContext()));</div><div class=\"line\">        wxRecyclerView.setAdapter(wxAdapter);</div><div class=\"line\">        return view;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void onDestroyView() {</div><div class=\"line\">        super.onDestroyView();</div><div class=\"line\">        ButterKnife.reset(this);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    public void setData(List&lt;WXItemInfo&gt; list) {</div><div class=\"line\">       wxAdapter.addData(list);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x5230;&#x8FD9;&#x91CC;&#x6574;&#x4E2A;&#x7684;&#x5FAE;&#x4FE1;&#x804A;&#x5929;&#x7684;<strong>MVP</strong>&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x56DE;&#x8FC7;&#x53BB;&#x518D;&#x6574;&#x7406;&#x4E0B;&#x601D;&#x8DEF;&#x53D1;&#x73B0;&#x662F;&#x4E0D;&#x662F;&#x6E05;&#x695A;&#x4E86;&#x5F88;&#x591A;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x5B9E;&#x73B0;&#x4E86;<strong>MVP</strong>&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x660E;&#x4E86;&#xFF0C;&#x601D;&#x8DEF;&#x6E05;&#x6670;&#x3002;&#x540E;&#x9762;&#x9879;&#x76EE;&#x7684;&#x5DE5;&#x7A0B;&#x91CF;&#x5927;&#x4E86;&#xFF0C;&#x66F4;&#x52A0;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x6A21;&#x5F0F;&#x4E86;&#x7BA1;&#x7406;&#x9879;&#x76EE;&#x3002;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x503C;&#x5F97;&#x63A8;&#x8350;&#x7684;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/23/Android&#x9AD8;&#x4EFF;&#x5FAE;&#x4FE1;&#x4E4B;mvp&#x5B9E;&#x73B0;-&#x4E00;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p>&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/idisfkj/HightCopyWX\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/HightCopyWX</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android二维码扫描","url":"https://www.rousetime.com/2016/04/16/Android二维码扫描/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x5FAE;&#x4FE1;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#x7528;&#x7684;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x8FD1;&#x5C31;&#x60F3;&#x5F04;&#x660E;&#x767D;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E8E;&#x662F;&#x627E;&#x4E86;&#x70B9;&#x8D44;&#x6599;&#xFF0C;&#x53D1;&#x73B0;&#x90FD;&#x662F;&#x8BF4;&#x4F7F;&#x7528;zxing&#x7684;&#x5F00;&#x6E90;&#x5E93;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5F3A;&#x5927;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5F15;&#x7528;&#x8BE5;&#x9879;&#x76EE;&#x53EA;&#x8981;&#x7B80;&#x5355;&#x7684;&#x51E0;&#x6B65;&#x4EE3;&#x7801;&#x5C31;&#x80FD;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#x4E0E;&#x751F;&#x6210;&#x7684;&#x6548;&#x679C;&#x3002;&#x8FD9;&#x91CC;&#x505A;&#x70B9;&#x7B14;&#x8BB0;&#x8BB0;&#x4E0B;&#xFF0C;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x6765;&#x5B66;&#x4E60;&#x4E0B;&#x3002;</p>\n<h2 id=\"&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"><a href=\"#&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\" class=\"headerlink\" title=\"&#x51C6;&#x5907;&#x5DE5;&#x4F5C;\"></a>&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h2><p>&#x5148;&#x4E0B;&#x8F7D;zxing&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x8FC7;&#x63A8;&#x8350;&#x4E0B;&#x8F7D;&#x7CBE;&#x7B80;&#x7248;&#xFF0C;<strong>BarCodeTest</strong>&#x8FD9;&#x4E2A;&#x5C31;&#x8DB3;&#x591F;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#x4E86;&#x3002;&#x628A;&#x4E0B;&#x8F7D;&#x7684;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x5230;&#x81EA;&#x5DF1;&#x9879;&#x76EE;&#x7684;&#x4F9D;&#x8D56;&#x4E2D;&#xFF0C;&#x5F15;&#x7528;&#x8BE5;&#x9879;&#x76EE;&#x3002;&#x5982;&#x4F55;&#x6DFB;&#x52A0;Module&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x80FD;&#x81EA;&#x5DF1;&#x89E3;&#x51B3;&#x3002;&#x4E0B;&#x9762;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x64CD;&#x4F5C;&#x3002;</p>\n<h2 id=\"&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\"><a href=\"#&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\" class=\"headerlink\" title=\"&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;\"></a>&#x626B;&#x63CF;&#x4E8C;&#x7EF4;&#x7801;</h2><p>&#x56E0;&#x4E3A;&#x662F;&#x5F15;&#x7528;&#x522B;&#x4EBA;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x80FD;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4F7F;&#x7528;&#x522B;&#x4EBA;&#x5B9A;&#x4E49;&#x597D;&#x7684;&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x91CC;&#x7528;&#x5230;&#x7684;&#x4E3B;&#x8981;&#x662F;<strong>CaptureActivit</strong>&#x7C7B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x626B;&#x63CF;&#x65F6;&#x8DF3;&#x8F6C;&#x5230;&#x8BE5;&#x7C7B;&#x5F00;&#x542F;&#x626B;&#x63CF;&#x529F;&#x80FD;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x6253;&#x5F00;&#x626B;&#x63CF;&#x754C;&#x9762;&#x626B;&#x63CF;&#x6761;&#x5F62;&#x7801;&#x6216;&#x4E8C;&#x7EF4;&#x7801;</div><div class=\"line\">Intent openCameraIntent = new Intent(BarCodeTestActivity.this,CaptureActivity.class);</div><div class=\"line\">\t\t\t\tstartActivityForResult(openCameraIntent, 0);</div></pre></td></tr></table></figure>\n<p>&#x91CD;&#x5199;<strong>onActivityResult</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;<strong>TextView</strong>&#x663E;&#x793A;&#x51FA;&#x626B;&#x63CF;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">\tprotected void onActivityResult(int requestCode, int resultCode, Intent data) {</div><div class=\"line\">\t\tsuper.onActivityResult(requestCode, resultCode, data);</div><div class=\"line\">\t\t//&#x5904;&#x7406;&#x626B;&#x63CF;&#x7ED3;&#x679C;&#xFF08;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x663E;&#x793A;&#xFF09;</div><div class=\"line\">\t\tif (resultCode == RESULT_OK) {</div><div class=\"line\">\t\t\tBundle bundle = data.getExtras();</div><div class=\"line\">\t\t\tString scanResult = bundle.getString(&quot;result&quot;);</div><div class=\"line\">\t\t\tresultTextView.setText(scanResult);</div><div class=\"line\">\t\t}</div><div class=\"line\">\t}</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x901A;&#x8FC7;<strong>bundle.getString(&#x201C;result&#x201D;)</strong>&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x626B;&#x63CF;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;<strong>CaptureActivity</strong>&#x4E2D;&#x7684;<strong>handleDecode</strong>&#x5DF2;&#x7ECF;&#x5BF9;&#x5176;&#x505A;&#x4E86;&#x5904;&#x7406;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void handleDecode(Result result, Bitmap barcode) {</div><div class=\"line\">\t\tinactivityTimer.onActivity();</div><div class=\"line\">\t\tplayBeepSoundAndVibrate();</div><div class=\"line\">\t\tString resultString = result.getText();</div><div class=\"line\">\t\t//FIXME</div><div class=\"line\">\t\tif (resultString.equals(&quot;&quot;)) {</div><div class=\"line\">\t\t\tToast.makeText(CaptureActivity.this, &quot;Scan failed!&quot;, Toast.LENGTH_SHORT).show();</div><div class=\"line\">\t\t}else {</div><div class=\"line\">//\t\t\tSystem.out.println(&quot;Result:&quot;+resultString);</div><div class=\"line\">\t\t\tIntent resultIntent = new Intent();</div><div class=\"line\">\t\t\tBundle bundle = new Bundle();</div><div class=\"line\">\t\t\tbundle.putString(&quot;result&quot;, resultString);</div><div class=\"line\">\t\t\tresultIntent.putExtras(bundle);</div><div class=\"line\">\t\t\tthis.setResult(RESULT_OK, resultIntent);</div><div class=\"line\">\t\t}</div><div class=\"line\">\t\tCaptureActivity.this.finish();</div><div class=\"line\">\t}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x626B;&#x63CF;&#x7684;&#x529F;&#x80FD;&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x7ED3;&#x675F;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\"><a href=\"#&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\" class=\"headerlink\" title=\"&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;\"></a>&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;</h2><p>&#x8FD9;&#x91CC;&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x8C03;&#x7528;&#x8BE5;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;<strong>EncodingHandler</strong>&#x7684;<strong>createQRCode</strong>&#x65B9;&#x6CD5;&#x751F;&#x6210;Bitmap&#x5BF9;&#x8C61;,&#x901A;&#x8FC7;ImageView&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">try {</div><div class=\"line\">                    String contentString = qrStrEditText.getText().toString();</div><div class=\"line\">                    if (!contentString.equals(&quot;&quot;)) {</div><div class=\"line\">                        //&#x6839;&#x636E;&#x5B57;&#x7B26;&#x4E32;&#x751F;&#x6210;&#x4E8C;&#x7EF4;&#x7801;&#x56FE;&#x7247;&#x5E76;&#x663E;&#x793A;&#x5728;&#x754C;&#x9762;&#x4E0A;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x56FE;&#x7247;&#x7684;&#x5927;&#x5C0F;&#xFF08;450*450&#xFF09;</div><div class=\"line\">                        Bitmap qrCodeBitmap = EncodingHandler.createQRCode(contentString, 450);</div><div class=\"line\">                        qrImgImageView.setImageBitmap(qrCodeBitmap);</div><div class=\"line\">                    } else {</div><div class=\"line\">                        Toast.makeText(BarCodeTestActivity.this, &quot;Text can not be empty&quot;, Toast.LENGTH_SHORT).show();</div><div class=\"line\">                    }</div><div class=\"line\">                } catch (WriterException e) {</div><div class=\"line\">                    // TODO Auto-generated catch block</div><div class=\"line\">                    e.printStackTrace();</div><div class=\"line\">                }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x592A;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6CA1;&#x9519;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x5176;&#x5B9E;&#x521A;&#x5F00;&#x59CB;&#x4E86;&#x89E3;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x60CA;&#x5446;&#x4E86;&#xFF0C;&#x4E0D;&#x7981;&#x611F;&#x53F9;&#x5F00;&#x6E90;&#x771F;&#x662F;&#x725B;&#x53C9;&#x554A;&#xFF01;</em></p>\n</blockquote>\n<h2 id=\"&#x754C;&#x9762;&#x4FEE;&#x6539;\"><a href=\"#&#x754C;&#x9762;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x754C;&#x9762;&#x4FEE;&#x6539;\"></a>&#x754C;&#x9762;&#x4FEE;&#x6539;</h2><p>&#x5176;&#x5B9E;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x529F;&#x80FD;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#xFF0C;&#x4F46;&#x754C;&#x9762;&#x771F;&#x662F;&#x770B;&#x4E0D;&#x8FC7;&#x53BB;&#x4E86;&#xFF0C;&#x611F;&#x89C9;&#x77AC;&#x95F4;&#x56DE;&#x5230;&#x4E86;&#x89E3;&#x653E;&#x524D;&#x4F3C;&#x5F97;&#xFF0C;&#x6709;&#x6728;&#x6709;&#x8FD9;&#x79CD;&#x611F;&#x89C9;&#x3002;&#x770B;&#x591A;&#x4E86;&#x5FAE;&#x4FE1;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;&#xFF0C;&#x4E00;&#x4E0B;&#x770B;&#x8FD9;&#x4E48;low&#x6211;&#x5B9E;&#x5728;&#x662F;&#x770B;&#x4E0D;&#x60EF;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x505A;&#x4E0B;&#x4FEE;&#x6539;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x627E;&#x5230;<strong>CameraManager</strong>&#x7C7B;&#xFF0C;&#x5728;&#x8BE5;&#x7C7B;&#x4E2D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x662F;&#x4FEE;&#x6539;&#x4E0B;&#x626B;&#x63CF;&#x6846;&#x7684;&#x5927;&#x5C0F;&#xFF08;&#x539F;&#x6765;&#x7684;&#x5B9E;&#x5728;&#x662F;&#x611F;&#x89C9;&#x592A;&#x5C0F;&#x6C14;&#x4E86;&#xFF09;&#x628A;&#x76F8;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x6539;&#x5927;&#x70B9;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x4FEE;&#x6539;&#x7684;&#x5927;&#x5C0F;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final int MIN_FRAME_WIDTH = 400;</div><div class=\"line\">private static final int MIN_FRAME_HEIGHT = 400;</div><div class=\"line\">private static final int MAX_FRAME_WIDTH = 600;</div><div class=\"line\">private static final int MAX_FRAME_HEIGHT = 600;</div></pre></td></tr></table></figure>\n<p>&#x4E0B;&#x9762;&#x8981;&#x8BE5;&#x7684;&#x5C31;&#x662F;&#x6DFB;&#x52A0;&#x8DDF;&#x5FAE;&#x4FE1;&#x4E00;&#x6837;&#x7684;&#x79FB;&#x52A8;&#x6FC0;&#x5149;&#x6761;&#x3001;&#x56DB;&#x4E2A;&#x89D2;&#x7684;&#x7B80;&#x5355;&#x88C5;&#x9970;&#x4E0E;&#x6587;&#x5B57;&#x663E;&#x793A;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x627E;&#x5230;<strong>ViewfinderView</strong>&#x7C7B;&#xFF0C;&#x5728;<strong>onDraw</strong>&#x65B9;&#x6CD5;&#x4E2D;&#x505A;&#x7ED8;&#x5236;&#x7684;&#x4FEE;&#x6539;&#x3002;&#x9996;&#x5148;&#x628A;&#x539F;&#x6765;&#x7684;&#x63CF;&#x8FB9;&#x7684;&#x989C;&#x8272;&#x6539;&#x6210;&#x7070;&#x8272;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">paint.setColor(Color.GRAY);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.right + 1, frame.top + 2, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top + 2, frame.left + 2, frame.bottom - 1, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - 1, frame.top, frame.right + 1, frame.bottom - 1, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.bottom - 1, frame.right + 1, frame.bottom + 1, paint);</div></pre></td></tr></table></figure>\n<p>&#x9ED8;&#x8BA4;&#x4E3A;&#x7EFF;&#x8272;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x8981;&#x753B;&#x8DDF;&#x5FAE;&#x4FE1;&#x4E00;&#x6837;&#x7684;&#x7EFF;&#x8272;&#x7684;&#x56DB;&#x4E2A;&#x89D2;&#xFF0C;&#x989C;&#x8272;&#x4E00;&#x6837;&#x5C31;&#x6709;&#x70B9;&#x4E0D;&#x534F;&#x8C03;&#x4E86;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x753B;&#x626B;&#x63CF;&#x6846;&#x7684;&#x56DB;&#x4E2A;&#x88C5;&#x9970;&#x89D2;</div><div class=\"line\">      paint.setColor(FRAME_COLOR);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.left + FRAME_WIDTH, frame.top + FRAME_HEIGHT, paint);</div><div class=\"line\">      canvas.drawRect(frame.left, frame.top, frame.left + FRAME_HEIGHT, frame.top + FRAME_WIDTH, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_WIDTH, frame.top, frame.right, frame.top + FRAME_HEIGHT, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_HEIGHT, frame.top, frame.right, frame.top + FRAME_WIDTH, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_HEIGHT, frame.bottom - FRAME_WIDTH, frame.right, frame.bottom, paint);</div><div class=\"line\">      canvas.drawRect(frame.right - FRAME_WIDTH, frame.bottom - FRAME_HEIGHT, frame.right, frame.bottom, paint);</div><div class=\"line\">      canvas.drawRect(frame.left,frame.bottom-FRAME_WIDTH,frame.left+FRAME_HEIGHT,frame.bottom,paint);</div><div class=\"line\">      canvas.drawRect(frame.left,frame.bottom-FRAME_HEIGHT,frame.left+FRAME_WIDTH,frame.bottom,paint);</div></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x7684;&#x6839;&#x636E;<strong>frame</strong>&#x7684;<strong>top</strong>&#x3001;<strong>left</strong>&#x3001;<strong>right</strong>&#x4E0E;<strong>bottom</strong>&#x53C2;&#x6570;&#x6765;&#x7ED8;&#x5236;&#xFF0C;&#x6BCF;&#x4E2A;&#x89D2;&#x8981;&#x7ED8;&#x5236;&#x4E24;&#x6B21;&#x3002;<strong>FRAME_HEIGHT</strong>&#x4E0E;<strong>FRAME_WIDTH</strong>&#x5206;&#x522B;&#x4E3A;&#x81EA;&#x5DF1;&#x8BBE;&#x7F6E;&#x7684;&#x89D2;&#x7684;&#x5BBD;&#x9AD8;&#x3002;&#x53EF;&#x4EE5;&#x62FF;&#x5FAE;&#x4FE1;&#x7684;&#x5BF9;&#x7167;&#x3002;<br>&#x4E0B;&#x9762;&#x4FEE;&#x6539;&#x6FC0;&#x5149;&#x7EBF;&#xFF0C;&#x628A;&#x539F;&#x6765;&#x7684;&#x6FC0;&#x5149;&#x7ED8;&#x5236;&#x53BB;&#x6389;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x521D;&#x59CB;&#x5316;laser</div><div class=\"line\">      if (!isStart){</div><div class=\"line\">        isStart = true;</div><div class=\"line\">        laserTop = frame.top;</div><div class=\"line\">        laserBottom = frame.bottom;</div><div class=\"line\">      }</div><div class=\"line\">//&#x7ED8;&#x5236;laser</div><div class=\"line\">      laserTop += LASER_SPEED;//&#x6BCF;&#x6B21;&#x7684;&#x79FB;&#x52A8;&#x8DDD;&#x79BB;</div><div class=\"line\">      if (laserTop &gt;= frame.bottom){</div><div class=\"line\">        laserTop = frame.top;</div><div class=\"line\">      }</div><div class=\"line\">      canvas.drawRect(frame.left + LASER_WIDTH, laserTop - LASER_WIDTH / 2, frame.right - LASER_WIDTH, laserTop + LASER_WIDTH / 2, paint);</div><div class=\"line\">      //&#x66F4;&#x65B0;laser&#x5B9E;&#x73B0;&#x79FB;&#x52A8;</div><div class=\"line\">      postInvalidateDelayed(ANIMATION_DELAY, frame.left, frame.top, frame.right, frame.bottom);</div></pre></td></tr></table></figure>\n<p>&#x81F3;&#x4E8E;&#x6587;&#x5B57;&#x7684;&#x7ED8;&#x5236;&#x4E5F;&#x662F;&#x54CD;&#x5E94;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x627E;&#x5230;&#x8981;&#x7ED8;&#x5236;&#x7684;&#x5750;&#x6807;&#xFF0C;&#x8C03;&#x7528;<strong>canvas.drawText</strong>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x753B;&#x7B14;<strong>paint.setTextSize()</strong>&#x5355;&#x4F4D;&#x662F;px&#xFF08;&#x50CF;&#x7D20;&#xFF09;&#xFF0C;&#x8FD9;&#x70B9;&#x611F;&#x89C9;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x8FA8;&#x7387;&#x7684;&#x673A;&#x578B;&#x4E0B;&#x5B57;&#x4F53;&#x7684;&#x5927;&#x5C0F;&#x4F1A;&#x76F8;&#x5DEE;&#x5F88;&#x5927;&#x3002;&#x3002;&#x6709;&#x70B9;&#x86CB;&#x75BC;&#x3002;&#x5E0C;&#x671B;&#x6709;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x544A;&#x8BC9;&#x6211;&#x3002;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/16/Android&#x4E8C;&#x7EF4;&#x7801;&#x626B;&#x63CF;/1.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x6587;&#x5B57;&#x6211;&#x6CA1;&#x6709;&#x8C03;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x8C03;&#x4E0B;&#x3002;&#x6211;&#x662F;&#x6309;&#x6211;&#x624B;&#x673A;&#x5C45;&#x4E2D;&#x6765;&#x8C03;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;768 x 1280&#x7684;&#xFF0C;&#x6587;&#x5B57;&#x5B8C;&#x5168;&#x53D8;&#x6837;&#x4E86;&#x3002;&#x3002;&#x3002;</em> </p>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"php与android的简单交互","url":"https://www.rousetime.com/2016/04/09/php与android的简单交互/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><strong>web</strong>&#x5F00;&#x53D1;&#x6709;&#x524D;&#x6BB5;&#x4E0E;&#x540E;&#x7AEF;&#x4E4B;&#x5206;&#xFF0C;&#x5176;&#x5B9E;<strong>android</strong>&#x4E5F;&#x6709;&#x524D;&#x540E;&#x7AEF;&#x4E4B;&#x5206;&#x3002;<strong>android</strong>&#x5F00;&#x53D1;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x624B;&#x673A;<strong>App</strong>&#x7684;&#x524D;&#x7AEF;&#x3002;&#x4E00;&#x822C;&#x90FD;&#x662F;<strong>php+android</strong>&#x6216;&#x8005;<strong>jsp+android</strong>&#x5F00;&#x53D1;&#xFF0C;&#x6240;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5408;&#x683C;&#x7684;<strong>android</strong>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;<strong>android</strong>&#x4E0E;&#x540E;&#x7AEF;&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4EE5;<strong>php+android</strong>&#x4EA4;&#x4E92;&#x7684;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x3002;</p>\n<h2 id=\"PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\"><a href=\"#PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;\"></a>PHP&#x6570;&#x636E;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;</h2><p><strong>php</strong>&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5236;&#x5B9A;&#x6210;<strong>json</strong>&#x7C7B;&#x578B;&#xFF0C;&#x5236;&#x5B9A;&#x4F9B;<strong>android</strong>&#x83B7;&#x53D6;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x5236;&#x5B9A;&#x6210;json&#x7C7B;&#x578B;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x660E;&#x767D;&#xFF0C;&#x73B0;&#x5728;<strong>android</strong>&#x7AEF;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x4EE5;<strong>json</strong>&#x7684;&#x683C;&#x5F0F;&#x5C01;&#x88C5;&#x7684;&#x3002;&#x597D;&#x4E86;&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x64CD;&#x4F5C;&#x3002;</p>\n<h3 id=\"&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\"><a href=\"#&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;\"></a>&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x5EFA;&#x7ACB;</h3><p>&#x9996;&#x5148;&#x5EFA;&#x8868;&#x5B9A;&#x4E49;&#x597D;&#x63D0;&#x4F9B;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7B80;&#x5355;&#x70B9;&#xFF0C;&#x4E0A;&#x5F20;&#x56FE;&#xFF1A;</p>\n<p><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/1.png\" alt=\"iamge\"></p>\n<h3 id=\"&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\"><a href=\"#&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;\"></a>&#x6570;&#x636E;&#x5E93;&#x7684;&#x8FDE;&#x63A5;</h3><p>&#x5EFA;&#x5B8C;&#x8868;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x5F00;&#x59CB;&#x5728;<strong>PHP</strong>&#x4E2D;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4EE5;<strong>pdo</strong>&#x7684;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#x4E3A;&#x4F8B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?php</div><div class=\"line\">/**</div><div class=\"line\"> * &#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\">try{</div><div class=\"line\">    $pdo = new PDO(&quot;mysql:host=localhost:3306;dbname=blog;&quot;,&quot;root&quot;,&quot;666666&quot;);</div><div class=\"line\">    //&#x8BBE;&#x7F6E;&#x7F16;&#x7801;</div><div class=\"line\">    $pdo-&gt;exec(&quot;set names utf8&quot;);</div><div class=\"line\">}catch(PDOException $e){</div><div class=\"line\">    die(&quot;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&quot;.$e-&gt;getMessage());</div><div class=\"line\">}</div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure>\n<p>&#x53EA;&#x8981;&#x4F20;&#x5165;&#x672C;&#x5730;&#x7AEF;&#x53E3;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x540D;&#xFF0C;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x5BC6;&#x7801;&#x5373;&#x53EF;&#x3002;</p>\n<h3 id=\"&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\"><a href=\"#&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\" class=\"headerlink\" title=\"&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json\"></a>&#x83B7;&#x53D6;&#x4E0E;&#x5236;&#x5B9A;json</h3><p>&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x904D;&#x5386;&#x8868;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$sql = &quot;SELECT * FROM blog&quot;;</div></pre></td></tr></table></figure>\n<p>&#x67E5;&#x8BE2;&#x4E0E;&#x904D;&#x5386;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$stmt = $pdo-&gt;query($sql);</div><div class=\"line\">while($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)){</div><div class=\"line\">    $list[&quot;blog&quot;][] = $row;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#x8F6C;&#x5C01;&#x88C5;&#x6210;json&#x7C7B;&#x578B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">print_r(json_encode($list));</div></pre></td></tr></table></figure>\n<p>&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x540E;&#x7684;&#x6570;&#x636E;&#x5C31;&#x662F;json&#x7C7B;&#x578B;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x8BBF;&#x95EE;&#x7684;&#x662F;&#xFF1A;<a href=\"http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;&#xFF08;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x672C;&#x673A;&#x7684;ip&#x5730;&#x5740;&#x4E0E;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF09;\" target=\"_blank\" rel=\"external\">http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;&#xFF08;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x672C;&#x673A;&#x7684;ip&#x5730;&#x5740;&#x4E0E;&#x9879;&#x76EE;&#x5730;&#x5740;&#xFF09;</a><br><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/2.png\" alt=\"iamge\"></p>\n<blockquote>\n<p><em>&#x597D;&#x4E86;PHP&#x7AEF;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x5230;&#x8FD9;&#x91CC;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x5165;android&#x7AEF;</em></p>\n</blockquote>\n<h2 id=\"Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\"><a href=\"#Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\" class=\"headerlink\" title=\"Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;\"></a>Android&#x7AEF;&#x6570;&#x636E;&#x83B7;&#x53D6;</h2><p><strong>Android</strong>&#x7AEF;&#x4E3B;&#x8981;&#x7684;&#x662F;<strong>json</strong>&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5EFA;&#x7ACB;&#x4E0E;&#x4ECE;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x501F;&#x53E3;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x8981;&#x7528;&#x5230;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x4E0B;&#x3002;</p>\n<h3 id=\"Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\"><a href=\"#Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;\"></a>Json&#x5B9E;&#x4F53;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;</h3><p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x628A;<strong>GsonFormat</strong>&#x96C6;&#x6210;&#x5230;<strong>AS</strong>&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x751F;&#x6210;&#x5B9E;&#x4F53;&#x7C7B;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x8981;&#x6839;&#x636E;&#x524D;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6765;&#x8FDB;&#x884C;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x6309;&#x4E0A;&#x9762;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\">private List&lt;BlogBean&gt; blog;</div><div class=\"line\"></div><div class=\"line\">public List&lt;BlogBean&gt; getBlog() {</div><div class=\"line\">    return blog;</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">public void setBlog(List&lt;BlogBean&gt; blog) {</div><div class=\"line\">    this.blog = blog;</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">public static class BlogBean {</div><div class=\"line\">    private String id;</div><div class=\"line\">    private String title;</div><div class=\"line\">    private String time;</div><div class=\"line\">    private String content_url;</div><div class=\"line\">    private String image_url;</div><div class=\"line\"></div><div class=\"line\">    public String getId() {</div><div class=\"line\">        return id;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setId(String id) {</div><div class=\"line\">        this.id = id;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getTitle() {</div><div class=\"line\">        return title;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setTitle(String title) {</div><div class=\"line\">        this.title = title;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getTime() {</div><div class=\"line\">        return time;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setTime(String time) {</div><div class=\"line\">        this.time = time;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getContent_url() {</div><div class=\"line\">        return content_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setContent_url(String content_url) {</div><div class=\"line\">        this.content_url = content_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public String getImage_url() {</div><div class=\"line\">        return image_url;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public void setImage_url(String image_url) {</div><div class=\"line\">        this.image_url = image_url;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h3 id=\"&#x81EA;&#x5B9A;&#x4E49;GsonRequest\"><a href=\"#&#x81EA;&#x5B9A;&#x4E49;GsonRequest\" class=\"headerlink\" title=\"&#x81EA;&#x5B9A;&#x4E49;GsonRequest\"></a>&#x81EA;&#x5B9A;&#x4E49;GsonRequest</h3><p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;<strong>volley</strong>&#x4E0E;<strong>gson</strong>&#x6765;&#x89E3;&#x6790;<strong>json</strong>&#x6570;&#x636E;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x5148;&#x81EA;&#x5B9A;&#x4E49;<strong>GsonRequest</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7EE7;&#x627F;<strong>volley</strong>&#x7684;<strong>Request</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class GsonRequest&lt;T&gt; extends Request&lt;T&gt; {</div><div class=\"line\"></div><div class=\"line\">    private Class&lt;T&gt; mClass;</div><div class=\"line\">    private final Response.Listener&lt;T&gt; mListener;</div><div class=\"line\">    private Gson mGson;</div><div class=\"line\">    private List&lt;T&gt; mList;</div><div class=\"line\"></div><div class=\"line\">    public GsonRequest(int method, String url, Class&lt;T&gt; tClass, Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener) {</div><div class=\"line\">        super(method, url, errorListener);</div><div class=\"line\">        mClass = tClass;</div><div class=\"line\">        mListener = listener;</div><div class=\"line\">        mGson = new Gson();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public GsonRequest(String url, Class&lt;T&gt; tClass, Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener) {</div><div class=\"line\">        this(Method.GET, url, tClass, listener, errorListener);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected Response&lt;T&gt; parseNetworkResponse(NetworkResponse networkResponse) {</div><div class=\"line\">        try {</div><div class=\"line\">            mList = new ArrayList&lt;&gt;();</div><div class=\"line\">            String jsonString = new String(networkResponse.data,</div><div class=\"line\">                    HttpHeaderParser.parseCharset(networkResponse.headers));</div><div class=\"line\">            return Response.success(mGson.fromJson(jsonString, mClass),</div><div class=\"line\">                    HttpHeaderParser.parseCacheHeaders(networkResponse));</div><div class=\"line\">        } catch (UnsupportedEncodingException e) {</div><div class=\"line\">            return Response.error(new ParseError(e));</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    @Override</div><div class=\"line\">    protected void deliverResponse(T t) {</div><div class=\"line\">        mListener.onResponse(t);</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\"><a href=\"#Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\" class=\"headerlink\" title=\"Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;\"></a>Volley&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x6570;&#x636E;</h3><p>&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>GsonRequest</strong>&#x6765;&#x8BF7;&#x6C42;&#x6570;&#x636E;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">String url = &quot;http://192.168.56.1/WebBlog/json/getBlogJson.php&quot;;</div><div class=\"line\">        GsonRequest&lt;BlogInfo&gt; gsonRequest = new GsonRequest&lt;BlogInfo&gt;(url, BlogInfo.class, new Response.Listener&lt;BlogInfo&gt;() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(BlogInfo info) {</div><div class=\"line\">                mList = info.getBlog();</div><div class=\"line\">                BlogAdapter mAdapter = new BlogAdapter(MainActivity.this,mList,R.layout.blog_item);</div><div class=\"line\">                blogLv.setAdapter(mAdapter);</div><div class=\"line\">            }</div><div class=\"line\">        }, new Response.ErrorListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                Log.e(&quot;TAG&quot;, volleyError.getMessage(), volleyError);</div><div class=\"line\"></div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        //&#x6DFB;&#x52A0;&#x5230;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;</div><div class=\"line\">        RequestManager.addRequest(gsonRequest, &quot;blogRequest&quot;);</div></pre></td></tr></table></figure>\n<p>&#x6570;&#x636E;&#x5728;<strong>onResponse</strong>&#x4E2D;&#x8BF7;&#x6C42;&#x5230;&#x4E86;&#xFF0C;&#x5B58;&#x50A8;&#x5230;<strong>List</strong>&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;<strong>adapter</strong>&#x663E;&#x793A;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;adapter&#x7684;&#x4F7F;&#x7528;</p>\n<h3 id=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\"><a href=\"#&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\" class=\"headerlink\" title=\"&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;\"></a>&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;</h3><p>&#x8FD8;&#x662F;&#x8BF4;&#x4E0B;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x56FE;&#x7247;&#x4E0E;&#x56FE;&#x7247;&#x7684;&#x7F13;&#x5B58;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7;<strong>volley</strong>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E00;&#x5957;&#x7684;&#x4F7F;&#x7528;<strong>volley</strong>&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8BB8;&#x591A;&#x57FA;&#x672C;&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;<br>&#x4F7F;&#x7528;&#x5230;&#x7684;&#x662F;<strong>LruCache</strong>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;&#x5B83;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected int sizeOf(String key, Bitmap value) {</div><div class=\"line\">    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.HONEYCOMB_MR1){</div><div class=\"line\">        return value.getByteCount();</div><div class=\"line\">    }</div><div class=\"line\">    return value.getRowBytes() * value.getHeight();</div><div class=\"line\">}</div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public Bitmap getBitmap(String s) {</div><div class=\"line\">    return get(s);</div><div class=\"line\">}</div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public void putBitmap(String s, Bitmap bitmap) {</div><div class=\"line\">    put(s,bitmap);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x81EA;&#x5B9A;&#x4E49;<strong>ImageCacheManager</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class ImageCacheManager {</div><div class=\"line\">    private static final int CACHE_SIZE = 1024 * 1024 * ((ActivityManager) App.getAppContext()</div><div class=\"line\">            .getSystemService(Context.ACTIVITY_SERVICE)).getMemoryClass() / 8;</div><div class=\"line\"></div><div class=\"line\">    public ImageCacheManager() {</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    private static ImageLoader mImageLoader = new ImageLoader(RequestManager.mRequestQueue, new BitmapLruCache(CACHE_SIZE));</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageContainer loadImage(String requestUrl, ImageLoader.ImageListener listener, int maxWidth, int maxHeight) {</div><div class=\"line\">        return mImageLoader.get(requestUrl, listener, maxWidth, maxHeight);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageContainer loadImage(String requestUrl, ImageLoader.ImageListener listener) {</div><div class=\"line\">        return loadImage(requestUrl, listener, 0, 0);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public static ImageLoader.ImageListener getImageListener(final ImageView view, final Drawable defaultImageDrawable, final Drawable errorImageDrawable) {</div><div class=\"line\">        return new ImageLoader.ImageListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onResponse(ImageLoader.ImageContainer imageContainer, boolean b) {</div><div class=\"line\">                if (imageContainer.getBitmap() != null) {</div><div class=\"line\">                    if (!b &amp;&amp; defaultImageDrawable != null) {</div><div class=\"line\">                        TransitionDrawable transitionDrawable = new TransitionDrawable(</div><div class=\"line\">                                new Drawable[]{defaultImageDrawable</div><div class=\"line\">                                        , new BitmapDrawable(App.getAppContext().getResources(), imageContainer.getBitmap())}</div><div class=\"line\">                        );</div><div class=\"line\">                        transitionDrawable.setCrossFadeEnabled(true);</div><div class=\"line\">                        view.setImageDrawable(transitionDrawable);</div><div class=\"line\">                        transitionDrawable.startTransition(100);</div><div class=\"line\">                    } else {</div><div class=\"line\">                        view.setImageBitmap(imageContainer.getBitmap());</div><div class=\"line\">                    }</div><div class=\"line\">                } else if (defaultImageDrawable != null) {</div><div class=\"line\">                    view.setImageDrawable(defaultImageDrawable);</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            @Override</div><div class=\"line\">            public void onErrorResponse(VolleyError volleyError) {</div><div class=\"line\">                if (errorImageDrawable != null) {</div><div class=\"line\">                    view.setImageDrawable(errorImageDrawable);</div><div class=\"line\">                }</div><div class=\"line\">                Log.e(&quot;TAG&quot;,volleyError.getMessage());</div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<strong>ImageCacheManager</strong>&#x6765;&#x52A0;&#x8F7D;&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x4E0E;&#x7F13;&#x5B58;&#x56FE;&#x7247;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">ImageCacheManager.loadImage(mList.get(position).getImage_url()</div><div class=\"line\">                , ImageCacheManager.getImageListener((ImageView) holder.getView(R.id.item_image)</div><div class=\"line\">                , App.getAppContext().getResources().getDrawable(R.drawable.blog_default), App.getAppContext().getResources().getDrawable(R.drawable.blog_default))</div><div class=\"line\">                ,0,0);</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;<strong>volley</strong>&#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x4E0D;&#x6B62;&#x8FD9;&#x4E9B;&#xFF0C;&#x5C31;&#x62FF;&#x56FE;&#x7247;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD8;&#x6709;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<strong>ImageRequest</strong>&#x4E0E;<strong>NetworkImageView</strong>&#xFF0C;&#x672C;&#x6765;&#x8FD8;&#x60F3;&#x8BF4;&#x70B9;<strong>webview</strong>&#x7684;&#x4E00;&#x70B9;&#x77E5;&#x8BC6;&#xFF0C;&#x4ECA;&#x5929;&#x6709;&#x70B9;&#x665A;&#xFF0C;&#x5728;&#x5BBF;&#x820D;&#x8981;&#x65AD;&#x7535;&#x65AD;&#x7F51;&#x4E86;&#xFF0C;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;&#x4E86;&#x3002;<br>&#x8FD8;&#x662F;&#x6267;&#x884C;&#x6211;&#x4E00;&#x8D2F;&#x7684;&#x505A;&#x6CD5;&#x4E0A;&#x5F20;&#x6548;&#x679C;&#x56FE;&#x5427;</p>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/04/09/php&#x4E0E;android&#x7684;&#x7B80;&#x5355;&#x4EA4;&#x4E92;/3.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"pickerView的开源依赖","url":"https://www.rousetime.com/2016/04/04/pickerView的开源依赖/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x4E0A;&#x4E2A;&#x6708;&#x7684;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4ECA;&#x5929;&#x6211;&#x628A;&#x5B83;&#x4FEE;&#x6539;&#x4E86;&#x4E0B;&#xFF0C;&#x4E0A;&#x4F20;&#x5230;&#x4E86;&#x5F00;&#x6E90;&#x5E93;&#x4E2D;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4E0B;&#x9762;&#x8BF4;&#x4E0B;&#x7B80;&#x5355;&#x7684;&#x53D8;&#x5316;.</p>\n<h2 id=\"&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\"><a href=\"#&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;\"></a>&#x5B9E;&#x4F8B;&#x5316;&#x7C7B;&#x7684;&#x6539;&#x53D8;</h2><p>&#x539F;&#x5148;&#x662F;&#x4F7F;&#x7528;TextPicker&#x7C7B;&#x6765;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x73B0;&#x5728;&#x4FEE;&#x6539;&#x6210;MyPicker.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MyPicker picker = new MyPicker();</div></pre></td></tr></table></figure>\n<h2 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;&#x7684;&#x589E;&#x5220;</h2><ul>\n<li>&#x5220;&#x9664;&#x4E86;&#x539F;&#x6765;&#x7684;&#x83B7;&#x53D6;&#x786E;&#x5B9A;&#x63A7;&#x4EF6; getOK()&#x65B9;&#x6CD5;</li>\n<li>&#x589E;&#x52A0;&#x4E86;&#x663E;&#x793A;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x7684;&#x4E2A;&#x6570; setShowNum()&#x65B9;&#x6CD5;</li>\n<li>&#x589E;&#x52A0;&#x4E86;&#x5B8C;&#x6210;&#x76D1;&#x542C;&#x4E8B;&#x4EF6; setSelectedFinishListener()&#x65B9;&#x6CD5;</li>\n</ul>\n<h2 id=\"&#x4F7F;&#x7528;Demo\"><a href=\"#&#x4F7F;&#x7528;Demo\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;Demo\"></a>&#x4F7F;&#x7528;Demo</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">tp = new MyPicker(this);</div><div class=\"line\">        //init data</div><div class=\"line\">        initData();</div><div class=\"line\">        //loding data</div><div class=\"line\">        tp.setData(leftList, 1);</div><div class=\"line\">        tp.setData(middleList, 2);</div><div class=\"line\">        tp.setData(rightList, 3);</div><div class=\"line\">        //set title</div><div class=\"line\">        tp.setPickerTitle(getResources().getString(R.string.title_name));</div><div class=\"line\">        //set the default centered text</div><div class=\"line\">        //if not set,show centered text in the data</div><div class=\"line\">        tp.setMiddleText(5, 1);</div><div class=\"line\">        tp.setMiddleText(2, 2);</div><div class=\"line\">        tp.setMiddleText(25, 3);</div><div class=\"line\">        //redy</div><div class=\"line\">        tp.setPrepare();</div><div class=\"line\">        // default show three</div><div class=\"line\">//        tp.setShowNum(3);</div><div class=\"line\">        tp.setSelectedFinishListener(new MyPicker.SelectedFinishListener() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onFinish() {</div><div class=\"line\">                leftText = String.valueOf(tp.getText(1));</div><div class=\"line\">                middleText = String.valueOf(tp.getText(2));</div><div class=\"line\">                rightText = String.valueOf(tp.getText(3));</div><div class=\"line\">                tv.setText(leftText+&quot;-&quot;+middleText+&quot;-&quot;+rightText);</div><div class=\"line\">                tp.dismiss();</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        tp.showAtLocation(this.findViewById(R.id.main), Gravity.CENTER, 0, 0);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">dependencies {</div><div class=\"line\">    compile &apos;com.idisfkj.picker:mypicker:1.2.1&apos;</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x73B0;&#x5728;&#x4F7F;&#x7528;&#x53EA;&#x8981;&#x5982;&#x4E0A;&#x4E00;&#x53E5;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x8BB8;&#x591A;</em></p>\n</blockquote>\n<h2 id=\"&#x7ED3;&#x8BED;\"><a href=\"#&#x7ED3;&#x8BED;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BED;\"></a>&#x7ED3;&#x8BED;</h2><p>&#x5982;&#x679C;&#x8FD8;&#x60F3;&#x8981;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x539F;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6211;&#x539F;&#x6765;&#x7684;&#x6587;&#x7AE0;&#xFF1A;</p>\n<p><a href=\"http://idisfkj.github.io/2016/03/13/PickerView/\" target=\"_blank\" rel=\"external\">&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;</a></p>\n<p>Github&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/idisfkj.picker\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/idisfkj.picker</a><br>&#x6B22;&#x8FCE;Fork Star</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"RecyclerView深入浅出","url":"https://www.rousetime.com/2016/04/02/RecyclerView深入浅出/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p><strong>RecyclerView</strong>&#x5DF2;&#x7ECF;&#x51FA;&#x6765;&#x597D;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x65B0;&#x63A5;&#x89E6;<strong>Android</strong>&#x7684;&#x5B66;&#x5458;&#x6765;&#x8BF4;&#x5927;&#x591A;&#x6570;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#xFF0C;&#x5BF9;&#x4E8E;<strong>RecyclerView</strong>&#x7684;&#x4F7F;&#x7528;&#x53EF;&#x80FD;&#x90FD;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x76F8;&#x4FE1;&#x8FD9;&#x7247;&#x6587;&#x7AE0;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x5E26;&#x4F60;&#x8FDB;&#x53BB;<strong>RecyclerView</strong>&#x7684;&#x5927;&#x95E8;&#xFF0C;&#x5FEB;&#x901F;&#x4E86;&#x89E3;&#x4E0E;&#x638C;&#x63E1;&#x65B0;&#x6280;&#x672F;&#x3002;</p>\n<h2 id=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"><a href=\"#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;\"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h2><p>&#x5927;&#x5BB6;&#x4F7F;&#x7528;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#x53EA;&#x8981;&#x5728;<strong>xml</strong>&#x4E2D;&#x5F15;&#x7528;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x6CA1;&#x9519;<strong>RecyclerView</strong>&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5728;&#x5F15;&#x7528;&#x524D;&#x8981;&#x5148;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;,&#x5728;&#x9879;&#x76EE;&#x7684;<strong>app</strong>&#x76EE;&#x5F55;&#x4E0B;&#x7684;<strong>build.gradl</strong>&#x7684;dependencies&#x4E2D;&#x6DFB;&#x52A0;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compile &apos;com.android.support:recyclerview-v7:23.2.0&apos;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5B8C;&#x4E86;&#x4E4B;&#x540E;&#x522B;&#x5FD8;&#x4E86;Sync Now</em></p>\n</blockquote>\n<h2 id=\"Adapter&#x53D8;&#x5316;\"><a href=\"#Adapter&#x53D8;&#x5316;\" class=\"headerlink\" title=\"Adapter&#x53D8;&#x5316;\"></a>Adapter&#x53D8;&#x5316;</h2><p>&#x65E2;&#x7136;&#x8981;&#x6709;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#x7684;&#x6548;&#x679C;&#x81EA;&#x7136;&#x4E0D;&#x80FD;&#x5C11;&#x4E86;<strong>adapter</strong>,&#x800C;<strong>RecyclerView</strong>&#x7684;<strong>adapter</strong>&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x91CD;&#x5927;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x539F;&#x6765;<strong>adapter</strong>&#x4E2D;&#x7684;<strong>getView()</strong>&#x65B9;&#x6CD5;&#x53D6;&#x6D88;&#x4E86;&#xFF0C;&#x66FF;&#x6362;&#x6210;&#x4E86;<strong>onCreateViewHolder()</strong>&#x4E0E;<strong>onBindViewHolder()</strong>&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5206;&#x6210;&#x4E86;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x521B;&#x5EFA;&#x89C6;&#x56FE;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x7ED1;&#x5B9A;&#x6570;&#x636E;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5C42;&#x6B21;&#x66F4;&#x6E05;&#x6670;&#x4E86;&#x5462;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E4B;&#x4E24;&#x5927;&#x65B9;&#x6CD5;&#x7684;&#x4F7F;&#x7528;&#x3002;</p>\n<h3 id=\"onCreateViewHolder\"><a href=\"#onCreateViewHolder\" class=\"headerlink\" title=\"onCreateViewHolder\"></a>onCreateViewHolder</h3><p>&#x8BF4;&#x767D;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x89C6;&#x56FE;&#xFF0C;&#x5728;&#x521B;&#x5EFA;&#x4E4B;&#x524D;&#x8981;&#x521B;&#x5EFA;&#x4E2A;<strong>ViewHolder</strong>&#x76F8;&#x4FE1;&#x5728;&#x539F;&#x6765;&#x7684;<strong>adapter</strong>&#x4E2D;&#x5E94;&#x8BE5;&#x6709;&#x4F7F;&#x7528;&#x8FC7;&#x5427;.&#x8FD9;&#x91CC;&#x7EE7;&#x627F;<strong>RecyclerView.ViewHolder</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public static class NormalViewHolder extends RecyclerView.ViewHolder {</div><div class=\"line\">        @Bind(R.id.item_tv)</div><div class=\"line\">        TextView itemTv;</div><div class=\"line\">        public NormalViewHolder(View itemView) {</div><div class=\"line\">            super(itemView);</div><div class=\"line\">            ButterKnife.bind(this, itemView);</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5728;<strong>onCreateViewHolder</strong>&#x4E2D;&#x8C03;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">   public NormalViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">       return new NormalViewHolder(mLayoutInflater.inflate(R.layout.item_text, parent, false));</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h3 id=\"onBindViewHolder\"><a href=\"#onBindViewHolder\" class=\"headerlink\" title=\"onBindViewHolder\"></a>onBindViewHolder</h3><p>&#x89C6;&#x56FE;&#x521B;&#x5EFA;&#x5B8C;&#x6BD5;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7ED1;&#x5B9A;&#x4E86;&#xFF0C;&#x4F7F;&#x7528;holder&#x5BF9;&#x63A7;&#x4EF6;&#x8FDB;&#x884C;&#x7ED1;&#x5B9A;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">public void onBindViewHolder(NormalViewHolder holder, int position) {</div><div class=\"line\">    holder.itemTv.setText((CharSequence) mListData.get(position));</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<p>OK&#x4E86;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5F88;&#x7B80;&#x5355;&#x5462;&#xFF1F;&#x662F;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x81F3;&#x4E8E;&#x8BBE;&#x7F6E;adapter&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#x76F8;&#x4FE1;&#x4E4B;&#x540E;&#x7684;&#x6B65;&#x9AA4;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x4E86;&#x3002;</p>\n<h3 id=\"setLayoutManager\"><a href=\"#setLayoutManager\" class=\"headerlink\" title=\"setLayoutManager\"></a>setLayoutManager</h3><p>&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x60F3;&#x8BF4;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x7684;&#x65B9;&#x5F0F;&#x662F;<strong>ListView</strong>&#x4E0E;<strong>GridView</strong>&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x53EA;&#x9700;&#x4E00;&#x53E5;&#x4EE3;&#x7801;&#xFF0C;<strong>setLayoutManager()</strong>&#x5373;&#x53EF;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">switch (type) {</div><div class=\"line\">            case App.LINEAR_LAYOUT:</div><div class=\"line\">            \t//ListView</div><div class=\"line\">                recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));</div><div class=\"line\">                break;</div><div class=\"line\">            case App.GRID_LAYOUT:</div><div class=\"line\">            \t//GridView</div><div class=\"line\">                gridLayoutManager = new GridLayoutManager(getActivity(),3);</div><div class=\"line\">                recyclerView.setLayoutManager(gridLayoutManager);</div><div class=\"line\">                break;                </div><div class=\"line\">            case App.STAGGERED_GRID_LAYOUT:</div><div class=\"line\">            \t//Can customize the waterfall flow</div><div class=\"line\">                recyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, OrientationHelper.VERTICAL));</div><div class=\"line\">                break;</div><div class=\"line\">            default:</div><div class=\"line\">                break;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8BBE;&#x7F6E;&#x4E86;&#x663E;&#x793A;&#x7684;&#x65B9;&#x5F0F;&#x540E;&#x518D;setAdapter()&#x5373;&#x53EF;,&#x6548;&#x679C;&#x56FE;&#x8FD8;&#x662F;&#x653E;&#x5230;&#x6700;&#x540E;&#x4E00;&#x8D77;&#x663E;&#x793A;&#x5427;</em></p>\n</blockquote>\n<h2 id=\"ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\"><a href=\"#ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\" class=\"headerlink\" title=\"ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;\"></a>ListView&#x4E0E;GridView&#x5D4C;&#x5957;&#x6548;&#x679C;</h2><p>&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x9996;&#x5C3E;&#x662F;<strong>ListView</strong>&#x5E03;&#x5C40;&#x6548;&#x679C;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;<strong>GridView</strong>&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>RecyclerView.Adapter</strong>&#x63D0;&#x4F9B;&#x7684;<strong>getItemViewType(int position)</strong>&#x65B9;&#x6CD5;&#xFF0C;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x4E0E;<strong>ListView</strong>&#x7684;<strong>adapter</strong>&#x4E0D;&#x540C;&#x53EA;&#x6709;&#x8FD9;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6CA1;&#x6709;<strong>getViewTypeCount() </strong>&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9996;&#x5C3E;&#x8981;&#x663E;&#x793A;&#x7684;&#x884C;&#x6570;&#x6765;&#x63A7;&#x5236;&#x663E;&#x793A;&#x7684;&#x5E03;&#x5C40;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public int getItemViewType(int position) {</div><div class=\"line\">        mHeadCount = getHeadCount();</div><div class=\"line\">        mContentCount = getContentCount();</div><div class=\"line\">        mBottomCount = mHeadCount + mContentCount;</div><div class=\"line\">        if (mHeadCount &gt; position) {</div><div class=\"line\">            return App.LINEAR_LAYOUT;//ListView</div><div class=\"line\">        } else if (mBottomCount &lt;= position) {</div><div class=\"line\">            return App.STAGGERED_GRID_LAYOUT;//Can customize the waterfall flow</div><div class=\"line\">        } else {</div><div class=\"line\">            return App.GRID_LAYOUT;//GridView</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;viewtype&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x5E03;&#x5C40;</em></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {</div><div class=\"line\">        switch (viewType) {</div><div class=\"line\">            case App.LINEAR_LAYOUT:</div><div class=\"line\">                return onCreateHeadViewHolder(parent);</div><div class=\"line\">            case App.GRID_LAYOUT:</div><div class=\"line\">                return onCreateContentViewHolder(parent);</div><div class=\"line\">            case App.STAGGERED_GRID_LAYOUT:</div><div class=\"line\">                return onCreateBottomViewHolder(parent);</div><div class=\"line\">            default:</div><div class=\"line\">                return null;</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"RecyclerView&#x52A8;&#x753B;\"><a href=\"#RecyclerView&#x52A8;&#x753B;\" class=\"headerlink\" title=\"RecyclerView&#x52A8;&#x753B;\"></a>RecyclerView&#x52A8;&#x753B;</h2><p><strong>RecyclerView</strong>&#x7684;<strong>adapter</strong>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x90E8;&#x5206;:</p>\n<ul>\n<li>notifyItemRemoved(int position)</li>\n<li>notifyItemInserted(int position)</li>\n<li>notifyItemChanged(int position)</li>\n<li>notifyItemRangeChanged(int positionStart,int itemCount)</li>\n</ul>\n<p>&#x53EA;&#x8981;&#x5728;&#x6570;&#x636E;&#x6539;&#x53D8;&#x65F6;&#x901A;&#x8FC7;<strong>adapter</strong>&#x8C03;&#x7528;&#x5C31;&#x884C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">@OnClick(R.id.item_tv)</div><div class=\"line\">       public void onClick() {</div><div class=\"line\">           if (getLayoutPosition() != 1) {</div><div class=\"line\">               animationAdapter.mListData.add(&quot;add&quot;+getLayoutPosition());</div><div class=\"line\">               animationAdapter.notifyItemInserted(getLayoutPosition());</div><div class=\"line\">           } else {</div><div class=\"line\">               animationAdapter.mListData.remove(getLayoutPosition());</div><div class=\"line\">               animationAdapter.notifyItemRemoved(getLayoutPosition());</div><div class=\"line\">           }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;<strong>recyclerView</strong>&#x7684;<strong>setItemAnimator()</strong>&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x52A8;&#x753B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.setItemAnimator(new DefaultItemAnimator());</div></pre></td></tr></table></figure>\n<p>&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x53EA;&#x8981;<strong>extends</strong> ItemAnimator&#x91CD;&#x5199;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;&#x4E86;&#xFF0C;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x53BB;&#x8BD5;&#x8BD5;&#x3002;</p>\n<h2 id=\"RecyclerView&#x7684;CursorAdapter\"><a href=\"#RecyclerView&#x7684;CursorAdapter\" class=\"headerlink\" title=\"RecyclerView&#x7684;CursorAdapter\"></a>RecyclerView&#x7684;CursorAdapter</h2><p>&#x8BB2;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#x4F60;&#x53EF;&#x4EE5;&#x80FD;&#x4F1A;&#x8BA4;&#x4E3A;<strong>CursorAdapter</strong>&#x4E5F;&#x662F;&#x8DDF;&#x539F;&#x6765;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x4F46;&#x6211;&#x8981;&#x8BF4;&#x7684;&#x662F;<strong>RecyclerView</strong>&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6709;&#x5173;&#x4E0E;<strong>CursorAdapter</strong>&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x4F7F;&#x7528;<strong>CursorAdapter</strong>&#x65F6;&#x8981;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;<strong>CursorAdapter</strong>&#x7684;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x611F;&#x89C9;&#x5934;&#x75DB;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x770B;&#x8D77;&#x6765;&#x786E;&#x5B9E;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x544A;&#x8BC9;&#x4F60;&#x4EEC;&#x5B9E;&#x73B0;&#x4E5F;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BF4;&#x5462;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x4EFF;&#x9020;<strong>ListView</strong>&#x7684;<strong>CursorAdapter</strong>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h3 id=\"CursorFilter\"><a href=\"#CursorFilter\" class=\"headerlink\" title=\"CursorFilter\"></a>CursorFilter</h3><p>&#x8FD9;&#x4E2A;&#x662F;<strong>Cursor</strong>&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x627E;&#x5230;<strong>ListView</strong>&#x7684;<strong>CursorFilter</strong>&#x590D;&#x5236;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x6CA1;&#x4EC0;&#x4E48;&#x8D34;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x6E90;&#x7801;&#xFF0C;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x53BB;&#x67E5;&#x770B;.</p>\n<h3 id=\"RecyclerBaseCursorAdapter\"><a href=\"#RecyclerBaseCursorAdapter\" class=\"headerlink\" title=\"RecyclerBaseCursorAdapter\"></a>RecyclerBaseCursorAdapter</h3><p>&#x8FD9;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x4E0E;<strong>ListView</strong>&#x7684;<strong>CursorAdapter</strong>&#x76F8;&#x540C;&#xFF0C;&#x53EA;&#x662F;&#x6709;&#x51E0;&#x4E2A;&#x5730;&#x65B9;&#x9700;&#x8981;&#x7279;&#x522B;&#x63D0;&#x9192;&#x4E0B;</p>\n<ul>\n<li>&#x539F;&#x6765;&#x7684;&#x6709;notifyDataSetInvalidated()&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;RecyclerView&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;notifyDataSetChanged()&#x66FF;&#x4EE3;</li>\n<li>&#x539F;&#x6765;&#x7684;hasStableIds() &#x65B9;&#x6CD5;&#x4E5F;&#x6CA1;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;setHasStableIds(true)&#x8BBE;&#x7F6E;&#x4E3A;ture&#x6765;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;</li>\n<li>&#x539F;&#x6765;&#x7684;<strong>getView()</strong>&#x65B9;&#x6CD5;&#x8981;&#x66FF;&#x6362;&#x6210;<strong>onBindViewHolder()</strong>&#x65B9;&#x6CD5;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">void init(Context context, Cursor c, int flags) {</div><div class=\"line\">        boolean cursorPresent = c != null;</div><div class=\"line\">        mCursor = c;</div><div class=\"line\">        mDataValid = cursorPresent;</div><div class=\"line\">        mContext = context;</div><div class=\"line\">        mRowIDColumn = cursorPresent ? c.getColumnIndexOrThrow(&quot;_id&quot;) : -1;</div><div class=\"line\">        if ((flags &amp; FLAG_REGISTER_CONTENT_OBSERVER) == FLAG_REGISTER_CONTENT_OBSERVER) {</div><div class=\"line\">            mChangeObserver = new ChangeObserver();</div><div class=\"line\">            mDataSetObserver = new MyDataSetObserver();</div><div class=\"line\">        } else {</div><div class=\"line\">            mChangeObserver = null;</div><div class=\"line\">            mDataSetObserver = null;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        if (cursorPresent) {</div><div class=\"line\">            if (mChangeObserver != null) c.registerContentObserver(mChangeObserver);</div><div class=\"line\">            if (mDataSetObserver != null) c.registerDataSetObserver(mDataSetObserver);</div><div class=\"line\">        }</div><div class=\"line\">        //should set true to init</div><div class=\"line\">        setHasStableIds(true);</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">        public void onInvalidated() {</div><div class=\"line\">            mDataValid = false;</div><div class=\"line\">//            notifyDataSetInvalidated();</div><div class=\"line\">            //there is no notifyDataSetInvalidated method we should use notifyDataSetChanged method;</div><div class=\"line\">            notifyDataSetChanged();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x57FA;&#x672C;&#x4E0A;&#x4E3B;&#x8981;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x66F4;&#x591A;&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x540E;&#x9762;&#x7684;<strong>Demo</strong>&#x94FE;&#x63A5;&#xFF0C;&#x6700;&#x540E;&#x4F7F;&#x7528;&#x90FD;&#x76F8;&#x540C;&#x7684;&#x5957;&#x8DEF;&#xFF0C;&#x7EE7;&#x627F;&#x8BE5;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x76F8;&#x4FE1;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;</em></p>\n</blockquote>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/04/02/RecyclerView&#x6DF1;&#x5165;&#x6D45;&#x51FA;/RecyclerView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<h1 id=\"&#x7ED3;&#x8BED;\"><a href=\"#&#x7ED3;&#x8BED;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BED;\"></a>&#x7ED3;&#x8BED;</h1><p>&#x6E90;&#x7801;&#x5730;&#x5740;&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/RecyclerView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/RecyclerView</a><br>&#x6700;&#x540E;&#x611F;&#x8C22;&#x5927;&#x5BB6;&#x7684;&#x9605;&#x8BFB;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x7684;&#x5730;&#x65B9;&#x6B22;&#x8FCE;&#x6307;&#x51FA;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Android 开源SlideSwitch源码分析","url":"https://www.rousetime.com/2016/03/26/Android-开源SlideSwitch源码分析/","content":"<p>&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;<strong>android</strong>&#x7684;&#x6700;&#x5927;&#x597D;&#x5904;&#x5C31;&#x662F;&#x5F00;&#x6E90;&#xFF0C;&#x5176;&#x5B9E;&#x5F88;&#x591A;&#x9879;&#x76EE;&#x80FD;&#x5168;&#x90E8;&#x7528;&#x5F00;&#x6E90;&#x5C31;&#x80FD;&#x641E;&#x5B9A;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x7528;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x61C2;&#x5F97;&#x5B83;&#x4EEC;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x8FC7;&#x773C;&#x4E91;&#x70DF;&#xFF0C;&#x884C;&#x5C38;&#x8D70;&#x8089;&#xFF0C;&#x53EA;&#x6709;&#x7A7A;&#x58F3;&#x6CA1;&#x6709;&#x5B9D;&#x8D35;&#x7684;&#x601D;&#x60F3;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x4E00;&#x65E6;&#x8981;&#x7EF4;&#x62A4;&#x4E8E;&#x4F18;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9002;&#x5E94;&#x9700;&#x6C42;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x90A3;&#x4E9B;&#x53EA;&#x4F1A;&#x62FF;&#x6765;&#x7528;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x53EA;&#x80FD;&#x76EE;&#x77AA;&#x53E3;&#x5446;&#x3002;&#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x6CA1;&#x6709;&#x52A0;&#x5FEB;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x901F;&#x5EA6;&#x800C;&#x4E14;&#x8FD8;&#x4F1A;&#x8BA9;&#x6211;&#x4EEC;&#x5168;&#x76D8;&#x7686;&#x8F93;&#x3002;&#x597D;&#x4E86;&#x5176;&#x5B83;&#x7684;&#x4E5F;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x6B63;&#x5F0F;&#x8FDB;&#x5165;&#x4E3B;&#x9898;&#xFF0C;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x5BF9;<strong>SlideSwitch</strong>&#x5F00;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x7406;&#x89E3;&#x3002;</p>\n<hr>\n<h1 id=\"&#x8BF4;&#x660E;\"><a href=\"#&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"&#x8BF4;&#x660E;\"></a>&#x8BF4;&#x660E;</h1><p>&#x9996;&#x5148;&#x8FD8;&#x662F;&#x8981;&#x8BF4;&#x660E;&#x4E0B;<strong>SlideSwitch</strong>&#x662F;&#x4EC0;&#x4E48;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5176;&#x5B9E;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6211;&#x4EEC;&#x51E0;&#x4E4E;&#x6BCF;&#x4E2A;&#x9879;&#x76EE;&#x4E2D;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x6ED1;&#x52A8;&#x5F00;&#x5173;&#xFF0C;&#x8FD8;&#x4E0D;&#x61C2;&#x8BF7;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<h1 id=\"&#x5206;&#x6790;&#x8981;&#x70B9;\"><a href=\"#&#x5206;&#x6790;&#x8981;&#x70B9;\" class=\"headerlink\" title=\"&#x5206;&#x6790;&#x8981;&#x70B9;\"></a>&#x5206;&#x6790;&#x8981;&#x70B9;</h1><ul>\n<li>TypedArray &#x7684;&#x4F7F;&#x7528;</li>\n<li>onMeasure &#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x521D;&#x59CB;&#x5316;</li>\n<li>onDraw &#x7ED8;&#x5236;&#x56FE;&#x5F62;</li>\n<li>onTouchEvent &#x76D1;&#x542C;&#x89E6;&#x6478;&#x70B9;&#x51FB;</li>\n<li>ValueAnimator &#x52A8;&#x753B;&#x5B9E;&#x73B0;</li>\n<li>SlideSwitchListener &#x63A5;&#x53E3;</li>\n</ul>\n<h2 id=\"TypedArray\"><a href=\"#TypedArray\" class=\"headerlink\" title=\"TypedArray\"></a>TypedArray</h2><p>&#x4E00;&#x822C;&#x81EA;&#x5B9A;&#x4E49;&#x63A7;&#x4EF6;&#x90FD;&#x8981;&#x7528;&#x5230;<strong>TypedArray</strong>&#xFF0C;&#x6240;&#x4EE5;<strong>SlideSwitch</strong>&#x81EA;&#x7136;&#x5C11;&#x4E0D;&#x4E86;&#x3002;&#x5B83;&#x5C31;&#x7EE7;&#x627F;&#x4E86;<strong>Android</strong>&#x539F;&#x751F;&#x7684;<strong>View</strong>&#x3002;&#x800C;<strong>TypedArray</strong>&#x662F;&#x83B7;&#x53D6;&#x81EA;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x7684;&#x53C2;&#x6570;&#x503C;&#x3002;<br>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x4F1A;&#x5728;<strong>styles</strong>&#x6216;&#x8005;<strong>attrs</strong>&#x4E2D;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x53C2;&#x6570;</p>\n<pre><code>&lt;declare-styleable name=&quot;slideswitchview&quot; &gt;\n    &lt;attr name=&quot;themeColor&quot; format=&quot;color&quot;&gt;&lt;/attr&gt;\n    &lt;attr name=&quot;isOpen&quot; format=&quot;boolean&quot;&gt;&lt;/attr&gt;\n    &lt;attr name=&quot;shape&quot; format=&quot;integer&quot;&gt;&lt;/attr&gt;\n&lt;/declare-styleable&gt;      \n</code></pre><p><strong>format</strong>&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x5728;<strong>XML</strong>&#x4E2D;&#x5F15;&#x7528;&#xFF0C;&#x5F15;&#x7528;&#x4E4B;&#x524D;&#x4E00;&#x5B9A;&#x8981;&#x52A0;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x58F0;&#x660E;</p>\n<pre><code>xmlns:slideswitch=&quot;http://schemas.android.com/apk/res/xxx&quot;    \n</code></pre><p>xxx:&#x4EE3;&#x8868;&#x5305;&#x540D;&#x3002;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x5C31;&#x884C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">slideswitch:themeColor=&quot;#ffaaff&quot;</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x83B7;&#x53D6;&#x8BBE;&#x7F6E;&#x7684;&#x53C2;&#x6570;&#x503C;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.slideswitchview);</div><div class=\"line\">       theme_color = \tta.getColor(R.styleable.slideswitchview_themeColor, DEFAULT_THEME_COLOR);</div><div class=\"line\">       ta.recycle();</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x4F7F;&#x7528;&#x5B8C;&#x540E;&#x52A1;&#x5FC5;recycle&#x5426;&#x5219;&#x4F1A;&#x5BF9;&#x4E0B;&#x6B21;&#x7684;&#x4F7F;&#x7528;&#x9020;&#x6210;&#x5F71;&#x54CD;</em></p>\n</blockquote>\n<h2 id=\"onMeasure\"><a href=\"#onMeasure\" class=\"headerlink\" title=\"onMeasure\"></a>onMeasure</h2><p>&#x6BCF;&#x6B21;&#x89C6;&#x56FE;&#x7684;&#x521B;&#x5EFA;&#x90FD;&#x8981;&#x5148;&#x83B7;&#x53D6;&#x89C6;&#x56FE;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x6B21;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x53C2;&#x6570;<strong>widthMeasureSpec</strong>&#x4E0E;<strong>heightMeasuerSpec</strong>&#x4E0D;&#x662F;&#x4E00;&#x822C;&#x7684;&#x5C3A;&#x5BF8;&#xFF0C;&#x800C;&#x662F;&#x5305;&#x62EC;&#x4E86;<strong>size</strong>&#x4E0E;<strong>mode</strong>&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x83B7;&#x53D6;&#x5B9E;&#x9645;&#x7684;&#x5BBD;&#x9AD8;&#xFF0C;&#x8981;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x5206;&#x522B;&#x83B7;&#x53D6;<strong>size</strong>&#x4E0E;<strong>mode</strong>&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">int size = MeasureSpec.getSize(measureSpec);</div><div class=\"line\">int mode = MeasureSpec.getMode(measureSpec);</div></pre></td></tr></table></figure>\n<p>&#x901A;&#x8FC7;<strong>mode</strong>&#x6765;&#x83B7;&#x53D6;<strong>size</strong>&#xFF0C;<strong>mode</strong>&#x6709;&#x4E09;&#x79CD;&#xFF1A;</p>\n<ul>\n<li>EXACTLY  &#x7CBE;&#x786E;&#x5C3A;&#x5BF8;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x5C3A;&#x5BF8;</li>\n<li>UNSPECIFIED &#x4E3A;&#x6307;&#x5B9A;&#x7684; </li>\n<li>AT_MOST    &#x6700;&#x5927;&#x5C3A;&#x5BF8; &#x5F62;&#x5982;&#x6307;&#x5B9A;WRAP_CONTENT&#x5728;&#x7236;&#x63A7;&#x4EF6;&#x5141;&#x8BB8;&#x7684;&#x8303;&#x56F4;&#x5185;</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (mode == MeasureSpec.EXACTLY) {</div><div class=\"line\">           result = size;</div><div class=\"line\">       } else {</div><div class=\"line\">           result = DefaultSize; //UNSPECIFIED</div><div class=\"line\">           if (mode == MeasureSpec.AT_MOST) {</div><div class=\"line\">               result = Math.min(size, result);</div><div class=\"line\">           }</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x5176;&#x5B83;&#x7B80;&#x5355;&#x7684;&#x53C2;&#x6570;&#x503C;&#x8BBE;&#x7F6E;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65;&#x6700;&#x540E;&#x7684;&#x6E90;&#x7801;</em></p>\n</blockquote>\n<h2 id=\"onDraw\"><a href=\"#onDraw\" class=\"headerlink\" title=\"onDraw\"></a>onDraw</h2><p>&#x5C3A;&#x5EA6;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x540E;&#xFF0C;&#x4E0B;&#x9762;&#x81EA;&#x7136;&#x5C31;&#x662F;&#x7ED8;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#x9009;&#x62E9;&#x5F00;&#x5173;&#x5F62;&#x72B6;&#x6709;&#x77E9;&#x5F62;&#x7684;&#x4E5F;&#x6709;&#x5706;&#x89D2;&#x77E9;&#x5F62;&#x6240;&#x4EE5;&#x6839;&#x636E;<strong>shpe</strong>&#x7684;&#x503C;&#x6765;&#x7ED8;&#x5236;&#x76F8;&#x5E94;&#x7684;&#x5F62;&#x72B6;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;&#x77E9;&#x5F62;&#x4E3A;&#x4F8B;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">if (shape == 1) {</div><div class=\"line\">           mPaint.setColor(Color.GRAY);</div><div class=\"line\">           //&#x7ED8;&#x5236;close&#x65F6;&#x7684;&#x7070;&#x8272;&#x80CC;&#x666F;</div><div class=\"line\">           canvas.drawRect(backRect, mPaint);</div><div class=\"line\">           mPaint.setColor(theme_color);</div><div class=\"line\">           mPaint.setAlpha(alpha);</div><div class=\"line\">           //&#x7ED8;&#x5236;open&#x65F6;&#x7684;&#x5F69;&#x8272;&#x6E10;&#x53D8;&#x80CC;&#x666F;</div><div class=\"line\">           canvas.drawRect(backRect, mPaint);</div><div class=\"line\">           mPaint.setColor(Color.WHITE);</div><div class=\"line\">           frontRect.set(front_left, pandding, front_left + getMeasuredWidth() / 2 - pandding</div><div class=\"line\">                   , getMeasuredHeight() - pandding);</div><div class=\"line\">           //&#x7ED8;&#x5236;&#x6ED1;&#x52A8;&#x5668;</div><div class=\"line\">           canvas.drawRect(frontRect, mPaint);</div><div class=\"line\">       }</div></pre></td></tr></table></figure>\n<p>&#x5176;&#x4E2D;<strong>padding</strong>&#x4EE3;&#x8868;&#x5185;&#x8FB9;&#x8DDD;&#xFF0C;&#x5C31;&#x662F;&#x6ED1;&#x52A8;&#x5668;&#x8DDD;&#x8FB9;&#x6846;&#x7684;&#x8DDD;&#x79BB;</p>\n<h2 id=\"onTouchEvent\"><a href=\"#onTouchEvent\" class=\"headerlink\" title=\"onTouchEvent\"></a>onTouchEvent</h2><p>&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x7684;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#xFF0C;&#x6839;&#x636E;<strong>ACTION_DOWN</strong>&#xFF0C;<strong>ACTION_MOVE</strong>&#xFF0C;<strong>ACTION_UP</strong>&#x6765;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x6548;&#x679C;&#xFF0C;&#x81F3;&#x4E8E;&#x70B9;&#x5750;&#x6807;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x6E90;&#x7801;&#x5F88;&#x6E05;&#x695A;&#x3002;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x63D0;&#x4E0B;<strong>alpha</strong>&#x53C2;&#x6570;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x662F;&#x5B9E;&#x73B0;&#x989C;&#x8272;&#x7684;&#x900F;&#x660E;&#x6548;&#x679C;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#x7684;&#x95F4;&#x8DDD;&#xFF0C;&#x52A8;&#x6001;&#x7684;&#x6539;&#x53D8;<strong>alpha</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">alpha = (int) (255 * (float) front_left / (float) max_left);</div></pre></td></tr></table></figure>\n<h2 id=\"ValueAnimator\"><a href=\"#ValueAnimator\" class=\"headerlink\" title=\"ValueAnimator\"></a>ValueAnimator</h2><p>&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;&#x52A8;&#x753B;&#x6548;&#x679C;&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x901A;&#x8FC7;&#x7B80;&#x5355;&#x7684;&#x51E0;&#x6B65;&#x5C31;&#x80FD;&#x8FC5;&#x901F;&#x7684;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;<br>&#x9996;&#x5148;&#x5B9E;&#x4F8B;&#x5316;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>ofInt()</strong>&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x6709;<strong>ofFloat()</strong>&#x7B49;&#x9759;&#x6001;&#x5B9E;&#x4F8B;&#x5316;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ValueAnimator valueAnimator = ValueAnimator.ofInt(front_left, toRight ? max_left : min_left);</div></pre></td></tr></table></figure>\n<p>&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x521D;&#x503C;&#x4E0E;&#x7ED3;&#x675F;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">//&#x8BBE;&#x7F6E;&#x63D2;&#x503C;&#x5668;</div><div class=\"line\"> \tvalueAnimator.setInterpolator(new  AccelerateDecelerateInterpolator());</div><div class=\"line\">   valueAnimator.setDuration(500);</div><div class=\"line\">   valueAnimator.start();</div></pre></td></tr></table></figure>\n<p><strong>Interpolator</strong>&#x662F;&#x5B9A;&#x4E49;&#x52A8;&#x753B;&#x7684;&#x53D8;&#x5316;&#x8FC7;&#x7A0B;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x53C2;&#x6570;</p>\n<ul>\n<li>AccelerateDecelerateInterpolator &#x5F00;&#x59CB;&#x7ED3;&#x675F;&#x6162; &#x4E2D;&#x95F4;&#x8FC7;&#x7A0B;&#x5FEB;</li>\n<li>AccelerateInterpolator &#x52A0;&#x901F;&#x72B6;&#x6001;</li>\n<li>AnticipateInterpolator &#x5148;&#x540E;&#x79FB;&#x4E00;&#x70B9;&#xFF0C;&#x518D;&#x5FEB;&#x901F;&#x79FB;&#x52A8;</li>\n<li>BounceInterpolator &#x5728;&#x6700;&#x540E;&#x6709;&#x5F39;&#x7403;&#x6548;&#x679C; </li>\n</ul>\n<p>&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x6548;&#x679C;&#xFF0C;&#x53EA;&#x8981;&#x7EE7;&#x627F;T<strong>imeInterpolator</strong>&#x7C7B;&#xFF0C;&#x91CD;&#x5199;<strong>getInterpolation</strong>&#x65B9;&#x6CD5;&#x81EA;&#x5B9A;&#x4E49;&#x8BA1;&#x7B97;&#x503C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override  </div><div class=\"line\">   public float getInterpolation(float input) {  </div><div class=\"line\">       // &#x7F16;&#x5199;&#x76F8;&#x5173;&#x7684;&#x903B;&#x8F91;&#x8BA1;&#x7B97;  </div><div class=\"line\">       return input;  </div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x65E2;&#x7136;&#x662F;&#x52A8;&#x753B;&#x81EA;&#x7136;&#x6709;&#x76D1;&#x542C;&#x8BBE;&#x7F6E;<strong>addUpdateListener</strong>&#x5B9E;&#x65F6;&#x6539;&#x53D8;&#x6ED1;&#x52A8;&#x521D;&#x59CB;&#x503C;&#x96E8;<strong>alpha</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {</div><div class=\"line\">           @Override</div><div class=\"line\">           public void onAnimationUpdate(ValueAnimator animation) {</div><div class=\"line\">               front_left = (int) animation.getAnimatedValue();</div><div class=\"line\">               alpha = (int) (255 * (float) front_left / (float) max_left);</div><div class=\"line\">               initloop();</div><div class=\"line\">           }</div><div class=\"line\">       });</div></pre></td></tr></table></figure>\n<p>&#x6700;&#x540E;&#x589E;&#x52A0;<strong>addListener</strong>&#x8C03;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x63A5;&#x53E3;<strong>SlideSwitchListener</strong>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">valueAnimator.addListener(new AnimatorListenerAdapter() {</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onAnimationEnd(Animator animation) {</div><div class=\"line\">                if (toRight) {</div><div class=\"line\">                    isOpen = true;</div><div class=\"line\">                    if (mSlideSwitchListener != null)</div><div class=\"line\">                        mSlideSwitchListener.onOpen();</div><div class=\"line\">                    front_start_left = max_left;</div><div class=\"line\">                } else {</div><div class=\"line\">                    isOpen = false;</div><div class=\"line\">                    if (mSlideSwitchListener != null)</div><div class=\"line\">                        mSlideSwitchListener.onClose();</div><div class=\"line\">                    front_start_left = min_left;</div><div class=\"line\">                }</div><div class=\"line\">            }</div><div class=\"line\">        });</div></pre></td></tr></table></figure>\n<h2 id=\"SlideSwitchListener\"><a href=\"#SlideSwitchListener\" class=\"headerlink\" title=\"SlideSwitchListener\"></a>SlideSwitchListener</h2><p>&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;&#x4F7F;&#x5F97;&#x5728;&#x64CD;&#x4F5C;&#x7C7B;&#x4E2D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x540E;&#x7684;&#x76F8;&#x5173;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">public void setSlideSwitchListener(SlideSwitchListener sideSwitchListener) {</div><div class=\"line\">        mSlideSwitchListener = sideSwitchListener;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    public interface SlideSwitchListener {</div><div class=\"line\">        public void onOpen();</div><div class=\"line\"></div><div class=\"line\">        public void onClose();</div><div class=\"line\"></div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/03/26/Android-&#x5F00;&#x6E90;SlideSwitch&#x6E90;&#x7801;&#x5206;&#x6790;/2.gif\" alt=\"icon\"></p>\n<p>&#x53EA;&#x8981;&#x7A0D;&#x5FAE;&#x590D;&#x6742;&#x7684;&#x5728;&#x8FD9;&#x91CC;&#x90FD;&#x8BB2;&#x5230;&#x4E86;&#xFF0C;&#x8FD8;&#x6709;&#x4E0D;&#x660E;&#x767D;&#x7684;&#x53EF;&#x4EE5;&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x4E0B;&#x9762;&#x6211;&#x6CE8;&#x91CA;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x6216;&#x8005;&#x7559;&#x8A00;&#xFF0C;&#x8C22;&#x8C22;&#x6D4F;&#x89C8;&#x3002;</p>\n<p>&#x6CE8;&#x91CA;&#x6E90;&#x7801;&#x94FE;&#x63A5;&#xFF1A;<a href=\"https://github.com/idisfkj/SlideSwitchView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/SlideSwitchView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"圆形头像","url":"https://www.rousetime.com/2016/03/20/circleView/","content":"<p>&#x73B0;&#x5728;&#x7684;App&#x5934;&#x50CF;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;&#x5706;&#x5F62;&#x7684;&#x4E86;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x77E5;&#x9053;&#x8FD9;&#x8D8B;&#x52BF;&#x662F;&#x600E;&#x4E48;&#x6D41;&#x884C;&#x8D77;&#x6765;&#x7684;&#xFF0C;&#x4F46;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;<strong>Android</strong>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8FD8;&#x662F;&#x8981;&#x968F;&#x7740;&#x6F6E;&#x6D41;&#x524D;&#x8FDB;&#x3002;&#x6240;&#x4EE5;&#x81EA;&#x5DF1;&#x5C31;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x5236;&#x4F5C;&#xFF0C;&#x867D;&#x7136;&#x4E5F;&#x6709;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x4F46;&#x81EA;&#x5DF1;&#x61C2;&#x5F97;&#x539F;&#x7406;&#x8FD8;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x5C31;&#x5206;&#x4EAB;&#x4E0B;&#x81EA;&#x5DF1;&#x7684;&#x6240;&#x5F97;&#xFF0C;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#x6B22;&#x8FCE;&#x6307;&#x6559;&#x3002;</p>\n<hr>\n<h1 id=\"&#x539F;&#x7406;\"><a href=\"#&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x539F;&#x7406;\"></a>&#x539F;&#x7406;</h1><p>&#x5706;&#x5F62;&#x5934;&#x50CF;&#x561B;&#x8BF4;&#x5230;&#x5E95;&#x5C31;&#x662F;&#x5F20;&#x56FE;&#x7247;&#xFF0C;&#x6240;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x5706;&#x5F62;&#x56FE;&#x7247;&#x63A7;&#x4EF6;&#x81EA;&#x7136;&#x8981;&#x7EE7;&#x627F;<strong>Android</strong>&#x539F;&#x751F;&#x7684;<strong>ImgaeView</strong>,&#x5B9E;&#x73B0;&#x5176;&#x4E2D;&#x7684;<strong>setImageBitmap</strong>&#xFF0C;<strong>setImageDrawable</strong>&#xFF0C;<strong>setImageURI</strong>&#xFF0C;<strong>setImageResource</strong>&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5F53;&#x7136;&#x4E3B;&#x8981;&#x7684;<strong>onDraw</strong>&#x65B9;&#x6CD5;&#x4E5F;&#x4E0D;&#x80FD;&#x7F3A;&#x5C11;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x8981;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x7ED8;&#x5236;&#x3002;&#x8FD9;&#x91CC;&#x8FD8;&#x8981;&#x501F;&#x52A9;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7684;&#x7C7B;<strong>Matrix</strong>&#x4E0E;<strong>BitmapShader</strong>&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x56FE;&#x7247;&#x7684;&#x7F29;&#x653E;&#x6548;&#x679C;&#x3002;</p>\n<h2 id=\"BitmapShader&#x89E3;&#x91CA;\"><a href=\"#BitmapShader&#x89E3;&#x91CA;\" class=\"headerlink\" title=\"BitmapShader&#x89E3;&#x91CA;\"></a>BitmapShader&#x89E3;&#x91CA;</h2><p><strong>BitmapShader</strong>&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570;  </p>\n<ul>\n<li>bitmap - The bitmap to use inside the shader</li>\n<li>tileX - The tiling mode for x to draw the bitmap in.</li>\n<li>tileY - The tiling mode for y to draw the bitmap in.</li>\n</ul>\n<p><strong>tileX</strong>&#x4E0E;<strong>tileY</strong>&#x90FD;&#x662F;<strong>Shader.TileMode</strong>&#x7C7B;&#x578B;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x9009;&#x62E9;&#x503C;</p>\n<ul>\n<li>CLAMP &#x62C9;&#x4F38; </li>\n<li>PEREAT &#x91CD;&#x590D;</li>\n<li>MIRROR &#x955C;&#x50CF;</li>\n</ul>\n<blockquote>\n<p><em>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x53EA;&#x8981;&#x4F7F;&#x7528;CLAMP&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x60F3;&#x77E5;&#x9053;&#x5176;&#x5B83;&#x7684;&#x9009;&#x62E9;&#x503C;&#x7684;&#x5177;&#x4F53;&#x6548;&#x679C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://blog.csdn.net/sjf0115/article/details/7267532\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/sjf0115/article/details/7267532</a></em></p>\n</blockquote>\n<h2 id=\"&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\"><a href=\"#&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\" class=\"headerlink\" title=\"&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;\"></a>&#x83B7;&#x53D6;&#x7F29;&#x653E;&#x503C;</h2><p>&#x56FE;&#x7247;&#x8FC7;&#x5927;&#x4E0E;&#x8FC7;&#x5C0F;&#x90FD;&#x4E0D;&#x597D;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x7EDD;&#x5BF9;&#x7684;&#x9002;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x7F29;&#x653E;&#x503C;&#x7684;&#x83B7;&#x53D6;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x8981;&#x6BD4;&#x8F83;&#x56FE;&#x7247;&#x5BBD;&#x9AD8;&#x4E0E;&#x63A7;&#x4EF6;&#x5BBD;&#x9AD8;&#xFF0C;&#x901A;&#x8FC7;&#x9519;&#x4F4D;&#x76F8;&#x4E58;&#x6765;&#x6BD4;&#x8F83;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x9AD8;&#x54EA;&#x4E2A;&#x4E0E;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x9AD8;&#x76F8;&#x5DEE;&#x66F4;&#x5927;&#x3002;&#x53D6;&#x76F8;&#x5DEE;&#x5927;&#x7684;&#x503C;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x5F97;&#x5230;&#x7F29;&#x653E;&#x503C;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mDrawableRec.set(0, 0, getWidth(), getHeight());</div><div class=\"line\">        if (mBitmapWidth * mDrawableRec.height() &gt; mDrawableRec.width() * mBitmapheight) {</div><div class=\"line\">            scal = mDrawableRec.height() / mBitmapheight;</div><div class=\"line\">        } else {</div><div class=\"line\">            scal = mDrawableRec.width() / mBitmapWidth;</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;BitmapShader\"><a href=\"#&#x8BBE;&#x7F6E;BitmapShader\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;BitmapShader\"></a>&#x8BBE;&#x7F6E;BitmapShader</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mBitmapShader = new BitmapShader(mBitmap, \tShader.TileMode.CLAMP, Shader.TileMode.CLAMP);</div><div class=\"line\">mPaint.setShader(mBitmapShader);</div></pre></td></tr></table></figure>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\"><a href=\"#&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;\"></a>&#x8BBE;&#x7F6E;&#x7F29;&#x653E;&#x4E0E;&#x77E9;&#x9635;</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mMatrix.setScale(scal, scal);</div><div class=\"line\">mBitmapShader.setLocalMatrix(mMatrix);</div></pre></td></tr></table></figure>\n<h2 id=\"onDraw&#x7ED8;&#x5236;\"><a href=\"#onDraw&#x7ED8;&#x5236;\" class=\"headerlink\" title=\"onDraw&#x7ED8;&#x5236;\"></a>onDraw&#x7ED8;&#x5236;</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">@Override</div><div class=\"line\">protected void onDraw(Canvas canvas) {</div><div class=\"line\">    if (mBitmap == null) {</div><div class=\"line\">        return;</div><div class=\"line\">    }</div><div class=\"line\">    //&#x586B;&#x5145;</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mFillPaint);</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mPaint);</div><div class=\"line\">    //&#x63CF;&#x8FB9;</div><div class=\"line\">    if (mStrokeWidth != 0)</div><div class=\"line\">    canvas.drawCircle(getWidth() / 2.0f, getHeight() / 2.0f, mRadius, mBorderPaint);</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>&#x8FD9;&#x91CC;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x8981;&#x6253;&#x4E71;&#xFF0C;&#x5426;&#x5219;&#x56DE;&#x5F71;&#x54CD;&#x56FE;&#x7247;&#x539F;&#x6709;&#x7684;&#x989C;&#x8272;&#x6548;&#x679C;</em></p>\n</blockquote>\n<p>&#x597D;&#x4E86;&#x4E3B;&#x8981;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x4E86;&#xFF0C;&#x5176;&#x5B9E;&#x53EA;&#x8981;&#x7406;&#x89E3;&#x4E0A;&#x9762;&#x7684;&#x5C31;&#x57FA;&#x672C;&#x4E0A;&#x638C;&#x63E1;&#x4E86;&#x5706;&#x5F62;&#x5934;&#x50CF;&#x7684;&#x8BBE;&#x7F6E;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;</h2><ul>\n<li>setBorderColor(); &#x8BBE;&#x7F6E;&#x8FB9;&#x754C;&#x989C;&#x8272;</li>\n<li>setFillColor();    &#x586B;&#x5145;&#x989C;&#x8272;</li>\n<li>setStrokeWidth(); &#x63CF;&#x8FB9;&#x5BBD;&#x5EA6;</li>\n</ul>\n<h2 id=\"&#x5F15;&#x7528;\"><a href=\"#&#x5F15;&#x7528;\" class=\"headerlink\" title=\"&#x5F15;&#x7528;\"></a>&#x5F15;&#x7528;</h2><p>&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#x76F4;&#x63A5;&#x5728;xml&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<strong>CircleImageView</strong>&#x63A7;&#x4EF6;&#xFF0C;</p>\n<p><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5982;&#x679C;&#x8981;&#x5728;xml&#x4E2D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x663E;&#x793A;&#x56FE;&#x7247;&#x65F6;&#x4E0D;&#x8981;&#x4F7F;&#x7528;background&#x8BBE;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x5DEE;&#x9519;&#xFF0C;&#x4F7F;&#x7528;src&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>\n<h1 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h1><p><img src=\"/2016/03/20/circleView/CircleImageView.gif\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<hr>\n<p>&#x66F4;&#x591A;&#x6E90;&#x7801;&#xFF1A;<a href=\"https://github.com/idisfkj/CircleImageView\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/CircleImageView</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"github中README.md插入图片","url":"https://www.rousetime.com/2016/03/13/github-README/","content":"<p>&#x5728;<strong>Github</strong>&#x4E0A;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x6709;&#x4E2A;README.md&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x5728;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x683C;&#x5F0F;&#x95EE;&#x9898;&#xFF0C;&#x56FA;&#x5B9A;&#x7684;&#x8BB0;&#x4F4F;&#x5C31;&#x884C;</p>\n<h3 id=\"&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\"><a href=\"#&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\" class=\"headerlink\" title=\"&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;\"></a>&#x94FE;&#x63A5;&#x683C;&#x5F0F;&#xFF1A;</h3><p>(<a href=\"https://github.com/yourname/your-repository/raw/master/images-folder/xxx.png\" target=\"_blank\" rel=\"external\">https://github.com/yourname/your-repository/raw/master/images-folder/xxx.png</a>)</p>\n<hr>\n<h3 id=\"&#x89E3;&#x91CA;\"><a href=\"#&#x89E3;&#x91CA;\" class=\"headerlink\" title=\"&#x89E3;&#x91CA;\"></a>&#x89E3;&#x91CA;</h3><ul>\n<li>yourname Github&#x5E10;&#x53F7;&#x540D;</li>\n<li>your-repository Github&#x5F53;&#x524D;&#x4ED3;&#x5E93;&#x540D;</li>\n<li>raw/master &#x539F;&#x751F; &#x56FA;&#x5B9A;&#x4E0D;&#x53D8;</li>\n<li>images-folder &#x653E;&#x56FE;&#x7247;&#x7684;&#x6587;&#x4EF6;&#x5939; &#x6CE8;&#x610F;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x5728;&#x4F60;&#x672C;&#x5730;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x4E0B;</li>\n<li>xxx.png &#x56FE;&#x7247;</li>\n</ul>\n<h3 id=\"&#x63D0;&#x4EA4;\"><a href=\"#&#x63D0;&#x4EA4;\" class=\"headerlink\" title=\"&#x63D0;&#x4EA4;\"></a>&#x63D0;&#x4EA4;</h3><p>&#x518D;&#x901A;&#x8FC7;git push &#x63D0;&#x4EA4;&#x5230;<strong>Github</strong>&#x4E0A;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"滑轮选择器","url":"https://www.rousetime.com/2016/03/13/PickerView/","content":"<p>&#x539F;&#x6765;&#x505A;&#x9879;&#x76EE;&#x65F6;&#x7528;&#x5230;&#x4E86;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4E5F;&#x662F;&#x501F;&#x9274;&#x4E86;&#x522B;&#x4EBA;&#x7684;&#xFF0C;&#x4F46;&#x5F53;&#x65F6;&#x65F6;&#x95F4;&#x7D27;&#x4E5F;&#x5C31;&#x6CA1;&#x81EA;&#x5DF1;&#x600E;&#x4E48;&#x4F18;&#x5316;&#x4E0E;&#x5DE9;&#x56FA;&#xFF0C;&#x6700;&#x8FD1;&#x65F6;&#x95F4;&#x5145;&#x8DB3;&#x5C31;&#x91CD;&#x65B0;&#x5DE9;&#x56FA;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x8BB0;&#x4E0B;&#x81EA;&#x5DF1;&#x7684;&#x5FC3;&#x5F97;&#x4E0E;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x4EE5;&#x514D;&#x4EE5;&#x540E;&#x751F;&#x758F;&#xFF0C;&#x6709;&#x4E0D;&#x8DB3;&#x7684;&#x5730;&#x65B9;&#x6B22;&#x8FCE;&#x6307;&#x6559;&#x3002;</p>\n<hr>\n<h1 id=\"&#x5B9E;&#x73B0;&#x539F;&#x7406;\"><a href=\"#&#x5B9E;&#x73B0;&#x539F;&#x7406;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;&#x539F;&#x7406;\"></a>&#x5B9E;&#x73B0;&#x539F;&#x7406;</h1><ul>\n<li>&#x9996;&#x5148;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;<font color=\"#FF0000\">PickerView</font>&#x7EE7;&#x627F;android&#x539F;&#x751F;&#x7684;<font color=\"#FF0000\">View</font></li>\n<li>&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x70B9;&#x51FB;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x89E6;&#x6478;&#x5224;&#x65AD;&#x5B9E;&#x73B0;&#x6ED1;&#x52A8;&#x6548;&#x679C;</li>\n<li>&#x5176;&#x6B21;<font color=\"#FF0000\">TextPicker</font>&#x7EE7;&#x627F;<font color=\"#FF0000\">PopupWindow</font>&#x88C5;&#x8F7D;&#x8FD9;&#x4E2A;<font color=\"#FF0000\">PickerView</font>&#x5B9E;&#x73B0;&#x5C55;&#x793A;</li>\n</ul>\n<blockquote>\n<p><em>&#x539F;&#x7406;&#x8FD8;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x5C31;&#x662F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;PickerView</em></p>\n</blockquote>\n<h2 id=\"PickerView&#x7684;&#x5B9E;&#x73B0;\"><a href=\"#PickerView&#x7684;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"PickerView&#x7684;&#x5B9E;&#x73B0;\"></a>PickerView&#x7684;&#x5B9E;&#x73B0;</h2><p>&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x662F;<font color=\"#FF0000\">onDrawView()</font>&#x4E0E;<font color=\"#FF0000\">drawOtherView</font>&#x7ED8;&#x5236;&#x6ED1;&#x8F6E;&#x9009;&#x62E9;&#x5668;&#x7684;&#x6587;&#x672C;&#x663E;&#x793A;,&#x7136;&#x540E;&#x5C31;&#x662F;&#x89E6;&#x6478;&#x4E8B;&#x4EF6;<font color=\"#FF0000\">onTouchEvent()</font>&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x3002;</p>\n<h3 id=\"onDrawView&#x7684;&#x60F3;&#x6CD5;\"><a href=\"#onDrawView&#x7684;&#x60F3;&#x6CD5;\" class=\"headerlink\" title=\"onDrawView&#x7684;&#x60F3;&#x6CD5;\"></a>onDrawView&#x7684;&#x60F3;&#x6CD5;</h3><p>&#x6ED1;&#x8F6E;&#x7684;&#x6587;&#x672C;&#x6548;&#x679C;&#x662F;&#x8981;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#x663E;&#x793A;&#x6B63;&#x5E38;&#x800C;&#x4E0A;&#x9762;&#x4E0E;&#x4E0B;&#x9762;&#x7684;&#x6587;&#x672C;&#x8981;&#x76F8;&#x5E94;&#x7684;&#x7F29;&#x5C0F;&#x5B57;&#x4F53;&#x5927;&#x5C0F;&#x8FBE;&#x5230;&#x8FDC;&#x79BB;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x6240;&#x7528;&#x9996;&#x5148;&#x7ED8;&#x5236;&#x597D;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x518D;&#x4EE5;&#x4E2D;&#x95F4;&#x7684;&#x6587;&#x672C;&#x4E3A;&#x4E2D;&#x5FC3;&#x7ED8;&#x5236;&#x4E0A;&#x4E0B;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x90E8;&#x5206;&#x6E90;&#x7801;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void onDrawView(Canvas canvas) {</div><div class=\"line\">       float scal = getParabola((screenHeight / 4.0f), moveLength);</div><div class=\"line\">       //&#x5B57;&#x4F53;&#x5C45;&#x4E2D;&#x663E;&#x793A;</div><div class=\"line\">       float x = screenWidth / 2.0f;</div><div class=\"line\">       float y = screenHeight / 2.0f + moveLength;</div><div class=\"line\">       float size = (maxTextSize - minTextSize) * scal + minTextSize;</div><div class=\"line\">       //&#x83B7;&#x5F97;Paint&#x7684;&#x5C5E;&#x6027;&#x53C2;&#x6570;</div><div class=\"line\">       Paint.FontMetricsInt pfm = mPaint.getFontMetricsInt();</div><div class=\"line\">       //&#x5F97;&#x5230;&#x5C45;&#x4E2D;y</div><div class=\"line\">       float baseLine = y - (pfm.top + pfm.bottom) / 2;</div><div class=\"line\">       mPaint.setTextSize(size);</div><div class=\"line\">       mPaint.setAlpha((int) ((maxAlpha - minAlpha) * scal + minAlpha));</div><div class=\"line\">       //&#x753B;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;</div><div class=\"line\">       canvas.drawText(dataList.get(position), x, baseLine, mPaint);</div><div class=\"line\">       //&#x753B;&#x4E0A;&#x9762;&#x4F4D;&#x7F6E;</div><div class=\"line\">       for (int i = 1; position - i &gt;= 0; i++) {</div><div class=\"line\">           drawOtherView(canvas, i, -1);</div><div class=\"line\">       }</div><div class=\"line\">       //&#x753B;&#x4E0B;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">       for (int i = 1; position + i &lt; dataList.size(); i++) {</div><div class=\"line\">           drawOtherView(canvas, i, 1);</div><div class=\"line\">       }</div><div class=\"line\">   }  </div><div class=\"line\">   </div><div class=\"line\">   </div><div class=\"line\">private void drawOtherView(Canvas canvas, int i, int direction) {</div><div class=\"line\">       float offsetY = (MARGIN * minTextSize * i + moveLength * direction);</div><div class=\"line\">       float scal = getParabola(screenHeight / 4.0f, offsetY);</div><div class=\"line\">       float x = screenWidth / 2.0f;</div><div class=\"line\">       float y = screenHeight / 2.0f + direction * offsetY;</div><div class=\"line\">       float size = (maxTextSize - minTextSize) * scal + minTextSize;</div><div class=\"line\">       float alpha = (maxAlpha - minAlpha) * scal + minAlpha;</div><div class=\"line\">       Paint.FontMetricsInt pfm = mPaint.getFontMetricsInt();</div><div class=\"line\">       float baseLine = (float) (y - (pfm.top + pfm.bottom) / 2.0);</div><div class=\"line\">       mPaint.setTextSize(size);</div><div class=\"line\">       mPaint.setAlpha((int) alpha);</div><div class=\"line\">       canvas.drawText(dataList.get(position + direction * i), x, baseLine, mPaint);</div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<p>&#x7136;&#x540E;&#x5C31;&#x662F;&#x89E6;&#x6478;&#x6ED1;&#x52A8;&#x6548;&#x679C;&#xFF0C;&#x901A;&#x8FC7;<font color=\"#FF0000\">doDown()</font>,<font color=\"#FF0000\">doMove()</font>&#x4E0E;<font color=\"#FF0000\">doUp()</font>&#x6765;&#x64CD;&#x4F5C;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">private void doMove(MotionEvent event) {</div><div class=\"line\">        moveLength += event.getY() - eventY;</div><div class=\"line\">        if (moveLength &gt; MARGIN * minTextSize / 2) {</div><div class=\"line\">            //&#x624B;&#x6307;&#x5411;&#x4E0B;&#x6ED1;&#x52A8;&#x6ED1;&#x51FA;&#x8FB9;&#x754C;</div><div class=\"line\">            moveFootTOHead();</div><div class=\"line\">            moveLength = moveLength - MARGIN * minTextSize;</div><div class=\"line\">        } else if (moveLength &lt; -MARGIN * minTextSize / 2) {</div><div class=\"line\">            //&#x624B;&#x6307;&#x5411;&#x4E0A;&#x6ED1;&#x52A8;&#x6ED1;&#x51FA;&#x8FB9;&#x754C;</div><div class=\"line\">            moveHeadToFoot();</div><div class=\"line\">            moveLength = moveLength + MARGIN * minTextSize;</div><div class=\"line\">        }</div><div class=\"line\">        eventY = event.getY();</div><div class=\"line\">        invalidate();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<blockquote>\n<p><em>PickerView&#x7684;&#x4E3B;&#x610F;&#x65B9;&#x6CD5;&#x5C31;&#x8FD9;&#x4E9B;&#x4E86;,&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;</em></p>\n</blockquote>\n<p>&#x5B9E;&#x73B0;&#x4E86;<font color=\"#FF0000\">PickerView</font>&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x72EC;&#x7684;&#x4E00;&#x4E2A;xml&#x4E2D;&#x5E03;&#x5C40;&#xFF0C;xml&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x8D34;&#x4E86;</p>\n<h2 id=\"TextPicker\"><a href=\"#TextPicker\" class=\"headerlink\" title=\"TextPicker\"></a>TextPicker</h2><p>&#x5BF9;&#x4E8E;xml&#x4E2D;<font color=\"#FF0000\">PickerView</font>&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#xFF0C;&#x56E0;&#x4E3A;&#x53EF;&#x4EE5;&#x9879;&#x76EE;&#x4E2D;&#x8981;&#x7528;&#x5230;&#x591A;&#x6B21;&#xFF0C;&#x6240;&#x7528;&#x5199;&#x4E2A;&#x5C01;&#x88C5;&#x7C7B;&#x8FD8;&#x662F;&#x5FC5;&#x987B;&#x7684;</p>\n<h3 id=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"><a href=\"#&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x5BF9;&#x5916;&#x65B9;&#x6CD5;\"></a>&#x5BF9;&#x5916;&#x65B9;&#x6CD5;</h3><ul>\n<li>setPickerTitle(String text)    &#x8BBE;&#x7F6E;&#x6807;&#x9898;</li>\n<li>setData(List<string> dataList, int i) &#x586B;&#x5145;&#x6570;&#x636E;</string></li>\n<li>setMiddleText(int position, int i) &#x8BBE;&#x7F6E;&#x5C45;&#x4E2D;&#x6587;&#x672C;</li>\n<li>getText(int i) &#x83B7;&#x53D6;&#x6587;&#x672C;</li>\n<li>getOK() &#x83B7;&#x53D6;&#x786E;&#x5B9A;&#x63A7;&#x4EF6;</li>\n<li>setPrepare() &#x5F00;&#x542F;</li>\n</ul>\n<h2 id=\"&#x5B9E;&#x73B0;\"><a href=\"#&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x5B9E;&#x73B0;\"></a>&#x5B9E;&#x73B0;</h2><p>&#x6700;&#x540E;&#x5C31;&#x662F;&#x5B9E;&#x4F8B;&#x5316;&#x4E2D;<font color=\"#FF0000\">TextPicker</font>&#x8C03;&#x7528;&#x5176;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">tp = new TextPicker(this);</div><div class=\"line\">        //&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;</div><div class=\"line\">        initData();</div><div class=\"line\">        //&#x52A0;&#x8F7D;&#x6570;&#x636E;</div><div class=\"line\">        tp.setData(leftList, 1);</div><div class=\"line\">        tp.setData(middleList, 2);</div><div class=\"line\">        tp.setData(rightList, 3);</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x6807;&#x9898;</div><div class=\"line\">        tp.setPickerTitle(&quot;&#x6807;&#x9898;&quot;);</div><div class=\"line\">        //&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x5C45;&#x4E2D;&#x6587;&#x672C;</div><div class=\"line\">        tp.setMiddleText(5, 1);</div><div class=\"line\">        tp.setMiddleText(2, 2);</div><div class=\"line\">        tp.setMiddleText(25, 3);</div><div class=\"line\">        //&#x51C6;&#x5907;&#x5B8C;&#x6BD5;</div><div class=\"line\">        tp.setPrepare();</div><div class=\"line\">        ok = tp.getOK();</div><div class=\"line\">        ok.setOnClickListener(new View.OnClickListener(){</div><div class=\"line\">            @Override</div><div class=\"line\">            public void onClick(View v) {</div><div class=\"line\">                leftText = tp.getText(1);</div><div class=\"line\">                middleText = tp.getText(2);</div><div class=\"line\">                rightText = tp.getText(3);</div><div class=\"line\">                tv.setText(leftText+&quot;-&quot;+middleText+&quot;-&quot;+rightText);</div><div class=\"line\">                tp.dismiss();</div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\">        //&#x5C55;&#x793A;</div><div class=\"line\">        tp.showAtLocation(this.findViewById(R.id.main), Gravity.CENTER, 0, 0);</div></pre></td></tr></table></figure>\n<h2 id=\"&#x6548;&#x679C;&#x56FE;\"><a href=\"#&#x6548;&#x679C;&#x56FE;\" class=\"headerlink\" title=\"&#x6548;&#x679C;&#x56FE;\"></a>&#x6548;&#x679C;&#x56FE;</h2><p><img src=\"/2016/03/13/PickerView/pickerView.png\" alt=\"PickerView\"></p>\n<p>&#x66F4;&#x591A;&#x6E90;&#x4EE3;&#x7801;&#xFF1A;<a href=\"https://github.com/idisfkj/idisfkj.picker\" target=\"_blank\" rel=\"external\">https://github.com/idisfkj/idisfkj.picker</a></p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904; idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"Hexo的安装与配置","url":"https://www.rousetime.com/2016/03/04/Hexo-install/","content":"<h1 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h1><p>&#x6211;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5F00;&#x59CB;&#x5199;&#x535A;&#x5BA2;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x662F;&#x6211;&#x4E0D;&#x4E45;&#x524D;&#x5728;<strong>stormzhang</strong>&#x7684;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x5E73;&#x53F0;&#x4E0A;&#x770B;&#x5230;&#x4ED6;&#x5199;&#x7684;&#x6210;&#x957F;&#x7ECF;&#x5386;&#xFF0C;&#x4ED6;&#x4E0A;&#x9762;&#x8BF4;&#x5199;&#x535A;&#x5BA2;&#x662F;&#x4ED6;&#x6210;&#x529F;&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x90E8;&#x5206;&#x3002;&#x6240;&#x7528;&#x5BF9;&#x4E8E;&#x6211;&#x8FD9;&#x79CD;&#x5C0F;&#x767D;&#xFF0C;&#x4E5F;&#x60F3;&#x5C1D;&#x8BD5;&#x7684;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#x3002;&#x4E8E;&#x662F;&#x6211;&#x5C31;&#x5F00;&#x59CB;&#x642D;&#x5EFA;<em>hexo</em>&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x3002;&#x597D;&#x4E86;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x3002;</p>\n<hr>\n<h2 id=\"&#x73AF;&#x5883;&#x914D;&#x7F6E;\"><a href=\"#&#x73AF;&#x5883;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x914D;&#x7F6E;\"></a>&#x73AF;&#x5883;&#x914D;&#x7F6E;</h2><h3 id=\"&#x5B89;&#x88C5;Node\"><a href=\"#&#x5B89;&#x88C5;Node\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Node\"></a>&#x5B89;&#x88C5;Node</h3><p>&#x53EA;&#x8981;&#x5230;<a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"external\">Node.js</a>&#x7684;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7248;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x4E0B;&#x8F7D;&#x540E;&#x4E00;&#x8DEF;&#x5B89;&#x88C5;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;git\"><a href=\"#&#x5B89;&#x88C5;git\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;git\"></a>&#x5B89;&#x88C5;git</h3><p><a href=\"http://git-scm.com/\" target=\"_blank\" rel=\"external\">git</a>&#x7684;&#x5B89;&#x88C5;&#x4E5F;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x7ED9;&#x4E2A;<a href=\"http://git-scm.com/book/zh/v1\" target=\"_blank\" rel=\"external\">&#x6559;&#x7A0B;</a>&#x7ED9;&#x4F60;&#x4EEC;&#x5305;&#x62EC;&#x5B89;&#x88C5;&#x4E0E;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x3002;<br>&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B89;&#x88C5;git&#x4E0B;&#x9762;&#x4F1A;&#x8BB2;&#x5230;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;Sublime-Text\"><a href=\"#&#x5B89;&#x88C5;Sublime-Text\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Sublime Text\"></a>&#x5B89;&#x88C5;Sublime Text</h3><blockquote>\n<p><em>&#x4E2A;&#x4EBA;&#x63A8;&#x8350; &#x540E;&#x9762;&#x6587;&#x4EF6;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x8FD8;&#x662F;&#x5F88;&#x597D;&#x7528;&#x7684;,&#x57FA;&#x672C;&#x4E0A;&#x4EC0;&#x4E48;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x90FD;&#x80FD;&#x6253;&#x5F00;&#x7F16;&#x8F91;&#x3002;</em></p>\n</blockquote>\n<p><a href=\"http://www.sublimetext.com/3\" target=\"_blank\" rel=\"external\">Sublime Text</a>&#x4E0B;&#x8F7D;</p>\n<h3 id=\"Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\"><a href=\"#Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\" class=\"headerlink\" title=\"Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;\"></a>Github&#x8D26;&#x53F7;&#x6CE8;&#x518C;</h3><blockquote>\n<p><em>git&#x5B89;&#x88C5;&#x597D;&#x4E86;&#x540E; &#x5982;&#x679C;&#x6709;github&#x8D26;&#x53F7;&#x4E14;&#x914D;&#x7F6E;&#x4E86;SSH Key&#x8BF7;&#x8DF3;&#x8FC7;&#x8FD9;&#x91CC;</em></p>\n</blockquote>\n<ul>\n<li>&#x9996;&#x5148;&#x53BB;<a href=\"https://github.com/\" target=\"_blank\" rel=\"external\">Github</a>&#x6CE8;&#x518C;&#x8D26;&#x53F7;</li>\n<li>&#x521B;&#x5EFA;&#x4ED3;&#x5E93; New repository &#x5728;Repository name&#x4E2D;&#x5FC5;&#x987B;&#x4E3A;&#x4F60;&#x7684;[your_user_name].github.io <img src=\"/2016/03/04/Hexo-install/github.png\" alt=\"github\"></li>\n<li><p>&#x521B;&#x5EFA;SSH Key</p>\n<p>  &#x521B;&#x5EFA;&#x4F60;&#x7684;&#x7528;&#x6237;&#x540D;&#x4E0E;&#x5BC6;&#x7801;:</p>\n<pre><code>git config --global user.email &quot;your email&quot;\n git config --global user.name &quot;your name&quot;\n</code></pre><p>  &#x751F;&#x6210;&#x5BC6;&#x94A5;&#xFF1A;</p>\n<pre><code>ssh-keygen -t rsa -C &quot;your email&quot;\n</code></pre><p>  &#x6700;&#x540E;&#x6839;&#x636E;&#x63D0;&#x793A;&#x5C31;&#x80FD;&#x751F;&#x6210;SSH Key&#x4E86;<a href=\"https://help.github.com/articles/generating-an-ssh-key/\" target=\"_blank\" rel=\"external\">&#x6559;&#x7A0B;&#x53C2;&#x8003;</a></p>\n</li>\n<li><p>&#x8FDB;&#x5165;Settings&#x4E2D;&#x7684;SSH Keys &#x6DFB;&#x52A0;&#x5BC6;&#x5319;</p>\n</li>\n</ul>\n<h2 id=\"&#x5B89;&#x88C5;hexo\"><a href=\"#&#x5B89;&#x88C5;hexo\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;hexo\"></a>&#x5B89;&#x88C5;hexo</h2><ul>\n<li><p>&#x8FDB;&#x5165;&#x7EC8;&#x7AEF;&#x6267;&#x884C;</p>\n<pre><code>nmp install -g hexo\n</code></pre></li>\n<li><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x4F8B;&#x5982;blog &#x8FDB;&#x5165;blog&#x76EE;&#x5F55;</p>\n<pre><code>init hexo \n</code></pre></li>\n</ul>\n<h2 id=\"hexo&#x914D;&#x7F6E;\"><a href=\"#hexo&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"hexo&#x914D;&#x7F6E;\"></a>hexo&#x914D;&#x7F6E;</h2><h3 id=\"&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\"><a href=\"#&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\" class=\"headerlink\" title=\"&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;\"></a>&#x751F;&#x6210;&#x9759;&#x6001;&#x9875;&#x9762;</h3><p><code>hexo gengerate</code></p>\n<h3 id=\"&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\"><a href=\"#&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\" class=\"headerlink\" title=\"&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;\"></a>&#x5F00;&#x542F;&#x672C;&#x5730;&#x670D;&#x52A1;</h3><p><code>hexo server</code></p>\n<blockquote>\n<p><em>&#x5F00;&#x542F;&#x540E;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668; &#x8F93;&#x5165;<a href=\"http://localhost:4000\" target=\"_blank\" rel=\"external\">http://localhost:4000</a> &#x5C31;&#x80FD;&#x770B;&#x5230;&#x6548;&#x679C;&#x3002;</em></p>\n</blockquote>\n<h3 id=\"&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\"><a href=\"#&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x65B0;&#x5EFA;&#x6587;&#x7AE0;\"></a>&#x65B0;&#x5EFA;&#x6587;&#x7AE0;</h3><pre><code>hexo new &quot;PostName&quot;\n</code></pre><p>##&#x90E8;&#x7F72;&#x6B65;&#x9AA4;<br>&#x4E00;&#x822C;&#x90E8;&#x7F72;&#x6B65;&#x9AA4;&#xFF1A;</p>\n<p><code>hexo clean</code>              // &#x6E05;&#x7406;<br><code>hexo generate</code>            // &#x751F;&#x6210;<br><code>hexo deploy</code>            // &#x90E8;&#x7F72;</p>\n<p>&#x6216;&#x8005;&#x7B80;&#x5199;&#xFF1A;</p>\n<p><code>hexo c</code><br><code>hexo g</code><br><code>hexo d</code></p>\n<blockquote>\n<p><em>&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x540E;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;<a href=\"http://[your_user_name].github.io\" target=\"_blank\" rel=\"external\">http://[your_user_name].github.io</a> &#x5C31;&#x662F;&#x524D;&#x9762;github&#x4E2D;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x540D;&#x5B57;&#x3002;<br>&#x5230;&#x6B64;&#x6240;&#x7528;&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;</em></p>\n</blockquote>\n<h2 id=\"&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\"><a href=\"#&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\" class=\"headerlink\" title=\"&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;\"></a>&#x4E0B;&#x8F7D;&#x4E3B;&#x9898;</h2><p>&#x4E3B;&#x9898;&#x7684;&#x8BDD;&#x5C31;&#x8981;&#x770B;&#x4E2A;&#x4EBA;&#x7684;&#x7231;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x6709;&#x4E00;&#x7CFB;&#x5217;&#x7684;<a href=\"https://github.com/hexojs/hexo/wiki/Themes\" target=\"_blank\" rel=\"external\">&#x4E3B;&#x9898;</a> &#x559C;&#x6B22;&#x54EA;&#x4E2A;&#x5C31;&#x53BB;&#x91CC;&#x9762;&#x4E0B;&#x8F7D;&#x5C31;&#x884C;&#xFF0C;&#x81F3;&#x4E8E;&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x91CC;&#x9762;&#x90FD;&#x8981;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</p>\n<blockquote>\n<p><em>&#x6211;&#x7684;&#x4E3B;&#x9898;&#x662F;<a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"external\">Fexo</a>&#x5BF9;&#x6211;&#x8FD9;&#x4E2A;&#x4E3B;&#x9898;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C31;&#x4E0D;&#x7528;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x53BB;&#x67E5;&#x627E;&#x4E86;</em></p>\n</blockquote>\n<h2 id=\"&#x8BC4;&#x8BBA;&#x6846;\"><a href=\"#&#x8BC4;&#x8BBA;&#x6846;\" class=\"headerlink\" title=\"&#x8BC4;&#x8BBA;&#x6846;\"></a>&#x8BC4;&#x8BBA;&#x6846;</h2><p>&#x8BC4;&#x8BBA;&#x6709;Disqus&#x4E0E;&#x591A;&#x8BF4;&#xFF0C;&#x5728;&#x56FD;&#x5185;&#x63A8;&#x8350;&#x591A;&#x8BF4;&#xFF0C;Disqus&#x662F;&#x9762;&#x5411;&#x5168;&#x7403;&#x7684;</p>\n<h3 id=\"Disqus\"><a href=\"#Disqus\" class=\"headerlink\" title=\"Disqus\"></a>Disqus</h3><p><a href=\"https://disqus.com\" target=\"_blank\" rel=\"external\">Disqus</a>&#x6CE8;&#x518C;Disqus&#x5E10;&#x53F7;</p>\n<h3 id=\"&#x591A;&#x8BF4;\"><a href=\"#&#x591A;&#x8BF4;\" class=\"headerlink\" title=\"&#x591A;&#x8BF4;\"></a>&#x591A;&#x8BF4;</h3><p><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"external\">&#x591A;&#x8BF4;</a>&#x53EF;&#x4EE5;&#x652F;&#x6301;QQ &#x5FAE;&#x4FE1;&#x7B49;&#x767B;&#x5F55;&#xFF0C;&#x767B;&#x5F55;&#x540E;&#x6CE8;&#x518C;&#x57DF;&#x540D;<br>&#x8FDB;&#x5165;hexo&#x76EE;&#x5F55;&#x6253;&#x5F00;_config.yml&#x6587;&#x4EF6;&#x627E;&#x5230;</p>\n<pre><code>&#xFF03;disqus_shortname: [&#x57DF;&#x540D;]\n duoshuo_shortname: [&#x57DF;&#x540D;]\n</code></pre><blockquote>\n<p><em>Disqus&#x4E5F;&#x662F;&#x4E00;&#x6837;</em></p>\n</blockquote>\n<h2 id=\"&#x7EDF;&#x8BA1;\"><a href=\"#&#x7EDF;&#x8BA1;\" class=\"headerlink\" title=\"&#x7EDF;&#x8BA1;\"></a>&#x7EDF;&#x8BA1;</h2><blockquote>\n<p><em>&#x6211;&#x8FD9;&#x91CC;&#x53EA;&#x8BF4;&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</em></p>\n</blockquote>\n<p>&#x8FDB;&#x5165;<a href=\"http://sitecenter.baidu.com/\" target=\"_blank\" rel=\"external\">&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;</a>&#x6CE8;&#x518C;&#x767B;&#x5F55;&#x5E10;&#x53F7;<br>&#x8FDB;&#x53BB;&#x7F51;&#x7AD9;&#x4E2D;&#x5FC3;&#x7684;&#x4EE3;&#x7801;&#x83B7;&#x53D6;    &#x628A;&#x83B7;&#x53D6;&#x7684;&#x4EE3;&#x7801;&#x653E;&#x5165; hexo/themes/fexo/layout/_partial&#x4E2D;baidu-analytics.ejs&#x6587;&#x4EF6;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;% if (theme.baidu_analytics){ %&gt;</div><div class=\"line\">  &lt;script type=&quot;text/javascript&quot;&gt;</div><div class=\"line\">  //&#x83B7;&#x53D6;&#x7684;&#x4EE3;&#x7801;</div><div class=\"line\">   &lt;/script&gt;</div><div class=\"line\">&lt;% } %&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"RSS\"><a href=\"#RSS\" class=\"headerlink\" title=\"RSS\"></a>RSS</h2><h3 id=\"feed&#x5B89;&#x88C5;\"><a href=\"#feed&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"feed&#x5B89;&#x88C5;\"></a>feed&#x5B89;&#x88C5;</h3><p><code>npm install hexo-generator-feed</code></p>\n<h3 id=\"&#x5F00;&#x542F;\"><a href=\"#&#x5F00;&#x542F;\" class=\"headerlink\" title=\"&#x5F00;&#x542F;\"></a>&#x5F00;&#x542F;</h3><p>&#x8FDB;&#x5165;hexo_config.yml&#x627E;&#x5230;Plugins</p>\n<pre><code>Plugins:\n - hexo-generator-feed\n</code></pre><p><code>feed:\n    type: atom\n    path: atom.xml\n    limit: 20</code></p>\n<h3 id=\"&#x8BBF;&#x95EE;\"><a href=\"#&#x8BBF;&#x95EE;\" class=\"headerlink\" title=\"&#x8BBF;&#x95EE;\"></a>&#x8BBF;&#x95EE;</h3><p> &#x8BBF;&#x95EE;<a href=\"http://localhost:4000/atom.xml&#x67E5;&#x770B;\" target=\"_blank\" rel=\"external\">http://localhost:4000/atom.xml&#x67E5;&#x770B;</a></p>\n<h3 id=\"&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\"><a href=\"#&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x5347;&#x7EA7;&#x63D2;&#x4EF6;\"></a>&#x5347;&#x7EA7;&#x63D2;&#x4EF6;</h3><pre><code>npm update\n</code></pre><h3 id=\"&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\"><a href=\"#&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\" class=\"headerlink\" title=\"&#x5378;&#x8F7D;&#x63D2;&#x4EF6;\"></a>&#x5378;&#x8F7D;&#x63D2;&#x4EF6;</h3><pre><code>nmp uninstall hexo-generator-feed\n</code></pre><h3 id=\"sitemap&#x5B89;&#x88C5;\"><a href=\"#sitemap&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"sitemap&#x5B89;&#x88C5;\"></a>sitemap&#x5B89;&#x88C5;</h3><p><code>npm install hexo-generator-sitemap</code></p>\n<h3 id=\"&#x5F00;&#x542F;-1\"><a href=\"#&#x5F00;&#x542F;-1\" class=\"headerlink\" title=\"&#x5F00;&#x542F;\"></a>&#x5F00;&#x542F;</h3><p>&#x8FDB;&#x5165;hexo_config.yml&#x627E;&#x5230;Plugins</p>\n<pre><code>Plugins:\n - hexo-generator-sitemap\n</code></pre><p><code>sitemap:\n    path: sitemap.xml</code></p>\n<blockquote>\n<p><em>&#x8BBF;&#x95EE; &#x5347;&#x7EA7; &#x5378;&#x8F7D;&#x4E0E;feed&#x4E00;&#x6837;</em> </p>\n</blockquote>\n<h3 id=\"&#x63D0;&#x9192;\"><a href=\"#&#x63D0;&#x9192;\" class=\"headerlink\" title=\"&#x63D0;&#x9192;\"></a>&#x63D0;&#x9192;</h3><p>&#x53EF;&#x80FD;&#x5B89;&#x88C5;&#x4E86;feed&#x4E0E;sitemap &#x8BBF;&#x95EE;<a href=\"http://localhost:4000/atom.xml\" target=\"_blank\" rel=\"external\">http://localhost:4000/atom.xml</a> &#x4F1A;&#x663E;&#x793A;&#x201C;Cannot GET atom.xml&#x201D;&#x4E0E;&#x201D;Cannot GET sitemap.xml&#x201D;&#x6253;&#x5F00;hexo&#xFF0F;package.jso &#x6DFB;&#x52A0;</p>\n<pre><code>&quot;hexo-generator-feed&quot;: &quot;1.1.0&quot;,\n&quot;hexo-generator-sitemap&quot;: &quot;1.1.2&quot;,\n</code></pre><blockquote>\n<p><em>&#x7248;&#x672C;&#x53F7;&#x5339;&#x914D;&#x81EA;&#x5DF1;&#x7684;</em></p>\n</blockquote>\n<p>&#x6DFB;&#x52A0;&#x5B8C;&#x540E; hexo g  &#x518D;&#x91CD;&#x65B0;&#x8BBF;&#x95EE;</p>\n<h2 id=\"&#x5199;&#x6587;&#x7AE0;\"><a href=\"#&#x5199;&#x6587;&#x7AE0;\" class=\"headerlink\" title=\"&#x5199;&#x6587;&#x7AE0;\"></a>&#x5199;&#x6587;&#x7AE0;</h2><p>&#x8FDB;&#x5165;hexo&#xFF0F;source&#xFF0F;_posts &#x627E;&#x5230;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#x7684;.md &#x8FDB;&#x884C;&#x7F16;&#x5199;<br>hexo&#x5199;&#x6587;&#x7AE0;&#x662F;&#x4F7F;&#x7528;Markdown&#x7F16;&#x5199;&#x6587;&#x7AE0; <a href=\"http://www.jianshu.com/p/1e402922ee32/\" target=\"_blank\" rel=\"external\">Markdown&#x2013;&#x5165;&#x95E8;&#x6307;&#x5357;</a></p>\n<blockquote>\n<p><em>&#x5220;&#x9664;&#x6587;&#x7AE0;&#x53EA;&#x8981;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x7684;.md&#x6587;&#x4EF6;&#x5C31;&#x884C;</em></p>\n</blockquote>\n<h2 id=\"&#x7ED3;&#x675F;\"><a href=\"#&#x7ED3;&#x675F;\" class=\"headerlink\" title=\"&#x7ED3;&#x675F;\"></a>&#x7ED3;&#x675F;</h2><p>&#x597D;&#x4E86;hexo&#x7684;&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x591A;&#x591A;&#x652F;&#x6301;&#x3002;</p>\n<blockquote>\n<p><em>&#x8F6C;&#x8F7D;&#x8BF7;&#x6307;&#x660E;&#x51FA;&#x5904;idisfkj&#x535A;&#x5BA2;&#xFF1A;<a href=\"https://idisfkj.github.io\" target=\"_blank\" rel=\"external\">https://idisfkj.github.io</a></em></p>\n</blockquote>\n"},{"title":"category","url":"https://www.rousetime.com/category/index.html","content":""},{"title":"about","url":"https://www.rousetime.com/about/index.html","content":""},{"title":"link","url":"https://www.rousetime.com/link/index.html","content":""},{"title":"tag","url":"https://www.rousetime.com/tag/index.html","content":""},{"title":"","url":"https://www.rousetime.com/css/personal-style.css","content":"@font-face {\n    font-family: &quot;SentyPea&quot;;\n    src: url(&quot;/fonts/SentyPea.eot&quot;); /* IE9 */\n    src: url(&quot;/fonts/SentyPea.eot?#iefix&quot;) format(&quot;embedded-opentype&quot;),\n    url(&quot;/fonts/SentyPea.woff&quot;) format(&quot;woff&quot;),\n    url(&quot;/fonts/SentyPea.ttf&quot;) format(&quot;truetype&quot;),\n    url(&quot;/fonts/SentyPea.svg#SentyPea&quot;) format(&quot;svg&quot;); /* iOS 4.1- */\n    font-style: normal;\n    font-weight: normal;\n}\nhtml.page-home {\n   position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url(&apos;/images/bg.jpg&apos;);\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background: linear-gradient( #1abc9c, transparent), linear-gradient( 90deg, skyblue, transparent), linear-gradient( -90deg, coral, transparent);\n/*  background-blend-mode: screen;\n  background: linear-gradient(to left, #5f2c82, #49a09d);*/\n}"},{"title":"search","url":"https://www.rousetime.com/search/index.html","content":""}]